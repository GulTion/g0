<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::71477</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>166</td><td>c function</td><td>160208T230727Z</td><td><a href="https://codegolf.stackexchange.com/questions/71477/principal-square-root-without-resorting-to-built-ins/71491#71491">Digital </a></td></tr>
</table>
<div id="pu0" class="pu"><h1>c (function), 166</h1>
<p>Now with complex numbers.  Uses the <a href="https://gcc.gnu.org/onlinedocs/gcc-3.3/gcc/Complex.html" rel="nofollow noreferrer">GCC complex number extension</a>.</p>
<p>Straightforward golfing of the famous <a href="https://en.wikipedia.org/wiki/Fast_inverse_square_root" rel="nofollow noreferrer">Fast inverse square root</a> method.  This method gives <code>1/sqrt(n)</code>, so we simply multiply this by <code>n</code> to give <code>sqrt(n)</code>:</p>
<pre class="lang-c prettyprint-override"><code>#include &lt;complex.h&gt;
#define M y*=1.5-n*y*y/2
i;_Complex float f(float m){float y,n;n=m&gt;0?m:-m;y=n;i=0x5f3759df-*(int*)&amp;y/2;y=*(float*)&amp;i;M;M;M;return m&gt;0?y*n:y*n*I;}
</code></pre>
<p>The <a href="https://github.com/id-Software/Quake-III-Arena/blob/master/code/game/q_math.c#L552" rel="nofollow noreferrer">famous snippet of Quake code</a> only does one iteration of Newton's method, which gives a fairly inaccurate answer.  Three iterations here seems to be enough for 6 decimal places, at least for the testcases.</p>
<p><a href="https://ideone.com/XT2CbV" rel="nofollow noreferrer">Try it online.</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/71477/">71477</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




