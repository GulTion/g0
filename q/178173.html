<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::178173</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>003</td><td>Uiua</td><td>231114T051916Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/266721#266721">chunes</a></td></tr>
<tr d-ix="1"><td>027</td><td>Charcoal</td><td>181231T214924Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178197#178197">Neil</a></td></tr>
<tr d-ix="2"><td>004</td><td>Dyalog APL</td><td>190102T022025Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178238#178238">lirtosia</a></td></tr>
<tr d-ix="3"><td>101</td><td>Python 2</td><td>190102T144804Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178255#178255">TFeld</a></td></tr>
<tr d-ix="4"><td>151</td><td>Scala</td><td>190102T063452Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178241#178241">ASCII-on</a></td></tr>
<tr d-ix="5"><td>109</td><td>Groovy</td><td>190102T023811Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178239#178239">ASCII-on</a></td></tr>
<tr d-ix="6"><td>095</td><td>Clean</td><td>181231T234535Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178202#178202">Οurous</a></td></tr>
<tr d-ix="7"><td>211</td><td>Python 2</td><td>190102T012311Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178235#178235">CCB60</a></td></tr>
<tr d-ix="8"><td>095</td><td>R</td><td>190101T143117Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178220#178220">digEmAll</a></td></tr>
<tr d-ix="9"><td>093</td><td>JavaScript ES6</td><td>190101T122607Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178215#178215">Arnauld</a></td></tr>
<tr d-ix="10"><td>010</td><td>Brachylog v2</td><td>181231T162738Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178188#178188">ais523</a></td></tr>
<tr d-ix="11"><td>007</td><td>Jelly</td><td>181231T131008Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178176#178176">Dennis</a></td></tr>
<tr d-ix="12"><td>010</td><td>05AB1E</td><td>181231T141705Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178180#178180">Mr. Xcod</a></td></tr>
<tr d-ix="13"><td>012</td><td>MATL</td><td>181231T123952Z</td><td><a href="https://codegolf.stackexchange.com/questions/178173/count-the-contiguous-submatrices/178175#178175">Luis Men</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a>, <sup><s> 4 </s></sup> 3 <a href="https://codegolf.stackexchange.com/a/265917/97916">bytes</a></h1>
<pre><code>⧻⊚⌕
</code></pre>
<p><a href="https://uiua.org/pad?src=0_2_0__ZiDihpAg4qe74oqa4oyVCgpbWzEgNF0KIFszIDFdXQpmW1szIDFdCiAgWzEgNF1dCgpbWzMgMSA0IDAgNV0KIFs2IDMgMSAwIDRdCiBbNSA2IDMgMCAxXV0KZltbMSA0XQogIFszIDFdXQoKW1szIDEgNCA1XQogWzYgMyAxIDRdCiBbNSA2IDMgMV1dCmZbWzEgNF0KICBbMyAxXV0KCltbMyAxIDQgNV0KIFs2IDMgMSA0XQogWzUgNiAzIDFdXQpmW1szXV0KCltbMyAxIDMgMSAzIDEgMyAxIDNdXQpmW1szIDEgM11dCg==" rel="nofollow noreferrer">Try it!</a></p>
<p>-1 thanks to Razetime</p>
<pre><code>⧻⊚⌕
  ⌕  # find
 ⊚   # where
⧻    # length
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>36</s> 27 bytes</h1>

<pre><code>ＩΣ⭆η⭆ι⁼θＥ✂ηκ⁺Ｌθκ¹✂νμ⁺Ｌ§θ⁰μ¹
</code></pre>

<p><a href="https://tio.run/##VYzBCsIwEETvfsUet7CCwdaLJxEPgkIhx5BDqKUtptE2ifj3MWkEcWFg3vDYpldz81A6hHoejMOjsg65H5G7yN1VPbEn@MFAcJq80hYngjRwPTRtcu4EtfYWL63pXI9TEacYFpMdQzD@Owd3Nrf2nV5tiuiNi/@9fQhCCEalpBWA2BKTqYnUqKQqzztaMENFC0opw/qlPw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Much shorter now that Equals works for arrays again. Explanation:</p>

<pre><code>   η                        Input array B
  ⭆                         Mapped over rows and joined
     ι                      Current row
    ⭆                       Mapped over columns and joined
       θ                    Input array A
      ⁼                     Is equal to
          η                 Input array B
         ✂                  Sliced
                ¹           All elements from
           κ                Current row index to
             Ｌ              Length of
              θ             Input array A
            ⁺               Plus
               κ            Current row index
        Ｅ                   Mapped over rows
                  ν         Current inner row
                 ✂          Sliced
                          ¹ All elements from
                   μ        Current column index to
                     Ｌ      Length of
                       θ    Input array A
                      §     Indexed by
                        ⁰   Literal 0
                    ⁺       Plus
                         μ  Current column index
 Σ                          Digital sum
Ｉ                           Cast to string
                            Implicitly printed
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Dyalog APL, <s>6</s> 4 bytes</h1>

<pre><code>≢∘⍸⍷
</code></pre>

<p>This is nearly a builtin (thanks <a href="https://codegolf.stackexchange.com/users/71256/h-pwiz">H.PWiz</a> and <a href="https://codegolf.stackexchange.com/users/24908/ngn">ngn</a>).</p>

<pre><code>  ⍷       Binary matrix containing locations of left argument in right argument
≢∘⍸       Size of the array of indices of 1s
</code></pre>

<p>Alternative non-builtin:</p>

<pre><code>{+/,((*⍺)≡⊢)⌺(⍴⍺)*⍵}
</code></pre>

<p>Dyadic function that takes the big array on right and subarray on left.</p>

<pre><code>                  *⍵       exp(⍵), to make ⍵ positive.
    ((*⍺)≡⊢)⌺(⍴⍺)        Stencil;
                            all subarrays of ⍵ (plus some partial subarrays
                            containing 0, which we can ignore)
               ⍴⍺             of same shape as ⍺
     (*⍺)≡⊢                   processed by checking whether they're equal to exp(⍺).
                           Result is a matrix of 0/1.
   ,                     Flatten
 +/                      Sum.
</code></pre>

<p>Try it <a href="https://tryapl.org/?a=%282%202%u23741%204%203%201%29%7B+/%2C%28%28%u237A%u2261%u22A2%29%u233A%28%u2374%u237A%29%29%u2375%7D3%204%u23743%201%204%205%206%203%201%204%205%206%203%201&amp;run" rel="nofollow noreferrer">here</a>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 101 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda a,b:sum(a==[l[j:j+len(a[0])]for l in b[i:i+len(a)]]for i,L in e(b)for j,_ in e(L))
e=enumerate
</code></pre>

<p><a href="https://tio.run/##jYxLDoMgFEXHZRUknUD6BvjrwIQduANKGkgxxSgaq4Oungo2UUft4CXvfs4d3tOzd6mv@c23qtMPhRXo8jV3RHEuWtGUzaU1jijBJJV1P@IWW4e1sKVdAyqjbaEKgSGaBtnAfZUVpchw4@bOjGoyfhitm3BNhMggkSASyKUEdBLxg@hKis8Moa26i2J1@SAHBsXiXiEoFhsFBMW@E8nviW1gw1c43cPZn1B2gJbCHjxcrOf@Aw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 151 bytes</h1>



<pre class="lang-scala prettyprint-override"><code>(a,b)=&gt;{(0 to b.size-a.size).map(i=&gt;(0 to b(0).size-a(0).size).count(j=&gt;{var k=i-1
a.forall(c=&gt;{var l=j-1;k+=1
c.forall(d=&gt;{l+=1
b(k)(l)==d})})})).sum}
</code></pre>

<p><a href="https://tio.run/##rY/BTsQgEIbvfQqOQ5w24O560LCJFxMTfQKzB0rbhJalTUuNcdNnr6XLNumqJ4UwDP8/8wGdkkaOdVrmypFXqS3JP1xus448Ns0pepctKe6fequcru3t24vu3Dk8W3c44PXZRzGCxJSK/QkYcTVJk05/5rGcN5ocZQNa7IMHjAb7ktFE1b11UE4Af30ldMwjmRR1K40BFWQjypg/VDeCR@riZZNnvJJCRcFQIbKB@jmR@@MwNq22zlgowD/5HDbI6fwN4LilIV3OuNRMI/qp/6oKV2TcIsNdEO/QK2yp36FX2B/Ya/Ka@zt183@kqfY7bbXm3mH8Ag" rel="nofollow noreferrer" title="Scala – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="http://groovy-lang.org/" rel="nofollow noreferrer">Groovy</a>, 109 bytes</h1>

<pre><code>{a,b-&gt;(0..&lt;b.size()).sum{i-&gt;(0..&lt;b[i].size()).count{j-&gt;k=i-1
a.every{l=j;k++
it.every{(b[k]?:b)[l++]==it}}}}}
</code></pre>

<p><a href="https://tio.run/##lYtdC4IwFIbv/SUbO46J2kU1@yFjFy40lqbhF9joty8nlUY3deDw8n48p6auh9Hm3JoUlJ8gRule0VbfMoQxbfuL0a9UaPkujnVfdebsJwXXfuClNBuyZjQlP@8KQjzdPQOkRCEPW4VFSYjkXHd3d/ba6KorK5QjIUIIJIgAIjnJrDBnEmNvvVs1MFMQAYN4Mhtwjs19DM6xH/mFXthvMvyfmPqF@ni3tQ8" rel="nofollow noreferrer" title="Groovy – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Ourous/curated-clean-linux" rel="nofollow noreferrer">Clean</a>, <s>118</s> <s>97</s> 95 bytes</h1>

<pre><code>import StdEnv,Data.List
?x=[transpose y\\z&lt;-tails x,y&lt;-inits z]
$a b=sum[1\\x&lt;- ?b,y&lt;- ?x|y==a]
</code></pre>

<p><a href="https://tio.run/##JYw7C8IwFEb3/oo7ON4KxcfU0KUOgoPgmGS49iGBJC3NVRrxtxurTt85HPga25FPbmjvtgNHxifjxmFiuHB78A@siWl9MoGzahaSJ/JhHEIHUalnmTMZG2DGWObGGw7w1NmK4CrC3clCqbnMobp@M1TzKwpBOl2YlnsBK5CywK1GucFC68WWxS3uNILc40@WuMMfa53eTW/pFlJ@PKU6enKm@cvZEvfD5D4" rel="nofollow noreferrer" title="Clean – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 211 bytes</h1>



<pre class="lang-python prettyprint-override"><code>a,b=input()
l,w,L,W,c=len(a),len(a[0]),len(b),len(b[0]),0
for i in range(L):
 for j in range(W):
  if j&lt;=W-w and i&lt;=L-l:
   if not sum([a[x][y]!=b[i+x][j+y]for x in range(l)for y in range(w)]):
    c+=1
print c 
</code></pre>

<p><a href="https://tio.run/##jY/BboMwDIbveQrvRDJcCdayw9S8AXcOkQ@Q0i2IBcSogKdnSbopqrTDDpF/f/5/Rx63@WOwL7seLi1ISJJkr7GRxo63mQvW44IlVqhl31peCwxFZXRXzU8JIGPXYQIDxsJU2/eWl@KNgWddZJVnYK7QnWV1WKC2FzBnWR56z/3ADjN83T65qtVKaqMn2SiTOtmlG/lta9zWCw@2CBZB4QMAncqcjZOxM2jY3V2sXVvN/Z3iGYpdqSPmhCrHExGCCgIDJPbQ@aETeMIMCwdf0XdZMBTou@yP0G8mJqL/7j7@z@VYdD48om8" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Fairly straightforward. Step through the larger matrix, and check if the smaller matrix can fit.</p>

<p>The only even slightly tricky step is the list comprehension in the 6th line, which relies on Python's conventions for mixing Boolean and integer arithmetic.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 95 bytes</h1>



<pre class="lang-r prettyprint-override"><code>function(A,B,x=dim(A),D=dim(B)-x){for(i in 0:D)for(j in 0:D[2])F=F+all(B[1:x+i,1:x[2]+j]==A);F}
</code></pre>

<p><a href="https://tio.run/##pZDRCoIwFIbvfYqBNzt4Aue0C2MXivgS4kUpwsImSIEQPfvaLEsJEurAxvn@w76x9boRurmo6iw7RRNMcRC1PNEEMBubFDYDXJuup5JIRfw4AwvHJxRBCbnIvX3b0rRg8eBJNLuJvWMpRAK7/KYb2h@kqmlFOTLAijIMAZBMqUV8DAHIarnEd97K@eE/lGxVaRBDjOxkiyPYNsIRPm9xSfBScqOZ189K7iz@EjlM5kU6X9/f75JQ3wE" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1>JavaScript (ES6), 93 bytes</h1>
<p>Takes input as <code>(A)(B)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;b=&gt;b.map((r,y)=&gt;r.map((_,x)=&gt;s+=!a.some((R,Y)=&gt;R.some((v,X)=&gt;v!=(b[y+Y]||0)[x+X]))),s=0)|s
</code></pre>
<p><a href="https://tio.run/##rYxBCoMwEEX3nkJ3CU4lonYXD@FKCaFEq6VFjZgiCt7dxloLSumiFDKQ9@fPu4lOqKy9NvdDLc/5VNBJ0DDVz6lEg1ALA6Zhu8AJeg3KppZwlKxyhCJIdBK9qINYU2dRlLLBTvg4Esx6O@YYY1CU4FFNmayVLHOnlBdUIGaYJvPA5TB/XPC5wfGSzgDrWqfYMD7c7ltvI/hAIFh2R5gDslYDmAPyq3Yj3Si/CL3/WHR3Z9rM83J6AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="noreferrer">Brachylog</a> (v2), 10 bytes</h1>

<pre><code>{{s\s\}ᵈ}ᶜ
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/r/v7q6OKY4pvbh1o7ah9vm/P8fHR1trGOoY6JjGqsTbaYDZgNZpjpgdiyQGQ0RAfNi/0cBAA" rel="noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>

<p>I like how clear and straightforward this program is in Brachylog; unfortunately, it's not that short byte-wise because the metapredicate syntax takes up three bytes and has to be used twice in this program.</p>

<h2>Explanation</h2>

<pre><code>{{s\s\}ᵈ}ᶜ
  s         Contiguous subset of rows
   \s\      Contiguous subset of columns (i.e. transpose, subset rows, transpose)
 {    }ᵈ    The operation above transforms the first input to the second input
{       }ᶜ  Count the number of ways in which this is possible
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 bytes</h1>

<pre><code>ZẆ$⁺€Ẏċ
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/z/q4a42lUeNux41rXm4q@9I9//Dy430I///1@BSiI421DGJ1eFSUIg21jGMjeXSAYmBmGAxkCRCTMdEx0DHFCJjpgMSMIBpNtUBCRggjMBhLNAIFANQtFNHszGyDhSMIgHkaAIA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>ZẆ$⁺€Ẏċ  Main link. Arguments: B, A

  $      Combine the two links to the left into a monadic chain.
Z          Zip; transpose the matrix.
 Ẇ         Window; yield all contiguous subarrays of rows.
   ⁺     Duplicate the previous link chain.
    €    Map it over the result of applying it to B.
         This generates all contiguous submatrices of B, grouped by the selected
         columns of B.
     Ẏ   Tighten; dump all generated submatrices in a single array.
      ċ  Count the occurrences of A.
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 10 bytes</h1>

<pre><code>øŒεøŒI.¢}O
</code></pre>

<p><a href="https://tio.run/##yy9OTMpM/f//8I6jk85tBZGeeocW1fr//x8dbaxjqGOiYxqrE22mA2YDWaY6YHZsLFd0NEQEzAMA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<pre><code>øŒεøŒI.¢}O     Full program. Takes 2 matrices as input. First B, then A.
øŒ             For each column of B, take all its sublists.
  ε     }      And map a function through all those lists of sublists.
   øŒ          Transpose the list and again generate all its sublists.
               This essentially computes all sub-matrices of B.
     I.¢       In the current collection of sub-matrices, count the occurrences of A.
         O     At the end of the loop sum the results.
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 12 bytes</h1>
<pre><code>ZyYC2MX:=XAs
</code></pre>
<p>Inputs are <strong>A</strong>, then <strong>B</strong>.</p>
<p><a href="https://tio.run/##y00syfn/P6oy0tnIN8LKNsKx@P//aEMdE2sFYx3DWK5oIGmtAOTHAgA" rel="nofollow noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmf8D@qMtLZyDfCyjbCsfi/S8j/aEMdE2sFYx3DWK5oIGmtAOQDmaiiOiY6Bjqm1gpmOiCOAUjOVAfEMQCrgChWQCiGK4UrBMvhlQcA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<p>Consider inputs <code>[1,4; 3 1]</code>, <code>[3,1,4,5; 6,3,1,4; 5,6,3,1]</code>. The stack is shown with the most recent element below.</p>
<pre><code>Zy    % Implicit input: A. Push size as a vector of two numbers
      % STACK: [2 2]
YC    % Implicit input: B. Arrange sliding blocks of specified size as columns,
      % in column-major order
      % STACK: [3 6 1 3 4 1;
                6 5 3 6 1 3;
                1 3 4 1 5 4;
                3 6 1 3 4 1]
2M    % Push input to second to last function again; that is, A
      % STACK: [3 6 1 3 4 1;
                6 5 3 6 1 3;
                1 3 4 1 5 4;
                3 6 1 3 4 1],
               [1 4;
                3 1]                    
X:    % Linearize to a column vector, in column-major order
      % STACK: [3 6 1 3 4 1;
                6 5 3 6 1 3;
                1 3 4 1 5 4;
                3 6 1 3 4 1],
               [1;
                3;
                4;
                1]  
=     % Test for equality, element-wise with broadcast
      % STACK: [0 0 1 0 0 1
                0 0 1 0 0 1;
                0 0 1 0 0 1;
                0 0 1 0 0 1]
XA    % True for columns containing all true values
      % STACK: [0 0 1 0 0 1]
s     % Sum. Implicit display
      % STACK: 2
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/178173/">178173</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




