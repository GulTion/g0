<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::55211</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>023</td><td>Pip</td><td>240326T233835Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/272108#272108">DLosc</a></td></tr>
<tr d-ix="1"><td>043</td><td>Retina</td><td>150830T004216Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55653#55653">mbomb007</a></td></tr>
<tr d-ix="2"><td>441</td><td>Perl 5</td><td>150901T232532Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55855#55855">LukStorm</a></td></tr>
<tr d-ix="3"><td>028</td><td>Pip</td><td>150910T210514Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/57550#57550">DLosc</a></td></tr>
<tr d-ix="4"><td>058</td><td>gawk</td><td>150906T024311Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/57122#57122">Cabbie40</a></td></tr>
<tr d-ix="5"><td>036</td><td>Perl</td><td>150906T005126Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/57117#57117">Jarmex</a></td></tr>
<tr d-ix="6"><td>045</td><td>REGXY</td><td>150905T230519Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/57114#57114">Jarmex</a></td></tr>
<tr d-ix="7"><td>105</td><td>sed</td><td>150831T152529Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55746#55746">LukStorm</a></td></tr>
<tr d-ix="8"><td>065</td><td>JavaScript</td><td>150823T190553Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55213#55213">user4209</a></td></tr>
<tr d-ix="9"><td>040</td><td>Retina</td><td>150830T081339Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55666#55666">randomra</a></td></tr>
<tr d-ix="10"><td>050</td><td>CJam</td><td>150830T062041Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55662#55662">Reto Kor</a></td></tr>
<tr d-ix="11"><td>098</td><td>k</td><td>150830T003100Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55652#55652">Aaron Da</a></td></tr>
<tr d-ix="12"><td>nan</td><td>Python 2.7</td><td>150824T070245Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55234#55234">Kamehame</a></td></tr>
<tr d-ix="13"><td>077</td><td>rs</td><td>150823T193418Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55214#55214">kirbyfan</a></td></tr>
<tr d-ix="14"><td>094</td><td>Ruby</td><td>150823T193810Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55215#55215">JWT</a></td></tr>
<tr d-ix="15"><td>038</td><td>Pyth</td><td>150823T190112Z</td><td><a href="https://codegolf.stackexchange.com/questions/55211/distributing-numbers/55212#55212">orlp</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 23 bytes</h1>
<pre><code>HDQa^'(R:+XD'(.+a.`*&amp;)`
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgwYKlpSVpuhbbPVwCE-PUNYKstCNc1DX0tBP1ErTUNBMgslBFa6OVLDR0TQy0DS00lWKhggA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<pre class="lang-lisp prettyprint-override"><code>HDQa^'(R:+XD'(.+a.`*&amp;)`
   a                    ; Command-line argument
    ^'(                 ; Split on open parenthesis
 DQ                     ; Get the last element of that list
H                       ; Take all but the last character
                        ; This gives us the expression inside the parentheses
       R:               ; Replace
         +XD            ; each regex match of a run of digits
                        ; with:
            '(          ;  Open parenthesis
              .         ;  concatenated to
               +a       ;  Convert a to number (gets the part before the open paren)
                 .      ;  concatenated to
                  `*&amp;)` ;  Replacement pattern: * followed by match followed by )
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/mbuettner/retina" rel="nofollow noreferrer">Retina</a>, <s>50</s> <s>51</s> 43 bytes</h1>
<p>I think this <em>may</em> be my first Retina program. If not, it's my first Retina program that's this complex (not that complex, really.) Each line goes in its own file.</p>
<pre><code>+`(\d+)\((\D?)(\d+)
$1($'$2($1*$3)
.+?\)
$'
</code></pre>
<p>I didn't actually test this with Retina, I tested it using a regex-replace tester multiple times, but it should work.</p>
<h3>Description for first example:</h3>
<p>Since there are an even number of files, Retina uses replace mode. The first replace (first two files) removes a number to be distributed and adds that distribution pair <code>(23*12)</code> to the end, giving <code>23(+42)(23*12)</code>. <code>+`</code> at the start tells Retina to repeatedly replace until the pattern doesn't match, and since this is matched again, the pattern replaces this with <code>23()(23*12)+(23*42)</code>. This doesn't match anymore, so the next 2 files are used for the next replace. This time, it merely removes the <code>23()</code>. This works nicely: since products are appended to the end, I don't have to do anything weird if a number doesn't have a sign, since the only one that can be without a sign is the first number.</p>
<p>EDIT: <code>$'</code> in replacement represents the rest of the string after the match, so I can removing the trailing <code>(.*)</code>s.</p>
</div>
<div id="pu2" class="pu"><h1>Perl 5, <s>70</s> <s>60</s> <s>55</s> 44 Bytes + 1 penalty</h1>

<p>A perl solution that only uses split and 1 regular expression.<br>
Also calculates the longer inputs. </p>

<pre><code>($a,$_)=split/[()]/;s/(\D?)(\d+)/$1($a*$2)/g
</code></pre>

<h3>Test</h3>

<pre><code>$ echo "8(9-10+11-12+13-14)"|perl -p distnums.pl   
(8*9)-(8*10)+(8*11)-(8*12)+(8*13)-(8*14)
</code></pre>

<h3>A version that takes a parameter</h3>

<pre><code>($a,$_)=split/[()]/,pop;s/(\D?)(\d+)/$1($a*$2)/g;print
</code></pre>

<h1>A version that only uses regular expressions.</h1>

<pre><code>s/(\d+)\((.*)\)/$2:$1/;s/(\D?)(\d+)(?=.*:(\d+)).*?/$1($3*$2)/g;s/:.*//
</code></pre>

<p>This one works via a capture group within a positive lookahead and lazy matching.  Probably would have used a positive lookbehind if Perl 5 supported it, but alas. Took me a while to figure out that this kinda thing is possible with regex.</p>
</div>
<div id="pu3" class="pu"><h1>Pip, 28 bytes</h1>
<pre><code>DQaUnxWa^'(xR`\d+`'(.n.`*&amp;)`
</code></pre>
<p>Explanation:</p>
<pre><code>                              a is first cmdline arg (implicit)
DQa                           Remove (DeQueue) the closing paren from a
   UnxWa^'(                   Unify n and x with a split on open paren--Python equivalent
                                n,x=a.split(&quot;(&quot;)
                              n is thus the number to be distributed, and x is the
                                addition/subtraction expression
           xR                 In x, replace...
             `\d+`            ... regex matching numbers...
                  '(.n.`*&amp;)`  ... with the replacement pattern (n*&amp;), where n is the
                                appropriate number and &amp; substitutes the complete match
                              Print result (implicit)
</code></pre>
<p>Pip's Pattern objects mostly follow Python regex syntax, but the <code>&amp;</code> replacement pattern is borrowed from sed.</p>
<p>Read more about Pip at the <a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Github repository</a></p>
</div>
<div id="pu4" class="pu"><h1>gawk - <strike>60</strike> 58</h1>

<pre><code>$0=gensub(/(.*\()?(+|-)?([0-9]+))?/,"\\2("$0+0"*\\3)","G")
</code></pre>

<p>Phew... haven't worked with regexp in quite a while.</p>
</div>
<div id="pu5" class="pu"><h1>Perl, 36 bytes</h1>
<p>35 bytes code + 1 byte command line</p>
<pre><code>($a,$_)=split/[()]/;s/\d+/($a*$&amp;)/g
</code></pre>
<p>Usage:</p>
<pre><code>echo &quot;4(17+8-14)&quot; | perl -p entry.pl
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="http://esolangs.org/wiki/REGXY" rel="nofollow">REGXY</a>, 45 bytes</h1>

<p>Uses REGXY, a regex substitution based language.</p>

<pre><code>/(\d+)\((\D)?(\d+)/\2(\1*\3)\1(/
//
/\d+\(.//
</code></pre>
</div>
<div id="pu7" class="pu"><h1>sed, 105 bytes</h1>

<p>Just wanted to see if this can be done with sed.<br>
Maybe a bit old school, but it works.</p>

<pre><code>$ cat distnum.sed
s@\([0-9]*\)(\([0-9]*\)\([+-]*\)\([0-9]*\)\([+-]*\)\([0-9]*\))@(\1*\2)\3(\1*\4)\5(\1*\6)@
s@([0-9]*\*)@@g

$ cat distnum.txt
23(12+42)
9(62-5)
4(17+8-14)
15(-5)
2(3)
8(+18)
8(-40+18)

$ sed -f distnum.sed distnum.txt
(23*12)+(23*42)
(9*62)-(9*5)
(4*17)+(4*8)-(4*14)
-(15*5)
(2*3)
+(8*18)
-(8*40)+(8*18)
</code></pre>
</div>
<div id="pu8" class="pu"><h1>JavaScript 65 bytes</h1>

<pre><code>s=&gt;(q=s.split(/[()]/))[1].replace(/(\D?)(\d+)/g,`$1(${q[0]}*$2)`)
</code></pre>

<p>This will take the input. Get the + or -, then the digits, then replace it in the correct order.</p>

<h2>Explanation</h2>

<pre><code>s=&gt;   // Function with argument "s"
  (q= // Set q to...
    s.split(/[()]/) // Splits on parenthesis, returns array
  )
  [1] // Gets second match or text inside brackets
  .replace(/ // Replaces string 
     (\D?)  // Try to match a non-digit, the +-/* (group 1)
     (\d+)  // Then match one or more digits (group 2)
  /,
      // $1 is group 1 and $2 is group 2 q[0] is the text before the parenthesis 
  `$1(${q[0]}*$2)`
  ) 
</code></pre>

<h2>Usage</h2>

<p>This only works in Firefox and Safari Nightly <em>maybe Edge?</em> because it uses ES6 features. You can run it by:</p>

<pre>
<b>var t=</b>s=>(q=s.split(/[()]/))[1].replace(/(\D?)(\d+)/g,`$1(${q[0]}*$2)`)

<b>t(</b>"5(-6+7+3-8+9)"<b>);</b> // -(5*6)+(5*7)+(5*3)-(5*8)+(5*9)
</pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/mbuettner/retina" rel="nofollow">Retina</a>, 40 bytes</h1>

<pre><code>+`(\d+)\((\D)?(\d+)
$2($1*$3)$1(
\d+..$
&lt;empty line&gt;
</code></pre>

<p>Each line should go to its own file but you can run the code as one file with the <code>-s</code> flag. E.g.:    </p>

<pre><code>&gt;echo -n "8(-40+18)"|retina -s distributing_numbers
-(8*40)+(8*18)
</code></pre>

<p>The first two lines push the multiplier next to every number in the expected form:</p>

<pre><code>8(-40+18)
-(8*40)8(+18)
-(8*40)+(8*18)8()
</code></pre>

<p>The last two lines remove the unnecessary trailing part:</p>

<pre><code>-(8*40)+(8*18)8()
-(8*40)+(8*18)
</code></pre>
</div>
<div id="pu10" class="pu"><h1>CJam, 50 bytes</h1>

<pre><code>l__'(#_@&lt;'*+@@)&gt;);'+/'-f/\ff{1$'(@@++')+L?}'-f*'+*
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=l__&#39;(%23_%40%3C&#39;*%2B%40%40)%3E)%3B&#39;%2B%2F&#39;-f%2F%5Cff%7B1%24&#39;(%40%40%2B%2B&#39;)%2BL%3F%7D&#39;-f*&#39;%2B*&amp;input=8(-40%2B18)" rel="nofollow">Try it online</a></p>

<p>CJam does not have regex support, or anything beyond string searching and splitting that is very convenient for parsing expressions. So there's some labor involved here.</p>

<p>Explanation:</p>

<pre><code>l__   Get input and push 2 copies for splitting.
'(#   Find index of '(.
_     Copy index, will be used twice.
@&lt;    Get one copy of input to top, and slice to get first multiplier.
'*+   Append '* to first multiplier.
@@    Get another copy of input and '( index to top.
)&gt;    Increment and slice to get everything after '(.
);    Remove trailing ').
'+/   Split at '+.
'-f/  Split each part at '-.
\     Swap first multiplier to top.
ff{   Apply block to nested list of second multipliers.
  1$    Copy term. Will use this copy as condition to skip empty second multipliers
        that result from unary + or -.
  '(    Opening parentheses.
  @@    Get first and second multiplier to top.
  ++    Concatenate it all.
  ')+   Concatenate closing parentheses.
  L     Push empty string for case where term is skipped.
  ?     Ternary if to pick term or empty string.
}     End of loop over list of second multipliers.
'-f*  Join sub-lists with '-.
'+*   Join list with '+.
</code></pre>
</div>
<div id="pu11" class="pu"><h1>k, 98 bytes</h1>

<p>Not very golfed.</p>

<pre><code>{,/(*x){(s#y),("*"/:(x;(s:(*y)in"+-")_y))/:$"()"}/:1_x@:&amp;~~#:'x:((0,&amp;~x in .Q.n)_x){x_'x?'y}/"()"}
</code></pre>

<p>Split on non-digit, remove parens, remove empty strings, then holding <code>x</code> constant as the first string, combine with <code>*</code> with each remaining string <code>y</code>, parenthesize, and move sign to the beginning if present; flatten output into a single string.</p>
</div>
<div id="pu12" class="pu"><h2>Python 2.7, <del>110</del> 108 Bytes</h2>

<pre><code>import re
p=re.findall('([+-]?)(\d+)',raw_input())
print"".join("%s(%s*%s)"%(e[0],p[0][1],e[1])for e in p[1:])
</code></pre>

<p>The program takes input from stdin, searches for matches against - <code>([+-]?)(\d+)</code> regex and creates the output string.<br />
Testing it - </p>

<pre><code>&lt;&lt; 23(12+42)
&gt;&gt; (23*12)+(23*42)

&lt;&lt; 9(62-5)
&gt;&gt; (9*62)-(9*5)

&lt;&lt; 4(17+8-14)
&gt;&gt; (4*17)+(4*8)-(4*14)

&lt;&lt; 15(-5)
&gt;&gt; -(15*5)

&lt;&lt; 2(3)
&gt;&gt; (2*3)

&lt;&lt; 8(+18)
&gt;&gt; +(8*18)

&lt;&lt; 8(-40+18)
&gt;&gt; -(8*40)+(8*18)
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/kirbyfan64/rs" rel="nofollow noreferrer">rs</a>, 77 bytes</h1>
<pre><code>$$d=(?&lt;!\))([+-]?)(\d+)
+$d\($d([+-])/\3(\1\2*\4)\5\1\2(
$d\($d\)/\3(\1\2*\4)
</code></pre>
<p><a href="http://kirbyfan64.github.io/rs/index.html?script=%24%24d%3D%28%3F%3C!%5C%29%29%28%5B%2B-%5D%3F%29%28%5Cd%2B%29%0A%2B%24d%5C%28%24d%28%5B%2B-%5D%29%2F%5C3%28%5C1%5C2*%5C4%29%5C5%5C1%5C2%28%0A%24d%5C%28%24d%5C%29%2F%5C3%28%5C1%5C2*%5C4%29&amp;input=5%282%2B8%29%0A23%2812%2B42%29%0A9%2862-5%29%0A4%2817%2B8-14%29%0A15%28-5%29%0A2%283%29%0A8%28%2B18%29%0A8%28-40%2B18%29" rel="nofollow noreferrer">Live demo and all test cases.</a></p>
<p>This is the first time rs's macros have actually been used!</p>
</div>
<div id="pu14" class="pu"><h1>Ruby, 94 bytes</h1>
<pre><code>gets.scan(/(\d+)\(([[-+]?\d+]+)/){|a,b|b.scan(/([-+]?)(\d+)/).map{|c,d|$&gt;&lt;&lt;&quot;#{c}(#{a}*#{d})&quot;}}
</code></pre>
</div>
<div id="pu15" class="pu"><h1>Pyth, <strike>39</strike> 38 bytes</h1>
<p>A terrible regex solution:</p>
<pre><code>P:eJcz\(&quot;([+-]?)(\d+)&quot;X&quot;\\1(_*\\2)&quot;3hJ
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/55211/">55211</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




