<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::135942</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
  <!-- TXXX -->
<tr d-ix="0"><td>065</td><td>Julia 0.6</td><td>221015T174354Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/253269#253269">Ashlin H</a></td></tr>
<tr d-ix="1"><td>047</td><td>Ruby</td><td>221006T193157Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/252738#252738">Jordan</a></td></tr>
<tr d-ix="2"><td>070</td><td>Nim</td><td>221006T162651Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/252731#252731">Michael </a></td></tr>
<tr d-ix="3"><td>nan</td><td>Perl 5</td><td>170727T030248Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/136010#136010">Xcali</a></td></tr>
<tr d-ix="4"><td>147</td><td>Swift 3</td><td>170727T000606Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/135997#135997">Alexande</a></td></tr>
<tr d-ix="5"><td>108</td><td>C# .NET Core</td><td>170727T133747Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/136080#136080">jkelm</a></td></tr>
<tr d-ix="6"><td>081</td><td>Python 2</td><td>170727T120406Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/136053#136053">mdahmoun</a></td></tr>
<tr d-ix="7"><td>021</td><td>V</td><td>170726T193307Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/135950#135950">nmjcman1</a></td></tr>
<tr d-ix="8"><td>nan</td><td>Scala</td><td>170727T094801Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/136044#136044">V. Court</a></td></tr>
<tr d-ix="9"><td>089</td><td>Python 2</td><td>170726T193738Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/135951#135951">hyper-ne</a></td></tr>
<tr d-ix="10"><td>056</td><td>JavaScript ES6</td><td>170726T214124Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/135980#135980">Arnauld</a></td></tr>
<tr d-ix="11"><td>088</td><td>Python 2</td><td>170726T200337Z</td><td><a href="https://codegolf.stackexchange.com/questions/135942/implement-a-strange-automaton/135956#135956">Erik the</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 0.6</a>, <s>69</s> 65 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>~s=s&gt;&quot;&quot;?s&lt;&quot;1&quot;?&quot;01&quot;*~s[2:end]:length(s)&gt;2?&quot;0&quot;*~s[4:end]:s*&quot;11&quot;:&quot;1&quot;
</code></pre>
<p><a href="https://tio.run/##VU87CsJAEO1zCnlVkmomiMWiifeQFILBRJZVnIjdXn2zKurMVI/3ZS4PPx03KUXZSQt0sgWjAzHqKIfGDeHUOz@E8zyWUrVNlt7K@qNIDWa4nEl7Ga/PVcxR4tehuN2nMPtQVsVXww/RH7JiFU2KZ203fh3QCWJTZbp0mVmxM/mnBQ" rel="nofollow noreferrer" title="Julia 0.6 – Try It Online">Try it online!</a></p>
<p>Ungolfed and commentated algorithm:</p>

<pre class="lang-julia prettyprint-override"><code>function ~(s)

  # Return "1" on the empty string
  # (End case for automata ending in "0" or "1..")
  if s == ""
    return "1"

  # "0" always becomes "01"
  elseif s[1] == '0'
    return "01" * ~s[2:end]
 &#32;
  # "1.." always becomes "0"
  elseif length(s) &gt; 2
    return "0" * ~s[4:end]

  # Otherwise, append "11"
  # (End case for automata ending in "1" or "1.")
  else return s * "11"

  end
end
</code></pre>
<p><a href="https://tio.run/##jZBBa4QwFITv/oohPayWsiRL6aGwpZeeC70ue0g1rikaxURkL/51@6J1m9BLA4E4mfnGvK@h1vJpnsvB5E63BlNqsyQB7vCh3NAbMMFAuqsUVNO5K6zrtbkslvTNFMilVSjbHnJwbSOdhDIFOaApzCncE2O/ZxlFdAmL4xGM0QfQ3yrWSm@X9SivFp8qbxtlSRLeq2qrfPgkzj6/47sIQCbcY7KnwzOVn@lu5fnev8QAWCtzcRW9GS84xMgf4uNKXHjvNIV@1FY9QHYd6dSw/N5/RiG2USyT8P1bl6WmBeR1UyS051dbtSMmehkXfrGko7G72qRZst2x24n/HkWgBjIPdBHaI38YCBNcRKiIFcKilrhGsPkb" rel="nofollow noreferrer" title="Julia 0.6 – Try It Online">Try it online!</a></p>
<ul>
<li>-3 bytes thanks to MarcMush: Test the value of <code>s</code> instead of <code>s[1]</code></li>
<li>-1 byte thanks to MarcMush: Rewrite with <code>s&gt;&quot;&quot;</code> instead of <code>s==&quot;&quot;</code></li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 47 bytes</h1>
<p>This is a direct port of the sample implementation Haskell code.</p>
<pre class="lang-ruby prettyprint-override"><code>f=-&gt;s{s=~/^1../??0+f[$']:s=~/./?$&amp;+?1+f[$']:?1}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpcsGCpaUlaboWN_XTbHXtiquLbev04wz19PTt7Q2006JV1GOtQEJAvoqatr0hVMjesBaibX2BQlq0koGhgSEIKMVCRGGGAgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>More readable</h2>
<p><code>$&amp;</code> is the matched text from the previous regexp match (<code>=~</code>) and <code>$'</code> is the text after the match.</p>
<pre class="lang-ruby prettyprint-override"><code>f = -&gt;s{
  if s =~ /^1../ then &quot;0&quot; + f[$']
  elsif s =~ /./ then $&amp; + &quot;1&quot; + f[$']
  else &quot;1&quot;
  end
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="http://nim-lang.org/" rel="nofollow noreferrer">Nim</a>, 70 bytes</h1>
<pre><code>import re,sugar
x=&gt;x.multiReplace([(re&quot;1..&quot;,&quot;0&quot;),(re&quot;(.)&quot;,&quot;$#1&quot;)])&amp;&quot;1&quot;
</code></pre>
<p><a href="https://tio.run/##ZVBLCoMwEN17iiEtJQEJzlawh@i2dCESbcAYSSJ4@zR2UZzp7j3eb5jFurwGP0CUYwtfJPcWYgp2mdQPQFcBmOHtYQQhTrg5EyQKYUiMTcOsVEUWpSOsmGbxL8vC/Czk5bydnVYMx0a2bvUhQTB13KY@VFHu3X3XbpuTfZh17gcjnzIYgVqLuvxJ1QeTWhV2vaBQL3UrH1M5fwA" rel="nofollow noreferrer" title="Nim – Try It Online">Try it online!</a></p>
<p><code>multiReplace</code> allows us to do substitutions simultaneously. The index of the tuple within the sequence acts as the priority if there is a situation where more than one substitution can be made. The priority rises the lower the index is.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 62 + 2 (<code>-F</code>) = 64 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>$r.=$F[$i]&amp;&amp;$i+2&lt;@F&amp;&amp;($i+=2)?0:"$F[$i]1";++$i&lt;@F&amp;&amp;redo;say$r.1
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/1@lSM9WxS1aJTNWTU0lU9vIxsFNTU0DyLI10rQ3sFKCyBkqWWtrq2SCJYtSU/KtixMrgToN//83MDQwMPyXX1CSmZ9X/F/X11QPKPJf1w0A" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="http://swift.sandbox.bluemix.net/#/repl/59792f764877037828e141d9" rel="nofollow noreferrer">Swift 3</a>, 147 bytes</h1>
<p>-1 thanks to <a href="https://codegolf.stackexchange.com/users/59487/mr-xcoder">@Mr.Xcoder</a></p>

<pre class="lang-swift prettyprint-override"><code>func g(i:[Int]){var r=[Int]();var s=ArraySlice(i);while let e=s.popFirst(){if 0&lt;e&amp;&amp;2&lt;s.count{r+=[0];s=s.dropFirst(2)}else{r+=[e,1]}};print(r+[1])}
</code></pre>
<p>Ungolfed, returning the value rather than printing:</p>
<pre class="lang-swift prettyprint-override"><code>func iterate(state: [Int]) -&gt; [Int] {
    var result = [Int]()
    
    var inputSlice = ArraySlice(state)
    
    while let element = inputSlice.popFirst() {
        if 0 &lt; element &amp;&amp; 2 &lt; inputSlice.count { 
            result += [0]
            inputSlice = inputSlice.dropFirst(2)
        }
        else {
            result += [element, 1]
        }
        
        //debugPrint(result.map(String.init).joined(separator: &quot;&quot;))
    }
    
    return result + [1]
}
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, 108 bytes</h1>



<pre class="lang-cs prettyprint-override"><code>n=&gt;{var t="";for(int i=0,b=n.Length;i&lt;b;){if(n[i]&gt;'0'&amp;i+2&lt;b){t+="0";i+=3;}else t+=n[i++]+"1";}return t+"1";}
</code></pre>

<p><a href="https://tio.run/##fYsxT8MwEIV3/wrLA7XlUjkwOs6CxFQGxNCh6pAYN5wUzpJ9qYSs/PaQphsC3g1P9973fL73MYV5zIA9f/vKFD4t80ObM38tLFNL4Pklwjt/aQGlKux5RF9nSstge7OmdzO6plzaxMkJYc8xSUDi4My2c7jbB@zpw0LdWVXgLPEIp2ZjNnegH@pOFdJOGGFBu0c7hSEHviQLpPVJi0rYKQUaEy7p@s2WsaeIOQ5hd0hAYQ8YZC@FqYyprhJK2d@Ryvy4f9C/K7Nq7Sc2zd8" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>

<p>Input taken as a string, and a string is returned as output.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 81 bytes</h1>

<p><strong>Both input and output are lists</strong> (thanks to Erik the Outgolfer)</p>



<pre class="lang-python prettyprint-override"><code>def f(Z):return Z and((1&gt;Z[0]or 3&gt;len(Z))and[Z[0],1]+f(Z[1:])or[0]+f(Z[3:]))or[1]
</code></pre>

<p><a href="https://tio.run/##K6gsycjPM/r/PyU1TSFNI0rTqii1pLQoTyFKITEvRUPD0C4q2iA2v0jB2C4nNQ8orwkUjgaJ6RjGagM1RBtaxWrmFwEFwDxjIA/ENYz9X1CUmVcCNDPaQEfBUEcBQiJQrCYXQgUyB0UGRRWaLpChsZr/AQ" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p><strong>Some cases</strong></p>

<pre class="lang-python prettyprint-override"><code>[0,1,0,1,1,1,1,1] --&gt; [0,1,0,0,1,1,1]
[0] ----------------&gt; [0,1,1]
[1] ----------------&gt; [1,1,1]
[] -----------------&gt; [1]
[0,1] --------------&gt; [0,1,1,1,1]
[1,0] --------------&gt; [1,1,0,1,1]
</code></pre>

<h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 85 bytes</h1>

<p><strong>Both input and output are strings</strong> (initial solution)
</p>

<pre class="lang-python prettyprint-override"><code>def f(Z):return Z and(('0'==Z[0]or 3&gt;len(Z))and Z[0]+'1'+f(Z[1:])or'0'+f(Z[3:]))or'1'
</code></pre>

<p><a href="https://tio.run/##VYwxCsMwDEX3nkKbbLxYyRZID2KToRCHFIochDv09I7cJbG299//On5lzzzUuqYNNhPsJKl8hSHAi1dj0OM8h@iXLDA@P4m1YtVAyxwSOh1FmhabRbt/GpUaEtZD3lz0L3ry1A7t48ru0Jmu1RnSUT0B" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p><strong>Some cases</strong></p>

<pre class="lang-python prettyprint-override"><code>'01011111'--&gt; 0100111
'0'---------&gt; 011
'1'---------&gt; 111
''----------&gt; 1
'01'--------&gt; 01111
'10'--------&gt; 11011
</code></pre>

<p><strong>Explication</strong> It is simplily a golf of a recursive method.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DJMcMayhem/V" rel="nofollow noreferrer">V</a>, <s>26</s> <s>22</s> 21 bytes</h1>

<p>Thanks to @CowsQuack for 4 bytes by combining regexes! And @ØrjanJohansen for another byte with some regex combinations.</p>

<pre><code>Ó1../3
Ó./&amp;1
Ó31/0
A1
</code></pre>

<p><a href="https://tio.run/##K/v///BkQz09fWOuw5P19NUMgZSxob4Bl6Ph//@GBgaGBgA" rel="nofollow noreferrer" title="V – Try It Online">Try it online!</a></p>

<p>Uses substitute multiple times and appends a 1 at the end.  Nothing too fancy.  I have a version that remaps <code>1</code> and <code>0</code> in insert mode to get the desired effect, but it's quite a bit longer.</p>

<p>(Multiple replacement version: <a href="https://tio.run/##K/v/3/TwxsiCw5MN9fT0jfVTuQ5P1tNXMwRSxob6BkC@o@H//waGBgaGAA" rel="nofollow noreferrer" title="V – Try It Online">Try it online!</a>)</p>
</div>
<div id="pu8" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 131+29=160 bytes</h1>

<p>This is inside a function taking the string <code>a</code> as parameter and returning the output as a string.</p>



<pre class="lang-scala prettyprint-override"><code>var s=""
var k=0
for(c&lt;-0 to a.length-1)breakable{if(k&gt;0){k-=1
break}
if(a(c)==49&amp;c&lt;a.length-3){s+="0"
k+=2}else s+=a(c)+"1"}
s+"1"
</code></pre>

<p>I do have to <code>import util.control.Breaks._</code>, so I need to add those 28 bytes plus a trailing linefeed.</p>

<p><a href="https://tio.run/##PY7BTgQhEETP9ld0OBjIZCagXjTLJnr35AcYhmVWBIEAGhPCt48zRrcv1XmpSlXRyqvVfqSYK35W6ycdQ83RT0/ZKFemV4A4vxtd8VnZgOa7mnAq@JhSg6uTWTDlqE0pVD281GzDmf2pbOuXylgkIbA/TnJYYqb6MHKsEdXkTTjXt1Gwea9SszfNLtQdOWtulAJ@cYeNKaqZlHf31/pwid2yVgZJOAE3yJtufDG4gd06EEE6lF3WDpC2OdUHSrjgYj8cj0iG/@EXTBiDvv4A" rel="nofollow noreferrer" title="Scala – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 89 bytes</h1>



<pre class="lang-python prettyprint-override"><code>x=input()
y=0
k=[]
while x[y:]:v=1-x[y]*(y&lt;len(x)-2);k+=[x[y]]*v+[v];y+=3-2*v
print k+[1]
</code></pre>

<p><a href="https://tio.run/##LYjbCoQgEEDf/YoevSSk@1bNlwzzGCSGK2HmfL1tsBwOHE7msn@T771BSPkqUgmGSURAEvcejm1oyDPNFZz9FWnJ67El2ZT1aokG8L2kq8FKCxv4WK@ryGdIZYgGHfWO0@jG1z/0AA" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>-4 bytes thanks to Rod<br>
-6 bytes thanks to ovs<br>
-1 byte thanks to micsthepick</p>
</div>
<div id="pu10" class="pu"><h2>JavaScript (ES6), 56 bytes</h2>

<p>Takes input as an array of characters. Returns a string, or the number <code>1</code> if given an empty array.</p>

<pre class="lang-js prettyprint-override"><code>f=([v,...a])=&gt;v?(+v&amp;&amp;a[1]?a.splice(0,2)&amp;&amp;'0':v+1)+f(a):1
</code></pre>

<h3>Demo</h3>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=([v,...a])=&gt;v?(+v&amp;&amp;a[1]?a.splice(0,2)&amp;&amp;'0':v+1)+f(a):1

console.log(f([...'01011111']))
console.log(f([...'10']))</code></pre>
</div>
</div>
</p>

<h3>Animated version</h3>

<p>Examples of stable inputs: 0101, 010011111</p>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=([v,...a])=&gt;v?(+v&amp;&amp;a[1]?a.splice(0,2)&amp;&amp;'0':v+1)+f(a):1

s = '1';
setInterval(_=&gt;o.innerHTML=s=''+f([...s]), 200)</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input oninput="s=this.value" value="1" /&gt;
&lt;pre id=o style="font-size:32px"&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 88 bytes</h1>



<pre class="lang-python prettyprint-override"><code>I,r=input(),[]
while I:a=I[0]and len(I)&gt;2;b=a&lt;1;r+=[I[0]]*b+[+b];I=I[a*2+1:]
print r+[1]
</code></pre>

<p><a href="https://tio.run/##RYoxCsMwDAD3vEJjEnmIPcZ1d71BaLBpIIagGuNS@nq3IUPhuOWufNr@VNc7mRqyllcbJ8MyvPd8bEBrDMSLRH3AselI0935FOLN@oqBzyRzQsYknn5nnB3aVYZSszaoyFZ658WANXD5j3wB" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<!-- TYYY -->

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/135942/">135942</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




