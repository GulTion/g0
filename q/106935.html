<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::106935</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>168</td><td>Javascript Node</td><td>230823T070829Z</td><td><a href="https://codegolf.stackexchange.com/questions/106935/geohash-generator/264543#264543">Steve Be</a></td></tr>
<tr d-ix="1"><td>161</td><td>Groovy</td><td>170115T184651Z</td><td><a href="https://codegolf.stackexchange.com/questions/106935/geohash-generator/106951#106951">Gurupad </a></td></tr>
<tr d-ix="2"><td>098</td><td>Bash + Coreutils + md5</td><td>170115T223713Z</td><td><a href="https://codegolf.stackexchange.com/questions/106935/geohash-generator/106966#106966">R. Kap</a></td></tr>
<tr d-ix="3"><td>129</td><td>Python 2</td><td>170115T163502Z</td><td><a href="https://codegolf.stackexchange.com/questions/106935/geohash-generator/106941#106941">Copper</a></td></tr>
</table>
<div id="pu0" class="pu"><h2>Javascript (Node, using built-in Crypto), 168 characters</h2>
<pre class="lang-javascript prettyprint-override"><code>(d,o,l)=&gt;l.map((p,i)=&gt;p+Math.sign(p)*[...require('crypto').createHash('md5').update(d+'-'+o).digest`hex`.slice(z=i*16,z+16)].reduce((a,d,i)=&gt;a+parseInt(d,16)*16**~i,0))
</code></pre>
<p>Such a verbose API!</p>
<h2>JavaScript (using <code>md5</code> library), 128 characters</h2>
<pre class="lang-javascript prettyprint-override"><code>(d,o,l)=&gt;l.map((p,i)=&gt;p+Math.sign(p)*[...require('md5')(d+'-'+o).slice(z=i*16,z+16)].reduce((a,d,i)=&gt;a+parseInt(d,16)*16**~i,0))
</code></pre>
<p>Nothing very golfy here.</p>
<p>In both cases:</p>
<pre><code>f('2005-05-26', 10458.68, [144,-37])

=&gt; [ 144.857713267707, -37.54454306955928 ]
<span class="math-container">```</span>
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Groovy, <s>198</s> 161 bytes</h1>
<pre class="lang-groovy prettyprint-override"><code>{d,o,l,L-&gt;m=&quot;&quot;+MessageDigest.getInstance(&quot;MD5&quot;).digest((d+&quot;-&quot;+o).bytes).encodeHex()
h={(Double.valueOf(&quot;0x0.&quot;+it+&quot;p0&quot;)+&quot;&quot;)[1..7]}
[l+h(m[0..15]),L+h(m[16..31])]}
</code></pre>
<p>This is an unnamed closure.</p>
<pre>
Input
f("2005-05-26","10458.68","37","-122")

Output
[37.857713, -122.544543]
</pre>
<p><a href="http://ideone.com/b2Mokj" rel="nofollow noreferrer">Try it here!</a></p>
<p><strong>Ungolfed</strong> -</p>
<pre class="lang-groovy prettyprint-override"><code>import java.security.*
{
    date,open,lat,lon -&gt;
    md = &quot;&quot; + MessageDigest.getInstance(&quot;MD5&quot;).digest((date+&quot;-&quot;+open).bytes).encodeHex()
    decimal = {(Double.valueOf(&quot;0x0.&quot;+it+&quot;p0&quot;)+&quot;&quot;)[1..7]}
    [lat+decimal(md[0..15]),lon+decimal(md[16..31])]  //Implicity returns
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Bash + Coreutils + md5, 98 bytes:</h1>
<pre class="lang-bash prettyprint-override"><code>C=`md5 -q -s $1-$2`;C=${C^^};for i in 3 4;{ dc -e 16i[${!i}]n`cut -c1-7&lt;&lt;&lt;.${C:$[16*(i&gt;3)]:16}`p;}
</code></pre>
<p><a href="https://tio.run/nexus/bash#DctBDoIwEADAr6xJD2qyhC1QCC1eeAYBmxSMPVCMyqn27SvJXIf7zi7uuQEGEIRC/ta5@uyr1X0nYj9NST@2N3jwAQoodYTZAS5Ayg8innwag3X7F9AR1saY7EitGEhdz/5WXMaWVLIvnZhZ5nmFB6mY8rJqMtVwUfOdpPwD" rel="nofollow noreferrer">Try It Online!</a></p>
<p>Uses the built-in <code>md5</code> command on OSX to generate the MD5 hash. Takes 4 space separated command line arguments in the following format:</p>
<pre><code>YYYY-MM-DD DOW LAT LONG
</code></pre>
<p>with <em>negative numbers</em> input and output with a leading <em>underscore</em> (i.e. <code>_122</code> instead of <code>-122</code>).</p>
<p><strong>Note:</strong> Depending on your system, you may need to substitute in <code>echo -n $1-$2|md5sum</code> for <code>md5 -q -s $1-$2</code> in order for this to work. Doing so brings the byte count up to 103, and is indeed the case in the TIO link.</p>
</div>
<div id="pu3" class="pu"><h1>Python 2, 129 bytes</h1>

<pre class="lang-py prettyprint-override"><code>import md5
d,q,c=input()
h=md5.new(d+'-'+q).hexdigest()
print map(lambda p,o:o+'.'+`float.fromhex('.'+p)`[2:8],(h[:16],h[16:]),c)
</code></pre>

<p>Input is given in the form <code>'2005-05-26','10458.68',('37','-122')</code> (using the example).</p>

<p>Computes the MD5 hash with <code>md5.new().hexdigest()</code>, then performs the necessary transforms. I <em>could</em> save five bytes by using <code>h</code> instead of <code>h[:16]</code>, but I'm not sure if that would affect the six most significant digits in the decimal conversion.</p>

<p><a href="http://ideone.com/QpgLgI" rel="nofollow noreferrer">Ideone it!</a> (substituting an <code>eval()</code> call for the <code>input()</code>)</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/106935/">106935</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




