<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::5763</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>212</td><td>[Wolfram Language Mathematica]</td><td>230603T092939Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/261491#261491">lesobrod</a></td></tr>
<tr d-ix="1"><td>235</td><td>Python</td><td>120510T044335Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5782#5782">Joel Cor</a></td></tr>
<tr d-ix="2"><td>305</td><td>C</td><td>120509T054118Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5771#5771">breadbox</a></td></tr>
<tr d-ix="3"><td>302</td><td>Scala</td><td>120509T182421Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5780#5780">Prince J</a></td></tr>
<tr d-ix="4"><td>187</td><td>PHP</td><td>120509T182714Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5781#5781">primo</a></td></tr>
<tr d-ix="5"><td>168</td><td>Ruby 189 178 171</td><td>120509T024401Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5767#5767">Paul Pre</a></td></tr>
<tr d-ix="6"><td>196</td><td>Bash</td><td>120509T182253Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5779#5779">Geoff Re</a></td></tr>
<tr d-ix="7"><td>146</td><td>K</td><td>120510T113301Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5787#5787">tmartin</a></td></tr>
<tr d-ix="8"><td>401</td><td>C#</td><td>120508T212553Z</td><td><a href="https://codegolf.stackexchange.com/questions/5763/build-a-typing-speed-test-measuring-cpm/5765#5765">Cristian</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>[Wolfram Language (Mathematica)], 212 bytes</h1>
<pre><code>n=10;Print[&quot;-&gt; &quot;&lt;&gt;#]&amp;/@(w=RandomWord@n);c=1;t=First@AbsoluteTiming[While[c&lt;=n,Print@If[Echo@InputString[]==w[[c]],c++;&quot;OK&quot;,&quot;WRONG&quot;]]];Print[&quot;--&gt; You have scored &quot;&lt;&gt;ToString@⌊60Total@StringLength@w/t⌋&lt;&gt;&quot; CPM!&quot;]
</code></pre>
<p>Interesting challenge for WM.<br />
Works only on desktop!<br />
Using internal dictionary of common words instead of file.<br />
Ungolfed version:</p>
<pre><code>num = 10; Print[&quot;-&gt; &quot; &lt;&gt; #] &amp; /@ (words = RandomWord@num);
size = Total@StringLength@words;
count = 1;
timing = First@AbsoluteTiming[
    While[count &lt;= num,
     Print[
      If[Echo@InputString[] == words[[count]],
       count++; &quot;OK&quot;,
       &quot;WRONG&quot;]
      ]
     ]];
result = ToString@⌊60 size/timing⌋;
Print[&quot;--&gt; You have scored &quot; &lt;&gt; result &lt;&gt; &quot; CPM!&quot;]
</code></pre>
</div>
<div id="pu1" class="pu"><h2>Python (<s>256</s> 235)</h2>
<pre class="lang-python prettyprint-override"><code>import time as t,random as r
def p(x):print x
c=r.sample(input().split(&quot;\n&quot;),10)
z=lambda x:p((&quot;WRONG&quot;,&quot;OK&quot;)[raw_input()==x])or len(x)
p(&quot;--&gt; &quot;+&quot;\n--&gt; &quot;.join(c))
_=t.time()
p(&quot;--&gt; You have scored %d CPM!&quot;%(sum(map(z,c))/(t.time()-_)*60))
</code></pre>
<p>This is in python 2.x, in 3.x I can shave off 4 more characters by using the print function.</p>
<p>Newlines included</p>
</div>
<div id="pu2" class="pu"><h2>C, 305 <strike>309</strike> <strike>347</strike> chars</h2>

<pre><code>char*stdin,w[11][99];long i,t;main(int n,char**v){v=fopen(v[1],"r");
for(srand(time(&amp;t));fgets(w[i++&gt;9?(n=rand()%i)&gt;10?0:n:i],99,v););
for(i=n=0;i&lt;10;n+=printf("-&gt; %s",w[++i])-4);
for(;i;puts(!strcmp(*w,w[11-i])?--i,"OK":"WRONG"))fgets(*w,99,stdin);
printf("--&gt; You have scored %ld CPM!\n",n*60/(time(0)-t));}
</code></pre>

<p>Thanks to @ugoren for the improvement hints. Using an "11th word" to discard incoming dictionary entries was a big win over my previous strcpy-if-chosen approach.</p>

<p>Here's the ungolfed source:</p>

<pre><code>#define _GNU_SOURCE
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;time.h&gt;

static char words[11][99];
static long i, t;

int main(int argc, char *argv[])
{
    FILE *fp;
    int n;

    fp = fopen(argv[1], "r");
    srand(time(0));
    for (i = 0 ; fgets(words[0], sizeof words[0], fp) ; ++i) {
        n = i &lt; 10 ? i : rand() % i;
        if (n &lt; 10)
            strcpy(words[n + 1], words[0]);
    }
    fclose(fp);

    n = 0;
    for (i = 1 ; i &lt;= 10 ; ++i)
        n += printf("-&gt; %s", words[i]) - 4;
    t = time(0);
    i = 1;
    while (i &lt;= 10 &amp;&amp; fgets(words[0], sizeof words[0], stdin)) {
        if (strcmp(words[0], words[i])) {
            puts("WRONG");
        } else {
            puts("OK");
            ++i;
        }
    }
    if (i &gt; 9)
        printf("-&gt; You have scored %ld CPM!\n", n * 60 / (time(0) - t));

    return argc - argc;
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Scala(<strike>319</strike> <strike>306</strike> <s>304</s> 302)</h1>
<pre><code>var s=util.Random.shuffle(io.Source.fromFile(args(0)).getLines.toSet)take 10
def?(a:Any)=println(a)
var l=(0/:s){_+_.size}
s map{&quot;-&gt; &quot;+_}map?
def n=System.nanoTime
val t=n
while(s.size!=0){val m=readLine
if(s contains m)?(&quot;OK&quot;)else?(&quot;WRONG&quot;);s-=m}
?(&quot;--&gt; You have scored &quot;+l*60000000000L/(n-t)+&quot; CPM!&quot;)
</code></pre>
</div>
<div id="pu4" class="pu"><h2>PHP 187 bytes</h2>

<p>Newlines have been added for clarity:</p>

<pre><code>&lt;?$s=file($argv[1]);
for(shuffle($s);$i++&lt;10;$l+=strlen($$i))echo~ÒÁß,$$i=$s[$i];
for($t=time();$j++&lt;10;)echo$$j==fgets(STDIN)?OK:WRONG,~õ?&gt;
--&gt; You have scored &lt;?=0|$l/(time()-$t)*60?&gt; CPM!
</code></pre>

<p>Accepts the dictionary filename as a command line argument. The dictionary file must end with a newline.</p>
</div>
<div id="pu5" class="pu"><h2>Ruby (<del>189</del> <del>178</del> <del>171</del> 168)</h2>

<pre class="lang-ruby prettyprint-override"><code>$&gt;&lt;&lt;t=['',d=[*$&lt;.lines].sample(10)]*'-&gt; '
s=Time.now
puts d.delete($stdin.gets)?:OK:'WRONG'while d[0]
puts'--&gt; You have scored %i CPM!'%((t.size-40)/(Time.now-s)*60)
</code></pre>

<p>Pretty basic, I'm sure there are improvements to be made.  Takes the filename of the dictionary as a command-line argument.</p>

<p><strong>EDIT</strong>: A few minor tweaks, mainly around retaining the newlines from the dictionary.  As a result the file will need a trailing newline to work correctly.</p>
</div>
<div id="pu6" class="pu"><h2>Bash - <strike>217</strike> <strike>212</strike> <strike>199</strike> 196 chars</h2>

<p>Not gonna win but it was fun</p>

<pre class="lang-sh prettyprint-override"><code>declare -A W
for w in `shuf -n10`;do C+=$w;echo -\&gt; $w;W[$w]=OK;done
SECONDS=0
for((;${#W[*]};));do read r;echo ${W[$r]-WRONG};unset W[$r];done
echo --\&gt; You have scored $((60*${#C}/SECONDS)) CPM!
</code></pre>

<p>Under 200 chars now!</p>

<p><strike>Takes wordlist file as an argument</strike>
Now takes word list on standard input. Paste it in the terminal and press ^D</p>

<p>Implemented suggestion from manatwork</p>
</div>
<div id="pu7" class="pu"><h1>K, 146</h1>

<p>Assumes a dictionary file called 'd' in the current working directory.</p>

<pre><code>{b:+/#:'a:10?_0:`:d;-1"-&gt; ",/:a;s:.z.t;while[#a;$[(,/0:0)~*a;[a:1_a;-1"OK"];-1"WRONG"]];-1"--&gt; You have scored ",($(60000*b)%"i"$.z.t-s)," CPM!";}
</code></pre>
</div>
<div id="pu8" class="pu"><h2>C# 401</h2>

<pre><code>void T(){
Action&lt;string&gt;C=Console.WriteLine;Func&lt;string&gt;R=Console.ReadLine;
var w=new List&lt;string&gt;();
for(var l=R();l!="";l=R())w.Add(l);
var s=w.OrderBy(_=&gt;Guid.NewGuid()).Take(10).ToList();
s.ForEach(x=&gt;C("=&gt; "+x));
var t=s.Select(x=&gt;x.Length).Sum();
var c=Stopwatch.StartNew();
while(s.Any()){C(s.Remove(R())?"OK":"WRONG");}
c.Stop();
C("--&gt; You have scored "+c.Elapsed.TotalSeconds*60/t+" CPM!");}
</code></pre>

<p>Running version here: <a href="http://ideone.com/Nt6Id" rel="nofollow">http://ideone.com/Nt6Id</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/5763/">5763</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




