<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::245583</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>206</td><td>Setanta</td><td>240814T003803Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/274964#274964">bb94</a></td></tr>
<tr d-ix="1"><td>016</td><td>05AB1E</td><td>220325T115401Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245603#245603">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>045</td><td>Octave</td><td>220325T102616Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245602#245602">alephalp</a></td></tr>
<tr d-ix="3"><td>015</td><td>Jelly</td><td>220325T181521Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245613#245613">Jonathan</a></td></tr>
<tr d-ix="4"><td>9770</td><td>Python 3 with numpy</td><td>220325T161900Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245610#245610">m90</a></td></tr>
<tr d-ix="5"><td>025</td><td>Pip xP</td><td>220325T204450Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245617#245617">DLosc</a></td></tr>
<tr d-ix="6"><td>035</td><td>Charcoal</td><td>220325T130559Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245605#245605">Neil</a></td></tr>
<tr d-ix="7"><td>082</td><td>PARI/GP</td><td>220325T051126Z</td><td><a href="https://codegolf.stackexchange.com/questions/245583/expand-a-matrix-goo-ily/245588#245588">alephalp</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://try-setanta.ie" rel="nofollow noreferrer">Setanta</a>, 206 bytes</h1>
<pre><code>gniomh(a){b:=[]le i idir(1,2*fad@a){c:=[]le j idir(1,2*fad(a[0])){k:=i//2l:=j//2p:=l-1q:=k-1e:=a[k][l]ma i%2{ma j%2&lt;1 e*=a[k][p]}no ma j%2 e*=a[q][l]no e=e*a[q][p]+a[q][l]*a[k][p]|0&amp;1c+=[e]}b+=[c]}toradh b}
</code></pre>
<p><a href="https://try-setanta.ie/editor/EhEKBlNjcmlwdBCAgIDIyLOPCw" rel="nofollow noreferrer">try-setanta.ie link</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>45</s> <s>38</s> <s>19</s> 16 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>2F€Dø€ü2}εε`RøPà
</code></pre>
<p>-19 bytes porting <a href="https://codegolf.stackexchange.com/a/245610/52210"><em>@m90</em>'s Python answer</a>, so make sure to upvote him/her as well!<br />
-3 bytes thanks to <em>@m90</em>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f/fyO1R0xqXwzuA5OE9RrXntp7bmhB0eEfA4QX//0dHG@oY6hhAcKxONIiG8AyAPCgLRKLwYCohfIPYWAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaCkU3lotw6Xkn9pCYyv9N/I7VHTGpfDO4Dk4T1Gtee2ntuaEHR4R8DhBf@V9MKA6g9ts/8fHR1tqGMQqxNtoGMYG6ujAOIaYnIN0WUN4FwdAwgGqzKA8qAmwvgoPJhKCB9uEMIYA5ihsbGxAA" rel="nofollow noreferrer">verify all test cases</a> or <a href="https://tio.run/##VU@7TsNAEOz5ipHrQ7JdmoKCgESHktKyxNpZx6c4d6fLJXJDw5fwAbRBkaCK@3wEP2LuYghQ7GN2RzO7ek2l5GGI7pXZuAyROLyLw9v1RTRzbJBkuO0MqTmYqgZbajcMp0FIuxRlq6vlFcLaNaxQWSbH0Fu2LRkj1eKXtoauAwusnLSMFTkru2CY3n0@v076vc/9R/o0@WOfZrhpuFqi1na8QNZg6WXsSWtFUmEuaaEVtfCc04C8w@V5St6s1K4Jv0TiuDvuHqf9/qF/Kfynw5DniUhEPEYh8lBHFHv03YX8D/0wRxwXxRc" rel="nofollow noreferrer">try it online with step-by-step debug lines</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>2F       # Loop 2 times:
  €D     #  Duplicate each value in the current list
  ø      #  Zip/transpose; swapping rows/columns
   €     #  For each inner list:
    ü2   #   Create overlapping pairs
}        # Close the loop
         # (we now have overlapping 2x2 blocks of the input-matrix after that has been
         # expanded to 2x2 for each individual value)
 ε       # Map over each list of blocks:
  ε      #  Map over each 2x2 block:
   `     #   Pop and push both pairs separated to the stack
         #    STACK: [[a,b],[c,d]] → [a,b] and [c,d]
    R    #   Reverse the top pair
         #    STACK: [a,b] and [d,c]
     ø   #   Create pairs of these two pairs
         #    STACK: [[a,d],[b,c]]
      P  #   Take the product of each inner pair to check if both are 1
         #    STACK: [a*d,b*c]
       à #   Take the maximum to check if either was truthy
         #   (so whether the diagonal or anti-diagonal of the 2x2 block were both 1s)
</code></pre>
<hr />
<p><strong>Original <s>45</s> 38 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a> answer:</strong></p>
<pre class="lang-python prettyprint-override"><code>2Føε0ìSĆ]2Fø€ü3}εε2FøíÐÅsˆÅ\ˆ}¯ειPà}à´
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f/fyO3wjnNbDQ6vCT7SFgviPGpac3iPce25ree2griH1x6ecLi1@HTb4daY0221h9YDJXYGHF5Qe3jBoS3//0dHG@oY6hhAcKxONIiG8AyAPCgLRKLwYCohfIPYWAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaCkU3lotw6Xkn9pCYyv9N/I7fCOc1sNDq8JPtIWC@I8alpzeI9x7bmt57aCuIfXHp5wuLX4dNvh1pjTbbWH1gMldgYcXlB7eMGhLf@V9MKARh7aZv8/OjraUMcgVifaQMcwNlZHAcQ1xOQaossawLk6BhAMVmUA5UFNhPFReDCVED7cIIQxBjBDY2NjAQ" rel="nofollow noreferrer">verify all test cases</a> or <a href="https://tio.run/##VVC9TsMwGNx5ik@dQApq0jBlYaBCYkMqW8ngNl8bC8cOttOWoQtSO/MIfYAiFopAZYrZKvUheJHgNA1qZfnnpPPdfScU6VEsisYNTzMdQMPJ107@cXnS6GhMwQugk0kpMh4Bkn4MI8IyhDHVMbiqpLeuzed25Zpl52ceto8@twK4kkg0ghihZCRNKR@CP/Ghx0T/QYEYgI4REqIlndRiv89L8@1P2wdCfgB3knA1EDKpYvyLgBZA4DEjUqPeCUqaMtQKThMaRQxBinGzL1iW8GZEyVBwwpqEa3peo7PSebvarkp382pezExt5mZ2v5lP87f8PTyMcmFnitH62ixVFDoAtHWgrGapTKkCwuzs0RN4DlgqtYnUvsmyhV2PliQResKW6dUh7Pq6NYupWYS2zKLodj3Hc9xqh063vCvkWrR/lecRqpkVdsPwDw" rel="nofollow noreferrer">try it online with step-by-step debug lines</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Surround each value with 0s (including a border of 0s around the entire matrix, unlike the challenge description):</p>
<pre class="lang-python prettyprint-override"><code>2F         # Loop 2 times:
  ø        #  Zip/transpose; swapping rows/columns
           #  (which will use the implicit input-matrix in the first iteration)
   ε       #  Map over each inner list:
    0ì     #   Prepend a 0 in front of each digit
      S    #   Then convert it to a flattened list of digits
       Ć   #   Enclose; append its own head (for the trailing border of 0s)
]          # Close both the inner map and outer loop
</code></pre>
<p>Step 2: Create overlapping 3x3 blocks of this matrix:</p>
<pre class="lang-python prettyprint-override"><code>2F         # Loop 2 times again:
  ø        #  Zip/transpose; swapping rows/columns
   €       #  For each inner list:
    ü3     #   Create overlapping triplets
}          # Close the loop
</code></pre>
<p>Step 3: Transform each 3x3 block to a quartet of triplets of its middle row; middle column; main diagonal; and main anti-diagonal:</p>
<pre class="lang-python prettyprint-override"><code>ε          # Map over each list of blocks:
 ε         #  Map over each 3x3 block:
  2F       #   Loop 2 times:
    øí     #    Rotate the 3x3 block 90 degrees clockwise:
    ø      #     Zip/transpose; swapping rows/columns
     í     #     Reverse each inner row
      Ð    #    Triplicate this 3x3 block
       Ås  #    Pop one, and push its middle row
         ˆ #    Pop and add this triplet to the global array
       Å\ˆ #    Do the same for the main diagonal
   }¯      #   After the loop: push the global array
</code></pre>
<p>Step 4: Check if either the middle is already 1, or if any sides of a middle row/column/diagonal/anti-diagonal are both 1:</p>
<pre class="lang-python prettyprint-override"><code>  ε        #   Map over the list of triplets:
   ι       #    Uninterleave it from [a,b,c] to [[a,c],[b]]
    P      #    Take the product of each inner list: [a*c,b]
     à     #    Pop and push the maximum
  }à       #   After the map: pop and push the maximum
    ´      #   And clear the global array
           # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, 45 bytes</h1>
<p>A port of <a href="https://codegolf.stackexchange.com/a/245610/9288">@m90's Python (NumPy) answer</a>.</p>

<pre class="lang-matlab prettyprint-override"><code>@(m)abs(diff(diff(kron(m,[i,1;1,i])),1,2))&gt;=2
</code></pre>
<p><a href="https://tio.run/##y08uSSxL/Z@mYKunp/ffQSNXMzGpWCMlMy0NQmQX5edp5OpEZ@oYWhvqZMZqauoY6hhpatrZGv1P04g21DGwNtAxjNXkAnMMUTmGqDIGcI6OAQRbg0gIG2wOjIfEhqiB8IAG/AcA" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
<hr />
<h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, 70 bytes</h1>
<p>-5 bytes thanks to @Luis Mendo.</p>

<pre class="lang-matlab prettyprint-override"><code>@(m)(n=kron(m,e(2)))(i=1:end-1,j=1:end-1)&amp;n(i+1,j+1)|n(i,j+1)&amp;n(i+1,j)
</code></pre>
<p><a href="https://tio.run/##y08uSSxL/Z@mYKunp/ffQSNXUyPPNrsoP08jVydVw0hTU1Mj09bQKjUvRddQJwvG0lTL08jUBgpoG2rWAJlgBkxM83@aRrShjoG1gY5hrCYXmGOIyjFElTGAc3QMINgaRELYYHNgPCQ2RA2EBzTgPwA" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
<h2>how</h2>
<p>Takes <code>m = [0 1 1; 1 0 1; 1 0 0]</code> as an example:</p>
<pre class="lang-matlab prettyprint-override"><code>octave:1&gt; m = [0 1 1; 1 0 1; 1 0 0]
m =

   0   1   1
   1   0   1
   1   0   0

octave:2&gt; n = kron(m,e(2))    # Repeats each element by 2x2
n =

   0   0   1   1   1   1
   0   0   1   1   1   1
   1   1   0   0   1   1
   1   1   0   0   1   1
   1   1   0   0   0   0
   1   1   0   0   0   0

octave:3&gt; n11 = n(1:end - 1, 1:end - 1)
n11 =

   0   0   1   1   1
   0   0   1   1   1
   1   1   0   0   1
   1   1   0   0   1
   1   1   0   0   0

octave:4&gt; n12 = n(1:end - 1, 2:end)
n12 =

   0   1   1   1   1
   0   1   1   1   1
   1   0   0   1   1
   1   0   0   1   1
   1   0   0   0   0

octave:5&gt; n21 = n(2:end, 1:end - 1)
n21 =

   0   0   1   1   1
   1   1   0   0   1
   1   1   0   0   1
   1   1   0   0   0
   1   1   0   0   0

octave:6&gt; n22 = n(2:end, 2:end)
n22 =

   0   1   1   1   1
   1   0   0   1   1
   1   0   0   1   1
   1   0   0   0   0
   1   0   0   0   0

octave:7&gt; (n11 &amp; n22) | (n12 &amp; n21)
ans =

  0  0  1  1  1
  0  1  0  1  1
  1  0  0  0  1
  1  0  0  0  0
  1  0  0  0  0
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 15 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>żḢS€E?ƝẎ)Z$⁺Ạ€€
</code></pre>
<p>A monadic Link that accepts a list of lists of <code>1</code>s and <code>0</code>s and yields a list of lists of <code>1s</code> and <code>0</code>s.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///onoc7FgU/alrjan9s7sNdfZpRKo8adz3ctQAoBET/H@7e8nDHJiAr7HC7@///hgqGCgYQzAUiIWwDLigNIpHYEDUQngEA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8///onoc7FgU/alrjan9s7sNdfZpRKo8adz3ctQAoBET/H@7e8nDHJiAr7HC7O9fRyQ93Lj7cDuRmnZz@qHHfoW2Htv3/b6hgwGWgYMjFZQgk4AxDhIgBmKFgAMFcIBLCBuuD8ZDYEDUQngEA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<p>The basic idea is to insert a value, <code>f(left,right)</code>, between each neighbouring pair, <code>[left,right]</code>, of each row then to transpose, and then to repeat the same thing again (insert values, transpose).</p>
<p>In order to handle the diagonal requirement, we must have an <code>f(left,right)</code> that maintains the necessary information between the steps. That is, when neighbours are not equal we need to remember which one was a one during the first pass and have those values work for us during the second pass.</p>
<p>The code below implements <code>f(left,right)</code> as &quot;if <code>left</code> equals <code>right</code> then yield <code>left</code> else yield the sum of each of <code>[left,right]</code>&quot; (<code>ḢS€E?</code>). This means that the first pass can yield <code>[1,0]</code> or <code>[0,1]</code> (to be treated as <code>0</code>s in the end) in addition to <code>0</code> and <code>1</code>, and the second pass can then yield <code>[1,1]</code> too (to be treated as a <code>1</code> in the end).</p>
<pre><code>żḢS€E?ƝẎ)Z$⁺Ạ€€ - Link: list of list of 1s and 0s, M
          $⁺    - do this twice - f(Current=M):
        )       -     for each Row in Current:
      Ɲ         -       for neighbouring pairs of elements in Row:
     ?          -         if...
    E           -         ...condition: equal?
 Ḣ              -         ...then: head
                             first pass: [0,0]-&gt;0
                                         [1,1]-&gt;1
                                              second pass: [  0  ,  0  ]-&gt;  0
                                                           [  1  ,  1  ]-&gt;  1
                                                           [[1,0],[1,0]]-&gt;[1,0]
                                                           [[0,1],[0,1]]-&gt;[0,1]
  S€            -         ...else: sum each
                             first pass: [0,1]-&gt;[0,1]
                                         [1,0]-&gt;[1,0]
                                              second pass: [  0  ,  1  ]-&gt;[0,1]
                                                           [  0  ,[0,1]]-&gt;[0,1]
                                                           [  0  ,[1,0]]-&gt;[0,1]
                                                           [  1  ,  0  ]-&gt;[1,0]
                                                           [  1  ,[0,1]]-&gt;[1,1]
                                                           [  1  ,[1,0]]-&gt;[1,1]
                                                           [[0,1],  0  ]-&gt;[1,0]
                                                           [[0,1],  1  ]-&gt;[1,1]
                                                           [[0,1],[1,0]]-&gt;[1,1]
                                                           [[1,0],  0  ]-&gt;[1,0]
                                                           [[1,0],  1  ]-&gt;[1,1]
                                                           [[1,0],[0,1]]-&gt;[1,1]
ż               -       zip Curent and those together
       Ẏ        -       tighten (flattens by one level, to counter the zip)
         Z      -     transpose
            Ạ€€ - all? for each element in each row
                  0-&gt;0  1-&gt;1  [0,1]-&gt;0  [1,0]-&gt;0  [1,1]-&gt;1
</code></pre>
<hr />
<p>Implementing <code>f(left,right)</code> as a hash function, with Jelly's <code>ḥ</code> built-in, I've only found a 16:</p>
<pre><code>ż⁽7&amp;,14ḥ$ƝẎ)Z$⁺Ḃ
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a> with <a href="https://numpy.org/" rel="nofollow noreferrer">numpy</a>, <del>97</del> 70 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda m:abs(diff(diff(kron(m,1j**eye(2))),1,0))&gt;=2
from numpy import*
</code></pre>
<p><a href="https://tio.run/##ZY29DoIwFEZ3nqJjSzq0upHohquLGzJUaWOV/uRSVJ4eQWgU/ZI296TfPfVduDi77tXm2NfCnCqBTCZODa60UtN1A2exofyaprKTeEUIoZwyQrabVaLAGWRb4zukjXcQ0j5AlyVoyOOia4kO0MqJx3jQNmCF5V3UWFvfBjz4SCKfZ@kDyve7HMBBhrxomr4oho9KWjDKyzIZif8R/3ljkSibzrvDZpptkRcUmxN/e6LlM7/7s2@5HzvlCw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>The basic idea is this: Expand each element into a 2-by-2 block, then look at each 2-by-2 square (overlapping) in the resulting matrix; each square should correspond to a 1 iff it contains a pair of diagonally opposite 1s.</p>
<p>The implementation works a bit differently. <code>kron</code> expands each 1 into <code>1j**eye(2)</code>, which is
<span class="math-container">\$ \begin{array}{|c|c|} \hline i &amp; 1 \\ \hline 1 &amp; i \\ \hline \end{array} \$</span>, and taking <code>diff</code> in both directions is equivalent to a sum with multipliers <span class="math-container">\$ \begin{array}{|c|c|} \hline 1 &amp; -1 \\ \hline -1 &amp; 1 \\ \hline \end{array} \$</span> on each 2-by-2 square (overlapping). Then, each square contains two diagonally opposite nonzero values iff its result has real or imaginary component at least 2 in absolute value, which with integer components is equivalent to its own absolute value being at least 2.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-xP</code>, 25 bytes</h1>
<pre><code>{MX B*R_MPaZb}MP_WV_MaWVa
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgebSSbkWAUuyCpaUlaboWO6t9IxSctILifQMSo5JqfQPiw8PifRPDwxIh8lBle6OVoqMNrA2tDWOtow2tDeC0QWws3CwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<p>Port of <a href="https://codegolf.stackexchange.com/a/245605/16766">Neil's Charcoal answer</a>.</p>
<pre><code>{MX B*R_MPaZb}MP_WV_MaWVa
                     a     First command-line input (eval'd as list due to -x flag)
                      WVa  Weave with itself (double each row)
                    M      Map to each row:
                _WV_         Weave with itself (double each column)
{            }MP           Map to each pair of rows:
          aZb                Zip the two rows together
        MP                   Map to each pair of [upper lower] pairs (i.e. 2x2 submatrix):
      R_                       Reverse the first pair
    B*                         Multiply itemwise by the second pair
 MX                            Maximum (1 if either product is 1, 0 otherwise)
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 35 bytes</h1>
<pre><code>ＷＳ⊞υιＥ⊖⊗Ｌυ⭆⊖⊗Ｌθ⌈Ｅ²⌊Ｅ²§§υ⊘⁺ιπ⊘⁺λ¬⁼νπ
</code></pre>
<p><a href="https://tio.run/##hY7LCsIwEEX3/YosJxAhdduVUEHBSsEviG1oA9P0ldT@fRxTlO6cWRzmcrhM1aqp6hWG8GoNagZXO3j3cJOxDXDOSj@34AUzPEtKCh0UaoBcV5PutHW6hrz3TyTetG0cuZxzwbaCP@oY1UKtpvNd7D3Saez@PLmrrfUKX9IrF4ULlZToZzCCDbFlH6Jg997BefQKZ7Cb8psshDSVtEkqCTKRkRs@IVEm4bDgGw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes I/O as a list of newline-terminated strings of <code>0</code>s and <code>1</code>s. Explanation:</p>
<pre><code>ＷＳ⊞υι
</code></pre>
<p>Input the binary matrix.</p>
<pre><code>Ｅ⊖⊗Ｌυ⭆⊖⊗Ｌθ⌈Ｅ²⌊Ｅ²§§υ⊘⁺ιπ⊘⁺λ¬⁼νπ
</code></pre>
<p>Loop over the dimensions of the expanded matrix, calculating the positions of the possible adjacent <code>1</code>s, and for each output <code>1</code> if one pair of positions is both <code>1</code>. This is equivalent to the following operations, starting with:</p>
<pre><code>WX
YZ
</code></pre>
<p>This first gets expanded by duplication, i.e.</p>
<pre><code>ABC WWX
DEF=WWX
GHI YYZ
</code></pre>
<p>Then for each position in the grid, two pairs of cells are checked: the cell itself and the one diagonally below right, and the cells below and to the right:</p>
<pre><code>A -&gt; AE | BD = WW | WW = W
B -&gt; BF | CE = WX | XW = WX
D -&gt; DH | EG = WY | WY = WY
E -&gt; EI | FH = WZ | XY as desired
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 82 bytes</h1>
<pre><code>m-&gt;matrix(2*#m~-1,2*#m-1,x,y,m[i=x++\2,j=y++\2]*m[k=i+x%2,l=j+y%2]||m[i,l]*m[k,j])</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TY5BCoMwFESvIhYhmi8krkol7rsqdGtDcWOJNRIkQgTpRboRSumqB-ptGo2Ci2TeZOZ_8vyoohXXmxpfpcfenS7j_e8s40wWuhUGJdFOPmIKk1ox0IPMBTMYXxKoWD8pj2R-ZwKbIIGaVbgPEj4Mtgb1HEHFw2Xzt1Cq7pH04sxTrWg08o_NwQ9T5xSSKyL_1OltUtosBC_PKZCUAOWWKdAt0u0rWRCIO-l0O57nV7dh13GO8PXT4-j0Dw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/245583/">245583</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




