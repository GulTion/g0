<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::262553</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>118</td><td>C clang</td><td>230710T114911Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262601#262601">Noodle9</a></td></tr>
<tr d-ix="1"><td>224</td><td>Scala</td><td>230712T114411Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262707#262707">138 Aspe</a></td></tr>
<tr d-ix="2"><td>125</td><td>Python 3</td><td>230709T172000Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262572#262572">Ethan C</a></td></tr>
<tr d-ix="3"><td>037</td><td>Pyth</td><td>230710T215219Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262615#262615">CursorCo</a></td></tr>
<tr d-ix="4"><td>028</td><td>05AB1E</td><td>230710T085307Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262595#262595">Kevin Cr</a></td></tr>
<tr d-ix="5"><td>155</td><td>Excel</td><td>230709T205550Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262580#262580">Jos Wool</a></td></tr>
<tr d-ix="6"><td>174</td><td>Python 3</td><td>230709T200446Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262579#262579">dave20</a></td></tr>
<tr d-ix="7"><td>055</td><td>J</td><td>230709T174729Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262574#262574">Jonah</a></td></tr>
<tr d-ix="8"><td>113</td><td>JavaScript ES11</td><td>230709T105559Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262565#262565">Arnauld</a></td></tr>
<tr d-ix="9"><td>2625</td><td>Vyxal s</td><td>230709T131148Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262567#262567">lyxal</a></td></tr>
<tr d-ix="10"><td>237</td><td>Python3</td><td>230709T115851Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262566#262566">Ajax1234</a></td></tr>
<tr d-ix="11"><td>049</td><td>Charcoal</td><td>230709T092951Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262563#262563">Neil</a></td></tr>
<tr d-ix="12"><td>120</td><td>JavaScript Node.js</td><td>230709T075059Z</td><td><a href="https://codegolf.stackexchange.com/questions/262553/landmine-number-ii/262555#262555">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, <sup><s>148</s> <span class="math-container">\$\cdots\$</span> <s>129</s></sup> 118 bytes</h1>

<pre class="lang-c prettyprint-override"><code>#define y(z)*a*(a[-1]z+a[1]z+a[n]z+a[-n]==l)
i;j;f(*a,n,l,*s){for(*s=0,a+=j=n-2,i=j*j;i--;*s+=y()+2*y(*))a+=~i%j?1:3;}
</code></pre>
<p><a href="https://tio.run/##1VRdz5sgFL7vryAuXQAxU1HbzrldLPsVbS@MxU3n6BtxST/S/fUOQaj6Ntl2OYMc5Dzn6zlI4RVNzr/e728OrKw4A2d4QTjHMN96wf7i5ls9czV7fJ9lDVpUaZ2WEOeEk4Zgga7lsYVYZD7J3azOuBeSKqtxnVael2LhZmeI3BCfIUZIIn5Vy/pT8J6mt3vFO/AjrzhE4LoA8uk3OiY6f7sHGbgGBDwft3QCDyw8UmNtFpGCR8ZOLkK7nvkIrQ8JoQqisRs1r9Smb9xTpfWVys7@eD1zT7V7fwT8/8aspsjWtFH6jRnDzgweW4apIYqabljq1iOqezczH4n2YXu8Nk21LQ9Hm9Er7cxqfghWfzh3fzGif8LP4nMdnyo3sTlpep3MsI2lIkgUUtJFE8V8GCeT2rAyENpA/V9E/zdahFpQLSItYi0SLVaj4Oz0woqOHR5c9UyGpu39VyLTCelgUxy56EDxLW@xnFnxnbXa1NmdvoS70@azfGOHgPE3dQZrebkA2Iet@IGdpJmfDssPQFQXdiyhSQi9Gzaw3UmB6yq0uWEejEhXmhWl36djNeCDlr/SPvIZcpF5cBUGWcwj1MSi1ha1sajRBNc/L60EltBZHiQf3bbCHLig3qN08Qy1485Ic5tU0AwVNE/rE6OCYKdu8rcCTTFMerC9njt5JAq8j0DOS7HjMh8CGgIEsY0WWcZM@jrBlnU/Wy6JWNzuvwE" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<p><em>Saved a whopping <s>12</s> <s>19</s> 30 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!</em></p>
</div>
<div id="pu1" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 224 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/262566/110802">@Ajax1234's Python answer</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##pZJNb4JAEIbv/oo5mV1RIwt@IOVQbz301PTUeFj5sChiA9RIjL@dDrsCK5gmTclmMvPsy@w7sKnLI14cNzvfzeCVhzFcCs8PICDx8iXOhqvlc5Lw/ENGJOs1dUhwTMj5aaRDdoTVOPLjbfY5YnZeITKhDeXOipxHOiU5tTdljhmWtnvLNcy9MtekZudwbaO5mmfvHT7YDNyBZ59uWkrz0I88CAOyd5y4399hpKeBAX6U@hVGwGogFbJEW@n3oQAoRzzgtIQn23QJcrq3LAnj7Zou4T0OM3Dg0gN8TjyCVMdSqIiM@hDKRYfwe02bFqzbwhRrUb9lVkhXkexl1og1SGlvdNuj0BBCpvqyBJrjXk0n0oeQM5Wi8BZVWm9MVANmZWAchFFEFpTcV3fiacvtRPhqTrFEbamnWq3zZq0WcoJbVD/WovqqzWgSMbnxUHv3Uxq5amD@@E7Uq30Z/rxh/qcV7QmnX3insygmQTlHWl3IhuozxKyDceLU6FD8C6nZoUbZYtrBbFryWYeXPuaCXnvX4gc" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>def f(n:Int,B:Array[Array[Int]])=(for(x&lt;-1 to B.length-2;y&lt;-1 to B(0).length-2;a=B(x-1)(y);b=B(x)(y-1);c=B(x)(y+1);d=B(x+1)(y);j=a+b+c+d;k=a*b*c*d;v=B(x)(y))yield if(k==n&amp;&amp;j==n)v*3 else if(k==n)v*2 else if(j==n)v else 0).sum
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##pVLLTsMwELznK/ZU2Wmp8uojFT3QGwdOiBPikKZJSTEuSkJFhfrtZe087MQREkJyVtmZ8eza6yKOWHS9HreHJC7hIco4fFsAuySFlPAV3PNyApsV3OV5dH6uImIvL1RysJZygFOUg8gcmaXHHMgX3N6AC5@8zBhspizh@/IVEKL1nlp37uiIQwelogSDCEts0FlQ5Ew73LbiEJd0h4sVN@5zu9pzPOB5QC5CZotfjN@uw75J1kbWRtbusae2pvLMUiC4aw0cRiPhjn8UL268RrkNfitMWJFoak3jmZquT81fLBVLS/zVc33HIZMo3xfNVB/LPON7MdEnnukjZVC4mEoVqaI7AbHoBH7PqbLwTItArmW7K2ggV4cqr6CFPAVp9r5pj0JfCj29r1BCC@Ra1Kn6kHJPR1FYRx1tCUdvIGgamKYZY2RJSTfriGe9bh3Zl6oSyjzUq4a9evOeRXWCOuqXtWxuVR2tgryKGNR2hqLkegOL4TfRrv5j@DMR/MeKWrLTD3zTJeMkFecomgepUHeOsGfAeOLCN1CcQhEYqC8sZgbszQQ@N3DRx0KiF@tiXa8/" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def f(n: Int, B: Array[Array[Int]]): Int = {
    var t = 0
    for (x &lt;- 1 until B.length - 1) {
      for (y &lt;- 1 until B(0).length - 1) {
        val a = B(x - 1)(y)
        val b = B(x)(y - 1)
        val c = B(x)(y + 1)
        val d = B(x + 1)(y)
        val j = a + b + c + d
        val k = a * b * c * d
        val v = B(x)(y)
        if (k == n &amp;&amp; j == n) t += v * 3
        else if (k == n) t += v * 2
        else if (j == n) t += v
      }
    }
    t
  }

  def main(args: Array[String]): Unit = {
    val s1 = Array(Array(1, 1, 1), Array(1, 1, 1), Array(1, 1, 1))
    val s2 = Array(Array(1, 4, 4, 8), Array(4, 4, 4, 1), Array(4, 1, 1, 4), Array(2, 1, 1, 4))
    val s3 = Array(Array(1, 2, 3, 1, 2), Array(1, 9, 1, 7, 3), Array(0, 4, 8, 3, 2), Array(0, 1, 0, 1, 0), Array(0, 0, 1, 0, 0))
    val s4 = Array.fill(8)(Array.fill(8)(0))
    val s5 = Array(Array(0, 9, 0), Array(9, 9, 9), Array(0, 9, 0))
    val s6 = Array(Array(4, 8, 4, 8, 4), Array(2, 8, 4, 4, 2), Array(8, 4, 2, 4, 4), Array(2, 8, 4, 4, 8), Array(4, 8, 4, 2, 4))
    val s7 = Array(Array(1, 1, 1, 1, 1, 1), Array(1, 1, 1, 1, 1, 1), Array(1, 1, 1, 1, 1, 1), Array(1, 1, 4, 1, 1, 1), Array(1, 1, 1, 1, 1, 1), Array(1, 1, 1, 1, 1, 1))

    println(f(4, s1))
    println(f(16, s2))
    println(f(8, s3))
    println(f(0, s4))
    println(f(36, s5))
    println(f(256, s6))
    println(f(4, s7))
  }
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 125 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda n,l:sum(e*(2*(a*b*c*d==l)+(a+b+c+d==l))for x,y,z in zip(n,n[1:],n[2:])for a,b,c,d,e in zip(x[1:],z[1:],y,y[2:],y[1:]))
</code></pre>
<p><a href="https://tio.run/##pVLbjpswEH2fr7Dygk3clW/dNUj0RwgPDpAtu8SJMEghD/31dOxN1G77UqlYzPXMzPHlvM7fT17fDtXuNrrjvnPE87EMy5H2OVU5dfk@b/Ouqka2pW6737bb5LDDaSIXvvIrGTy5Dmfqua9l2aBUZZPSju95yzvePyCXBLgmufI1AlGix9jNVZvNRkoJ95@AIT@@EQkgjbFgjJFgpDSgopDPKakwqzQqWcgXDcJYrUBIXCBQCLARZhAm7t9/G7GhwH6FgKIoktaJTIFctJCgZZwu7QtoIQooHkSNxQXKGqRjjTIfto1xhfbX1OTZQtz8/Qw@KfN3MJ2Q0nhwT@E8DjPNdn7nMwbwOg1dqOq6HvxMB0bidQzxGt6fwjzhVbAmxd5j7O1Xdcbq8otsPpJvMeka8MsRe6VOn5AIfPiRCEZE89sorDwt8z9Wyj8qITm@i@7k/GtPx97TyISxEsilOtC0R2ze4ZvDeLIYkLWKU5MHxIXQTzPCqxXOUySSuXEkcx9m0rrQBzItnoSlbfsQDss4rhm7/QQ" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>The function takes in a 2D list of integers <code>(n: list[list[int]])</code> and the landline number <code>(l: int)</code>. Magical <code>zip</code> stuff happens which assigns <code>a,b,c,d</code> to the values adjacent to every &quot;central&quot; coordinate, and <code>e</code> to the value of the coordinate in focus.</p>
<p>Explanation by gsitcia:</p>
<p><code>_ for x,y,z in zip(n,n[1:],n[2:])</code> is equivalent to <code>for i in range(1,len(n)-1): x,y,z=n[i-1],n[i],n[i+1]; _.</code> <code>_ for a,b,c,d,e in zip(x[1:],z[1:],y,y[2:],y[1:])</code> is equivalent to <code>for j in range(1, len(n[0])-1): a,b,c,d,e = n[i-1][j], n[i+1][j], n[i][j-1], n[i][j+1], n[i][j]; _</code> both of these work because zip will cut off at the shortest length</p>
<p><em>-1 byte thanks to spooky_simon</em></p>
<p><em>-50 bytes thanks to gsitcia</em></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 37 bytes</h1>
<pre><code>sm+*yJ@d4qQ*FK%2td*JqQsKsmsM.:Cd3.:E3
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/vzhXW6vSyyHFpDBQy81b1agkRcurMLDYuzi32FfPyjnFWM/K1fj/f0MzruhoQx0TILSI1VGINgEzDSFMQyA0ATGNoMxYAA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>33</s> 28 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>2Fø€ü3}εε˜ιθDOsPD)QOy˜4è*]˜O
</code></pre>
<p>-5 bytes thanks to <em>@ovs</em>.</p>
<p>Inputs in the order <em>matrix, landmineNumber</em>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f/fyO3wjkdNaw7vMa49t/Xc1tNzzu08t8PFvzjARTPQv/L0HJPDK7RiT8/x//8/OtpQx0jHWAdIxuoA2ZZAlrmOMZBtoGOiYwGUMQKzDXXAGMyG8AxiY7ksAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpSbKWgZF@ZYK@kkJiXoqCkc2i3DpeSf2kJUAoiE6b038jt8I5HTWsO7zGuPbf13NbTc87tPLfDxb84wEUzMtC/8vQck8MrtGJPz/H/r6QXpnNom/3/aCAw1AHCWB00OlbHJFZHASxtAoQWQAkTMMsQzAIpAiqINoKyYnUMzWDqjXSMgWJGYKMsgSxzHWMg2wBkClDGCMw21AFjMBvCMwCaYQExAiSEBKGKBkokFiQKcZYlWIElkLYEK7QESxvDfW4M8gtQxhgcKgZQn1romIPFQMZZAtVbQpSDggOMwcFoAQ5cUOCAWEYgHpI4JPihMkAjjEzhdsIhLOrw8EyIUAmK@FgA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>2Fø€ü3}   # Create all overlapping 3x3 blocks of the first (implicit) input-matrix:
2F    }   #  Loop 2 times:
  ø       #   Zip/transpose; swapping rows/columns
          #   (which will use the implicit first input-matrix in the first iteration)
   €      #   Map over each row:
    ü3    #    Create overlapping triplets
εε        # (Nested) map over each 3x3 block:
  ˜       #   Flatten it to a single nonet-list
   ι      #   Uninterleave it into two parts
    θ     #   Pop and leave just the last list (with the even-indiced values)
     D    #   Duplicate this quadruplet
      O   #   Sum it together
     s    #   Swap so the quadruplet is at the top again
      P   #   Take its product
       D  #   Duplicate this product
        ) #   Wrap all three values into a list: [sum,product,product]
  Q       #   Check for each whether it's equal to the second (implicit) input-integer
   O      #   Sum the checks together
    y˜    #   Push the flattened 3x3 block again
      4è  #   Pop and leave the 0-based 4th integer (the center)
        * #   Multiply it to the earlier sum of checks
]         # Close the nested map
 ˜        # Flatten it to a single list
  O       # Sum this list together
          # (after which it is output implicitly as result)
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Excel, 155 bytes</h1>
<pre><code>=SUM(TOCOL(
        MAP(A1#,
            LAMBDA(a,
                LET(
                    b,OFFSET(a,{-1,0,0,1},{0,-1,1,0}),
                    c,SUBTOTAL(2,b),
                    d,SUBTOTAL(9,b),
                    IF(SUM(c)=4,IF(SUM(d)=Z1,a)+IF(PRODUCT(d)=Z1,2*a))
                )
            )
        ),2
    )
)
</code></pre>
<p>Matrix is spilled range <code>A1#</code>; landmine number in cell <code>Z1</code> (or, if necessary, some other cell which does not form part of <code>A1#</code>).</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 174 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda a,b:sum(a[c][d]*((b==a[c-1][d]+a[c][d-1]+a[c+1][d]+a[c][d+1])+2*(b==a[c-1][d]*a[c][d-1]*a[c+1][d]*a[c][d+1])) for d in range(1,len(a)-1) for c in range(1,len(a[d])-1))
</code></pre>
<p><a href="https://tio.run/##ZYzZCsMgEEXf/QofXSI4WmhSyJeEPIwxXcCYki7Qr7dKIG0pA8Ocew9zfd3Pc7QpBZycR4qVO9weE8Nu6DvfC8Zc22ZQUFCucYZyye8sA5dG/Ohi08Wmi4/O6XFeqKeXSBeMp5FBFcbIkCtYq@Gvyg9Ky1MCY8EQaGBvid7V1hANeYjOSxNSJ/UMbw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>If I could condense the doubled calls to a[c-1][d], a[c+1][d], a[c][d-1], and a[c][d+1], I could save several bytes.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.jsoftware.com" rel="nofollow noreferrer">J</a>, 55 bytes</h1>
<pre><code>[:+/@,[({.@]*[:I.=)&quot;#.3 3(4&amp;{,](+/,*/)@#~1-2|#\)@,;._3]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70wa8FOJT31NAVbKwV1BR0FAwUrINbVU3AO8nFbWlqSpmtx0zzaSlvfQSdao1rPIVYr2spTz1ZTSVnPWMFYw0StWidWQ1tfR0tf00G5zlDXqEY5RtNBx1ov3jgWqn25Jldqcka-gpGpmUKagpKekjZQ1kghFmSXAZeJBRByGVmYmBhxWZgYmUDYFiBxIxMuqFYTLBoNwQCDMsEUhBpijM16A0sDLktLSxANce6CBRAaAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<ul>
<li>Uses J's subarray verb <code>3 3...;._3</code>, which automatically extracts the 3x3 tiles</li>
<li>The rest is figuring out to extract the compass directions from each of those, and then do the needed arithmetic and comparisons with the landmine number</li>
</ul>
</div>
<div id="pu8" class="pu"><h1>JavaScript (ES11), 113 bytes</h1>
<p>Expects <code>(n)(matrix)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;m=&gt;m.map((r,y)=&gt;r.map(a=(v,x)=&gt;t+=v*=a+(b=m[y+1]?.[x])+(c=m[y-1]?.[x])+r[++x]==n|2*(a*b*c*r[a=v,x]==n)),t=0)|t
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=pVDBbtQwEFWvw09Ye1l7k1p2YrYOyNsTHLn0mOaQTZOyUuJsnWy1KwpfgMSlN0CqEPwDv0KP_QF-gXGybEEcsZMZz7znmef5-NW2F-Xdl8p82_TVsf5xZc2iwY83-ZpSF-6YWbghyA29DrcY9oG5npk8oEvTpLtAZqc83WYsoIWPjw-xS4Ngmxljb6IZzWfLWTFzaW6wiE8yFvZGsJt-bHx_9MSVV5uVK-mk6iaMuzK_eLmqy7OdLahgvG_Pereyl5Txbl2vejo5t-cWiVXrXuTFa9oRsyBvgJC67ElODOkeiRMWIuBXakPSbvoM8Zyv2_VjOfJuQbCcf-qrTbMs3eFOM5A94HyPlHPusj-JB6YrUQWpqGW0Yc8Bs0Vru7Yued1eUkTDkWK8BnJKpj-_f3j4dIt2Sp6R6cPn91O89paNM7m7P5pLKWH_E1BeowSQSmlQSklQUiqIvJHzAYwQjWJ0MpEnMQil4wiExA0CjQDtaQppYr_---ALCqyXCEiSZPDxICZBLbGQEEvfXeoTiIVIIPktVGncEGmFcrSK1HjWPh_h-elQZK7BP34_g7-c-jc5TCiKx_n9Ag" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>n =&gt;                          // n = target number
m =&gt;                          // m[] = digit matrix
m.map((r, y) =&gt;               // for each row r[] at index y in m[]:
  r.map(a =                   //   initialize a to something NaN'ish
    (v, x) =&gt;                 //   for each value v at index x in r[]:
    t +=                      //     add to t:
      v *=                    //       v multiplied by:
                              //         1 if the sum of ...
        a +                   //           a, the value on the left
        (b = m[y + 1]?.[x]) + //           b, the value below
        (c = m[y - 1]?.[x]) + //           c, the value above
        r[++x]                //           and the value on the right
        == n |                //         is equal to n
        2 * (                 //         2 if the product of:
          a * b * c *         //           a, b, c
          r[a = v, x]         //           and the value on the right
                              //           (copy v into a afterwards)
          == n                //         is equal to n
        )                     //
  ),                          //   end of inner map()
  t = 0                       //   start with t = 0
) | t                         // end of outer map(); return t
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>s</code>, 210 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v1</a></sup>, 26.25 bytes</h1>
<pre><code>żṪ:Ẋ:ƛk□¨V+ƛ¹nÞi;₍Π∑⁰=;¹„¨VÞi*vB
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=1#WyI9cyIsIiIsIsW84bmqOuG6ijrGm2vilqHCqFYrxpvCuW7Dnmk74oKNzqDiiJHigbA9O8K54oCewqhWw55pKnZCIiwiIiwi4p+oIOKfqCAxIHwgMiB8IDMgfCAxIHwgMiDin6kgfCDin6ggMSB8IDkgfCAxIHwgNyB8IDMg4p+pIHwg4p+oIDAgfCA0IHwgOCB8IDMgfCAyIOKfqSB8IOKfqCAwIHwgMSB8IDAgfCAxIHwgMCDin6kgfCDin6ggMCB8IDAgfCAxIHwgMCB8IDAg4p+pIOKfqVxuOCJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>I forgot how this worked like 3 times while writing it. Chances are after I paste in the explanation, it'll be 4 times.</p>
<h2>Explained</h2>
<pre><code>żṪ:Ẋ:ƛk□¨V+ƛ¹nÞi;₍Π∑⁰=;¹„¨VÞi*vB­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁣⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁣⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁣⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁡⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁤⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁤⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁢⁡⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁤⁪‏‏​⁡⁠⁡‌⁢⁤​‎‎⁪⁡⁪⁠⁪⁢⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁢⁪‏‏​⁡⁠⁡‌⁣⁡​‎‎⁪⁡⁪⁠⁪⁢⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁡⁪‏‏​⁡⁠⁡‌⁣⁢​‎‎⁪⁡⁪⁠⁪⁢⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁡⁪‏‏​⁡⁠⁡‌⁣⁣​‎‎⁪⁡⁪⁠⁪⁢⁤⁢⁪‏‏​⁡⁠⁡‌⁣⁤​‎‎⁪⁡⁪⁠⁪⁢⁤⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁤⁪‏‏​⁡⁠⁡‌⁤⁡​‎‏​⁢⁠⁡‌­
żṪ                                # ‎⁡The range [1 ... len(field) - 1]
  :Ẋ                              # ‎⁢Cartesian producted with itself. This generates a list of indices of central numbers
     ƛ                ;           # ‎⁣To each central number index:
      k□¨V+                       # ‎⁤  Add it to ⟨ ⟨ 0 | 1 ⟩ | ⟨ 1 | 0 ⟩ | ⟨ 0 | -1 ⟩ | ⟨ -1 | 0 ⟩ ⟩ to get the numbers above, below, left and right of this number
           ƛ    ;                 # ‎⁢⁡  To each adjacent number index:
            ¹nÞi                  # ‎⁢⁢    Retrieve it from the field
                 ₍Π∑              # ‎⁢⁣  Push a list of [product(adjacents), sum(adjacents)]. Keen readers will notice that I used
                                  # ‎⁢⁣  this in the previous challenge
                    ⁰=            # ‎⁢⁤  And test whether that equals the landmine number. Also in the previous challenge.
                       ¹„         # ‎⁣⁡Push a copy of the field and rotate the stack left so that the central indices are on the top
                         ¨VÞi     # ‎⁣⁢Retrieve the numbers that are central in the field
                             *    # ‎⁣⁣And multiply by the list of checksums. 
                              vB  # ‎⁣⁤Convert each from binary.
# ‎⁤⁡The s flag sums the resulting list

💎 Created with the help of Luminespire at https://vyxal.github.io/Luminespire
</code></pre>
</div>
<div id="pu10" class="pu"><h1>Python3, 237 bytes:</h1>
<pre class="lang-py prettyprint-override"><code>R=range
def f(n,B):
 t=0
 for x in R(1,len(B)-1):
  for y in R(1,len(B[0])-1):
   a,b,c,d=B[x-1][y],B[x][y-1],B[x][y+1],B[x+1][y]
   j,k=a+b+c+d,a*b*c*d;v=B[x][y]
   if k==n and j==n:t+=v*3
   elif k==n:t+=v*2
   elif j==n:t+=v
 return t
</code></pre>
<p><a href="https://tio.run/##pZHBbqMwFEXX877CyiYG3Mo2Lwl05E0@YBbdMqgiAVpaxkHgRs3XZ2wgqdEsBwu/63culi/uLubtpOOk66/XZ9UX@rWCsqpJTTXbB09AjOJA6lNPvkijyTMVrK003QcPwtGRXBYk4/kNkoId2JGVap99PYg8u@TMKlvtYlbRpKKRuk/e2YcqokN0jEpWhIfwGJY/z2oyj4amJh9KaVLokrxb8WQidQ5jh6p2hlNP3nt3H5C@Mp@9JubqUprTS91UbUkHe94fM8qy8E/R0UYbRpogdwkbl7BuWlP19NdJV4wMj0PXNoauf@t1EOQAgyCKrFYrEELcX7ce5A0gJoCIAlAIBOmm0RDfDDIWEkQqdjFwTGIJXNgB3E58suJs5fPzv2LcdHPbNOWQpulYR7CdASZ2gEwQJSQocdKJ68s5w@47/Rx@UfDfpnN3vf3LtKbIvKsQQRDcidj6SPoo8UnsE@4T9Em82G7jI7lZsK3PFufbWXL9Cw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 49 bytes</h1>
<pre><code>ＷＳ⊞υιＰ⪫υ⸿Ｎθ≔⁰ηＦ⪫υ⸿«Ｆ⌊ＫＶ≧⁺×ＩＫＫ⁺⁼ΣΣＫＶθ⊗⁼ΠΣＫＶθηι»⎚Ｉη
</code></pre>
<p><a href="https://tio.run/##fVDBSsQwED1vviLsaQoV2q7giidZPSh0KVY8ecl2YxNMkzbJ6EH89jrN4kVkCclk3pv3kplOCd85Yeb5U2kjOTzYEWMbvbY9ZBlvMCjAnOvshtVooh6JifDotF3g9atfZ0Ql1R6Hg/QwUX4bgu4tFDlXlL05z/9I@BdbJbjWVg84QCPl@4uze4mDsJaezngtxpPPk@5VhMZgyPmzHmSAnQgxSagw5wsD9xMKE6Alr/Zfv5xPtO8cHow8/pY33h2xi2ckKSxdrJrU@jKJb7YzUnig6wlM/1E0iXkuq01ZsfK6vNqw4nK7qVhR0mIFHQVj2/niw/wA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＷＳ⊞υι
</code></pre>
<p>Input the field.</p>
<pre><code>Ｐ⪫υ⸿
</code></pre>
<p>Output the field without moving the cursor.</p>
<pre><code>Ｎθ
</code></pre>
<p>Input the target.</p>
<pre><code>≔⁰η
</code></pre>
<p>Start with zero score.</p>
<pre><code>Ｆ⪫υ⸿«
</code></pre>
<p>Loop over the field.</p>
<pre><code>Ｆ⌊ＫＶ
</code></pre>
<p>If there are digits on all four sides, then...</p>
<pre><code>≧⁺×ＩＫＫ⁺⁼ΣΣＫＶθ⊗⁼ΠΣＫＶθη
</code></pre>
<p>... multiply the current digit by the sum of <code>1</code> if the digital sum equals the target and <code>2</code> if the digital product of those digits equals the target.</p>
<pre><code>ι
</code></pre>
<p>Move to the next digit.</p>
<pre><code>»⎚Ｉη
</code></pre>
<p>Output the final total.</p>
<p>Removing the <code>Ｆ⌊ＫＶ</code> test has the effect of only considering those adjacent digits that exist e.g. in the top left corner it would search for the target from the sum and products of the digits to the right and below only.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 120 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>x=&gt;k=&gt;x.map((y,i)=&gt;y.map((z,j)=&gt;r+=[a=0,b=1,2,-1].map(d=&gt;{a+=c=(x[i+d%2]||0)[--d%2+j],b*=c})&amp;&amp;z*(a==k|2*(b==k))),r=0)&amp;&amp;r
</code></pre>
<p><a href="https://tio.run/##pVDtboMwDPzvp@DPqqQJaRyirVNl9iCUjfDRipYBAjTRrnt2FrV7g9ny@c73y3dyX24shrqfwrYrq@VAy0zxmeJZfbqesYusOcWXh7jKkxeDoMSRljmhNDLE9G6WFH87QQWxOalF@WTS203zJAw9FadU5msqfvhqdV0zR3S@mTXL/eacy4G0N4ZlBxkiwt8EFgCt3YK1FsEiWjAeAnz2dxOhAXzFlwi03UYGNPoG7UEHW/DkUf8kgc7UUPWNKyq2YfsyeU/FGw@YEnxzlOxDOpn7RIquHbumUk13ZHBgTo19U0/Zvs3u0fhAE6XU/AhqolhM/m0mcg6c75Zf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Some of ur test cases seem wrong, 2x1x4x1 = 8 = 2+1+4+1</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/262553/">262553</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




