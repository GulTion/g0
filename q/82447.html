<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::82447</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>054</td><td>Uiua SBCS</td><td>240607T145241Z</td><td><a href="https://codegolf.stackexchange.com/questions/82447/calculate-the-3bv-of-a-minesweeper-board/273508#273508">ovs</a></td></tr>
<tr d-ix="1"><td>021</td><td>MATL</td><td>170528T155039Z</td><td><a href="https://codegolf.stackexchange.com/questions/82447/calculate-the-3bv-of-a-minesweeper-board/123217#123217">Suever</a></td></tr>
<tr d-ix="2"><td>066</td><td>Octave</td><td>160608T220534Z</td><td><a href="https://codegolf.stackexchange.com/questions/82447/calculate-the-3bv-of-a-minesweeper-board/82455#82455">Suever</a></td></tr>
<tr d-ix="3"><td>072</td><td>MATLAB</td><td>160608T213422Z</td><td><a href="https://codegolf.stackexchange.com/questions/82447/calculate-the-3bv-of-a-minesweeper-board/82453#82453">Suever</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a> <sup><a href="https://tinyurl.com/Uiua-SBCS-Apr-12" rel="nofollow noreferrer">SBCS</a></sup>, 54 bytes</h1>
<pre><code>/+⊂⊙♭⊙≠◰⍥(⊞(/↥↧).)⧻.&lt;3⊞(/+×.-).⊚:⍥(¬⍥(≡/↥◫3⊂:0⊂0⍉)2.)2
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_12_0-dev_1__RyDihpAgLyviioLiipnima3iipniiaDil7DijaUo4oqeKC_ihqXihqcpLinip7suPDPiip4oLyvDly4tKS7iipo64o2lKMKs4o2lKOKJoS_ihqXil6sz4oqCOjDiioIw4o2JKTIuKTIKClAg4oaQIEctQDDiipziiJjiiaBAIC4KClAgJCAwMDAwMDAwMCAwMDAxMDAwMCAwMDAxMDAxMCAwMTAwMTAwMCAwMDEwMDAwMSAwMDAxMDAwMCAwMDAwMDAxMCAwMDAwMDAwMQpQICQgMDAxMDAwMTEwMDAwMDEwMDAxMDAwMDAxMDAxMDAwIDAwMDAwMTExMDAxMDAwMDAwMTAwMTAxMTAwMDAwMCAwMTAwMDAxMDAxMDEwMDEwMDEwMTEwMDAxMDEwMTAgMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDEwMDExMDAwIDAwMDEwMDAwMDAwMDAxMDAwMDAwMDAwMDEwMDAwMCAwMDAwMDAwMTAwMDAwMDAwMDAwMDAxMDEwMDExMDEgMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAxMDEwMDExIDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAxMDAwMCAwMDAwMDEwMDAwMDAwMDEwMDAwMDAwMDEwMDAwMDAgMDAxMDAwMTAwMTAwMTAwMDAwMDAxMDEwMDAxMDAwIDEwMDAwMTAwMDAwMDAwMTAwMDAwMTAwMTAwMDAxMSAwMDAwMDAwMDAwMTAwMTAwMDExMDExMDAwMDExMDAgMDAwMDAxMDExMDAwMDAwMTAxMTAwMDEwMDAxMTAwIDAxMTEwMDAwMDEwMTAwMTAwMDAwMDAwMDAwMDAxMCAwMDAxMDEwMDAwMDAwMDAxMDAxMDAxMDAwMDEwMDAgMDAxMDAwMDAwMTAwMDEwMDAwMDEwMTEwMDAwMDAwCgpQICQgMTAwIDAwMCAwMDAKUCAkIDEwMCAwMDAgMDAxClAgJCAxMDEgMDAwIDEwMQpQICQgMTAwMCAwMDAwIDAwMDEKUCAkIDEwMDAwIDAwMDAwIDAwMDAxClAgJCAxMDAwIDAwMDAgMDAwMCAwMDAxClAgJCAwMDAgMTAxIDAwMApQICQgMTAwMCAwMDAwIDAwMDAgMDAwMQo=" rel="nofollow noreferrer">Try it!</a></p>
<p>Finds all clear spots with no mine in a 3x3, counts the connected components, then adds the number of empty spots that are not adjacent to any clear spots.</p>
</div>
<div id="pu1" class="pu"><h1>MATL, <s>24</s> <s>22</s> 21 bytes</h1>
<p><em>1 byte saved thanks to @Luis</em></p>
<pre><code>4Y6Z+~l2#ZIw7MZ+G+~z+
</code></pre>
<p>Try it at <a href="https://matl.io/?code=4Y6Z%2B%7El2%23ZIw7MZ%2BG%2B%7Ez%2B&amp;inputs=%5B0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%3B+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+1%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%3B+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+1%2C+0%3B+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%3B+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%3B+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+0%2C+1%2C+1%2C+0%2C+1%3B+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+0%2C+1%2C+1%3B+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%3B+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%3B+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%3B+1%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+1%2C+1%3B+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+1%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+0%2C+1%2C+1%2C+0%2C+0%3B+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+1%2C+0%2C+0%3B+0%2C+1%2C+1%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%3B+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%3B+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+1%2C+0%2C+1%2C+1%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%2C+0%5D&amp;version=20.0.0" rel="nofollow noreferrer">MATL Online</a></p>
<p><strong>Explanation</strong></p>
<p>Again, this is similar to my MATLAB and Octave answers to this question.</p>
<pre><code>        % Implicitly grab input array
4Y6     % Push the literal [1 1 1; 1 1 1; 1 1 1] to the stack
Z+      % Perform 2D convolution of the input with this array
~       % Negate the result
l2#ZI   % Call bwlabeln which dilates each open region and the second output
        % returns the number of open regions
w       % Flip the top two stack elements
7M      % Push the literal [1 1 1; 1 1 1; 1 1 1] to the stack again
Z+      % Perform 2D convolution
G+      % Explicitly grab the input and add it to the result
~z      % Count the number of 0's in the result (the remaining number of clicks)
+       % Add the total number of remaining clicks to the number of open regions 
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Octave, <s>86</s> <s>84</s> <s>79</s> 66 bytes</h1>
<pre><code>@(x)nnz(~imdilate(c=imerode(~x,o=ones(3)),o)-x)+max(bwlabel(c)(:))
</code></pre>
<p>This solution creates an anonymous function named <code>ans</code> which can then be passed a 2D matrix of <code>0</code>'s and <code>1</code>'s. The logic is the same as my MATLAB answer but uses a few tricks that Octave has to offer to save space.</p>
<p>This solution requires that the <code>image</code> package is installed.</p>
<p><a href="http://ideone.com/aHoYRo" rel="noreferrer"><strong>Demo here</strong></a></p>
</div>
<div id="pu3" class="pu"><h1>MATLAB, <s>92</s> <s>90</s> <s>86</s> <s>83</s> <s>79</s> <s>74</s> 72 bytes</h1>
<pre><code>x=input('');I=@(x)~imdilate(x,ones(3));[C,N]=bwlabel(I(x));nnz(I(C)-x)+N
</code></pre>
<p>This solution accepts the input in the form of a 2D matrix of 0's and 1's and will display the 3BV value for the provided input.</p>
<p>Here is slightly modified <a href="http://ideone.com/KcBMLO" rel="noreferrer">demo</a> in Octave for those of you without MATLAB.</p>
<p><strong>Explanation</strong></p>
<p>The input matrix is dilated using a 3 x 3 matrix of <code>1</code>'s and then inverted (using <code>~</code>) which identifies all of the points that do not have mines as neighbors (<code>1</code>) or do (<code>0</code>). To determine the number of connected regions, we use <code>bwlabel</code> to label each connected region of <code>1</code>'s. The first output is the label matrix (<code>0</code> where the input was zero and any value in the range <code>1...N</code> where there was a <code>1</code> in the input where <code>N</code> is the index of the connected group that it belongs to). The second output is the number of regions (the number of clicks required to open them). The result of the <code>bwlabel</code> is shown in the image on the left.</p>
<p><a href="https://i.sstatic.net/XKmfZ.png" rel="noreferrer"><img src="https://i.sstatic.net/XKmfZ.png" alt="enter image description here" /></a></p>
<p>We expand the first output of <code>bwlabel</code> using <code>imdilate</code> (all non-zeros are expanded) using a 3 x 3 matrix of <code>1</code>'s. The result is shown in the image in the middle.</p>
<p>To determine the remaining clicks, we then count the squares that are not in this expanded region (<code>~imdilate()</code>) and not a mine (<code>-x</code>) (white squares in the image on the right) and add this to the total number of open regions (the number of different colors in the image on the left) to get the 3BV.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/82447/">82447</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




