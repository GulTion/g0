<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::264502</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>037</td><td>JavaScript ES6</td><td>230822T183441Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264511#264511">Arnauld</a></td></tr>
<tr d-ix="1"><td>162</td><td>Python 3.8 prerelease</td><td>230823T112231Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264555#264555">W D</a></td></tr>
<tr d-ix="2"><td>007</td><td>Nekomata</td><td>230823T111508Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264554#264554">alephalp</a></td></tr>
<tr d-ix="3"><td>010</td><td>Jelly</td><td>230822T225224Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264524#264524">Jonathan</a></td></tr>
<tr d-ix="4"><td>047</td><td>JavaScript Node.js</td><td>230822T181550Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264508#264508">Luis fel</a></td></tr>
<tr d-ix="5"><td>018</td><td>Charcoal</td><td>230822T191827Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264513#264513">Neil</a></td></tr>
<tr d-ix="6"><td>030</td><td>Retina</td><td>230822T190701Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264512#264512">Neil</a></td></tr>
<tr d-ix="7"><td>031</td><td>J</td><td>230822T172344Z</td><td><a href="https://codegolf.stackexchange.com/questions/264502/otteretto-classic-game-scoring-method/264503#264503">Jonah</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES6), 37 bytes</h1>
<p><em>The method was first found by Luis felipe De jesus Munoz so make sure to upvote <a href="https://codegolf.stackexchange.com/a/264508/58563">this answer</a> as well!</em></p>
<p>Expects an array of characters.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(v=&gt;(s+=a!==(a=v))*++i,i=s=0)
</code></pre>
<p><a href="https://tio.run/##bZBPbptAGMX3c4pXb5gxDgE8YNpqXA1/suiiXXiZZoEcSIkouEAsRVVuUKmbLpt79Dy5QI/gfkMqJ7E7oJGY7/3ee8x1vs37dVdthpOmvSx2pdrlapk7X/IN36ol722Vv1KK52orxNS2q1mleuWKXVd8vam6gk/KfiKcrsgvz6q6WN02a@4KZ2hXQ1c1V1w4/aauBj751JCsbLssX3/mPdQS3xhQFwPO0Q/dDO3NgAso9P@IU0xPlpieihnpzOoKwlDyc8dxiLgQbxlN1m3Tt3Xh1O0Vf7/6@MGMKLgqbzkBAjYm9NgwX851WzXcgiWg1Bj4Dtaf3z8efv2k3cIbWA/33y1Bzndip/F8URd4TMf68AwSr1lK6/DcxxySaUL00SSE58MLWELT5NgPXgg/YFkcx9nRNERk0PTF9BlqjOFLliSUve/7lGxoeBH8yJRL0izT/ynnu5jTG0BGo5M2ZsdO7pgnKQ/@gqUvlE@FHzuZTM8o5yGky7I002maZNmoPvh3Ey59BCHCOSIXUcTimMzTVOvEAAc3ORaIyBYyQOhisUAkCSE1ZTw2OriCPRHIPfEX" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt;              // a[] = input array, re-used to store the previous
                  //       character
a.map(v =&gt;        // for each character v in a[]:
  ( s +=          //   increment s if ... 
    a !== (a = v) //   ... v is not equal to the previous character
  )               //   we have to use !== to make sure that the test always
                  //   gives true on the first iteration, even for the edge
                  //   case where a[] is a singleton
  * ++i,          //   increment i and multiply s by i
  i = s = 0       //   start with i = 0 and s = 0
)                 // end of map()
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 162 bytes</h1>
<pre class="lang-python prettyprint-override"><code># 164 bytes (used in TIO link)
f=lambda x,t=[7]:(lambda m:[*map(lambda i,a:(lambda m:t)(t.__setitem__(0,t[0]+(i and a!=(x[i-1]if i else 0))))and-~i*t[0],*zip(*enumerate(x)))])(t.__setitem__(0,1))

# 162 bytes (actual submission)
lambda x,t=[7]:(lambda m:[*map(lambda i,a:(lambda m:t)(t.__setitem__(0,t[0]+(i and a!=(x[i-1]if i else 0))))and-~i*t[0],*zip(*enumerate(x)))])(t.__setitem__(0,1))
</code></pre>
<p>&quot;Port&quot; of <code>Luis felipe De jesus Munoz</code>'s <a href="https://codegolf.stackexchange.com/a/264508/95204">answer</a>. <a href="https://tio.run/##pVVhb5tIEP2@v2LKSTU4tg9s7HCWXAkbKrU6XavmKp3ksywCS7ItZtHu0tiNen89N7uQmNjRfeghy4Kd9968HWaW6qBueTkJKvFgWRbJaA65vR@oxdrbOHMCeP0C4TfOMkgTIQ5D/o0KyAXf4bOk8hFRFPxOQl6XqWK8BMXhmkItaQbqjqXUwNTa3Sy8lvEZyWYFFjAajSApMyi5gi@1VKCaxRaaSHgHX2ml4IYqxcob@Fxe87rMfudpUsRCcAG2TDLH4PUWWFlSYbNB0m6h0XnLBGpXiVDd1YxrI6PtVlLFFN1tt7Y70MYubGZcJa8W9n7Nht6GoTLQQlJwHcfpaOSUZhKYwsS48yLZXWcJ7OYKJNergqpalJgFbHVL8VHWhQKeg7pYsNevMUGjj3R4f9UV/hlfwCTGIf7r46f46urdhz/g7palt2aj3Y2b4l8s4L/UOvD3V3PcgMZ3HHfiL7BBsl1VHGCXfKWmPC7YeVLIQ1fXENCy2zZNykvJpKKlgrtfMesTtKki2MfyOvbP1Mcx0eE/rK/RpCO97u@SyjbNM@h/Z5Xdp2W9oyJR1N4jcUNwRh7yRevAjMnlZn501Ai0j9h@8/9vFoOPVl/2dK7rOc6DnoJK8JRKudWDast2FPYDOOB0yZGsCqbs3vBNr3kbrKxqtcXQur8fSSUwldNUh@4rmioTaeqjUOMR0uo4LZbXGpjbjdoo5dXBbkclkZIK1SAWregAcustju99g38lfrQBPDjumzu9doMHwz0S8d4yWpVAF7inzkNu3fd6oy@clW1yZ@75P4ZvwBr0keoQEoV/hmhOn3MhdC8EgUfCZXi6Bj78RiK8TtfHMAGfhEgJzyIz8MbgTckKo6tzPfBmMJ6SeLlcxmfRGQSaGj2LdqhaGMY@Wa0w95PfY2bNBi@AcaDNraI4Dl8wN3Zhgr8p@IFRCrXYuZJr8vmYD8aXJHqGPBpuPOmcnkZOZuC7JI7iMIpWcWzQJ3vXyf0xTGcwm0DgQhCQ5RLFoygMV5pwUkljIEBZ8Kcwc@HyEgIfKYjGHI2jkxI8Mab@kaFfPMmx2/RA6LNWN8RJH/f@LnvtpDwbH/3nkKbTrI@6lfHLRvFzYr6ClvPwLw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try its test cases</a>. <code>t=[7]</code> can be replaced with any other one-digit number for no extra cost. Explanation / readable version in TIO header and my painful debugging helper below</p>
<pre class="lang-js prettyprint-override"><code>_queue = [];function print(...args) {_queue.push([args[0], args.slice(1)])}function release(l) {args_ = [];isStart = true;for (let i of _queue) {args_.push((isStart?l:'')+(i[0][0]=='.'?i[0].slice(1):'\n'+i[0]));for (let j of i[1]) {args_.push(j)}isStart=false}console.log(...args_)}

f=(x,t=1)=&gt;x.map((a,i)=&gt;{
        print('inner',t,a,i)
        p = [ t+=(i&amp;&amp;a!=x[i-1]) , -~i*t ]
        ret = p[0] &amp;&amp; p[1];
        print('.returning',t,a,i,p[0],p[1],ret)
return ret});(l=&gt;{f(Array.from(l));release(l)})('DDDD')
</code></pre>
<h2><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 131 bytes, non-reusable</h2>
<pre class="lang-python prettyprint-override"><code>lambda x,t=[1]:[*map(lambda i,a:(lambda m:t)(t.__setitem__(0,t[0]+(i and a!=(x[i-1]if i else 0))))and-~i*t[0],*zip(*enumerate(x)))]
</code></pre>
<p>Omits <code>t.__setitem__(0,1)</code>. <a href="https://tio.run/##bVTdr5owFH/vX3EuLxSHBhCRmXiT8rHHbQ/LXpwxTMvWRYHQunBn7v51dwp4VVxjTO3v4/yo51C9qJ9lMQ2r@hx/StKlYRjnfXb4vsugsdVy5a4Xq9Ehq2h/KOxscdkfFsqiarLZSK6E4ofNhjq2Wjnrd1RAVuwge1rSZiXG7lrkIIDvJQfHwoXg@K8Yaa49@iMqOuLF8cDrTHHaIL4@Y46JVDVCFtnxHKq63HIpN9tMciptyGEJH8uCWwsCuNAfK8j2aAF1JrDS12x/5GldlzU18mOxVaIsoNpLw2oljQ0vaCInstoLRc3xs9kBoqiOaoPQatRcMqxbhDcV36oW0VciCoUeF0rvY/Xc8qiJOe3cJtuyekGshTIpea06xrI3xScyPpQ1nDr@U/3aA3wHp26nz36UCk4oxL3RelU1pqDSuvmRGyfTnPwqRdEXtxau/zp@BsMeodQiJGFfGIbDOyYMbheSwCUsYsMz8OE9SXANzz2Ygk8YStgDEoDrgTsjMaLxox@4AXgzkkZRlD6gAYRamtyhN1JtDJ5P4hhrv@W9VtZqcEPwQh0uTtKU/Sec58AUPzPww9aJabNHJ6et52M98OYkuWNeA3eZdE1XM6cB@A5Jk5QlSZymLXvw7Lq478EsgGAKoQNhSKIIzZOEsVgLBjfZBgjRFvwZBA7M5xD6KEE21ugSDa7gTTHzrwr9x5Mcu01PE/Y76IYY9LH5rTD74bqbPf3VjR//ne2pfmlgW3edZ3zWrb0DxaVqvXHWzv8A" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Test cases</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a>, 7 bytes</h1>
<pre><code>pNᵉ#ĉ#*
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFZtJJurlLsgqWlJWm6FqsK_B5u7VQ-0qmstaQ4KbkYKrzgZreSoxKXkqMTiHQBAhAHyANxnYG0M5B2dXJycgVJwxjOzkAlYB1A2tnF1dURKugIEgepROa4urg6urg4u7qCeU5OQCkXF0dHZygXyALKgtVC3AQA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>pNᵉ#ĉ#*
pN        For each nonempty prefix:
  ᵉ#        Length
      *     Times
    ĉ#      Number of runs of consecutive equal elements
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ż⁻ƝµJ’×+ÄÄ
</code></pre>
<p>A monadic Link that accepts a list of characters*, and yields a list of the partial scores.</p>
<p><sup>* or, indeed, non-zero numbers, or even lists.</sup></p>
<p><strong><a href="https://tio.run/##ASkA1v9qZWxsef//xbvigbvGncK1SuKAmcOXK8OEw4T///8iQUJBQUFCQkNDIg" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##bZBLSsRAEIb3nuInrkSFdKfT0yIO9GujJxBx6UbmAu4iDHgEEZwjuHQhszPoPcxFYlUymSStTe/qf3xV93er1UPbfm2bx@335vP9sqle6ufjel2v2/rpqqlecbFEU23Ofz7ejq7b9iaz2ckhpu90CYgDZNYlo24AhTMaBnqzaT@UKKDYS@aZexhrCAlRksSTxP@VUDyEhmRJdM7F/yQapg8JqWQSwj2QTOM98Uy3GWk4B8JAmp7ahxhH4Yxa5ijol1Bml2k5dhDPMvOuXlE95II5U/m4Sc/JCILlhYbKefcQbQg@xsGSnIdZlESpoQuYHIahnKOaEKz1O1dy9o7HUAFUCZ1jsYBRnY8s1LYHTA60t5VqtN3@Ag" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<pre><code>Ż⁻ƝµJ’×+ÄÄ - Link: list of characters L  e.g. A  A  A  B  B  C  A  A
Ż          - prefix a zero                 0  A  A  A  B  B  C  A  A
  Ɲ        - for neighbouring pairs:
 ⁻         -   not equal?                     1  0  0  1  0  1  1  0
   µ       - start a new monadic chain - f(S=that)
    J      -   range of length                1  2  3  4  5  6  7  8
     ’     -   decrement                      0  1  2  3  4  5  6  7
      ×    -   multiply by {S}                0  0  0  3  0  5  6  0
        Ä  -   cumulative sums {S}            1  1  1  2  2  3  4  4
       +   -   add                            1  1  1  5  2  8 10  4
         Ä -   cumulative sums                1  2  3  8 10 18 28 32
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 47 bytes</h1>
<p>Expects the input to be an array of characters</p>
<hr />
<p>Basically, <code>r[k]*k</code> where <code>k</code> is the current length of array and <code>r[k]</code> the number of times that a cell differs from the preceding one.</p>

<pre class="lang-javascript prettyprint-override"><code>(x,t=1)=&gt;x.map((a,i)=&gt;(t+=i&amp;&amp;a!=x[i-1])&amp;&amp;-~i*t)
</code></pre>
<p><a href="https://tio.run/##jY9BDoIwEEX33kIXTatAwgFq0nbmFMaEBsHUICXSGFZevY5bFoPdNe/9PzMP//Zz@wpTKsd463Kvs1yKpGulz0v19JOUvgj0kemkgxB@r5dLKOurEqL8hGNSuY3jHIeuGuJd9vJgDtU8DSE1jVK7NbMcBXpcmNJc3BF3DEdrLXLjtwTnaAX2AuIOEM1Gifn1cJv8IyGgAXCIrGUtVQEY4zY0MqhtNTN/AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 18 bytes</h1>
<pre><code>ＩＥθ×⊕κ⊕ＬΦ…θκ⁻λ§θ⊕μ
</code></pre>
<p><a href="https://tio.run/##TYtBCsIwEEWvkuUU4glcJSlCwYKLXiCkgwkmU01G0dNPaRfSt/uP/0L0NSw@i9xqIgbnG8Pon/DSakoFGwwUKhYkxhkenVbHfUW6c4RLyowV3C9kdHHZ4@06Jno3yFoZHmjG7@aPeen@nEWsNcb1vTPGWjl98go" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Port of my Retina answer.</p>
<pre><code>  θ                 Input string
 Ｅ                  Map over characters
     κ              Current index
    ⊕               Incremented
   ×                Multiplied by
          θ         Input string
         …          Truncated to
           κ        Current index
        Φ           Filtered where
             λ      Current character
            ⁻       Does not equal
               θ    Input string
              §     Indexed by
                 μ  Inner index
                ⊕   Incremented  
       Ｌ            Take the length
      ⊕             Incremented
Ｉ                   Cast to string
                    Implicitly print
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 30 bytes</h1>
<pre><code>.(?&lt;=(\2*(.))+)
$.($#1*$&gt;:&amp;*) 
</code></pre>
<p><a href="https://tio.run/##RUu7DsIwENvvK5AIKEmlSGVEFOR7iJ9ggIGBhQHx/8EtQ2@wfX58nt/X@zH2Xb7ee8uX05Rvh5pbKUOR1HLajjWdj/taNr1DoBDnCaggRjQJVQ3xP5kxYotoHoHFwOyJrzI84G7BjajSdgdsechM5tYP" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases. Explanation: Uses <s>@Arnauld's</s> @LuisfelipeDejesusMunoz's observation that the partial score is the product of the letter's index and the number of runs so far.</p>
<pre><code>.(?&lt;=(\2*(.))+)
</code></pre>
<p>For each letter, count the number of runs so far.</p>
<pre><code>$.($#1*$&gt;:&amp;*) 
</code></pre>
<p>Replace it with the product of that with the letter's 1-based index.</p>
</div>
<div id="pu7" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 31 bytes</h1>
<pre><code>[:+/\@(+/\@,~&amp;1+0&amp;,*0,#\)2~:/\]
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/o6209WMcNECETp2aobaBmo6WgY5yjKZRnZV@TOx/Ta7U5Ix8hTQFQzhDwQjBMYFAhBxYFgj9nPQU1B0dnRwd1WGSxlBJ4/8A" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Takes input as sequence of numbers where A = 1, B = 2, etc.</p>
<p>This is a straightforward implementation of the rules as described, but calculating all the <span class="math-container">\$r[k]\$</span> and <span class="math-container">\$k-1\$</span> first, multiplying the <span class="math-container">\$k-1\$</span> &quot;bonuses&quot; by the boolean list marking &quot;change points&quot; (so that bonuses are only added where appropriate), summing the two lists elementwise, and then scan summing that result.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/264502/">264502</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




