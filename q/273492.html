<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::273492</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>056</td><td>Uiua SBCS</td><td>240607T123406Z</td><td><a href="https://codegolf.stackexchange.com/questions/273492/clicks-for-minesweeper/273504#273504">ovs</a></td></tr>
<tr d-ix="1"><td>058</td><td>05AB1E</td><td>240607T101446Z</td><td><a href="https://codegolf.stackexchange.com/questions/273492/clicks-for-minesweeper/273503#273503">Kevin Cr</a></td></tr>
<tr d-ix="2"><td>079</td><td>Charcoal</td><td>240607T073139Z</td><td><a href="https://codegolf.stackexchange.com/questions/273492/clicks-for-minesweeper/273499#273499">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a> <sup><a href="https://tinyurl.com/Uiua-SBCS-Apr-12" rel="nofollow noreferrer">SBCS</a></sup>, 56 bytes</h1>
<pre><code>+⊙(/+♭≠)⧻◴⍥(⊞(/↥↧).)⧻.&lt;3⊞(/+×.-).⊚:⍥(¬⍥(≡/↥◫3⊂:0⊂0⍉)2.)2
</code></pre>
<p><a href="https://www.uiua.org/pad?src=0_12_0-dev_1__RyDihpAgK-KKmSgvK-KZreKJoCnip7vil7TijaUo4oqeKC_ihqXihqcpLinip7suPDPiip4oLyvDly4tKS7iipo64o2lKMKs4o2lKOKJoS_ihqXil6sz4oqCOjDiioIw4o2JKTIuKTIKClAg4oaQIEctQDDiipziiJjiiaBAIC4KUCAkIDEwMCAwMDAgMDAwClAgJCAxMDAgMDAwIDAwMQpQICQgMTAxIDAwMCAxMDEKUCAkIDEwMDAgMDAwMCAwMDAxClAgJCAxMDAwMCAwMDAwMCAwMDAwMQpQICQgMTAwMCAwMDAwIDAwMDAgMDAwMQpQICQgMDAwIDEwMSAwMDAK" rel="nofollow noreferrer">Try it!</a></p>
<p>Finds all clear spots with no mine in a 3x3, counts the connected components, then adds the number of empty spots that are not adjacent to any clear spots.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 58 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>&quot;2Fø0δ.ø}2Fø€ü3}&quot;DU.VOO_©˜ƶIgäΔX.V®*€€à}D˜ÙsX.V€€àI+_˜«0Kg
</code></pre>
<p>Input as a bit-matrix.</p>
<p><a href="https://tio.run/##yy9OTMpM/f9fycjt8A6Dc1v0Du@oBTEfNa05vMe4VsklVC/M3z/@0MrTc45t80w/vOTclAi9sEPrtIAKQGoW1LqcnnN4ZjFQECbiqR1/es6h1Qbe6f//R0cb6hjoGMTqRBvgoEHyhhj8WAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@m5JlXUFpipaCkU@l1aLcOl5J/aQlEwL7SJey/kpHb4R0G57boHd5RC2I@alpzeI9xrZJLqF6Yv3/8oZWn5xzbFpl@eMm5KRF6YYfWaQEVgNQsqHU5PefwzGKgIEwkUjv@9JxDqw280//rHNpm/z86OtpQx0DHIFYn2gCFjtVRwC5liJAyRJIyRJVC0ofEQlWArASFbYjbdgMMK7E6AbsSqKmG2KRi/@vq5uXr5iRWVQIA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Add a border of 0s around the input, and convert it to overlapping 3x3 blocks:</p>
<pre class="lang-python prettyprint-override"><code>&quot;...&quot;       # Push the string explained below
     DU     # Store a copy in variable `X`
       .V   # Pop and evaluate it as 05AB1E code

2Fø0δ.ø}    # Add a border of 0s around the (implicit) input-matrix:
2F     }    #  Loop 2 times:
  ø         #   Zip/transpose; swapping rows/columns
            #   (which will use the implicit input-matrix in the first iteration)
    δ       #   Map over each row:
   0 .ø     #    Add a leading/trailing 0
2Fø€ü3}     # Convert it into overlapping 3x3 blocks: 
2F    }     #  Loop 2 times again:
  ø         #   Zip/transpose; swapping rows/columns
   €        #   Map over each inner list:
    ü3      #    Convert it to a list of overlapping triplets
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fycjt8A6Dc1v0Du@oBTEfNa05vMe4VsklVC/s///oaEMdAx2DWJ1oAxw0SN4Qgx8LAA" rel="nofollow noreferrer">Try just this first step online.</a></p>
<p>Step 2: Sum each overlapping 3x3 block, and check whether it's 0:</p>
<pre class="lang-python prettyprint-override"><code>OO          # Sum all overlapping 3x3 blocks
  _         # Check for each sum whether it's 0 (1 if 0; 0 if ≥1)
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fycjt8A6Dc1v0Du@oBTEfNa05vMe4VsklVC/M3z/@///oaEMdAx2DWJ1oAxw0SN4Qgx8LAA" rel="nofollow noreferrer">Try just the first two steps online.</a></p>
<p>Step 3: Flood-fill, and check how many islands of 1s there are:</p>
<pre class="lang-python prettyprint-override"><code>©           # Store the current matrix in variable `®` (without popping)
 ˜          # Flatten it
  ƶ         # Multiply each value by its 1-based index
   Ig       # Push the amount of rows in the input-matrix
     Ì      # Increase it by 2 to account for the two borders of 0s
      ä     # Convert the list back to a matrix of that many rows
Δ           # Loop until the result no longer changes to flood-fill:
 X.V        #  Pop and evaluate string `X` as 05AB1E code (repeat step 1)
 ®*         #  Multiply each 3x3 block by the value in matrix `®`
            #  (so the 0s remain 0s)
 €€         #  Nested map over each 3x3 block:
   à        #    Pop and leave its flattened maximum
}           # Close the changes-loop
 D          # Duplicate this matrix (to use in a later step)
  ˜         # Pop and flatten it to a list
   Ù        # Uniquify the remaining digits, to get all islands (and 0)
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fycjt8A6Dc1v0Du@oBTEfNa05vMe4VsklVC/M3z/@0MrTc45t80w/vOTclAi9sEPrtM5tPbf18IJYl9NzDs/8/z862lDHQMcgVifaAAcNkjfE4McCAA" rel="nofollow noreferrer">Try just the first three steps online.</a></p>
<p>Step 4: Identify all single cell edge cases, that haven't been flood-filled yet:</p>
<pre class="lang-python prettyprint-override"><code>s           # Swap so the duplicated matrix of islands is at the top again
 X.V        # Pop and evaluate string `X` as 05AB1E code (repeat step 1 yet again)
    €€      # Nested map over each 3x3 block:
      à     #   Pop and leave its flattened maximum
       Y+   # Add the values of the input-matrix
         _  # Check which cells are (still) 0s
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fycjt8A6Dc1v0Du@oBTEfNa05vMe4VsklVC/M3z/@0MrTc45t80w/vOTclAi9sEPrtIAKQGoW1LqcnnN4ZjFQECbiqR3//390tKGOgY5BrE60AQ4aJG@IwY8FAA" rel="nofollow noreferrer">Try just the first four steps online.</a></p>
<p>Step 5: Combine the results of steps 3 and 4, and output the result:</p>
<pre class="lang-python prettyprint-override"><code>˜           # Flatten the matrix of 1s/0s of the previous step to a list
 «          # Merge the two lists together (the unique islands,
            # as well as the 0-cells that haven't been flood-filled)
  0K        # Remove all 0s
    g       # Pop and push the combined length
            # (which is output implicitly as result)
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 79 bytes</h1>
<pre><code>ＷＳ⊞υιυＦＬυＦＬ⌊υ«Ｊκι¿¬№⊞ＯＫＭＫＫ1«ＵＭΦＫＭ⁼0λ2ψ»»≔№ＫＡ0ηＵＢψ⟲¹ＦＬυＦＬ⌊υ«Ｊ⁺ικ⁻ικ≧⁺¬℅ＫＫη¤2»⎚Ｉη
</code></pre>
<p><a href="https://tio.run/##nVFNT4QwED3TX9FwGhJMwKunlayJRlyy6x9o2C5tKC32Q2MMvx2nwBrj0UszM33v9b1pK5htDVPz/CGk4hQe9Rj8yVupO8gy2gQnIORUZnekwaGHgNXFWArPXHceLxH1u6@llkMY4jyjXyR5CsP4aqBfNRJ5ofBiPFQmoFiUP4zcMm8sNJz3tTGWQ5bT2KCBnKZluiklNRsrMwxMn@FBKs//UPZvgSkHaZHmVC3U2zQ@mazGP2M9kYnsnJOdvjpAhZ1SkY9EPAXCTtzfs7bvLELOC/FoPPMcyv@Fb1RwIHPaoz5Crk00hJlWP0fZCb8gcxoXdLBnqZmCbRGbswSDK1iDTaRSnFn4@ZqKOQ8CZee5LIqCFNtRkvnmXX0D" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as a list of newline-terminated strings. Explanation:</p>
<pre><code>ＷＳ⊞υιυ
</code></pre>
<p>Input the strings and write them to the canvas.</p>
<pre><code>ＦＬυＦＬ⌊υ«Ｊκι
</code></pre>
<p>Loop through every cell.</p>
<pre><code>¿¬№⊞ＯＫＭＫＫ1«
</code></pre>
<p>If it and its neighbours are empty then...</p>
<pre><code>ＵＭΦＫＭ⁼0λ2
</code></pre>
<p>... mark adjacent unrevealed safe cells as being auto-revealed, and...</p>
<pre><code>ψ
</code></pre>
<p>... mark this cell as being recursively revealed.</p>
<pre><code>»»≔№ＫＡ0η
</code></pre>
<p>The remaining unrevealed safe cells need one click each.</p>
<pre><code>ＵＢψ⟲¹
</code></pre>
<p>Rotate the canvas by 45°. (I have to set the background to null to work around a bug in <code>Rotate</code> in TIO; this costs me three bytes.)</p>
<pre><code>ＦＬυＦＬ⌊υ«Ｊ⁺ικ⁻ικ
</code></pre>
<p>Loop through the cells again.</p>
<pre><code>≧⁺¬℅ＫＫη
</code></pre>
<p>If this cell was marked as recursively revealed then click on it.</p>
<pre><code>¤2
</code></pre>
<p>Flood fill from this cell if possible, recursively revealing nearby cells as part of the same click.</p>
<pre><code>»⎚Ｉη
</code></pre>
<p>Output the final click count.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/273492/">273492</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




