<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::224945</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>096</td><td>Haskell</td><td>231208T141824Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/267374#267374">matteo_c</a></td></tr>
<tr d-ix="1"><td>126</td><td>C gcc</td><td>210503T135055Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224984#224984">Noodle9</a></td></tr>
<tr d-ix="2"><td>009</td><td>MathGolf</td><td>210614T095659Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/229635#229635">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>020</td><td>Husk</td><td>210503T023726Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224950#224950">Leo</a></td></tr>
<tr d-ix="4"><td>076</td><td>R</td><td>210503T225029Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/225030#225030">Dominic </a></td></tr>
<tr d-ix="5"><td>081</td><td>Python 2</td><td>210503T004735Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224946#224946">hyper-ne</a></td></tr>
<tr d-ix="6"><td>065</td><td>Ruby</td><td>210503T072337Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224959#224959">G B</a></td></tr>
<tr d-ix="7"><td>046</td><td>Charcoal</td><td>210503T113457Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224968#224968">Neil</a></td></tr>
<tr d-ix="8"><td>084</td><td>Retina</td><td>210503T110424Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224967#224967">Neil</a></td></tr>
<tr d-ix="9"><td>034</td><td>Brachylog</td><td>210503T073108Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224960#224960">xash</a></td></tr>
<tr d-ix="10"><td>039</td><td>J</td><td>210503T070445Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224957#224957">Jonah</a></td></tr>
<tr d-ix="11"><td>1617</td><td>Jelly</td><td>210503T065516Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224956#224956">ais523</a></td></tr>
<tr d-ix="12"><td>019</td><td>05AB1E</td><td>210503T071223Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224958#224958">Command </a></td></tr>
<tr d-ix="13"><td>078</td><td>JavaScript Node.js</td><td>210503T041217Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224952#224952">l4m2</a></td></tr>
<tr d-ix="14"><td>073</td><td>Haskell</td><td>210503T032550Z</td><td><a href="https://codegolf.stackexchange.com/questions/224945/collatz-sort-repeat/224951#224951">kops</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 96 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>(x:w)#h|x&lt;=h!!0=x:w#h
x#y=y#x
g x=[div i 2|i&lt;-x,even i]#[3*i+1|i&lt;-x,odd i]
f 0=[1..]
f n=g$f$n-1
</code></pre>
<p><a href="https://tio.run/##fczNToNAFIbh/VzF18AC9NBwoP6GuQ4XExZEoEyo2AipU8O946ltGsXq7vy8eZqib6vNZpoC9/gees3oMt0sFrGW1WuU8/Z67zm1htOmtDtYJKPNIkfVrupgc8@kV/aaj7fXspSTqhFrw8vlYer02q/9LuLppbAdNLZvthtgiq6Ejw@7fbJDg0DrEEGNNkSPEUFL6ENkEYaqH56Lvupzpc6zKEYBQUwwTEgIKWFFuCHcEu4I94QHAsuf5c8SsBQsCUvDErFULBlLl8R5SAePZ94f5H/sF33ikjM3E7@jF9y5vTp56dH7Tc7Ui/APPA9zNX0C" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>183</s> <span class="math-container">\$\cdots\$</span> <s>148</s></sup> 126 bytes</h1>

<pre class="lang-c prettyprint-override"><code>g;t;l;i;f(k,n){int a[g=l=n&lt;&lt;k];for(;g||k--;g=qsort(a,l,4,L&quot;\x62b078bǃ&quot;))for(i=l;i--;a[i]=g?i+1:t%2?3*t+1:t/2)t=a[i];i=a[n-1];}
</code></pre>
<p><a href="https://tio.run/##bZLNjpswFIX3eQrLEhWEiwab/I7jZlF11zdIUMV4gEGmTotZRJNh1YfrW5VeQ0PSURfA9fH5zgWuVVQq1felaEUtKlH4GkxwqUxLskMpa2l2O52K4tT4onx701EkSvnDnprWz6CGBXyhx/OKP8XrzdOvnzQInLOSGIXO7FClstxXIXtsPb5P5q2rHnjQSrclKnyYiKWi679llfGDy4y4zjY@pPLCgEOCHZawgjVsYAssBsaAcWAJsAWwJbAVsDWwDbAt8LgDy@7J9@x/cZeAIL@CN/QK/4vfJywQTEbwHr3B7/BbQgdz60Ab4ztjd8zpoB6U6jU/FfgPHsZq7ix/NTZpbNL4pPFJSyYNU7WMwYgZUS9ZM1cvudJ54xrh4D7z43n7Ca8lhftlQjsEhqHr3TV0yhRhqN2ohllldf31pCVD/wAYLM1O1gc8NWFoBt9gbOR4tiCXFjfHwbvNMeGDzKVsBuF7g/7Cp1p6z0AM3kn0kXjPnqWACdCAiVz@ngpCHymhgcO62Y0knj0aCtePHTukztbNuv63KuqstH30mp9zZdtM6T8" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p><em>Saved a whopping 22 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!</em></p>
<p>Inputs <span class="math-container">\$k\$</span> and <span class="math-container">\$1\$</span>-based <span class="math-container">\$n\$</span> and returns the <span class="math-container">\$n^{\text{th}}\$</span> element of <span class="math-container">\$s_k\$</span>.</p>
<h3>Explanation</h3>
<pre class="lang-c prettyprint-override"><code>g;t;l;i;                                 // declare all int vars needed
f(k,n){                                  // main function      
    int a[         ];                    // array a to hold sequences  
          g=                             // init g to non-zero
             l=n&lt;&lt;k                      // length is n * 2**k  
    for(;                                // main loop
         g||                             // g non-zero is an init loop for a  
            k--;                         // after that loop k times
                g=qsort(a,l,4,           // end of each loop sort 
                          L&quot;\x62b078bǃ&quot;) // using a -zexecstack
                                         // comparator and set g
                                         // to zero (return value   
                                         // of qsort for success)
        for(i=l;i--;                     // loop over all elements in a
                    a[i]=                // each loop set a[i] to...
                         g?              // if it's the init loop
                          i+1            // set a[i] to i + 1
                          :              // otherwise post-init loops
                         t%2?            // apply Collatz map to a[i] 
                           3*t+1
                           :
                           t/2)
            t=a[i];                      // temp for a[i] to save bytes
    i=a[n-1];                            // return the 1-based nth value
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/maxbergmark/mathgolf/blob/master/math_golf.txt" rel="nofollow noreferrer">MathGolf</a>, 9 <a href="https://github.com/maxbergmark/mathgolf/blob/master/code_page.py" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>²╒kÉm■sk&lt;
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/224946/52210"><em>hyper-neutrino♦</em>'s Python 2 answer</a>, so will also output the first <span class="math-container">\$n\$</span> values (and will use the trick of only checking the range <span class="math-container">\$[1,n^2]\$</span>).</p>
<p><a href="https://tio.run/##y00syUjPz0n7///QpkdTJ2Uf7sx9NG1BcbbN//@GBgYKxgA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##y00syUjPz0n7///QpkdTJ2Uf7sx9NG1BcbbN//@GBgYKBlwg0hBMGoFJYzBpAiZNAQ" rel="nofollow noreferrer">verify some more test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>²         # Square the (implicit) first input `n`
 ╒        # Pop and push a list in the range [1,n²]
  k       # Push the second input `k`
   É      # Pop and loop `k` amount of times using 3 characters as inner code-block:
    m     #  Map each value in the list to:
     ■    #   Pop and calculate its Collatz value
      s   #  Then sort the list from lowest to highest
       k  # After the loop, push the first input `n` again
        &lt; # And only leave that many leading items from the list
          # (after which the entire stack is output implicitly as result)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, <s>27</s> <s>25</s> <s>23</s> 20 bytes</h1>
<pre><code>!¡ȯΞzme½o→*3Mfe¦2%2N
</code></pre>
<p><a href="https://tio.run/##ASUA2v9odXNr//8hwqHIr86eem1lwr1v4oaSKjNNZmXCpjIlMk7///80" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>The idea for this comes from <a href="https://chat.stackexchange.com/transcript/message/57856414#57856414">a message by rak1507 in the Husk chat</a>. Returns the full sequence corresponding to the given 1-based k.</p>
<h3>Explanation</h3>
<p>We start from the list of natural numbers and then at each step produce one list with each even number halved and another list with each odd number multiplied by 3 and incremented, then we merge the two lists keeping them sorted.</p>
<pre><code>!¡(Ξzme½(→*3)Mfe¦2%2)N
                     N    Start from the infinite list of natural numbers
 ¡                        Then iterate the following function
             Mfe           Build two lists by applying the following two filters
                ¦2          Numbers divisible by 2
                  %2        Numbers not divisible by 2
    zme                    Apply the following two functions respectively
                           to the first and second list
       ½                    Halve
         →*3                Multiply by 3, then increase
   Ξ                       Merge the two resulting lists
!                         Finally, return the result of the kth iteration
</code></pre>
<hr />
<h1>Previous answer, 25 bytes</h1>
<pre><code>`ṘN!¡§z+oĊ2tȯ↓2ṁ:R5 0Ċ2∞1
</code></pre>
<p><a href="https://tio.run/##yygtzv7/P@Hhzhl@iocWHlpepZ1/pMuo5MT6R22TjR7ubLQKMlUwAIo86phn@P//fxMA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>A bit clunky, but here's what I have for now. Returns the full sequence corresponding to the given 1-based <code>k</code>.</p>
<p>-2 bytes thanks to Razetime.</p>
<h3>Explanation</h3>
<p>Rather than building the sequence directly, we build a list containing at each position <code>n</code> the number of occurrences of <code>n</code> in the sequence, then we convert it to the final sequence.</p>
<pre><code>`ṘN!¡§z+oĊ2tȯ↓2ṁ:R5 0Ċ2∞1
                       ∞1    Start from an infinite list of ones 
                                (in s0 each number appears once)
    ¡                        Iterate the following function
     §z+                       Sum together
        oĊ2t                   The even-positioned values
            ȯ        Ċ2        with the odd-positioned values
               ṁ:R5 0            with 5 zeros added before each one
             ↓2                  and the initial 2 zeros dropped
   !                         Get the kth iteration
`ṘN                          Repeat each natural number as many times as indicated
</code></pre>
<p>The trick here is that at each step we build two infinite lists and sum them together: the first one is the even-position values, which will each move to position <code>n/2</code> simply because we remove the odd positions from the list; the second one starts from the odd positions (<code>n-&gt;(n+1)/2</code>), inserts 5 zeros before each value (<code>(n+1)/2-&gt;3n+3</code>), and removes the first two zeros (<code>3n+3-&gt;3n+1</code>).</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 76 bytes</h1>

<pre class="lang-r prettyprint-override"><code>f=function(k,n,a=1:(n*2^k),b=a%%2)`if`(k,f(k-1,n,sort(a*b*3+b+a/2*!b)),a[n])
</code></pre>
<p><a href="https://tio.run/##jc3RCoMgGAXg@57CMQK1fyyVbgKfZGxloRQ6DXWM7eVbu@@i6/Odc@I6BudU/nYpxNxFvWiV5Wqkefkxz8FjCx6UZC32lD8sgUGqsuSkn02/ZQbbC9vEv40VHaiohkpdOT0NhIC6@TvZe8BWCvCS16QozihN4Y3ypJGZY8qIN0g7/dQ@J2RCRFbWwICDKJJaFvfBrOUN7KzCJskBxI4gfgQJsv4A" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 81 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda k,n:k and sorted([x/2,x*3+1][x%2]for x in f(k-1,n*2))[:n]or range(1,n+1)
</code></pre>
<p><a href="https://tio.run/##LcpBCsMgEEDRfU8xm4KTWBLNLpCTiAuLMRHbUawFe3rrIrvP46dfOSPJ1tz2Mu@nNRA4rQEMWfjEXHbLVJ0kr8MyCq3qXWoXM1TwBI6Fh@A0SES1ku6cDR076zYKbCl7Kn3ylL6FIYcrsC03Mc9/" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>-19 bytes thanks to Leo and Bubbler<br />
-11 bytes thanks to dingledooper (-6 + -5 from Python 2)<br />
-8 bytes by swapping over to the brute force solution<br />
-2 bytes thanks to Noodle9</p>
<p>To get <span class="math-container">\$s_k\$</span> up to <span class="math-container">\$n\$</span> elements, we only need to get <span class="math-container">\$s_{k-1}\$</span> up to <span class="math-container">\$2n\$</span> elements.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>67</s> 65 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;k,n{k&lt;1?[*1..n]:f[k-1,n*2].map{|x|x%2&lt;1?x/2:x*3+1}.sort[0,n]}
</code></pre>
<p><a href="https://tio.run/##KypNqvz/P81W1y5bJ68628bQPlrLUE8vL9YqLTpb11AnT8soVi83saC6pqKmQtUIKF@hb2RVoWWsbVirV5xfVBJtoJMXW/vfRK8kMze1uLomuaZAIS06WcfIACgKAA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<h3>Quickly explained:</h3>
<p>If we know that the output is in the range (1..n), then we can start reducing the array (1..n*2^k). The rest is standard Collatz for k steps.</p>
<p>(Thanks Kirill L. for -1 byte)</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 46 bytes</h1>
<pre><code>ＮθＮη≔…·¹×ηＸ²θζＦθＵＭζ⎇﹪κ²⊕×³κ⊘κＷ⁻ζυＦ№ζ⌊ι⊞υ⌊ιＩ…υη
</code></pre>
<p><a href="https://tio.run/##VY09bsMwDEZ3n4IjBahA64yZCi/N4MAocgHFZiMh@nEk00FyeZdql3YhyI@Pj6M1eUzGb9shzrwcOZwp403tm7@zlfm9FHeJeIij5@JW@jTxQvim4eQCFbQahnQXttVwU0ppeMrRV8ogNujN3KUQTJzwKReUo8kP7NPEPuFVQyu8mDMFigtN@OvcabhW04fxq4TSi/JunSfA3kUuVcZKwc@bLnFcaiIrFzigEx4GLhb5X7hvhuwE7UyR8hg9dTbNFbL1w7btmvZ1e1n9Nw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Outputs the first <code>n</code> elements. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input <code>k</code> and <code>n</code>.</p>
<pre><code>≔…·¹×ηＸ²θζ
</code></pre>
<p>Create a range from <code>1</code> to <code>n2ᵏ</code>.</p>
<pre><code>ＦθＵＭζ⎇﹪κ²⊕×³κ⊘κ
</code></pre>
<p>Apply the Collatz formula <code>k</code> times to the range.</p>
<pre><code>Ｗ⁻ζυＦ№ζ⌊ι⊞υ⌊ι
</code></pre>
<p>Sort the range.</p>
<pre><code>Ｉ…υη
</code></pre>
<p>Output the first <code>n</code> elements.</p>
<p>A port of @hyper-neutrino's algorithm takes 48 bytes:</p>
<pre><code>ＮθＮη≔⁰ζＷ‹Ｌυη«≦⊕ζ≔⟦ζ⟧εＦθ≔⁺⊗ε÷Φε⁼⁴﹪λ⁶¦³εＦε⊞υζ»Ｉ…υη
</code></pre>
<p><a href="https://tio.run/##TU7LSgNBEDxnv6KPPTBCMOIlJ0kiLBjZu3iY7LaZgc7MZh4RI3772EsW9FJQXdVV1VsT@2C41taPJb@W04EintW6@c@t8KeU3NHjUsNV2Kd1TIAvlJKAP2aLRWmwSsF3s9ibcba3vo90Ip9puD0uZuHt@q6BpsNHiCCNMAsdl4TbUA5MA5Jktj5v3cUNhM@Os6whDbtzMZzwQcM@DIUDsoZHpcS9muAvlxR0Jcm4W/tP00XnM25MEvjqmTY2jJMqy9W61lVzv6x3F/4F" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input <code>k</code> and <code>n</code>.</p>
<pre><code>≔⁰ζ
</code></pre>
<p>Start counting at <code>0</code>.</p>
<pre><code>Ｗ‹Ｌυη«
</code></pre>
<p>Repeat until we have at least <code>n</code> elements.</p>
<pre><code>≦⊕ζ
</code></pre>
<p>Get the next value we want to calculate the count for.</p>
<pre><code>≔⟦ζ⟧ε
</code></pre>
<p>Start with a list of just that value.</p>
<pre><code>Ｆθ
</code></pre>
<p>Repeat <code>k</code> times...</p>
<pre><code>≔⁺⊗ε÷Φε⁼⁴﹪λ⁶¦³ε
</code></pre>
<p>Double the list and integer divide an appropriately filtered copy of the list by 3. This results in a list of all the values that result in the target value after <code>k</code> steps.</p>
<pre><code>Ｆε⊞υζ
</code></pre>
<p>Add that many copies of the target value to the list of results.</p>
<pre><code>»Ｉ…υη
</code></pre>
<p>Output the first <code>n</code> elements.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 84 bytes</h1>
<pre><code>~`(.+),(.+)
.+¶$1*$(2$*)$2$*$¶¶¶$$.`$*¶%$1+`(_+)\1$$|(_+)¶3$*$$2$$1$$#2$*¶O`¶,G$2`¶_
</code></pre>
<p><a href="https://tio.run/##FYo7CoAwEER7r@EI@RHM5hCWXkBILCxsLMRSPNYeYC8WNwy8GYZ3H8957am1r5robegYohdGcjAEZ6GAcA8QK5zwhOSrKd5uCXj7EM5qqQp9RurSWoXDAtIqreVA8w8" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Explanation: Uses the same <code>n2ᵏ</code> approach as other answers. Works by building up a Retina program with <code>k</code> and <code>n</code> hardcoded in and then evaluating it. For example, the link demonstrates <code>k=3</code> and <code>n=20</code>, and this results in the following Retina program:</p>
<pre><code>.+
2*2*2*20*¶
</code></pre>
<p>Replace the input with <code>n2ᵏ</code> newlines.</p>
<pre><code>
$.`*
</code></pre>
<p>Generate all of the integers from <code>0</code> to <code>n2ᵏ</code> in unary.</p>
<pre><code>%`
</code></pre>
<p>Separately for each line...</p>
<pre><code>3+`
</code></pre>
<p>... repeat <code>k</code> times...</p>
<pre><code>(_+)\1$|(_+)
3*$2$1$#2*
</code></pre>
<p>... if the current value is even, then halve it, otherwise treble it and add <code>1</code>. (The <code>3*</code> needs to be at the beginning to avoid conflicting with the <code>$1</code> while the <code>$#2*</code> needs to be at the end to allow for an implicit <code>_</code>.)</p>
<pre><code>O`
</code></pre>
<p>Sort all of the lines into order. (This is not a numeric sort because the lines are still in unary at this point.)</p>
<pre><code>,G20`
</code></pre>
<p>Select the <code>n</code>th line.</p>
<pre><code>_
</code></pre>
<p>Convert it to decimal.</p>
<p>At a cost of 4 bytes, the first <code>n</code> terms can be output instead:</p>
<pre><code>~`(.+),(.+)
.+¶$1*$(2$*)$2$*$¶¶¶$$.`$*¶%$1+`(_+)\1$$|(_+)¶3$*$$2$$1$$#2$*¶O`¶,G1,$2`¶%`_
</code></pre>
<p><a href="https://tio.run/##FYq7CYBAEAVz2/AJ9@NwzyIMbUBwDQxMDMRQLGsL2MbOPR4Mw2Pu4zmvnWr92OXoU0OXowoowBUEDwNU2oDMCCoDKLLbol8JeJuoTFZZCnv60qKFVdJMCcVk4K3WKZXxBw" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Explanation: Only the last two lines change.</p>
<pre><code>,G1,20`
</code></pre>
<p>Select the first to the <code>n</code>th line. (There is actually a zeroth line that we need to skip.)</p>
<pre><code>%`_
</code></pre>
<p>Convert each line to decimal.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 34 bytes</h1>
<p>Generates each sequence. Still a bit too verbose …</p>
<pre><code>∧ℕ₁≜gT;?⟨×₂ᵐc{-₁/₃.%₂1∧}ˢ⟩ⁱ⁾l;Tj₍∋
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/pfXa6koGunoFSu9qhtw6OmpofbFjxqm2Zs8HBXZ@3DrRP@P@pY/qhl6qOmxkedc9JDrO0fzV9xeDpI3dYJydW6QHH9R03NeqpAEUOg0trTix7NX/moceOjxn051iFZj5p6H3V0//8fbaBjqGOkY6xjomMaCwA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>
<pre><code>∧ℕ₁≜gT;?⟨×₂ᵐc{-₁/₃.%₂1∧}ˢ⟩ⁱ⁾l;Tj₍∋
∧ℕ₁≜gT                              trying T = [1], then T = [2], then T = [3], …
      ;?⟨                ⟩ⁱ⁾        apply the predicade input times:
         ×₂ᵐ                         multiply each element by 2
             {-₁/₃.%₂1∧}ˢ            select outputs where
                                      (element - 1)/3 must be odd
            c                        join both lists together
                            l;Tj₍∋  get the length of the final result,
                                     and output T so many times
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 39 bytes</h1>
<pre><code>]{.[:/:~[_&amp;(]2&amp;|`(-:,:1+3&amp;*)})1+[:i.2&amp;*
</code></pre>
<p><a href="https://tio.run/##fc67CsJAEIXhPk9xsNjcJmtmE28LVoKVlW0ICmJQGx/Ay6uvk23UJFoMDOzPN3txIx02WFqEIOSwMpnGartZu/qmKzu2z2qnotqo@z7KLFlOC5XEj5jTyp61UYmLg@B4OF0RMcEQCkJJmBCmhBlhTlgQOJeRd5aApWBJWBqWiKViyVg6k8fI2k80sg6wP@R/ur/gVe6rHfjTHuC7J0rPmpblN9uXO/ig/3XDu0XrmsC9AA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Called like <code>k f n</code>, returns the first <code>n</code> elements.</p>
<p>I am using the same algorithm as ais523, though I stumbled upon it independently.</p>
<ul>
<li><code>1+[:i.2&amp;*</code> Generate <code>n*2^k</code> elements starting at 1.</li>
<li><code>_&amp;(]2&amp;|`(-:,:1+3&amp;*)})</code> Apply collatz k times using Item Amend.</li>
<li><code>[:/:~</code> Sort.</li>
<li><code>]{.</code> Return first n.</li>
</ul>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 16 or 17 bytes</h1>
<pre><code>×3‘
H
æ«ḂĿ€⁴¡Ṣḣ³
</code></pre>
<p><a href="https://tio.run/##ATAAz/9qZWxsef//w5cz4oCYCkgKw6bCq@G4gsS/4oKs4oG0wqHhuaLhuKPCs////zE1/zM" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Takes <em>n</em> and <em>k</em> as arguments in that order, and outputs the first <em>n</em> elements of <em>s</em><sub><em>k</em></sub>. The 16-byte version above does not work for <em>k</em> = 0; if this invalidates the solution, you can add an <code>R</code> after <code>æ«</code> for a 17-byte solution.</p>
<h2>Algorithm</h2>
<p>As is so often the case, producing terse code here was a matter of translating the problem directly using a brute-force algorithm rather than looking for a nice mathematical way to solve the problem. We simply start with a sufficiently long list, then Collatz and sort it the required number of times, and output the first <em>m</em> elements. (As an optimization, which saves runtime but more importantly a byte, we can in fact Collatz it the required number of times but sort it only once, because sorting+mapping+sorting a list is equivalent to just mapping+sorting it.)</p>
<p>The number of terms we start with is <em>n</em>×2<sup><em>k</em></sup>; this guarantees that all terms which are numerically at least <em>n</em> will be correct in the output (any term that started higher than this couldn't be reduced to <em>n</em> in only <em>k</em> iterations), and therefore the first <em>n</em> elements will necessarily be correct in the output (because no <em>s</em><sub><em>k</em></sub> can grow faster than the integers do, thus <em>s</em><sub><em>k</em></sub>(<em>n</em>) ≤ <em>n</em>).</p>
<h2>Explanation</h2>
<pre><code>Function 1Ŀ:
×3‘
×3             Multiply by 3
  ‘            Increment

Function 2Ŀ:
H
H              Halve

Main program:
æ«ḂĿ€⁴¡Ṣḣ³
æ«             Calculate {n} times 2 to the power of {k}
      ¡        Loop   times:
     ⁴              k
    €            On each {of the previous iteration's results, if any
                          or the numbers from 1 to the input, if not}
   Ŀ             Call the function whose index is
  Ḃ                determined by whether {that number} is odd or even
       Ṣ       Sort {the resulting list}
        ḣ      Take the first   elements
         ³                    n
</code></pre>
<p>I'm actually not sure why <code>ḂĿ</code> (which should call <code>1Ŀ</code> on odd numbers but a nonexistent &quot;<code>0Ŀ</code>&quot; on even numbers) decides to call <code>2Ŀ</code> on even numbers, but it's convenient here. (I assume it's some special case in Jelly that recognises that it doesn't make sense to do a recursive call here, but I'm not sure what triggers it; the special case isn't mentioned in the documentation for <code>Ŀ</code>, but the quicks aren't fully documented anyway.)</p>
<p>One interesting thing about this code is that it's a self-polyglot; the <code>€</code> does something different on the first loop iteration than it does on the other loop iterations (and the code wouldn't typecheck in a typical statically typed language as a consequence). I frequently do this sort of thing in horrifyingly low-level esolangs that are a nightmare to program in, but this is the first time I remember doing it in Jelly. As a consequence, the code doesn't work for <em>k</em> = 0 (it tries to sort the <em>digits</em> of <em>n</em>, due to a special case in Jelly that's more harmful than useful here). If this is a problem, it can be fixed at the cost of 1 additional byte by adding an <code>R</code> after the <code>æ«</code>.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 19 bytes</h1>
<pre><code>o*L¹FεDÉi3*&gt;ë2÷]{I£
</code></pre>
<p><a href="https://tio.run/##AScA2P9vc2FiaWX//28qTMK5Rs61RMOJaTMqPsOrMsO3XXtJwqP//zMKMTU" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<p>A port of the jelly answer</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 78 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>i=0;f=k=&gt;f(k,c=(n,k)=&gt;k--?c(2*n,k)|n%6==4&amp;&amp;c(~-n/3,k):console.log(i),c(++i,k))
</code></pre>
<p><a href="https://tio.run/##FchBDsIgEADAu/@QLALWqPXQZvEtZAWDkKWxTU9Nv454nPm41c30jdNiuLx8rREvY8CENkDShMA6SbTJmCfB9fTXxscH4l0Igt1wd2s1UOG5ZH/O5Q1RagKlYntZx0OAXtYf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Quite <a href="https://codegolf.stackexchange.com/a/224946/">port</a> but still some changes</p>
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 98 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>i=&gt;g=(n,a=[...Array(i&lt;&lt;n+1)])=&gt;n?g(n-1,a.map((c,j)=&gt;(c=c||j,c%2?c*3+1:c/2))):a.sort((a,b)=&gt;a-b)[i]
</code></pre>
<p><a href="https://tio.run/##FYrLCoMwEAC/prDbxLTRmxql3yEe1vVBxCYSpVDw39P0MgzDrPShg4Pdz8z5cYqzidY0iwEnyXRKqVcI9AVb105o7NE0rl3AZVqSetMOwHJNEdjwda2Sb3nL90Lokh85IpakDh9OAJJD2igbsLN9nH0A60ajq8S6eFZCJEH27vDbpDa/wPwfEDRiFX8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Pure definition</p>
<p><code>i&lt;&lt;n+1</code> for <code>n=1</code> case</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a>, 73 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>([1..]&gt;&gt;=).(#)
k#n|k&lt;1=[n]|s&lt;-k-1=n&lt;$s#(2*n)++[n|_&lt;-s#div n 3,mod n 6==4]
</code></pre>
<p><a href="https://tio.run/##DYpLDsIgFAD3nuIldNFaIa1aV7zewBMgMaQ/Ce2TSOOKs4ssJjOLeZngpnVNMz5SqVohdN9jJUpWHRyj6GSLinQMkjveIskisPJ8pKquFcWn5IGN9gsEl9P2HrNviFedNmMJN@Pv4D@WdihA7cZN0DU557zFjOSgGiE6rdNvmFezhMQH7/8" rel="noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p><code>k#n</code> returns a list of the appropriate number of copies of <code>n</code>. The anonymous function <code>([1..]&gt;&gt;=).(#)</code> concatenates all of those together.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/224945/">224945</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




