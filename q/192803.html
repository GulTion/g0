<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::192803</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>101</td><td>Zsh force_float</td><td>190914T092737Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192825#192825">roblogic</a></td></tr>
<tr d-ix="1"><td>176</td><td>JavaScript V8</td><td>190913T205440Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192814#192814">Matsyir</a></td></tr>
<tr d-ix="2"><td>062</td><td>Python 3</td><td>190914T112956Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192829#192829">Nishioka</a></td></tr>
<tr d-ix="3"><td>012</td><td>Jelly</td><td>190913T181346Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192807#192807">Unrelate</a></td></tr>
<tr d-ix="4"><td>110</td><td>PHP</td><td>190914T001524Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192819#192819">XMark</a></td></tr>
<tr d-ix="5"><td>086</td><td>Retina</td><td>190913T230705Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192818#192818">Neil</a></td></tr>
<tr d-ix="6"><td>035</td><td>J</td><td>190913T220508Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192816#192816">Jonah</a></td></tr>
<tr d-ix="7"><td>203</td><td>Swift</td><td>190913T200427Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192812#192812">onnoweb</a></td></tr>
<tr d-ix="8"><td>019</td><td>Brachylog</td><td>190913T185554Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192810#192810">Unrelate</a></td></tr>
<tr d-ix="9"><td>nan</td><td></td><td>190913T181354Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192808#192808">Erik the</a></td></tr>
<tr d-ix="10"><td>012</td><td>Jelly</td><td>190913T181841Z</td><td><a href="https://codegolf.stackexchange.com/questions/192803/olympic-game-scoring/192809#192809">Jonathan</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://zsh.sourceforge.net/" rel="nofollow noreferrer">Zsh</a> <code>--force_float</code>, <s><sup>141</sup></s> <s><sup>136</sup></s> <s><sup>109</sup></s> 101 bytes</h1>
<p><a href="https://tio.run/##VY7RCoIwFIbvfYoDerGlpjPMEqdE5FUQRHdREVEUtBltwSp6dptJaYztnP/7Doc9xLEUe1lcJOSz@Xiyyaez0cIoznd2Oe0Qfho3rj1sgQEHBRJEyahFgOvHOBRXzRCSNlUOoyplmYqZw6lKuO64I2jQQWYaZEi6zOXYQ6Yb4Fh6JsbYSJLEWiKx9m0kXF3SbpiR2MfYC1bl6/sJ6DddN4ThLw0hgkHjIKxyy4f1vGbR34YP1bfNaxpVtLZtow/xgRAgvfIN" rel="nofollow noreferrer">Try it online!</a>
 <s><a href="https://tio.run/##VY7RCoIwFIbvfYoDebFlpjPMMqdE1FUQRHdRMaIoaDPaglX07DaTyhjbOf/3HQ67y0Mhdyo/K5jM5qPxZjKdDRdWfrrx83GL8MO6CuOBAQcBGhTIglObgCgfRu3GYJ9fjEBIOVS3ONUpz3TMW4LqRJhOYGxJai@DJmJpkCHlcldgDzE3wLHyGF4NkiSxl0iufQdJ15S0HWYk9jH2glXx/HwGur@uHUL/m/oQQe/nICxzzYfVvGHR34Y3NbfOKxqVtLJ1Yw7xgRAgneIF" rel="nofollow noreferrer">109bytes</a></s>
 <s><sub><a href="https://tio.run/##VY5va8IwEIff51McWEoyqW0qtVr6Bxn2lSCMvZM4wnBMMKksGVTFz16vdqyVcLl7nt8RcjHfTXU8q9Phk7Ir@dVmb0GCAg01WDANcnWyUG7eXlcf5XqzfCcqczjo9pKZMyJf1Q/uUmrHWc2Y62K8rXNV1IkSrqtbSjWSFsQghC9U5mFBrac8zXwqvZAl1pdMkDRNnS01u2BMjYctn0QFTwLG/FA0N/L3T5j10ySCxT8tIIZ5n0HU8iCPun108dMLD4s19J2NW9ulwwQPD4Bz4NPmDg" rel="nofollow noreferrer">136bytes</a></sub></s>
 <s><sub><a href="https://tio.run/##VY5dS8MwFIbv8ysOrJRzHF2bjlpX@qHIdjUYiHejShBFwaRjiVAd@@31dJWtEpKT53lfQn7se9d8fuvdxwvSQXwZ@@pAgQYDLTiwHXOzc7DaPNwvn1frzd2j0IUnwfSHKryJeGv23EXvlhDdtGiJfJ8r27bUVZvp2vdNT7lhMrWwDPEVqjKu0AU6MBSiCmLKXKioFnmee1u0T9EUbcCjjGZJJbOIKIzr7ij@PgvXl9ssgcWZFpDCzSWDpOdRngx9dum/F06W99gPNu3tkI4TXjICKUHOu18" rel="nofollow noreferrer">141bytes</a></sub></s></p>
<pre><code>m=$1 n=$1
for x ((t+=x,m=x&gt;m?x:m,n=x&lt;n?x:n,s=2*(#&gt;2?(t-m-n)/(#-2):t/#)))
&lt;&lt;&lt;$[(s^0+(s-s^0&gt;.5?1:0))/2]
</code></pre>
<p>Solution follows latest spec, except for the unclear second test case. Saved a few bytes using implicit <code>($@)</code>. Saved more by moving most calculations into the <code>(( ))</code> statement.</p>
<p>We implicitly iterate over the arguments with <code>for x</code>, and build a running total <code>t</code>, and also find maxima, minima <code>m, n</code>. If the number of arguments <code>#</code> is greater than 2, we discard <code>m</code> and <code>n</code> from the average. <code>s</code> is 2x the resulting average. If the mantissa of <code>s</code> is greater than 0.5, round <code>s</code> up, otherwise truncate with <code>s^0</code>. Finally, divide by 2 and output.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://v8.dev/" rel="nofollow noreferrer">JavaScript (V8)</a>, <strike>213</strike> <strike>211</strike> <strike>189</strike> 176 bytes</h1>

<p><sup>Edit: -2 bytes because I ended with <code>;\n}</code> when I could just end with a <code>}</code>, silly mistake.</sup></p>

<p><sup>Edit 2: -22 more bytes by reading about general JS golfing tips. I managed to take out parentheses from my nested ternaries in the <code>r</code> rounding function, and used bitwise math operations to avoid using <code>Math.floor</code> and <code>Math.ceil</code></sup></p>

<p><sup>Edit 3: -13 bytes because I was able to replace the <code>a.length</code> shortcut function with just direct calls to <code>a.length</code> to save 4 bytes. I also moved the g() function directly into the return statement, since it was only used once, which removed the rest of the bytes.</sup></p>



<pre class="lang-javascript prettyprint-override"><code>a=&gt;{s=i=&gt;a.splice(i,1)
e=_=&gt;a.reduce((t,i)=&gt;t+=i)/a.length
r=n=&gt;(m=n%1,m&lt;0.75?m&gt;0.25?~~(n)+0.5:~~(n):n%1?-~n:n)
return a.length&gt;2?r((a.sort((x,y)=&gt;x-y),s(0),s(-1),e())):r(e())}
</code></pre>

<p><a href="https://tio.run/##NY3NCsIwEITvfQovwi6msRXiT3HTBxGRUKNG2lSSKIrYV6@J4OWbYRhmruqhfOPMLeSP9XiiUZF8ezIkFfe31jQaDCsx03RIkdPHe4wgMIMkw4wMzhVvtT2HS@bIkoSO7LRk3bbgK1F3suALUQ8DWJwVXFQ/V8VGnQ@2spg5He7OTv4jclE7gPjduwDwZK9488xfyDwUCXmJTAMiVg6Sfsamt75vNW/7M5xgJ9hkySNWCeuEDRd7xPEL" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>

<p>I'm sure it can be improved as I'm fairly new, but it was fun to solve this one. I believe the main things that could be improved are my rounding logic/methods, and the fact that the main function uses a function body (<code>{ }</code> and <code>return</code>).</p>

<p>There was one thing in the question that was inconsistent with the examples and I wasn't really sure how to handle it. I implemented it so that it's consistent with the examples, but it doesn't exactly reflect the specified rounding rules, here is the example I found to be inconsistent:</p>

<p>6.5, 9 -> 8</p>

<p>You say it should be 8, although the average is 7.75. In the rounding rules you say it has to be at least .76 to go +1. I chose to reflect the examples instead of your rounding rules, so >=0.75 to go +1, and &lt;=0.25 to go -1, between 0.25 and 0.75 (exclusive) for .5. <strong>If the rounding specifications change, my code should be able to adapt without changing the number of bytes, by just changing the numbers in the rounding function <code>r</code></strong>, and maybe the order of the ternary statement depending on the rules.</p>

<p>Slightly ungolfed with explanation (the math operations were changed to bitwise operations and g() is directly in the return statement)</p>

<pre class="lang-javascript prettyprint-override"><code>a =&gt; { // a is the input array
    s = i=&gt;a.splice(i, 1); // shortcut to remove index i for 1 element
    e = _=&gt;a.reduce((t, i) =&gt; t += i) / a.length; // get array avg
    g = _=&gt;(a.sort((x,y)=&gt;x-y), s(0), s(-1), e()); // what to execute when &gt; 2: sort, remove 1st/last, get avg
    t = n=&gt;Math.floor(n); // Math.floor shortcut

    // apply olympic rounding to number by checking the value of n%1
    r = n=&gt;(m=n%1,m &lt; 0.75 ? (m &gt; 0.25 ? t(n) + 0.5 : t(n)) : Math.ceil(n));

    // if arr length &gt; 2: round g(), otherwise round e()
    return a.length &gt; 2 ? r(g()) : r(e());
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 62 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f(s):z=sorted(s)[1:-1]or s;return round(2*sum(z)/len(z))/2
</code></pre>

<p><a href="https://tio.run/##ZVDLbsIwELz7K7ac7MoFQVUCVPmSKIcoWStIYKNdpyogvj3d2FCJ1oe157Eja07n2Af/Po4dOnCaze5ScqCInbyr5e5tWQcC/iSMA3mgMPhOr155OOqLWRzQy2UWq7T@hbR3Z33o2QL1EqVATsOMFCVbeANlOUkWZk5fbwLheoOXac7mLtCxiXk9u3OMUm3DyOKtUqCu1rWFtbEPNP@wsBVq80ttLRSCnzgxZaeQIotWPEdkdRr/9IdaJPXuqxMWT62Um0pqA6H8Hb9P2EqBsPeQfp57uLfz12XGHw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 12 bytes</h1>

<pre><code>ṢṖḊȯµÆmḤær0H
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///hzkUPd057uKPrxPpDWw@35T7cseTwsiIDj/@H2x81rYn8/z9aIdosVifaTM9UxxJIW@qY61iA@DqmIBZYzFQHLAvkmUNVgvlADBGB8M1BfIg4UMxQx9BAxwxoBBDGKsQCAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<pre><code>    µ           Take
Ṣ               the input sorted,
 Ṗ              without its last
  Ḋ             or first element,
   ȯ            or the unchanged input if that's empty,
     Æm         then calculate the mean,
       Ḥ        double it,
        ær      round it to the nearest multiple of
          0     10^-0 (= 1),
           H    and halve it.
</code></pre>

<p>A version which rounds halves down, in accordance with the spec at the expense of the second test case:</p>

<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 12 bytes</h1>

<pre><code>ṢṖḊȯµÆmḤ_.ĊH
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///hzkUPd057uKPrxPpDWw@35T7csSRe70iXx//D7Y@a1kT@/x@tEG0WqxNtpmeqYwmkLXXMdSxAfB1TEAssZqoDlgXyzKEqwXwghohA@OYgPkQcKGaoY2igYwY0AghjFWIB" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>The rounding method here is closer to Jonathan Allan's:</p>

<pre><code>Ḥ        Double,
 _       subtract
  .      one half,
   Ċ     round up,
    H    and halve.
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 110 bytes</h1>



<p>Seems like PHP has some good built-in functions for this. I just array_sum the whole thing, then if there's more than two elements, subtract the min() and max() values and divide by 2 less than the length of the array.</p>

<p>For the rounding, I use the round() function with the PHP_ROUND_HALF_DOWN flag (which = 2) on double the average, and then divide it by 2 so it goes in increments of 0.5</p>

<p>EDIT: for the case of [6.5, 9] I'm following the stated rule that 7.75 rounds to 7.5 and not 8 like in the original example given.</p>

<pre class="lang-php prettyprint-override"><code>function s($s){$c=count($s);$t=array_sum($s);if($c&gt;2){$c-=2;$t-=min($s)+max($s);}return round($t/$c*2,0,2)/2;}
</code></pre>

<p><a href="https://tio.run/##dc1RC4IwEAfw9z7FIXvQmhoDM7HVB6kIWYo@OMecUISffW0zoQd9Obj7/@5O1EKfLqIWG4CS1R30/vVwDyLvxr38fxYlGLKFIMOQYjgurWBIpnB504TTVSfStaeTsWVFzSZ15qdnp6uBM9V03EjUBx/EKOsGrmyTI0ULKYv3ox9aN2gqH7EzsSykxOQhbRtuo11bvBwZZakGyUGaK08fqRixLcF7TIKY5KPWXw" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 86 bytes</h1>

<pre><code>\.5
__
\d+
*4*__
O`_+
_+ (.+) _+
$1
O`.
^ *
$.&amp;*__:
(_+):(\1{4})*(\1\1)?_*
$#2$#3*$(.5
</code></pre>

<p><a href="https://tio.run/##JYoxDsIwDEV3n8JSA0piyVKgSWgXRkYuEOEiwdCFAbEhzh6cdLD@e9///fysr3uoO3tZauEIIlAeBH70StdFCITQMjlUNEErhht6MLzXxQxWyM22hO/4c16zBHcWfQ8HMxy9sRxrTZA44gQTZjxBwthSPWLvlXNfdNNrvllutrV/" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>

<pre><code>\.5
__
\d+
*4*__
</code></pre>

<p>Since Retina can't readily handle fractional or zero numbers, each number is represented in unary as 1 more than 4 times the value. The <code>.5</code> therefore expands to 2 <code>_</code>s, while the <code>*4*_</code> applies to the whole number part, and a final <code>_</code> is suffixed.</p>

<pre><code>O`_+
</code></pre>

<p>Sort the numbers into order.</p>

<pre><code>_+ (.+) _+
$1
</code></pre>

<p>If there are at least three numbers, discard the first (smallest) and last (largest).</p>

<pre><code>O`.
</code></pre>

<p>Sort the spaces to the start, thus also summing the numbers.</p>

<pre><code>^ *
$.&amp;*__:
</code></pre>

<p>Count the number of spaces and add <code>_</code> and a separator. This then represents the number we have to divide by.</p>

<pre><code>(_+):(\1{4})*(\1\1)?_*
$#2$#3*$(.5
</code></pre>

<p>Divide the sum by the number of numbers, allowing for the fact that we're working in multiples of 4 times the original number, so that the integer and decimal portions can be directly extracted. This is a truncating division, but fortunately because we added an extra <code>_</code> to each number, the result effectively includes an extra 0.25, thus giving us the rounding we want.</p>
</div>
<div id="pu6" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, <sup><s>36</s></sup> 35 bytes</h1>

<pre><code>[:(1r4&lt;.@+&amp;.+:+/%#)}:@}.^:(2&lt;#)@/:~
</code></pre>

<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/o600DItMbPQctNX0tK209VWVNWutHGr14qw0jGyUNR30rer@a3JxpSZn5CuYKdgqpCmYQTgWEI6eqY6CJbKIpY6CuY6CBUTIHKJIR8EUIgpXC5EAikIMAEuZo@jRg0uCCCRpPVMUveZgaajC/wA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>

<p>Borrowed the double / floor / halve trick for rounding to 0.5 increments from Unrelated String.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://developer.apple.com/swift/" rel="nofollow noreferrer">Swift</a>, 203 bytes</h1>



<pre class="lang-swift prettyprint-override"><code>func a(b:[Double])-&gt;Void{var r=0.0,h=0.0,l=11.0
b.forEach{(c)in h=c&gt;h ?c:h;l=c&lt;l ?c:l;r+=c}
var d=Double(b.count)
r=d&gt;2 ?(r-h-l)/(d-2.0):r/d
d=Double(Int(r))
r=r-d&lt;=0.25 ?d:r-d&lt;=0.75 ?d+0.5:d+1
print(r)}
</code></pre>

<p><a href="https://tio.run/##PY6xCsIwGIT3PEXGhJo0LYqQNu2igy/gIg5NYkkgpPLb6lD67NVWcTnu4OPjHi/f9tt5bodocEO0vBy6QYfblbLq3Hk7PhvAoAQXG7dmUFnGBdK87eDYGDcSQ7GP2ClTOVwb6YqgTBmWGgpIlJnQ4rDqKyaam26IPUWgbJXjmgBzLNCUWJZzQSWkFv3hU@wJ0IUFZsvPgXyHayvJb@2XlQi@kzbJKLqDX/lpnt8" rel="nofollow noreferrer" title="Swift – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 19 bytes</h1>

<pre><code>o{bṀk|}⟨+/l⟩×₄&lt;÷₂/₂
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/pfXa6koGunoFRuX/2obcOjpuaaRx3LldISc4pT9ZRqH@7qrH24dcL//OqkhzsbsmtqH81foa2f82j@ysPTHzW12Bze/qipSR@I//@PVog2i9WJNtMz1bEE0pY65joWIL6OKYgFFjPVAcsCeeZQlWA@EENEIHxzEB8iHqsQCwA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>

<p>And I thought the rounding was awkward in Jelly!</p>
</div>
<div id="pu9" class="pu"><p>EDIT: <strong>This answer has since become invalid.</strong> It was valid for about half a minute after it was posted.</p>

<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 bytes</h1>

<pre><code>ṢḊṖȯƊÆmḤḞH
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///hzkUPd3Q93DntxPpjXYfbch/uWPJwxzyP////R5vqKJiBkaEBEBsCsXEsAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 12 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>ṢṖḊȯ⁸ÆmḤ+.ḞH
</code></pre>

<p>A monadic Link accepting a list of numbers which yields a number.</p>

<p><strong><a href="https://tio.run/##y0rNyan8///hzkUPd057uKPrxPpHjTsOt@U@3LFEW@/hjnke////jzbUUYAgCx0FSyDDIBYA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>

<h3>How?</h3>

<pre><code>ṢṖḊȯ⁸ÆmḤ+.ḞH - Link, list of numbers, X
Ṣ            - sort X
 Ṗ           - remove the right-most
  Ḋ          - remove the left-most
    ⁸        - chain's left argument, X
   ȯ         - logical OR (if we have nothing left use X instead)
     Æm      - arithmetic mean
       Ḥ     - double
         .   - literal half
        +    - add
          Ḟ  - floor
           H - halve
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/192803/">192803</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




