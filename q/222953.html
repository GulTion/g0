<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::222953</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>287</td><td>Python3</td><td>240520T214037Z</td><td><a href="https://codegolf.stackexchange.com/questions/222953/the-game-of-cat-and-mice-with-matrices/273207#273207">Ajax1234</a></td></tr>
<tr d-ix="1"><td>155</td><td>Python 3.8</td><td>210406T200329Z</td><td><a href="https://codegolf.stackexchange.com/questions/222953/the-game-of-cat-and-mice-with-matrices/222973#222973">Noodle9</a></td></tr>
<tr d-ix="2"><td>039</td><td>Charcoal</td><td>210406T235752Z</td><td><a href="https://codegolf.stackexchange.com/questions/222953/the-game-of-cat-and-mice-with-matrices/222980#222980">Neil</a></td></tr>
<tr d-ix="3"><td>134</td><td>Haskell</td><td>210406T213203Z</td><td><a href="https://codegolf.stackexchange.com/questions/222953/the-game-of-cat-and-mice-with-matrices/222974#222974">Delfad0r</a></td></tr>
<tr d-ix="4"><td>111</td><td>JavaScript ES7</td><td>210406T105211Z</td><td><a href="https://codegolf.stackexchange.com/questions/222953/the-game-of-cat-and-mice-with-matrices/222956#222956">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 287 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(x,y,b):
 d={(x,y):v for x,r in E(b)for y,v in E(r)}
 R=0
 while 1:
  j,k=0,[]
  for X,Y in[(1,0),(-1,0),(0,1),(0,-1),(1,1),(1,-1),(-1,1),(-1,-1)]:
   if(V:=d.get(L:=(x+X,y+Y),-1))&gt;max(k+[0]):j=L
   k+=[V]
  if[]==k or k.count(max(k))&gt;1:return R
  d[j]-=1
  x,y=j
  R+=1
</code></pre>
<p><a href="https://tio.run/##hY/Bb4IwFMbv/BXv2IaHaUGThaS7efPkwWiaHnSUCUwwDTrIsr@dtdTNabYYkr73le/79b1j3@6bOnk6mmGYC12fDtpsWx1kOoecdNjjjqYBZOLDCZqeIW8MdGigqGFOdtTJHs9eGvoZwFKwAN73xZsGbqNQYiUYSmVbZ17jxpol4cgoksgXhnw8I1c4@nMUkVfRKJXjQZGTVSqyyatuySIVpAvX2Icb6hz0@bDtSBVKpmhaioXzV6GQK/d8kUslRAV2imry0pzqloxum@Kp0e3J1LC0vkyWKhLcdnZnUdq6DAUfjqawiZzEGKO0l5LbJkGm0AmGM2RX4b7YC45TtFuoQFEafEMYQoJwwczs/4cYL@4wMQJ/iIldDqdXDP8Dwy4Y/8wPht9O45I3o/2PSX4n43vMzYZsxAxf" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8</a>, <sup><s>167</s> <span class="math-container">\$\cdots\$</span> <s>159</s></sup> 155 bytes</h1>
<p>Saved <s>2</s> 5 bytes thanks to <a href="https://codegolf.stackexchange.com/users/64121/ovs">ovs</a>!!!<br />
Saved 4 bytes thanks to <a href="https://codegolf.stackexchange.com/users/82619/delfad0r">Delfad0r</a>!!!</p>

<pre class="lang-python prettyprint-override"><code>def f(a,c,r=0):
 while(l:=sorted([[z,-a.get(c+z,0)]*2for x in(1,1j,1+1j,1-1j)for z in(x,-x)],key=list.pop))[0][1]&lt;l[1][1]:r+=1;c+=l[0][0];a[c]-=1
 return r
</code></pre>
<p><a href="https://tio.run/##jVJRb6MwDH7nV1h9IRlmItBqJ7rsjzB0QmlYYYiikOkoVX97Lw70tjvt4RBKnM9fPtuxh7M9nvrsx2But4OuoWYVKjQy4XkAv45Np1mXy/FkrD6wopgxrh7ftGUqmjHh5UNanwxM0PRMoGhRRLTEouWEz4RPGE@8xHd9ll0z2sfhNHBeJGUhyufOLe7PTSTFXkWyIzwp91WhyliKAIy2H6YH43MbKDfK6x4TTNW/abYlzIPnv8BZTtH5QbT7wTS9ZRt42RRKyrmMRmvYUgdVwaMNPK8u1P1BhiF3gsstZy1GGH/5HMHq0f6sQAIL4JLkAkG0eYqQtnnmbPcQ@c6dosyjGREyAre0O5I/O6e44heBnRcQ3wj8D9fHX8X9xe@Deb74h3qnpAvls4o/ms6xlq2obAIxa9HvKaY80NOglRsU8mYo8Al3uOWBOmr1rg2h4etH@rRVIYK3ROYekhpHQ6epeXMzsOVlEZZQCHdZ32ZYx8Cbo9OsP49Lo@oQ4he4jFe4rJELLeVYXl/7kN9@Aw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Inputs a dictionary mapping each house in the array (represented by a complex number) to the number of mice in that house along with the position of the cat as a complex number.<br />
Return the number of rounds before the cat &quot;dies&quot; (no cats or mice where harmed in this answer, they're all professional actors just playing their parts).</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 39 bytes</h1>
<pre><code>Ｅ⁴ＳＪＮＮＷ⁼№ＫＭ⌈ＫＭ¹«⊞υωＭ✳⁻³⌕ＫＭ⌈ＫＭＰＩ⊖ＫＫ»⎚ＩＬυ
</code></pre>
<p><a href="https://tio.run/##jY9PSwMxEMXPm0@R4wRWSFtvPW4rKI0s6BeI69AN5s82m2kF8bPHZKvo0csw8/jN471h1HEI2ubcR@MTKD3Bbcvv/UTpKRXpCEKILXsgNz0HWPRHci8YQXxjP2ehLqOxyGF/Im1n6AIVxx7xTYUQsT4o/W4cub@iKPJKCP7Bmp7mEajll2LVqHBG2JmIQzLBgzKeZti0/M7413@YLqkbRTaZaWnW6TnBDoeIDn3CqwdcuU/WWdSlw5b1v/AB/TGVQBXJWW6kZHJdh1zVUTe2zjdn@wU" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes as input a list of 4 strings of digits, followed by the 0-indexed across and down coordinates. Explanation:</p>
<pre><code>Ｅ⁴Ｓ
</code></pre>
<p>Print the mouse counts to the canvas.</p>
<pre><code>ＪＮＮ
</code></pre>
<p>Move to the cat's starting position.</p>
<pre><code>Ｗ⁼№ＫＭ⌈ＫＭ¹«
</code></pre>
<p>Repeat while the cat has a unique choice of best move.</p>
<pre><code>⊞υω
</code></pre>
<p>Track the number of moves.</p>
<pre><code>Ｍ✳⁻³⌕ＫＭ⌈ＫＭ
</code></pre>
<p>Actually make that move. (Annoyingly the <code>Peek</code> and the <code>Direction</code> directions don't match up with each other...)</p>
<pre><code>ＰＩ⊖ＫＫ
</code></pre>
<p>Decrement the number of mice at the new position.</p>
<pre><code>»⎚ＩＬυ
</code></pre>
<p>Clear the canvas and output the number of moves taken.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <sup><s>137</s></sup> 134 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>(x,y)!l|d&lt;-[a|a@((i,j),k)&lt;-l,((x-i)^2+(y-j)^2-2)^2&lt;2],m&lt;-foldr(max.snd)1d,[i]&lt;-[i|(i,k)&lt;-d,k==m]=1+i!((i,m-1):[a|a&lt;-l,fst a/=i])|0&lt;1=0
</code></pre>
<p><a href="https://tio.run/##ZZDBbsMgDIbvfQpa9QAqZIGmm1SFapfd9gZRpiBBNxqSVCTa0invnpm03bpNlm1kPv82vKm2NM6NI@7piczdoFOWqUE9YmzpgdCSpMxRjHtmyYtY4RM7QGYCQipyWqVs3zjtcaX6qK014ZpmNgcNO4BA6Na0lLLKJV/ZeRCtGCfbMCII79sOqTtpczLEKZfxWClbS93MEOq3p61PGSgfkTdKRx@N1220t64zHhd10z05UxULynYLki53r6Z7trUh0OpMh5zMYFpRNbpIqC20fS@S8JzrWp/2mMVRlC87VRrE75HPofPobd0tL38hpVOwn4d6WGsUSFDEkUBrFINtpng2AfUEnCO2Q@sZAIHcgP8nz3ki@YyfNX@TYrpPLtxEPsziQP7o8JsT/9YGcnMl138m3vbEgUy@AA" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p>The function <code>(!)</code> takes as input the position of the cat <code>(x,y)</code> and a list with one <code>((i,j),k)</code> entry for each house, where house at position <code>(i,j)</code> as <code>k</code> mice (possibly zero).</p>
</div>
<div id="pu4" class="pu"><h1>JavaScript (ES7), <s> 122 113 112 </s> 111 bytes</h1>
<p><em>Saved 1 byte thanks to @l4m2</em></p>
<p>Expects <code>(mice_array)(cat_x, cat_y)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>m=&gt;g=(x,y)=&gt;!m.reduce((o,v,n)=&gt;6&gt;&gt;(n%4-x)**2+((n&gt;&gt;2)-y)**2&amp;1?v&gt;h?!(p=n,h=v):o|v==h:o,h=0)&amp;&amp;1+g(p&amp;3,p&gt;&gt;2,m[p]--)
</code></pre>
<p><a href="https://tio.run/##lY/BbsIwDIbvfQo4rLKpg5IUdkBKeBDEAZXSbqJJBFsEEu9eXKi2IjGkyZfflv/Pvz83cXMsDh/hSzi/LdudaRtjKwMnOqOx42Z6KLffRQngKZLj0bu14N5m4oSTic4AnLUaxbnrUrWMtl6OIRhHtYm48JdoTL3w3ElMU5VVENKcAnuoWYW1ENgW3h39vpzufQXZDlbJaKRIU06SWEqas@hlV5puCzNSpJI1giaNmCRPKXNeekG5yxuFr/2Lojsjh@gpfRb1Z5b7qZ6ihlnYOojVUeQLSv5r1Y@UwXPyh9JeAQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<p>This is a bit similar to <a href="https://codegolf.stackexchange.com/a/177545/58563">my answer</a> to <a href="https://codegolf.stackexchange.com/q/176251/58563">my own challenge</a>.</p>
<pre class="lang-javascript prettyprint-override"><code>m =&gt;                   // m[] = flat array of mice
g =                    // g is a recursive function taking
(x, y) =&gt;              // the position (x, y) of the cat
!m.reduce((o, v, n) =&gt; // for each value v at position n in m[]:
  6 &gt;&gt;                 //   bitmask of valid squared distances
  (n % 4 - x) ** 2 +   //   compute (prev_x - x)²
  ((n &gt;&gt; 2) - y) ** 2  //   + (prev_y - y)²
  &amp; 1 ?                //   if it's either 1 or 2:
    v &gt; h ?            //     if v is greater than the highest value h:
      !(p = n, h = v)  //       copy n to p and v to h, clear o
    :                  //     else:
      o | v == h       //       set o if v = h (frustrated cat!)
  :                    //   else:
    o,                 //     leave o unchanged
  h = 0                //   start with o = h = 0
)                      // end of reduce()
&amp;&amp;                     // if it's falsy:
  1 +                  //   increment the final result
  g(                   //   and do a recursive call:
    p &amp; 3,             //     new x
    p &gt;&gt; 2,            //     new y
    m[p]--             //     decrement m[p]
  )                    //   end of recursive call
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/222953/">222953</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




