<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::113898</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>009</td><td>Vyxal 3</td><td>240124T200019Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/269535#269535">pacman25</a></td></tr>
<tr d-ix="1"><td>116</td><td>Batch</td><td>170327T205429Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/114085#114085">Neil</a></td></tr>
<tr d-ix="2"><td>063</td><td>Java 7</td><td>170327T073044Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113985#113985">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>074</td><td>C</td><td>170326T081106Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113910#113910">Steadybo</a></td></tr>
<tr d-ix="4"><td>051</td><td>Python 2</td><td>170327T093944Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113996#113996">G B</a></td></tr>
<tr d-ix="5"><td>045</td><td>Ruby</td><td>170327T075050Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113987#113987">G B</a></td></tr>
<tr d-ix="6"><td>068</td><td>Haskell</td><td>170326T083310Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113912#113912">Laikoni</a></td></tr>
<tr d-ix="7"><td>071</td><td>JavaScript + lodash</td><td>170327T061920Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113983#113983">Brian Mc</a></td></tr>
<tr d-ix="8"><td>039</td><td>Octave</td><td>170326T090904Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113913#113913">rahnema1</a></td></tr>
<tr d-ix="9"><td>032</td><td>Mathematica</td><td>170327T032414Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113978#113978">Not a tr</a></td></tr>
<tr d-ix="10"><td>016</td><td>MATL</td><td>170326T034947Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113902#113902">Luis Men</a></td></tr>
<tr d-ix="11"><td>071</td><td>Python 2</td><td>170326T070758Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113907#113907">ovs</a></td></tr>
<tr d-ix="12"><td>040</td><td>Mathematica</td><td>170326T050806Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113905#113905">Greg Mar</a></td></tr>
<tr d-ix="13"><td>013</td><td>Jelly</td><td>170326T031401Z</td><td><a href="https://codegolf.stackexchange.com/questions/113898/return-neighbors-index-in-an-3x3-grid/113900#113900">Dennis</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3" rel="nofollow noreferrer">Vyxal 3</a>, 9 bytes</h1>
<pre><code>kd⁻ṪÞo1⁾i
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#WyIiLCIiLCJrZOKBu+G5qsOebzHigb5pIiwiIiwiMyIsIjMuNC4xIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>kd⁻ṪÞo1⁾i­⁡​‎‎⁪⁡⁪⁠⁪⁣⁡⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏⁠⁪⁪⁠⁪⁪⁠⁪⁪⁠⁪⁪‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠⁪⁪⁠⁪⁪‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠⁪⁪‏​⁡⁠⁡‌­
        i  # ‎⁡value of program at index of input
kd⁻Ṫ       # ‎⁢digits 0-8 in a 3x3 square
    Þo     # ‎⁣grid neighbors
      1⁾   # ‎⁤flatten by 1
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu1" class="pu"><h2>Batch, 116 bytes</h2>

<pre><code>@set c=cmd/cset/a%1
@set/ar=%1%%3
@if %1 gtr 2 %c%-3
@if %r% gtr 0 %c%-1
@if %r% lss 2 %c%+1
@if %1 lss 6 %c%+3
</code></pre>

<p>0-indexed.</p>
</div>
<div id="pu2" class="pu"><h1>Java 7, 63 bytes (hardcoded)</h1>
<pre><code>int c(int i){return new int[]{31,420,51,640,7531,842,73,864,75}[i];}
</code></pre>
<p>0-indexed<br />
(Reversed order output because <code>024</code> and <code>046</code> aren't valid integers.)<br />
<s>Still working on a non-hardcoded version, but</s> I can assure you it won't be shorter..</p>
<p><a href="https://tio.run/nexus/java-openjdk#fY3LCoMwEEX3fsUsEwjiIz7Ab@jKpbhIU1sGNIoZW4rk2@2UdtvexcCdA@fa0XgPJ9ijCMCTIbRwoCOw4n1R7utA2@rADQ/gT9fveap0lqgiVaVOVFVwr3WmqlzVpeYeOuybcLBv2c4j@77a@4wXmAw6cUVnRmhpRXfrejCS54HTPj0NUzxvFC/MaHTCikTK5jfN/1L9oSEKxws" rel="nofollow noreferrer">Try it here.</a></p>
<hr />
<p><strong>82 bytes</strong></p>
<pre><code>String c(int n){return&quot;&quot;+(n&gt;3?n-3:&quot;&quot;)+(n&lt;7?n+3:&quot;&quot;)+(n%3&gt;0?n+1:&quot;&quot;)+(--n%3&gt;0?n:&quot;&quot;);}
</code></pre>
<p>1-indexed<br />
Based on <a href="https://codegolf.stackexchange.com/a/113910/52210"><em>@Steadybox</em>' C answer</a></p>
<p><a href="https://tio.run/nexus/java-openjdk#fY7BCoJAEEDvfsWwEOwiSmIRaOgXdPIYHbbNYmEdxR2DEL/dJrRjze3Ng3ljnPYeTtoijEEA4EmTNTBX1Ft8gJEWCVCNfU1Dj0KEEou0xCjNhFAMx0OJ4Rc2abFlTBaMonXxwXyaAbrh6vj42ni29gYNl@XdonawJM8X0Ip/AZ7q5alu4naguGNHDqWRiVL5b7v7a/eLnYJpfgM" rel="nofollow noreferrer">Try it here.</a></p>
</div>
<div id="pu3" class="pu"><h1>C, <s>100</s> <s>92</s> <s>91</s> <s>83</s> <s>78</s> 74 bytes</h1>

<pre><code>p(n){putchar(n+48);}f(n){n&gt;3&amp;&amp;p(n-3);n&lt;7&amp;&amp;p(n+3);n%3&amp;&amp;p(n+1);--n%3&amp;&amp;p(n);}
</code></pre>

<p>1-indexed. Thanks to @Neil for saving 4 bytes.</p>

<p><a href="https://tio.run/nexus/c-gcc#@1@gkadZXVBakpyRWKSRp21ioWldmwYSy7MzVlMDyuoaa1rn2ZiD2dogtipEXNtQ01pXF8YD6vqfmVeikJuYmaehyVXNxZmmAVQAM1g9Jk9d0xokaIpN0AJDsPa/IZcRlzGXCZcplxmXOZcFlyWXoQEA" rel="nofollow noreferrer">Try it online!</a></p>

<p><strong>Hardcoded version, 56 bytes</strong></p>

<pre><code>l[]={13,204,15,406,1357,248,37,468,57};
#define L(n)l[n]
</code></pre>

<p>0-indexed</p>
</div>
<div id="pu4" class="pu"><h1>Python 2, 51 bytes</h1>
<pre><code>lambda x:[x+3,x-3][x/6:x/3+1]+[x+1,x-1][x%-3:x%3+1]
</code></pre>
<p>Based on a previous version of my <a href="https://codegolf.stackexchange.com/a/113987/18535">Ruby</a> answer, I found it interesting because it was mostly the same code, using a different trick, and produces the same result. Getting this one right helped me golf the ruby answer a little more.</p>
<p>Basically, ruby has it shorter because the array slice index are inclusive, python needs a <code>+1</code> to compensate.</p>
<h3>Explanation</h3>
<p>Get the 2 arrays (vertical and horizontal neighbours), then select one or both based on some calculations.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>51 48</s> 45 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;a{[a+3,a-3][a/6..a/3]+[a+1,a-1][a%-3..a%3]}
</code></pre>
<p><a href="https://tio.run/nexus/ruby#S7P9r2uXWB2dqG2sk6hrHBudqG@mp5eobxyrDRQzBIoZAsVUdY2BgqrGsbX/C0pLihXSog1itex1uKAcQ2SOETLHGJljgswxReaYIXPMkTkWIM5/AA" rel="nofollow noreferrer" title="Ruby – TIO Nexus">Try it online!</a></p>
<p>Create 2 arrays, with vertical and horizontal neighbours, then select one or more of them.</p>
<h3>Ruby hardcoded, 44 bytes</h3>
<pre class="lang-ruby prettyprint-override"><code>-&gt;a{%w(13 024 15 046 1357 248 37 468 57)[a]}
</code></pre>
<p>... Not worth it.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>74 71</s> 68 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>f n=[x|x&lt;-[n-3,n-1..n+3],0&lt;x,x&lt;10,gcd 3x&lt;2||n-1/=x,gcd 3n&lt;2||n+1/=x]
</code></pre>

<p><a href="https://tio.run/nexus/haskell#Jc2xDoIwFIXhVzkhDpC2CHYyaX0CmRhrB6JBGLgQxXiHvnuluJ18/3BiD7KOAxvlSGlJqi5LEtrLyrBkU1fyeX9AszmFsMWj5T/QDiKBj1M3EiymbmmQ3xjqguWztuvrSjjgPcxfMIRAlkqW1m55Dy4KuO3y7OMP" rel="nofollow noreferrer" title="Haskell – TIO Nexus">Try it online!</a> Uses a 1-indexed grid. Example usage: <code>f 3</code> returns <code>[2,6]</code>. </p>

<p>Edit: Saved <s>3</s> 6 bytes thanks to Ørjan Johansen!</p>

<hr>

<p>For <s>77</s> 75 bytes, the following function <code>#</code> works for an arbitrary grid size <code>m</code>:</p>

<pre class="lang-hs prettyprint-override"><code>n#m=[x|x&lt;-[n-m,n-1,n+1,n+m],0&lt;x,x&lt;=m*m,gcd x m&lt;m||n-1/=x,gcd n m&lt;m||n+1/=x]
</code></pre>

<p><a href="https://tio.run/nexus/haskell#LczBCoJAEAbge0/xox203bWMjrs9gZ06moGklIcZRY2G8N3NlQYGfr4Z/plDcrlMYk3OhjSbVLPyS4U@WNFiHe1IPx8VBGRpmpaXvZNV@C/KSzFT2TAcqnaDZYbmW8Ma9HVZZbwSld0F0U1gzuje43XsM8YWw6v9LO1KIfCXwKfVIkG49sQx8jRJfLwfi/n0Aw" rel="nofollow noreferrer" title="Haskell – TIO Nexus">Try it online!</a>
For each <code>n</code> the list <code>[n-m,n-1,n+1,n+m]</code> contains all four neighbours. For each entry <code>x</code> in this list we check <code>-1&lt;x</code> and <code>x&lt;m*m</code> to make sure <code>x</code> is not above or below the grid, <code>mod n 3&gt;0||n-1/=x</code> to enforce the left grid border and <code>mod(n+1)m&gt;0||n+1/=x</code> for the left border.</p>
</div>
<div id="pu7" class="pu"><h1>JavaScript + lodash, 71 bytes</h1>

<pre><code>f=a=&gt;_.range(9).filter(b=&gt;a&gt;b?f(b).includes(a):[,1,,1][b-a]&amp;&amp;b%3|a%3&lt;2)
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Octave, <s>42</s> <s>40</s> 39 bytes</h1>

<pre class="lang-matlab prettyprint-override"><code>@(n,x=~e(3),y=x(n)=1)find(bwdist(x)==1)
</code></pre>
<p>1-based index.</p>
<p><a href="http://octave-online.net/#cmd=arrayfun(%40(n%2Cx%3D%7Ee(3)%2Cy%3Dx(n)%3D1)find(bwdist(x)%3D%3D1)%2C1%3A9%2C%27Un%27%2C0)" rel="nofollow noreferrer">Verify all test cases.</a></p>
<p>Explanation:</p>
<pre class="lang-matlab prettyprint-override"><code>x=~e(3);         % create a 3*3 matrix of zeros
x(n)=1;          % set the element with index n to 1
d=bwdist(x);     % compute the distance transform of the matrix
find(d == 1)     % find where the distance is 1.
</code></pre>
<p>Example: <code>n = 2</code></p>
<pre class="lang-matlab prettyprint-override"><code>x =

   0   0   0
   1   0   0
   0   0   0
</code></pre>
<p>(In Octave data is stored column-wise.)</p>
<pre class="lang-matlab prettyprint-override"><code>d =

   1.00000   1.41421   2.23607
   0.00000   1.00000   2.00000
   1.00000   1.41421   2.23607
</code></pre>
<p>logical index where distance is 1:</p>
<pre class="lang-matlab prettyprint-override"><code>d == 1

 1   0   0
 0   1   0
 1   0   0

find(d ==1)

 1
 3
 5
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Mathematica, 32 bytes</h2>

<pre><code>GridGraph@{3,3}~AdjacencyList~#&amp;
</code></pre>

<p>Uses a graph instead of an array. <code>GridGraph@{3,3}</code> constructs a 3x3 grid-shaped graph, shown below, which Mathematica helpfully labels with the numbers 1–9 for the vertices by default. Then <code>~AdjacencyList~#&amp;</code> tells you the neighbours of a vertex.</p>

<p><a href="https://i.stack.imgur.com/bs3FK.png" rel="noreferrer"><img src="https://i.stack.imgur.com/bs3FK.png" alt="The 3x3 grid graph"></a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, <s>17</s> 16 bytes</h1>
<pre><code>9:qWIe1Y6Z+i)BPf
</code></pre>
<p>The array is 1-based, that is, contains numbers from <code>1</code> to <code>9</code>.</p>
<p><a href="https://tio.run/nexus/matl#@29pVRjumWoYaRalnanpFJD2/78pAA" rel="noreferrer" title="MATL – TIO Nexus">Try it online!</a> Or <a href="https://tio.run/nexus/matl#S/hvaVUY7plqGGkWpZ2p6RSQ9t8l5L8hlxGXMZcJlymXGZc5lwWXJQA" rel="noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<p>Consider input <code>2</code> as an example.</p>
<pre><code>9:q  % Push [0 1 2 ... 8]
     % STACK: [0 1 2 ... 8]
W    % Rise to 2, element-wise
     % STACK: [1 2 4 ... 256]
Ie   % Reshape as 3-row matrix (column-major order)
     % STACK: [1   8  64;
               2  16 128;
               4  32 256]
1Y6  % Push [0 1 0; 1 0 1; 0 1 0]
     % STACK: [1   8  64;
               2  16 128;
               4  32 256],
              [0   1   0;
               1   0   1;
               0   1   0]
Z+   % Convolution, maintaining size
     % STACK: [10  81 136;
               21 170 336;
               34 276 160]
i    % Take input, n
     % STACK: [10  81 136;
               21 170 336;
               34 276 160],
               2
 )   % Get n-th entry (1-based; column-major order)
     % STACK: 21
B    % Convert to binary
     % STACK: [1 0 1 0 1]
P    % Flip
     % STACK: [1 0 1 0 1]
f    % Find: gives indices of nonzeros. Implicitly display
     % STACK: [1 3 5]
</code></pre>
</div>
<div id="pu11" class="pu"><h1>Python 2, 71 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda n:filter(abs,[(n-3)*(n&gt;3),(n+3)*(n&lt;7),~-n*(n%3!=1),-~n*(n%3&gt;0)])
</code></pre>

<p>1-indexed<br>
<a href="https://tio.run/nexus/python2#JYpBCsIwEADvvmItCLu6kYYcCsXmI@ohxUYW2lVibqX9eiw6pxmY2N3KGKb@EUDbKGMeEob@w1dU4@iI6h0x6unnl4Z4NbrZwe07S2zWf/ia7lTiK4GAKKSgzwEt25raHWy8k2jGal7AeJiX6rytU8goHFGIqHwB" rel="nofollow noreferrer" title="Python 2 – TIO Nexus">Try it online!</a></p>

<hr>

<p>Getting the result from a predefined list of  results is shorter (46 bytes):
</p>

<pre class="lang-python prettyprint-override"><code>[13,204,15,406,1357,248,37,468,57].__getitem__
</code></pre>

<p>0-indexed<br>
<a href="https://tio.run/nexus/python3#DcqxDoMgFAXQvV/x4gTJrREBsU3aH1FDHMC8QdoQNuO3o2c@8TPXSWn0nYGyMN0Apa1Db0ZoBzOMsG5pvd9C4RJ272v8ZWLiRHlNWxAv@X7Q7Z85FdEcJz2/dJxNe799LYIRBUsp6wU" rel="nofollow noreferrer" title="Python 3 – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1>Mathematica, 40 bytes</h1>

<pre><code>{24,135,26,157,2468,359,48,579,68}[[#]]&amp;
</code></pre>

<p>1-indexed. Just looks up the answer. Can someone do better in Mathematica?</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>16</s> 13 bytes</h1>

<pre><code>9Ḷ,d3ạ/S€=1T’
</code></pre>

<p><a href="https://tio.run/nexus/jelly#@2/5cMc2nRTjh7sW6gc/alpjaxjyqGHm/8PtQLb7//8GOgrGOgomAA" rel="nofollow noreferrer" title="Jelly – TIO Nexus">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>9Ḷ,d3ạ/S€=1T’  Main link. Argument: n (0, ..., 8)

9              Set the return value to 9.
 Ḷ             Unlength; yield [0, ..., 8].
  ,            Pair; yield [[0, ..., 8], n].
   d3          Divmod 3; yield [[[0, 0], ..., [2, 2]], [n:3, n%3]]].
     ạ/        Reduce by absolute difference, yielding
               [[|0 - n:3|, |0 - n%3|], ..., [[|2 - n:3|, |2 - n%3|]].
       S€      Sum each, yielding
               [|0 - n:3| + |0 - n%3|, ..., [|2 - n:3| + |2 - n%3|].
         =1    Compare the sums with 1.
           T   Truth; yield all 1-based indices of 1.
            ’  Decrement to yield all 0-based indices of 1.
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/113898/">113898</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




