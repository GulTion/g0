<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269104</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>044</td><td>APL Dyalog Classic</td><td>240110T045440Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269122#269122">nyxbird</a></td></tr>
<tr d-ix="1"><td>033</td><td>Charcoal</td><td>240110T005249Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269119#269119">Neil</a></td></tr>
<tr d-ix="2"><td>028</td><td>Haskell + hgl</td><td>240110T000231Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269116#269116">Wheat Wi</a></td></tr>
<tr d-ix="3"><td>122</td><td>JavaScript ES7</td><td>240109T194002Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269106#269106">Arnauld</a></td></tr>
<tr d-ix="4"><td>742</td><td>Python3</td><td>240109T204403Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269109#269109">Ajax1234</a></td></tr>
<tr d-ix="5"><td>088</td><td>R</td><td>240109T203024Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269108#269108">pajonk</a></td></tr>
<tr d-ix="6"><td>012</td><td>Jelly</td><td>240109T201214Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269107#269107">Jonathan</a></td></tr>
<tr d-ix="7"><td>016</td><td>Vyxal 3</td><td>240109T190135Z</td><td><a href="https://codegolf.stackexchange.com/questions/269104/perfect-an-array/269105#269105">math sca</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, 44 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{⌊/+/¨⍵∘≠¨{⍵/⍨{⊃∧⌿{⍺=⍴⍵}⌸⍵}¨⍵}{,⍳⍴⍨⍴⍵}(⍳⍴⍵)}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@/@lFPl762/qEVj3q3PuqY8ahzwaEV1UC2/qNeIN3V/Khj@aOe/UCRXbaPercAJWof9ewAUWAdtdU6j3o3gyVWQKU1YAJbNWv/uz1qm0BTG7ge9U0F2uGmYKhgpGAM55nCIFzEyFjBRMFcwQKhwcAAjs0wNSqY/gcA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>
<p>This is definitely golfable, so I'll try and shorten it and add an explanation tomorrow. As is, though, it's a (bad) port of the Vyxal answer.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 33 bytes</h1>
<pre><code>Ｉ⌊ＥΦＥＸ²Ｌθ⌕Ａ⮌⍘⊗ι²1⁼ΣιＬθΣＥι⌈⟦⁰⁻λ№θλ
</code></pre>
<p><a href="https://tio.run/##RU5BCoMwEPxK8LSBFKoFofTU2nqqIPUoHlINGlhjNYnt79OohS4LM8sOM1N3fKoHjs7lk1QGEq4NZFLJ3vaQ8RekEo2YVpoPb88iRu5CtaaDkVJGUqmaMyI8xCwmLeDCtSiM92rhOtgnigakl0WLNgiDBW6j5aih8AnL6@/mj@IXKxnJ@GdtUe49l8pqQEaSwfqWIyNIaUW3OTlXliEjsY85rHDcWLhuXFVuN@MX" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＥＸ²Ｌθ⌕Ａ⮌⍘⊗ι²1
</code></pre>
<p>Generate all subsets of <code>{1..l}</code>, where <code>l</code> is the length of the input array.</p>
<pre><code>Φ....⁼ΣιＬθ
</code></pre>
<p>Filter for those that sum to <code>l</code>.</p>
<pre><code>Ｉ⌊Ｅ...ΣＥι⌈⟦⁰⁻λ№θλ
</code></pre>
<p>Calculate the number of changes required for each subset and output the minimum.</p>
</div>
<div id="pu2" class="pu"><h1>Haskell + <a href="https://gitlab.com/wheatwizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 28 bytes</h1>
<pre><code>mMl&lt;df**&lt;fb(jn rl)&lt;&lt;dpS uq&lt;l
</code></pre>
<p>I didn't want to brute force this, so I didn't. Although brute forcing would probably be shorter.</p>
<h2>Explanation</h2>
<p>First we find all the strictly descending integer partitions of the length of the input.  We convert these to &quot;perfect lists&quot;. This gives us all the perfect lists with the same size as the input. Then we take use the set difference to remove the elements in the input from each perfect list, these represent the number of replacements that need to be done. Then we get the size of the smallest element and output that.</p>
<h2>Reflection</h2>
<p>This answer feels <em>painfully</em> long. There are a couple things here:</p>
<ul>
<li><code>dpS uq</code> is a bad way to get strictly descending integer partitions. It is 6 bytes long and slower than it needs to be. There should be a 3-byte version.</li>
<li>This isn't the first time I've wanted a function that zips and then concatenates, but I apparently haven't added it. It would be useful here.</li>
<li>There should be a shorter way to replicate every item in a list its own number of times (currently <code>fb(jn rl)</code>). I remember noticing that some obscure combination of functions did this, but I can't remember which. It's really bothering me.</li>
</ul>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES7), 122 bytes</h1>
<p>Brute force.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;eval(&quot;for(m=s=a.length,n=s**s;n--;)a.map(c=(x,i)=&gt;(c[v=n/s**i%s+1|0]=-~c[v],d+=v!=x,v),d=0).some(v=&gt;c[v]-v)|d&gt;m?m:m=d&quot;)
</code></pre>
<p><a href="https://tio.run/##fc7fa8IwEAfw9/0VN0FI9NKm1v1Aue4PkT6EJnUdTSJGgg/iv15TkMm6sXDcw92H@@ZLRRWaY3c4Cee1GVoaFFUmqp7NWn9klgKprDduf/pER2GxCFsnxJarzKoDa4idseNUsWYXyeVp383DsrjImsQ1zWrUS4rPdMbIUZPkWfDWsEjVuBSRX3RlP@zGkp7xofEu@N5kvd@zlu1kzTlMXp5D8TRxBcIKofyh/3IvCI@66@Tk1K1KhDeENcL7983kyl@5UiI82uuIk1v/m3uPHv833AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>Python3, 742 bytes</h1>
<p>Rather long, but non-brute force solution (for the sake of variety)</p>
<pre class="lang-py prettyprint-override"><code>from itertools import*
D=lambda d,n,K,U:{**{a:b for a in d if(b:=[j for j in d[a]if j not in K])},n:[*K,*U]}
def P(n,d,r,F):
 U=d.get(n,[])
 d={i:d[i]for i in d if i!=n}
 k=[[],[]]
 for i in d:
  if i&lt;n or len(d[i])!=i:k[i&gt;F]+=d[i]
 if len(k[1])&gt;=r:yield D(d,n,K:=k[1][:r],U),K;return
 for K in combinations(k[0]+k[1],r):
  if[]==k[1]or any(j in K for j in k[1]):yield D(d,n,K,U),K
def f(a):
 d,I={},0
 for i in a:d[i]=d.get(i,[])+[I];I+=1
 q=[(len(a),len(a),d,0)]
 M=-1
 while q:
  n,A,d,C=q.pop(0)
  if all(i==len(d[i])for i in d):M=min(M,C)if M!=-1 else C;continue
  if n==0:continue;
  if len(L:=d.get(n,[]))!=n:
   r,F=n-len(L),A-n
   for u,i in P(n,d,r,F):
    if M==-1 or C+len(i)&lt;M:q+=[(F,A-n,u,C+len(i))]
  q+=[(n-1,A,d,C)]
 return M
</code></pre>
<p><a href="https://tio.run/##lVLRbtowFH3PV1yeahODktIxZupKFRVSlUXaC0@WH0KTrC6JE0LQhBDfznwdGO00qUwWSjj33HPuPU69a18rM5rUzfGYN1UJus2atqqKDeiyrpq27z2JIimXaQIpMyxiC77v9/cJX0JeNZCANpCCzsmSC/nmsDeHyUTp3L6bqsX/kaIHZrjsR6y/UAcvzXL4QQxLWcPmlHuwEOnwZ9ZaSCrqQSr2mqdSK1TUZxfQPWEOHqyElMoSlQeXuhVxlHsDFisyQ7Cf9oTmK6kf5soXCHhIwupKhoo@iIbvdFak8ETcglwgLnmj2IKyaNpk7bYxnU@EPi9VudQmaXVlNlYjUD42sIZ2/lIJp4DhmB1xYUSXXJzpR0fn4wLJSYIqKXsW@wML3i2XuCxOEWmMyJfPavrsi9CDtZAEF0ooOz1SFlC7aCwGtvzrVRcZrHE8wx5tbSbWw7qqSUC7xJKiIFqIP4ldIqU8FqU2JGYzaolxzwpCVmwymE1fKtNqs806DSNEwM/QtMNQ8Dt/f6/2MgzOAfbShRk4AmWPA4MY2m6ZM/7wZYATiwV6W8rMxzZN72O@9u3mc@xnW3bGcXFwFTMIu30R6u4R4mPdaNOSnMh@mdTEvjO4CW6Gm7rQLbHdlHr/ooRwC6PPaV/gdD6n3o7gK9zB5ArvIIDzb/wfM1wzRQhjsJOM4Rs@QnuudJjYc2dPCKO/gjn@Bg" rel="nofollow noreferrer">Try it online!</a> (includes extra/longer test cases)</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 88 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(x,n=sum(x|1))min(combn(rep(1:n,n),n,\(r)`if`(all(names(t&lt;-table(r))==t),sum(r!=x),n)))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VY5LCsJADIb3niLiJoEUOm3VIo7ncNFFH7RQ6IzSTqELT-AV3FTBQ3kb-xgpwk9C8iV_8njW_auQ79YUTvg5R9ixlk2rsLsJIlVqzC4q1VjnVxQHzZpYc4Q1xWURY1JVqBOVN2iOjknSKh8ISWmIR496Lbthnois_73ADF2iDcgTiNVYCQaPwf_rbRkWWeJOxPMZ9gwBQ2j7_uziugxL2FkYTDCYFqx-h-aP-n7OXw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 12 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>JṗLċⱮ`ƑƇn⁸§Ṃ
</code></pre>
<p>A monadic Link that accepts a list of integers and yields the minimal number to alter to form a <em>perfect array</em>.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9/r4c7pPke6H21cl3Bs4rH2vEeNOw4tf7iz6f///9FGOgpAZKmjYAxGIG4sAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/9/r4c7pPke6H21cl3Bs4rH2vEeNOw4tf7iz6f/RSQ93ztA53J71qGGOgq2dwqOGuZqR//9HRxvE6nApRBvqKBjpKBiD2aY6CggEFjEy1lEw11Ew0VGwgKg2MNBRQBBmmNogOmMB" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<p>Constructs all lists of the same length as the input using an alphabet of <code>1</code> through to that length (with the elements in all possible orders). Filters these down to <em>perfect arrays</em>. Counts the differing entries of each with respect to the input (by summing the results of a vectorised not-equal). Returns the minimum.</p>
<pre><code>JṗLċⱮ`ƑƇn⁸§Ṃ - Link: list of integers, Array
J            - indices {Array} -&gt; [1..length(Array)]
  L          - length {Array}
 ṗ           - {Indices} Cartesian power {Length}
                 -&gt; all arrays of length length(Array) formed from 1..length(Array)
       Ƈ     - keep those for which:
      Ƒ      -   is invariant under?:
    Ɱ`       -     map across itself with:
   ċ         -       count occurrences
        n⁸   - {that} not-equal? (vectorises) {Array}
          §  - sums
           Ṃ - minimum
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3" rel="nofollow noreferrer">Vyxal 3</a>, 16 bytes</h1>
<pre><code>L:ɾẋΩᵛC₌}ƛ?ÞṅL}g
</code></pre>
<p>Simple bruteforce, probably can be golfed more.</p>
<p><a href="https://vyxal.github.io/latest.html#WyIiLCIiLCJMOsm+4bqLzqnhtZtD4oKMfcabP8Oe4bmFTH1nIiwiIiwiWzIzLDcsNCw4XSIsIjMuNC4xIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>L:ɾẋΩᵛC₌}ƛ?ÞṅL}g­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠⁪⁪⁠⁪⁪⁠⁪⁪⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠⁪⁪⁠⁪⁪⁠⁪⁪⁠⁪⁪⁠‎⁪⁡⁪⁠⁪⁤⁣⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁣⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁢⁪‏‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁤⁤⁪‏‏​⁡⁠⁡‌­
L:ɾẋ              # ‎⁡Nth cartesian power of range [1, length]
    Ω   }         # ‎⁢Filter by items where
     ᵛC₌          # ‎⁣Count of each item is item
         ƛ    }   # ‎⁤Map through list
          ?ÞṅL    # ‎⁢⁡Length of multiset difference between input and item
               g  # ‎⁢⁢Push minimum
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269104/">269104</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




