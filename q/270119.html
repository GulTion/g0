<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::270119</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>020</td><td>Haskell + hgl</td><td>240218T194702Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270142#270142">Wheat Wi</a></td></tr>
<tr d-ix="1"><td>037</td><td>APL+WIN</td><td>240217T214752Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270127#270127">Graham</a></td></tr>
<tr d-ix="2"><td>016</td><td>Charcoal</td><td>240217T184741Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270123#270123">Neil</a></td></tr>
<tr d-ix="3"><td>014</td><td>Uiua 0.9.0</td><td>240217T170541Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270121#270121">Tbw</a></td></tr>
<tr d-ix="4"><td>021</td><td>J</td><td>240217T225346Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270129#270129">Jonah</a></td></tr>
<tr d-ix="5"><td>045</td><td>JavaScript V8</td><td>240217T170413Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270120#270120">Arnauld</a></td></tr>
<tr d-ix="6"><td>018</td><td>APLDyalog Unicode</td><td>240217T185113Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270124#270124">Mukundan</a></td></tr>
<tr d-ix="7"><td>006</td><td>Jelly</td><td>240217T183002Z</td><td><a href="https://codegolf.stackexchange.com/questions/270119/enumerate-the-phat-fingered-lights-out-numbers/270122#270122">Jonathan</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a> + <a href="https://gitlab.com/wheatwizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 20 bytes</h1>
<pre><code>fl(qb sm&lt;%uak&lt;bs2)nn
</code></pre>
<p><a href="https://staging.ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYttabZpORqFSQrFuTaqpYnZNknFRpp5eRDJ9bmJmXm2BUUqJdkKxgYqaRDRBQsgNAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<p>We convert the list to base 2, split it into digits in an even position and digits in an odd position, then check that these two lists have the same sum.</p>
<p>Since <code>0</code> and <code>3</code> in base 4 are <code>00</code> and <code>11</code> in base 2, each of these contributes the same amount to both lists and have no effect on the outcome. <code>1</code> and <code>2</code> in base 4 are <code>01</code> and <code>10</code> in base 2, so each contributes 1 to one of sums of the two halves.  Thus checking if the sums are the same as checking if there are the same number of 1s as 2s in the base 4 representation.</p>
<h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a>, 20 bytes</h1>
<pre><code>fl(eq0&lt;rF(-)0&lt;bs2)nn
</code></pre>
<p><a href="https://staging.ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYttabZpORqphQY2RW4aupoGNknFRpp5eRDJ9bmJmXm2BUUqJdkKxgYqaRDRBQsgNAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<p>This uses the more complicated alternate sum approach found in <a href="https://codegolf.stackexchange.com/a/270121/56656">this answer</a> for the same byte count.</p>
<h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a>, 21 bytes</h1>
<pre><code>fl((ce1*=*ce2)&lt;bs4)nn
</code></pre>
<p><a href="https://staging.ato.pxeger.com/run?1=LYoxDoJAEEV7TjEFBZCQCFoY4haUVlJ4gRVmw4ZlFncHL2NDYywtPYu3kbhWP--_d3_20g9ozPJBPU7WMVxnabTS2EHj0MwdRn_RRHkO9fkE2gNZBkvAPYKRjJ7hhs5rS1GLhWgRkqKqjsTpyuWPy8CPmVW-fyuhTJKsbSaytUgPF79LiYJ9jVKTmFzMA2w3sQrvsoT9Ag" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<p>This uses the naive approach, converting to base 4 and counting the number of 1 and 2 digits.</p>
<h2>Reflection</h2>
<p>The thing to note is that hgl isn't really well suited for arithmetic heavy challenges (yet).</p>
<ul>
<li>There should be a function that combines <code>fl</code> and <code>nn</code> to get natural numbers satisfying a property.</li>
<li><s>I keep making variants of <code>l2</code>, but I feel like <code>l2 eq</code> would be a good shortcut to have.</s> The precedence on <code>(*=*)</code> is incompatible with <code>(&lt;)</code>. I should change it to be anything else.</li>
<li><code>bs</code> should be made to handle negative bases as well.  I do believe there is a way to do this question in terms of negative bases, although I haven't really investigated since I can't do negative bases in hgl.</li>
<li><code>rF(-)0</code>, or &quot;alternating sum&quot;, could probably be added.</li>
</ul>
</div>
<div id="pu1" class="pu"><h1>APL+WIN, <s>29</s> 37 bytes</h1>
<p>+8 bytes as it appears my original answer of outputting the series up to a given value was outside the rules. Prompts for number of values to output. Index origin = 0</p>
<pre><code>n↑(0=-⌿((⌈2⍟1⌈n*2)⍴2)⊤m)/m←⍳1+(n←⎕)*2
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlwPWooz3tf96jtokaBra6j3r2a2g86ukwetQ73xBI52kZaT7q3QIkupbkaurnAnU86t1sqK2RB2L1TdXUMvoPNIDrfxqXoQEXFwA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
<p>Original answer.</p>
<p>Prompts for an integer and outputs the sequence up to that value. Index origin = 0</p>
<pre><code>(0=-⌿((⌈2⍟1⌈n)⍴2)⊤m)/m←⍳1+n←⎕
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>23</s> <s>19</s> 16 bytes</h1>
<pre><code>ＮθＩ…Φ×θθ¬↨↨ι²±¹θ
</code></pre>
<p><a href="https://tio.run/##S85ILErOT8z5/98zr6C0xK80Nym1SKNQ05oroCgzr0TDObEYSFQm56Q6Z@QXaLhl5pQA5UMyc1OLNQp1FAo1dRT88ks0nBKLUyFEpo6CEUgwNT2xJFXDUBMIQMo0Na3//zcxMPivW5YDAA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Outputs the first <code>n</code> terms. Explanation: Even more wildly overestimates an upper bound for <code>A039004(n)</code>, then uses @Tbw's theorem to find <code>n</code> terms.</p>
<pre><code>Ｎθ                  Input `n` as an integer
      θ             Input `n`
     ×              Multiplied by
       θ            Input `n`
    Φ               Filter over implicit range where
           ι        Current value
          ↨         Converted to base
            ²       Literal integer `2`
         ↨          Interpreted as base
              ¹     Literal integer `1`
             ±      Negated
        ¬           Is zero
   …                Truncated to length
               θ    Input `n`
  Ｉ                 Cast to string
                    Implicitly print
</code></pre>
<p>Edit: Removed <code>⁺³Ｌ</code> saving 3 bytes to even more wildly overestimate <code>A039004(n)</code> thanks to @Tbw.</p>
<p>Outputting all of the pflons less than <code>n</code> would of course be shorter:</p>
<pre><code>ＩΦＮ¬↨↨ι²±¹
</code></pre>
<p><a href="https://tio.run/##S85ILErOT8z5/z@gKDOvRMM5sbhEwy0zpyS1SMMzr6C0xK80NwnI1tRR8Msv0XBKLE6FEJk6CkYgwdT0xJJUDUNNMLD@/9/Q1MDgv25ZDgA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>  Ｎ         Input `n` as a number
 Φ          Filter over implicit range where
      ι     Current value
     ↨      Converted to base
       ²    Literal integer `2`
    ↨       Interpreted as base
         ¹  Literal integer `1`
        ±   Negated
   ¬        Is zero
Ｉ           Cast to string
            Implicitly print
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.uiua.org/" rel="noreferrer">Uiua 0.9.0</a>, 14 bytes <sup><a href="http://tinyurl.com/Uiua-SBCS-Feb-17" rel="noreferrer" title="SBCS for Uiua 0.9.0">SBCS (updated!)</a></sup></h1>
<pre><code>↙:▽=0/-⍉⋯.⇡×..
</code></pre>
<p><a href="https://uiua.org/pad?src=0_9_0__RiDihpAg4oaZOuKWvT0wLy3ijYnii68u4oeh4oG_Mi4KCkYgMTAwCg==" rel="noreferrer">Try on Uiua Pad!</a> Takes <span class="math-container">\$n\$</span> as input and outputs the first <span class="math-container">\$n\$</span> terms. Does essentially the same thing as my answer below and <em>@Mukundan314</em>'s APL answer.</p>
<h2>19 bytes <sup><a href="http://tinyurl.com/Uiua-SBCS-Feb-17" rel="noreferrer" title="SBCS for Uiua 0.9.0">SBCS</a></sup></h2>
<pre><code>⍥(+1(&amp;p.|)≠0/-⋯.)∞0
</code></pre>
<p><a href="https://uiua.org/pad?src=0_9_0__4o2lKCsxKCZwLnwp4omgMC8t4ouvLiniiJ4wCg==" rel="noreferrer">Try it!</a>
Takes no input and outputs the sequence (change the <code>∞</code> to some small number like <code>10 </code> if you want to see the beginning)</p>
<h2>Old Explanation</h2>
<pre><code>0 # push 0 to stack
⍥(       # repeat
  ⋯.     # to binary
  /-     # alternating difference
  ≠0     # not zero?
  (&amp;p.|) # else print number
  +1     # add 1
)∞       # infinitely many times
</code></pre>
<h2>Theorem</h2>
<p><span class="math-container">\$n\$</span> is a pflon if and only if in the binary representation of <span class="math-container">\$n\$</span>, the number of 1s in even positions of is equal to the number of 1s in odd positions.</p>
<h3>Proof</h3>
<p>(<span class="math-container">\$\implies\$</span>) Every phatflip clearly maintains whether the odd-even condition holds, as it either adds a 1 to both counts or removes a 1 from both counts. The condition holds for 0. Since any pflon can be obtained from phatflips starting at 0 (just reversing the sequence to get lights out), the condition holds for every pflon.</p>
<p>(<span class="math-container">\$\impliedby\$</span>) We prove by strong induction on <span class="math-container">\$n\$</span>. The base case 0 is trivial.</p>
<p>Let <span class="math-container">\$n&gt;0\$</span>. Suppose all integers <span class="math-container">\$k\$</span> with <span class="math-container">\$0 \leq k &lt; n\$</span> for which the binary condition holds are pflons. Then suppose the binary condition holds for <span class="math-container">\$n\$</span>.</p>
<p><span class="math-container">\$n\$</span> must have at least a 1 in both even and odd position, so it must have a 1 in even position and a 1 in odd position separated by zero or more 0s. Since their positions have opposite parity, there must be an even number of 0s between them. So, we can flip all those 0s into 1s, then flip all those and the two 1s back into zeros. All these flips maintain the binary condition, as shown above, and the result <span class="math-container">\$k\$</span> is less than <span class="math-container">\$n\$</span> as we just switched two 1s to 0s. Therefore, <span class="math-container">\$k\$</span> is a pflon, and is accessible from <span class="math-container">\$n\$</span> by phatflips, so <span class="math-container">\$n\$</span> is a pflon.</p>
</div>
<div id="pu4" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, <s>23</s> 21 bytes</h1>
<pre><code>{.(#~0=-/&quot;1@#:)@i.@*:
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/q/U0lOsMbHX1lQwdlK00HTL1HLSs/mtypSZn5CukKRgZ/AcA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p><em>Uses Tbw's observation and is basically a port of Mukundan314's APL answer</em></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://v8.dev/" rel="nofollow noreferrer">JavaScript (V8)</a>, 45 bytes</h1>
<p>A full program that prints the sequence indefinitely.</p>
<p>This relies on arithmetic underflow to stop the recursion, making it slower than it should (<a href="https://tio.run/##y0osSyxOLsosKNEts/j/Py2/SCPPVtfQOs02z9YuT00tT9VIN00jz87OUNNaM01DWztPs6amoCgzr0QjT/P/fwA" rel="nofollow noreferrer">+1 byte</a> for a faster version).</p>

<pre class="lang-javascript prettyprint-override"><code>for(n=-1;f=n=&gt;n&amp;&amp;n%2-f(n/2);)f(++n)||print(n)
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNEts/j/Py2/SCPPVtfQOs02z9YuT00tT9VIN00jT99I01ozTUNbO0@zpqagKDOvRCNP8/9/AA" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>18 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<p>Requires Index Origin 0 (<code>⎕­⁡​‎‎⁪⁡⁪⁠⁪⁤⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁢⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁤⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁣⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁤⁡⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁤⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁢⁢​‎⁪⁪⁠‎⁪⁡⁪⁠⁪⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁣⁪‏‏​⁡⁠⁡‌⁢⁤​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏‏​⁡⁠⁡‌­IO←0</code>)</p>
<pre><code>A↑⍸0=-⌿2⊥⍣¯1⍳×⍨A←⎕
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=e9Q31dP/UdsEAwA&amp;c=ASYA2f9B4oaR4o24MD0t4oy/MuKKpeKNo8KvMeKNs8OX4o2oQeKGkOKOlQ&amp;f=AwA&amp;i=S@MyNDAAAA&amp;r=tio&amp;l=apl-dyalog&amp;m=tradfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>A full program which outputs the first <code>n</code> phat-fingered-lights-out numbers.</p>
<pre><code>A↑⍸0=-⌿2⊥⍣¯1⍳×⍨A←⎕­⁡​‎‎⁪⁡⁪⁠⁪⁤⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁢⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁤⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁣⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁤⁡⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁤⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁢⁢​‎⁪⁪⁠‎⁪⁡⁪⁠⁪⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁣⁪‏‏​⁡⁠⁡‌⁢⁤​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏‏​⁡⁠⁡‌­
               A←⎕  # ‎⁡A = input
             ×⍨     # ‎⁢square
            ⍳       # range [0, 1, ..., arg - 1]
       2⊥⍣¯1        # ‎⁤to base 2
     -⌿             # ‎⁢⁡alternating difference
   0=               # ‎⁢⁢equals zero
  ⍸                 # ‎⁢⁣indices of true
A↑                  # ‎⁢⁤take first A elements
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 6 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Bḅ-¬µ#
</code></pre>
<p>A full program that accepts a positive integer, <code>n</code>, on stdin and prints the first <code>n</code> phat-fingered-lights-out numbers.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9/p4Y5W3UNrDm1V/v/f0MDAAAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<p>Every phat-flip applies to an adjacent pair of bits, so if the number of odd-positioned ons is equal to the number of even-position ons then after flipping as many on-pairs as possible we can bring any remaining separated ons together by flipping pairs of offs and then flip remaining pairs of ons out of existence. A binary number with this property, is zero when converted from base <span class="math-container">\$-1\$</span> since, counting from the least significant bit as position <span class="math-container">\$1\$</span>, odd-position ons contribute <span class="math-container">\$1\$</span> while even-position ons contribute <span class="math-container">\$-1\$</span> (and all offs contribute <span class="math-container">\$0\$</span>).</p>
<pre><code>Bḅ-¬µ# - Main Link: no arguments
    µ# - count up from k=0, and yield the first {stdin} integers for which:
B      -   convert to binary
 ḅ-    -   convert from base -1
   ¬   -   logical NOT
       - implicit print
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/270119/">270119</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




