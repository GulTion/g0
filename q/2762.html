<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::2762</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>037</td><td>Vyxal j</td><td>240525T171426Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/273311#273311">pacman25</a></td></tr>
<tr d-ix="1"><td>nan</td><td>Perl 5</td><td>240524T224602Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/273303#273303">Xcali</a></td></tr>
<tr d-ix="2"><td>156</td><td>AWK</td><td>240524T194313Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/273298#273298">C K</a></td></tr>
<tr d-ix="3"><td>nan</td><td>Mathematica</td><td>140112T203050Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/18324#18324">Chris De</a></td></tr>
<tr d-ix="4"><td>105</td><td>Perl 6 n flag</td><td>190322T031622Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/182014#182014">Jo King</a></td></tr>
<tr d-ix="5"><td>375</td><td>Rust</td><td>190322T022400Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/182012#182012">don brig</a></td></tr>
<tr d-ix="6"><td>160</td><td>PHP</td><td>190321T171607Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/181988#181988">640KB</a></td></tr>
<tr d-ix="7"><td>122</td><td>Ruby 1.9</td><td>110607T104013Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2767#2767">Ventero</a></td></tr>
<tr d-ix="8"><td>104</td><td>K</td><td>121017T112001Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/8736#8736">tmartin</a></td></tr>
<tr d-ix="9"><td>179</td><td>Ruby</td><td>110702T200953Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/3058#3058">Joaquim </a></td></tr>
<tr d-ix="10"><td>152</td><td>GAWK</td><td>110623T154017Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2971#2971">Dan Andr</a></td></tr>
<tr d-ix="11"><td>276</td><td>Scala</td><td>110608T124523Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2789#2789">Lalith</a></td></tr>
<tr d-ix="12"><td>126</td><td>Perl</td><td>110607T052333Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2764#2764">swilliam</a></td></tr>
<tr d-ix="13"><td>nan</td><td>Haskell</td><td>110609T165451Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2807#2807">hammar</a></td></tr>
<tr d-ix="14"><td>nan</td><td>JavaScript</td><td>110610T084142Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2816#2816">Casey Ch</a></td></tr>
<tr d-ix="15"><td>225</td><td>CoffeeScript</td><td>110616T114722Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2870#2870">Jonas El</a></td></tr>
<tr d-ix="16"><td>nan</td><td>PHP</td><td>110614T205915Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2859#2859">rintaun</a></td></tr>
<tr d-ix="17"><td>nan</td><td></td><td>110614T173846Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2858#2858">Aman Zee</a></td></tr>
<tr d-ix="18"><td>194</td><td>Scala 2.9</td><td>110608T180504Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2792#2792">Gareth</a></td></tr>
<tr d-ix="19"><td>308</td><td>><></td><td>110610T170148Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2819#2819">swilliam</a></td></tr>
<tr d-ix="20"><td>125</td><td>PowerShell</td><td>110610T092939Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2817#2817">Joey</a></td></tr>
<tr d-ix="21"><td>074</td><td>Golfscript</td><td>110610T100121Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2818#2818">Ventero</a></td></tr>
<tr d-ix="22"><td>256</td><td>Clojure</td><td>110608T140122Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2791#2791">kotarak</a></td></tr>
<tr d-ix="23"><td>141</td><td>Python</td><td>110607T202510Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2770#2770">Martin U</a></td></tr>
<tr d-ix="24"><td>260</td><td>JavaScript</td><td>110607T091246Z</td><td><a href="https://codegolf.stackexchange.com/questions/2762/code-golf-6174-kaprekars-mythical-constant/2766#2766">pimvdb</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a> <code>j</code>, 296 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 37 bytes</h1>
<pre><code>λtSsṘ⌊Ḃ~εWvS4∆Z‛-=Y;İ⁽tεvṄ₅`Itḟ¨₌ǎ: %.`%J
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJBaj0iLCIiLCLOu3RTc+G5mOKMiuG4gn7OtVd2UzTiiIZa4oCbLT1ZO8Sw4oG9dM61duG5hOKChWBJdOG4n8Ko4oKMx446ICUuYCVKIiwiIiwiWzEyMTFdXG5bNjE3NF1cblsyNjA3XSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Bitstring:</p>
<pre><code>00000011100011110100101010111100101011001100111001001111010100010110111100001101011110110100010101111111001110011011010001010010011111100001101011011001001000011111110000001100101001110111001000000010011010010111000111010101110111001001000111010010011000111101011111011011000101000101001111110100
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 105 + 1 (<code>-n</code>) = 106 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$c=reverse$d=join'',sort/./g;$t+=say&quot;$c - $d = &quot;,$_=sprintf'%04d',$c-$d;/6174/||redo;say&quot;Iterations: $t.&quot;
</code></pre>
<p><a href="https://tio.run/##HctdCgIhFEDhrYjc8KHxZ2CmgcQF9NAaYlALI1SuEgSz9m5Mr4fv1IivmQi8w/iO2CIE9ywpCzG0gl0r/bDQj66tHw6eSQaBOcYHuLlWMeV@FwczBTGAlxCsPo3LpLcNYyh2fy494tpTye3MoCtOtItvqf9G8jorMxqS@Qc" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, 156 bytes</h1>
<pre><code>{x=$1;do{j++;split(x,a,&quot;&quot;);asort(a);x=a[4]a[3]a[2]a[1];y=a[1]a[2]a[3]a[4];z=x-y;if(z&lt;1e3)z=0z;print x&quot; - &quot;y&quot; = &quot;(x=z)}while(x!=6174)print&quot;Iterations: &quot;j&quot;.&quot;}
</code></pre>
<p><a href="https://tio.run/##JYpBCoMwEEWvkg5dJKilUWmh0zlAzyAuBmpprKhowBjx7Km2i8fnfR5PnxAWR0eNz26powjHvjFWuphjAIU8doOVrNARF3nJRbaRbugSZ9rnr/udl@jJJTOal/R3XWXK09ljP5jWCgciETCDIAHSkVfr9DZNJd2BLvqaq18FD1sNbE3XjjcBNZxgDUHrVH8B" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1>Mathematica, <del>314</del> 291 characters</h1>

<p>This is the program, kaprekar.m :-</p>

<pre><code>SetOptions[$Output,FormatType-&gt;OutputForm];
x=$ScriptCommandLine[[2]];
f[x_]:=(a=Characters@x;
b=Sort@ToExpression@a;
c=Sort[FromDigits/@{#,Reverse@#}&amp;@b];
{c,{b,a}}=IntegerString[{#2-#&amp;@@c,c},10,4];
Print[a," - ",b," = ",c];c)
x=f@x;
e=NestWhileList[f,x,#!="6174"&amp;];
Print["Iterations: ",N@Length@e]
</code></pre>

<p>Setting the path prior to running :-</p>

<pre><code>$ PATH=${PATH}:/Applications/Mathematica.app/Contents/MacOS ; export PATH
</code></pre>

<p>Running the program :-</p>

<pre><code>$ MathematicaScript -script kaprekar.m 2607
7620 - 0267 = 7353
7533 - 3357 = 4176
7641 - 1467 = 6174
Iterations: 3.
$ MathematicaScript -script kaprekar.m 1211
2111 - 1112 = 0999
9990 - 0999 = 8991
9981 - 1899 = 8082
8820 - 0288 = 8532
8532 - 2358 = 6174
Iterations: 5.
$ MathematicaScript -script kaprekar.m 6174
7641 - 1467 = 6174
Iterations: 1.
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a> -n flag, 105 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>say "Iterations: "~+.&amp;{{{say $!=.flip~" - $_"," = ",($/=$!.EVAL.fmt("%04d"));$/}([~] .comb.sort)}...6174}
</code></pre>

<p><a href="https://tio.run/##K0gtyjH7/784sVJBybMktSixJDM/r9hKQalOW0@turoaJKGiaKuXlpNZUKekoKugEq@ko6Rgq6Cko6Gib6uiqOca5uijl5ZboqGkamCSoqSpaa2iX6sRXReroJecn5ukV5xfVKJZq6enZ2ZoblL7/7@RmYE5l6GRoSEXSOBffgHYxv@6eQA" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>

<p>I finally got to use my <code>{}...*</code> trick, since we need to have at least one iteration for 6174. I'm not sure why I need the extra wrapping <code>.&amp;{  }</code> around the sequence though, which kinda sucks.</p>

<h3>Explanation:</h3>

<pre class="lang-perl6 prettyprint-override"><code>    .&amp;{                         } # Call a function on the input
       {                }...6174  # Create a sequence that goes until 6174
        {           }([~] .comb.sort) # Get the sorted digits of the number
         say $!=.flip~" - $_"," = "~($/=$!.EVAL.fmt("%04d"))  # Print the iteration
                        ;$/  # Return the result
say "Iterations: "~+.&amp;{      }     # Print the number of iterations
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Rust - 375 bytes</h1>
<pre><code>use std::io::{self,BufRead};fn main() {let mut x=io::stdin().lock().lines().next().unwrap().unwrap().parse::&lt;i16&gt;().unwrap();let mut n=0;println!(&quot;Iterations: {}.&quot;,loop {let mut v=[x/1000%10,x/100%10,x/10%10,x%10];v.sort();let j=v.iter().fold(0,|a,i|a*10+i);let k=v.iter().rev().fold(0,|a,i|a*10+i);x=k-j;n+=1;println!(&quot;{:04} - {:04} = {:04}&quot;,k,j,x);if x==6174{break n};});}
</code></pre>
<p>I present this as a possible &quot;upper bound&quot;, I challenge anyone to find a language where a reasonable implementation of this is longer - as in there is nothing superfluous, but also nothing even remotely obvious that would shrink it significantly. The thing about Rust is that it takes about 120 characters just to read from stdin and parse into an integer. &quot;Oh but then just use the string representation&quot;... but im 99% confident that would be even longer</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 160 bytes</h1>

<pre class="lang-php prettyprint-override"><code>function k($n,$d=1){$o=str_split($n);sort($o);echo$q=strrev($r=join($o))," - $r = ",$n=str_pad($q-$r,4,0,0),"
",$n==6174?"Iterations: $d.":k($n,++$d);}k($argn);
</code></pre>

<p><a href="https://tio.run/##HY49D8IgEIZ3fwUhN0CkpjVNmxRJF5cuLrqbpvRLDVBAF@Nvr9DtzT3v3T1mMuupNpNB0NpRIYGGsfeOXG/n5kL5OrxV52et0JOAYiBFRr@ghfP27sxr9mFKudM2BE15300alkht/yFgxUPPKhLKMEoQ2HAfM1DbvmklgSUBy3KWsjRUdhsTRVbmNW58b9v42lUI5AFXm8F@D5LyX8hRNwiuxyIt/w" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>

<p>Complete program, input is <code>STDIN</code>, run with <code>php -nF</code>.</p>

<p><strong>Output</strong></p>

<pre><code>&gt; echo 2607|php -nF kap.php
7620 - 0267 = 7353
7533 - 3357 = 4176
7641 - 1467 = 6174
Iterations: 3.

&gt; echo 1211|php -nF kap.php
2111 - 1112 = 0999
9990 - 0999 = 8991
9981 - 1899 = 8082
8820 - 0288 = 8532
8532 - 2358 = 6174
Iterations: 5.

&gt; echo 6174|php -nF kap.php
7641 - 1467 = 6174
Iterations: 1.
</code></pre>
</div>
<div id="pu7" class="pu"><h2>Ruby 1.9, 122 characters</h2>
<pre><code>puts&quot;Iterations: #{(1..7).find{s=$_.chars.sort*&quot;&quot;;puts [r=s.reverse,?-,s,?=,$_=&quot;%04d&quot;%(r.to_i-s.to_i)]*&quot; &quot;;~/6174/}}.&quot;
</code></pre>
<p>Example invocation:</p>
<pre><code>$ echo 1211 | ruby -ln kaprekar.rb
</code></pre>
<p>I've counted the <code>-ln</code> flag as 4 characters (difference between the normal invocation <code>ruby kaprekar.rb</code> and <code>ruby -ln kaprekar.rb</code>).</p>
</div>
<div id="pu8" class="pu"><h1>K, 104</h1>

<pre><code>{b::();{b,:,k," = ",r:"0"^(-:4)$$. k:(x@&gt;x)," - ",x@&lt;x;r}\[$x];-1'c,,"Iterations: ",$#c:$[1=#b;b;-1_b];}
</code></pre>

<p>Test cases</p>

<pre><code>k){b::();{b,:,k," = ",r:"0"^(-:4)$$. k:(x@&gt;x)," - ",x@&lt;x;r}\[$x];-1'c,,"Iterations: ",$#c:$[1=#b;b;-1_b];}'2607 1211 6174;
7620 - 0267 = 7353
7533 - 3357 = 4176
7641 - 1467 = 6174
Iterations: 3
2111 - 1112 = 0999
9990 - 0999 = 8991
9981 - 1899 = 8082
8820 - 0288 = 8532
8532 - 2358 = 6174
Iterations: 5
7641 - 1467 = 6174
Iterations: 1
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Ruby, 179 chars but posting anyway</h2>

<pre><code>s=gets.chomp
n=0
begin
  s=s.to_s.chars.sort.reduce{|s,c|s+c}.rjust(4,'0')
  a=s.reverse
  puts"#{a} - #{s} = #{'%04d'%(s=a.to_i-s.to_i)}"
  n+=1
end while s!=6174
puts"Iterations: #{n}."
</code></pre>
</div>
<div id="pu10" class="pu"><h2>GAWK - 152 chars</h2>

<p>This is a GNU awk version. It may not work with other non-gnu versions. </p>

<pre><code>{for(z=$1;z-6174+!c;++k){split(z,a,"");asort(a);for(b=c=i=0;i&lt;4;z=c-b){c+=a[i+1]*10^i;b=b*10+a[++i]}printf c" - %.4d = "z"\n",b}print"Iterations: "k"."}

$ awk -f k.awk &lt;&lt;&lt; 9992
2999 - 9992 = 6993
3699 - 9963 = 6264
2466 - 6642 = 4176
1467 - 7641 = 6174
Iterations: 4
</code></pre>
</div>
<div id="pu11" class="pu"><p><strong>Scala 276</strong></p>

<pre><code>object o{var i=0;def a(v:String){val c=v.toList.sortWith(_&gt;_).mkString;val b=c.reverse;val d=c.toInt-b.toInt;val e="0"*(4-(d+"").length)+d;val p=c+" - "+b+" = "+e;if(d!=6174){println(p);i=i+1;a(e)}else{println(p+"\nIterations: "+(i+1)+".")}};def main(s:Array[String])=a(s(0))}
</code></pre>

<p><strong>Scala 283</strong></p>

<pre><code>object o{var i=0;def a(v:String){val c=v.toList.sortWith(_&gt;_).mkString;val b=c.reverse;val d=c.toInt-b.toInt;val e="0"*(4-(d+"").length)+d;val p=c+" - "+b+" = "+e;if(d!=6174){println(p);i=i+1;a(e)}else{println(p);println("Iterations: "+(i+1)+".")}};def main(s:Array[String])=a(s(0))}
</code></pre>

<p>diff: </p>

<pre><code>else{println(p);println("Iterations: "+(i+1)+".")}};
// to
else{println(p+"\nIterations: "+(i+1)+".")}};
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Perl - <strike>147</strike> <strike>143</strike> <strike>134</strike> <strike>130</strike> <strike>129</strike> <strike>126</strike> <strike>129</strike> <strike>128</strike> 126</h1>
<pre><code>for($_=&lt;&gt;;$_-6174+!$c;$c++){$_=reverse$d=join'',sort split//,&quot;$_&quot;
|$|x4;printf&quot;$_ - $d = %04d\n&quot;,$_-=$d}die&quot;Iterations: $c.\n&quot;
</code></pre>
<p>EDIT: Now complies with 6174 case, at the cost of a few chars... run with <code>echo -n &lt;number&gt; | perl kaprekar.pl</code></p>
<p>EDIT: Finally back to where I was before :D</p>
</div>
<div id="pu13" class="pu"><h1>Haskell, <del>197</del> <del>192</del> <del>182</del> 181 characters</h1>

<pre><code>import List
p=putStrLn.unwords
"6174"%k|k&gt;0=p["Iterations:",shows k"."]
n%k=p[b,"-",a,"=",c]&gt;&gt;c%(k+1)where a=sort n;b=reverse a;c=take 4$shows(read b-read a)"0"
main=getLine&gt;&gt;=(%0)
</code></pre>
</div>
<div id="pu14" class="pu"><h2>JavaScript, <del>189</del> <del>182</del> 165 chars</h2>

<p>Credit to DocMax:</p>

<pre><code>for(n=prompt(i=o=e='');!i--|n-6174;o+=n+' - '+a+' = '+(n=(p=n-a+e)[3]?p:0+p)+'\n')
  b=n.split(e).sort(),n=b.reverse(a=b.join(e)).join(e);
alert(o+"Iterations: "+~i+'.')
</code></pre>

<p>Original:</p>

<pre><code>for(n=prompt(i=o=e='');n-6174;o+=(i++?n+"\n":e)+(n=(a=n.split(e).sort().join(e)).split(e).reverse().join(e))+' - '+a+' = ',n=n-a+e)while(!n[3])n=0+n
alert(o+n+"\nIterations: "+i+'.')
</code></pre>

<p>Ungolfed:</p>

<pre><code>var i = 0;
var n = prompt();
var out = '';
while (n != 6174) {
    while ((n=''+n).length&lt;4) n='0'+n // pad number
    if(i)out+=n+"\n"

    a = n.split('').sort().join('');
    n = a.split('').reverse().join('');

    out += n + ' - ' + a + ' = '
    n-=a
    i++;
}
console.log(out + "6174\nIterations: " + i + '.');
</code></pre>
</div>
<div id="pu15" class="pu"><h2>CoffeeScript, <strike>233</strike> 225 characters</h2>

<pre><code>o=e='';i=0;n=prompt()
while n!=6174
  n=e+n;q=(n='0'+n if !n[3]) for x in [0..2];n?=q;o+=n+"\n" if i;a=n.split(e).sort().join(e);n=a.split(e).reverse().join(e);o+=n+' - '+a+' = ';n-=a;i++
alert(o+"6174\nIterations: "+i+'.')
</code></pre>

<p>Try it <a href="http://alicebobandmallory.com/kaprekars_constant_golf.html" rel="nofollow">here</a> or with instructions <a href="http://alicebobandmallory.com/kaprekars_constant.html" rel="nofollow">here</a>.</p>
</div>
<div id="pu16" class="pu"><h1>PHP, 215 <del>259</del> <del>276</del> characters</h1>

<pre><code>&lt;?php echo"&gt;";$n=str_split(str_pad(trim(fgets(STDIN)),4,0,0));for($k=0,$z=0;$k-6174;$z++){sort($n);$a=implode($n);$b=strrev($a);$k=str_pad($b-$a,4,0,0);echo"$b - $a = $k\n";$n=str_split($k);}echo"Iterations: $z\n";
</code></pre>

<p>Ungolfed:</p>

<pre><code>&lt;?php
echo "&gt;";
$n = str_split(str_pad(trim(fgets(STDIN)),4,0,0));
for($k=0, $z=0; $k-6174; $z++) {
    sort($n);
    $a = implode($n);
    $b = strrev($a);
    $k = str_pad($b-$a,4,0,0);
    echo "$b - $a = $k\n";
    $n = str_split($k);
}
echo "Iterations: $z\n";
</code></pre>
</div>
<div id="pu17" class="pu"><p><strong>PERL</strong>    </p>

<pre><code>chomp($n=&lt;STDIN&gt;);
    do{
       $t++;
       $desc=join('',reverse sort split(//,$n));
       $asc=join('', sort split(//,$n));
       $n=($desc - $asc);
       for($i=4;$i&gt;length $n;$i--){
          $n="0".$n;
       }
       print $desc." - ".$asc." = ".$n."\n";
       $n="6174" if $n eq "0000";
    }while($n ne "6174");
    print "Iterations: $t.\n";
</code></pre>
</div>
<div id="pu18" class="pu"><h2>Scala 2.9, 194 characters</h2>

<pre><code>object K extends App{var(c,s)=(0,args(0));do{var d=s.sorted;var e=d.reverse.toInt-d.toInt;s="%04d".format(e);println(d.reverse+" - "+d+" = "+s);c+=1}while(s!="6174");print("Iterations: "+c+".")}
</code></pre>

<p>Makes use of the App trait from Scala 2.9.</p>

<p><strong>Edit:</strong> gives correct output for initial input of 6174.</p>
</div>
<div id="pu19" class="pu"><h1>&gt;&lt;&gt; - <strike>268</strike> 308</h1>
<pre><code>&lt;/&amp;4pff1
v&gt;i86*-:n&amp;1-:&amp;?!
&gt;ao&amp;        v
&lt;v&amp;0pff+1gff
 &gt;&amp;1+:4=   ?v&amp;:a%:}-a,
 v&amp;8[4r::0}~&lt;
 &gt;&amp;1-:?!v&amp;:@@:@(?$}&amp;:&amp;3%1=?}
 v      &gt;~:}}:}@:}$:}
 \:n}:n}:n}:n}' - 'ooo:n}:n}:n}:n}' = 'ooo
 \a*+a*+a*+}a*+a*+a*+-:0&amp;\
 v?       =4&amp;:+1&amp;,a-}:%a:&lt;
/\&amp;~~rnnnnao:29777****=   ?v
voooooooooooo&quot;Iterations: &quot;/
\ffgna'.'oo;
</code></pre>
<p>Not much of a contender for golf, but it was fun to write. :)</p>
<p><strike>Run with <code>./fish.py kaprekar.fish -v &lt;number&gt;</code></strike>
<br />EDIT: Now takes input from STDIN.</p>
</div>
<div id="pu20" class="pu"><h3>PowerShell, 125 <s>128</s> <s>130</s> <s>131</s></h3>
<pre><code>for($a,$OFS=$input+'';$b-6174;++$i){$a=$b=+($c=''+($x=&quot;$a 000&quot;[0..4]|sort)[4..0])-&quot;$x&quot;
&quot;$c-$x = {0:d4}&quot;-f$a}&quot;Iterations: $i.&quot;
</code></pre>
<p>Passes all test cases from the question.</p>
</div>
<div id="pu21" class="pu"><h2>Golfscript, 74 characters</h2>
<pre><code>);:|;{0):0;|$:§-1%&quot; - &quot;§&quot; = &quot;&quot;0&quot;4$~§~-+-4&gt;:|n|6174`=!}do&quot;Iterations: &quot;0&quot;.&quot;
</code></pre>
</div>
<div id="pu22" class="pu"><h1>Clojure, 256 characters</h1>

<pre><code>(let[i #(Integer/parseInt%)f #(format"%04d"%)a #(-&gt;&gt;% f sort(apply str)i)d #(-&gt;&gt;% f sort reverse(apply str)i)k #(let[u(d %)l(a %)n(- u l)](println(f u)"-"(f l)"="(f n))n)](while true(println"Iterations:"(count(take-while #(not=% 6174)(iterate k(read)))))))
</code></pre>
</div>
<div id="pu23" class="pu"><h1>Python, 141 chars</h1>

<pre><code>n=input()
i=0
while n-6174:a=''.join(sorted("%04d"%n));b=a[::-1];n=int(b)-int(a);print"%s - %s = %04d"%(b,a,n);i+=1
print"Iterations: %d."%i
</code></pre>
</div>
<div id="pu24" class="pu"><h2>JavaScript, 260 bytes</h2>

<pre><code>function z(c){for(u=c+y;u.length&lt;4;)u=0+u;return u}for(p=prompt(i=0,r=y="");;)
if(s=(p+y).split(y).sort(),t=s.concat().reverse(),a=s.join(y),b=t.join(y),q=a&lt;b?b:a,
w=a&lt;b?a:b,p=z(q-w),i++,r+=z(q)+" - "+z(w)+" = "+p+"\n",p==6174)break;alert(r+
"Iterations: "+i+".")
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/2762/">2762</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




