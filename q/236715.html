<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::236715</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>073</td><td>Perl 5 n</td><td>240524T221310Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/273302#273302">Xcali</a></td></tr>
<tr d-ix="1"><td>025</td><td>Pip P</td><td>240524T044235Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/273277#273277">DLosc</a></td></tr>
<tr d-ix="2"><td>078</td><td>Arturo</td><td>240524T152155Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/273292#273292">chunes</a></td></tr>
<tr d-ix="3"><td>079</td><td>Matlab</td><td>211105T162846Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236908#236908">LimaKilo</a></td></tr>
<tr d-ix="4"><td>080</td><td>TIBasic</td><td>211102T003532Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236806#236806">Youserna</a></td></tr>
<tr d-ix="5"><td>187</td><td>Julia</td><td>211031T223824Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236773#236773">S. Pelle</a></td></tr>
<tr d-ix="6"><td>018</td><td>Jelly</td><td>211031T185142Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236769#236769">lynn</a></td></tr>
<tr d-ix="7"><td>097</td><td>Excel</td><td>211031T175153Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236768#236768">Axuary</a></td></tr>
<tr d-ix="8"><td>040</td><td>J</td><td>211031T055544Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236761#236761">Jonah</a></td></tr>
<tr d-ix="9"><td>024</td><td>Vyxal</td><td>211031T043606Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236760#236760">hyper-ne</a></td></tr>
<tr d-ix="10"><td>019</td><td>Jelly</td><td>211029T023006Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236716#236716">Unrelate</a></td></tr>
<tr d-ix="11"><td>103</td><td>C gcc</td><td>211029T164014Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236736#236736">Noodle9</a></td></tr>
<tr d-ix="12"><td>021</td><td>MATL</td><td>211029T104127Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236727#236727">Luis Men</a></td></tr>
<tr d-ix="13"><td>092</td><td>C clang</td><td>211029T220438Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236745#236745">AZTECCO</a></td></tr>
<tr d-ix="14"><td>021</td><td>Charcoal</td><td>211029T083655Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236723#236723">Neil</a></td></tr>
<tr d-ix="15"><td>084</td><td>JavaScript ES6</td><td>211029T143308Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236732#236732">Arnauld</a></td></tr>
<tr d-ix="16"><td>024</td><td>05AB1E</td><td>211029T104224Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236728#236728">Kevin Cr</a></td></tr>
<tr d-ix="17"><td>112</td><td>Zsh</td><td>211029T071914Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236720#236720">roblogic</a></td></tr>
<tr d-ix="18"><td>072</td><td>APL+WIN</td><td>211029T104058Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236726#236726">Graham</a></td></tr>
<tr d-ix="19"><td>068</td><td>R</td><td>211029T025552Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236717#236717">Giuseppe</a></td></tr>
<tr d-ix="20"><td>070</td><td>Ruby</td><td>211029T084759Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236725#236725">G B</a></td></tr>
<tr d-ix="21"><td>080</td><td>Python 3.8 prerelease</td><td>211029T080859Z</td><td><a href="https://codegolf.stackexchange.com/questions/236715/checkered-grid-with-x-mark/236722#236722">loopy wa</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-n</code>, 73 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$b=&lt;&gt;;//,say map{($'+$_)%2||2*!!$b*($b&gt;=abs)*(abs==abs$')}@;for@;=-$_..$_
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/18lydbGzlpfX6c4sVIhN7GgWkNFXVslXlPVqKbGSEtRUSVJS0Mlyc42MalYU0sDSNqCmCrqmrUO1mn5RQ7Wtroq8Xp6KvH//xtzGf3LLyjJzM8r/q/ra6pnYGjwXzcvBwA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-P</code>, <s>26</s> 25 bytes</h1>
<pre><code>QP R*R(%$+GMCa)+2*EYb+SGb
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgWbSSboBS7IKlpSVpuhY7AwMUgrSCNFRVtN19nRM1tY20XCOTtIPdkyDyUGXLok10FIxgmgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<pre class="lang-lisp prettyprint-override"><code>QP R*R(%$+GMCa)+2*EYb+SGb
             a             ; First command-line arg
           MC              ; Make a grid of that size and map to each
                           ; coordinate pair:
        $+G                ;  Sum the pair
       %                   ;  Mod 2
      (       )+           ; To that array, add the following array,
                           ; overlapping them from the top left corner:
                    b      ;  Second command-line arg
                     +SGb  ;  Add its sign (0 -&gt; 0, positive x -&gt; x+1)
                  EY       ;  Identity matrix of that size
                2*         ;  Multiply each element by 2
                           ; This gives us the bottom-right quadrant of our
                           ; desired result
     R                     ; Reverse the rows
   R*                      ; Reverse the elements within each row
                           ; This gives us the top-left quadrant, which
                           ; we can then...
QP                         ; Quad-palindromize
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://arturo-lang.io" rel="nofollow noreferrer">Arturo</a>, 78 bytes</h1>
<pre class="lang-arturo prettyprint-override"><code>$[a,b][r:..1-a,a-1map r'x-&gt;map r'y-&gt;(/\/\=x^2y*y(x*x)=&lt;b^2b&gt;0)?-&gt;2-&gt;abs%x+y,2]
</code></pre>
<p><a href="http://arturo-lang.io/playground?0Q6GGY" rel="nofollow noreferrer">Try it!</a></p>
</div>
<div id="pu3" class="pu"><h1>Matlab, 79 bytes</h1>
<pre><code>m=zeros(2*a-1);
m(2:2:end)=1;
for i=a-b:a+b
m(i,i)=2*(b&gt;0);end
max(m,flipud(m))
</code></pre>
<p>Only make one diagonal of twos and generate the antidiagonal by maxing with the flipped matrix. The <code>2*(b&gt;0)</code> was my shortest way to take care of the <code>b=0</code> edge case.</p>
</div>
<div id="pu4" class="pu"><h1>TI-Basic, 80 bytes</h1>
<pre><code>Prompt A,B
identity(2A-1→[A]
For(I,1,2A-1
For(J,1,2A-1
remainder(I+J,2)+2max(abs({I,J}-A)≤B and B)max(I={J,2A-J→[A](I,J
End
End
</code></pre>
<p>+1 byte if not ran on a TI-84+/SE with the 2.53 MP OS or above by replacing <code>remainder(I+J,2)</code> with <code>2fPart(.5(I+J))</code>.</p>
<p>Output is stored in <code>[A]</code>.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.julialang.org/" rel="nofollow noreferrer">Julia</a>, <s>336</s> <s>271</s> <s>195</s> 187 Bytes</h1>
<p>v4, and thanks for the help!</p>
<pre><code>function x(a,b)
s=(2*a-1)
h = zeros(Int8,(s,s))
h[2:2:s^2].=1
if b!=0;h[a,a]=2end
for i in range(1,stop=min(b,a-1)) 
h[a+i,a+i]=2
h[a-i,a-i]=2
h[a-i,a+i]=2
h[a+i,a-i]=2
end
return(h)
end

</code></pre>
<p>old:</p>
<pre><code>function cross(a,b)
    h = zeros(Int8,((2*a-1),(2*a-1)))
    h[2:2:(2*a-1)^2] .= 1
    c = (Int8((2*a-1)/2+0.5), Int8((2*a-1)/2+0.5))
    h[c[1],c[2]] = 2
    for i in range(1,stop=min(b,a-1))
        h[c[1]+i,c[2]+i] = 2
        h[c[1]-i,c[2]-i] = 2
        h[c[1]-i,c[2]+i] = 2
        h[c[1]+i,c[2]-i] = 2
    end
    return(h)
end
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 18 bytes</h1>
<pre><code>_þµṂ&gt;Ɠa~¤×¬Ḥ+ḂŒBŒḄ
</code></pre>
<p><a href="https://tio.run/##ATEAzv9qZWxsef//X8O@wrXhuYI@xpNhfsKkw5fCrOG4pCvhuILFkkLFkuG4hP/Dh0f/Mv81" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>-1 from caird, who noted that I could get rid of a backtick by reading <code>b</code> from stdin.</p>
<pre><code>                For inputs (a, b):
_þµ              Make a subtraction table over [1..a], and operate on that.
    Ṃ             Get the minimum row: this is always [1-a, 2-a ... 0].
     &gt;Ɠa~¤        Which elements are greater than (b and ~b)?
                  For example for (5, 2): Ṃ    → [-4, -3, -2, -1,  0]
                                          Ṃ&gt;-3 → [ 0,  0,  1,  1,  1]
          ×¬      Multiply this vector by the a×a identity matrix &quot;¬table&quot;
            Ḥ     and double the result (generating the 2s)
             +Ḃ   then add to an a×a checkerboard of 1s &quot;table % 2&quot;:

                    0 0 0 0 0   0 1 0 1 0   0 1 0 1 0
                    0 0 0 0 0   1 0 1 0 1   1 0 1 0 1
                    0 0 2 0 0 + 0 1 0 1 0 → 0 1 2 1 0
                    0 0 0 2 0   1 0 1 0 1   1 0 1 2 1
                    0 0 0 0 2   0 1 0 1 0   0 1 0 1 2

ŒBŒḄ              Finally, palindromize both ways to make the full output.
</code></pre>
</div>
<div id="pu7" class="pu"><h1>Excel, 97 bytes</h1>
<pre><code>=LET(x,SEQUENCE(A1*2-1)-A1,y,TRANSPOSE(x),IF(MOD(x+y,2),1,IF((x-y)*(x+y)+(B1=0)+(ABS(x)&gt;B1),,2)))
</code></pre>
<p><a href="https://1drv.ms/x/s!AkqhtBc2XEHJnQVfT5BM4NBPJs1G?e=8lgz25" rel="nofollow noreferrer">Link to Spreadsheet</a></p>
<h2>Explanation</h2>
<pre><code>=LET(x,SEQUENCE(A1*2-1)-A1, # [-a..a] vertical
y,TRANSPOSE(x),             # [-a..a] horizontal
IF(MOD(x+y,2),1,            # if x+y mod 2 &lt;&gt; 0 then 1
  IF((x-y)*(x+y)+(B1=0)+(ABS(x)&gt;B1),,2)))  
                   # else if (x&lt;&gt;y and x&lt;&gt;-y) or b = 0 or abs(x) &gt; b then 0 else 2 
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 40 bytes</h1>
<pre><code>((2|+/~)@]+2**@[*=/~@]*(&gt;:]*=/~))|@i:@&lt;:
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/NTSMarT16zQdYrWNtLQcorVs9escYrU07KxiQUxNzRqHTCsHG6v/mlypyRn5QJ1pCkYQprqurq46hGkIFDXGEDUCipr8BwA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 24 bytes</h1>
<pre><code>:±+ʁ:±†vǔd$ʁ:v+∷+2(ṘømÞT
</code></pre>
<p><a href="https://vyxapedia.hyper-neutrino.xyz/tio#WyIiLCI6wrEryoE6wrHigKB2x5RkJMqBOnYr4oi3KzIo4bmYw7htw55UIiwiKSB24bmE4oGLIiwiIiwiMlxuNCJd" rel="nofollow noreferrer">Try It Online!</a></p>
<p>-3 bytes thanks to lyxal<br />
-1 byte thanks to Unrelated String</p>
<pre><code>:±+ʁ:±†vǔd$ʁ:v+∷+2(ṘømÞT     Full Program; take in order b, a
:                            duplicate b
 ±                           sign
  +                          add (0 if b is 0, otherwise b+1)
   ʁ                         range (0..x-1)
    :                        duplicate
     ±                       sign ([0, 1, 1, ..., 1] of length 0 / b+1)
      †                      logical NOT - [1, 0, 0, ..., 0]
       vǔ                    vectorized rotate; identity matrix of size 0 / b+1
         d                   double; [2, 0, 0], [0, 2, 0], [0, 0, 2]
          $                  swap a to TOS
           ʁ                 range; 0..a-1
            :                duplicate
             v+              add each; addition table; [2, 3, 4], [3, 4, 5], [4, 5, 6]
               ∷             parity; checkerboard of size a with 0 in top-left
                +            add the two matrices together
                  2(....)    repeat twice
                    Ṙ        reverse (flip vertical)
                     øm      palindromize (reflect vertical; do not copy middle)
                       ÞT    transpose
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 19 bytes</h1>
<pre><code>^þ
ÇḂ+UṚŒḄŒBɓa‘{Ç¬Ḥ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/z/u8D6uw@0PdzRphz7cOevopIc7Wo5Ocjo5OfFRw4zqw@2H1jzcseT/4eX67ppZjxr3cXH9/x9tpKNgEKujAKINQbQxlG@M4BuBaBOouAlU3AQhbhwLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>With some inspiration from hyper-neutrino's Vyxal solution.</p>
<pre><code>^þ     Monadic helper link: 
 þ     Table the (range from 1 to the) argument with itself by
^      XOR.
  Ḃ    The parities of the cells form a checkerboard,
  ¬    and the diagonal consists of zeroes while the rest is truthy.

ÇḂ+UṚŒḄŒBɓa‘{Ç¬Ḥ    Dyadic main link:
             Ç¬     Generate an identity matrix of size
         ɓ          b
           ‘        + 1
          a {       or 0 if b is 0,
               Ḥ    then double it.
  +                 Add that to (the top left corner of)
ÇḂ                  an a by a checkerboard,
   UṚ               rotate the result 180 degrees,
     ŒḄŒB           and palindromize it in both dimensions.
</code></pre>
<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>25</s> <s>24</s> <s>23</s> <s>22</s> 21 bytes</h1>
<pre><code>^þ
ÇḂ+ŒḄŒBðÇUoḶ&gt;¥*¬ḤU
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/z/u8D6uw@0PdzRpH530cEfL0UlOhzccbg/Nf7hjm92hpVqH1jzcsST0/@Hl@u6aWY8a93Fx/f8fbaSjYBCrowCiDUG0MZRvjOAbgWgTqLgJVNwEIW4cCwA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>That feels better. <span class="math-container">\$a\$</span> on the left, <span class="math-container">\$b\$</span> on the right.</p>
<pre><code>^þ     Monadic helper link: 
 þ     Table the (range from 1 to the) argument with itself by
^      XOR.
  Ḃ    The parities of the cells form a checkerboard,
  ¬    and the diagonal consists of zeroes while the rest is truthy.

ÇḂ+ŒḄŒBðÇUoḶ&gt;¥*¬ḤU    Dyadic main link:
        Ç             Generate an a by a matrix of zeroes on the diagonal and nonzeroes elsewhere.
         U            Mirror it,
          o           and replace zeroes with corresponding elements from:
           Ḷ ¥        for each 0 .. a-1,
            &gt;         is it greater than b?
              *       Raise each to the bth power,
               ¬      logically negate,
                Ḥ     double,
                 U    and mirror back.
  +    ð              Add that to
ÇḂ                    an a by a checkerboard,
   ŒḄŒB               then palindromize in both dimensions.
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>118</s> <span class="math-container">\$\cdots\$</span> <s>106</s></sup> 103 bytes</h1>

<pre class="lang-c prettyprint-override"><code>i;f(a,b){for(a*=2,i=--a*a;i--;)printf(&quot;%d%c&quot;,!b|b&lt;abs(a/2-i/a)||i/a-i%a&amp;&amp;i/a+1+i%a-a?i%2:2,i%a?32:10);}
</code></pre>
<p><a href="https://tio.run/##ZY/BCsIwDIbvPkUcVFrXoFa82BVfxEtamRR0igoe3F7dmiJTh//hTxq@/G0D7kNIKdpakvbqUZ8ukqbO6OgQaUo2Ilp1vsTmVstC7EQo9Ni3viJ/lTQzGGek2pYdo6DJhJtyUXKLtInCrDlI0GZp1ou5sl3iGDhSbKSCxwhYfB/IPCVwYCyXysHKQllSjwwwD25u2SugDHn1Qb5wVv/iHCt2Ou9x3TaFBuKTsgM6f/5v2EdsGxyIQ37IbvT2Lj1DfaD9NeH9BQ" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p><em>Saved 3 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!</em></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>22</s> 21 bytes</h1>
<pre><code>_Zvt&amp;+oy&amp;=bitg+&gt;&amp;+&gt;E+
</code></pre>
<p>Inputs are <code>a</code>,  then <code>b</code>.</p>
<p><a href="https://tio.run/##y00syfn/Pz6qrERNO79SzTYpsyRd205N285V@/9/Yy5DAA" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>
<h3>Explanation</h3>
<p>This uses inputs <code>3</code>,  <code>1</code> as an example. The stack contents are shown in each step. The stack is shown upside down, with the top (i.e. most recent) element down.</p>
<pre><code>_Zvt % Implicit input: a. Symmetric range [a a-1 ... 2 1 2 ... a-1 a]. Duplicate
     % STACK: [3 2 1 2 3],
              [3 2 1 2 3]
&amp;+   % Duplicate. Add to itself transposed, elementwise with broadcast
     % STACK  [3 2 1 2 3],
              [6 5 4 5 6
               5 4 3 4 5
               4 3 2 3 4
               5 4 3 4 5
               6 5 4 5 6]
o    % Modulo 2, elementwise. Gives checkered matrix
     % STACK: [3 2 1 2 3],
              [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
y    % Duplicate second-top element
     % STACK: [3 2 1 2 3],
              [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [3 2 1 2 3]
&amp;=   % Equal? to itself transposed, elementwise with broadcast. Gives &quot;X&quot; matrix
     % STACK: [3 2 1 2 3],
              [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [1 0 0 0 1]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               1 0 0 0 1]
b    % Bubble up third-top element
     % STACK: [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [1 0 0 0 1]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               1 0 0 0 1],
              [3 2 1 2 3]   
i    % Input: b
     % STACK: [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [1 0 0 0 1]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               1 0 0 0 1],
              [3 2 1 2 3],
               1
tg+  % Duplicate, convert to logical, add. This converts positive b into b+1
     % STACK: [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [1 0 0 0 1]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               1 0 0 0 1],
              [3 2 1 2 3],
               2
&gt;    % Greater than?, elementwise
     % STACK: [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [1 0 0 0 1]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               1 0 0 0 1],
              [1 0 0 0 1]
&amp;+   % Add to itself transposed, elementwise with broadcast
     % STACK: [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [1 0 0 0 1]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               1 0 0 0 1],
              [2 1 1 1 2
               1 0 0 0 1
               1 0 0 0 1
               1 0 0 0 1
               2 1 1 1 2]
&gt;    % Greater than?, elementwise. Equivalent to &quot;and not&quot;. This trims the &quot;X&quot; matrix
     % STACK: [0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0
               1 0 1 0 1
               0 1 0 1 0],
              [0 0 0 0 0]
               0 1 0 1 0
               0 0 1 0 0
               0 1 0 1 0
               0 0 0 0 0],
E+   % Multiply by 2, element-wise. Add, element-wise. Implicit display
     % STACK: [0 1 0 1 0
               1 2 1 2 1
               0 1 2 1 0
               1 2 1 2 1
               0 1 0 1 0]
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 92 bytes</h1>

<pre class="lang-c prettyprint-override"><code>z,i;f(a,b){for(i*=z=i=2*a-1;i;)printf(&quot;\n%d&quot;+!!(i--%z),i%~z&amp;&amp;i%~-z||(i/z-~-a)/~b|!b?i%2:2);}
</code></pre>
<p><a href="https://tio.run/##VU9JDsIwDLznFWmkIIcmLD1wII34SC8OVZElCIjlki5fL4mQEMzBssbj8fhojmcMp3mOmmwHqL3qu@sdaOmiI1ct0WwtWXW7U3h2IJogW1EWBZAxMipNcoqLRaomDgPQOprJoFpPfij8gWS1r5Qd57TLL0iBg@pZsueQGXSVxXpnyxIV41/au431NSY6ZWGcf05zEB3IVstWrRKaYH4hdE5uk/rzQ@5ur@cjB/4TNkHk4cjYOL8B" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<p>Function printing to stdout.<br />
Leading line can be removed at the cost of 1 Byte.</p>
<pre>
z : side length 
i : characters counter(backwards)
f(a,b){
for(i*=z=i=2*a-1;i;)    - initialize variables and itetate backwards until 0
printf("\n%d"+!!(i--%z) - prints:
         &gt a newline if i%z == 0
           &gt the number obtained by expression below at each iteration (decrements i)

i%~z&&i%~-z        - false on diagonals
||(i/z-~-a)/~b|!b  -  false on horizontal window
     * for example f(3,1)
    
  01110    11111   11111
  10101    00000   10101
  11011 || 00000 = 11011
  10101    00000   10101
  01110    11111   11111

?i%2:2    - draw board on 1's
                 2's on zeros 
</pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>22</s> 21 bytes</h1>
<pre><code>ＵＯ±Ｎ01¶10‖Ｏ⌈¿ＩηＰX×2⊕η
</code></pre>
<p><a href="https://tio.run/##FcoxDoIwFADQ3VM0nX6TmgBxgtGJQUiMg4NLqR9o0n6a8uEMDp7Si1RdX56dTbKL8Tn3g19ogg4nwwgtxY27LQyYQCktZFE@qCykag5XHD1a7ndM3kSoP@/XT90o4GxWhlkpcdk8u5gcMdR3LW4u4Aqyklq0ZBMGJMbnf6om55Oo8nH3Xw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＵＯ±Ｎ01¶10
</code></pre>
<p>Draw a chequerboard of size <code>a</code> with <code>0</code>s on its major diagonals above and to the left of the current position.</p>
<pre><code>‖Ｏ⌈
</code></pre>
<p>Reflect it to produce a chequerboard of size <code>2a-1</code>, leaving the current position in the middle of the chequerboard. (Note that while drawing the chequerboard below and right would save a byte, there is no single byte to reflect up and left, and Charcoal's up reflect is buggy and moves the current position incorrectly anyway.)</p>
<pre><code>¿Ｉη
</code></pre>
<p>Test whether <code>b</code> is zero.</p>
<pre><code>ＰX×2⊕η
</code></pre>
<p>If not then draw arms of <code>2</code>s of length <code>b+1</code> (including the centre).</p>
</div>
<div id="pu15" class="pu"><h1>JavaScript (ES6), <s> 87 </s> 84 bytes</h1>
<p>Expects <code>(a)(b)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;b=&gt;[...Array(a+--a)].map((_,y,A)=&gt;A.map(_=&gt;x+y&amp;1|(x*x/b&lt;=b&amp;x*x--==y*y)*2,y-=x=a))
</code></pre>
<p><a href="https://tio.run/##NY7NboMwEAbveQqfwi7YTgPcmrXEoU9BrGhNID9KceREFZb67jRAc5pvZi975R9@NOFyf6reH9uxo5HJODK11roKgSNwphSj1d98BzjIKCskU816IDNkcb39hSEdNm5Hbv0aShHFNGKay6hoIEYcP@s6lx9Wihe2E4rFirflE8ollkss37GwdqU7H764OQPULIWzKMiIxvcPf2v1zZ@gA0ZwOP8VpmPQV3/pIREJ4v/c9wmKTMzE8Q8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Note</h3>
<p>We do <code>x*x/b&lt;=b</code> rather than <code>x*x&lt;=b*b</code> so that <code>x*x/b</code> evaluates to <code>NaN</code> when both <span class="math-container">\$x\$</span> and <span class="math-container">\$b\$</span> are <span class="math-container">\$0\$</span>. This makes the condition fail as expected for this edge case without the need for an explicit test on <span class="math-container">\$b\$</span>.</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>25</s> 24 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Dи2.ý01ŽNœSΛĀ+Y87S.Λ.º.∊
</code></pre>
<p>Can probably be shortened with a different approach, but I wanted to try and use the Canvas builtin for this challenge.</p>
<p>-1 byte thanks to <em>@ovs</em>.</p>
<p><a href="https://tio.run/##AS8A0P9vc2FiaWX//0TQuDIuw70wMcW9TsWTU86bxIArWTg3Uy7Omy7Cui7iiIr//zcKMw" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>D            # Duplicate the first (implicit) input-integer `a`
 и           # Create a list with `a` amount of `a`s
  2.ý        # Intersperse it with 2: [a,2,a,2,a,2,...,a]
     01      # Push &quot;01&quot;
       ŽNœ   # Push compressed integer 6020
          S  # Convert it to a list of digits: [6,0,2,0]
           Λ # Use the Canvas builtin with these three options:
             #  Length: [a,2,a,2,a,2,...,a]
             #  Characters to draw: &quot;01&quot;
             #  Directions: [6,0,2,0]
Ā            # Check if the (implicit) second input-integer `b` is NOT 0
 +           # Add this check to the (implicit) second input-integer `b`
             # (b=0 will remain 0; b≥1 is now b+1)
  Y          # Push &quot;2&quot;
   87S       # Push list [8,7]
      .Λ     # Use the modifiable Canvas builtin with these three options:
             #  Length: b+1 (or 0 if b=0)
             #  Characters to draw: &quot;2&quot;
             #  Directions: [8,7]
.º           # Intersected mirror the result towards the left
  .∊         # Intersected mirror the result downwards
             # (after which the result is output implicitly)
</code></pre>

<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (section <em>How to compress large integers?</em>)</a> to understand why <code>ŽNœ</code> is <code>6020</code>.</p>
<p>The Canvas Builtin uses three arguments to draw a shape:</p>
<ul>
<li>Length of the lines we want to draw</li>
<li>Character/string to draw</li>
<li>The direction to draw in, where each digit represents a certain direction:</li>
</ul>

<pre class="lang-none prettyprint-override"><code>7   0   1
  ↖ ↑ ↗
6 ← X → 2
  ↙ ↓ ↘
5   4   3
</code></pre>
<p>Here a step-by-step explanation of how it draws for example inputs <span class="math-container">\$a=5,b=2\$</span> with these steps:</p>
<p>Preparation: <code>Dи2.ý</code> makes the list <code>[5,2,5,2,5,2,5,2,5]</code>.</p>
<p><code>Dи2.ý01ŽNœSΛ</code> for this input will have the following Canvas arguments:</p>
<ul>
<li>Length: <code>[5,2,5,2,5,2,5,2,5]</code></li>
<li>Characters: <code>&quot;01&quot;</code></li>
<li>Directions: <code>[6,0,6,2]</code>, which translate to <span class="math-container">\$[←,↑,→,↑]\$</span></li>
</ul>
<p>Step 1: Draw 5 characters (<code>&quot;01010&quot;</code>) in direction <code>6←</code>:</p>
<pre class="lang-none prettyprint-override"><code>01010
</code></pre>
<p>Step 2: Draw 2-1 characters (<code>&quot;1&quot;</code>) in direction <code>0↑</code>:</p>
<pre class="lang-none prettyprint-override"><code>1
01010
</code></pre>
<p>Step 3: Draw 5-1 characters (<code>&quot;0101&quot;</code>) in direction <code>2→</code>:</p>
<pre class="lang-none prettyprint-override"><code>10101
01010
</code></pre>
<p>Step 4: Draw 2-1 characters (<code>&quot;0&quot;</code>) in direction <code>0↑</code>:</p>
<pre class="lang-none prettyprint-override"><code>    0
10101
01010
</code></pre>
<p>Step 5: Draw 5-1 characters (<code>&quot;1010&quot;</code>) in direction <code>6←</code>:</p>
<pre class="lang-none prettyprint-override"><code>01010
10101
01010
</code></pre>
<p>Step 6: Draw 2-1 characters (<code>&quot;1&quot;</code>) in direction <code>0↑</code>:</p>
<pre class="lang-none prettyprint-override"><code>1
01010
10101
01010
</code></pre>
<p>Step 7: Draw 5-1 characters (<code>&quot;0101&quot;</code>) in direction <code>2→</code>:</p>
<pre class="lang-none prettyprint-override"><code>10101
01010
10101
01010
</code></pre>
<p>Step 8: Draw 2-1 characters (<code>&quot;0&quot;</code>) in direction <code>0↑</code>:</p>
<pre class="lang-none prettyprint-override"><code>    0
10101
01010
10101
01010
</code></pre>
<p>Step 9: Draw 5-1 characters (<code>&quot;1010&quot;</code>) in direction <code>6←</code>:</p>
<pre class="lang-none prettyprint-override"><code>01010
10101
01010
10101
01010
</code></pre>
<p>We then use the Canvas builtin again with three new arguments: <code>Ā+Y87S.Λ</code></p>
<ul>
<li>Length: <span class="math-container">\$b+1\$</span> (or <span class="math-container">\$0\$</span> if <span class="math-container">\$b=0\$</span>, because with length <code>1</code>, direction <code>8</code> will draw a <code>&quot;2&quot;</code> at the position it was at before the reset unfortunately)</li>
<li>Characters to draw: <code>&quot;2&quot;</code></li>
<li>Direction: <code>[8,7]</code>, where the <code>8</code> is a special direction that resets the starting position (to the bottom-left we started at) and <code>7</code> translates to <span class="math-container">\$↖\$</span></li>
</ul>
<p>Draw <span class="math-container">\$3\$</span> (<span class="math-container">\$b=2\$</span>) characters (<code>&quot;222&quot;</code>) in direction <code>7↖</code>:</p>
<pre class="lang-none prettyprint-override"><code>01010
10101
01210
10121
01012
</code></pre>
<p>After which we mirror this multi-line string both horizontally and vertically, after which it is output implicitly as our result.</p>
<p><a href="https://codegolf.stackexchange.com/a/175520/52210">See this 05AB1E tip of mine for an in-depth explanation of the Canvas builtin.</a></p>
</div>
<div id="pu17" class="pu"><h1>Zsh, <s>127</s> <s>116</s> 112 bytes</h1>
<pre class="lang-bash prettyprint-override"><code>R=({1..$[c=2*$1-1]})
for i ($R)(for j ($R)S+=$[(i==j)|(j+i==c+1)?$2==0?0:${$((i-$1))/\-/}&gt;$2?0:2:(i+j)%2]
&lt;&lt;&lt;$S)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY1LDoJADIb3c4pZ1KQVUaawMITKHWAJLpRIgA3Gx8bHSdyQGA7FbRzARft9bZP-n-_jWnVDXLYXbTRrVKw9W0b5lv5EVoH1wN5tGwdfEUZRdBAwq1wfBbi_30p3O5wTwadZryErhJdgXLN_kxp_1xohIRy1mTR1BDKsRRp6YeNYKRxDMbCIF3shPAGxdsEQbXJ3894B2y2HWDsNLXivbD6kNOf2p6Jq_951M38" rel="nofollow noreferrer">Attempt this Online!</a>   <sub><s><a href="https://tio.run/##RY29EoIwEAZ7nuKKcyYR@clBBRN5EKTQjBmSQhy0MubZY4jO2Oztt829HnPQjLvsquYFzhLFAS4SKSiJI@1RFGLq9bKCAeZEWaLy3G3b/vd9NbenBhyZkdLyN7N5FJULPiBJWQ91hw4ZMwUKzqtTUfkjUqzUMZNbvqOp3977sDHzmQaCOlFENsmbn1Nkm0oLAtL5piZ8AA" rel="nofollow noreferrer">116 bytes</a></s></sub>   <sub><s><a href="https://tio.run/##TY69EoIwEAb7PMUV50xO5CeBipnIgyCFZmRICnHQBmOePYZoYbP37Vb3ekxh5OTYVU8znBWKA1wUyqAV9nKPIhcDG@cFDHAnigK1J7e5/fNVIecolaq6qkW3icgNUXnKS39EGaskYvfF3J4jYM@NUpbe3GZx6ExQt7bcZJZ2cvDpEx82Ms9GkFAlisg67fq3ZWSTSgMC0vmmOnwA" rel="nofollow noreferrer">127 bytes</a></s></sub></p>
<p><sub>I used bits of the <a href="https://codegolf.stackexchange.com/a/233518/15940">X without Y</a> problem.</sub>
<br><sub>@pxeger saved 4 bytes!</sub></p>
<p><strong>Description</strong></p>
<pre><code>Using `a = $1` and `b = $2` as defined in the question...

R=({1..X})               define array R as a sequence from 1 to expression X
c=$2*$1-1                size of matrix
for i.. for j..          iterate rows, columns 
S+=$[...]                add a digit to S, per the logic in [...]
(i==j)|(j+i==c+1)?...    are we on a diagonal? if so, do ...
:(i+j)%2                 otherwise, fill the matrix with 1s and 0s
$2==0?0                  if b is 0, then default to 0 on the diagonal
:${$((i-$1))/\-/}&gt;$2?0:2 if abs(i-a) &gt; b then put 0 on the diagonal, otherwise 2
</code></pre>
</div>
<div id="pu18" class="pu"><h1>APL+WIN, 72 bytes</h1>
<p>Prompts for a then b:</p>
<pre><code>(s⊖(s←.5×b-a)⌽z↑(b≠1)×2×m∨⌽m←n∘.=(n←⍳b←(2×b←⎕)+1))+(z←a,(a←(2×⎕)-1))⍴0 1
</code></pre>
<p>Explanation:</p>
<pre><code>(z←a,(a←(2×⎕)-1))⍴0 1 create the 0 1 checkerboard matrix defined by a

2×m∨⌽m←n∘.=(n←⍳b←(2×b←⎕)+1)) create the 2s diagonals defined by b

(b≠1)× filter the case where b=0

z↑ pad the diagonals matrix to the same size as the checkerboard matrix

s⊖(s←.5×b-a)⌽ centre the diagonals in the padded diagonals matrix. 

The two matrices are then summed together.
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob6qvz6O2CcZcQJanP5BlyPWooz3tv0bxo65pQKJtgp7p4elJuomaj3r2Vj1qm6iR9KhzgaHm4elGh6fnPupYARTOBarKe9QxQ89WIw/IfNS7OQlIaQAVgGigwZrahpqa2hpA7RMSdTQSoZIgCV2gxKPeLQYKhv@B1nL9T@My4jLgUldQ5wKxDKEsY7iYMVAUwjKBi5nA1ZkgyRpzcQEA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online! Thanks to Dyalog Classic</a></p>
</div>
<div id="pu19" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>72</s> 68 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,b)`[&lt;-`(diag(2*a-1)*0+0:1,cbind(c(x&lt;--b:b,-x),x)+a,2*!!b)
</code></pre>
<p><a href="https://tio.run/##BcHBCoAgDADQX8nbphuo3cI/6eKmGF4MosC/t/ee1bbEq32jvP0eIKSYz8QZapcLohUOaL3zR6CifVQoMBOzHko8kSY6oWiNUVwNdgq4fg" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Thanks to Robin Ryder for -4 bytes.</p>
</div>
<div id="pu20" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 70 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;a,b{(r=1-a...a).map{|x|r.map{|y|x*x==y*y&amp;&amp;x*x&lt;=b*b&amp;&amp;b&gt;0?2:(x+y)%2}}}
</code></pre>
<p><a href="https://tio.run/##KypNqvyfZvtf1y5RJ6lao8jWUDdRT08vUVMvN7GguqaipgjCqKyp0Kqwta3UqlRTA7JsbJO0ktTUkuwM7I2sNCq0KzVVjWpra/8XlJYUK6RFG@kYxIL0aahZZeYVF6Qml2hygaS4oPKmBORNdAzxypvrGGPI/wcA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu21" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, <strike>82</strike>, 80 bytes (@ovs)</h1>

<pre class="lang-python prettyprint-override"><code>lambda a,b:(R:=range(1-a,a))and[[1&amp;x+y|(x*x==y*y&lt;=b*b&gt;0)*2for x in R]for y in R]
</code></pre>
<p><a href="https://tio.run/##TY/LCsIwEEX3/YrQhSQ1glUEKcaP6La6mNhWA82DNIuE2m@Pra3grO7cA4cZE9xLq@PZ2NiyW@xA8hoQUF7gsmAW1LPB@Q4oEAKqrqp847fhjX3mGQtZuDCe8eueZIdWW@SRUKi8zzEsMSat1RIZY4VySEijrVu3hQjXWKd11//gQ0suFDihVZ/MJk5hdv33eLnrROiBFAma5mvEbToAG@nA2ZiSpV8Bnj4iJH4A" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p><a href="https://tio.run/##ZY9LCsIwEED3PUVwIUmNYCuCFONFqouJNhpoPqRZJNSePba2guDs5j14w9jon0bvj9YlwS6pBcXvgIDyqq6LddjEFw55YCzm8cR4zs87kpfCOBSQ1MiBfjS42AIFcp1o/KMpE84oZK2T2iOprHF@2WYjfeO8MW33lTejuNTgpdFdNkU5hSn7y/F840BoSaoMjfMpYrHqgQ2052xYkZkvAo8/EZLe" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Old version</a></p>
<p>Nothing too fancy, still learning the ropes. <strike>Should run on older python3s, too.</strike></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/236715/">236715</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




