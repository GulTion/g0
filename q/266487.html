<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::266487</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>428</td><td>Python</td><td>231105T165556Z</td><td><a href="https://codegolf.stackexchange.com/questions/266487/sum-of-the-sum-of-all-possible-subsets-raised-to-power-k/266498#266498">bsoelch</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 428 bytes, <span class="math-container">\$O(n^{k+1})\$</span></h1>
<p><em>Ignores the input format requirements, <code>f</code> takes input <code>(l,k)</code> with <code>l</code> being the array and <code>k</code> being the power. <br>
If it is really necessary I can add a parsing function, but this will not impact the total complexity</em></p>
<pre class="lang-python prettyprint-override"><code>from itertools import product
from math import comb 

M=998244353

def prod(l): ## product over the list l
  P=1
  for x in l:
   P*=x
   if M:
     P%=M  ## only need result modulo M, so take mod M to make numbers smaller
  return P

def f(l,k):
  n=len(l)
  S=0
  for P in product(range(n),repeat=k):
   S+=prod(l[i] for i in P)*pow(2,(n-len(set(P))),M)
   if M:
     S%=M  ## only need result modulo M, so take mod M to make numbers smaller
  return S
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fZZNbhtHEIWRXcBTDGAkIJU20FXV1T8BuM1OhgAtDS9km7IJUaRAUYhzlmy8SVa5SK6Q0-QrUv5RYGQhajjTVf361Xtv-Pufd78d3u-2Hz_-8XC4ft7_-e6v6_3udlofVvvDbre5n9a3d7v9Ybrb794-vDnMjk9vrw7vPz14s7t9Pc1m58sxupZibrPZ29X1sWC-Wfw8m6aLpfB5vdtPH6b1dtrEvenibPkh_q-vp_PjDW79sDznar86POy308Wpz_V8k26ObbbLzWpLSy4vl_mx40V0fAQ3319t363m20Xar-5WV4flqW66_Gl5QvNy_epYtI6ii8XZ3e7Xuab59nk0vl8d5heLxSKdL_6D6_IJrssTrtf7h8Pql93-zeozwC-oXsQGJzR6dnaC_RnL_cPtEcpnJKeFj6vY98WPUbVeLM7Obv4fyuPQvv97drdfbw_z6_lLSZrKq6SL9BXCL3cXT1faN1fat1ZGvX1j7en-YvZluSVJhT9_lcbTgidPvi7xXmvzMWrqVmrVaj1511rFa0k9SzZRZ7favXeXnEoXN8_eko4hxarVJM7d3GtPrXSvWZVTl9LUemfTUbTSriRtUpprHnQxjdKRurqZsREIuoqqSxpFrGRtwO5Sex7cozBLd9PU1KvkOnIaPfcWH2DJ0afAjLvlnAe7qRblgCVZ9s5e2bkaVoExUm3Who9syRUKtPXApxyywkYZvebchyYv4q26GHsYz4YHQ9WB17kqtWTAg9m0ShkGKlU6S_HUrDcBVUvsWVtvcNWDK6EaXkY8z5qkaWtBefA86pDRUuGoPStYTKiUUWGo9UEf5apmFmQDPVRkLVQMWFZvjjKEyVS3Bqe5ivItuKJSmVGB0Uwxc6vVzPsAvbB7PA70UrLEpK24lp7BogXeqElBGMW1JWsikOqDeUgcoGiCMqMRrKnk6Ma-oIePImhjmLBZY5ZZqrTQUCnDvfZKZ-61ZlTAehbEEYoY0kJOKYCAtIc2skN-6fEUIRSwtBqIY0aDw3B6amUougrVlc7uAurUIJ-pxjxa3IXehBrZCr2lUZFLKzgA_VUUcNyj1q7smGLOkBb9GHXHNz1hGC4G_hAoGuJeEoxoOAPu2eE4kYS1ZOTCzMVcB4ORhPjbaW5IoKJc9AIn0hpKhwNrLtghIWcpBf2GJoci58466wUpwjO0Dy-opCIgDKI8re4xzFDxyK31UKdybI7sMF6VZaC3EBUjRsVCOw_XAuBIJf06c2XDo2da5sgjOSPMyAdejtbOxcgIfMokcA9nFQZTYp12cOFu3kwIn3NAk8M9ioV6bF7QFd4vTg35ggRwbcvoAJ8VvnBKuuJMNImF6Mi91hEY5UyBjMAEuAdXukP4SIaz0TVYeCl6wZEjcqNHTKE_CdZwF1060-LsCRnirsg6nnlrohau0OAQlfSSDZqNqSJrAiMwU4Jy6MLuTitPWkw6IlSUYySgoSHuE6tuoKqDyMrgc0zbTimF5Jgl-oPQVgfqDmW3wkeJhIMP3IRXM2FMgDKt3gmQyL-MXtxCB-Jko0cKdIu0ZV8E1tAL-Ahi4B354xwSyYxKOhjCM4NudGp4kINwePoZw4wZCYodCr8oDKbyUAQQE0ThyCzxSjDStNEZFxeBLdZBfkPlOIrHRCBOLj0ygLxHSLjIcI_F5Gv4HEwkU6UzmSoGvTiPr4MXEkhrBHskf9i4qkZ2hiAGKUj-EectR-rx1ggXMhmUhDROFYyUqeMe_E1aH9WeOQq8xDMPMkNDxG1MIZphB7DEZg3xcnL0gFeFBEaT8faJc_BjK0wAvojfzCyJcaI150iGEskkkQcRmIQg7wDjzYjOEt_og47ZjdcIZNBFju8PEDQkWwIgDKGOyH4yB4VlAOIthmt4JXLDQp3Mw6xBw4j3Ww4wox5_EUzTs2eT2XS4ulndT4fdtNlt301X99P9bvNwWO-20_p-Wn24221X28P6ahM_hW5Ov2g-_Rz9Fw" rel="nofollow noreferrer">Attempt This Online!</a> (runs for ~30 seconds)</p>
<h2>Explanation</h2>
<p>Idea: using the generalized binomial formula split the term for each subset into summands and count how often each combination of elements appears in the final sum.</p>
<p>Example:</p>
<pre><code>{x,y,z}, 2 -&gt;
0       
x       -&gt; x²
  y     -&gt;    y²
x,y     -&gt; x² y²    2xy
    z   -&gt;       z²
x,  z   -&gt; x²    z²     2xz
  y,z   -&gt;    y² z²         2yz
x,y,z   -&gt; x² y² z² 2xy 2xz 2yz
</code></pre>
<p>Each term appears (counting different orderings multiple times) <span class="math-container">\$2^{len(l)-|\{\text{different elements in term}\}|}\$</span> times (the number of subsets a term appears in halves with each unique letter used in the term). So we can get the total sum by summing up the term multiplied by their frequencies.</p>
<h2>Running time</h2>
<p>Let <span class="math-container">\$n\$</span> be the length of the list and <span class="math-container">\$k\$</span> be the exponent.
The program checks <span class="math-container">\$O(n^{k})\$</span> different terms, for each of terms the computation can be done in <span class="math-container">\$O(n)\$</span> elementary calculations. As each elementary computation modulo <code>998244353</code> can be done in <span class="math-container">\$O(1)\$</span> this gives a total running time of <span class="math-container">\$O(n^{k+1})\$</span></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/266487/">266487</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




