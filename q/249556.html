<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::249556</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>164</td><td>Scala 3</td><td>231031T113548Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/266380#266380">138 Aspe</a></td></tr>
<tr d-ix="1"><td>022</td><td>Jelly</td><td>220709T230924Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249753#249753">ais523</a></td></tr>
<tr d-ix="2"><td>nan</td><td>Jelly</td><td>220705T172644Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249589#249589">jimmy230</a></td></tr>
<tr d-ix="3"><td>098</td><td>Python</td><td>220705T165534Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249587#249587">loopy wa</a></td></tr>
<tr d-ix="4"><td>038</td><td>05AB1E</td><td>220705T075419Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249568#249568">Kevin Cr</a></td></tr>
<tr d-ix="5"><td>103</td><td>Python 3.8</td><td>220705T085846Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249570#249570">tsh</a></td></tr>
<tr d-ix="6"><td>106</td><td>JavaScript ES6</td><td>220705T155935Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249586#249586">Arnauld</a></td></tr>
<tr d-ix="7"><td>158</td><td>Retina 0.8.2</td><td>220705T182535Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249593#249593">Neil</a></td></tr>
<tr d-ix="8"><td>151</td><td>Python</td><td>220705T090401Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249571#249571">mousetai</a></td></tr>
<tr d-ix="9"><td>194</td><td>Python3</td><td>220705T020452Z</td><td><a href="https://codegolf.stackexchange.com/questions/249556/golf-githubs-pager-logic/249557#249557">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, 164 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/249570/110802">@tsh's Python answer</a> in Scala.</p>
<hr />
<pre class="lang-scala prettyprint-override"><code>(n,m)=&gt;{val S=Set(0,1,2)++(Math.min(n-5,m-2) to Math.max(6, m+4)-1)++Set(n-2,n-1,n);(0 to n-1).toSeq.filter(i=&gt;S.contains(i)).map(i=&gt;if (S.contains(i+1))i else -1)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=pZS_bsIwEMaXTln7AicmWzghDgQwFZU6VioT6oQYXJpQV4lDE_efEE_ShaHt0ieiT9MzdGhLgkCNZCW---7n785SXt6LiUxk82NUc3X2KHNdG6_c7Oo2mhgYSKVh7jjwIBOIe0DOtWG4aP90GN2N8GsMfXi7N7HbXb0SzVLMzK142B9GhviMs4DW62QgzY2XKk20G7LUDSiYDDZB-UTaDNJ6i7ocpbZMuwHTLmeanhDfKnFDPZPhmV6sEhPlRKEDb5Jpgw4LoihF0MxGVQzkZ6bOKVUQJUUECFlsvH4eHcN1FEOKGiLzadGDszyXz6OhyZWejmkPLrUy2NvcAXxmGDWJJjHhDLiNIIsCNBpwoQrsk_6RBeUyjJYog_2UYSUTEQyaDFolJeGBJRxT7d0lCEUNgw6DLgOBqa3-LSXcj4L3XMEIDnFiMdwmt-ZmOZ0Kjq0q66eU0zyIszZkV7AF8v31Ve5sbD0Wa0eUl_t-lQ-BLgTaEJ2dBCEqO9mX0P03Iawm4CQEjkK09qe1qmklxN8TXjjf_4blcvP-Ag" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 22 bytes</h1>
<pre><code>_2«Ɠ»3,‘ŻạⱮ«4§&lt;11×RŒg§
</code></pre>
<p><a href="https://tio.run/##ATQAy/9qZWxsef//XzLCq8aTwrszLOKAmMW74bqh4rGuwqs0wqc8MTHDl1LFkmfCp///OTX/MTAw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Takes page count as a command-line argument and page number from standard input. 1-based, using 0 for elided pages.</p>
<h2>Algorithm</h2>
<p>In order to handle the special case of showing five pages at one end if the active page happens to be there, the page number <span class="math-container">\$p\$</span> is clamped into the range <span class="math-container">\$[3, n-2]\$</span> (this is impossible if there are 4 or fewer pages, but in that case, the algorithm gives the correct result regardless of the page number because the first two and last two pages cover the whole range). The idea is that instead of having a special case, we can just use the &quot;natural&quot; behaviour of showing pages within two spaces of the current page in order to show the five pages at an end.</p>
<p>For each page, its page number is then compared to <span class="math-container">\$0\$</span>, the clamped value of <span class="math-container">\$p\$</span>, and <span class="math-container">\$n+1\$</span>, looking for the absolute distance. If the page is within two pages of any of these anchors, then we want to display its page number. We also want to display a page if it's within three pages of two of the anchors (if the anchors are on the same side of the page, it'll necessarily be within two pages of one of them because no two anchors can be in the same place; if the anchors are on opposite sides, then they're forming a one-page gap which needs to be displayed rather than elided). To accomplish this check, any absolute distance that's 4 or greater is clamped to 4, and then the three absolute distances are added together. If we're within two pages of any anchor, the sum will be at most <span class="math-container">\$4+4+2=10\$</span> (but could be lower). If we're within three pages of two anchors, the sum will be at most <span class="math-container">\$4+3+3=10\$</span> (again, it could be lower). If neither of these conditions hold, the sum will be at least <span class="math-container">\$4+4+3=11\$</span>. So we can check whether a page should be displayed by seeing whether the sum is in the range <span class="math-container">\$[0,10]\$</span> or not.</p>
<p>Once the list of pages to include has been determined, they're converted into a list of page numbers of the appropriate format (by pointwise-multiplying the &quot;should be included&quot; boolean by the page number, and then collapsing runs of consecutive zeroes). The runs of consecutive zeroes can be detected by looking for runs of consecutive equal elements, because all the included page numbers will be different from each other.</p>
<h2>Explanation</h2>
<pre><code>_2«Ɠ»3,‘ŻạⱮ«4§&lt;11×RŒg§
   Ɠ                     Read and parse standard input
  «                      Clamp to at most
_2                         {the argument} minus 2
    »3                   Clamp to at least 3
      ,                  Form a 2-element list with
       ‘                   {the argument} plus 1
        Ż                Prepend 0
          Ɱ              For each number from 1 to {the argument}
         ạ                 take its absolute difference with {each list element}
           «4            Clamp to at most 4
             §           For each {page}, sum the three clamped differences
              &lt;11        1 for sums below 11, 0 for sums at least 11
                 ×       Multiply
                  R        {pointwise} by a list from 1 to {the argument}
                   Œg    Group consecutive equal elements
                     §   Replace each {group} with its sum
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <del>34</del> <del>32</del> <del>30</del> <del>29</del> 28 bytes</h1>
<pre><code>R©ạÞḣ5;⁸’¤;2ḣ⁸Ṭµ+3\ỊŻ¬o×®Œg§
</code></pre>
<p><a href="https://tio.run/##AUQAu/9qZWxsef//UsKp4bqhw57huKM1O@KBuOKAmcKkOzLhuKPigbjhuazCtSszXOG7isW7wqxvw5fCrsWSZ8Kn////MTL/Ng" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Thanks to Unrelated String for -2 byte.</p>
<h3>Explanation (outdated)</h3>
<pre><code>R©                       Range and copy to register.
   Þ                     Sort by...
  ạ                        Absolute difference with p.
    ḣ5                   First 5 elements.
      ;⁸’¤;2             Append n-1 and 2.
            ®œ&amp;          Intersection with register, for the special case that n=1.
               Ṭ         Untruth (boolean array from truthy indices).
µ                        Chain separator.
ṡ3                       All slices with length 3.
  §                      Sum each slice.
   2=                    True if equals to 2.
     1;                  Prepend 1.
       |                 Vectorized OR with the result of the previous chain.
        ×®               Vectorized multiplication by the register.
          Œg             Group nearby equal elements. Only possible for the zeros.
            §            Sum each group.
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 98 bytes (@xnor)</h1>
<pre>lambda n,k:[1,2,3*(k&lt;7),*range(max(6,min(k,m:=n-2))-2,min(max(6,m),k+3+2//k)),m*(k+6&gt;n),n-1,n][:n]</pre>
<p><a href="https://ato.pxeger.com/run?1=lZLRToMwGIUTL_cUf3bVjh9HC2yUyF4EuWARlACFTGb0WbxZYvSd9GlsYegQ4rKLJuWc75y_bXj9qF-ah0oe3tLg9n3fpKb3uS3icnsXg8TcDxlytBckv1lTXOxieZ-QMn4mKywzSXIs_UCanFKTt8LRopgbtsGXy5xSLFXaWG0kRWkylFHoy6iflFY7KCCTUNWJJBb1Z0DUWIoVBFDGNUme4gKL68e6yBoyh2ADc0pnUO8y2ZAwA5U3GeiaTNekbToKggq7Le0mHb6u9uoqwCJdEbJoFvLfLwTeCXwguAMCwUZwENzOcacdpoTVhKVUhDWChyBUraUWO-JTTT1uslOYn-1ueb34kV-f8tqdPEkfsM8H2gn67WwdsKzpN-o40Q6wfkC1_VMuVLVQ3cIb0UJcAnuXwO4IVscWjnb-DzqjIB-HBzfvfr9v" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 101 bytes</h3>
<pre>lambda n,k:[1,2,3*(k&lt;7),*range(max(4,min(k-2,n-4)),min(max(6,n-2),k+3+2//k)),(n-2)*(k+6&gt;n),n-1,n][:n]</pre>
<p><a href="https://ato.pxeger.com/run?1=lZLRToMwFIYTL_cUJ7tqt4OjBTa6yF4EuWARlACFTGb0WbxZYvSd9Gk8hU03IS67aNJz_u__T9v09aN-aR4qvXtLg9v3bZNa_mdSxOX6LgaN-TIUKNGZsPxmwXGyifV9wsr4mblYZprllkRtuZy3lenPqZYc86kzlbNZTgozDQqYzleakypQR-FSR_th67TaQAGZhqpONLP5cgSMJnOsIIAyrlnyFBdYXD_WRdawMQQrGHM-gnqT6YaFGZDfEmBiMhOTtu4oCCrstrybtPu62tJtQEQmIhTRKJS_FYLsGvKk4Z0QCA6Ci-B1ijesCGrMByTqIiwQfARFsTYtsceHkg64JY5heTa75c2Se35xzBt18CQHg3Pe0E4wb-cYg20Pv1HHqXaA_QPS9k-4omhF2crv0UpdAvuXwF4PpmMr1yj_G92eUfbNJzfvvt83" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 110 bytes (@tsh)</h3>
<pre>lambda n,k:range(1,-~n*(n&lt;9))or[1,2,3*(k&lt;7),*range(max(4,min(k-2,n-4)),min(n-2,k+3+2//k)),(n-2)*(k+6&gt;n),n-1,n]</pre>
<p><a href="https://ato.pxeger.com/run?1=lZLBToNAEIYTj32KSU-77WDZBVq2KX2RyoHGogRYCFKjF1_ESxOj76RP4yy02gqx6WGTnZnv_2dms68f5XN9X-jdWxzcvG_r2PI_dRbl69sINKbzKtJ3GybQetEjpheK86JaCZTojFi6mHEctUQePTEX80Sz1JKoLZfzJtIUpWNnLCeTlFIm5qQcT5eaEyZQh_uu67ioIINEQ1FuNLP5fACMRuBYQAB5VLLNY5Rhdv1QZknNhhAsYcj5AMoq0TVbJUB6S4CxSYxN3KjDICiwvfK20-7raksrgAiNxUqEg5X8jRBkm5AnCe-EQHAQXASvrXj9FUGJaU-JsggzBB9Bka1NR-zxPqcDboljWJ71bnhz5J6fHfOm2jvJQeCcFzQdzNs5RmDb_W_UcqppYP-AdP1jrshakbfyO7RSl8D-JbDXgWls5ZrK_0K3I5Rd8cnm7ff7Bg" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Old <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 112 bytes</h3>
<pre>lambda n,k:range(1,-~n*(n&lt;9))or[1,2,3*(k&lt;7),*range(max(4,k-2--2//(k+~n)),min(n-2,k+3+2//k)),(n-2)*(k+6&gt;n),n-1,n]</pre>
<p><a href="https://ato.pxeger.com/run?1=lZLRToMwFIYTL_cUJ7tqx6mjBTa6jL0IcoFxKAEKQWb0Zi_izRKj76RPYwubbkJcdtGk_c_3_-e06etH9dI8lGr3lgQ375smYf5nlcfF7V0MCrNFHav7NeHItmpC1FJSWtYhR4HOhGTLOcVJRxTxM3ExY4IxMZ2SzNoqSrFIFVFMYGY5lpYzLZkz1V5rtlIUFeOoon3f26SsIYdUQVmtFbHpYgRED0GxhACKuCLrpzjH_PqxytOGjCFYwZjSEVR1qhoSpqD9jIOJSU1M0rqjICix29Ku0-7raqMvATwyESGPRqH4PSGIThAngndCIDgILoLXVbzhCtfCbKCkVYQ5go8gdaytF9_jQ0kHnPFjWJzNbnmzxJ6fH_OmOjjJweCcN7QdzNs5xmDbw2_UcbJtYP-AevsnXOpoqbOl36OlvAT2L4G9HqzHlq6p_G90e0bRN5_cvPt-3w" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Thanks to @tsh for spotting typo.</p>
<p>1-based, 0 for ellipsis. Outputs a range object instead of a list if n&lt;9. If that is not acceptable we can add 3 bytes or switch to python 2.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>45</s> <s> 44 </s> 38 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<p><sub><a href="https://codegolf.stackexchange.com/questions/170188/crossed-out-44-is-still-regular-44"><em>Crossed out &amp;nbsp;44&amp;nbsp; is no longer 44 :)</em></a></sub></p>
<pre><code>4ÝÍ+¤I-F&lt;}¬(ƒ&gt;}3LìI2Ý-«ILÃïêD¥Θ2ä1.ý˜*
</code></pre>
<p>Inputs in the order <span class="math-container">\$p,n\$</span>. Outputs with 0 for the ellipsis.</p>
<p><a href="https://tio.run/##AUsAtP9vc2FiaWX//zTDncONK8KkSS1GPH3CrCjGkj59M0zDrEkyw50twqvKkjDigLp9ypJAfcOqRMKlzpgyw6QxLsO9y5wq//85NQoxMDA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVCqEvYf5PDcw/3ah9aEqHrZlN7aI3GsUl2tcY@h9dEGB2eq3todYTP4ebD6w@vcjm09NwMo8NLDPUO7z09R@u/zv/oaEMdw1gdIGkEJI3ApKGOKZA0BZNmOoaGYA6YAvJACszhlDFYuaGBAYg2MICyLC1hDAsYwxTGMAEzYgE" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Create list <code>[1,2,3,p-2,p-1,p,p+1,p+2,n-2,n-1,n]</code>, while keeping <span class="math-container">\$p-2\$</span> and <span class="math-container">\$p+2\$</span> in bounds, and remove any overlapping duplicated values:</p>
<pre class="lang-python prettyprint-override"><code>4Ý          # Push list [0,1,2,3,4]
  Í         # Decrease each by 2 to [-2,-1,0,1,2]
   +        # Add each to the first (implicit) input p: [p-2,p-1,p,p+1,p+2]
    ¤       # Push the last value / maximum (without popping the list): p+2
     I-     # Decrease it by the second input n
       F }  # (If it's positive) loop that many times:
        &lt;   #  Decrease the values in the list by 1 each iteration
    ¬       # Push the first value / minimum (without popping the list): p-2
     (      # Negate it
      ƒ }   # (If it's now non-negative) loop that + 1 amount of times:
       &gt;    #  Increase the values in the list by 1 each iteration
3Lì         # Prepend-merge list [1,2,3]
 2Ý         # Push list [0,1,2]
I  -        # Subtract each from the second input n: [n,n-1,n-2]
    «       # Merge that list
IL          # Push a list in the range [1,n]
  Ã         # Only keep those values from the list, removing out of bounds values
   ï        # `Ã` converts the values to strings, so convert them back to integers
ê           # Sorted-uniquify the list
</code></pre>
<p>Step 2: Insert the <code>0</code>s where necessary, and output the result:</p>
<pre class="lang-python prettyprint-override"><code>D           # Duplicate this list
 ¥          # Pop the copy, and push its forward differences
  Θ         # Check for each whether it's equal to 1 (1 if 1; 0 otherwise)
   2ä1.ý˜   # Insert a 1 in the middle of the list:
   2ä       #  Split it into two equal-sized parts
     1.ý    #  Intersperse with 1
        ˜   #  Flatten it back to a single list
         *  # Multiply the values at the same positions
            # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8</a>, 103 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda n,m:[S&amp;{i+1}and i for i in range(n)if{i}&amp;(S:={0,1,2,*range(min(n-5,m-2),max(6,m+4)),n-2,n-1,n})]
</code></pre>
<p><a href="https://tio.run/##nZFBasMwEEX3PcVAIUjNGCTZSqxATpFlmoVK6lRQTYzJosX47K7sUohtmZoIRgv9/@aPpPL79nGlNC@rtti/tp/Wv50tEPrd8bCq3Vo2ls7goLhWYXcElaXLOyPuito1K3bY7WuBEhW@/CreEaNEo08UR2@/2Ab9OuMcKVGhJFLDT21ZObqxgkkECWElknN4hqM8Pf1JaiwhqIGq5lUdYRFShAxBD2x6gU2G882cLUgIW4QcwYRUEUoOUf0fmsgIqJZl9mxXashuJ2znjE47gtOFcJ/cfVJ6BwvRv/zM1B1i@lwxZoSYBpoQZ0KeyecwY@AhLH8M0zEs3M5knbioRRZroaZt7p@q/QE" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>0-indexed. Use <code>set()</code> for ellipsis. And it can be <a href="https://tio.run/##nZHLasMwEEX3/YqBQpCaMehhJVYgX5FlmoVL61RQTYzJIsH4213JpRA/0poIZqN7z9zRqLyeP0@ks7Jqi@1r@5X7t/ccCP1mv1vUbimb4lSBA0dQ5XT8YMRdUbtmwXabbS1QosKXH8U7YpQY9Inm6PMLW6Ffas6REhVKIjX80JaVozMrmESQEA7n8Ax7eXj6FVRfQFA9Td3TzIhD0AgpgumZzL8mGe5X06YgIKwRMgQb8kQo2QfN32AiJzA1J68jY6k@uR6Q0Tc55wDVs9AuNX6JvkGF6HY9OW8EbJcphoQQwzAbomzIstk9yFp4AMoegcwYCq@yaZRmNUjHDdS4ye2C2m8" rel="nofollow noreferrer">97 bytes</a> if we can output each page numbers as a set.</p>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 106 bytes</h1>
<p>Expects <code>(n)(p)</code>. The output is 1-indexed, with <code>0</code> for ellipsis.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;g=(p,b=k=i=[])=&gt;++k&gt;n?b:g(p,k&lt;(p&lt;3?6:3)|k&gt;n-(p+3&gt;n?5:2)|(p-=k)*p&lt;9?[...b,...k&gt;++i?[k+~i?0:i]:[],i=k]:b)
</code></pre>
<p><a href="https://tio.run/##pZGxboMwEIb3PsWNdjEEm5hghOFBEENIE0QdAWqqTlFfnR50aQAjqgy@wfd/353h/fh1vJ0@6u7Tbdq3c3/RfaPTSpOOldroWucF1anjmLTJyrjCa5OQLgmyMA7oHW9d0jkBNmUs6J10rjb0tUtUlnueVzIsBuk6y43zXWd@XBdxXrBamyIuaX9qm1t7PXvXtiIXAsDpWCjsdpDz4mXaFw99BsISEasRObUwCBjsGUhLVm7K8nH7cCnLIGRwYBAxUAy4j4dbeLnGu9xOiy3TR8FwhEVweBAM8cXllw3BJsO4A7Z4MDVw37f@ml9OjRv4i@BQpqMVDlY4WUXrLDafYKMnWDln8cUKn6zkfzz7uUfMXX@/Yf8D" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 158 bytes</h1>
<pre><code>.+
$*
\G1
$`1 
¶

O`1+
\b(1+) \1\b
&lt;$1&gt;
(?=(1+ ){0,2}&lt;)((1+ |&lt;1+&gt; ){5}).+ 1+( 1+ 1+)
$2...$4
(1+ 1+ )1+ .+(( 1+| &lt;1+&gt;){5})(?&lt;=&gt;( 1+){0,2})
$1...$2
&lt;|&gt;

1+
$.&amp;
</code></pre>
<p><a href="https://tio.run/##JU4xDsIwDNzvFR4CSgiK4tAAldIyMjKwdiiVGFgYEBvtt3gAHytOKvnu7HMu8uv@fjxv80pfe5qdhdqgOzNUz4TfF7j0bNENmq2hjrsBSXELfWrEIfPx2zAlo/MwJratWHEyzhJbLZAyUME5pyroMpMROKvzeqScKRF9Sk2bveVPSXFOBaSxBeQG5dbzzMQIBQFRNFIEM@0zSRdyF@gA3mXyXp4U9r5oXS9yXCQuUv0B" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Takes newline-separated values but link is to test suite that splits on spaces for convenience. Explanation:</p>
<pre><code>.+
$*
</code></pre>
<p>Convert to unary.</p>
<pre><code>\G1
$`1 
</code></pre>
<p>Generate all of the page numbers.</p>
<pre><code>¶

</code></pre>
<p>Concatenate the current page.</p>
<pre><code>O`1+
</code></pre>
<p>Sort it into position, so it's now a duplicate.</p>
<pre><code>\b(1+) \1\b
&lt;$1&gt;
</code></pre>
<p>Change the duplicate into a marking.</p>
<pre><code>(?=(1+ ){0,2}&lt;)((1+ |&lt;1+&gt; ){5}).+ 1+( 1+ 1+)
$2...$4
</code></pre>
<p>Elide at least two page links starting from three pages after the current page to two pages before the last page, but also not starting before page 6.</p>
<pre><code>(1+ 1+ )1+ .+(( 1+| &lt;1+&gt;){5})(?&lt;=&gt;( 1+){0,2})
$1...$2
</code></pre>
<p>Elide page links before the current page, using the same rules but mirrored.</p>
<pre><code>&lt;|&gt;

</code></pre>
<p>Remove the marking for the current page.</p>
<pre><code>1+
$.&amp;
</code></pre>
<p>Convert to decimal.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 151 bytes</h1>
<pre>lambda l,k:re.sub(&#39;  +&#39;,&#39; . &#39;,&#39; &#39;.join(str(i)if(i&lt;2 or i&gt;l-3or k-3&lt;i&lt;k+3or(i&lt;5and k&lt;6)or(i&gt;l-6and k&gt;l-7))else&#39;&#39;for i in range(l))).split(&#39; &#39;)
import re</pre>
<p><a href="https://ato.pxeger.com/run?1=nZNLbsIwEIYXXZFTTNk4LibKg1cQ4SIhQgGc1iWEyDZSe4luu-iGRds7taepnRQIgQrRhePxzHz_b1mZt8_8WT6ss-17AsHkYyOT9uDrNY1Xs0UMKVkOObXEZmYigBYiCCzQX2Q9rllmCslNhllispELaw5snLY9tS_b3oiNli0Vq1I3zhawHPWwPqmOXnFWQR9jmgqKUKJZYBnwOLunZooxtkSeMqlsETbYKl9zCZyW1_u-eTE0IamQ03ksKAH6lNO5pIspp2KTSi0VGo0wdAjYERAInSgiOuHuEwTcQ86p57rVPgIegQ6B7qHY-bPoODo-qRLoEegTGBDwlZ-tllMhzujtCGShOuBesigZVXXcCtOrMEXH2VtVIe8yVFrpN_R2lG2ffb3fXr9wsqvNvl838ZWFrzz8wXlgcC3QvxbonACezqrVvQx7J7B7KnD8GtHQaOScZdI8_NfNYDyRTZKYd_scxru2sJi-toOBJcBuAyUHepy0LuwnqjYZkcJjIagapyNVCAL4n6ABUI7ldlvuPw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Returns a list of strings. Abuses regex to remove duplicate spaces. Elipsed pages are replaced with a <code>.</code></p>
</div>
<div id="pu9" class="pu"><h1>Python3, 194 bytes:</h1>
<pre class="lang-py prettyprint-override"><code>lambda n,p:F([[-1,i][i&lt;3 or p+4-2*(p-2&gt;0)&gt;=i&gt;=p-2-2*(n-p&lt;2)+(n-p==1)or i&gt;n-2]for i in range(1,n+1)])
F=lambda j,l=0:j if[]==j else[[[-1,l+1][l+2 in j],j[0]][j[0]!=-1]]*(j[0]+l!=-2)+F(j[1:],j[0])
</code></pre>
<p><a href="https://tio.run/##lZLLbsIwEEXXzVdM2RATp4odUgjCWbLsD7heBJG0joyxkqhSv56OebUUBGJhZx7nznUsu@/@c2PTqWu3tXjfmnK9XJVgqZstQiljRrWSep7CpgUXjWM@Cl3Mi4QUQhcCQ1@xsZtzEvmvEIwgqgsbc1X7CLSFtrQfVciojRhRJFiIg01DjUhmDehaKiEaqExXyZ2riZiSJuJe3SjayEQp6fdnETOlRqGPI4MZGi8wY7M9RbYdCBgMBoFkFJgCUYBkKpD8N6PA9wV@VsjOCAophTGFbN/JrncYFl6vtLBKYUJhSiHHsQkudsCzG3jM/sL87uwd7xc/8JO/vO9ePclRkN4X7Bz83aVekCTX72jP5TuD5ARi@G94jqNznJ1PL@g8fwSePgJnFzAeOx/7zm3h@ELIL8Vnf@4f3unZ19r0VRu@bWxFoXvpnNF9OHy3Q0JmwVNJl/hS16ULq6/SUNBHwHsigkTXVW0PdTgqCQgByyBwrbaI9FXXd@A8sBqS7Q8" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/249556/">249556</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




