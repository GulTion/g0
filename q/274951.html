<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::274951</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>1303</td><td>sed 4.2.2</td><td>240815T125547Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/274997#274997">guest430</a></td></tr>
<tr d-ix="1"><td>101</td><td>Charcoal</td><td>240816T084104Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/275008#275008">Neil</a></td></tr>
<tr d-ix="2"><td>048</td><td>Pyth</td><td>240814T221156Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/274988#274988">CursorCo</a></td></tr>
<tr d-ix="3"><td>044</td><td>05AB1E</td><td>240814T083430Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/274969#274969">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed 4.2.2</a>, 1303 bytes</h1>
<pre><code>s/^0$/0/;s/^1$/1/;tg
x;s/^/0001/;x
:k;s/[1-9]/&amp;#/g;y/123456789/012345678/;s/#0/9#/;tk;s/0//g
G;s/(.*)\n(.*)/\2\n\1/;bi
:;G;s/\n.*\n/\n/;h;s/\n.*//;x
:i;y/10/ab/;G;s/\n//2
:c;:h
tw;:w;s/(.*)\b([ab]{2,})\b( *)\n(#*)/\2\n\3\1\n\4/;Tn
h;s/\n.*//;s/^/\n\n/
:b;s/\n/#&amp;/
:a;s/^([&lt;0-9]*)#/\1&lt;&lt;123456789#01&gt;/;s/(.)&lt;.*\1(#*.).*&gt;/\2/;ta
s/\n((\[ab]\{\&amp;})*)\n/\n\1[ab]{\&amp;}\n/
s/(.*)\n(.*)\n(.*)/sed 's%.*%\2%;i\3\\n\1'&lt;&lt;&lt;'\1'/e
s/(.*)\n(.*)\n(.*)/sed -r 's%^\3$%\&amp;\\n\2%;t;i\2\\n\3\n:'&lt;&lt;&lt;'\1'/e
T;s/\{[0-9]+}/{\&amp;}/g;tb
:y;s/[1-9]/&amp;#/g;y/123456789/012345678/;s/#0/9#/;ty;s/0//g
s/(#+)\1/\1/
:s;s/#/&lt;&lt;123456789#01&gt;/;s/(.)&lt;.*\1(#*.).*&gt;/\2/;ts
s/(.*)\n(.*)/sed -r 's%.{\2}%\&amp;\\n%g;i\2'&lt;&lt;&lt;'\1'/e
:x;s/[1-9]/&amp;#/g;y/123456789/012345678/;s/#0/9#/;tx;s/0//g
s/(#+)/\1\1/
:d;s/#/&lt;&lt;123456789#01&gt;/;s/(.)&lt;.*\1(#*.).*&gt;/\2/;td;
s/([0-9]+)\n(.*)/sed -z 's%\\n%\\n\\n\\n%\1'&lt;&lt;&lt;'\2'/e
s/.*/sed '2~2d'&lt;&lt;&lt;'&amp;';sed '1~2d'&lt;&lt;&lt;'&amp;'/e
s/(.)\n/\1/g;y/\n/ /;G
s/\n[ba]*\n/ /
/[ab]{2,}/bh
h;s/\n.*//
:n;s/.*\n//;s/[ab]/&amp; /g;y/ /\n/
:f;:e;s/b\nb/b/;s/b\na/a/;s/a\nb/a/;s/a\na/aa/;te
/^\n*a*\n*$/!s/.*/sed -rn 'h;sa.aa;x;:;sa.*a\&amp;amp;T;x;sa.aa;x;t'&lt;&lt;&lt;'&amp;'/e
s/\n(\n*)/\1/g;/\n/bf
y/a/#/;s/b//;G;s/\n.*\n/ /
Ta;s/^(#*) \1([01]*)$/\2/;tg;s/#* //
s/^(#*)([01]*)$/\2\n\1/;h;s/\n.*//;T
s/10(0*)(1*)$/01\2\1/;t
s/(0*)0(1*)/\21\1/;t
y/1/0/;s/.*/&amp;&amp;&amp;&amp;/;t
:g
</code></pre>
<p><a href="https://tio.run/##lVRtb5swEP7uX8FEQgJdOJu022Kjft0fyDecSmZJ02garQJSSaPspy97zoSWfpi0IgTn8708z93Z9WZ9bs2Lac813ckRSTIQ1IgUmWYrWl6RlBLLVuifWBZqtlhRFNLWHEhl8@ubL1@/LUj2IgcIJS1CBGB7SbQV3yFM0yS2FX/JZrayCFnuhDa8Z6s0sRV@ZB4uS/IZd5xEkivpYkeUCf3D6AfRPBv93Mctp4UrV8fs84nlwGcK@0xzq/C9JrOsxCA8U4O@IqHLLnYYQXa8MS1yCZ5JHJJVef7KM5TqlnzSOAdkhSRpnCa3SAS@TnCY6dQyGHu00SlmJJxFeXzQcL5hMS4lqTfrYFKP02Rss7HZATM7TfI8n@BHm3/5zPbsdmfno7GN2AfeDfwz64lXehBiySyPBRO7OhGDQRObUujDB/t66PsKUOFVjFbiFbpmE/rvatXvOA3YpEebnTo64y1zGXDQ7Qextu@xAqnHuv4Y1rVh/6507wC/MGAGyvX277hvW9a1DbPmm5v9ztZ@I5oYr1Bvikt//awozwpSgJn3A1WUbpV4haB@zKl8GMyy0JXhTHw@uD4woijwgQLyE35v9AY7pa1KKqmTHDmWHOt6CTqIzUbQna0Sh4jJiD69spjtq2CCvC51zrRGs5Q4G7lfT2YJRb/RDImhXggTd9QYTnkvDsgYehxEwysAHJfdCcTxDdCGQiocw1HXhi13LQmIj5C3GGx3V8rgfC9hpORUwkqxiVQw4nuNaw2tZDUcVafEJHXXH5wjPKzT2/NZCiUyMRfX4ubP41Oze6zq82z/Fw" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>did you know sed is turing complete? I happen to know that, and it makes me do things I shouldn't...</p>
<p>I have finally fixed the shuffling. splitting an arbitrary length string into 4 quadrants of a square is stupidly hard. I will come back and explain more and golf a lot, but this works on any inputs, even 39 and 70 (you just have to wait a few years or something like that...)</p>
<p>tio will finish on small numbers like 5 and 9, but even 6 is asking a bit much of it. hopefully my golfing will speed things up significantly.</p>
<p>the formatting is even worse now, but I'll clean it up again as I golf it. sed is one of those weird languages that the more it's golfed, the more legible it gets. I'm sure even people not very familiar with sed can see that this has lots of room to golf with all the many nearly-exactly-repeated lines and duplicate commands...</p>
<p>the <code>\&amp;amp;</code> is not an html error, at this point I have started using sed to write and modify sed scripts to build this answer with and when I saw it show up inside of a command I thought it was too cute to change it back. (the actual command it's part of is <code>sa.*a\&amp;amp</code>, or more legibly written as <code>s/.*/\&amp;/mp</code>)</p>
<p>oh yeah, if you want to check the matrices are in the right order <a href="https://tio.run/##JcsxCoAwEETRfs8hEgM6u5bmAh7AMqUiNiYYGy/vusGpPg@mbKvqTBPNlGmngsHHEwiLpbBj3znxXQOWOEZBuM2rcmXEUX58IGCEekdrM1PlN@X7SGfR/voA" rel="nofollow noreferrer">this</a> outputs matrices infinitely starting at whatever matrix you input</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 101 bytes</h1>
<pre><code>Ｎθ≔⦃⁰⟦0⟧¹⟦1⟧⦄ηＷ∧¬§ηθη«≔⦃⦄η≔ＥιλζＦζＦζＦζＦζ«≔ΣＸ⟦νμλκ⟧²ε≔⁺Ｅ§ιν⁺ξ§§ιμπＥ§ιλ⁺ξ§§ικπδ¿∨¬§ηε‹ΣΣδΣΣ§ηε§≔ηεδ»»§ηθ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVFBasMwEKTH-hWLThIoEBcKpTn5GEhSQ4_GB8eWaxFZdiS7CQl-SS-htLRf6Rf6mkqOBamhFQhpZ2dmd6WXz7RIVFol4nR6b5t8cvd99TWXddus2nLNFN6SmRdozZ8kPk7vIUJTFFPw7c1HcUehMIRdwQUDHMgMr6oGB81cZmyPCwpbQiyFwNG7djaDyMXLpMacgjDEg4XzSgE-EPjrNE5O-tiWOKx2ps1IUiiNCYWNae_GVmXWzDFD0eq-kuvNVJSG1ON7Cg6-SJcmXRPrNNKJ_3WbQWeOrG-B54Af1PhlmCUsmNb9FHZnFnHBb6ZdcB7lMjFU6LzOCxWX45efvel1qod__YjQ5Fmg-NW_PQM_" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: Lots of brute force, so can only solve inputs with <code>4×4</code> outputs before the heat death of the universe.</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>≔⦃⁰⟦0⟧¹⟦1⟧⦄η
</code></pre>
<p>Start with solutions for <code>0</code> and <code>1</code>.</p>
<pre><code>Ｗ∧¬§ηθη«
</code></pre>
<p>Repeat until a solution for <code>n</code> is found. (Also makes a copy of the solutions so far.)</p>
<pre><code>≔⦃⦄η
</code></pre>
<p>Start building solutions of twice (4×) the size.</p>
<pre><code>≔ＥιλζＦζＦζＦζＦζ«
</code></pre>
<p>For all possible sets of subsquares:</p>
<pre><code>≔ΣＸ⟦νμλκ⟧²ε
</code></pre>
<p>Calculate the value.</p>
<pre><code>≔⁺Ｅ§ιν⁺ξ§§ιμπＥ§ιλ⁺ξ§§ικπδ
</code></pre>
<p>Calculate the resulting square.</p>
<pre><code>¿∨¬§ηε‹ΣΣδΣΣ§ηε§
</code></pre>
<p>If this is a better square, then...</p>
<pre><code>≔ηεδ
</code></pre>
<p>... add or replace the previous solution for that value.</p>
<pre><code>»»§ηθ
</code></pre>
<p>Output the square for <code>n</code>.</p>
<p>108 bytes for a slightly less forceful version:</p>
<pre><code>Ｎθ≔⦃⁰⟦0⟧¹⟦1⟧⦄ηＷ∧¬§ηθη«≔⦃⦄η≔ΦＥιλ¬›×κκθζＦζＦζＦζＦζ«≔ΣＸ⟦νμλκ⟧²ε≔⁺Ｅ§ιν⁺ξ§§ιμπＥ§ιλ⁺ξ§§ικπδ¿∨¬§ηε‹ΣΣδΣΣ§ηε§≔ηεδ»»§ηθ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVHdToMwFI6X8hQnXJWkSzZvXNwVN5olOkn0jnDBoEhDKYyCW7bwJN4sRqPP5Ev4Cp52NJlLlATafuf7OYe-fCZ53CRVLPb7967NRtOvs--5rLt20ZVL1pCVN3N8pfiTJLvxFYTu2I0oTPRu4kY9hRwJ65wLBsSXKVlULfHbuUzZhuQUVp6nKR7snHNrM4js-ZqLFoPu4ppwCgL52uOmYbGGH3nJFCkoFJ5xw-9Wi7OqAbL14K8V82zAQ1eSoFqjWSgplJiBbjjEhTZj2swyA9Ep04idABuSSDL4hoKFj8ollmvT1olO_K8rBh0uqWmBZ0Dum9P_xzThlillptBvqhF7-M3UDxxGOS4MCb3TO0HD5en9zN7UMlHD7X-E7uhZuNHr5fQA_AA" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: As above but when generating the list of possible solutions, excludes values whose square exceeds the input.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 48 bytes</h1>
<pre><code>M?Gho_SsNmsCMc2sgLtGdfqHs*VTT^UhH4]]Hgf&gt;2eSsgTQZ
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/39fePSM/PrjYL7fY2TfZqDjdp8Q9Ja3Qo1grLCQkLjTDwyQ21iM9zc4oNbg4PSQw6v9/SwA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Can run up to about 30 before timing out online. Try a more performant, 5 byte longer version <a href="https://tio.run/##K6gsyfj/39fePSM/PrjYL7fY2TfZqDjdp8Q9Ja3Qo1grLCREzzk0o9jBw0jBJDbWIz3Nzig1uDg9JDDq/39DAwMDAA" rel="nofollow noreferrer">here</a> (can easily do 1000 without timing out). The faster version is the same except instead of looking at all permutations of 4 numbers in the entire range of the input, we only look at all combinations (with repetition) of 4 numbers in the range up to the square root of the input.</p>
<p>This answer uses a recursive approach.</p>
<h3>Explanation</h3>
<pre><code>M?Gho_SsNmsCMc2sgLtGdfqHs*VTT^UhH4]]Hgf&gt;2eSsgTQZQ    # implicitly add Q
                                                     # implicitly assign Q = eval(input())
M                                                    # define g(G,h)
 ?G                               ]]H                #   recursive base case, if G==0: return [[H]]
                              UhH                    #   list(range(H+1))
                             ^   4                   #   4x repeated cartesian product
                     f                               #   filter this list on lambda T (this keeps only quadruplets whose squares sum to the desired value)
                        s                            #     sum of
                         *VTT                        #     vectorized product of T and T
                      qH                             #     is equal to H
         m                                           #   map over lambda d (this constructs possible outputs from the recursive calls)
                gLtGd                                #     map g over d with a first argument of G-1
          sCMc2s                                     #     take four square matrices and put them in a bigger square
    o                                                #   sort by lambda N
       sN                                            #     flattened N
      S                                              #     sorted
     _                                               #     reversed
   h                                                 #   take the first element
                                      f        Z     # find the first integer which satisfies lambda T, counting up from 0
                                            gTQ      #   g(T, Q)
                                           s         #   flatten list
                                         eS          #   largest element
                                       &gt;2            #   is less than 2
                                     g          Q    # apply g on the result and the input
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>45</s> 44 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>∞Íonîü2íε`U0LsãεXô]€`.Δ[D˜g5‹#2δô2ô€øOOn}OOQ
</code></pre>
<p>Brute-force. Generates all <span class="math-container">\$2^k\times 2^k\$</span> sized matrices consisting of 0s and 1s, and will output the first valid one for the given input-integer <span class="math-container">\$n\$</span>.</p>
<p>-1 byte by changing the <code>∞&lt;on1š</code> (-1 and prepend <span class="math-container">\$1\$</span> manually) to <code>∞Íonî</code> (-2 and ceil the <span class="math-container">\$0.25\$</span> to <span class="math-container">\$1\$</span>)</p>
<p><a href="https://tio.run/##AU4Asf9vc2FiaWX//@KInsONb27DrsO8MsOtzrVgVTBMc8OjzrVYw7Rd4oKsYC7OlFtEy5xnNeKAuSMyzrTDtDLDtOKCrMO4T09ufU9PUf//MTU" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##AWIAnf9vc2FiaWX/MTXGkk4/IiDihpIgIj9OViL/4oiew41vbsOuw7wyw63OtWBVMExzw6POtVjDtF3igqxgLs6UW0TLnGc14oC5IzLOtMO0MsO04oKsw7hPT259T09ZUf8iLlYs/w" rel="nofollow noreferrer">verify the smaller test cases up to n=15</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Generate a list of all possible outputs:</p>
<pre class="lang-python prettyprint-override"><code>∞          # Push an infinite positive list: [1,2,3,4,5,...]
 Í         # Decrease each by 2 to start at -1: [-1,0,1,2,3,...]
  o        # Take 2 to the power each: [0.5,1,2,4,8,...]
   n       # Square each: [0.25,1,4,16,64,...]
    î      # Ceil each: [1,1,4,16,64,...]
ü2         # Create overlapping pairs: [[1,1],[1,4],[4,16],[16,64],...]
  í        # Reverse each pair: [[1,1],[4,1],[16,4],[64,16],...]
ε          # Map over each pair:
 `         #  Pop and push both to the stack
  U        #  Pop the top smaller value, and save it in variable `X`
  0L       #  Push pair [1,0]
    s      #  Swap so the larger value is at the top of the stack
     ã     #  Cartesian product to create all combinations using the 1s/0s
      ε    #  Map over each list of 1s/0s
       Xô  #   Split it into blocks of size `X`
]          # Close the nested maps
 €`        # Flatten the list of list of lists one level down
           # (which has as side-effect that it reverses the inner lists)
</code></pre>
<p><a href="https://tio.run/##ASsA1P9vc2FiaWX//@KInsONb27DrsO8MsOtzrVgVTBMc8OjzrVYw7Rd4oKsYP//" rel="nofollow noreferrer">Try just this first step online.</a></p>
<p>Step 2: Find the first matrix that's a valid reduction for the given input-integer:</p>
<pre class="lang-python prettyprint-override"><code>.Δ         # Find the first matrix in this infinite list that's truthy for:
  [        #  Start an infinite list:
   D       #   Duplicate the current matrix
    ˜      #   Flatten it to a list
     g     #   Pop and push its length
      5‹   #   If this length is smaller than 5 (e.g. either 4 or 1):
        #  #    Stop the infinite inner loop
   2δô2ä€ø #  Split the matrix into four corner-blocks:
    δ      #   Map over each inner row:
   2 ô     #    Split it into pairs
      2ä   #   Then split the entire list into 2 equal parts as well
        €  #   Map over each inner matrix:
         ø #    Zip/transpose; swapping rows/columns
   OO      #  Sum each inner-most matrix
     n     #  Then square those sums
  }        # After the infinite loop to reduce it to a 2x2 matrix:
   OO      # Sum the four values in this matrix as well
     Q     #  Check whether it now equals the (implicit) input-integer
           # (after which the found matrix is output implicitly)
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/2uX0nHTTRw07lY3ObTm8xejwlkdNaw7v8Pe3zasFEkAF0YY6MGgAwrE60QY6KBBJxBBDBKEGqh@vGsIisQA" rel="nofollow noreferrer">Verify the resulting <span class="math-container">\$n\$</span> for a given matrix to test just this second step</a> (minus leading <code>.Δ</code> and trailing <code>Q</code>). I've added <code>=</code> after both <code>OO</code>, so you can also see the intermediate steps of the reduction.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/274951/">274951</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




