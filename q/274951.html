<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::274951</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>apparently I was so tired when I was finishing the first time that I forgot that squares get bigger when you increase the length of a side the shuffling only works up to 4x4 squares right now first wrong answer is 39</td><td>240815T125547Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/274997#274997">guest430</a></td></tr>
<tr d-ix="1"><td>101</td><td>Charcoal</td><td>240816T084104Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/275008#275008">Neil</a></td></tr>
<tr d-ix="2"><td>048</td><td>Pyth</td><td>240814T221156Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/274988#274988">CursorCo</a></td></tr>
<tr d-ix="3"><td>044</td><td>05AB1E</td><td>240814T083430Z</td><td><a href="https://codegolf.stackexchange.com/questions/274951/sum-of-four-squares-grid/274969#274969">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><p>apparently I was so tired when I was finishing the first time that I forgot that squares get bigger when you increase the length of a side; the shuffling only works up to 4x4 squares right now (first wrong answer is 39, which takes way more than a minute on tio anyways). give me like a couple hours, I should hopefully have it fixed by then...<br />
<s># <a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed 4.2.2</a> <code>-r</code>, <s>812</s> <s>806</s> 803 bytes</s></p>
<pre><code>:a;s/[1-9]/&amp;#/g;y/123456789/012345678/;s/#0/9#/;ta;s/0//g
h;z;s/^/0/
:;H;y/10/!@/
:b;s/^/\n/
:c;s/^/#/
:d;s/#/&lt;&lt;123456789#01&gt;/;s/(.)&lt;.*\1(#*.).*&gt;/\2/;td
s/(.*)\n(.*)/sed -rn 's!(^| )([@!]{\1})([@!]{\1})([@!]{\1})([@!]{\1})([@!]{\1})([@!]{\1})([@!]{\1})([@!]{\1})($| )! \\2 \\3 \\4 \\5 \\6 \\7 \\8 \\9 \\n!;t;i\1\\n\2\nba;:;p;:a'&lt;&lt;&lt;'\2'/e
T;s/ (.+) (.+) (.+) (.+) (.+) (.+) (.+) (.+) \n/ \1\3 \2\4 \5\7 \6\8  /
tf;/^1.{,5}$/bf
:e;s/[1-9]/&amp;#/g;y/123456789/012345678/;s/#0/9#/;te;s/0//g
bc;:f;/[@!]{5}/bb;s/.*\n//
s/[!@]/&amp; /g;y/ /\n/
:g;s/@\n@/@/;s/@\n!/!/;s/!\n@/!/;s/!\n!/!!/;tg
/^\n*!*\n*$/!s/.*/sed -rn 'h;s!.!!;x;:;s!.*!\&amp;!mp;T;x;s!.!!;x;t'&lt;&lt;&lt;'&amp;'/e
s/\n(\n*)/\1/g;/\n/bg;y/!/#/
G;s/\n0.*//;T
s/^(#*)\n\1$//;th
g;s/.*\n//;T
s/10(0*)(1*)$/01\2\1/;t
s/(0*)0(1*)/\21\1/;t
y/1/0/;s/.*/&amp;&amp;&amp;&amp;/;t
:h;x;s/.*\n//
</code></pre>
<p><a href="https://tio.run/##rVLBjpswEL37K2yBEnAbxmZDdsFoxa39gNziRQobluyhbLRwaLvNr5e@Ic322kpFGvT8xn5jv5mhPUxTsXcD7ewqf6BFQJ37Rja9WWeb27uczBUS9gSG8oDcyPsNUSeO7jtgjYUo3Gc@aEhVWDQz7XvAxxkGQAeWoLJ8Vw@MvWfdKInLRHsbBTqJE31PPkWVg@CMjn3Pfxrag1y99nI5qKj@IeNoV6mHN2/P/wuFEFXS@xRxg1gjMsQGcYu4Q@SIXrnRPXsL5FPfN3tXuJMr9suyLJc@XVIrtniUjJIP8d/84JKEGkqmXDPjYhtUkyTGJ0e1Td4@ZueQmidRtP/YqfbaqebRFRCbX5udqeEGwfKeCC7vVAVBOQvKS9c65CvfV1TRBSlSjBRzVwQOcOwE1b7XCnI6JMXCf7p1dINKlHJf4RKQVn6hvpzcFsQ1Mc7OLdi4AdUjyMTkLa7Dd2n4VooH6JPjtIE6uS221pgXTIe3IYjxKLr3N81payKj48jqOIQ5MNdiF88UWMM0xsxeSPgIm@bjtMDHXHHkK/4WnCYrUrEWmch/vpzG55d@mFavvwA" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>did you know sed is turing complete? I happen to know that, and it makes me do things I shouldn't...</p>
<p>(I'll come back to golf this, clean up the formatting a bit more, and add an explanation later, but it's working and I want sleep. basically it does the same thing the other answers are; generating an infinite list of binary matrices in the right order and outputting the first one that matches the input. since there's no numbers in sed, that first step is so much easier than the second...)</p>
<p>I didn't even put the base conversion things in the header/footer this time so that byte count includes everything. you give it a decimal number and it outputs the binary number.</p>
<p>oh yeah, if you want to check the matrices are in the right order <a href="https://tio.run/##JcsxCoAwEETRfs8hEgM6u5bmAh7AMqUiNiYYGy/vusGpPg@mbKvqTBPNlGmngsHHEwiLpbBj3znxXQOWOEZBuM2rcmXEUX58IGCEekdrM1PlN@X7SGfR/voA" rel="nofollow noreferrer">this</a> outputs matrices infinitely starting at whatever matrix you input</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 101 bytes</h1>
<pre><code>Ｎθ≔⦃⁰⟦0⟧¹⟦1⟧⦄ηＷ∧¬§ηθη«≔⦃⦄η≔ＥιλζＦζＦζＦζＦζ«≔ΣＸ⟦νμλκ⟧²ε≔⁺Ｅ§ιν⁺ξ§§ιμπＥ§ιλ⁺ξ§§ικπδ¿∨¬§ηε‹ΣΣδΣΣ§ηε§≔ηεδ»»§ηθ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVFBasMwEKTH-hWLThIoEBcKpTn5GEhSQ4_GB8eWaxFZdiS7CQl-SS-htLRf6Rf6mkqOBamhFQhpZ2dmd6WXz7RIVFol4nR6b5t8cvd99TWXddus2nLNFN6SmRdozZ8kPk7vIUJTFFPw7c1HcUehMIRdwQUDHMgMr6oGB81cZmyPCwpbQiyFwNG7djaDyMXLpMacgjDEg4XzSgE-EPjrNE5O-tiWOKx2ps1IUiiNCYWNae_GVmXWzDFD0eq-kuvNVJSG1ON7Cg6-SJcmXRPrNNKJ_3WbQWeOrG-B54Af1PhlmCUsmNb9FHZnFnHBb6ZdcB7lMjFU6LzOCxWX45efvel1qod__YjQ5Fmg-NW_PQM_" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: Lots of brute force, so can only solve inputs with <code>4×4</code> outputs before the heat death of the universe.</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>≔⦃⁰⟦0⟧¹⟦1⟧⦄η
</code></pre>
<p>Start with solutions for <code>0</code> and <code>1</code>.</p>
<pre><code>Ｗ∧¬§ηθη«
</code></pre>
<p>Repeat until a solution for <code>n</code> is found. (Also makes a copy of the solutions so far.)</p>
<pre><code>≔⦃⦄η
</code></pre>
<p>Start building solutions of twice (4×) the size.</p>
<pre><code>≔ＥιλζＦζＦζＦζＦζ«
</code></pre>
<p>For all possible sets of subsquares:</p>
<pre><code>≔ΣＸ⟦νμλκ⟧²ε
</code></pre>
<p>Calculate the value.</p>
<pre><code>≔⁺Ｅ§ιν⁺ξ§§ιμπＥ§ιλ⁺ξ§§ικπδ
</code></pre>
<p>Calculate the resulting square.</p>
<pre><code>¿∨¬§ηε‹ΣΣδΣΣ§ηε§
</code></pre>
<p>If this is a better square, then...</p>
<pre><code>≔ηεδ
</code></pre>
<p>... add or replace the previous solution for that value.</p>
<pre><code>»»§ηθ
</code></pre>
<p>Output the square for <code>n</code>.</p>
<p>108 bytes for a slightly less forceful version:</p>
<pre><code>Ｎθ≔⦃⁰⟦0⟧¹⟦1⟧⦄ηＷ∧¬§ηθη«≔⦃⦄η≔ΦＥιλ¬›×κκθζＦζＦζＦζＦζ«≔ΣＸ⟦νμλκ⟧²ε≔⁺Ｅ§ιν⁺ξ§§ιμπＥ§ιλ⁺ξ§§ικπδ¿∨¬§ηε‹ΣΣδΣΣ§ηε§≔ηεδ»»§ηθ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVHdToMwFI6X8hQnXJWkSzZvXNwVN5olOkn0jnDBoEhDKYyCW7bwJN4sRqPP5Ev4Cp52NJlLlATafuf7OYe-fCZ53CRVLPb7967NRtOvs--5rLt20ZVL1pCVN3N8pfiTJLvxFYTu2I0oTPRu4kY9hRwJ65wLBsSXKVlULfHbuUzZhuQUVp6nKR7snHNrM4js-ZqLFoPu4ppwCgL52uOmYbGGH3nJFCkoFJ5xw-9Wi7OqAbL14K8V82zAQ1eSoFqjWSgplJiBbjjEhTZj2swyA9Ep04idABuSSDL4hoKFj8ollmvT1olO_K8rBh0uqWmBZ0Dum9P_xzThlillptBvqhF7-M3UDxxGOS4MCb3TO0HD5en9zN7UMlHD7X-E7uhZuNHr5fQA_AA" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: As above but when generating the list of possible solutions, excludes values whose square exceeds the input.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 48 bytes</h1>
<pre><code>M?Gho_SsNmsCMc2sgLtGdfqHs*VTT^UhH4]]Hgf&gt;2eSsgTQZ
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/39fePSM/PrjYL7fY2TfZqDjdp8Q9Ja3Qo1grLCQkLjTDwyQ21iM9zc4oNbg4PSQw6v9/SwA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Can run up to about 30 before timing out online. Try a more performant, 5 byte longer version <a href="https://tio.run/##K6gsyfj/39fePSM/PrjYL7fY2TfZqDjdp8Q9Ja3Qo1grLCREzzk0o9jBw0jBJDbWIz3Nzig1uDg9JDDq/39DAwMDAA" rel="nofollow noreferrer">here</a> (can easily do 1000 without timing out). The faster version is the same except instead of looking at all permutations of 4 numbers in the entire range of the input, we only look at all combinations (with repetition) of 4 numbers in the range up to the square root of the input.</p>
<p>This answer uses a recursive approach.</p>
<h3>Explanation</h3>
<pre><code>M?Gho_SsNmsCMc2sgLtGdfqHs*VTT^UhH4]]Hgf&gt;2eSsgTQZQ    # implicitly add Q
                                                     # implicitly assign Q = eval(input())
M                                                    # define g(G,h)
 ?G                               ]]H                #   recursive base case, if G==0: return [[H]]
                              UhH                    #   list(range(H+1))
                             ^   4                   #   4x repeated cartesian product
                     f                               #   filter this list on lambda T (this keeps only quadruplets whose squares sum to the desired value)
                        s                            #     sum of
                         *VTT                        #     vectorized product of T and T
                      qH                             #     is equal to H
         m                                           #   map over lambda d (this constructs possible outputs from the recursive calls)
                gLtGd                                #     map g over d with a first argument of G-1
          sCMc2s                                     #     take four square matrices and put them in a bigger square
    o                                                #   sort by lambda N
       sN                                            #     flattened N
      S                                              #     sorted
     _                                               #     reversed
   h                                                 #   take the first element
                                      f        Z     # find the first integer which satisfies lambda T, counting up from 0
                                            gTQ      #   g(T, Q)
                                           s         #   flatten list
                                         eS          #   largest element
                                       &gt;2            #   is less than 2
                                     g          Q    # apply g on the result and the input
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>45</s> 44 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>∞Íonîü2íε`U0LsãεXô]€`.Δ[D˜g5‹#2δô2ô€øOOn}OOQ
</code></pre>
<p>Brute-force. Generates all <span class="math-container">\$2^k\times 2^k\$</span> sized matrices consisting of 0s and 1s, and will output the first valid one for the given input-integer <span class="math-container">\$n\$</span>.</p>
<p>-1 byte by changing the <code>∞&lt;on1š</code> (-1 and prepend <span class="math-container">\$1\$</span> manually) to <code>∞Íonî</code> (-2 and ceil the <span class="math-container">\$0.25\$</span> to <span class="math-container">\$1\$</span>)</p>
<p><a href="https://tio.run/##AU4Asf9vc2FiaWX//@KInsONb27DrsO8MsOtzrVgVTBMc8OjzrVYw7Rd4oKsYC7OlFtEy5xnNeKAuSMyzrTDtDLDtOKCrMO4T09ufU9PUf//MTU" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##AWIAnf9vc2FiaWX/MTXGkk4/IiDihpIgIj9OViL/4oiew41vbsOuw7wyw63OtWBVMExzw6POtVjDtF3igqxgLs6UW0TLnGc14oC5IzLOtMO0MsO04oKsw7hPT259T09ZUf8iLlYs/w" rel="nofollow noreferrer">verify the smaller test cases up to n=15</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Generate a list of all possible outputs:</p>
<pre class="lang-python prettyprint-override"><code>∞          # Push an infinite positive list: [1,2,3,4,5,...]
 Í         # Decrease each by 2 to start at -1: [-1,0,1,2,3,...]
  o        # Take 2 to the power each: [0.5,1,2,4,8,...]
   n       # Square each: [0.25,1,4,16,64,...]
    î      # Ceil each: [1,1,4,16,64,...]
ü2         # Create overlapping pairs: [[1,1],[1,4],[4,16],[16,64],...]
  í        # Reverse each pair: [[1,1],[4,1],[16,4],[64,16],...]
ε          # Map over each pair:
 `         #  Pop and push both to the stack
  U        #  Pop the top smaller value, and save it in variable `X`
  0L       #  Push pair [1,0]
    s      #  Swap so the larger value is at the top of the stack
     ã     #  Cartesian product to create all combinations using the 1s/0s
      ε    #  Map over each list of 1s/0s
       Xô  #   Split it into blocks of size `X`
]          # Close the nested maps
 €`        # Flatten the list of list of lists one level down
           # (which has as side-effect that it reverses the inner lists)
</code></pre>
<p><a href="https://tio.run/##ASsA1P9vc2FiaWX//@KInsONb27DrsO8MsOtzrVgVTBMc8OjzrVYw7Rd4oKsYP//" rel="nofollow noreferrer">Try just this first step online.</a></p>
<p>Step 2: Find the first matrix that's a valid reduction for the given input-integer:</p>
<pre class="lang-python prettyprint-override"><code>.Δ         # Find the first matrix in this infinite list that's truthy for:
  [        #  Start an infinite list:
   D       #   Duplicate the current matrix
    ˜      #   Flatten it to a list
     g     #   Pop and push its length
      5‹   #   If this length is smaller than 5 (e.g. either 4 or 1):
        #  #    Stop the infinite inner loop
   2δô2ä€ø #  Split the matrix into four corner-blocks:
    δ      #   Map over each inner row:
   2 ô     #    Split it into pairs
      2ä   #   Then split the entire list into 2 equal parts as well
        €  #   Map over each inner matrix:
         ø #    Zip/transpose; swapping rows/columns
   OO      #  Sum each inner-most matrix
     n     #  Then square those sums
  }        # After the infinite loop to reduce it to a 2x2 matrix:
   OO      # Sum the four values in this matrix as well
     Q     #  Check whether it now equals the (implicit) input-integer
           # (after which the found matrix is output implicitly)
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/2uX0nHTTRw07lY3ObTm8xejwlkdNaw7v8Pe3zasFEkAF0YY6MGgAwrE60QY6KBBJxBBDBKEGqh@vGsIisQA" rel="nofollow noreferrer">Verify the resulting <span class="math-container">\$n\$</span> for a given matrix to test just this second step</a> (minus leading <code>.Δ</code> and trailing <code>Q</code>). I've added <code>=</code> after both <code>OO</code>, so you can also see the intermediate steps of the reduction.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/274951/">274951</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




