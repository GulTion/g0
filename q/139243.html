<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::139243</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>q</td><td>221129T005129Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/254974#254974">cillianr</a></td></tr>
<tr d-ix="1"><td>366</td><td>x86 16/32/64bit machine code 11 bytes</td><td>170819T234124Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139717#139717">Peter Co</a></td></tr>
<tr d-ix="2"><td>nan</td><td>PostScript</td><td>220519T172733Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/247538#247538">bartysla</a></td></tr>
<tr d-ix="3"><td>052</td><td>Java</td><td>170816T082754Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139274#139274">Olivier </a></td></tr>
<tr d-ix="4"><td>4105</td><td>PHP 42 chars</td><td>220331T063800Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/245792#245792">user1117</a></td></tr>
<tr d-ix="5"><td>nan</td><td>JavaScript ES 2</td><td>170816T074101Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139267#139267">Shaggy</a></td></tr>
<tr d-ix="6"><td>092</td><td>Scratch Squeak 1.x</td><td>220329T050737Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/245687#245687">qarz</a></td></tr>
<tr d-ix="7"><td>032</td><td>One and Two Star Programmer</td><td>211012T170341Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/236224#236224">leo-but-</a></td></tr>
<tr d-ix="8"><td>3633</td><td>Python 2/3 REPL</td><td>210328T092527Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/222508#222508">Wasif</a></td></tr>
<tr d-ix="9"><td>nan</td><td>Python 1</td><td>210323T091723Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/221122#221122">olligobb</a></td></tr>
<tr d-ix="10"><td>nan</td><td>Nim</td><td>201126T182119Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/215669#215669">xigoi</a></td></tr>
<tr d-ix="11"><td>8263</td><td>05AB1E/05AB1E legacy/2sable</td><td>190521T130057Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/185930#185930">Kevin Cr</a></td></tr>
<tr d-ix="12"><td>nan</td><td>Whispers</td><td>200830T193433Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/210373#210373">caird co</a></td></tr>
<tr d-ix="13"><td>011</td><td>Python 1</td><td>200125T085721Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/198488#198488">PkmnQ</a></td></tr>
<tr d-ix="14"><td>045</td><td>SmileBASIC 2 and 3</td><td>190222T200443Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/180259#180259">snail_</a></td></tr>
<tr d-ix="15"><td>215</td><td>Whitespace</td><td>190828T075417Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/190980#190980">thaliaar</a></td></tr>
<tr d-ix="16"><td>017</td><td>Python 2 and Python 3</td><td>190521T090714Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/185911#185911">Neil</a></td></tr>
<tr d-ix="17"><td>nan</td><td>Wolfram Language Mathematica</td><td>190521T180822Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/185938#185938">Kelly Lo</a></td></tr>
<tr d-ix="18"><td>422</td><td>Japt</td><td>190222T161010Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/180249#180249">Oliver</a></td></tr>
<tr d-ix="19"><td>nan</td><td>TSQL</td><td>181129T201532Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/176811#176811">BradC</a></td></tr>
<tr d-ix="20"><td>328</td><td>Bash</td><td>170817T152713Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139445#139445">joH1</a></td></tr>
<tr d-ix="21"><td>008</td><td>Ruby 1.x <1.9 and 2.x</td><td>171109T214427Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/147621#147621">Jordan</a></td></tr>
<tr d-ix="22"><td>035</td><td>Befunge</td><td>171109T202318Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/147617#147617">James Ho</a></td></tr>
<tr d-ix="23"><td>nan</td><td>Python</td><td>170816T132839Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139314#139314">totallyh</a></td></tr>
<tr d-ix="24"><td>422</td><td>RProgN 1/2</td><td>170918T002239Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/143053#143053">ATaco</a></td></tr>
<tr d-ix="25"><td>nan</td><td>Lua 5.3.3 / 5.2.4</td><td>170916T120327Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/142986#142986">Jonathan</a></td></tr>
<tr d-ix="26"><td>003</td><td>Japt 1 & 2</td><td>170824T071833Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/140314#140314">Shaggy</a></td></tr>
<tr d-ix="27"><td>nan</td><td>EcmaScript 3 / 5 / 2015 / 2016 / 2017 in Browser</td><td>170816T074401Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139269#139269">tsh</a></td></tr>
<tr d-ix="28"><td>046</td><td>Julia 0.4</td><td>170818T041714Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139523#139523">Frames C</a></td></tr>
<tr d-ix="29"><td>nan</td><td>Windows' Batch File</td><td>170819T223233Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139712#139712">Matheus </a></td></tr>
<tr d-ix="30"><td>1636</td><td>Erlang</td><td>170819T145410Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139685#139685">legoscia</a></td></tr>
<tr d-ix="31"><td>nan</td><td>Python</td><td>170819T072543Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139664#139664">Gavin S.</a></td></tr>
<tr d-ix="32"><td>9833</td><td>Julia 0.20.7</td><td>170818T100238Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139537#139537">Frames C</a></td></tr>
<tr d-ix="33"><td>nan</td><td>C++ 11/14/17</td><td>170816T183224Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139356#139356">Daniel S</a></td></tr>
<tr d-ix="34"><td>004</td><td>Cubically</td><td>170816T165221Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139339#139339">MD XF</a></td></tr>
<tr d-ix="35"><td>019</td><td>Perl 5 and Perl 6</td><td>170817T074210Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139393#139393">elcaro</a></td></tr>
<tr d-ix="36"><td>006</td><td>K/Kona</td><td>170818T132613Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139558#139558">Simon Ma</a></td></tr>
<tr d-ix="37"><td>nan</td><td></td><td>170817T115748Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139415#139415">Qwertiy</a></td></tr>
<tr d-ix="38"><td>105</td><td>R</td><td>170817T111022Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139411#139411">Sven Hoh</a></td></tr>
<tr d-ix="39"><td>733</td><td>APL Dyalog</td><td>170818T074008Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139533#139533">Ad&#225;</a></td></tr>
<tr d-ix="40"><td>018</td><td>Python 3 and Python 2.0</td><td>170816T175127Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139344#139344">Stephen</a></td></tr>
<tr d-ix="41"><td>125</td><td>C89/C99</td><td>170817T153830Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139448#139448">nwellnho</a></td></tr>
<tr d-ix="42"><td>010</td><td>Mathematica 10/11 20 Bytes</td><td>170817T155641Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139450#139450">Kelly Lo</a></td></tr>
<tr d-ix="43"><td>5225</td><td>Brachylog / Brachylog v1</td><td>170816T134724Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139318#139318">Erik the</a></td></tr>
<tr d-ix="44"><td>1775</td><td>Lua 5.0</td><td>170817T124424Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139420#139420">val - di</a></td></tr>
<tr d-ix="45"><td>002</td><td>Braingolf</td><td>170817T105256Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139408#139408">Mayube</a></td></tr>
<tr d-ix="46"><td>096</td><td>C++11 and C++14</td><td>170817T085344Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139395#139395">nwp</a></td></tr>
<tr d-ix="47"><td>020</td><td>Ruby 1.x and 2.x</td><td>170817T100833Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139402#139402">Philipp </a></td></tr>
<tr d-ix="48"><td>105</td><td>Julia 21 bytes</td><td>170817T084040Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139394#139394">Tasos Pa</a></td></tr>
<tr d-ix="49"><td>759</td><td>PHP 4</td><td>170817T060524Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139388#139388">CJ Denni</a></td></tr>
<tr d-ix="50"><td>nan</td><td>VBA</td><td>170816T153646Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139329#139329">Taylor A</a></td></tr>
<tr d-ix="51"><td>175</td><td>Python 3</td><td>170816T144854Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139324#139324">jferard</a></td></tr>
<tr d-ix="52"><td>nan</td><td>Wolfram Language/Mathematica 10/11</td><td>170816T140439Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139320#139320">ktm</a></td></tr>
<tr d-ix="53"><td>011</td><td>Befunge</td><td>170816T100447Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139286#139286">karhell</a></td></tr>
<tr d-ix="54"><td>1427</td><td>JavaScript ES5 & ES6</td><td>170816T075553Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139270#139270">Neil</a></td></tr>
<tr d-ix="55"><td>055</td><td>PHP 5/7</td><td>170816T065439Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139262#139262">Sisyphus</a></td></tr>
<tr d-ix="56"><td>003</td><td>Seriously and Actually</td><td>170816T054455Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139252#139252">user4594</a></td></tr>
<tr d-ix="57"><td>006</td><td>Pyth 4/5</td><td>170816T045738Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139248#139248">Maltysen</a></td></tr>
<tr d-ix="58"><td>006</td><td>Python 3.0 and Python 2</td><td>170816T043832Z</td><td><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version/139244#139244">fireflam</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://code.kx.com/q" rel="nofollow noreferrer">q</a>, 4 bytes / 13 major versions: score 0.3077</h1>
<pre><code>.z.K
</code></pre>
<p>Built-in: <a href="https://code.kx.com/q/ref/dotz/#zk-version" rel="nofollow noreferrer">https://code.kx.com/q/ref/dotz/#zk-version</a></p>
<p>Same for k4.</p>
</div>
<div id="pu1" class="pu"><h1>x86 16/32/64-bit machine code: 11 bytes, score= 3.66</h1>
<p>This function returns the <a href="https://en.wikipedia.org/wiki/X86-64#Operating_modes" rel="nofollow noreferrer">current mode</a> (default address-size) as an integer in AL.  Call it from C with signature <code>uint8_t modedetect(void);</code>.  (Or more realistically, from machine code that's going to branch on the result using instruction encodings that decode the same in all modes.)</p>
<p>NASM machine-code + source listing (showing how it works in 16-bit mode, since <code>BITS 16</code> tells NASM to assemble the source mnemonics for 16-bit mode.)</p>
<pre><code> 1          machine      global modedetect
 2          code         modedetect:
 3 addr     hex          BITS 16

 5 00000000 B040             mov    al, 64
 6 00000002 B90000           mov    cx, 0       ; 3B in 16-bit.  5B in 32/64, consuming 2 more bytes as the immediate
 7 00000005 FEC1             inc    cl          ; always 2 bytes.  The 2B encoding of inc cx would work, too.
 8                       
 9                           ; want: 16-bit cl=1.   32-bit: cl=0
10 00000007 41               inc    cx       ; 64-bit: REX prefix
11 00000008 D2E8             shr    al, cl   ; 64-bit: shr r8b, cl doesn't affect AL at all.  32-bit cl=1.  16-bit cl=2
12 0000000A C3               ret
# end-of-function address is 0xB, length = 0xB = 11
</code></pre>
<p><strong>Justification</strong>:</p>
<p>x86 machine code doesn't officially have version numbers, but I think this satisfies the intent of the question by having to produce specific numbers, rather than choosing what's most convenient (that only takes 7 bytes, see below).</p>
<p>Another interesting way to interpret the question would be to write 16-bit code to  detect 8086 vs. 186 vs. 286 vs. 386, etc, <a href="https://reverseengineering.stackexchange.com/questions/19394/how-did-this-80286-detection-code-work">as in this example</a>, based on FLAGS and other behaviour, because each new &quot;version&quot; added new features (including instruction opcodes).  But that's not what this answer does.</p>
<p>The original x86 CPU, Intel's 8086, only supported 16-bit machine code.  80386 introduced 32-bit machine code (usable in 32-bit protected mode, and later in compat mode under a 64-bit OS).  AMD introduced 64-bit machine code, usable in long mode.  These are versions of x86 machine language in the same sense that Python2 and Python3 are different language versions.  They're mostly compatible, but with intentional changes.  You can run 32 or 64-bit executables directly under a 64-bit OS kernel the same way you could run Python2 and Python3 programs.</p>
<h3>How it works:</h3>
<p>Start with <code>al=64</code>.  Shift it right by 1 (32-bit mode) or 2 (16-bit mode).</p>
<ul>
<li><p>16/32 vs. 64-bit: The 1-byte <code>inc</code>/<code>dec</code> encodings are REX prefixes in 64-bit (<a href="http://wiki.osdev.org/X86-64_Instruction_Encoding#REX_prefix" rel="nofollow noreferrer">http://wiki.osdev.org/X86-64_Instruction_Encoding#REX_prefix</a>).  REX.W doesn't affect some instructions at all (e.g. a <code>jmp</code> or <code>jcc</code>), but in this case to get 16/32/64 I wanted to inc or dec <code>ecx</code> rather than <code>eax</code>.  That also sets <code>REX.B</code>, which changes the destination register.  But fortunately we can make that work but setting things up so 64-bit doesn't need to shift <code>al</code>.</p>
<p>The instruction(s) that run only in 16-bit mode could include a <code>ret</code>, but I didn't find that necessary or helpful.  (And would make it impossible to inline as a code-fragment, in case you wanted to do that).  It could also be a <code>jmp</code> within the function.</p>
</li>
<li><p>16-bit vs. 32/64: immediates are 16-bit instead of 32-bit.  Changing modes can change the length of an instruction, so 32/64 bit modes decode the next two bytes as part of the immediate, rather than a separate instruction.  I kept things simple by using a 2-byte instruction here, instead of getting decode out of sync so 16-bit mode would decode from different instruction boundaries than 32/64.</p>
<p>Related: The operand-size prefix changes the length of the immediate (unless it's a sign-extended 8-bit immediate), just like the difference between 16-bit and 32/64-bit modes.  This makes instruction-length decoding difficult to do in parallel; <a href="https://software.intel.com/en-us/forums/intel-performance-bottleneck-analyzer/topic/328256" rel="nofollow noreferrer">Intel CPUs have LCP decoding stalls</a>.</p>
</li>
</ul>
<hr />
<p>Most calling conventions (including the i386 and x86-64 System V ABIs) allow narrow return values to have garbage in the high bits of the register.  They also allow clobbering CX/ECX/RCX (and R8 for 64-bit).  IDK if that was common in 16-bit calling conventions, but this is code golf so I can always just say it's a custom calling convention anyway.</p>
<p><strong>32-bit disassembly</strong>:</p>
<pre><code>08048070 &lt;modedetect&gt;:
 8048070:       b0 40                   mov    al,0x40
 8048072:       b9 00 00 fe c1          mov    ecx,0xc1fe0000   # fe c1 is the inc cl
 8048077:       41                      inc    ecx         # cl=1
 8048078:       d2 e8                   shr    al,cl
 804807a:       c3                      ret    
</code></pre>
<p><strong>64-bit disassembly</strong> (<a href="https://tio.run/##VVA7b8IwEN79K24rSIGGQCMU1KFIHSp1ahm6oUtyAat@VLEpSf88vRhCwIPP9/m@h43Okc5VOzHo9GmnbI4Kts5j7cW5ZAJ4FagUF21LKslT4QOq7e9fA0B5EwGqHuoKIUOzgEjjuxI3yxguawWudVtqpB8NiqPxeCUEKrkzMEtFH@bGcjhmYv22@ezGbjxRRZAubpGCQ8RXz/maszBnkks/BXgK7Tx5TBcRFNa4g5ZmBwmTa4K89eQAHfg9gdSaSomeLg8qgrgCGB6E6oitY3YgsvyGeckayBS27HRtFYhFA0d7UCXv9XcE3tqpEGeJIxqfXfKx@vOMVThf12ZdH9@5N1frdHEe@Xj9gp@aKtmEQbev@18JUYfB7qZe5gEvLTnz4AGriv8VXt4BuVFq2lv3SYZcSZCvyYvT6R8" rel="nofollow noreferrer" title="Assembly (nasm, x64, Linux) – Try It Online">Try it online!</a>):</p>
<pre><code>0000000000400090 &lt;modedetect&gt;:
  400090:       b0 40                   mov    al,0x40
  400092:       b9 00 00 fe c1          mov    ecx,0xc1fe0000
  400097:       41 d2 e8                shr    r8b,cl      # cl=0, and doesn't affect al anyway!
  40009a:       c3                      ret    
</code></pre>
<p>Related: my <a href="https://stackoverflow.com/questions/38063529/x86-32-x86-64-polyglot-machine-code-fragment-that-detects-64bit-mode-at-run-ti">x86-32 / x86-64 polyglot machine-code</a> Q&amp;A on SO.</p>
<p>Another difference between 16-bit and 32/64 is that addressing modes are encoded differently.  e.g. <code>lea  eax, [rax+2]</code> (<code>8D 40 02</code>) decodes as <code>lea ax, [bx+si+0x2]</code> in 16-bit mode.  This is obviously difficult to use for code-golf, especially since <code>e/rbx</code> and <code>e/rsi</code> are call-preserved in many calling conventions.</p>
<p>I also considered using the 10-byte <code>mov r64, imm64</code>, which is REX + <code>mov r32,imm32</code>.  But since I already had an 11 byte solution, this would be at best equal (10 bytes + 1 for <code>ret</code>).</p>
<hr />
<p>Test code for 32 and 64-bit mode.  (I haven't actually executed it in 16-bit mode, but the disassembly tells you how it will decode.  I don't have a 16-bit emulator set up.)</p>
<pre><code>global _start
_start:
    call   modedetect
    movzx  ebx, al
    mov    eax, 1
    int    0x80        ; sys_exit(modedetect());

align 16
modedetect:
BITS 16
    mov    al, 64
    mov    cx, 0       ; 3B in 16-bit.  5B in 32/64, consuming 2 more bytes as the immediate
    inc    cl          ; always 2 bytes.  The 2B encoding of inc cx would work, too.

    ; want: 16-bit cl=1.   32-bit: cl=0
    inc    cx       ; 64-bit: REX prefix
    shr    al, cl   ; 64-bit: shr r8b, cl doesn't affect AL at all.  32-bit cl=1.  16-bit cl=2
    ret
</code></pre>
<p>This Linux program exits with exit-status = <code>modedetect()</code>, so run it as <code>./a.out;  echo $?</code>.  Assemble and link it into a static binary, e.g.</p>
<pre><code>$ asm-link -m32 x86-modedetect-polyglot.asm &amp;&amp; ./x86-modedetect-polyglot; echo $?
+ yasm -felf32 -Worphan-labels -gdwarf2 x86-modedetect-polyglot.asm
+ ld -melf_i386 -o x86-modedetect-polyglot x86-modedetect-polyglot.o
32
$ asm-link -m64 x86-modedetect-polyglot.asm &amp;&amp; ./x86-modedetect-polyglot; echo $?
+ yasm -felf64 -Worphan-labels -gdwarf2 x86-modedetect-polyglot.asm
+ ld -o x86-modedetect-polyglot x86-modedetect-polyglot.o
64

## maybe test 16-bit with Bochs, e.g. in a bootloader, if you want.
</code></pre>
<hr />
<h1>7 bytes (score=2.33) if I can number the versions 1, 2, 3</h1>
<p>There are no official version numbers for different x86 modes.  I just like writing asm answers.  I think it would violate the question's intent if I just called the modes 1,2,3, or 0,1,2, because the point is to force you to generate an inconvenient number.  But if that was allowed:</p>
<pre><code> # 16-bit mode:
42                                  detect123:
43 00000020 B80300                      mov ax,3
44 00000023 FEC8                        dec al
45                                  
46 00000025 48                          dec ax
47 00000026 C3                          ret
</code></pre>
<p>Which decodes in 32-bit mode as</p>
<pre><code>08048080 &lt;detect123&gt;:
 8048080:       b8 03 00 fe c8          mov    eax,0xc8fe0003
 8048085:       48                      dec    eax
 8048086:       c3                      ret    
</code></pre>
<p>and 64-bit as</p>
<pre><code>00000000004000a0 &lt;detect123&gt;:
  4000a0:       b8 03 00 fe c8          mov    eax,0xc8fe0003
  4000a5:       48 c3                   rex.W ret 
</code></pre>
</div>
<div id="pu2" class="pu"><h2>PostScript, 36 bytes/3 versions = score of 12</h2>
<pre><code>00000000: 92aa 9238 283c 3c29 9260 7b28 7368 6669  ...8(&lt;&lt;).`{(shfi
00000010: 6c6c 2992 607b 337d 7b32 7d92 557d 7b31  ll).`{3}{2}.U}{1
00000020: 7d92 553d                                }.U=
</code></pre>
<p>Un-tokenized:</p>
<pre><code>systemdict dup(&lt;&lt;)known{(shfill)known{3}{2}ifelse}{1}ifelse =
</code></pre>
<p>Tests for operators introduced in PostScript Levels 2 and 3.</p>
<p><code>&lt;&lt;</code> was introduced in PS level 2. If this isn't present, it's PS level 1.</p>
<p><code>shfill</code> was introduced in PS level 3. If this isn't present, it's PS level 2. (xpost currently prints <code>2</code>, as <code>shfill</code> isn't implemented: <a href="https://tio.run/##K8gvLilOLsosKNGtKACy//8vriwuSc1NyUwuUUgpLdCwsdHMzssvz6vWKM5Iy8zJgfKMa6uNajPTUnOKU2urDaEsBdv//wE" rel="nofollow noreferrer" title="PostScript (xpost) – Try It Online">Try it online!</a>)</p>
<p>Ghostscript prints <code>3</code>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://en.wikipedia.org/wiki/Java_(programming_language)" rel="nofollow noreferrer">Java</a>, 400 bytes, 17 versions, score = 23,52</h1>
<p>Supported versions: <code>1.0</code>, <code>1.1</code>, <code>1.2</code>, <code>1.3</code>, <code>1.4</code>, <code>1.5</code>, <code>1.6</code>, <code>1.7</code>, <code>1.8</code>, <code>9</code>, <code>11</code>, <code>12</code>, <code>14</code>, <code>15</code>, <code>16</code>, <code>17</code> and <code>18</code>.
Unsupported vesions: <code>10</code> and <code>13</code> since they have no new classes at all.</p>
<p>(For previous scores, <a href="https://codegolf.stackexchange.com/posts/139274/revisions">check the history</a>!)</p>
<pre>Object v(){int i=0;try{for(String[]s={&quot;Locale&quot;,&quot;Map&quot;,&quot;Timer&quot;,&quot;Currency&quot;,&quot;UUID&quot;,&quot;Deque&quot;,&quot;Objects&quot;,&quot;Base64&quot;,&quot;zip.CRC32C&quot;,&quot;Map&quot;,&quot;java.security.interfaces.XECKey&quot;,&quot;java.lang.Enum$EnumDesc&quot;,&quot;Map&quot;,&quot;java.io.Serial&quot;,&quot;java.security.spec.EdECPoint&quot;,&quot;java.lang.Record&quot;,&quot;HexFormat&quot;,&quot;java.net.spi.InetAddressResolver&quot;};;i++)Class.forName(s[i].charAt(0)==&#39;j&#39;?s[i]:&quot;java.util.&quot;+s[i]);}finally{return i&lt;9?&quot;1.&quot;+i:i;}}</pre>
<p><a href="https://ato.pxeger.com/run?1=ZZHPbtQwEMbFtU9hRUhNtGCVP0LQsKpKNogKCmiXSkhVkVxndjsrxw4ee2mI8g7cuewB3oIXgadhopSVKi6eTzPjz-P5ff-xVhu1_dXES4NaaKOIxKlCK7o9ISiogPpnDMv7T__c-fbucg06iE2adWiDwOlBHnzbLZ1PF8GjXZ1f0LRL3jitDCT3klPV8PkBa_Aci-g9WN2yPDs7mXGYwec49I2-xOqFInjymMVXbGQxLx49LHY-w6CSQEePoZU8APil0kDyY1m8hvZfh1F2JUsb67vDMQPStx3QyQV4VOY_S2pAy7Iqi_eO3W_5zUE7X3HqFVy_dL5Wu7KFwBdRnrA4rioPRHMgZzb85z7PcTLJimGpkrf0VtWQ0jleSH2l_HFID7LpdH-9fzTkDke_GNDIZDJksrxfolXGtJ2HEL0V-PzZUfKAy3iIed-PYH5_EuIG38hLbBxWomaIOyxC-RVlIlx594VEea2hCehGyEIsWgpQSxeDbLg_GJsy4yznYr9388p2O8a_" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Ungolfed</h3>
<pre><code>Object v(){
  int v=0;
  try {
    for(
      String[] s={
        &quot;Locale&quot;,          // 1.1
        &quot;Map&quot;,             // 1.2
        &quot;Timer&quot;,           // 1.3
        &quot;Currency&quot;,        // 1.4
        &quot;UUID&quot;,            // 1.5
        &quot;Deque&quot;,           // 1.6
        &quot;Objects&quot;,         // 1.7
        &quot;Base64&quot;,          // 1.8
        &quot;zip.CRC32C&quot;,      // 9
        &quot;Map&quot;,             // 10 is unsupported so use the smallest name possible.
        &quot;java.security.interfaces.XECKey&quot;,   // 11
        &quot;Enum$EnumDesc&quot;,                     // 12
        &quot;Map&quot;,             // 13 is unsupported so use the smallest name possible.
        &quot;java.io.Serial&quot;,  // 14
        &quot;java.security.spec.EdECPoint&quot;,      // 15
        &quot;java.lang.Record&quot;,                  // 16
        &quot;HexFormat&quot;,                         // 17
        &quot;java.net.spi.InetAddressResolver&quot;   // 18
      };;v++)
      Class.forName(
        s[i].charAt(0)=='j'     // If the package name is referenced,
          ? s[i]                // Use it
          : &quot;java.util.&quot;+s[i]); // Else, prepend &quot;java.util&quot;.
  } finally {
    // Swallowing ClassNotFoundException when the version is not the last one
    // Swallowing ArrayIndexOutOfBoundsException that occurs after reaching the last version.
    return v &lt; 9 ? &quot;1.&quot; + v : v; // Return either an int or a String
  }
}
</code></pre>
<p>Please note that the code part <code>return v&lt;9?&quot;1.&quot;+v:v;</code> (previously <code>return(v&lt;9?&quot;1.&quot;:&quot;&quot;)+v;</code>) needs to be checked against any version between Java 1.0 and Java 1.3 included. I don't have any Java 1.3 or earlier installation at my disposal to actually test this syntax.</p>
<h3>Introduction</h3>
<p>The Java versioning has a special history. All versions have historically been <code>1.x</code> including <code>1.0</code>. But... from Java 9 onwards and the <a href="http://openjdk.java.net/jeps/223" rel="nofollow noreferrer">JEP223</a>, the version scheming has changed from using <code>1.x</code> to <code>x</code>. That is the version as internally known. So we have the following table (put together with the Javadoc and <a href="https://en.wikipedia.org/wiki/Java_version_history" rel="nofollow noreferrer">Wikipedia</a>):</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th style="text-align: right;"><code>java.version</code> property</th>
<th style="text-align: left;">Release name</th>
<th style="text-align: left;">Product name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">1.0</td>
<td style="text-align: left;">JDK 1.0</td>
<td style="text-align: left;">Java 1</td>
</tr>
<tr>
<td style="text-align: right;">1.1</td>
<td style="text-align: left;">JDK 1.1</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: right;">1.2</td>
<td style="text-align: left;">J2SE 1.2</td>
<td style="text-align: left;">Java 2</td>
</tr>
<tr>
<td style="text-align: right;">1.3</td>
<td style="text-align: left;">J2SE 1.3</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: right;">1.4</td>
<td style="text-align: left;">J2SE 1.4</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: right;">1.5</td>
<td style="text-align: left;">J2SE 5.0</td>
<td style="text-align: left;">Java 5</td>
</tr>
<tr>
<td style="text-align: right;">1.6</td>
<td style="text-align: left;">Java SE 6</td>
<td style="text-align: left;">Java 6</td>
</tr>
<tr>
<td style="text-align: right;">1.7</td>
<td style="text-align: left;">Java SE 7</td>
<td style="text-align: left;">Java 7</td>
</tr>
<tr>
<td style="text-align: right;">1.8</td>
<td style="text-align: left;">Java SE 8</td>
<td style="text-align: left;">Java 8</td>
</tr>
<tr>
<td style="text-align: right;">9</td>
<td style="text-align: left;">Java SE 9</td>
<td style="text-align: left;">Java 9</td>
</tr>
<tr>
<td style="text-align: right;">...</td>
<td style="text-align: left;">...</td>
<td style="text-align: left;">...</td>
</tr>
<tr>
<td style="text-align: right;">18</td>
<td style="text-align: left;">Java SE 18</td>
<td style="text-align: left;">Java 18</td>
</tr>
</tbody>
</table>
</div>
<p>This challenge entry matches the version column in the table above, which is what is contained in the system property <code>&quot;java.version&quot;</code>.</p>
<h3>Explanation</h3>
<p>The goal is to check from which version a class starts to exist, because Java deprecates code but never removes it. The code has been specifically written in Java 1.0 to be compatible with all the versions, again, because <a href="https://stackoverflow.com/questions/4692626/is-jdk-upward-or-backward-compatible">the JDK is (mostly) source forward compatible</a>.</p>
<p>The implementation tries to find the shortest class names that each version introduced. Though, to gain bytes, it's needed to try and pick a common subpackage. So far I found the most efficient package is <code>java.util</code> because it contains several really short-named classes spread across all versions of Java.</p>
<p>Now, to find the actual version number, the class names are sorted by introducing version. Then I try to instanciate each class sequentially, and increment the array index. If the class exists, we skip to the next, otherwise we let the exception be caught by the <code>try</code>-block. When done, another exception is thrown because there are no more classes whose existence we need to check.</p>
<p>In any case, the thread will leave the <code>try</code>-block with an exception. That exception is not caught, but simply put on hold thanks to the <code>finally</code>-block, which in turn overrides the on-hold exception by actually returning a value which is <code>&quot;1.&quot;+v</code> where <code>v</code> is the index used before. It also happens we made this index match the minor version number of Java.</p>
<p>Note: what is below needs to be updated.</p>
<p>An important part of the golf was to find the shortest new class name in the package <code>java.util</code> (or any children package) for each version. Here is the table I used to compute that cost.</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th style="text-align: right;">Version</th>
<th style="text-align: left;">Full name (cost in chars)</th>
<th style="text-align: left;">Reduced name (cost in chars)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">9</td>
<td style="text-align: left;"><code>java.util.zip.CRC32C</code> (20)</td>
<td style="text-align: left;"><code>zip.CRC32C</code> (10)</td>
</tr>
<tr>
<td style="text-align: right;">1.8</td>
<td style="text-align: left;"><code>java.util.Base64</code> (16)</td>
<td style="text-align: left;"><code>Base64</code> (6)</td>
</tr>
<tr>
<td style="text-align: right;">1.7</td>
<td style="text-align: left;"><code>java.util.Objects</code> (17)</td>
<td style="text-align: left;"><code>Objects</code> (7)</td>
</tr>
<tr>
<td style="text-align: right;">1.6</td>
<td style="text-align: left;"><code>java.util.Deque</code> (15)</td>
<td style="text-align: left;"><code>Deque</code> (5)</td>
</tr>
<tr>
<td style="text-align: right;">1.5</td>
<td style="text-align: left;"><code>java.util.UUID</code> (14)</td>
<td style="text-align: left;"><code>UUID</code> (4)</td>
</tr>
<tr>
<td style="text-align: right;">1.4</td>
<td style="text-align: left;"><code>java.util.Currency</code> (18)</td>
<td style="text-align: left;"><code>Currency</code> (8)</td>
</tr>
<tr>
<td style="text-align: right;">1.3</td>
<td style="text-align: left;"><code>java.util.Timer</code> (15)</td>
<td style="text-align: left;"><code>Timer</code> (5)</td>
</tr>
<tr>
<td style="text-align: right;">1.2</td>
<td style="text-align: left;"><code>java.util.Map</code> (13)</td>
<td style="text-align: left;"><code>Map</code> (3)</td>
</tr>
<tr>
<td style="text-align: right;">1.1</td>
<td style="text-align: left;"><code>java.util.Locale</code> (16)</td>
<td style="text-align: left;"><code>Locale</code> (6)</td>
</tr>
<tr>
<td style="text-align: right;">1.0</td>
<td style="text-align: left;">[default]</td>
<td style="text-align: left;">[default]</td>
</tr>
</tbody>
</table>
</div><div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th style="text-align: right;"></th>
<th style="text-align: right;">Full name (cost in chars)</th>
<th style="text-align: right;">Reduced name (cost in chars)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">Subtotal</td>
<td style="text-align: right;">144 chars</td>
<td style="text-align: right;">54 chars</td>
</tr>
<tr>
<td style="text-align: right;">Base</td>
<td style="text-align: right;">0 chars</td>
<td style="text-align: right;">10 chars (<code>java.util.</code>)</td>
</tr>
<tr>
<td style="text-align: right;">Total</td>
<td style="text-align: right;">144 chars</td>
<td style="text-align: right;">64 chars</td>
</tr>
</tbody>
</table>
</div><h3>Credits</h3>
<ul>
<li>30 bytes saved thanks to Kevin Cruijssen (although I was doing it before I read his comment, I promise!).</li>
<li>26 further bytes saved thanks to Neil (nope, I wasn't thinking about doing that)</li>
<li>12 bytes thanks to Nevay and the nice out-of-the<s>-box</s>-try-catch thinking!</li>
<li>11 more bytes by Neil again and the nice portable <code>finally</code> trick.</li>
<li>2 more bytes thanks to Kevin Cruijssen by replacing <code>return(i&lt;9?&quot;1.&quot;:&quot;&quot;)+i;</code> with <code>return i&lt;9?&quot;1.&quot;+i:i;</code> (this needs to be validated against 1.0 or at most 1.3 since no syntax changes happened before 1.4)</li>
</ul>
<h3>With builtins</h3>
<p>If builtins were allowed:</p>
<pre><code>String v(){return System.getProperty(&quot;java.version&quot;);}
</code></pre>
<p>54 bytes for 19 versions (from 1.0 to 18), so the score would be 2,84.</p>
</div>
<div id="pu4" class="pu"><h2>PHP (42 chars, 4 versions) - score 10.5</h2>
<pre class="lang-php prettyprint-override"><code>echo max('$',0)?@(date(c)==c?4:7-&quot;0x2&quot;):8;
</code></pre>
<p>With the <code>@</code> <a href="https://www.php.net/manual/en/language.operators.errorcontrol.php" rel="nofollow noreferrer">error control operator</a> you shouldn't see the “<em>Use of undefined constant</em>” notice.</p>
<h2>PHP (59 chars, 4 versions)</h2>
<p>This 15 chars per version attempt is based on <a href="https://www.php.net/manual/en/function.fdiv.php" rel="nofollow noreferrer">fdiv</a>, <a href="http://php.adamharvey.name/manual/en/function.ereg.php" rel="nofollow noreferrer">ereg</a> and <a href="https://www.php.net/manual/en/function.idate.php" rel="nofollow noreferrer">idate</a> existence.<br />
The line must be runnable through the codes from the years 2000 to 2022.</p>
<pre class="lang-php prettyprint-override"><code>$a='is_callable';echo$a('fdiv')+6-2*$a('ereg')+$a('idate');
</code></pre>
<p>Both write a single character to stdout among 4,5,7 and 8, checked with <a href="https://3v4l.org/" rel="nofollow noreferrer">3v4l.org</a>.</p>
<p><strong>Interesting</strong> change between 7 and 8 :</p>
<pre class="lang-php prettyprint-override"><code>echo max('$', 0) === max(0, '$') ? 8 : 7 ; // custom version detector
</code></pre>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES 2, 3 &amp; 5 - <s>8 9</s> 11), <s>59 / 6 = 9.833 75 / 7 = 10.714</s> 98 / 9 = 10.889</h1>
<p>May as well submit the solution with more versions, even if it does score slightly higher than the 2-version solution.</p>
<pre class="lang-js prettyprint-override"><code>alert(11-!&quot;&quot;.matchAll-![].flat-(/./.dotAll!=0)-!&quot;&quot;.padEnd-![].includes-![].keys-2*![].map-![].pop)
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/Z@Yk1pUYpucn1ecn5Oql5OfDhHRsNTV0NfT10vJL3HMyVG0NdDUVVRS0itITHHNS9FVjI7Vy8xLzilNSS0Gc7JTK4t1jbRAzNzEArBQQX6B5v//AA" rel="nofollow noreferrer">Try it online</a></p>
<p>Checks for the presence of various methods in the Array, RegExp &amp; String prototypes, negates them, giving a boolean, and subtracts that boolean from an initial value of 11. The multiplication of <code>![].map</code> accounts for the fact that ES4 was abandoned.</p>
<ul>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/string/matchAll" rel="nofollow noreferrer"><code>matchAll</code></a> String method was introduced in <a href="https://262.ecma-international.org/11.0/#sec-string.prototype.matchall" rel="nofollow noreferrer">ES2019</a> (v11).</li>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" rel="nofollow noreferrer"><code>flat</code></a> Array method was introduced in <a href="https://262.ecma-international.org/10.0/#sec-array.prototype.flat" rel="nofollow noreferrer">ES2020</a> (v10).</li>
<li>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/dotAll" rel="nofollow noreferrer"><code>dotAll</code></a> property (and related <code>s</code> flag) for Regular Expressions was introduced in <a href="http://www.ecma-international.org/ecma-262/9.0/#sec-get-regexp.prototype.dotAll" rel="nofollow noreferrer">ES2018</a> (v9).</li>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd" rel="nofollow noreferrer"><code>padEnd</code></a> String method was introduced in <a href="http://www.ecma-international.org/ecma-262/8.0/#sec-string.prototype.padend" rel="nofollow noreferrer">ES2017</a> (v8).</li>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" rel="nofollow noreferrer"><code>includes</code></a> Array method was introduced in <a href="http://www.ecma-international.org/ecma-262/7.0/#sec-array.prototype.includes" rel="nofollow noreferrer">ES2016</a> (v7).</li>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/keys" rel="nofollow noreferrer"><code>keys</code></a> Array method was introduced in <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-array.prototype.keys" rel="nofollow noreferrer">ES2015</a> (v6).</li>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="nofollow noreferrer"><code>map</code></a> Array method was introduced in <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.19" rel="nofollow noreferrer">ES5.1</a> (v5).</li>
<li>The <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/pop" rel="nofollow noreferrer"><code>pop</code></a> Array method was introduced in <a href="http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf" rel="nofollow noreferrer">ES3</a> (v3).</li>
</ul>
</div>
<div id="pu6" class="pu"><h1>Scratch (Squeak 1.x, 2.0, and 3.0) (scratchblocks3 syntax), 92 bytes, score 30.666...</h1>
<pre><code>when gf clicked
if&lt;&lt;[cos v]of(90)&gt;=(0
say[3
else
add&lt;not&lt;&gt;&gt;to[l v
if&lt;(l)=(1
say[1
else
say[2
</code></pre>
<p>Ungolfed, with explanation:</p>
<pre><code>when gf clicked
if&lt;&lt;[cos v] of (90)&gt; = (0) // cos 90 is 0 in Scratch 3, and some nonsense number in other versions
    say [3]
else
    add&lt;not &lt;&gt; &gt; to [list v] // &quot;add &lt;true&gt; to a list&quot; - this adds &quot;1&quot; to the list in 1.x, and the string &quot;true&quot; to the list in later versions
if&lt;(list) = (1)&gt; // all versions of Scratch automatically typecast everything to everything, including lists to strings, allowing for comparisons like this to be done seamlessly
    say[1]
else
    say[2]
end
end
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://esolangs.org/wiki/Three_Star_Programmer" rel="nofollow noreferrer">One and Two Star Programmer</a>, 3 bytes/2, score 1.5</h1>
<pre><code>0 1
</code></pre>
<p>In One Star Programmer, the left most cell will point to cell 1,</p>
<p>in Two Star Programmer, it will point to cell 2</p>
</div>
<div id="pu8" class="pu"><h1>Python 2/3 REPL, <del>36</del> 33 bytes, <del>36</del> 33/2=<del>38</del> 16.5 score</h1>
<pre><code>[3,2]['cmp' in dir(__builtins__)]
</code></pre>
<p>Try it in a Python shell. It (ab)uses removed builtins in Python 3. <code>cmp</code> was a builtin in Python 2, but was removed in Python 3, and it would result a truthy value in Python 2 and falsey in Python 3, and use it to index the <code>[3,2]</code> list, if it is 0, then it would output <code>3</code> and for <code>1</code> it would output <code>2</code>.</p>
<p>To make this solution, first I took the bulitins list from Python 2, made it a set, and subtracted set of Python 3 builtins from it</p>
<pre><code>s={'ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException', 'BufferError', 'BytesWarning', 'DeprecationWarning', 'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False', 'FloatingPointError', 'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning', 'IndentationError', 'IndexError', 'KeyError', 'KeyboardInterrupt', 'LookupError', 'MemoryError', 'NameError', 'None', 'NotImplemented', 'NotImplementedError', 'OSError', 'OverflowError', 'PendingDeprecationWarning', 'ReferenceError', 'RuntimeError', 'RuntimeWarning', 'StandardError', 'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError', 'SystemExit', 'TabError', 'True', 'TypeError', 'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError', 'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning', 'ValueError', 'Warning', 'ZeroDivisionError', '_', '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs', 'all', 'any', 'apply', 'basestring', 'bin', 'bool', 'buffer', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'cmp', 'coerce', 'compile', 'complex', 'copyright', 'credits', 'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'execfile', 'exit', 'file', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash', 'help', 'hex', 'id', 'input', 'int', 'intern', 'isinstance', 'issubclass', 'iter', 'len', 'license', 'list', 'locals', 'long', 'map', 'max', 'memoryview', 'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'quit', 'range', 'raw_input', 'reduce', 'reload', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'unichr', 'unicode', 'vars', 'xrange', 'zip'}-(set(dir(__builtins__)))
</code></pre>
<p>Which is</p>
<pre><code>{'reduce', 'cmp', 'basestring', 'reload', 'file', 'unicode', 'buffer', 'execfile', 'apply', 'raw_input', 'unichr', 'coerce', 'StandardError', 'xrange', 'intern', 'long'}
</code></pre>
<p>And for good sort from smallest to largest</p>
<pre><code>sorted(s,key=lambda x:len(x))
</code></pre>
<p>So we could use these builtins, amongst them, <code>cmp</code> is the shortest:</p>
<pre><code>'cmp', 'file', 'long', 'apply', 'reduce', 'reload', 'buffer', 'unichr', 'coerce', 'xrange', 'intern', 'unicode', 'execfile', 'raw_input', 'basestring', 'StandardError'
</code></pre>
</div>
<div id="pu9" class="pu"><h1>Python 1,2,3, score 10.6667</h1>
<pre><code>print(len(&quot;a a\x20a&quot;.split()))
</code></pre>
<p>This only works if you feed it in as a command line argument instead of putting it in a file, as older versions of python won't default to utf-8 in a file but will in a command line argument.</p>
<p>Basically, the string consists of an 'a', an ogham space (3 bytes), an 'a', an escaped space character, and another 'a', and we just split it on whitespace, count how many strings we got, and print that.</p>
<ul>
<li>Python 3 correctly recognises the ogham space and the escaped space as whitespace, and so the string has 3 words.</li>
<li>Python 2 incorrectly assumes all unicode characters are not whitespace, so it only counts the escaped space and gets 2 words.</li>
<li>Python 1 fails to parse the escaped whitespace, I think because of the a after it, so it sees no spaces and gets 1 word.</li>
</ul>
</div>
<div id="pu10" class="pu"><h1><a href="http://nim-lang.org/" rel="nofollow noreferrer">Nim</a>, 28 bytes / 2 versions = score 14</h1>
<pre><code>echo int compiles uint64.low
</code></pre>
<p><a href="https://tio.run/##y8vM/f8/NTkjXyEzr0QhOT@3IDMntVihFMgzM9HLyS///x8A" rel="nofollow noreferrer" title="Nim – Try It Online">Try it online!</a> (TIO only supports one version)</p>
<p>In version 1.0, <code>uint64</code> was made a proper ordinal type, so it's now possible to determine its lower bound. The program simply checks if the expression <code>uint64.low</code> compiles and converts the bool to an integer.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>/<a href="https://github.com/Adriandmen/05AB1E/wiki/Commands/2649a799300cbf3770e2db37ce177d4a19035a25" rel="nofollow noreferrer">05AB1E (legacy)</a>/<a href="https://github.com/Adriandmen/2sable" rel="nofollow noreferrer">2sable</a>, score <s>9</s> 8⅔ (26 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a> with 3 versions)</h1>
<pre><code>•äƵí•hR®di’ÿ (»Š)’ë’2sˆ¢’r
</code></pre>
<p><a href="https://tio.run/##MypOTMpJ/f//UcOiw0uObT28FsjICDq0LiXzUcPMw/sVNA7tPrpAE8ReDSSMik@3HVoEZBT9/w8A" rel="nofollow noreferrer">Try it online in 2sable</a><br />
<a href="https://tio.run/##MzBNTDJM/f//UcOiw0uObT28FsjICDq0LiXzUcPMw/sVNA7tPrpAE8ReDSSMik@3HVoEZBT9/w8A" rel="nofollow noreferrer">Try it online in 05AB1E (legacy)</a><br />
<a href="https://tio.run/##yy9OTMpM/f//UcOiw0uObT28FsjICDq0LiXzUcPMw/sVNA7tPrpAE8ReDSSMik@3HVoEZBT9/w8A" rel="nofollow noreferrer">Try it online in 05AB1E</a></p>
<p><strong>Explanation:</strong></p>
<p>Let's start with a bit of history of these three versions. The development of 05AB1E started at the start of 2016 (or actually, the very first git-commit was on December 21st, 2015). This new codegolf language was being built in Python as backend. Mid 2016 2sable was branched of that current 05AB1E version (July 7th, 2016 to be exact), and the strength of 2sable in comparison to that old 05AB1E version was added: implicit inputs. Later on implicit input was also added to 05AB1E, and 2sable became obsolete and basically a forgotten version right after it was created on that day July 7th, 2016.<br />
Then in mid-2018, a new 05AB1E version was being started, this time completely rewritten in Elixir instead of Python, with loads of new builtins added and some builtins changed or even removed.</p>
<p>So, let's go over the code and see what it does in each of the three versions:</p>

<pre class="lang-python prettyprint-override"><code>•äƵí•              # Legacy 05AB1E / new 05AB1E: push compressed integer 14793296
                   # 2sable: no-op (compressed integers didn't exist yet, 
                   #         so nothing is pushed to the stack)
     h             # Convert this from an integer to a hexadecimal string: &quot;E1BA50&quot;
      R            # Reverse this string: &quot;05AB1E&quot;
                   # (2sable: the stack remains empty for `h` and `R`)
       ®           # Push -1
        d          # 2sable: check if -1 only consist of digits (falsey)
                   # 05AB1E (legacy): check if -1 is an integer (truthy)
                   # New 05AB1E: check if -1 is a non-negative (≥0) integer (falsey)
         i         # If it is truthy:
          ’ÿ (»Š)’ #  Push dictionary string &quot;ÿ (legacy)&quot;,
                   #  where the `ÿ` is automatically filled with the top of the stack
         ë         # Else:
          ’2sˆ¢’   #  Push dictionary string &quot;2sable&quot;
                r  #  And reverse the stack
                   #  (05AB1E: stack changes from &quot;05AB1E&quot;,&quot;2sable&quot; to &quot;2sable&quot;,&quot;05AB1E&quot;
                   #   2sable: stack stays the same &quot;2sable&quot;)
                   # (after which the top of the stack is output implicitly as result)
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (sections <em>How to use the dictionary?</em> and <em>How to compress large integers?</em>)</a> to understand why <code>’ÿ (»Š)’</code> is <code>&quot;ÿ (legacy)&quot;</code>, <code>’2sˆ¢’</code> is <code>&quot;2sable&quot;</code>, and <code>•äƵí•</code> is <code>14793296</code>.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/cairdcoinheringaahing/Whispers" rel="nofollow noreferrer">Whispers</a>, 35 bytes / 3 versions = 11.66</h1>
<pre><code>&gt;&gt; R2
&gt;&gt; -1
&gt; 3
&gt; 2
&gt; 1
&gt;&gt; Output 3
</code></pre>
<p><a href="https://tio.run/##K8/ILC5ILSr@/9/OTiHIiAtI6hpy2SkYAzGQp2AIEvEvLSkoLVEw/v8fAA" rel="nofollow noreferrer" title="Whispers v1 – Try It Online">Try it online! (Whispers v1)</a></p>
<p><a href="https://tio.run/##K8/ILC5ILSo2@v/fzk4hyIgLSOoactkpGAMxkKdgCBLxLy0pKC1RMP7/HwA" rel="nofollow noreferrer" title="Whispers v2 – Try It Online">Try it online! (Whispers v2)</a></p>
<p>Unfortunately, Whispers v3 isn't currently on TIO, so you'll have to download it from the repo to try it.</p>
<h2>How they work</h2>
<p>This relies on the feature in Whispers which removes lines that contain (among other things) invalid instructions from the code before numbering the lines for execution.</p>
<p>All three programs work by calling line <strong>3</strong> and outputting the number on that line. However, by removing lines that contain invalid instructions, we change which line line <strong>3</strong> actually is. As they all just output line <strong>3</strong>'s result, I'll focus the explanations on which line is line <strong>3</strong> and why.</p>
<h3>v1</h3>
<p>In version 1, neither of the first two lines are valid instructions. Therefore, the code passes to the executor is</p>
<pre><code>&gt; 3
&gt; 2
&gt; 1
&gt;&gt; Output 3
</code></pre>
<p>and line <strong>3</strong> simply returns <span class="math-container">\$1\$</span></p>
<h3>v2</h3>
<p>In version 2, the first line <code>&gt;&gt; R2</code> is now a valid instruction: it takes a vector and outputs its polar form (i.e. magnitude and angle). However, the second line <code>&gt;&gt; -1</code> is not yet valid, so the interpreter sees</p>
<pre><code>&gt;&gt; R2
&gt; 3
&gt; 2
&gt; 1
&gt;&gt; Output 3
</code></pre>
<p>The first line shifts line <strong>3</strong> to refer to <code>&gt; 2</code>, which just returns <span class="math-container">\$2\$</span>.</p>
<h3>v3</h3>
<p>The entire program is valid in the latest version Whispers, which includes a massive expansion of builtins, but the shortest new addition is the negate command: <code>&gt;&gt; -1</code>, which does not return <span class="math-container">\$-1\$</span>, rather it takes in an argument and negates in. Therefore, the interpreter sees</p>
<pre><code>&gt;&gt; R2
&gt;&gt; -1
&gt; 3
&gt; 2
&gt; 1
&gt;&gt; Output 3
</code></pre>
<p>Meaning that line <strong>3</strong> is now <code>&gt; 3</code>, which, you guessed it, returns <span class="math-container">\$3\$</span>.</p>
</div>
<div id="pu13" class="pu"><h2>Python 1, 2, and 3, <s>43</s> 33 bytes, score <s>14.333</s> 11</h2>
<p>-10 bytes by using <code>and</code> and <code>or</code> instead of an if/else statement</p>
<pre><code>print(1and str(1&lt;2)==&quot;1&quot;or 3/2*2)
</code></pre>
<p>Yes, there are already submissions for Python, but this one also differentiates Python 1 and 2.</p>
<p>The difference between Python 3 and 2 are pretty well known, but with Python 1? It's very similar to Python 2.</p>
<p>But I found something.</p>
<p>In Python 1, a true statement evaluates to 1. In Python 2 and 3, it evaluates to True. By turning a true statement into a string, you can differentiate Python 1 and the later versions.</p>
</div>
<div id="pu14" class="pu"><h1>SmileBASIC (2 and 3), 4.5 bytes</h1>

<p>Thank you 12Me21 for helping out.</p>

<pre><code>?3+CANCEL
</code></pre>

<p>In SB, variable declaration rules are lazy by default; if a variable name is not declared or assigned anywhere in scope, it is assumed to be 0. There's also a handful of reserved system variables and constants which varies between version and platform.</p>

<p>In SB v2, <code>CANCEL</code> was a reserved variable that represented -1; this was intended for use with <code>RESULT</code> to check the state of a dialog box or other action. In SB v3, this variable is not present.</p>

<p>Thus, when this program is run on a standard SB v2 environment it prints 2, and on a v3 environment it prints 3.</p>
</div>
<div id="pu15" class="pu"><h1>Whitespace, 43 bytes, 2 versions, score 21.5</h1>

<p>Version 0.3 of Whitespace added the <code>copy</code> and <code>slide</code> instructions. Of those two, <code>slide</code> is exploited here. Slide removes the top <em>n</em> elements of the stack, keeping the top element. The code for version 0.3 slides 2 and version 0.2 ignores the slide and keeps the 2.</p>

<pre><code>SS
T
STSSSTT
SSSTS
SSSTSTTTS
ST
ST
T
SST
ST 
</code></pre>

<p>Written as more readable Whitespace assembly:</p>

<pre><code>push 0   # Push 0 to the stack
printi   # Print 0 as an integer
push 3   # Push 3 to the stack
push 2   # Push 2 to the stack
push '.' # Push 46 ('.') to the stack
slide 1  # Pop 2 if version 0.3 or skip instruction
printc   # Print 46 as character '.'
printi   # Print 2 or 3 as integer
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a> and <a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>36</s> 34 bytes, score <s>18</s> 17</h1>

<pre><code>print(str(hash(float('-inf')))[1])
</code></pre>

<p>In <a href="https://tio.run/##K6gsycjPM/r/v6AoM69Eo7ikSCMjsThDIy0nP7FEQ103My9NXVNTM9owVvP/fwA" rel="nofollow noreferrer" title="Python 2 – Try It Online">Python 2</a>, the hash of negative infinity is -271828 but in <a href="https://tio.run/##K6gsycjPM/7/v6AoM69Eo7ikSCMjsThDIy0nP7FEQ103My9NXVNTM9owVvP/fwA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Python 3</a> it's -314159. Edit: Saved 2 bytes, 1 point of score, thanks to @ArBo.</p>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 30 bytes (5&lt;= Score &lt;=10)</h1>

<pre><code>Floor[.8+Length@Names@"*"/615]
</code></pre>

<p>I tested this on Mathematica 10.2, which has 5683 named symbols and 11.3, which has 6280 names symbols.  I used cloud.wolfram.com to test it on Mathematica 12.0 which has 6914 named symbols.  With possibly some slight tweaking to the numbers, this could work for as many as 6 versions (see the graph at <a href="https://blog.wolfram.com/2018/06/21/weve-come-a-long-way-in-30-years-but-you-havent-seen-anything-yet/" rel="nofollow noreferrer">https://blog.wolfram.com/2018/06/21/weve-come-a-long-way-in-30-years-but-you-havent-seen-anything-yet/</a>) which shows that the function count has grown pretty much linearly since v6.)</p>

<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b73y0nP78oWs9C2yc1L70kw8EvMTe12EFJS0nfzNA09n9AUWZeiUMaF4RWCUstKs7Mz/sPAA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1>Japt, 4 bytes / 2 versions = 2</h1>
<pre><code>J\+2
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=SlwrMg==&amp;input=" rel="nofollow noreferrer"><strong>Japt</strong></a> <strong>|</strong> <a href="https://ethproductions.github.io/japt/?v=2.0a0&amp;code=SlwrMg==&amp;input=" rel="nofollow noreferrer"><strong>Japt 2.0</strong></a></p>
<p>Alternative:</p>
<pre><code>2\/2
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=MlwvMg==&amp;input=" rel="nofollow noreferrer"><strong>Japt</strong></a> <strong>|</strong> <a href="https://ethproductions.github.io/japt/?v=2.0a0&amp;code=MlwvMg==&amp;input=" rel="nofollow noreferrer"><strong>Japt 2.0</strong></a></p>
</div>
<div id="pu19" class="pu"><h1>T-SQL, 41 bytes / 11 versions = 3.7 score</h1>
<pre><code>SELECT MAX(cmptlevel)/10FROM sysdatabases
</code></pre>
<p>Note that this does <em>not</em> use a SQL &quot;builtin, macro, or custom compiler flag&quot;; that would be something like <code>SELECT @@VERSION</code> or <code>SELECT SERVERPROPERTY('productversion')</code>.</p>
<p>Instead, this looks up the <em>highest &quot;compatibility level&quot; for all databases on the server</em>. Existing databases on a server might have older compatibility levels, but the system database <code>tempdb</code> is recreated each time the server is restarted, so will always have the compatibility level of the actual current version. (Using <code>MAX</code> is shorter than including <code>WHERE name='tempdb'</code>).</p>
<p>I divide by 10 so it returns the <a href="https://en.wikipedia.org/wiki/History_of_Microsoft_SQL_Server#Release_summary" rel="nofollow noreferrer">actual SQL version number</a>.</p>
<p>I've successfully tested this on all versions between SQL 2005 and 2017, but I believe this will ultimately work in <a href="https://sqlserverbuilds.blogspot.com/2014/01/sql-server-internal-database-versions.html" rel="nofollow noreferrer">11 distinct versions</a>:</p>
<pre><code>Version Number    Release Name
6                 SQL Server 6.0
6.5               SQL Server 6.5
7                 SQL Server 7.0
8                 SQL Server 2000
9                 SQL Server 2005
10                SQL Server 2008 (or SQL Server 2008 R2)
11                SQL Server 2012
12                SQL Server 2014
13                SQL Server 2016
14                SQL Server 2017
15                SQL Server 2019 (Pre-release)
</code></pre>
<p>Let me know if anyone has SQL 2000 or older still running to see if this works as expected.</p>
<p>Note that my code uses a deprecated system table for widest compatibility, I'd normally use the newer <code>sys.databases</code> system view introduced in SQL 2005.</p>
</div>
<div id="pu20" class="pu"><h2>Bash, all 4 versions, <s>72</s> <s>71</s> 32 bytes &rArr; score = 8</h2>

<pre><code>s=$'\ua\xa\n';expr 5 - ${#s} / 2
</code></pre>

<p>This piece of code makes use of different interpretations of <code>$'...'</code> strings in each version of Bash.<br>
Outputs the major version number -- and that's it.</p>

<p>Doc found <a href="http://wiki.bash-hackers.org/scripting/bashchanges" rel="nofollow noreferrer">here</a>.</p>

<h3>Ungolfed:</h3>

<pre><code>s=$'\ua\xa\n';
expr 5 - ${#s} / 2
# Bash v4 sees three linefeeds =&gt; length of 3 =&gt; 5 - 3 / 2 = 4
# Bash v3 sees the literal '\ua' + two linefeeds: 5 chars in length
#    =&gt; 5 - 5 / 2 = 3
# Bash v2 sees '\ua\xa' + linefeed, 7 chars: 5 - 7 / 2 = 2
# Bash v1 does not even interpret $'..' strings, and sees literally '$\ua\xa\n' of length 9 =&gt; 5 - 9 / 2 = 1
</code></pre>

<p>This answer is halfly a guess; I only tested it in bash 4 and 3, but it should work on other versions too.</p>

<p>Let me know if it does / does not, I will try with other versions as soon as I have them available.</p>

<p>-1 char thanks to Jens.<br>
-29 bytes thanks to Digital Trauma (the whole <code>expr</code> idea)!</p>
</div>
<div id="pu21" class="pu"><h1>Ruby 1.x (&lt;1.9) and 2.x, <s>10</s> 8 bytes, score = 4</h1>



<pre class="lang-ruby prettyprint-override"><code>$&gt;&lt;&lt;?2%7
</code></pre>

<p>Try it:</p>

<ul>
<li><a href="https://eval.in/896738" rel="nofollow noreferrer">Ruby 1.8.7</a></li>
<li><a href="https://eval.in/896737" rel="nofollow noreferrer">Ruby 2.0.0</a></li>
</ul>

<p>This works by exploiting the different behaviors of <code>?x</code> between Ruby 1.x and 2.x. In Ruby 1.x, <code>?A</code> (for example) returns <code>65</code> (the ASCII value of the character <code>A</code>), but in Ruby 2.0 it returns the one-character string <code>"A"</code>.</p>

<p>The code above is equivalent to this:</p>

<pre class="lang-ruby prettyprint-override"><code>val = ?2
$&gt; &lt;&lt; val % 7
</code></pre>

<p>In Ruby 1.x (&lt;1.9), the value of <code>val</code> is <code>50</code> (the ASCII value of the character <code>2</code>), a Fixnum. <code>Fixnum#%</code> is the modulo operator, so <code>50 % 7</code> returns <code>1</code>.</p>

<p>In Ruby 2.x, <code>val</code> is the string <code>"2"</code>. <code>String#%</code> is an infix version of <a href="http://ruby-doc.org/core-2.4.2/Kernel.html#method-i-sprintf" rel="nofollow noreferrer"><code>sprintf</code></a>, so <code>"2" % 7</code> is equivalent to <code>sprintf("2", 7)</code>, where <code>"2"</code> is the format string. Since the format string doesn't contain any format sequences (e.g. <code>%d</code>), subsequent arguments are discarded and <code>"2"</code> is returned.</p>

<p>Finally, <code>$&gt;</code> is an alias for <code>$stdout</code>, so <code>$&gt; &lt;&lt; ...</code> prints the result.</p>
</div>
<div id="pu22" class="pu"><h1>Befunge, score = 3.5</h1>
<p>7 bytes, 2 versions</p>
<pre><code>&quot;]&quot;'b.@
</code></pre>
<p><a href="http://befunge.tryitonline.net/#code=Il0iJ2IuQA&amp;input=" rel="nofollow noreferrer">Try it online in Befunge-93</a><br />
<a href="http://befunge-98.tryitonline.net/#code=Il0iJ2IuQA&amp;input=" rel="nofollow noreferrer">Try it online in Befunge-98</a></p>
<p><code>&quot;]&quot;</code> is a string literal in both versions, pushing 93 (the ASCII value of <code>[</code>) onto the stack. <code>'b</code> is a character literal in Befunge-98, pushing 98 (the ASCII value of <code>b</code>), but those are invalid instructions in Befunge-93, so they are simply ignored. We thus end with 93 on the top of the stack in Befunge-93 and 98 in Befunge-98. <code>.@</code> writes out the value at the top of the stack and then exits.</p>
</div>
<div id="pu23" class="pu"><h1><a href="https://docs.python.org/" rel="noreferrer">Python</a>, 606 bytes / 15 versions = score 40.4</h1>

<p><em>-67 bytes (lol) thanks to NoOneIsHere.</em></p>

<p>The versions are 0.9.1, 2(.0), 2.2, 2.2.2, 2.5.0, 2,5.1, 3(.0), 3.1, 3.1.3, 3.2.1, 3.3, 3.4, 3.5 aaand 3.6.</p>



<pre class="lang-python prettyprint-override"><code>try:eval('1&amp;2')
except:print('0.9.1');1/0
if`'\n'`&lt;'\'\\n\'':print(2);1/0
try:from email import _Parser;print(2.2);1/0
except:0
try:eval('"go"in""')
except:print('2.2.2');1/0
try:int('2\x00',10);print(2.5);1/0
except:0
if pow(2,100)&lt;1:print('2.5.1');1/0
if str(round(1,0))&gt;'1':print(3);1/0
if format(complex(-0.0,2.0),'-')&lt;'(-':print(3.1);1/0
if str(1.0/7)&lt;repr(1.0/7):print('3.1.3');1/0
try:eval('u"abc"')
except:print('3.2.1');1/0
try:int(base=10);print(3.3);1/0
except:0
try:import enum
except:print('3.3.3');1/0
try:eval('[*[1]]')
except:print(3.4);1/0
try:eval('f""')
except:print(3.5);1/0
print(3.6)<br>
</code></pre>

<p>All credit to <a href="https://codegolf.stackexchange.com/a/94834">Sp3000's amazing answer</a>. The trailing newline is necessary.</p>

<p>Whee, that was fun to golf. This should work (yes, I installed every one of these versions), but I might've accidentally borked something. If anybody finds a bug, please let me know.</p>
</div>
<div id="pu24" class="pu"><h1><a href="https://github.com/TehFlaminTaco/Reverse-Programmer-Notation" rel="nofollow noreferrer">RProgN 1</a>/<a href="https://github.com/TehFlaminTaco/RProgN-2" rel="nofollow noreferrer">2</a>, 4 bytes / 2 versions. Score = 2</h1>
<pre><code>1 1+
</code></pre>
<p>RProgN1 requires commands to be split into words, where as RProgN2 reads byte by byte by default. As such, RProgN1 can't do anything with <code>1+</code>, so it just outputs <code>1</code>, but RProgN2 can execute it, so it adds <code>1</code> to the <code>1</code>, giving <code>2</code>.</p>
<p><a href="https://tio.run/##Kyooyk/P@//fUMFQ@/9/AA" rel="nofollow noreferrer" title="RProgN – Try It Online">Try RProgN1</a></p>
<p><a href="https://tio.run/##Kyooyk/P0zX6/99QwVD7/38A" rel="nofollow noreferrer" title="RProgN 2 – Try It Online">Try RProgn2</a></p>
</div>
<div id="pu25" class="pu"><h1>Lua 5.3.3 / 5.2.4, 32 bytes / 2 = 16 points</h1>



<pre class="lang-lua prettyprint-override"><code>print(54-#("a"):gsub("a?$","a"))
</code></pre>

<p>This actually abuses a bug in Lua 5.2's <code>string.gsub</code> function: In Lua 5.2, <code>"a?$"</code> would first match <code>"a{endOfString}"</code> and then <code>"{endOfString}"</code> a second time, which is obviously incorrect, because <code>gsub</code> may only match each character/anchor in the string once. This results in <code>"a"</code> being substituted into the string twice, giving a final string length of 2.</p>

<p>In Lua 5.3, the bug is fixed, so <code>"a?$"</code> only matches <code>"a{endOfString}"</code>, thus matching the end of the string only once, which is the correct behavior. Therefore, <code>"a"</code> is substituted into the string just once, resulting in a string length of 1.</p>

<p>The difference between the string length and 54 then gives the major/minor version number of the Lua interpreter, which is printed as follows:</p>

<p>Lua 5.2.4: <code>52</code><br>
Lua 5.3.3: <code>53</code></p>

<p>(I could only test on these two specific versions, but it should work on more)</p>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/ethproductions/japt/" rel="nofollow noreferrer">Japt</a> (1 &amp; 2), <s>8</s> 6 / 2 = <s>4</s> 3</h1>
<pre><code>'1r\S2
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.5&amp;code=JzFyXFMy&amp;input=" rel="nofollow noreferrer">Test v1</a>  <strong>|</strong>  <a href="https://ethproductions.github.io/japt/?v=2.0&amp;code=JzFyXFMy&amp;input=" rel="nofollow noreferrer">Test v2</a></p>
<ul>
<li>2 bytes saved thanks to <a href="https://codegolf.stackexchange.com/users/61613/oliver">Oliver</a></li>
</ul>
<hr />
<h2>Explanation</h2>
<p>Prior to v2, Japt used a customised RegEx syntax, so we can take advantage of that.</p>
<pre><code>'1
</code></pre>
<p>The number 1 as a string.</p>
<pre><code> r  2
</code></pre>
<p>Replace (<code>r</code>) the below with a <code>2</code>.</p>
<pre><code>\S
</code></pre>
<p>Japt 2 sees this as the RegEx <code>/\S/g</code>, which matches the <code>1</code>. Japt 1 ignores the <code>\</code> escape character and just sees the <code>S</code>, which is the Japt constant for a space character and, obviously, doesn't match the <code>1</code>.</p>
</div>
<div id="pu27" class="pu"><h1>EcmaScript 3 / 5 / 2015 / 2016 / 2017 in Browser, 59 bytes / 5 versions = 11.8 points</h1>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>alert(2017-2*![].map-2010*![].fill-![].includes-!"".padEnd)</code></pre>
</div>
</div>
</p>

<p><a href="https://i.stack.imgur.com/bxlqv.png" rel="noreferrer"><img src="https://i.stack.imgur.com/bxlqv.png" alt="NetScape 7 report 3, and Opera 12 report 5"></a></p>

<p>Save 1 byte thanks to GOTO 0</p>
</div>
<div id="pu28" class="pu"><h1>Julia 0.4, 0.5, 46 bytes, score 22</h1>

<pre><code>f(::ASCIIString)=.4
f(::String)=.5
f()=f("")
</code></pre>

<p>Julia has changed the type name of the concrete and abstract String types in many versions.</p>

<p>This code in particular take advantage of:</p>

<p><strong>Julia 0.4</strong>: </p>

<ul>
<li>Concrete is <code>ASCIIString</code>, </li>
<li>Abstract is officially <code>AbstractString</code>, </li>
<li>Abstract has deprecated alias to <code>String</code>.</li>
<li>Concrete is most specific than abstract so it wins dispatch</li>
</ul>

<p><strong>Julia 0.5</strong>: </p>

<ul>
<li>Concrete is officially <code>String</code>, </li>
<li>Concrete has deprecated alias to <code>ASCIIString</code>, </li>
<li>Abstract is <code>AbstractString</code>, (though that doesn't matter here)</li>
<li>As two methods have been defined for the concrete string type, the latter over-writes the former.</li>
</ul>

<p>See also my <a href="https://codegolf.stackexchange.com/a/139537/4397">newer more effective solution based on different principles</a></p>
</div>
<div id="pu29" class="pu"><h1><a href="https://en.wikipedia.org/wiki/Batch_file" rel="nofollow noreferrer">Windows' Batch File</a>, 35 bytes / 2 versions = score 17.5</h1>

<pre class="lang-batch prettyprint-override"><code>@if /i Z==z @echo NT&amp;exit
@echo DOS
</code></pre>

<p>Prints <code>DOS</code> on MS-DOS <sup>(duh)</sup> and <code>NT</code> on Windows NT. <sup>(duh)</sup></p>

<p>Now, for some explanation.</p>

<p>Windows has had batch scripting since MS-DOS times and it hasn't changed much since then. However, when <a href="https://en.wikipedia.org/wiki/Batch_file#Windows_NT" rel="nofollow noreferrer">Windows NT</a> came along, Microsoft changed the default interpreter for batch scripts, from <code>COMMAND.COM</code> to <code>cmd.exe</code> (now also allowing the extension <code>.cmd</code> as an alternative to the original <code>.bat</code>).</p>

<p>With that, they also implemented a <a href="https://en.wikipedia.org/wiki/Cmd.exe#Comparison_with_MS-DOS_Prompt" rel="nofollow noreferrer">few changes</a>, such as the <code>/i</code> flag for ignoring string case on conditionals. That is, while <code>Z==z</code> is false, <code>/i Z==z</code> is true.</p>

<p>We exploit that DOS didn't have case insensitivy and compare uppercase <code>Z</code> with lowercase <code>z</code>. By using the <code>/i</code> flag, we end up with a <code>Z==z</code> (false) conditional on DOS and <code>z==z</code> (true) on NT.</p>

<p>Now, I realize that the challenge specifies that a version number should be printed. But, as far as I know, there is no 'version number' to batch scripting, so this is the closest I could get.</p>

<hr>

<p>Tested on Windows 10, DOSBox and vDos:</p>

<p><strong>Windows 10:</strong></p>

<p><a href="https://i.stack.imgur.com/Y45u3.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/Y45u3.png" alt="Windows 10"></a></p>

<p>(run with <code>cmd /k</code> to prevend window closing on <code>exit</code>)</p>

<p><strong>DOSBox:</strong></p>

<p><a href="https://i.stack.imgur.com/8hwdW.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/8hwdW.png" alt="DOSBox"></a></p>

<p><strong>vDos:</strong></p>

<p><a href="https://i.stack.imgur.com/jkcg0.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/jkcg0.png" alt="vDos"></a></p>
</div>
<div id="pu30" class="pu"><h1>Erlang, 180 bytes, 11 versions, score 16.36</h1>



<pre class="lang-erlang prettyprint-override"><code>20-length([A||A&lt;-[schedulers,c_compiler_used,cpu_topology,snifs,dynamic_trace,port_count,nif_version,end_time,max_heap_size,atom_count],{'EXIT',_}&lt;-[catch erlang:system_info(A)]]).
</code></pre>

<p>With indentation and line breaks:</p>

<pre class="lang-erlang prettyprint-override"><code>20-length([A||A&lt;-
                  [schedulers,
                   c_compiler_used,
                   cpu_topology,
                   snifs,
                   dynamic_trace,
                   port_count,
                   nif_version,
                   end_time,
                   max_heap_size,
                   atom_count],
              {'EXIT',_}&lt;-[catch erlang:system_info(A)]]).
</code></pre>

<p>Tested on one minor release of each major version since 10:</p>

<ul>
<li>R10B-9</li>
<li>R11B-5</li>
<li>R12B-5</li>
<li>R13B04</li>
<li>R14B04</li>
<li>R15B03</li>
<li>R16B03</li>
<li>17.5.6.2</li>
<li>18.2.1</li>
<li>19.2</li>
<li>20.0</li>
</ul>

<p>The idea is that every major release has added at least one new allowable argument for the function <code>erlang:system_info</code>, so let's try the ones in the list, count how many of them fail, and subtract the number of failures from 20, which is the current version.</p>
</div>
<div id="pu31" class="pu"><h1><a href="https://docs.python.org/" rel="noreferrer">Python</a>, 196 bytes / 16 versions = score 12.25</h1>

<p>The versions are 1.5, 1.6, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 3.0, 3.1, 3.2, 3.3, 3.4, 3.5, and 3.6<br>
Unfortunately I had to leave out 2.7 because there aren't any modules in it (as far as I can tell) that aren't in 2.6 but are in 3.0.</p>



<pre class="lang-python prettyprint-override"><code>i=15
try:
 for m in'os.atexit.os.os.os.warnings.cgitb.heapq.collections._ast.abc.queue.os.os.os.importlib.argparse.lzma.asyncio.zipapp.secrets.'.split('.'):__import__(m);i=i+1
except:print(i/10.)
</code></pre>

<p>We loop through a bunch of modules that were introduced in different versions of python, and at the first error we quit and return the version.
The gaps between major versions are filled in by repeatedly importing <code>os</code>.
The test for python 1.5 relies on <code>string.split</code> not being present until 1.6.</p>

<p>Credit to <a href="https://codegolf.stackexchange.com/a/139274/10894">Olivier Grégoire's answer</a> for the idea of testing for new classes/modules in a loop.</p>

<p>I've now finally tested on all relevant versions of python...which required editing the 1.5 source code to get it to compile...</p>
</div>
<div id="pu32" class="pu"><h1>Julia 0.2-0.7, bytes = 59, versions = 6, score = 9.833</h1>

<pre><code>f()=[4,0,3,0,5,2,6,7][endof(subtypes(AbstractArray))-16]/10
</code></pre>

<p>Turns out each version of julia has had a different number of abstract array subtypes. So we use the number of subtypes to index into an array that contains the version number.
The current nightly (0.7), currently has 25, but it is the fallback case anyway.</p>

<p>Julia 0.1 also has a different number of AbstractArray subtypes I would guess.
However, julia 0.1 does not have the <code>subtypes</code> function.
So I can't trivially retrieve them.</p>

<p>A significant improvement over <a href="https://codegolf.stackexchange.com/a/139523/4397">my previous answer.</a></p>

<p>(Thanks @one-minute-more for almost halving the bytecount)</p>
</div>
<div id="pu33" class="pu"><h1>C++ 11/14/17, score = 147/3 = 49</h1>

<p>To distinguish between C++11 and C++14/17, it uses the change in the default <code>const</code>ness of <code>constexpr</code> member functions in C++14 (with credit to the example at <a href="https://stackoverflow.com/questions/23980929/what-changes-introduced-in-c14-can-potentially-break-a-program-written-in-c1">https://stackoverflow.com/questions/23980929/what-changes-introduced-in-c14-can-potentially-break-a-program-written-in-c1</a>).  To distinguish between C++14 and C++17, it uses the fact that C++17 disabled trigraphs.</p>

<pre><code>#include&lt;iostream&gt;
#define c constexpr int v
struct A{c(int){return 0;}c(float)const{return*"??="/10;}};int main(){const A a;std::cout&lt;&lt;11+a.v(0);}
</code></pre>

<p>Ungolfed:</p>

<pre><code>struct A {
    constexpr int v(int) { return 0; }
    constexpr int v(float) const {
        // with trigraphs, *"??=" == '#' == 35, v() returns 3
        // without trigraphs, *"??" == '?' == 63, v() returns 6
        return *("??=") / 10;
    }
};

int main() {
    const A a;
    std::cout &lt;&lt; 11 + a.v(0);
}
</code></pre>

<p>(Tested with Debian gcc 7.1.0 using <code>-std=c++{11,14,17}</code>.)</p>
</div>
<div id="pu34" class="pu"><h1>Cubically, 4 bytes, score 4/&infin;</h1>

<pre><code>B3%0
</code></pre>

<p>Works in every version your system has enough memory to run. <strong>Non-competing because it's lame.</strong> Valid per <a href="https://codegolf.meta.stackexchange.com/q/13660/61563">this meta post</a>.</p>

<p>Basically, B3 rotates one row from the left face into the top face. F3 would work just as well, as would F₁3 or B₁3. As one row in Cubically 3x3x3 is three cubelets by one cubelet, this puts three <code>1</code>'s into the top face, giving it a face sum of 3. <code>%0</code> prints that top face sum, printing 3 for Cubically <strong>3</strong>x3x3.</p>

<p>In Cubically 4x4x4, rows are 4x1 cubies. Puts 4 1's into the top face, yielding a sum of 4.</p>
</div>
<div id="pu35" class="pu"><h2>Perl 5 and Perl 6, <strike>23 bytes</strike> 19 bytes, score 9.5</h2>

<pre><code>print 6-grep '.',''
</code></pre>

<p>Perl 5 <code>grep</code> first op is always treated as a regex, not so in Perl 6.</p>
</div>
<div id="pu36" class="pu"><h2><a href="https://en.wikipedia.org/wiki/K_(programming_language)" rel="nofollow noreferrer">K</a>/<a href="https://github.com/kevinlawler/kona" rel="nofollow noreferrer">Kona</a>, 6 bytes, 2 versions - score 3</h2>

<pre><code>-4+@,0
</code></pre>

<p>Version 3 defaults to long numeric types, whereas 2 defaults to integer numerics. We enlist (<code>,</code>) to get a positively typed number (atoms are negative), we get its type (<code>@</code>), and we add that to -4.</p>
</div>
<div id="pu37" class="pu"><h1>Idea of the solution</h1>

<p>Each version hava added a new syntax features, so code vith them will cause a syntax error in smaller versions of the language.</p>

<ul>
<li><strong>ES5:</strong> Octal constants <code>03</code> are disallowd in strict mode (unused in actual solutions)</li>
<li><strong>ES6:</strong> Octal constants <code>0o6</code> are introduced</li>
<li><strong>ES7:</strong> Pow operator is introduced: <code>7**1</code></li>
<li><strong>ES8:</strong> Trailing comma in function call is allowed: <code>f(8,)</code></li>
<li><strong>ES9:</strong> Tagging of invalid strings is allowed: <code>f`\u9`</code></li>
</ul>

<p>So evaluating</p>

<pre><code>eval('9;'+s)
</code></pre>

<p>on one of the examples will either return the the value, or throw a SyntaxError. But what value would it return? For all ES6-ES8 snippets the last calculated value will be the version. In ES9 snippet the 9 from <code>9;</code> is return. So if we place a minimal supported version into catch block like</p>

<pre><code>eval(`try{eval('9;'+s)}catch(e){6}`)
</code></pre>

<p>we'll get the behaviour we want.</p>

<p>

<p></p>

<h1>Ecmascript 5+ (for 5, 6, 7, 8, 9); 124 / 5 = 24.8 points</h1>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>alert(Math.max.apply(0,'0o6~7**1~f(8,)~f`\\u9`'.split('~').map(function f(s){return eval("try{eval('9;'+s)}catch(e){5}")})))</code></pre>
</div>
</div>
</p>

<p>Tested in:</p>

<ul>
<li>IE8: Error (Object doesn't support property or method 'map')</li>
<li>IE 11: 5</li>
<li>Edge 14: 8</li>
<li>Chrome 60: 8</li>
<li>Firefox 55: 9</li>
</ul>

<hr>

<h1>Ecmascript 6+ (for 6, 7, 8, 9); 96 / 4 = 24 points</h1>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>alert(Math.max(...'7**1~f(8,)~f`\\u9`'.split`~`.map(f=s=&gt;eval(`try{eval('9;'+s)}catch(e){6}`))))</code></pre>
</div>
</div>
</p>

<p>Tested in:</p>

<ul>
<li>Edge 14: 8</li>
<li>Chrome 60: 8</li>
<li>Firefox 55: 9</li>
</ul>
</div>
<div id="pu38" class="pu"><h2>R, versions 2 and 3, score: 10.5 points</h2>

<pre><code>cat(exists("cite")+2)
</code></pre>

<p>This command returns <code>2</code> for R 2.x.x and <code>3</code> for R 3.x.x. The function <code>cite</code> was added in R version 3.0.0. Therefore, the command <code>exists("cite")</code> returns <code>FALSE</code> for R 2.x.x and <code>TRUE</code> for R 3.x.x.</p>

<h2>R, all versions (1, 2, and 3), score: 12⅓ points</h2>

<pre><code>e=exists;cat(e("cite")+e("eapply")+1)
</code></pre>

<p>The function <code>eapply</code> was introduced in R 2.0.0.</p>
</div>
<div id="pu39" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, score 7.3 or 3</h1>
<h3>51 bytes for 7 versions or 6 bytes for 2 versions</h3>

<p>For the lowest score, distinguish versions 12 and 13 with:</p>
<pre class="lang-apl prettyprint-override"><code>12+≡⍳0
</code></pre>
<p>Twelve plus the depth of the first zero integers. Until version 12, <code>⍳0</code> (wrongly) returned the index origin as a scalar, i.e. depth 0. In version 13 and up, <code>⍳0</code> returns an empty list, i.e. depth 1.</p>
<hr />
<p>Much more interesting is the following anonymous function which distinguishes all major versions 10 through 16 (the current). It needs a dummy argument (which is ignored) to run.</p>
<pre class="lang-apl prettyprint-override"><code>{2::10⋄⌷2::11⋄_←⎕XML⋄0::+/12⎕ML,≡⍳0⋄≡,/⍬::15⋄16@~0}
</code></pre>
<p><code>{</code>…<code>}</code> an anonymous function which allows setting error guards <code>::</code> with a numeric error code (determining which type of error to catch) on the left, and on the right, the result to be returned in case of error.</p>
<p> <code>2::10</code> if SYNTAX ERROR, return 10</p>
<p> <code>⌷2::11</code> materialise (introduced in version 11) 2 (SYNTAX ERROR) which if happens, yields 11</p>
<p> <code>⋄_←⎕XML</code> try: assign XML system function (introduced in version 12) to a dummy name</p>
<p> <code>0::</code>…<code>⋄</code> if any error happens;</p>
<p>  <code>⍳0</code> first zero integers (gives 1 until version 12 and empty list from version 13)</p>
<p>  <code>≡</code> depth of that (0 until 12, 1 from 13)</p>
<p>  <code>12⎕ML,</code> prepend 12 and the <strong>M</strong>igration <strong>L</strong>evel (0 until 13, 1 from 14)</p>
<p>  <code>+/</code> sum (12 until 12, 13 in 13, 14 from 14)</p>
<p> <code>≡,/⍬::15</code> try: concatenate the elements of an empty list (introduced in version 15) and get its depth, 2 (SYNTAX ERROR) which if happens, yields 15</p>
<p> <code>⋄16@~0</code> try: amend with a 16 at (introduced in version 16) positions where logical NOT yields truth, applied to 0</p>
<p>Try it on <a href="http://tryapl.org/?a=%7B2%3A%3A10%u22C4%u23372%3A%3A11%u22C4_%u2190%u2395XML%u22C40%3A%3A+/12%281%29%2C%u2261%u23730%u22C4%u2261%2C/%u236C%3A%3A15%u22C416a%7E0%7D%u236C&amp;run" rel="nofollow noreferrer">TryAPL</a> (slightly modified to pass security) and <a href="https://tio.run/##SyzI0U2pTMzJT///v@xR24RqIysrQ4NH3S2PeraDmIZAZjxQ/FHf1AhfHyDHwMpKW9/QCMj39dF51LnwUe9msPLOhTr6j3rXALWYArmGZg51BrVAIxWAYgA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it Online</a>!</p>
</div>
<div id="pu40" class="pu"><h1>Python 3 and Python 2.0, 18 bytes, score 18 / 2 = 9</h1>



<pre class="lang-python prettyprint-override"><code>print(3-round(.5))
</code></pre>

<p>Banker's rounding in Python 3, standard rounding in Python 2.</p>

<p><a href="https://tio.run/##K6gsycjPM/7/v6AoM69Ew1i3KL80L0VDz1RT8/9/AA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online - Python 3!</a></p>

<p><a href="https://tio.run/##K6gsycjPM/r/v6AoM69Ew1i3KL80L0VDz1RT8/9/AA" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online - Python 2!</a></p>
</div>
<div id="pu41" class="pu"><h1>C89/C99, 25 bytes, 2 versions, score = 12.5</h1>

<pre class="lang-c prettyprint-override"><code>#include &lt;stdio.h&gt;

int main() {
    int v = 11 //**/ 11
            + 88;
    printf("C%d\n", v);
    return 0;
}
</code></pre>

<p><code>//</code> style comments aren't recognized in C89.</p>

<p>Golfed version:</p>

<pre class="lang-c prettyprint-override"><code>v(){return 20//**/2
+79;}
</code></pre>

<p>Try it online: <a href="https://tio.run/##S9ZNT07@/79MQ7O6KLWktChPwchAX19LS9@IS9vc0rr2v3JmXnJOaUqqgk1xSUpmvl6GHRdXZl6JQm5iZp6GpkI1lwIQFBQBhdI0lJxVU2LylHQUgMZpWoNloIYaWHPVcv3/l5yWk5he/F8XaJRtsoUlAA" rel="noreferrer">C89</a>, <a href="https://tio.run/##S9ZNT07@/79MQ7O6KLWktChPwchAX19LS9@IS9vc0rr2v3JmXnJOaUqqgk1xSUpmvl6GHRdXZl6JQm5iZp6GpkI1lwIQFBQBhdI0lJxVU2LylHQUgMZpWoNloIYaWHPVcv3/l5yWk5he/F8XaJRtsqUlAA" rel="noreferrer">C99</a></p>
</div>
<div id="pu42" class="pu"><h2>Mathematica 10/11 20 Bytes, Score=10</h2>

<p>Since Echo was introduced in version 11</p>

<pre><code>10+Echo@1/.Echo@1-&gt;0
</code></pre>

<p>Can extend to version 9 as well (since AbsArg was intro'd in V10) with</p>

<pre><code>10-Last@AbsArg@1+Echo@1/.Echo@1:&gt;0
</code></pre>

<p>but the score goes up to 34/3 or 11.33</p>
</div>
<div id="pu43" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="noreferrer">Brachylog</a> / <a href="https://github.com/JCumin/Brachylog/releases" rel="noreferrer">Brachylog v1</a>, 5 / 2 = 2.5</h1>

<pre><code>2,1hw
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/r/30jHMKP8/38A" rel="noreferrer" title="Brachylog – Try It Online">Try it online!</a> (Brachylog)</p>

<p><a href="https://tio.run/##SypKTM6ozMlP///fSMcwo/z/fwA" rel="noreferrer" title="Brachylog v1 – Try It Online">Try it online!</a> (Brachylog v1)</p>

<p>Explanation for Brachylog:</p>

<pre><code>?2,1hw.
?2      Unify ? (input) with 2 (no input so it succeeds)
  ,1    Append 1 (21)
    h   First element/head (2)
     w. Write to STDOUT and unify with output (not displayed)
</code></pre>

<p>Explanation for Brachylog v1:</p>

<pre><code>?2,1hw.
?2      Unify ? (input) with 2 (no input so it succeeds)
  ,     Break implicit unification/logical AND
   1h   Take first element/head of 1 (1)
     w. Write to STDOUT and unify with output (not displayed)
</code></pre>
</div>
<div id="pu44" class="pu"><h1>Lua 5.0, 5.1, 5.2, 5.3, score: 17.75</h1>

<pre><code>print("5."..(table.getn or load'return #...'){math.fmod,_ENV,math.ult})
</code></pre>

<p><code>math.fmod</code> was <code>math.mod</code> before 5.1<br>
<code>_ENV</code> was introduced in 5.2 for new environment system<br>
<code>math.ult</code> was introduced in 5.3</p>

<p>There was a problem: lua 5.0 don't know <code>#</code> for tables, but lua >= 5.2 don't have function <code>table.getn</code>, so I keep <code>#</code> isolated in string for lua 5.0, and loads in instead of <code>table.getn</code> for lua >= 5.2.</p>
</div>
<div id="pu45" class="pu"><h1><a href="https://github.com/gunnerwolf/braingolf" rel="nofollow noreferrer">Braingolf</a>, 4 bytes, 2 versions, score = 2</h1>

<pre><code>0n6+
</code></pre>

<p><a href="https://tio.run/##SypKzMxLz89J@//fIM9M@/9/AA" rel="nofollow noreferrer" title="Braingolf – Try It Online">Try it online!</a></p>

<p><code>n</code> (negate) was added in braingolf v0.7, meaning this will output <code>7</code> in v0.7 and newer, and <code>6</code> in v0.6 and older</p>

<p>In v0.7, <code>n</code> "negates" the 0 to a 1, then adds it to 6 to make 7, but in v0.6, the <code>n</code> does nothing, and so 0 is added to 6, resulting in 6. Both versions have implicit output.</p>

<p>This is technically the minor version, however there is only 1 major version of Braingolf, as Braingolf v1.0 isn't a thing yet, so this is about as major as the version numbers get.</p>
</div>
<div id="pu46" class="pu"><h2>C++11 and C++14, 96 bytes, score 48</h2>

<pre class="lang-cpp prettyprint-override"><code>#include&lt;iostream&gt;
#define M(x,...)__VA_ARGS__
int main(){std::cout&lt;&lt;(int[]){M(1'2,1'4,11)}[0];}
</code></pre>

<p>The code is based on the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3781.pdf" rel="nofollow noreferrer">digit separator proposal</a> which has very similar example code at the end.</p>

<p><a href="http://coliru.stacked-crooked.com/a/aeb195d8c677b683" rel="nofollow noreferrer">online version</a></p>
</div>
<div id="pu47" class="pu"><h1>Ruby 1.x and 2.x, 20 bytes, score 10</h1>

<pre><code>p [].to_h&amp;&amp;2rescue 1
</code></pre>

<p>Based on the <code>to_h</code> method which was introduced on the <code>Array</code> class in Ruby 2.</p>
</div>
<div id="pu48" class="pu"><h1>Julia: 21 bytes, score: 10.5</h1>

<pre><code>(length([1:2])+V)/10   # where V takes value critical version minus 1
</code></pre>

<p>I cannot <em>quite</em> remember <em>which</em> version of julia this changed in (stuff gets deprecated <em>very</em> often), but there was some point in the language where this:</p>

<pre><code>julia&gt; [1:2]
2-element Array{Int64,1}:
 1
 2
</code></pre>

<p>became this:</p>

<pre><code>julia&gt; [1:2]
1-element Array{UnitRange{Int64},1}:
 1:2
</code></pre>

<p>from one version* to the next. I think it was probably from v0.3 to v0.4? (in which case <code>V = 2</code>)</p>

<hr>

<p><sub>* julia is still in major version 0</sub></p>
</div>
<div id="pu49" class="pu"><h2>PHP 4, 5, &amp; 7: 59 bytes, score 19.67</h2>
<pre><code>&lt;?list($a[],$a[])=array(5-strrpos('112','11'),7);echo$a[1];
</code></pre>
<p>It's way long but it does 3 versions!</p>
<p><code>list()</code> assigns in backwards order in PHP 4 &amp; 5, <code>strrpos()</code> only searches for a single character in PHP 4.</p>
</div>
<div id="pu50" class="pu"><h1>VBA, 51 Bytes / 2 Codes = 25.5</h1>
<p>Anonymous VBE immediate window function that outputs the VBA program version - works only in Excel 2011 and later. Outputs Version 7 for windows and Version 6 for Mac, as mac has yet to get version 7 of VBA</p>
<p>Uses conditional compilation constant <code>Mac</code> to determine the VBA  language version</p>
<pre class="lang-vb prettyprint-override"><code>Sub a()
o=7
#If Mac Then
o=6
#End If
Debug.?o
End Sub
</code></pre>
</div>
<div id="pu51" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, score 17.5</h1>

<p>(35 bytes, 2 versions)</p>



<pre class="lang-python prettyprint-override"><code>try:exec("print 2")
except:print(3)
</code></pre>

<h2><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 35 bytes</h2>

<p><a href="https://tio.run/##K6gsycjPM/r/v6So0iq1IjVZQ6mgKDOvRMFISZMrtSI5taDECiygYaz5/z8A" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<h2><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 35 bytes</h2>

<p><a href="https://tio.run/##K6gsycjPM/7/v6So0iq1IjVZQ6mgKDOvRMFISZMrtSI5taDECiygYaz5/z8A" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p><em>Saved 5 bytes thanks to ETHproductions</em></p>

<p>Not a good code golf answer, but a massive change!</p>
</div>
<div id="pu52" class="pu"><h1>Wolfram Language/Mathematica 10/11, 37 bytes / 2 versions = 18.5</h1>

<p>Consider <code>(Length@DateRange[{1},{1}][[1]]+27)/3</code>, at 37 bytes and working with 2 versions, gives me a score of 18.5. </p>

<pre><code>In[1]:= $Version

Out[1]= "10.4.1 for Microsoft Windows (64-bit) (April 11, 2016)"

In[2]:= (Length@DateRange[{1}, {1}][[1]] + 27)/3

Out[2]= 10
</code></pre>

<p>and</p>

<pre><code>In[1]:= $Version

Out[1]= "11.1.1 for Microsoft Windows (64-bit) (April 18, 2017)"

In[2]:= (Length@DateRange[{1}, {1}][[1]] + 27)/3

Out[2]= 11
</code></pre>

<p>I'm sure there is a more efficient way, but the discrepancy between the DateRange output bit me in the butt recently, so I was set on using that.</p>

<p>As a follow up, someone could probably take advantage of <code>Length@DateRange[{1}, {1}][[1]]</code> evaluating to <code>1</code> in Mathematica versions 1-~8, but I didn't have time to incorporate that.</p>
</div>
<div id="pu53" class="pu"><h1>Befunge : <s>15</s> 11 bytes / 2 versions = 5.5</h1>

<p>4 bytes shaved off by @Pietu1998  </p>

<pre><code>"89",;5-;,@  
</code></pre>

<p>Try it online :<br>
<a href="https://tio.run/##S0pNK81LT/3/X8nCUknH2lTXWsfh/38A" rel="noreferrer" title="Befunge – Try It Online">Befunge 93</a><br>
<a href="https://tio.run/##S0pNK81LT9W1tNAtqAQz//9XsrBU0rE21bXWcfj/HwA" rel="noreferrer" title="Befunge-98 (PyFunge) – Try It Online">Befunge 98</a><br>
Uses the Befunge 98-exclusive semicolon operator ("skip to next semicolon") to differentiate versions. Both will print "9". Befunge 93 will ignore the semicolons, subtract 5 from "8" (value left on top of the stack), print the resulting "3" and terminate. Befunge 98 on the other hand, will skip over, print "8" and terminate.</p>
</div>
<div id="pu54" class="pu"><h2>JavaScript (ES5 &amp; ES6), 14 bytes / 2 versions = 7</h2>

<pre><code>alert(5^"0o3")
</code></pre>

<p><code>0o</code>-style octal constants are new in ES6; ES5 casts the string to <code>NaN</code> which doesn't affect the result of the bitwise XOR.</p>
</div>
<div id="pu55" class="pu"><h1>PHP 5/7, score 5.5</h1>
<pre class="lang-php prettyprint-override"><code>&lt;?=7-&quot;0x2&quot;;
</code></pre>
<p><a href="https://3v4l.org/Y378M" rel="noreferrer">3V4L it online!</a></p>
<h1>PHP 5.3.9/5.3.11, score 10</h1>
<pre class="lang-php prettyprint-override"><code>&lt;?='5.3.'.(9-0x0+2);
</code></pre>
<p><a href="https://3v4l.org/4GaUL" rel="noreferrer">3V4L it online!</a></p>
<p>The online version is longer because old PHP versions on the sandbox don't have short tags enabled.</p>
</div>
<div id="pu56" class="pu"><h1><a href="https://github.com/Mego/Seriously/tree/v1" rel="noreferrer">Seriously</a> and <a href="https://github.com/Mego/Seriously" rel="noreferrer">Actually</a>, 3 bytes, score 1.5</h1>

<pre><code>'1u
</code></pre>

<p>Try it online: <a href="https://tio.run/##S0wuKU3Myan8/1/dsPT/fwA" rel="noreferrer" title="Actually – Try It Online">Actually</a>, <a href="https://tio.run/##K04tyswvLc6p/P9f3bD0/38A" rel="noreferrer">Seriously</a></p>

<p>Explanation:</p>

<pre><code>'1u
'1   both versions: push "1"
  u  Actually: increment character to "2"; Seriously: NOP
     (both versions: implicit print)
</code></pre>

<p><code>u</code> and <code>D</code> having functionality on strings was only added in Actually (which is Seriously v2).</p>
</div>
<div id="pu57" class="pu"><h1>Pyth 4/5 - 6 bytes/2 versions = 3</h1>
<pre><code>  5 ;4
</code></pre>
<p>In Pyth 5, an even amount of spaces at the start of the line is ignored for use in indenting, while in Pyth 4, it just acts like a single space and prevents printing the <code>5</code>. In Pyth 4, semicolons just finish statements, which allows the <code>4</code> to be printed, while in Pyth 5, a space and semicolon makes the rest of the line a comment.</p>
</div>
<div id="pu58" class="pu"><h1>Python 3.0 and Python 2, score 6</h1>

<p>(12 bytes, 2 versions)</p>



<pre class="lang-python prettyprint-override"><code>print(3/2*2)
</code></pre>

<p>Try it Online:</p>

<ul>
<li><p><a href="https://tio.run/##K6gsycjPM/r/v6AoM69Ew1jfSMtI8/9/AA" rel="noreferrer" title="Python 2 – Try It Online">Python 2</a></p></li>
<li><p><a href="https://tio.run/##K6gsycjPM/7/v6AoM69Ew1jfSMtI8/9/AA" rel="noreferrer" title="Python 3 – Try It Online">Python 3</a></p></li>
</ul>

<p>Relies on the fact that Python 3+ uses float division by default, unlike Python 2, which uses floor division.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/139243/">139243</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




