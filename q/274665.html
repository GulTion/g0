<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::274665</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>106</td><td>Charcoal</td><td>240804T210812Z</td><td><a href="https://codegolf.stackexchange.com/questions/274665/lexicographically-earliest-permutation-of-the-initial-segment-of-nonnegative-int/274679#274679">Neil</a></td></tr>
<tr d-ix="1"><td>224</td><td>Picat</td><td>240805T050107Z</td><td><a href="https://codegolf.stackexchange.com/questions/274665/lexicographically-earliest-permutation-of-the-initial-segment-of-nonnegative-int/274686#274686">Bubbler</a></td></tr>
<tr d-ix="2"><td>024</td><td>Jelly</td><td>240804T210958Z</td><td><a href="https://codegolf.stackexchange.com/questions/274665/lexicographically-earliest-permutation-of-the-initial-segment-of-nonnegative-int/274680#274680">Jonathan</a></td></tr>
<tr d-ix="3"><td>181</td><td>Python + SymPy</td><td>240804T134410Z</td><td><a href="https://codegolf.stackexchange.com/questions/274665/lexicographically-earliest-permutation-of-the-initial-segment-of-nonnegative-int/274669#274669">shape wa</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 106 bytes</h1>
<pre><code>ＮθＦ…·²θＦ⬤υ﹪ικ⊞υι≔Ｅ⊕θΦυ∧ι¬﹪ιλη≔Ｅη⟦κι⟦⟧⟧ζＦζ«≔⊟ιδ≔⊟ιεＦ⊕θ¿¬∨№ικ⊙ε﹪κλ¿⬤δ﹪κλ⊞ζ⁺⁺⟦κ⟧ι⎇§ι⁰⟦⁻§ηκεε⟧⟦⟦⟧§ηκ⟧»Ｉ⌊Φζ›Ｌιθ
</code></pre>
<p><a href="https://tio.run/##XVDLasMwEDzXX7HHFahQeis5mUBLoElN6c34oMabWFiWElkKTUq/3V05cR8xWDYzq5nZWTfKr50yw7CwuxhWsXsnj3sxyzbOAy7s2sReH@hV2S3hvYS9EDBSuTEYJSxdHY1DLaEVTBWxbxKsWSHve721uFS7pOOpIxuoZnEJj9oE9uHB3Nbp8soF/JUyIj0Smv8qjYSyZW3@VBXTpynmScBndnOZLNwONbM1s9cYJWza7E8iAXoDmEK8eJy7aMN5o5TviPSzZjtlG@dTBfU1d67gJKHg5nA8yrZKjUh4I2@VP2IeFramj@Rxx3C51JbHJrQ5O1N6@WJZ8vGPq9hmln1lhdccdK567k5b3cUOL8Wy/ZMnlX6fyW5DM26/H6PPhuFhuD2Ybw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Trying an &quot;efficient&quot; (it used to be able to reach <code>n=10</code> before I finished golfing; <a href="https://tio.run/##XVBBasMwEDzXr9BRAhXSXnNyAy2BJjWht@CDGm9sYVmyZSk0KX27u2snbROBkL0zGs3MrlJ@55QZhqVtY1jH5gM878Q82TvP@NLuTOz1ATbKlsAfJeuEYCOUGsOjZCtXROO4lqwWCGWxr2isUSHte11avlIt6XhowAYoUFyyZ20CvoPE1BZ0ee0C/5MygpZk1bVKJdm2Rm088hzh08XmSbCv5O7MzFzLNaIForczoNkl2T9Hguk942TizfOFizZMicjfkcNvzPribeRTBcUtNlVwkizD5kjlHbxV/sifVA/0PxNTjJW2SEjD0hbwSdnq0SDufCJs8byCc5SfJ99J5jUaXKgeO9NWN7EZ6zmXik@/eFD0@Qq2DNWYvKM@N3AATy7GDPNheJgN9wfzAw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a>) algorithm first that can reach <code>n=9</code> on TIO.</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>Ｆ…·²θＦ⬤υ﹪ικ⊞υι
</code></pre>
<p>Find all the primes up to <code>n</code>.</p>
<pre><code>≔Ｅ⊕θΦυ∧ι¬﹪ιλη
</code></pre>
<p>For all the numbers up to <code>n</code>, get a list of primes that are factors of it, except for <code>0</code>, where we use an empty list.</p>
<pre><code>≔Ｅη⟦κι⟦⟧⟧ζ
</code></pre>
<p>Starting from the last element in the list working backwards, create trial suffixes of the list containing all potential last elements, their prime factors (which the next number needs to be divisible by) and an empty list of factors that the next number must not be divisible by.</p>
<pre><code>Ｆζ«≔⊟ιδ≔⊟ιε
</code></pre>
<p>Loop over the trial suffixes and extract the lists of excluded and required prime factors.</p>
<pre><code>Ｆ⊕θ
</code></pre>
<p>Loop over the numbers up to <code>n</code>.</p>
<pre><code>¿¬∨№ικ⊙ε﹪κλ
</code></pre>
<p>Ensure that it's not already in the list and is divisible by all of the required prime factors.</p>
<pre><code>¿⬤δ﹪κλ
</code></pre>
<p>Ensure that it's not divisible by any of the excluded prime factors.</p>
<pre><code>⊞ζ⁺⁺⟦κ⟧ι⎇§ι⁰⟦⁻§ηκεε⟧⟦⟦⟧§ηκ⟧
</code></pre>
<p>Prefix the number to the trial suffix and append the new required and excluded prime factors, which depend on whether the previous trial suffix began with <code>0</code>; if it did then there are no required prime factors and the excluded prime factors are all of the number's prime factors, while if it didn't then the required prime factors are the number's prime factors that remain after the previously required prime factors are removed and the excluded prime factors are the previously required prime factors.</p>
<pre><code>»Ｉ⌊Φζ›Ｌιθ
</code></pre>
<p>Output the lexicographically earliest complete list.</p>
<p>76 bytes for a brute force version that can only handle up to <code>n=7</code> on ATO:</p>
<pre><code>≔…·⁰Ｎθ≔⟦υ⟧ηＦθ≔ΣＥηＥ⁻θκ⁺κ⟦μ⟧ηＦ✂θ²Ｆ⬤υ﹪ικ⊞υιＩ⌊Φη⬤ι∨¬∧λμ⬤υ∨﹪λν⁻¬﹪§ι⊖μν¬﹪§⁺ι⟦¹⟧⊕μν
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVG9TsMwEBYrT2F1OkuuBCwgdYpASBlaIjpGGdLEbazaTuOfiHdhKRIInomn4S61uhQPtu677-dsv_80Xe2avtbH41cM2_nD79WYea92FnLb6OjVKF9ru5NwI1huDzGsotlIB5wLNvDFdSKXsRKsw3rbOwYDZwlfRwPL-gCdYHQslY0eBsH2KC_QHvaClabinPzO-rVWjSTaHedsQjKtIaJH30bdgyIDbBXRdwQrFBZO2QCPtQ-UogwGPysdcFTMJjmKXhys-gCZbUELZigzGWMneWPDIn6alNgJz0JuW_lGNk-ycdJIG2QLk4ml7R_udEMUlLcVp-e7lJ3X4tNvGp8-4buczUc9qz7uT_Uf" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔…·⁰Ｎθ
</code></pre>
<p>Make a list from <code>0</code> to <code>n</code>.</p>
<pre><code>≔⟦υ⟧ηＦθ≔ΣＥηＥ⁻θκ⁺κ⟦μ⟧η
</code></pre>
<p>Make a list of all of its permutations.</p>
<pre><code>Ｆ✂θ²Ｆ⬤υ﹪ικ⊞υι
</code></pre>
<p>Make a list of all the primes up to <code>n</code>.</p>
<pre><code>Ｉ⌊Φη⬤ι∨¬∧λμ⬤υ∨﹪λν⁻¬﹪§ι⊖μν¬﹪§⁺ι⟦¹⟧⊕μν
</code></pre>
<p>Find the lexicographically earliest permutation that satisfies the conditions.</p>
</div>
<div id="pu1" class="pu"><h1><a href="http://picat-lang.org" rel="nofollow noreferrer">Picat</a>, 224 bytes</h1>
<pre><code>import cp.
f(N)=A,N&lt;17=&gt;A=new_list(N+1),A::0..N,A.all_distinct,table_in(zip(A,A[2..N+1],A[3..N+1]++[1]),[{X,Y,Z}:X in 0..N,Y in 0..N,Z in 0..N,foreach(P in[2,3,5,7,11,13])Y&lt;1;Y mod P&gt;0;X*Z mod P&lt;1,(X+Z)mod P&gt;0 end]),A.solve.
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=PZDNaoNAFIXX8SmGQGCst0MmtqQYFeYBOmTpT0WsjnRAR9FphZY-STfZ5KG666Nk0pjsPu499xzu-Tn2siz04XB81_X90--fbPtu0KjsiVVjbgcMuE-3QcgCJaa8kaPG3KE2MM9bE8KBkaJp8srMpSo16OK1EblU-FP2mAFLN0bk0MyQeyHHSWlmQ_oVQQzJtxchqdC_VXyj5EZ1N4iifMN7M0k34MIjbIFSoG5mxz7dxajtKrQP17voLrmwTwFHTmLPCyRUZfIYGbvmQ5D5z-e2MBFBaC2uCfycSQmhD7a1WDA1ogCdGwA0DVKLGi9XlTlAq-lFLQFxQEZjpMZ-Nr2WeAI" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Given N, returns the lexicographically smallest permutation that satisfies the condition if such an answer exists, and fails otherwise. It fails immediately when N &gt;= 17 based on <a href="https://codegolf.stackexchange.com/questions/274665/lexicographically-earliest-permutation-of-the-initial-segment-of-nonnegative-int#comment591164_274665">my own comment</a>, so that I could hardcode the small primes instead of dynamically computing them.</p>
<p>Solves N = 1 through 14 in a minute. For N = 16, I had to switch to <code>sat</code> solver and repeatedly constrain the answer to lexicographically earlier than already found to get the answer. The <code>cp</code> solver assigns values to variables in the given order (i.e. from left to right) and values from smallest to largest, so it finds the lexicographically smallest answer by default.</p>
<p>The full list of solutions are presented below:</p>
<pre><code>1 =&gt; [0,1]
2 =&gt; [0,2,1]
3 =&gt; [1,2,0,3]
4 =&gt; [0,3,1,2,4]
5 =&gt; [1,2,4,3,0,5]
6 =&gt; [1,2,0,5,3,6,4]
7 =&gt; [2,1,3,6,4,5,0,7]
8 =&gt; [1,2,4,3,6,8,5,0,7]
9 =&gt; [3,1,2,4,5,0,7,8,6,9]
10 =&gt; [1,2,4,3,9,5,10,8,7,0,6]
11 =&gt; [6,1,2,4,3,9,5,10,8,7,0,11]
12 =&gt; [1,2,4,3,6,8,5,10,12,9,7,0,11]
13 =&gt; [7,1,2,4,3,6,8,5,10,12,9,11,0,13]
14 =&gt; [2,1,3,6,4,5,10,8,7,14,12,9,11,0,13]
16 =&gt; [11,1,2,4,3,6,8,5,10,12,9,7,14,16,13,0,15]
</code></pre>
<p>A brief explanation of code:</p>
<ul>
<li><code>A=new_list(N+1),A::0..N,A.all_distinct</code> specifies that <code>A</code> is a permutation containing 0 through N inclusive.</li>
<li><code>table_in</code> specifies that each tuple of variables must appear in the list of allowed tuples.
<ul>
<li><code>zip(A,A[2..N+1],A[3..N+1]++[1])</code> creates the list of 3-tuples that contain 3 consecutive elements of A, plus the last two with constant 1 attached.</li>
<li><code>[{X,Y,Z}:X in 0..N,Y in 0..N,Z in 0..N,...]</code> creates the list of allowed 3-tuples that satisfy the condition &quot;for each prime P, if P is a prime factor of Y, P divides exactly one of X or Z&quot;.</li>
<li><code>foreach(P in[2,3,5,7,11,13]) ... end</code> specifies that the loop body must be satisfied for all P's in the list.</li>
<li><code>Y&lt;1;Y mod P&gt;0;X*Z mod P&lt;1,(X+Z)mod P&gt;0</code> is satisfied if &quot;Y is 0&quot; or &quot;P does not divide Y&quot; or &quot;exactly one of X and Z is divisible by P&quot;. <code>;</code> is logical OR and <code>,</code> is logical AND, and <code>,</code> has higher precedence.</li>
</ul>
</li>
<li>Finally <code>A.solve</code> invokes the CP solver to instantiate A with the first solution found, if any.</li>
</ul>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 24 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>.ṭ2ịÆfȧḍ¥€Ʋ3ƤḄ3ḍȦ
ŻŒ!ÇƇḢ
</code></pre>
<p>A monadic link that accepts a non-negative integer and yields the permutation as a list if possible or the integer zero if not.</p>
<p><strong><a href="https://tio.run/##AUIAvf9qZWxsef//LuG5rTLhu4vDhmbIp@G4jcKl4oKsxrIzxqThuIQz4biNyKYKxbvFkiHDh8aH4bii/8OHxZLhuZj//zY" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> (Times out for 8 or more.)</p>
<h4>How?</h4>
<p>Convert condition 1 into another instance of condition 2 by appending a <span class="math-container">\$\frac{1}{2}\$</span> to the right of each permutation being tested.</p>
<pre><code>ŻŒ!ÇƇḢ - Main Link: non-negative integer, N
Ż      - zero range -&gt; [0..N]
 Œ!    - all permutations (sorted lexicographically)
    Ƈ  - filter keep those for which:
   Ç   -   call Link 1 - f(Permutation)
     Ḣ - head -&gt; the first remaining Permutation or 0 if none exist

.ṭ2ịÆfȧḍ¥€Ʋ3ƤḄ3ḍȦ - Link 1: Permutation
.ṭ                - tack a 0.5 to the right
           3Ƥ     - for all slices of three values:
          Ʋ       -   last four links as a monad:
  2               -     two
   ị              -     index into -&gt; middle value
    Æf            -     prime factors (1 gives []; 0 gives [0])
         €        -     for each:
        ¥         -       last two links as a dyad - f(Factor, Slice)
       ḍ          -         divides? (vectorises)
      ȧ           -         {Factor} logical AND {that} (replace result at 0 with [0])
             Ḅ    - convert from binary
              3ḍ  - test if 3 divides each (i.e. each was either [0], [1,1,0] or [0,1,1])
                Ạ - any and all?
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> + <a href="https://www.sympy.org/en/index.html" rel="nofollow noreferrer">SymPy</a>, 181 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda n:next(l for l in i.permutations(range(n+1))if all(all((a%f&gt;0)^(c%f&gt;0)for f in sympy.factorint(b)if f)for(a,b),(_,c)in p(p(l+(1,)))))
import itertools as i,sympy
p=i.pairwise
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY5BagMxDEX3OYUoFCTihsyuBJKTlBbN1G4FHtnYCsmcpZuB0t6gh-ltGs9UIP5C_-u_j-882XvS-TMcn77OFh4ef38ij_0rgx7UXw0jhFQggijILvsyno1NklYsrG8eddsRSQCOEdsi34fTnp5xWLSFQwvXaczTLvBgqYga9i0U2h3Z9eTwxQ1082XMGLfYOWqzkTGnYiDmi6UUK3AFccuzTT7eiFjKRar_h79rfdr6VrrOQbenA-SlM6ASrc55XvUP" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Relatively direct translation of the criteria laid out in the challenge description. Manages to have a triply-nested loop and a double application of <code>itertools.pairwise</code>.</p>
<p>Ungolfed:</p>
<pre><code>import itertools
import sympy

def f(n):
    # itertools.permutations generates permutations in lexicographic order
    return next(lst for lst in itertools.permutations(range(n + 1))
                    if meets_conditions(lst))

def meets_conditions(lst):
    # condition 1 is really just condition 2 except there is no successor
    #     for the prime factors to divide
    # a number that is never divided by any prime factor works just as well
    return all(term_meets_conditions(prev, curr, next_)
               for prev, curr, next_ in triplewise(lst + (1,)))

def term_meets_conditions(prev, curr, next_):
    # a XOR b &lt;=&gt; (not a) XOR (not b),
    #     where a and b in this case denote divisibility by the prime factor
    # sympy.factorint(0) returns {0: 1}, so we need to filter out keys of 0
    return all((prev % prime_factor &gt; 0) ^ (next_ % prime_factor &gt; 0)
               for prime_factor in sympy.factorint(curr) if prime_factor != 0)

def triplewise(iterable):
    p = itertools.pairwise
    return ((prev, curr, next_)
            for (prev, curr), (_, next_) in p(p(iterable)))
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/274665/">274665</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




