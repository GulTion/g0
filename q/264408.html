<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::264408</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>066</td><td>Python</td><td>230820T154347Z</td><td><a href="https://codegolf.stackexchange.com/questions/264408/give-the-fools-fibonacci-sequence/264410#264410">bsoelch</a></td></tr>
<tr d-ix="1"><td>023</td><td>K ngn/k</td><td>230820T235652Z</td><td><a href="https://codegolf.stackexchange.com/questions/264408/give-the-fools-fibonacci-sequence/264428#264428">Bubbler</a></td></tr>
<tr d-ix="2"><td>021</td><td>Pyth</td><td>230821T024816Z</td><td><a href="https://codegolf.stackexchange.com/questions/264408/give-the-fools-fibonacci-sequence/264431#264431">CursorCo</a></td></tr>
<tr d-ix="3"><td>039</td><td>sclin</td><td>230821T003723Z</td><td><a href="https://codegolf.stackexchange.com/questions/264408/give-the-fools-fibonacci-sequence/264430#264430">Mama Fun</a></td></tr>
<tr d-ix="4"><td>051</td><td>Python</td><td>230820T235609Z</td><td><a href="https://codegolf.stackexchange.com/questions/264408/give-the-fools-fibonacci-sequence/264427#264427">loopy wa</a></td></tr>
<tr d-ix="5"><td>044</td><td>Charcoal</td><td>230820T164741Z</td><td><a href="https://codegolf.stackexchange.com/questions/264408/give-the-fools-fibonacci-sequence/264413#264413">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>96</s> <s>72</s> 66 bytes</h1>
<p><em>-6 bytes, thanks to @xnor</em></p>
<pre class="lang-python prettyprint-override"><code>f=lambda n:n&gt;0and 2+3*f(n-3)+4*f(n-6)+2*sum(map(f,range(0,n-8,3)))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY5BCsIwEADvvmIJCEmbQGyslEB78CeRZjXQbEuaHnyLl170T_5GUHubwzDM4zXd822kdX0uGVXzPmM7uHjpHZClTjvqoSpNgZyUEeXxCydRVsW8RB7dxFEmR1fPtSTVSCOE-JcsjgkCBIKfcJCmFnYHMKVAmbOOQUAIe9O2Gvwwe2DAJPKwFbanDw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 23 bytes</h1>
<pre><code>{-2/z,x,y}/[;0;2;8] -3!
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs6rWNdKv0qnQqazVj7Y2sDaytohV0DVW5OJKU1dQNDPgAgCjLQgP" rel="nofollow noreferrer">Try it online!</a></p>
<p>Given <code>n</code>, returns the <code>n</code>th term (0-indexed) of the given sequence triplicated, i.e. <code>0, 0, 0, 2, 2, 2, 8, 8, 8, 34, 34, 34, ...</code>. To start with 2 instead, change <code>0;2;8</code> to <code>2;8;34</code> or replace the space with <code>1+</code> for +1 byte.</p>
<p>The OP's sequence can be simplified as follows:</p>
<p><span class="math-container">$$
\begin{aligned}
a_n &amp;= a_{n-1} + 2a_{n-2} + 2\sum_{k=0}^{n-1}a_k + 2 \\
a_{n-1} &amp;= a_{n-2} + 2a_{n-3} + 2\sum_{k=0}^{n-2}a_k + 2 \\
a_n - a_{n-1} &amp;= a_{n-1} + 2a_{n-2} - a_{n-2} - 2a_{n-3} + 2a_{n-1} \\
a_n &amp;= 4a_{n-1} + a_{n-2} - 2a_{n-3}
\end{aligned}
$$</span></p>
<p>Now we want to find a sequence whose every third term satisfies the above, i.e. the original sequence satisfies</p>
<p><span class="math-container">$$
a_n = 4a_{n-3} + a_{n-6} - 2a_{n-9}
$$</span></p>
<p>but it turns out that this recurrence is irreducible, at least in integers. So the code simply evaluates the &quot;every third term&quot; sequence at index <code>floor(n/3)</code>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 21 bytes</h1>
<pre><code>L&amp;b+2su+@G1G3*2_%3yMb
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/30ctSduouFTbwd3Q3VjLKF7VuNI36X92mLFhpd9/AA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Defines a function <code>y</code>, which when given <code>N</code> returns the Nth term in the sequence
<span class="math-container">$$
0, 2, 2, 2, 8, 8, 8, 34, 34, 34, 140, 140, 140, 578, 578, 578, 2384, 2384, 2384, \dots
$$</span></p>
<h3>Explanation</h3>
<pre><code>L                        # define y(b)
 &amp;b                      # short circuiting and, if b==0, return 0
                  yMb    # map range(b) over y
                %3       # take every third element
               _         # reverse the list
             *2          # and double it
      u     3            # reduce range(3) over lambda G,H with the list as the starting value 
       +@G1G             #   append the second element of G to the beginning of G
     s                   # sum
   +2                    # add 2
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/molarmanful/sclin" rel="nofollow noreferrer">sclin</a>, 39 bytes</h1>
<pre><code>[0 2 8]&quot;dup [2_1 4] * +/ +`1dp&quot;itr flat
</code></pre>
<p><a href="https://replit.com/@molarmanful/try-sclin" rel="nofollow noreferrer">Try it here!</a> Outputs an infinite list:</p>
<p><span class="math-container">$$
0,2,8,2,8,34,8,34,140,34,140,578,140,578,2384,...
$$</span></p>
<p>For testing purposes:</p>
<pre><code>; 100tk &gt;A
[0 2 8]&quot;dup [2_1 4] * +/ +`1dp&quot;itr flat
</code></pre>
<h2>Explanation</h2>
<p>Prettified code:</p>
<pre><code>[0 2 8] ( dup [2_ 1 4] * +/ +` 1dp ) itr flat
</code></pre>
<p>Based on a simplified variant of the original equation (first found by @loopy walt and @Bubbler):</p>
<p><span class="math-container">$$
f(n)=4f(n-1)+f(n-2)−2f(n-3)
$$</span></p>
<ul>
<li><code>[0 2 8] (...) itr</code> creates an infinite series of modifications starting from 0, 2, 8
<ul>
<li><code>dup [2_1 4] *</code> vectorized-multiply each term by -2, 1, 4</li>
<li><code>+/</code> sum</li>
<li><code>+` 1dp</code> append as new term, discard oldest term</li>
</ul>
</li>
<li><code>flat</code> flatten, which conveniently also creates a 2-term gap</li>
</ul>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 51 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda n:n&gt;3and 4*f(n-3)+f(n-6)-2*f(n-9)or(n&gt;0)*2
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vwYKlpSVpuhY3jdNscxJzk1ISFfKs8uyME_NSFEy00jTydI01tUGUmaauEZhvqZlfpJFnZ6CpZQTVapWWX6SQqZCZp1CUmJeeqmGoY2yqacWloFBQlJlXoqFkp6SQmaaQqWpsa2ugkJpTnKqgpKCkk6aRqakJMQHmCAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Test harness borrowed from @bsoelch.</p>
<h3>How?</h3>
<p>Taking the difference f(n)-f(n-3) gets rid of the sum.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 44 bytes</h1>
<pre><code>Ｆ²⊞υι≔Ｅ²ιηＦＮ⊞η⁻⌈⊞ＯυΣ…⮌υ²↨¹Ｅ✂⮌η⁵Ｌη³×κ§υ×³λＩ⌈η
</code></pre>
<p><a href="https://tio.run/##PY67DsIwDEV3vsKjI4WBIgbEBJ0q8RLwA6EYEpGmVR4Ivj44gLDkwedeX7vVyre9sjlfew9YCdinoDFJMGIxWoZgbg43asCqEAma6cfZuCHFberO5FH8trSEjXEp8MLTdKnDQncDeRV7XzKPzOpXa6nW/YAHepAPhIlzK8ElYaV4nnAMXzxa09LfpFmdSViTu0X9mabcJ9NRwLuEZWzchZ7lyJdNJVjxrcVo742LWKsQ/6/pIuRczfP4Yd8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Outputs <span class="math-container">\$ f(n) \$</span> where <span class="math-container">\$ f(2)=2 \$</span>. Explanation:</p>
<pre><code>Ｆ²⊞υι
</code></pre>
<p>Start with the first two terms of the Fibonacci sequence (<span class="math-container">\$ 0 \$</span>-indexed).</p>
<pre><code>≔Ｅ²ιη
</code></pre>
<p>Start with the first two terms of the Wheat Wizard sequence (<span class="math-container">\$ 0 \$</span>-indexed).</p>
<pre><code>ＦＮ
</code></pre>
<p>Calculate <span class="math-container">\$ n \$</span> new terms.</p>
<pre><code>⊞η⁻⌈⊞ＯυΣ…⮌υ²↨¹Ｅ✂⮌η⁵Ｌη³×κ§υ×³λ
</code></pre>
<p>Calculate <span class="math-container">\$ F(n) \$</span> and <span class="math-container">\$ f(n)=F(n)-\sum_{i=0}^{\lfloor(n-5)/3\rfloor}F(3i)f(n-5-3i) \$</span>.</p>
<pre><code>Ｉ⌈η
</code></pre>
<p>Output the <span class="math-container">\$ n \$</span>th additional term. This results in the following sequence:</p>
<p><span class="math-container">$$ 1, 2, 3, 5, 8, 13, 21, 34, 53, 87, 140, 219, 359, 578, 903, 1481, 2384, 3725, 6109, 9834, 15365, 25199, 40564, 63379, 103943, 167322, 261431, 428753, 690184, $$</span></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/264408/">264408</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




