<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::207404</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>068</td><td>C gcc</td><td>200723T113411Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207433#207433">Noodle9</a></td></tr>
<tr d-ix="1"><td>027</td><td>APL Dyalog Extended</td><td>200723T012729Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207419#207419">Bubbler</a></td></tr>
<tr d-ix="2"><td>058</td><td>R</td><td>200723T090109Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207423#207423">Dominic </a></td></tr>
<tr d-ix="3"><td>078</td><td>Perl 5</td><td>200723T140001Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207436#207436">Xcali</a></td></tr>
<tr d-ix="4"><td>035</td><td>Charcoal</td><td>200722T232459Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207416#207416">Neil</a></td></tr>
<tr d-ix="5"><td>033</td><td>MATL</td><td>200722T235310Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207417#207417">Luis Men</a></td></tr>
<tr d-ix="6"><td>031</td><td>05AB1E</td><td>200723T093601Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207424#207424">Kevin Cr</a></td></tr>
<tr d-ix="7"><td>045</td><td>JavaScript ES6</td><td>200723T074852Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207422#207422">Arnauld</a></td></tr>
<tr d-ix="8"><td>069</td><td>Wolfram Language Mathematica</td><td>200722T205927Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207405#207405">ZaMoC</a></td></tr>
<tr d-ix="9"><td>038</td><td>APL Dyalog Unicode</td><td>200722T223134Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207414#207414">fireflam</a></td></tr>
<tr d-ix="10"><td>054</td><td>Python 3</td><td>200722T223002Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207413#207413">xnor</a></td></tr>
<tr d-ix="11"><td>030</td><td>Jelly</td><td>200722T213411Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207409#207409">Jonathan</a></td></tr>
<tr d-ix="12"><td>070</td><td>Python 3.8</td><td>200722T211503Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207406#207406">Uriel</a></td></tr>
<tr d-ix="13"><td>062</td><td>Python 3.8 prerelease</td><td>200722T212055Z</td><td><a href="https://codegolf.stackexchange.com/questions/207404/the-cantor-function/207407#207407">ovs</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>73</s> <span class="math-container">\$\cdots\$</span> <s>69</s></sup> 68 bytes</h1>

<pre class="lang-c prettyprint-override"><code>float f(n,x)float x;{x*=3;x=n--?(x&lt;1?f(n,x):x&lt;2?:1+f(n,x-2))/2:x/3;}
</code></pre>
<p><a href="https://tio.run/##bZHtaoMwFIb/9yoOgpC0SWu0bmuj64@xq1jLEI2b0MWiMsKK1@7yYW33IRhOcp73PSc5OX3L82Eoj3XWQYkkUdjFip/VPI24SiWlO6QStnPprUrC3ZYt7I6GGK/CrVpFvB8q2cFHVkn0WVcFnp1noL/8PWvm0LwcIIWzt1fP4V5tnvQfewRu95HXc6tw9TvRdq/KyYJlRCBYMrOEGxuyETY1LSodakACawLxDzehTkJ1orCQNXy4jyfPyMXhmsV34SSsG0DGvpKFUFoW8DFMoK2@RF2iiytejQcaxxwWC8thcC9w7cK4jPeyxIFPgCkkL2n5J@30rQbcEH5nhM5Md/xfXIhjl2msBQripnAJyKUSCPBIzVOg7MqcGt1eiTzToF8Qew@/BPpoVr/dSz1KqY8JtESPerTTL7YMgoAdxm77WT98Aw" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p><em>Saved 4 bytes thanks to the man himself <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a>!!!</em><br />
<em>Save a byte thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>!!!</em></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, <s>25</s> 27 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{⊥1⊥1⌊⊤1∘≠⍛×\0,3⊤⍵×3*⍺}÷2*⊣
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/v/pR11JDMO7petS1xPBRx4xHnQse9c4@PD3GQMcYKPSod@vh6cZaj3p31R7ebqT1qGvx/7RHbRMe9fY96mo@tN74UdvER31Tg4OcgWSIh2fwf2OFNAUDPWMuAzBtyGUCpo0suUwhAoZcEBXmRlApYyMuXV1dLg0jBaNHvVsMFAw1H3UuNFAwVQA6Rg@oQMGQi0vT382NyzPPCqRcwVhBwb@0BMy2MDeFChsCFcKEDaFiRpYKJnClCJWGQLOhokYmhqZmRqYA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>Inline tacit function, which can be used as <code>n f x</code>.</p>
<p>Uses the method described in <a href="https://codegolf.stackexchange.com/a/207417/78410">Luis Mendo's MATL answer</a>. I changed one part of the algorithm:</p>
<ul>
<li>This one doesn't consider integer and fractional parts separately; rather, the fractional part is included in the last digit. (e.g. the base-3 representation of 8.1 is <code>[2, 2.1]</code>.) Later, at the step where 2s are changed into 1s, all digits <code>≥2</code> are reduced by 1 instead, and <strong>(+2 bytes)</strong> the fractional part of the last digit is removed if its integer part is 1.</li>
</ul>
<pre class="lang-apl prettyprint-override"><code>{⊥1⊥1⌊⊤1∘≠⍛×\0,3⊤⍵×3*⍺}÷2*⊣  ⍝ Left: n, Right: x
{                ⍵×3*⍺}  ⍝ 3^n*x
               3⊤        ⍝ Convert to base 3; last digit may have fractional part
             0,  ⍝ Prepend 0 to avoid error on ⊤ over an empty array
       1∘≠⍛×\    ⍝ Keep each digit unless at least one 1 appears somewhere on its left
      ⊤  ⍝ Convert each digit to binary
    1⌊   ⍝ Clamp all digits &gt;1 to 1 (effectively cuts the fractional part of
         ⍝ the last digit if its integer part is 1)
  1⊥     ⍝ Treat the binary of each digit as base 1 and convert back to a number
         ⍝ Since all numbers are &lt;3, effectively &quot;decrement if ≥2&quot;
 ⊥  ⍝ Treat as base 2 and convert to single number
÷2*⊣  ⍝ Divide by 2^n
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>76</s> ... <s>60</s> 58 bytes</h1>
<p><em>-6 bytes thanks to Robin Ryder, +1 byte to fix bug spotted by Neil, -2 bytes thanks to Giuseppe</em></p>

<pre class="lang-r prettyprint-override"><code>f=function(x,n,y=x*3)`if`(n,(min(f(y%%2,n-1),1)+!y&lt;2)/2,x)
</code></pre>
<p><a href="https://tio.run/##VczbDoIwDIDhe55ihpBsWg7tmKfIu0BwUy4sCWACT49GDupd@@Vvm7EsuKubbHSZe3LZVTXLHhiGrN9qlVculwzyUbF0cggCAg5RAardZriQigl6Nb@QSaRBK@GL93A8GG9lhGRi/BqdIJ3bvxTBTEwpmj0ZzxcFX0V3t8JebzYsi9a25/UA6FMvO8Z6lsiIBekH13AS9MYX" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Un-golfed:</p>
<pre class="lang-r prettyprint-override"><code>cantor=f=function(x,n){
    y=3*x                               # define y=3*x
                                        # to save characters later.
    if(n==0){ x }                       # if n==0 just return x
    else {                              # otherwise
        (
         min(                           # whichever is smaller of:
            cantor(y%%2,n-1),           # - call self using y mod 2
                                        #   (this works for the first &amp; last thirds
                                        #   but gives a result &gt;1 for middle third)
            1)                          # - 1 (to fix the middle third)
         +(y&gt;=2)                        # for the top third we need to add 1 to 
                                        # the result of the self call
        )
        /2                              # finally, we divide all above results by 2
    } 
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 78 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub f{my$b=pop;my$a=pop;$b--?($a&lt;1/3?f(3*$a,$b):$a&lt;2/3?1:1+f(3*$a-2,$b))/2:$a}
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/7@4NEkhrTq3UiXJtiC/wBrISAQzVJJ0de01VBJtDPWN7dM0jLVUEnVUkjStgCJGQBFDK0NtiKiuEUhcU98IKFX7XyXeNs3B7b@BnrGCMZeBnqGCAZA0slQwAXEMFUz/5ReUZObnFf/XLUjMAQA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 35 bytes</h1>
<pre><code>Ｎθ≔↨×ＮＸ³θ³ηＩ∕↨²Ｅη∧¬№…ηκ¹§⟦ι¹⊖ι⟧ιＸ²θ
</code></pre>
<p><a href="https://tio.run/##TY4xD4IwEIV3f0XHu6QagTg5ISwMEgY341DhIo3QQltQf32tmBiHl9zL@@7l1a0wtRad94UaJldO/ZUMjLhfpdbKm4KDsAQn2ZOFfwI5q/QjHAlnIwaXBLXhrTJSOciEdZDLWTb0bYg5O4oBWs5S1UCpA6KnD/iqO8pavUT30BEFpa5QDT3hLIPnLKfaUE/KUQMSL5xJRPwNiJcBiHvvd2y7iSK/nrs3" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Based on the Wikipedia entry, I convert the <code>3ⁿx</code> to base 3, then massage the digits so that the result can be interpreted as base 2 and divided by <code>2ⁿ</code>. Takes input in the order <code>n</code>, <code>x</code>. Explanation:</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>≔↨×ＮＸ³θ³ηＩ∕
</code></pre>
<p>Multiply <code>x</code> by <code>3ⁿ</code> and convert it to base 3. The last entry includes any remaining fractional part.</p>
<pre><code>Ｅη∧¬№…ηκ¹§⟦ι¹⊖ι⟧ι
</code></pre>
<p>Map over the digits. If there was a previous <code>1</code> then set this digit to zero, otherwise map the digit to itself, <code>1</code>, or subtract <code>1</code>, depending on the floor of the digit. This ensures that the last digit (with the remaining fractional part) is converted correctly.</p>
<pre><code>Ｉ∕↨²...Ｘ²θ
</code></pre>
<p>Convert from base 2, divide by <code>2ⁿ</code>, and output the final decimal as a string.</p>
<p>Previous 34-byte solution did not work for <code>x=1</code>, as it only considered the decimal part of <code>x</code>:</p>
<pre><code>Ｎθ≔×ＮＸ³θη≔⁻η⌊ηζＦθ≔⊘§⟦ζ¹⊕ζ⟧∕ηＸ³ιζＩζ
</code></pre>
<p><a href="https://tio.run/##TY6xDoIwEIZ3n6LjNalGYpyYiMbIgCHGzThUqPQSaKEtaHj5WoNGtrvvvy/3F5KbQvPa@1S1vTv1zV0Y6Gi8SKzFSsEFG2FhHlJGcv0Mw4aRjoZN/q8PtdYGZIBjgBlvJ37GSjrIUPU2JJPx0IaER@RrHnk9iBISl6pSvOAqGYkYSVVhRCOUC5Gktw9wexywFDDOaiClvyK5QeVgx60LAo2935L1Kor8cqjf" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input in the order <code>n</code>, <code>x</code>. Explanation:</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>≔×ＮＸ³θη
</code></pre>
<p>Multiply <code>x</code> by <code>3ⁿ</code>.</p>
<pre><code>≔⁻η⌊ηζ
</code></pre>
<p>Take the decimal part of that.</p>
<pre><code>Ｆθ
</code></pre>
<p>Loop <code>n</code> times.</p>
<pre><code>≔⊘§⟦ζ¹⊕ζ⟧∕ηＸ³ιζ
</code></pre>
<p>Depending on the next base 3 digit of the above product, replace the decimal part with half of itself, half of 1, or half of the sum.</p>
<pre><code>Ｉζ
</code></pre>
<p>Output the final decimal as a string.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 33 bytes</h1>
<pre><code>3y^i*1&amp;\3_YAt1=f&quot;O@QJh(wkw]XB+wW/
</code></pre>
<p>Inputs are <code>n</code>,  then <code>x</code>.</p>
<p><a href="https://tio.run/##y00syfn/37gyLlPLUC3GOD7SscTQNk3J3yHQK0OjPLs8NsJJuzxcH6iEy0DPGAA" rel="nofollow noreferrer">Try it online!</a> Or <a href="https://tio.run/##y00syfmf8N@4Mi5Ty1Atxjg@0rHE0DZNyd8h0CtDozy7PDbCSbs8XP@/S8h/Yy4DPSAGkoZcJkDSyJLLFMQxBAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h2>Approach</h2>
<p>The code uses a non-recursive approach, based on the procedure for computing the Cantor function <span class="math-container">\$f_\infty(x)\$</span> that appears in <a href="https://en.wikipedia.org/wiki/Cantor_function#Definition" rel="nofollow noreferrer">Wikipedia</a>, modified so that it computes <span class="math-container">\$f_n(x)\$</span> instead:</p>
<ol>
<li>Multiply <span class="math-container">\$x\$</span> by <span class="math-container">\$3^n\$</span>.</li>
<li>Decompose the result into integer part <span class="math-container">\$M\$</span> and decimal part <span class="math-container">\$F\$</span>.</li>
<li>Express <span class="math-container">\$M\$</span> in base <span class="math-container">\$3\$</span>. Let <span class="math-container">\$B\$</span> be the resulting sequence of up to <span class="math-container">\$n\$</span> digits from the set <span class="math-container">\$\{0, 1, 2\}\$</span>.</li>
<li>If <span class="math-container">\$B\$</span> contains a <span class="math-container">\$1\$</span>, replace every digit after the first <span class="math-container">\$1\$</span> by <span class="math-container">\$0\$</span>.</li>
<li>Replace any remaining <span class="math-container">\$2\$</span>s with <span class="math-container">\$1\$</span>s.</li>
<li>Interpret the result as a binary number.</li>
<li>If <span class="math-container">\$B\$</span> didn't contain <span class="math-container">\$1\$</span>s, add <span class="math-container">\$F\$</span>.</li>
<li>Divide by <span class="math-container">\$2^n\$</span>.</li>
</ol>
<h2>Some golfing tricks</h2>
<ul>
<li>Using a <code>for</code> loop instead of an <code>if</code> branch for step 4 saved quite a few bytes. The value for the branch condition (index of first <span class="math-container">\$1\$</span>) needed to be used within the branch code (to replace subsequent digits by <span class="math-container">\$0\$</span>). This is cumbersome in MATL, as the <code>if</code> branch consumes (pops) its condition. Instead, the loop solves this more elegantly: since the branch condition was either empty or a vector of indices of <span class="math-container">\$1\$</span>s in <span class="math-container">\$B\$</span>, it can be looped over: if it's empty the loop is simply not entered. And then the loop variable can be used within the loop code. The fact that the loop, unlike the conditional branch, may iterate <em>several</em> times (if there are more than one <span class="math-container">\$1\$</span> digit) is not harmful here, because the substitutions in step 4 are idempotent: they simply overwrite some of the previous <span class="math-container">\$0\$</span>s with new <span class="math-container">\$0\$</span>s.</li>
<li>Step 7 is partly handled within the <code>for</code> loop. Specifically, if the loop is entered, the decimal part <span class="math-container">\$F\$</span> should not be added later on. To implement this, the loop iteration replaces <span class="math-container">\$F\$</span> (previously stored in the stack) by <span class="math-container">\$0\$</span>. This is done by a round-down operation (<code>k</code>), which is convenient because it uses only 1 byte and is, again, idempotent: the result remains equal to <span class="math-container">\$0\$</span> in all iterations after the first.</li>
<li>The MATL function that converts from binary to decimal (<code>XB</code>) treats any digit other than <span class="math-container">\$0\$</span> as if it were <span class="math-container">\$1\$</span>, which is useful for steps 5 and 6.</li>
</ul>
<h2>Commented code</h2>
<pre><code>3         % Step 1. Push 3
y         % Implicit input: n. Duplicate from below: pushes n below and
          % above the 3
^         % Power: gives 3^n
i*        % Input: x. Multiply: gives x*3^n
1         % Step 2. Push 1
&amp;\        % Two-output modulus: gives modulus (F) and quotient (M)
3_YA      % Step 3. Convert to base 3, with digis 0, 1, 2
t1=       % Step 4 and part of step 7. Duplicate. Compare each entry with 1
f         % Vector (possibly empty) of indices of true values; that is,
          % positions of digit 1
&quot;         % For each index k
  O       %   Push 0
  @Q      %   Push k+1
  Jh(     %   Write 0 at positions k+1, k+2, ..., end
  wkw     %   Swap, round down, swap. This replaces F by 0
]         % End
XB        % Steps 5 and 6. Convert from binary to decimal, with digit 2
          % interpreted as 1
+         % Part of step 7. Add F, or 0
wW/       % Step 8. Swap (brings n to top), 2 raised to that, divide
          % Implicit display
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 31 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>3Im*1‰`s3в¹£εTYèsi1V]2βY≠i+}¹o/
</code></pre>
<p>Takes the loose inputs in the order <span class="math-container">\$n,x\$</span>.</p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/207417/52210"><em>@LuisMendo</em>'s MATL answer</a>, so make sure to upvote him as well!</p>
<p><a href="https://tio.run/##AToAxf9vc2FiaWX//zNJbSox4oCwYHMz0LLCucKjzrVUWcOoc2kxVl0yzrJZ4omgaSt9wrlvL///NAowLjI5" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVC6H/jiFwtw0cNGxKKjS9siji0@NzWkMjDK4ozDcNqa43ObYp81LkgU7s2Il//v45R2P/oaAM9Yx3jWB0gbahjAKaNLHVMIAKGOqaxsQA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>3Im              # Push 3 to the power of the first input-integer
   *             # Multiply it by the (implicit) input-decimal
    1‰           # Get the divmod-1 to split the integer and decimal parts
      `s         # Pop and push them separated to the stack in reversed order
3в               # Convert the integer part to base-3 as list
  ¹£             # Only leave the first input-integer amount of base-3 digits
    ε            # Map this list to:
     T           #  Push 10
      Yè         #  Index `Y` into this
                 #  (`Y` is 2 by default, which wraps modulair indices into the 1)
     si          #  If the current digit we're mapping over is 1:
       1V        #   Set `Y` to 1
    ]            # Close both the if-statement and map
     2β          # Convert the resulting list from base-2 to an integer
       Y≠i }     # If `Y` is NOT 1:
          +      #  Add the decimal part that's still on the stack
            ¹o/  # And divide this by 2 to the power the first input-integer
                 # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu7" class="pu"><h1>JavaScript (ES6), 45 bytes</h1>
<p>Expects <code>(n)(x)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;g=x=&gt;n--?((x*=3)&lt;1?g(x):x&lt;2||1+g(x-2))/2:x
</code></pre>
<p><a href="https://tio.run/##fcw9DoJAEEDh3pPMaHbdHykkDHTeg8CywZAdI8RMwd1XsaOhe8WX92w/7dy9x9eiEvchD5QT1ZGE6qRUAyBn8ljZJoJgKZVbV3v5tXKIV1dK7jjNPAU9cYQBPILR3qBe@DFK6KFAPO2J2Yg9JLeNuPsRKf4XuyP5Cw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>n =&gt;                   // outer function taking n
  g = x =&gt;             // inner recursive function taking x
    n-- ?              // decrement n; if it was not equal to 0:
      (                //   compute f_n(x):
        (x *= 3) &lt; 1 ? //     multiply x by 3; if the result is less than 1:
          g(x)         //       use g(x)
        :              //     else:
          x &lt; 2 ||     //       use 1 if x is less than 2
          1 + g(x - 2) //       otherwise, use 1 + g(x - 2)
      ) / 2            //   in all cases, divide the result by 2
    :                  // else:
      x                //   stop recursion and return f_0(x) = x
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 69 bytes</h1>
<p>of course mathematica has a built-in for this: <code>CantorStaircase[x]</code> but you cannot choose <code>n</code></p>
<pre><code>x_~f~0:=x
x_~f~n_:=If[(y=3x)&lt;1,f[y,n-1]/2,If[y&lt;2,.5,.5+f[y-2,n-1]/2]]
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78/78ivi6tzsDKtoILzMqLt7L1TIvWqLQ1rtC0MdRJi67UydM1jNU30gEKV9oY6eiZApE2kK1rBJWJjf0fUJSZV6LgkBZtoGeso2Acy4UkYKijYIAiYGSpo2CCqgSoxjT2/38A" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p><em>@JonathanAllan saved 2 bytes</em></p>
<p>Here is also another approach from @att which is great!</p>
<h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 57 bytes</h1>
<pre><code>If[#2&lt;1,#,If[1&lt;3#&lt;2,1,(s=Boole[2#&gt;1])+#0[3#-2s,#2-1]]/2]&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b73zMtWtnIxlBHWQfIMrQxVrYx0jHU0Si2dcrPz0mNNlK2M4zV1FY2iDZW1jUq1lE20jWMjdU3ilX7H1CUmVei4JAWbaBnrKNgHMuFJGCoo2CAImBkqaNggqoEqMY09v9/AA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.dyalog.com/" rel="noreferrer">APL (Dyalog Unicode)</a>, 38 <a href="https://codegolf.meta.stackexchange.com/questions/9428/when-can-apl-characters-be-counted-as-1-byte-each/">bytes</a></h1>

<pre class="lang-apl prettyprint-override"><code>{×⍺×1-⍵:2÷⍨(1∘≤+(1≠⌊)×(⍺-1)∇⊢-⌊)3×⍵⋄⍵}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///v/rw9Ee9uw5PN9R91LvVyujw9ke9KzQMH3XMeNS5RBvI6FzwqKdL8/B0DaAqXUPNRx3tj7oW6YLEjEE6tz7qbgGStf/THrVNeNTb96ir@VHvmke9Ww6tN37UNvFR39TgIGcgGeLhGfzfB6xmlbGCgYKJgimQBGOuIIiwgR5QQs8QiI0sQQwgCwgNFQy5fHSCdDR8FNIOrQjSBAA" rel="noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>Combines the cases of the recurrence using</p>
<p><span class="math-container">$$
f_{n+1}(x) = \frac{1}{2}\begin{cases}
0+1×f_n(3x-0), x\in[0,1/3) \\
1+0×f_n(3x-1), x\in[1/3,2/3)\\
1+1×f_n(3x-2), x\in[2/3,1]
\end{cases}
$$</span></p>
<p>which can be condensed (note <span class="math-container">\$u=3x\$</span>) to</p>
<p><span class="math-container">$$
f_{n+1}\left(\frac{1}{3}u\right) = \frac{1}{2}\big(
(u&lt;1)+(\lfloor u\rfloor\neq 1)×f_n(u-\lfloor u \rfloor)\big)
$$</span> (since comparisons resolve to True=1 or False=0). This fails for <code>x=1</code> since then <code>⌊u</code> is 3 instead of 2. Using ceiling instead of floor would then fail for <code>x=0</code>, so it ends up shorter to check specifically for <code>x=1</code>.</p>
<pre class="lang-apl prettyprint-override"><code>{ ... } ⍺=n; ⍵=x
×⍺×1-⍵: ⍝ If n&gt;0 or x≠1:
 3×⍵      ⍝ Let u=3x
  (⍺-1)∇⊢-⌊ ⍝ f(n-1, u-floor(u)) (`1∘|` ←→ `⊢-⌊`)
  (1≠⌊)×    ⍝ Multiply by 1 unless floor(u)=1
  1∘≤+      ⍝ Add 1 unless 1 &gt; u
 2÷⍨      ⍝ Half of this
⋄       ⍝ Else:
 ⍵        ⍝ x
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 54 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,x:n and(1&lt;x*3&lt;2or x//.5+f(n-1,3*x%1))/2or x
</code></pre>
<p><a href="https://tio.run/##LYxBCoNADADvfUUuhY1NXWP0UNHHrMiiYKOIh/T1q7a9DMMcZv3s46KSUuzm8O6HAErWKAQdHLeWSVsuG5j3ef2ITp9MktmdEf23p3iRQGFScEUuJEiXMBU/KV9U/RNTjc0NYN0m3d15I0NMBw" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Python 3 is used just for the <code>/2</code> to do float division; Python 2 would be a byte longer with <code>/2.</code>.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 30 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>_2çH+.
ñH¥.ç&lt;2$?&lt;1$?
×3çɗ⁸⁹?’}
</code></pre>
<p>A full program accepting <span class="math-container">\$x\$</span> and <span class="math-container">\$n\$</span> which prints a floating-point representation of <span class="math-container">\$f_n(x)\$</span></p>
<p><strong><a href="https://tio.run/##AToAxf9qZWxsef//XzLDp0grLgrDsUjCpS7DpzwyJD88MSQ/CsOXM8OnyZfigbjigbk/4oCZff///y4yOf80" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8</a>, 70 <s>74</s> bytes</h1>
<p><em>1 byte saved thanks to @FryAmTheEggman</em></p>

<pre class="lang-python prettyprint-override"><code>f=lambda n,x:n and((1&lt;=(t:=x*3))+f(n-1,t-2*(t&gt;=2))*(t&gt;=2or 1&gt;t))/2or x
</code></pre>
<p><a href="https://tio.run/##NYxBDoIwEEXXcIpZzuCgtNVEieUixkUNaSTBoSFd4OkrRd389/IWP7zjcxJzDnNK3o7u9egdCC@tgJMeUV0txtYulSHaeZRacax1hbGzmujLaQbVRaJDtiX5vAwCg8CtLLDZGwZDvKliaH6qLwzHf177afV7WxZhHiSicD7xG4nSBw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="noreferrer">Python 3.8 (pre-release)</a>, 62 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,x:n and[f(n-1,e:=3*x),1+e//2*f(n-1,e-2)][e&gt;1]/2or x
</code></pre>
<p><a href="https://tio.run/##LYxBCsIwEADvvmKP2bo13URBA/UjpYdIEyzoNoQe4uujxV6GYQ6TPutzEXtNudbYv/z7MXkQKk7AyzREJS1TcL1tChIfg9am2WNrcBzCnUdtlgylxo0EArOA6k6WLNImTN1fzI3Oe2K6oDsApDzLqn5DKoj1Cw" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/207404/">207404</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




