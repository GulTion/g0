<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::255405</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>071</td><td>Pip</td><td>221214T044459Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255474#255474">jezza_99</a></td></tr>
<tr d-ix="1"><td>243</td><td>Python</td><td>221212T232635Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255436#255436">jezza_99</a></td></tr>
<tr d-ix="2"><td>074</td><td>Charcoal</td><td>221212T003807Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255406#255406">Neil</a></td></tr>
<tr d-ix="3"><td>050</td><td>05AB1E</td><td>221212T172347Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255422#255422">Kevin Cr</a></td></tr>
<tr d-ix="4"><td>350</td><td>Python3</td><td>221212T164620Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255421#255421">Ajax1234</a></td></tr>
<tr d-ix="5"><td>128</td><td>JavaScript Node.js</td><td>221212T034258Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255410#255410">tsh</a></td></tr>
<tr d-ix="6"><td>147</td><td>JavaScript ES6</td><td>221212T030344Z</td><td><a href="https://codegolf.stackexchange.com/questions/255405/cgac2022-day-12-santas-gift-and-the-laser-lock/255409#255409">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, <s>92</s> <s>75</s> 71 bytes</h1>
<pre><code>@FI{WG N({UQaQ&quot;\/&quot;@i&amp;Ui|a@iN&quot;.R&quot;}M&lt;&gt;a)&amp;aX%i}M J(a^'GWV_)MCP:&quot;\/.&quot;Ma@*'G
</code></pre>
<p><a href="https://dso.surge.sh/#@WyJwaXAiLCIiLCJARkl7V0cgTih7VVFhUVwiXFwvXCJAaSZVaXxhQGlOXCIuUlwifU08PmEpJmFYJWl9TSBKKGFeJ0dXVl8pTUNQOlwiXFwvLlwiTWFAKidHIiwiIiwiIiwiXCJHXFwvL1xcR1wiIFwiR0dcIiBcIkdSR0dcIiBcIkdHXFxSL0dSRy9HXFxSL0dHUkdcXFwiIFwiR0dcXFxcXCIiXQ==" rel="nofollow noreferrer">Try It Online!</a></p>
<p>-<s>17</s> 21 bytes thanks to @DLosc</p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/255436/110555">my Python answer</a>. I'm sure there are some further golfs that can be done. I could save a byte by outputting the list of all possible solutions as in <a href="https://codegolf.stackexchange.com/a/255422/110555">@KevinCruijssen's answer</a>. Explanation:</p>
<pre><code>J(a^'GWV_)MCP:&quot;\/.&quot;Ma@*'G
</code></pre>
<p>Generates all possible combinations using the cartesian product of <code>&quot;\/.&quot;</code> by the number of <code>&quot;G&quot;</code> in the input</p>
<pre><code>WG N({UQaQ&quot;\/&quot;@i&amp;Ui|a@iN&quot;.R&quot;}M&lt;&gt;a)&amp;aX%i
</code></pre>
<p>Is the testing function that is mapped over all combinations. <code>WG</code> is required to reset the global variable <code>i</code>, which is used to store the laser row.</p>
<pre><code>@FI
</code></pre>
<p>Finally filters out all falsy values from the output list, giving only the list of solutions. <code>@</code> outputs the first in the list.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, <s>309</s> <s>281</s> 243 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda a:max(map(lambda t,b=0:all(i%2^1and(s:=j)or s==j==&quot;\\/&quot;[b]and~(b:=b^1)or(s,j)[b]in&quot;.R&quot;for i,j in E(t))and t*b or&quot;&quot;,[&quot;&quot;.join(sum(zip(a.split(&quot;G&quot;),[*g,&quot;&quot;]),()))for g in product(*[&quot;\\/.&quot;]*a.count(&quot;G&quot;))]))
from itertools import*
E=enumerate
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XVLBbtQwEBXH9VdYI6G1sybt9oQi-VjlxCXXJEVO4ywOiR3ZTgtU5Ue4rITg3s-B3-AHsJNtKT1kxjPz5s0bx99-Tp_9B6OP3zte_Zh99-btrz-DGJtWYJGN4hMZxUROCc8afp6JYSDq9cXVXuiWuIz31FjsOO85h6o6g7KpQ-UraTLeXO1DkTjW05BVGtICuoBWrMdK40viKQ1Y7JMGGwvASoC0N0oTN4_ki5qISN00KE8gB8rK5MAAasoIpTTyHCLLZE07X3uSlHF8CnUi0msz67WJ1pSizpoRKy-tN2ZwWI2TsT5Bl1zqeZRWeLmu_vvVg5fOO14iAMhRHixbjjkq_gVhTHEWTMjmRZ6Hr6iqZ1WUn8IaIW-FdpNxsn1_oq5RlB6DqH5JZmgTPY_mceFKA43pceIAaLP0mIk1xvu4jMbxemJDeV6zxe9rGoiWlh0P2N2KDSQvNOx4GUE1amWHZ30rxY0kzlulD5Fhu92-Ex-lw3GmFE7JOBrfKDeLQTmJA9uttC7gAveTJr4ylFl2UbPTeR8DtLHSz1bjDu4C_L7Sd2vHPaD_7-KFzqBlCjSePGrsloUpZVK34bHpeEfrnzseV_8X" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>-a massive 38 bytes thanks to @tsh.</p>
<p>Saved 20 bytes by switching to a flattened transposed string for input and output. Brute force solution. Explanation:</p>
<pre class="lang-python prettyprint-override"><code>[&quot;&quot;.join(sum(zip(a.split(&quot;G&quot;),[*g,&quot;&quot;]),()))for g in product(*[&quot;\\/.&quot;]*a.count(&quot;G&quot;))]
</code></pre>
<p>Generates all possible substitutions for <code>&quot;G&quot;</code> using</p>
<pre class="lang-python prettyprint-override"><code>product(*[&quot;\\/.&quot;]*a.count(&quot;G&quot;))
</code></pre>
<p>The cartesian product of <code>\/.</code> repeated for every occurence of <code>&quot;G&quot;</code>, where each combination is</p>
<pre class="lang-python prettyprint-override"><code>&quot;&quot;.join(sum(zip(a.split(&quot;G&quot;),[*g,&quot;&quot;]),()))
</code></pre>
<p>Manually mapped to the input string to replace the respective <code>&quot;G&quot;</code>'s.</p>
<pre class="lang-python prettyprint-override"><code>lambda t,b=0:all([i%2^1and(s:=j)or s==j==&quot;\\/&quot;[b]and~(b:=b^1)or(s,j)[b]in&quot;.R&quot;for i,j in E(t)])and t*b or&quot;&quot;
</code></pre>
<p>The testing function is then mapped over the generated combinations, which checks for every column that either:</p>
<ul>
<li><code>s==j==&quot;\\/&quot;[b]</code> the correct mirror for the given laser row <code>b</code> is in that column. <code>~(b:=b^1)</code> is used to switch the laser row</li>
<li><code>(s,j)[b]in&quot;.R&quot;</code> the laser row in the column is <code>R</code> or <code>.</code></li>
<li><code>or &quot;&quot;</code> outputs an empty list if above two tests fail</li>
<li><code>t*b</code> outputs the combination tested if the laser is on the bottom row for the last column, otherwise an empty list</li>
</ul>
<p><code>i%2^1and(s:=j)or</code> is used to generate the column pairs from the transposed flattened list by storing a value on every even iteration and testing on every odd iteration</p>
<p>Then <code>max()</code> is used to return a correct solution from the test results of all combinations</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>93</s> 74 bytes</h1>
<pre><code>⊞υ\ＦＥθ⁺ι§ηκ≔ΣＥυΦ⟦⁺⭆κ⎇νμ⁻\/μ×²§κ⁰⁺κ⪫⪪ιG¦.⟧⎇ν№α§ι⁼§κ⁰/⬤ι№⁺G§κ⁰ξυ⪪Φ⊟Φυ⌕\ικ²‖↙
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XVG9TsMwEBZrn8LyZEsuQZ0QnSJ-LBCVopSt6WBSp7HiOGlsQ1l4EZYOINh5G56GixtUlZNO8um-n7vz21deii5vhN7tPrwrxuc_J6-JtyXxDOEsw3Q6KpoOkZloyYahRHtLFEOxuzUruSUlQxWFQLG1am3I3NcBCuwbpZ3syCJQ5q5TZt13KoYeZGdE90IMQzVDM2UAAF4Rhhq0AKBqacnkYAOks9AJYlDdNQrMWq1cPw3mGHr4FFO6PJK_bLxxRByEAHy98UJbciQN5AgHg1jrHrQnBjcQ_z8IQ1sagiEPB0pgNzdMM2ydNO3fM5zCrPoNQUgFVgU5oUBNZaFl7sjFVfNs7mXh6PTdPuZ2-IzPBR4_abz85lmURlnE-YinnEOm2R7xCw" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code. Explanation: Inspired by the alternate input format, this sticks to the original input format and pays the 8 byte penalty for transposing the input and output.</p>
<pre><code>⊞υ\
</code></pre>
<p>Start with a single state of the beam in the top row. The first character of the state is <code>\</code> if the beam is in the top and <code>/</code> if the beam is in the bottom row, while the remaining characters are the columns processed so far in a flattened representation.</p>
<pre><code>ＦＥθ⁺ι§ηκ
</code></pre>
<p>Transpose the input and loop over each column. (Note: row/column here refer to the original input, not the transposed version.)</p>
<pre><code>≔ΣＥυΦ⟦⁺⭆κ⎇νμ⁻\/μ×²§κ⁰⁺κ⪫⪪ιG¦.⟧⎇ν№α§ι⁼§κ⁰/⬤ι№⁺G§κ⁰ξυ
</code></pre>
<ul>
<li><code>⭆κ⎇νμ⁻\/μ</code> - Flips the row of the state.</li>
<li><code>⪫⪪ιG¦.</code> - Replaces <code>G</code>s in the current column with <code>.</code>s</li>
<li><code>№α§ι⁼§κ⁰/</code> - Checks whether the current cell is empty.</li>
<li><code>⬤ι№⁺G§κ⁰ξ</code> - Checks whether both the rows can contain the correct mirror.</li>
</ul>
<p>Loop over the current states, collecting states where the beam switches or doesn't switch appropriately depending on whether the column can have the correct mirrors or there is an empty space in the current cell.</p>
<pre><code>⪪Φ⊟Φυ⌕\ικ²
</code></pre>
<p>Output any state which has the beam in the bottom row.</p>
<pre><code>‖↙
</code></pre>
<p>Transpose the output.</p>
<p>66 bytes using the new transposed input format:</p>
<pre><code>⊞υ\ＷＳ≔ΣＥυΦ⟦⁺⭆κ⎇νμ⁻\/μ×²§κ⁰⁺κ⪫⪪ιG¦.⟧⎇ν№α§ι⁼§κ⁰/⬤ι№⁺G§κ⁰ξυ⪪Φ⊟Φυ⌕\ικ²
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XZBPSsQwFMZxm1OErBLIWJmVMKsiGkYYKB137Sxip07DpGltEh3P4mYWit7Bm3gaX9KKjIGEF973_d6f18-qkUPVSX08vnv3MLv8PisybxvqOSZlSdgCPTdK15guTe_d2g3K7ChjOLVW7Qxd-5auZB_kN0q7eqBFpr2lozBk9hzf1YORwws1HLccr5QBAcATAn_GGAhUW1s65zh1S7OtD8F0ETMRBr_bTkGxXitHFXQmCOTIOWFsc4K_6rxxVP6BQHz96KW29AQN5oTEAqnWQTQaYzWA_2-E4wOLh2MPG8lgNjd1M02ddf1vGFdhtmFCAKno2sOdM7Z4s_eVnTb9UZDZkyabLyFQmaNEoFyEd4xFjkSJRuUP" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code. Takes input as a list of newline-terminated strings. Explanation: As above but simply uses <code>ＷＳ</code> to iterate over the input and doesn't need to transpose at the end either of course.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>61</s> 50 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>…\/.I'G¢ãε'GsS.;}ʒ0U¶¡ε„\\º2äXèQiX_Uë„R.yXèå}Ā}PX*
</code></pre>
<p>Takes the input as a transposed multiline string. Outputs a list of all possible results (<code>R</code> remains <code>R</code>).</p>
<p><a href="https://tio.run/##yy9OTMpM/f//UcOyGH09T3X3Q4sOLz63Vd29OFjPuvbUJIPQQ9sOLTy39VHDvJiYQ7uMDi@JOLwiMDMiPvTwaqBYkF4lkH94ae2RhtqACK3//5WUlNxjuNyDuIL0uWLcQQx3IBkDFAYA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V@mFFCUWlJSqVtQlJlXkpqikJlXUFpipaCkU6nDpeSYXFKamKOgUVKUmFdckF@cmqKJpCD40LZDCw/v8Dq02yVM5/@jhmUx@nqR6u6HFh1efG5rZLG6e3GwnnXtqUkGoSCF57a6PGqYFxNzaJfR4SURh1cEZkbEhx5eDRQL0qsE8g8vrT3SUBsQofW/Fqu9@aUlQIt1czKLwbbbcqG7HKKgGCRZhuQ2nUPb7GvVdUMOTwex/kcrubsHxcS4u7vH5MXEBOm7B7nHxCjpKCgB@e5gGsgIgrBiYvSD9IEESAioDqgRpFUp9r@ubl6@bk5iVSUA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Partially inspired by <a href="https://codegolf.stackexchange.com/a/255410/52210"><em>@tsh</em>'s JavaScript's answer</a>, so also checks pairs as:</p>
<pre class="lang-python prettyprint-override"><code>0 → \
    \ → 1

    / → 0
1 → /

0 → . → 0
    *

0 → R → 0
    *

    *
1 → . → 1

    *
1 → R → 1

anything else: invalid
</code></pre>

<pre class="lang-python prettyprint-override"><code>…\/.              # Push string &quot;\/.&quot;
    I'G¢         '# Count how many &quot;G&quot; are in the input-string
        ã         # Get the cartesian product of &quot;\/.&quot; with this count
         ε        # Map over each string:
              .;  #  Replace in the (implicit) input-string every first occurrence of
          'G     '#  character &quot;G&quot;, one by one with
            sS    #  the characters in the current string
         }        # Close the map
ʒ                 # Filter this list of potential results with:
 0U               #  (Re)set `X` to 0
 ¶¡               #  Split the multiline string on newlines
   ε              #  Map over each pair:
    „\\           #   Push string &quot;\\&quot;
       º          #   Mirror it to &quot;\\//&quot;
        2ä        #   Split it into two parts: [&quot;\\&quot;,&quot;//&quot;]
          Xè      #   Get the 0-based `X`'th string in this pair
    Qi            #   If it's equal to the current pair we're mapping over:
      X_U         #    Invert `X` (0 becomes 1 and vice versa)
                  #    (and implicitly map to the implicit input-string)
     ë            #   Else:
         yXè      #    Get the 0-based `X`'th character from the current pair
      „R.   å     #    Check if this character is in string &quot;R.&quot;
     }Ā           #   After the if-else: Python-style trutify the value
                  #   (0 remains 0; everything else becomes 1)
   }P             #  After the map: check if all are truthy by taking the product
     X*           #  Multiply it by `X` to check whether we've ended at the bottom row
                  # (after which the filtered results are output implicitly)
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Python3, 350 bytes:</h1>
<pre class="lang-py prettyprint-override"><code>def f(b):
 q=[(0,0,[*map(list,b.replace('R','.').replace('G','.').split('\n'))])]
 while q:
  x,y,B=q.pop(0)
  if(x,y)==(1,len(B[0])):return B
  try:
   B=eval(str(B))
   if(V:=B[x][y])in'\\/':B[(X:=x+[-1,1][V=='\\'])][y]=V;q+=[(X,y+1,B)]
   else:j=eval(str(B));j[x][y]=(K:='\\/'[x]);j[(X:=x+[-1,1][K=='\\'])][y]=K;q+=[(x,y+1,B),(X,y+1,j)]
  except:1
</code></pre>
<p><a href="https://tio.run/##bY89b4MwEEB3foWVxefiJqAulSMvXjxkY4giGYZ8GIXIJca4Lfx6eiSR2kgdfJLf3b2782M8X9u3dx@m6WRrUsOBiYR00kDGM25ePvYeXNNHflgG693@aIEWlNMlZb9AP0DvXROBli1lrGJVQr7PjbOkQyMZ@MiV7Jb@6iFjCJoakDEpIefOtqBMVjEmgo2foSUKK2IY506ipP3aO@hjAMXm1rl3K6QyQ2XGijUtLcsVFcrATsghNa85zyuzlRI5xUWwSG7XXYpX7fiY5lzNyxFiXW/F5cm@vtylEjZC3rT4n@mTevOk3tzVw0PNH0MutyF2OFofRT750LQRalgsFjrRGPGUv0wnxT8UNyhWGDCtC63xFWV5K5t@AA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 128 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=a=&gt;[...'./\\'].some(c=&gt;(b=a.replace(/g/,c))&lt;a?f(b):b.split`
`.map(v=&gt;p=v==['\\\\','//'][p]?1-p:p/ /r|\./.test(v[p]),p=0)|p)&amp;&amp;b
</code></pre>
<p><a href="https://tio.run/##VZFNc4MgEIbv/IpcGtiJLkmPmaKHHrz0ZI/ijGgxQ8YIUcfkkP@eorZJy8Jhn33ZDziqUfVVZ9wQtvZL32vhtxJRhogUuZQ0x96eNKtExEqhsNOuUZVm/MCDCuBNxTUrYV9i7xozFKTAk3JsFJEToxAZlX7RgHJO88zl8S50e8dXvLtJ5DjofmCj5xA4sYWbg/W6vE@0Ur3uV2L1OXSmPWCnLgVJvIURkd5IkpB09lCSdPIlT7nkHidpkvjj4aRdsBfJ1E@Uco8LQirb9rbR2NgDe1RbJmBctizehxHEsuUwT3MV0RV9IycGPyIqWwqAtWkG3THWBgZEZF5ehZ9ivsIyF5xzWB7S5QsbZ9m4OWcmBzxa0y6JcLAf9qK7d98GA/h9wZqNT2f8X3mi/pvUI5xtHykpbCbV5k9w9yf4rDynun8D" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p><span class="math-container">\$O\left(3^n\right)\$</span> solution. Input a multiple line string as transposed matrix with lowercase letters.</p>
<blockquote>
<p>Is this somehow <em>&quot;if you force it&quot;</em>?</p>
</blockquote>
<pre class="lang-javascript prettyprint-override"><code>f=(
  a // the input grid
)=&gt;
[...'./\\'].some(c=&gt; // for each possible replacement of letter &quot;g&quot;
  (b=a.replace(/g/,c)) // replace the first occurrence of &quot;g&quot;
    &lt;a? // if any &quot;g&quot; exists (replaced successfully)
        // or the string is out of &quot;g&quot; otherwise
      f(b): // recursively try next &quot;g&quot;s
      b.split`\n`.map(v=&gt; // for each column of a possible replacement
        p=v==['\\\\','//'][p]?1-p: // If the pattern is '//' or '\\' it reflect laser to another row
        p/ /r|\./.test(v[p]) // if the cell is 'r' or '.', it keeps laser on the same row (p/1==p); otherwise, set to invalid values (NaN or Infity)
      ,p=0) // the laser starts from first row
      |p)&amp;&amp;b // if the laser finally output from second row, &quot;b&quot; is a solution we found
</code></pre>
<hr />
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 142 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=([x,y,...a],p=[],q,h=s=&gt;q&amp;&amp;!/(.).(?!\1)[^RG]|[^.].R/.test(s+x+y)&amp;&amp;q+s,o=h(x+'.')||h`..`,O=h`//`)=&gt;x?f(a,h('.'+y,q=p)||h`..`||O,o||h`\\\\`):q
</code></pre>
<p><a href="https://tio.run/##VVDBjoIwEL3zFXpYmYY61T2aFI8cTdgjxdCwKBgtxRIWE/7dHcTdaKdNZt57fTPtSXfa5dfKtktTfxf3g6QNSc9vHBF1yq1MUt7wUjoZNovFXAAyhO1crVmyj6N0SPaYYiywLVwLLuiDG1ssmsDxWpbQBz76bBjKDDHjO1lmQmRMhv32AJqXQGxw4420f5ph2PF6zBWtjG2a@@iba1e4mZx9tdfKHPGqfzIvoliGnqLwosiLHxUqLx5rJWKhBMFRHEV0CBy1E0wiFdPrYkFw5nl5bVx9LvBcH@G/Gzp7rloQysB2swzZVhnB8KIt9DQ@0iAXYE@Rr4zPJhISy5uUXphQA5tOWMcrQrqgSaqU4amuDPjjhUN1bosrgHnw1cenlKvJRsuQPujpaWVoKWnzEgSiOL7DFjryTlYvzsE4UPBCrt/aTpkyj6nvvw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p><span class="math-container">\$O(n)\$</span> solution. Input transposed flatten string with uppercase letters.</p>
<pre class="lang-javascript prettyprint-override"><code>f=(
  [x,y, // for each column of the grid, &quot;x&quot; and &quot;y&quot; are two cells on this column
  ...a], // the remaining grid
  p=[], // A solution where laser on the first row, or falsy if impossible
  q, // A solution where laser on the second row, or falsy if impossible
  h=s=&gt; // &quot;s&quot; is a possible replacement of current column
    // if the laser can running on row &quot;p&quot; (&quot;p&quot; is reassigned later)
    // and the replacement of current column is valid
    // then we got a solution
    p&amp;&amp;!/(.).(?!\1)[^RG]|[^.].R/.test(s+x+y)&amp;&amp;p+s,
    o=h('\\\\')
)=&gt;x? // if any more columns here
  f(a,
    h(D='..')||h('.'+y)||h('//',p=q), // all possible patterns where laser on first row
    o||h(D,p=q)||h(x+'.') // all possible patterns where laser on second row
  ):q
</code></pre>
<hr />
<p>Only valid patterns are:</p>
<pre class="lang-javascript prettyprint-override"><code>Laser -&gt; \
         \ -&gt; Laser

Laser -&gt; . -&gt; Laser
         ?

         / -&gt; Laser
Laser -&gt; /

         ?
Laser -&gt; . -&gt; Laser
</code></pre>
<p>So we only need to verify all these patterns and treat all other patterns as invalid.</p>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 147 bytes</h1>
<p>I/O format: matrix of ASCII codes.</p>
<p>I would probably have golfed this differently if I had noticed the rule about removing all G's earlier.</p>

<pre class="lang-javascript prettyprint-override"><code>m=&gt;(g=(x,y=0,d=1,_,r=m[y],c=r[x])=&gt;c?c%9&amp;2?c%2^y^d&amp;&amp;g(x+!d,y^d,!d):d&amp;&amp;g(x+1,y)||c==71&amp;&amp;g(x,y,d,r[x]=y^d?92:47):y&amp;&amp;m.map(r=&gt;r.map(c=&gt;c-71?c:46)))(0)
</code></pre>
<p><a href="https://tio.run/##RZBda8IwFIbv@yuisDbBmK4iEyupDNlyXy@NjpJ@WGkTl3bDMvfb3WkVRuB8Puc9h5yS76RRtjy3U23S7JbzW80jXHB8oR1/pikP6Ae1vN51e6q43V32hEdqrZ6W7gzs7NAdUtct8GUySinEdJSS8FEJaEeuV8X5IhgKtKMp7SU4gOvlLJwvSNi5bs3q5Iwtj@wQKFgwXQRrFc5fCCH4mdxs9vlV2gx7eeMRZrMkfS@rbNtpBV3Wmm1rS11gwppzVbZ4LLXUY8JyY98SdcQN4hH6cRCqshbViKPmHwSsXzogO8ZYs78f0eeKqWNiN/Axry2GU1YgoYxuTJWxyhQ4x/V92vb0/QiWW1NvHmMYBC0h7GRKjT2pPYImaPAr55fchIilEMKRsS9iIR1HwHOgEPdO@rEvfcigBySwfw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/255405/">255405</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




