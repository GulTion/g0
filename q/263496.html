<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="g.js"></script>
    <title>cg::263496</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>092</td><td>C gcc</td><td>230729T193245Z</td><td><a href="https://codegolf.stackexchange.com/questions/263496/can-you-perform-swaps/263518#263518">SNBeast</a></td></tr>
<tr d-ix="1"><td>096</td><td>JavaScript</td><td>230729T144258Z</td><td><a href="https://codegolf.stackexchange.com/questions/263496/can-you-perform-swaps/263501#263501">bsoelch</a></td></tr>
<tr d-ix="2"><td>013</td><td>Jelly</td><td>230729T164305Z</td><td><a href="https://codegolf.stackexchange.com/questions/263496/can-you-perform-swaps/263509#263509">Jonathan</a></td></tr>
<tr d-ix="3"><td>nan</td><td>Rust</td><td>230729T140042Z</td><td><a href="https://codegolf.stackexchange.com/questions/263496/can-you-perform-swaps/263499#263499">mousetai</a></td></tr>
<tr d-ix="4"><td>165</td><td>Scala</td><td>230729T153542Z</td><td><a href="https://codegolf.stackexchange.com/questions/263496/can-you-perform-swaps/263502#263502">138 Aspe</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 92 bytes</h1>

<pre class="lang-c prettyprint-override"><code>c;i;r;t(a,b,l)int*a,*b;{c=i=0;r=!(l&amp;1);for(;i&lt;l;r&amp;=c&gt;0|a[i]&gt;0&amp;b[i]&gt;0,c+=a[i]+b[i++]);r&amp;=!c;}
</code></pre>
<p><a href="https://tio.run/##lZNdb4IwFIbv/RVHyUwrZYOKH0nFu/2CeeeMgQJbEwYLsMSM@dtZ8QM7ZERJCbznfc6bckK58cZ5WXImWMpy5BKPRFjE@cglI48V3BGOyVKnj6KhhVmYpIiJRcTSocOX5o@7FpulOfQOD8J1pyroUur6BldQn7N9qYmYR19@AIss90Xy@L7saX4QijiA1fPLCu0w5CgPslzTdpq2tQhcBCWQie8gCVUAw9O5KreKMYPPVL6EaPDgv8YDAilmPVmAD1fEgDAUPZBXValSrK213oADhbVnDYMeDaPp0LqFQItJ/zfHSudxGfV9hao5NduG2n/20x1rK7HdqZNzqqHkndYVSm/9rGlbagdN76Bn3dmtHfTOjnlj1jc0NGejDEmyB/jw58sjdRFUFWNV2KqYqGKqipkq5lLsy18" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Returns in boolean r, takes the length and arrays where <code>(</code> is 1 and <code>)</code> is -1.</p>
<p>Less golfed variation:</p>
<pre class="lang-c prettyprint-override"><code>int retFlag;
int test (int* a, int* b, int length) {
    int counter = 0;
    retFlag = !(length &amp; 1);
    for (int i = 0; i &lt; length; i++) {
        retFlag &amp;= counter &gt; 0 || (a[i] &gt; 0 &amp;&amp; b[i] &gt; 0);
        counter += a[i] + b[i];
    }
    retFlag &amp;= !counter;
}
</code></pre>
<p>Operating hypothesis: The strings can be swapped into both being balanced if and only if their length is even and both <code>F(A, B)</code> and <code>F(B, A)</code> are balanced, where <code>F(X, Y) := {X0, Y0, X1, Y1, X2, Y2, ...}</code>.</p>
<p>Incomplete argument in favor of hypothesis:</p>
<ul>
<li>First, a string cannot be balanced if it has an odd length, since it takes an even number of elements to have a sum of 0. (This avoids any tricky counterexample I could think of, like <code>(()</code> <code>())</code>.)</li>
<li>Second, the nth pair of <code>F</code> has a sum of 0 [<code>()</code>, <code>)(</code>], 2 [<code>((</code>], or -2 [<code>))</code>].
<ul>
<li>There must exist an even number of pairs of <code>F</code> that have a sum of 0 if <code>F(A, B)</code> and <code>F(B, A)</code> are balanced and <code>A</code> and <code>B</code> have an even length: each one occupies one position in <code>A</code> and <code>B</code>, and every pair of sum -2 has to have a pair of sum 2 to be balanced and vice versa, so there has to be another pair of sum 0 to ensure even length.</li>
</ul>
</li>
<li>So, if <code>F(A, B)</code> and <code>F(B, A)</code> are both balanced, but <code>A</code> and <code>B</code> are not yet balanced, there is a wiggle room of at least the size by which <code>A</code> and <code>B</code> are not balanced, and that wiggle room can be configured to have a total whose magnitude is from zero up to its size.</li>
</ul>
<p>A completion of this argument or a counterexample would be appreciated. I decided I had spent too long banging my head on the wall trying to construct a counterexample and trying to complete the proof. This does pass all of the test cases.</p>
<p>Reset edit: Previous program relied on caller manually setting internal variables. 3 bytes saved by @c--</p>
</div>
<div id="pu1" class="pu"><h1>JavaScript, <s>109</s> <s>107</s> ... 96 bytes</h1>
<p><em>Thanks to @Arnauld for saving 2 bytes</em></p>
<pre class="lang-javascript prettyprint-override"><code>b=(x,k=0n)=&gt;k&lt;0?0:x?b(x/4n,k+x%4n-2n):!k
f=(l,r,k=0n,x=k&amp;(r^l))=&gt;b(l^x)&amp;b(r^x)||k&lt;l&amp;&amp;f(l,r,++k)
</code></pre>
<p>returns <code>false</code> (for <code>false</code>) or <code>1</code> (for <code>true</code>).</p>
<p>Encodes expressions as base four numbers with <code>3</code> for <code>(</code> and <code>1</code>  for <code>)</code></p>
<p>Helper functions for converting strings to the corresponding base 4 numbers</p>
<pre class="lang-javascript prettyprint-override"><code>e=(s)=&gt;s?4n*e(s.slice(1))+(s[0]=='('?3n:1n):0n
h=(x,y)=&gt;f(e(x),e(y))

h(&quot;)))(((&quot;,&quot;((()))&quot;) // -&gt; false
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ddFRbsIgGAfw7JVbrIn1_61oUftgGllvsAssM0sdnQZCE5kJJt5kLz5sh9pOM9rqTLYKL8D_9wGB9w9bv6jj8XP3Vo3mX8-lhOdaCkvyXi9EIXJflPBpZrlO_CCzo6ml_FazSsLwbUu5lzrGdmkoFJUwS09xGeaeDge9MHFctTRJNLHunO-bB6YkXPCuyOydghs7s1kpTIgSuEfxJOUQw2Jm80k4T1i2bi62DwUVFDxxhT0RY6vautqosalfsUaEiEcUheDvOoUAvQlA1KVN7609C1wRIQ7ZSVAr0vS_6XY5Da6bC-pX-FVoW6O6Zz1_4w8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><em>I was unable to verify the last two Test-cases, as the function exceeded the maximum recursion depth (which as far as I known is allowed for code-golf)</em></p>
<h1>Explanation</h1>
<p><code>b</code> checks if a the expression encoded by the given number is balanced, by counting the difference of <code>3</code> digits minus <code>1</code> digits and returning 0 if the intermediate count goes below zero,
or if the final count is not exactly zero.</p>
<p><code>f</code> checks for all binary numbers <code>k</code> less than <code>l</code> (swapping the outer brackets cannot balance the expression) if swapping the bits of the two inputs at the positions that are one in <code>k</code> will result in a pair of balanced strings.
Swapping a bit has no effect if it is the low bit of a base 4 digit where both numbers have a <code>1</code> bit, if it is the high bit it will swap the characters that the given positions in the strings.</p>
<hr />
<h1>JavaScript, 112 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>b=(x,k=0n)=&gt;k&lt;0?0:x?b(x/4n,k+x%4n-2n):!k
f=(l,r)=&gt;{v=0;for(k=0n;k&lt;l;k++)v|=b(l^k&amp;(r^l))&amp;&amp;b(r^k&amp;(r^l));return v}
</code></pre>
<p>uses for-loop to prevent crash due to recursion limit</p>
<p><a href="https://ato.pxeger.com/run?1=dZFNTsMwEEbF1qeASKTfkLS4kAVKarLlDoguUhyKbDnIbqNUwEnYdAGHgtPgNI2QUGJvxn5vfmR_fJrqUe73X9tNOb35fikEmlgJbkjcqgXPedrkBZrLxMQqas4TM70ylJ4pVgro2HrrtRY8KyuLNitTC52pKKL6TRTQSxXCLjVRGBY-6E-ZlZutNaf1O-v6_pzcMSngfDmXJ-ZCws2cfl5JzIkiuHv-IMQEk_zapHPfnxu2bgfd-YQSEg3FEjsixlaVcZWWM109YY0AQRxQ4MH_e_IAgwQg6mi7B3N7AyOGx54dDRoxuhrHYMz4U4Yn6R0cVut0D9p_6C8" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 13 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ZŒpÄṂȯṪƊ€oṚ$Ạ
</code></pre>
<p>A monadic Link that accepts a pair of lists of <span class="math-container">\$\{1,-1\}\$</span> representing <code>(</code> and <code>)</code> respectively and yields <span class="math-container">\$0\$</span> if balancable or <span class="math-container">\$1\$</span> if not (i.e. outputs the inverse).</p>
<p><strong><a href="https://tio.run/##y0rNyan8/z/q6KSCwy0PdzadWP9w56pjXY@a1uQ/3DlL5eGuBf///4@ONtRR0AViKAXBsToK0RAxZNnYWAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/z/q6KSCwy0PdzadWP9w56pjXY@a1uQ/3DlL5eGuBf8f7t5yaOvDHZv8dbUeNcxJS8wpTn3UMBfILCkqBbEOt9tbA3kKNroKQJ61ZuT//xoKmlwamgoaQFJDQ1MTxAJBLhAB4mmAeUAmkKUAUQLigeQgFJQH44J0QvgaYAA2SQNkqgYA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<pre><code>ZŒpÄṂȯṪƊ€oṚ$Ạ - Link: pair of lists of -1 and 1 := ) and ( respectively
Z             - transpose
 Œp           - Cartesian product
   Ä          - cumulative sums (vectorises)
       Ɗ€     - for each: last three links as a monad:
      Ṫ       -   tail
    Ṃ         -   minimum (of the rest)
     ȯ        -   {minimum} logical OR {tail}
           $  - last two links as a monad:
          Ṛ   -   reverse
         o    -   logical OR (vectorises)
            Ạ - all?
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.rust-lang.org" rel="nofollow noreferrer">Rust</a>, <del>204</del> <del>179</del> <del>147</del> 132 bytes</h1>
<pre class="lang-rust prettyprint-override"><code>|a,b|a.into_iter().zip(b).fold((0,0,0),|(c,d,f),(mut e,mut g)|{(e,g)=(e.min(g)+d,e.max(g)+c);(e.min(g),g.max(e),f.min(c))})==(0,0,0)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jVJBbsIwEJR6a16x5GSr6wg4IWjoL3pBCBnHjiyFBCVOhUo4VOoveuHQPqGPoa-pQ0IgCEoTO96d3Zl4pfn4TPPMfE9cxmSgjU5iF8Htd_s9d7pjKoYF1zGhsHYiaUANVUyepXjUgzHWJ2XjeZJE4H_lRrHB7r3gOC-4p2OTzLSRKaHeq16SOfVUEgWEdNG-FAsiMEBFkSxyAxLLb0iLNZEYUp9Ib2F_HNKHAG3IV2Uo6KjBMdyjkqLaI4LSDfX9Wr26y8_d2wgcRyUpGJmZmeCZBB3DxLknL1J0Jr0pwj5gZaR4lFm9pojAmoZDYtK83VIt1uwWoaldpbM_-Lfo7IRYr4vsRvhsQNaqn1_gavVfKreVLqvdFDvOehzxRGZqnQr2WabWf1HcIS4XJufRENbDpw3I1VIKI4M6LV0BpSuq3FpfkcYpXtcTURJLQvFoH693AFto_zQ5NIycjbOpnLjdVucv" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>It is always safe to swap parenthesis so that the nesting level moves towards the median. <code>c,d</code> are the nesting levels. We guarentee that <code>c</code> has the lowest nesting level, so if we add the <em>highest</em> parenthesis value to it and add the <em>lowest</em> to <code>c</code> we go towards the middle.</p>
<p>Then all that remains is checking if we ever go negative. <code>f</code> the simply the lowest value <code>c</code> ever holds. We can check if it equals 0.</p>
<p>Uses <code>1</code> to represent an opening parenthesis and <code>-1</code> for closing. Slightly smarter now.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 165 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/263499/110802">@mousetail's Rust answer</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##rVRRS8NADH73VwSRkbBbWSsoDFtwPgnuafgkY9y6u1I529k7RTf622fasTl1HWVY6DWX5Eu@lCQ2lkau89mzih2MZJrB6gxgrjS88AVlkdgB3BaF/HwauyLNkgkN4DFLHYTsya4A79KAHgCO1evT8NOpiYCdSBBGMMxzo2TGiDVKMaMwQgnLdAEz8nRu5g9KuxqN95kTwAdNEPuiT0QrjMWSEbGnjXQjuVjpMGJfRO1N/e6SD8FSUEkBiZ022Gl9otLTqXGqwCSMEtZEYb/TYSFggY3qI7XO4jQMN0nX26qcsu5OWmWZepWzLhfqStH3XF6VSHW1iD2fvjVaGsvfQ/4Cfroes7nirTHKIWkP3Xw5lrMx2CkM28RtTdL/P4atCBzO6J9M70ihf5ulaleDV4R//kiDpSnEdWOIa2rfsgTdLrSj9RtyMEmdgzbLQ@cF4HbO4Kb3PXNUb6LqWfDecSZDe36x2pp5ikvYvwYlqI8FbzE1H/wwXJYCktxVSo17cAF7YCrPN7TKs@ot118" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>(a,b)=&gt;(a zip b).foldLeft(Seq[(Int, Int)]((0,0))){(c,z)=&gt;c.flatMap{f=&gt;Seq((f._1+z._1,f._2+z._2),(f._1+z._2,f._2+z._1))}.filter(g=&gt;g._1&gt;=0&amp;&amp;g._2&gt;=0)}.exists(_==(0,0))
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##rVRRa9swEH7Pr/goo9wR1cQutBCWwrqnwvpU@lRCUBLJeGh2ZqmjXfBvzyQncZ02DqbswZZO33133x062YU0crMp5j/VwuFeZjnWA2CpNH55g2SZ2jG@laV8fXpwZZanUx7jMc8cJrUn8Eca6DHoQf1@un11airQbBmTG9wWhVEy9wSSAvP6bEsFZPQ3W9GcI12Y5Q@lXR2G7nIn4H88JRqJETNjDVoILyzQd2RgEWkj3b1ceViHuA2CIIJIR7MYQ0/zq4C3kp2VsEAbTQ7QmLmJVEU6M06VlIYEaaDcTDDC@XkwktrYe1eResmsszTDxJc7Eh7aYtWgaZZT1n2XVlnfkSByxw2VUxy5InSOxVb/RcxvJ1oa69dj/r6YA9dTmCufO6Mc27XY3capnJ3BPqOwT9zeIuP/p7CXgOMZ40/LO1Hox8sS7rGhK6YPHelAukJcd4a45v5XljEcop@s95SjSeocvB0zXZSg/Zzh68XbzHHz9Kz8a@ZMTvbsy3oP@@Gu0DaTCupl5d9GtRwfAJeVQFq4cKipRRdokbk6209/@KrBZvMP" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def main(args: Array[String]): Unit = {
    val f: (Seq[Byte], Seq[Byte]) =&gt; Boolean = (a, b) =&gt; {
      a.zip(b).foldLeft(Seq[(Int, Int)]((0,0))) { (c, de) =&gt;
        c.flatMap { f =&gt; 
          Seq((f._1 + de._1, f._2 + de._2), (f._1 + de._2, f._2 + de._1))
        }.filter(g =&gt; g._1 &gt;= 0 &amp;&amp; g._2 &gt;= 0)
      }.exists(_ == (0, 0))
    }

    val testCases = Seq(
      (Seq(1.toByte), Seq((-1).toByte), false),
      (Seq(1.toByte, (-1).toByte), Seq(1.toByte, (-1).toByte), true),
      (Seq(1.toByte, 1.toByte, 1.toByte, (-1).toByte, (-1).toByte, (-1).toByte), Seq(1.toByte, (-1).toByte, 1.toByte, (-1).toByte, 1.toByte, (-1).toByte), true),
      (Seq(1.toByte, (-1).toByte, 1.toByte, (-1).toByte, (-1).toByte, (-1).toByte), Seq(1.toByte, 1.toByte, 1.toByte, (-1).toByte, 1.toByte, (-1).toByte), true),
      (Seq((-1).toByte, (-1).toByte, (-1).toByte, 1.toByte, 1.toByte, 1.toByte), Seq(1.toByte, 1.toByte, 1.toByte, (-1).toByte, (-1).toByte, (-1).toByte), false),
      (Seq.fill(6)((-1).toByte), Seq.fill(6)((-1).toByte), false),
      (Seq.fill(7)((-1).toByte), Seq.fill(7)((-1).toByte), false),
      (Seq(1.toByte) ++ Seq.fill(6)((-1).toByte), Seq.fill(6)(1.toByte) ++ Seq((-1).toByte), false)
    )

    for (testCase &lt;- testCases) {
      println(s&quot;${testCase._1} ${testCase._2} expected: ${testCase._3}, got: ${f(testCase._1, testCase._2)}&quot;)
    }
  }
}

</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/263496/">263496</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




