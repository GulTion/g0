<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::265857</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>061</td><td>Charcoal</td><td>231008T190055Z</td><td><a href="https://codegolf.stackexchange.com/questions/265857/random-factorized-numbers/265864#265864">Neil</a></td></tr>
<tr d-ix="1"><td>nan</td><td></td><td>231008T143034Z</td><td><a href="https://codegolf.stackexchange.com/questions/265857/random-factorized-numbers/265862#265862">Command </a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 61 bytes, score 0</h1>
<pre><code>≔Ｘ²ＮθＷ¹«≔⟦⊕‽⊖θ⟧υＷ⊖⌊υ⊞υ⊕‽⌊υ≔Φυ▷”8±cGＮºb6﹪←”κυ¿∧‹Πυθ‹‽θΠυＩ⊞ＯυΠυ
</code></pre>
<p>Don't <a href="https://tio.run/##ZY9LawJBEITP7q8YPPXAKCaQkyeJEYQ8lhxyCTlMdlu3yTzWeSgS8tsnM8uChhy7u6q@6qaTrrFSpbTynvYGantCB7eCbU0fw3PUn3nkXLADX1anjhQyuOHsu5qMhvetaRxqNAFbeJWmtRrWeFkdOOcfgsVsn4z@6/MTGdJRQ8wyVkffQSzsf5HXuhI10jekQi6YPQ9Hqd6kg6k/6/48J9870jgV7Ku0H/C0Y7AyLTyi91A728Ym5MDym2DDcoSV@XIfmjkyAe6lD1BKvvToZLAD@I9wWf2kdLdYpNlR/QI" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a>; the version of Charcoal on TIO returns <code>None</code> for the product of an empty list while the version of Charcoal on ATO doesn't have access to <code>sympy.isprime</code>, and neither platform makes it easy to output the results when timing Charcoal out. Explanation: Uses Kalai's inefficient algorithm.</p>
<pre><code>≔Ｘ²Ｎθ
</code></pre>
<p>Get <code>2ⁿ</code>.</p>
<pre><code>Ｗ¹«
</code></pre>
<p>Repeat forever.</p>
<pre><code>≔⟦⊕‽⊖θ⟧υ
</code></pre>
<p>Start with a random integer between <code>0</code> and <code>2ⁿ</code> exclusive.</p>
<pre><code>Ｗ⊖⌊υ
</code></pre>
<p>Until a <code>1</code> is generated...</p>
<pre><code>⊞υ⊕‽⌊υ
</code></pre>
<p>... push a random integer between <code>1</code> and the previous integer to the list.</p>
<pre><code>≔Φυ▷”8±cGＮºb6﹪←”κυ
</code></pre>
<p>Filter out all non-primes from the list.</p>
<pre><code>¿∧‹Πυθ‹‽θΠυ«
</code></pre>
<p>If the product is less than <code>2ⁿ</code> and passes a random chance, then...</p>
<pre><code>Ｉ⊞ＯυΠυ
</code></pre>
<p>... output the primes and their product.</p>
<p>64 bytes for a version that finds one factorisation and exits:</p>
<pre><code>⊞υＸ²Ｎ≔⊖⌈υθＷ∨›Πυθ›‽θΠυ«≔⟦⊕‽θ⟧υＷ⊖⌊υ⊞υ⊕‽⌊υ≔Φυ▷”8±cGＮºb6﹪←”κυ»Ｉ⊞ＯυΠυ
</code></pre>
<p><a href="https://tio.run/##bY9NSwMxEIbP3V8ReppAWorgqSfRKj1oFw9exEPcHbqh@dhOktYi/vaYyK61YG4ZnneeeZtOUuOkTqmOvoMoWO2OSHAl2Nr2MTxF856/nPNldeO92lq4w4bQoA3YwqP8UCYaiJwLts/MsVMaGWwIHghlyNGaXBubkJFCCDbOn6VtnYEyOiP5sc9qMphe1/as@uX5m2AxqyaD6@IeZcd7OBsb/bPlL1dWDcJ7pctpObM6SP0iCab@ZPrTXPmelMGpYLvStOi/qpqUDXArfYCi2vRIMrif@EWjZUrXi0WaHfQ3" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Still usually crashes out because it can't calculate the product of an empty list, and even when it does find a result, it usually takes more than 10 seconds, but just in case, here's a bash script that restarts the program on error and times out after 10 seconds:
<a href="https://tio.run/##S0oszvj/vyQzNzW/tERBt1jBIzRAwdBAIQksXp6RmZOqYMWVkq@gn19Qop@ckViUnJ@YA2co6CYrqD/qmne@9f2eHYc2vd@z7lHnlEdd0x71dJxvPbfj/Z7tjzpWPGrYdW4BiAtkPGrYe24HiHdoNUjl/GWPuqaCxR7NXw4yZDtYc9f5VrChEEkIv3PKuWVAatr2Rw1zLQ5tTHYHWnZoV5LZ@52rHrVNAAqe2wU0dff7PSuBWt/vWQ@0EGiNuoJupoKpgYGCkZ1@SmqZfl5pTo6CmppCanJGPowGei8vFQA" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a></h1>
<pre class="lang-python prettyprint-override"><code>import math
import random
import time

import sympy


def gen_factor(N):
    while True:
        j = random.randint(1, N.bit_length()-1)
        q = (1 &lt;&lt; j) + random.randrange(1 &lt;&lt; j)
        if q &gt; N:
            continue
        p, a = sympy.perfect_power(q) or (q, 1)
        if not sympy.isprime(p):
            continue
        Nt = N // q
        if random.random() * N &lt; math.log(p, N) * (((Nt + 1) &gt;&gt; 1) &lt;&lt; j):
            return p, a, Nt


def bach(N):
    if N &lt;= 10 ** 5:
        x = random.randint(N//2 + 1, N)
        return x, sympy.factorint(x)
    while True:
        p, a, Nt = gen_factor(N)
        newx, factx = bach(Nt)
        newx *= p ** a
        if random.random() &lt; math.log(N / 2, newx):
            factx[p] = factx.get(p, 0) + a
            return newx, factx


def gen(n):
    return bach((1 &lt;&lt; n) - 1)


if __name__ == '__main__':
    t = time.perf_counter()
    a = []
    while time.perf_counter() - t &lt; 10:
        a.append(gen(500))

    print('Generated', len(a), 'numbers in 10 seconds:')
    print(*a, sep='\n')
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=hVS9btswEF466SluikhFUewAAYLA8tpNU7c0IBj7ZCuwSJqiYPtZumRpH6pP0yMlWXKStgRs8ee---6-O_LHL3NyW63e3n62rrx5-P3lqqqNtg5q6bZRP7dSrXU9rFxVYzQsmlNtTlEUrbGEDSpRypXTlhX8MQIah221Q_hmW-zWfrxC3nvM_KdSjs3TwJeVO03gMN3pzR254fyM2xOOzWGxgFcO11MX9NvgcHS2r0qCLKEYmf1YaeUq1eJ506QgyXNIJDNoS1w5YfQBLdtz0BbYPoX5hVul-8SzqjGW5GCG_4elcMRRwO0t7KeeJknomnFIyGYBgwCeufCbjDFycE1hwHLp_0Oml5QWXWtVSIdQrq_Ji1xtz9UgQnKfw3wGSQL3I_74sSSsGPl8FNE7nmPaS9BV3EOO_K81H6IinosuORsoPJBHv-9j6aJ2l8eQ5GB84PJfCk7UI7nhLg3Yd1oFnifzTFRhmm3QMYpx5htLfibrJL6x25nq_fZGIeyuDxWHG981dFFKEELJGoWAPIdYiFpWSoi4g3pJ_I0KrSdWulWOOq_L3Pfl0_NE1E8MicZR0vPZmKHMpDGo1syHeD-b0R0KZyZUKf6KCq10uI5T2JGF5CnEqq1f0DZQKd8dDVIDr5vHmE-ACVWwQZPH31XMu-eifzWG1-MP" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This is a simple implementation of <a href="https://en.wikipedia.org/wiki/Bach%27s_algorithm" rel="nofollow noreferrer">Bach's algorithm</a>, just to get the challenge going. Make sure you have <code>gmpy2</code> installed when running. Can generate around <span class="math-container">\$130\$</span> numbers on my computer.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/265857/">265857</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




