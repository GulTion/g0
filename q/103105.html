<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::103105</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>040</td><td>Raku Perl 6 rakudo</td><td>161215T041321Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103219#103219">bb94</a></td></tr>
<tr d-ix="1"><td>4411</td><td>MMIX</td><td>210603T214526Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/226887#226887">NoLonger</a></td></tr>
<tr d-ix="2"><td>123</td><td>Excel</td><td>171113T160839Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/147926#147926">Wernisch</a></td></tr>
<tr d-ix="3"><td>030</td><td>Dyalog APL</td><td>161213T235220Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103113#103113">Adalynn</a></td></tr>
<tr d-ix="4"><td>050</td><td>R</td><td>161214T130747Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103162#103162">rturnbul</a></td></tr>
<tr d-ix="5"><td>079</td><td>Lithp</td><td>161218T142834Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103551#103551">Andrakis</a></td></tr>
<tr d-ix="6"><td>056</td><td>BrainFlak</td><td>161215T035152Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103217#103217">0							</a></td></tr>
<tr d-ix="7"><td>007</td><td>Oasis</td><td>161214T113242Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103154#103154">Luis Men</a></td></tr>
<tr d-ix="8"><td>051</td><td>Python</td><td>161214T103931Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103149#103149">user4594</a></td></tr>
<tr d-ix="9"><td>019</td><td>CJam</td><td>161214T130033Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103161#103161">Peter Ta</a></td></tr>
<tr d-ix="10"><td>040</td><td>Mathematica</td><td>161214T080447Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103134#103134">Martin E</a></td></tr>
<tr d-ix="11"><td>062</td><td>Python with Numpy</td><td>161214T124505Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103158#103158">Tim Pede</a></td></tr>
<tr d-ix="12"><td>008</td><td>Oasis</td><td>161214T102613Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103148#103148">Emigna</a></td></tr>
<tr d-ix="13"><td>014</td><td>MATL</td><td>161213T234051Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103111#103111">Luis Men</a></td></tr>
<tr d-ix="14"><td>010</td><td>Jelly</td><td>161214T102321Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103147#103147">PurkkaKo</a></td></tr>
<tr d-ix="15"><td>051</td><td>Ruby</td><td>161214T021856Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103121#103121">Level Ri</a></td></tr>
<tr d-ix="16"><td>048</td><td>Mathematica</td><td>161214T001345Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103114#103114">user6198</a></td></tr>
<tr d-ix="17"><td>062</td><td>Ruby</td><td>161214T011647Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103118#103118">Level Ri</a></td></tr>
<tr d-ix="18"><td>029</td><td>Dyalog APL</td><td>161214T011024Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103117#103117">Adalynn</a></td></tr>
<tr d-ix="19"><td>010</td><td>MATL</td><td>161213T234944Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103112#103112">Luis Men</a></td></tr>
<tr d-ix="20"><td>016</td><td>Pyth</td><td>161213T230808Z</td><td><a href="https://codegolf.stackexchange.com/questions/103105/number-of-straight-chain-alknes-of-given-length/103108#103108">Maltysen</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://raku.org" rel="nofollow noreferrer">Raku (Perl 6) (rakudo)</a>, <s>48</s> 40 bytes</h1>
<pre class="lang-perl prettyprint-override"><code>{((1,0,0),{reverse [\+] @$_}...*)[$_;0]}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kKDG7dMFNq9xKBbU0BVsuZYVqINMh0dZQx0DHwBrIKEotSy0qTlWIjtGOBUoopOUXKRjq6anEAyWjDWJrl5aWpOla3NSo1tAA69HUqUbVohJfq6enp6UZDdSCUK9izQU1ydBAoZpLQaE4sVJBSSVewdZOoTpNAahJiQuqdsECCA0A" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1>MMIX, 44 bytes (11 instrs)</h1>
<p>If passed 0, returns <span class="math-container">\$A077998(2^{64})\$</span> (if the computer doesn't break down).</p>
<p>Works mod <span class="math-container">\$2^{64}\$</span>.</p>
<p>(jxd)</p>
<pre><code>00000000: e3010001 e3020001 e3030003 27000001  ẉ¢¡¢ẉ£¡¢ẉ¤¡¤'¡¡¢
00000010: 28ff0302 26ffff01 c1010200 c1020300  (”¤£&amp;””¢Ḋ¢£¡Ḋ£¤¡
00000020: c103ff00 5b00ffb5 f8020000           Ḋ¤”¡[¡”Ọẏ£¡¡
</code></pre>
<p>Disassembly and explanation:</p>
<pre><code>alkns   SET   $1,1          // a(0)
        SET   $2,1          // a(1)
        SET   $3,3          // a(2)
0H      SUBU  $0,$0,1       // loop: n--
        2ADDU $255,$3,$2    // a' = 2a + a`
        SUBU  $255,$255,$1  // - a``
        SET   $1,$2         // a`` = a`
        SET   $2,$3         // a` = a
        SET   $3,$255       // a = a'
        PBNZ  $0,0B         // if(n) goto loop
        POP   2,0           // return a
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Excel, 123 bytes</h1>

<p>Implements the formula from OEIS:</p>

<pre><code>=4*(SIN(4*PI()/7)^2*(1+2*COS(2*PI()/7))^A1+SIN(8*PI()/7)^2*(1+2*COS(4*PI()/7))^A1+SIN(2*PI()/7)^2*(1+2*COS(8*PI()/7))^A1)/7
</code></pre>

<p>As always, input in <code>A1</code>, formula in any other cell.</p>

<p>Dug up old Trig identities to see if could be helpful.  Now my head hurts.</p>
</div>
<div id="pu3" class="pu"><h1>Dyalog APL, 30 bytes</h1>

<pre><code>{⍵&lt;3:⍵⌷1 3⋄+/∧/¨4≥2+/¨,⍳1↓⍵/3}
</code></pre>

<p>Uses brute force.
Explanation (my best attempt at one, at least):</p>

<pre><code>⍵&lt;3:⍵⌷1 3 - if ⍵ (function arg) is 1 (case 1) or 2 (case 2), return 1 (case 1) or 3 (case 2)
⋄ - separate statements
⍵/3 - otherwise, 3 repeated ⍵ times
1↓ - without the first element
⍳ - the matrix of possible indices of a matrix of that size
,  - ravel, return a list of all the elements of the matrix
2+/¨ - sum of each contiguous pair on each element
4≥ - tests whether each element is less than or equal to 4
∧/¨ - all elements are true, applied to each item.
+/ - Sum.
</code></pre>
</div>
<div id="pu4" class="pu"><h1>R, <s>61</s> <s>58</s> <s>55</s> <s>51</s> 50 bytes</h1>

<p>Takes input from stdin, uses matrix exponentiation to determine exact result.</p>

<pre><code>el(expm::`%^%`(matrix(!-3:5%in%2^(0:2),3),scan()))
</code></pre>

<p>If you prefer a recursive solution, here's a straightforward implementation of the recurrence relation listed in OEIS, for <strong>55 bytes</strong>.</p>

<pre><code>f=function(n)`if`(n&lt;4,(n*n+n)/2,2*f(n-1)+f(n-2)-f(n-3))
</code></pre>
</div>
<div id="pu5" class="pu"><h2><a href="https://github.com/andrakis/node-lithp" rel="nofollow noreferrer">Lithp</a>, 79 bytes</h2>
<pre><code>#N:(((if(&lt; N 4)((/(+ N(* N N))2))((-(+(* 2(f(- N 1)))(f(- N 2)))(f(- N 3)))))))
</code></pre>
<p>Implements recursive integer sequence listed in OEIS.</p>
<p>Readable implementation and test suite.</p>
<pre><code>% alkaline.lithp
% run with: ./run.js alkaline.lithp
(
    (def f #N : ((
        (if (&lt; N 4) (
            (/ (+ N (* N N)) 2)
        ) (else (
            (- (+ (* 2 (f (- N 1))) (f (- N 2))) (f (- N 3)))
        )))
    )))

    % Test cases 1 to 4
    (import lists)
    (each (seq 1 4) #I :: ((print (f I))))
)
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Brain-Flak, 56 bytes</h1>

<p>Uses the algorithm detailed in the first comment on the OEIS page.</p>

<p><a href="http://brain-flak.tryitonline.net/#code=KHt9WygpXTwoKCgoKSkpKT4peyh7fVsoKV08eyh7fTw-KHt9KSk8Pn08Pj4pfXt9KHt9PD57fSk&amp;input=NQ" rel="nofollow noreferrer">Try it online!</a></p>

<pre><code>({}[()]&lt;(((())))&gt;){({}[()]&lt;{({}&lt;&gt;({}))&lt;&gt;}&lt;&gt;&gt;)}{}({}&lt;&gt;{})
</code></pre>

<h2>Explanation</h2>

<p>The sequence can be defined as such:</p>

<pre><code>For u(k), v(k), and w(k) such that
u(1) = v(1) = w(1) = 1
u(k+1) = u(k) + v(k) + w(k)
v(k+1) = u(k) + v(k)
w(k+1) = u(k)
u(k) is the number of straight-chain alk*nes with length k
</code></pre>

<p>The program starts at <code>1</code> and repeatedly applies this recurrence to calculate <code>u(k)</code></p>

<h3>Annotated Code (actual annotation to come)</h3>

<pre><code># Setup: decrement the input by one and push three 1's to the stack under it
({}[()]&lt;(((())))&gt;)

# Calculation:
{                          }           # While the input is not zero (main loop)
 ({}[()]                  )            # Pop the counter decrement it by one and push it
        &lt;                &gt;             # Before the counter gets pushed back to the stack...
         {            }                # Loop while the top of the stack is not zero (subloop)
          (        )                   # Push...
           {}                          # The top of the stack (popped)...
             &lt;&gt;                        # to the other stack...
               ({})                    # plus the top of the other stack (peeked)
                    &lt;&gt;                 # Switch back to the first stack.
                       &lt;&gt;              # Switch to the other stack
                            {}         # Pop the input (now zero)
                              (      ) # Push...
                               {}      # The top of the stack (u(k))...
                                 &lt;&gt;    # to the other stack...
                                   {}  # plus the top of the other stack (zero).
</code></pre>

<h3>Visualization of the stacks</h3>

<p>In one iteration of the main loop this is what happens (note that the zeros may or may not be present but it does not matter either way):</p>

<pre><code>Start of main loop iteration/subloop first iteration:
A    B

u
v
w
0    0
^

After first subloop iteration:
A    B

v
w    u
0    0
^

After second subloop iteration:
A    B

    u+v
w    u
0    0
^

After third subloop iteration (top of stack is zero so subloop terminates):

A    B

   u+v+w
    u+v
     u
0    0
^

End of main loop iteration:
A    B

   u+v+w
    u+v
     u
0    0
     ^
</code></pre>

<p>The state of the stacks is now the same as it was at the start of the loop except that the current stack now has the next values for <code>u</code>, <code>v</code>, and <code>w</code> on it.</p>
</div>
<div id="pu7" class="pu"><h1><a href="http://github.com/Adriandmen/Oasis" rel="noreferrer">Oasis</a>, <s>9</s> 7 bytes</h1>
<pre><code>xcd-+3V
</code></pre>
<p><a href="http://oasis.tryitonline.net/#code=eGNkLSszVg&amp;input=&amp;args=NA" rel="noreferrer">Try it online!</a></p>
<h3>Explanation</h3>
<p>This uses the recurrence relationship in <a href="http://oeis.org/A006356" rel="noreferrer">OEIS</a>:</p>
<blockquote>
<p>a(n) = 2*a(n-1) + a(n-2) - a(n-3)</p>
</blockquote>
<pre><code>x    Multiply a(n-1) by 2: gives 2*a(n-1)
c    Push a(n-2)
d    Push a(n-3)
-    Subtract: gives a(n-2) - a(n-3)
+    Add: gives 2*a(n-1) + a(n-2) - a(n-3)
3    Push 3: initial value for a(n-1)
V    Push 1, 1: initial values for a(n-2), a(n-3)
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Python, 51 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n:n&lt;4and(n*n+n)/2or 2*f(n-1)+f(n-2)-f(n-3)
</code></pre>

<p>This is a straightforward implementation of the recurrence relation. Thanks to Tim Pederick for 3 bytes. The output is a float in Python 3 and an integer in Python 2.</p>

<p><a href="https://tio.run/nexus/python3#FYtLDoMwDET3PYXFyuZTRFo2UXsYVxAUCaYooivE2VNn9UYzb3J4r7p9JiV4vJ6KiVGjgfTum8jVgdEN0hQ46QoekoNNkSIoKZaZh9bywRH772AR8TeiPZWqOi9P51Xd7bGpKS0Fjqbk8Q8" rel="nofollow noreferrer" title="Python 3 – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h2>CJam (19 bytes)</h2>

<pre><code>{2,{__-2=+1b+}@*W=}
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=10%2C%0A%0A%7B2%2C%7B__-2%3D%2B1b%2B%7D%40*W%3D%7D%0A%0A%25p" rel="nofollow noreferrer">Online test suite</a>. This is an anonymous block (function) which takes one item on the stack and leaves one on the stack. Note that the test suite includes <code>a(0) = 1</code>.</p>

<p>The recurrence used is based on the observation for the related OEIS sequence <a href="//oeis.org/A006356" rel="nofollow noreferrer">A006356</a>:</p>

<blockquote>
  <p>Equals the INVERT transform of (1, 2, 1, 1, 1,...) equivalent to a(n) = a(n-1) + 2*a(n-2) + a(n-3) + a(n-4) + ... + 1. a(6) = 70 = (31 + 2*14 + 6 + 3 + 1 + 1). - Gary W. Adamson, Apr 27 2009</p>
</blockquote>

<p>but with the appropriate offset, which removes the need for the final <code>+ 1</code> as now covered by <code>a(0)</code>.</p>

<h3>Dissection</h3>

<pre><code>{         e# Define a block
  2,      e#   Take starting sequence [0 1] (beginning at index -1 for golfiness)
  {       e#   Loop...
    _     e#     Copy sequence so far
    _-2=+ e#     Append an extra copy of a(n-2)
    1b    e#     Sum
    +     e#     Append
  }@*     e#   ...n times
  W=      e#   Take the final value from the sequence
}
</code></pre>
</div>
<div id="pu10" class="pu"><h2>Mathematica, <s>42</s> 40 bytes</h2>

<p>Byte count assumes a compatible single-byte encoding like CP-1252 (the default on Windows installations).</p>

<pre><code>±0=±1=1;±2=3;±n_:=±(n-1)2+±(n-2)-±(n-3);
</code></pre>

<p>This simply implements the recurrence given on OEIS as a unary operator.</p>
</div>
<div id="pu11" class="pu"><h1>Python with Numpy, 62 bytes</h1>

<p>I had to try it, but it seems <a href="https://codegolf.stackexchange.com/a/103149/13959">pure Python and recursion</a> is shorter than numpy and the explicit, matrix-based calculation on the OEIS page.</p>

<pre class="lang-py prettyprint-override"><code>from numpy import*
lambda n:(mat('1 1 1;1 0 0;1 0 1')**n)[0,0]
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="http://github.com/Adriandmen/Oasis" rel="nofollow noreferrer">Oasis</a>, <s>9</s> 8 bytes</h1>

<p>Saved a byte thanks to <em>Adnan</em></p>

<pre><code>xc+d-63T
</code></pre>

<p><a href="http://oasis.tryitonline.net/#code=eGMrZC02M1Q&amp;input=&amp;args=NA" rel="nofollow noreferrer">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<pre><code>a(0) = 0
a(1) = 1
a(2) = 3
a(3) = 6

a(n) = xc+d-

x         # calculate 2*a(n-1)
 c        # calculate a(n-2)
  +       # add: 2*a(n-1) + a(n-2)
   d      # calculate a(n-3)
    -     # subtract: 2*a(n-1) + a(n-2) - a(n-3)
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="http://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 14 bytes</h1>
<pre><code>q3:Z^TTZ+!5&lt;As
</code></pre>
<p><a href="http://matl.tryitonline.net/#code=cTM6Wl5UVForNTwhQXM&amp;input=NA" rel="nofollow noreferrer">Try it online!</a></p>
<h3>Explanation</h3>
<p>This generates the Cartesian power of <code>[1 2 3]</code> &quot;raised&quot; to the number of atoms minus 1, and then uses convolution to check that no two contiguous numbers in each Cartesian tuple sum more than <code>4</code>.</p>
<pre><code>q    % Take number of atoms n implicitly
3:   % Push [1 2 3]
Z^   % Cartesian power. Gives a matrix with each (n-1)-tuple on a row
TT   % Push [1 1]
Z+   % 2D convolution. For each tuple this gives the sum of contiguous numbers
5&lt;   % For each entry, gives true if less than 5
!    % Transpose
A    % True if all elements of each column are true. Gives a row vector
s    % Sum of true results. Implicitly display
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Jelly, 10 bytes</h1>
<pre><code>745DBæ*µḢḢ
</code></pre>
<p><a href="https://tio.run/nexus/jelly#@29uYuridHiZ1qGtD3csAqL///@bAAA" rel="nofollow noreferrer">Try it online!</a></p>
<p>Uses <a href="https://codegolf.stackexchange.com/a/103112/30164">Luis Mendo's algorithm</a>.</p>
<h3>Explanation</h3>
<pre><code>745DBæ*µḢḢ    Main link. Argument: n
745D          Get the digits of 745
    B         Convert each to binary
     æ*       Matrix power
        ḢḢ    First element of first row
</code></pre>
<h2>Jelly, 15 bytes</h2>
<pre><code>3Rṗ’µ+2\&lt;5PµÐfL
</code></pre>
<p><a href="https://tio.run/nexus/jelly#ARsA5P//M1LhuZfigJnCtSsyXDw1UMK1w5BmTP///zQ" rel="nofollow noreferrer">Try it online!</a></p>
<p>Uses brute force.</p>
<h3>Explanation</h3>
<pre><code>3Rṗ’µ+2\&lt;5PµÐfL    Main link. Argument: n
3R                 Start with [1, 2, 3]
   ’               Take the (n-1)'th
  ṗ                Cartesian power
            Ðf     Filter on:
     +2\             Sums of overlapping pairs
        &lt;5           1 for sums &lt; 5, 0 otherwise
          P          Product: 1 if all pairs &lt; 5
              L    Length
</code></pre>
</div>
<div id="pu15" class="pu"><h1>Ruby, 51 bytes</h1>
<pre><code>-&gt;n{a=[1,1,3]
n.times{a&lt;&lt;2*a[-1]+a[-2]-a[-3]}
a[n]}
</code></pre>
<p>Based on the recurrence relation per OEIS A006356.</p>
<p>Starts with an array for elements 0,1 and 2 of the sequence which are 1 (as calculated by me, to make it work), 1 and 3 respectively.</p>
<p>Iteratively adds <code>n</code> more elements to the sequence, then returns element <code>n</code>. It always calculates 2 elements more than it actually needs to, but it's still linear time, which is way more efficient than my previous answer.</p>
<p><strong>in test program</strong></p>
<pre><code>f=-&gt;n{a=[1,1,3]
n.times{a&lt;&lt;2*a[-1]+a[-2]-a[-3]}
a[n]}

p f[gets.to_i]
</code></pre>
</div>
<div id="pu16" class="pu"><h2>Mathematica, 48 bytes</h2>

<pre><code>MatrixPower[{{1,1,1},{1,0,0},{1,0,1}},#][[1,1]]&amp;
</code></pre>

<p>As <a href="https://codegolf.stackexchange.com/a/103112/61980">Luis Mendo pointed out</a>, this is <a href="http://oeis.org/A006356" rel="nofollow noreferrer">A006356</a> in the OEIS. Here are my original attempts:</p>

<pre><code>Count[Length@Split[#,+##&lt;5&amp;]&amp;/@Tuples[{1,2,3},#-1],0|1]&amp;
</code></pre>

<p>For an input <code>n</code>, <code>Tuples[{1,2,3},n-1]</code> is the list of all <code>(n-1)</code>-tuples of elements in <code>{1,2,3}</code> representing all possible sequences of single, double, or triple bonds for <code>n</code> carbon atoms. <code>+##&lt;5&amp;</code> is a pure function which returns whether the sum of its arguments is less than <code>5</code>, so <code>Split[#,+##&lt;5&amp;]&amp;</code> splits a list into sublists consisting of consecutive elements whose pairwise sums are less than <code>5</code>. Describing a valid alk*ne is equivalent to this list having length <code>0</code> (in the case where <code>n=1</code>) or <code>1</code>, so I just <code>Count</code> the number of <code>(n-1)</code>-tuples where the length of that list matches <code>0|1</code>.</p>

<pre><code>Count[Fold[If[+##&gt;4,4,#2]&amp;]/@Tuples[{1,2,3},#-1],Except@4]&amp;
</code></pre>

<p><code>If[+##&gt;4,4,#2]&amp;</code> returns <code>4</code> if the sum of its arguments is greater than <code>4</code> and returns the second argument otherwise. <code>Fold[If[+##&gt;4,4,#2]&amp;]</code> does a left <a href="http://reference.wolfram.com/language/ref/Fold.html" rel="nofollow noreferrer"><code>Fold</code></a> of its input with this function. So here I <code>Count</code> the number of <code>(n-1)</code>-tuples to which applying this operator doesn't give <code>4</code>. The case where <code>n=1</code> is covered since <code>Fold</code> remains unevaluated when its second argument is the empty list <code>{}</code>.</p>
</div>
<div id="pu17" class="pu"><h1>Ruby, 62 bytes</h1>
<pre><code>-&gt;n{c=0
(10**n/10).times{|i|&quot;#{i}#{i*11}&quot;=~/[3-9]/||c+=1}
c}
</code></pre>
<p>Horribly inefficient base 10 brute force approach. Could be improved to base 5 for additional bytes.</p>
<p>Numbers are generated where each digit represents a bond (n-1 digits.) <code>0</code> represents a bond order of 1, <code>2</code> represents a bond order of 3. Digits over 2 are invalid.</p>
<p>We multiply this by 11 to sum adjacent pair of digits. Again digits over 3 are invalid.</p>
<p>We combine the two numbers in a string and perform a regex to search for invalid digits. If none are found, we increment the counter.</p>
<p><strong>in test program</strong></p>
<pre><code>f=-&gt;n{c=0
(10**n/10).times{|i|&quot;#{i}#{i*11}&quot;=~/[3-9]/||c+=1}
c}

p f[gets.to_i]
</code></pre>
</div>
<div id="pu18" class="pu"><h1>Dyalog APL, 29 bytes</h1>

<pre><code>{⍵&lt;4:⍵⌷1 3 6⋄+/2 1 ¯1×∇¨⍵-⍳3}
</code></pre>

<p>Works by using the recursive definition of the integer sequence OEIS A006356.</p>
</div>
<div id="pu19" class="pu"><h1><a href="http://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, 10 bytes</h1>
<pre><code>7K5vBiY^1)
</code></pre>
<p><a href="http://matl.tryitonline.net/#code=N0s1dkJpWV4xKQ&amp;input=NA" rel="noreferrer">Try it online!</a></p>
<h3>Explanation</h3>
<p>This uses the characterization found in <a href="http://oeis.org/A006356" rel="noreferrer">OEIS</a></p>
<blockquote>
<p>a(n) is the top left entry of the n-th power of the 3 X 3 matrix [1, 1, 1; 1, 0, 0; 1, 0, 1]</p>
</blockquote>
<pre><code>7    % Push 7
K    % Push 4
5    % Push 5
v    % Concatenate all numbers into a column vector: [7; 4; 5]
B    % Convert to binary: gives 3×3 matrix [1, 1, 1; 1, 0, 0; 1, 0, 1]
i    % Input n
Y^   % Matrix power
1)   % Take the first element of the resulting matrix, i.e. its upper-left corner.
     % Implicitly display
</code></pre>
</div>
<div id="pu20" class="pu"><h1>Pyth - 16 bytes</h1>
<p>Uses brute force.</p>
<pre><code>lf.AgL4+VTtT^S3t
</code></pre>
<p><a href="http://pyth.herokuapp.com/?code=lf.AgL4%2BVTtT%5ES3t&amp;test_suite=1&amp;test_suite_input=1%0A2%0A3%0A4&amp;debug=0" rel="nofollow noreferrer">Test Suite</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/103105/">103105</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




