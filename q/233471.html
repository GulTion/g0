<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::233471</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>178</td><td>K ngn/k</td><td>230903T110450Z</td><td><a href="https://codegolf.stackexchange.com/questions/233471/stack-the-rocks/264849#264849">doug</a></td></tr>
<tr d-ix="1"><td>112</td><td>Ruby</td><td>210817T210405Z</td><td><a href="https://codegolf.stackexchange.com/questions/233471/stack-the-rocks/233492#233492">Level Ri</a></td></tr>
<tr d-ix="2"><td>054</td><td>Charcoal</td><td>210819T195811Z</td><td><a href="https://codegolf.stackexchange.com/questions/233471/stack-the-rocks/233584#233584">Neil</a></td></tr>
<tr d-ix="3"><td>043</td><td>Jelly</td><td>210817T122902Z</td><td><a href="https://codegolf.stackexchange.com/questions/233471/stack-the-rocks/233485#233485">Nick Ken</a></td></tr>
<tr d-ix="4"><td>186</td><td>JavaScript ES7</td><td>210817T214714Z</td><td><a href="https://codegolf.stackexchange.com/questions/233471/stack-the-rocks/233495#233495">Arnauld</a></td></tr>
<tr d-ix="5"><td>056</td><td>05AB1E</td><td>210817T090437Z</td><td><a href="https://codegolf.stackexchange.com/questions/233471/stack-the-rocks/233478#233478">ovs</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 178 bytes</h1>
<pre><code>g:{r:,1+&amp;b:1+#**|x
  s:(#/:/|1(2*#*:)\)'x@&amp;b&gt;2*#'*:'x
  s:x@&amp;2!b+#'*:'x:s,x
 ?x,((,!0),0^@\:[;!b]'{(&amp;-2!x-#*y),/:y}[b]'s),\:r}
f:{*(x=+//')#({~(x=#**|:y)||/x=+//'y}[13])g/(,,,1)}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJwljsFuwyAQRO/+isVIhoWN8JK2aTZq6/+IU1U+JD3HFyxwv70kvs08zUjvJvkuxL6bhL12rqQGYBarg4TCNjrtBEc0aeimz9qME7NNKolq8huRmSr9SmQtqR6p/x5GOZ/UdDHZdruo0k67BSnIsp4rnJFGua/NVbKz6cOHYFDb/FfzQ0IWLCVsvB54f8FbsETEuDbN/Cv5pxcbNbUtUguuHcg8dDtTlK6+noKv7RnT82Gu5gUO8A5H4Ai8Bz4AHyH28Pp2+gdypD3J" rel="nofollow noreferrer">Try it online!</a></p>
<p>Recursively build up structures by placing either one or two smaller such structures on top of a base wide enough to accommodate them.</p>
<p>Could probably use a better heuristic for impossible answers.  Currently just iterates until the base is as wide as the target.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>124 117</s> 112 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;n{b=0
a=*a,&quot;* &quot;*b+=1while(n-=b)&gt;0||n==-2
~n%2*n&lt;0&amp;&amp;a[2][2]=' '
a.map{|j|q=n/2&lt;0?2:0;n+=2;j[q..~q].center b*2}}
</code></pre>
<p><a href="https://tio.run/##Tc/NCoJAEMDxu08hQlZr2s70nY09iHjYDaOkliwjIu3VLah2gjn8hjn8mfNV39sttWFiHpqko0iogSdcT@iA4LbbH/KeCUn3E1nXhihE52k6KMxK@r5KMXsPdd2uo6KjOj3qoi7JDHEl17iUsQkI4yIto@hZZtEmN1V@drXApmlP1@riblPInK/wo986soex1cRqajWzmlstrEAyOQXI5A5wCLgEnAJuAceAa8g1/HsMs/YF" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>Incorporated ideas from dingus and G B, and also removed the deletion loop completely by using the output loop to perform its function (it truncates the first and last <code>*</code> rather than overwriting them).</p>
<h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>163</s> 137 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;n{a=[];b=x=0
(a&lt;&lt;&quot;* &quot;*b+=1)while(x+=b)&lt;n||2==c=x-n
(-~c/2).times{|i|a[i][0]=a[i][-2]=' '}
~c%2*c&gt;0&amp;&amp;a[2][2]=' '
a.map{|j|j.center b*2}}
</code></pre>
<p><a href="https://tio.run/##Tc9LboMwEIDhvU@BIiU8IigzbfNQmFzE8sK2iAIqKEqIQoTh6lRqWk9X/mZm8cvXu3nOJ5rTYztokupgqKdcRLooFkmwSMyaIH6cq68y6tdk4qJ1Doks9WkronSybxhnXdWUt8FVTstKyVzRz5uiojAIRzHZJSb2mK9WWqKSr7XQWaMvg6tdndmy7cprYBIcx/ly727BSYISv8KX/sZ3f/jw@vTaeG29dl57L8iZnAJkcgc4BFwCTgG3gGPANeQa/vsYqvkb" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>This is a fast algorithm with no searching.</p>
<p><strong>Explanation</strong></p>
<p>Where <code>T</code> is a triangular number greater than the input, the only solution for <code>T-1</code> is to delete the top <code>*</code> and the only solution for <code>T-4</code> is to delete the top two rows and the <code>*</code> from the middle of the next row, forming a diamond shape.</p>
<p>For <code>T-1-2n</code> or <code>T-4-2n</code> a possible solution is to also delete the <code>*</code> at the beginning and the end of each row. In practice there are always enough asterisks to delete; If you run out it means that there is a triangular number smaller than <code>T</code> which would give a smaller base (This is fairly easy to prove so I'll not explain here.)</p>
<p>For <code>T-2</code> there is no solution and we are forced to use a triangle with the next larger base.</p>
<p>See examples below for odd and even numbers of deletions (numbers represent the number of deletions <code>O</code> not the number of <code>*</code>).</p>
<pre class="lang-ruby prettyprint-override"><code>            1                  3                  7 
            O                  O                  O
           * *                O O                O O
          * * *              * * *              O * O
         * * * *            * * * *            O * * O 
        * * * * *          * * * * *          * * * * * 

            4                  6                  8 
            O                  O                  O
           O O                O O                O O
          * O *              O O O              O O O
         * * * *            * * * *            O * * O 
        * * * * *          * * * * *          * * * * * 
</code></pre>
<p><strong>Commented code</strong></p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;n{a=[];b=x=0                         #a[] = empty array for solution;b = base size; x = asterisk count
(a&lt;&lt;&quot;* &quot;*b+=1)while(x+=b)&lt;n||2==c=x-n  #Add rows to a while asterisk count is below n, or the count is exactly 2 above n. Save the difference between the count and the required in c
(-~c/2).times{|i|a[i][0]=a[i][-2]=' '} #Overwrite the excess asterisks with spaces by looping (c+1)/2 times. An odd number of asterisks is deleted because there is only one on the 1st row.
~c%2*c&gt;0&amp;&amp;a[2][2]=' '                  #If there was a positive even number of excess asterisks, we still need to delete the middle asterisk on row 2.
a.map{|j|j.center b*2}}                #Return an array of strings, each centred to width b*2
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 54 bytes</h1>
<pre><code>ＮθＷ∨›θ⁰⁼θ±²≧⁻Ｌ⊞Ｏυωθ↘Ｅυ⭆⁻Ｌυκ§ *⎇∧κλ∨﹪θ²¬∧θ⁼²⁺κλ›⊕⊗⁺κλ±θ
</code></pre>
<p><a href="https://tio.run/##TU/bSsQwEH33K8I@TSSC9k33qbAiBdst6g9k2yEtm03aXKx@fZx0LzgQwsy5zJxukK6zUqdUmSmGJp4O6GDm27tlGDUy2Dt4cyhDngr2yAV7naPUPncNKgKg4FSsllPp/ajMx6iGAPVoohfsHY0KA7TRD/sJnQzWQRRs4WSUt7RuNAFednY560T2yYzPQIjKzeoEF6NIuiO9MlSmxx/YsPuNYF/ojHS/UJoejoJpItDdte2jtvnQggaNDSs@3xIUgrWarFcFzxddk1amc3hCE7CHnY0HTf9/6i36zM@1TenpOT186z8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Uses @LevelRiverSt's observations.</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>Ｗ∨›θ⁰⁼θ±²≧⁻Ｌ⊞Ｏυωθ
</code></pre>
<p>Subtract increasing number of rocks from <code>n</code> until the result is no longer positive, but subtract the next number if the result is exactly <code>-2</code>.</p>
<pre><code>↘Ｅυ⭆⁻Ｌυκ§ *⎇∧κλ∨﹪θ²¬∧θ⁼²⁺κλ›⊕⊗⁺κλ±θ
</code></pre>
<p>Print a triangle of rocks, but remove rocks symmetrically from both sides as necessary, and also the rock directly below the topmost rock if necessary.</p>
</div>
<div id="pu3" class="pu"><h1 id="jelly-53-43-bytes-blfp"><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>53</s> 43 bytes</h1>
<pre><code>ŒṗQƑƇḂ⁹ƤḄ_’ʋⱮ3Ȧ$ƇṀÞḢµạṀIḂ’+Ʋ⁶ẋ;&quot;b1KḣƊ€z⁶ZŒB
</code></pre>
<p><a href="https://tio.run/##AYQAe/9qZWxsef//xZLhuZdRxpHGh@G4guKBucak4biEX@KAmcqL4rGuM8imJMaH4bmAw57huKLCteG6oeG5gEnhuILigJkrxrLigbbhuos7ImIxS@G4o8aK4oKseuKBtlrFkkL/O@KAnCAtPsK24oCdO8OHWSQKw4figqxq4oG@wrbCtv//NTA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A monadic link taking an integer and returning a list of lists. &gt;50% of the code is focused on the ASCII art aspect. If a list of integers indicating row sizes were permissible, <a href="https://tio.run/##AVEArv9qZWxsef//xZLhuZdRxpHGh@G4guKBucak4biEX@KAmcqL4rGuM8imJMaH4bmAw57huKL/O@KAnCAtPiDigJ07w4fhub4kCsOH4oKsWf//NTA" rel="nofollow noreferrer">this would be 20 bytes</a>.</p>
<p>In brief, this is the algorithm:</p>
<ol>
<li>Generate all integer partitions of n</li>
<li>Keep only those made of distinct integers</li>
<li>Keep only those where there is no length 2 subsequence of odd numbers and no length 3 subsequence that is odd, even, even.</li>
<li>Keep one of the lists with the smallest maximum integer</li>
<li>Left pad the list of integers with spaces; in general, this is max integer minus current integer, but where there are two even numbers in a row, there is one less space.</li>
<li>Half the integer, rounding up, convert to unary and separate with spaces, with an extra space if the integer is even</li>
<li>Right pad with spaces to make each line the same length.</li>
<li>Palindromise each line</li>
</ol>
<p>Full explanation to follow.</p>
<hr/>
<p>As an alternative, here’s a translation of <a href="https://codegolf.stackexchange.com/a/233492/42248">@LevelRiverSts clever Ruby solution</a>:</p>
<h1 id="jelly-49-bytes-h2q6"><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 49 bytes</h1>
<pre><code>ŻÄ_=2o&lt;ʋ0Tðb1K€a3¦€3¦S_Ḃo¬Ɗɗ^Ø.¦&quot;S_HĊʋb1ɗŻṛ¡&quot;U{o⁶
</code></pre>
<p><a href="https://tio.run/##AXYAif9qZWxsef//xbvDhF89Mm88yoswVMOwYjFL4oKsYTPCpuKCrDPCplNf4biCb8KsxorJl17DmC7CpiJTX0jEisqLYjHJl8W74bmbwqEiVXtv4oG2/zvigJwtPsK24oCdO8OHWSQKw4figqxq4oG@wrbCtv//MTAw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>JavaScript (ES7), 186 bytes</h1>
<p>A rather naive search, but reasonably fast.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,W)=&gt;(g=(w,x=2**w-1,o='',t=n,p=o,X=x)=&gt;x?(i=t,s='',h=k=&gt;k--&amp;&amp;(q=(x&amp;X)&gt;&gt;k&amp;1)|2*h(k,i-=q,s+=' X'[q]+' '))(w)==x&amp;&amp;g(w-1,x&amp;x/2,p+s+`
`+o,i,p+' ')||o&amp;&amp;g(w,x-1,o,t,p,X):!t&amp;&amp;o)(W)||f(n,-~W)
</code></pre>
<p><a href="https://tio.run/##HY5Lb4MwEITv@RWuFNlrWKeFPtNq6anXXkFKI4FoeJTIhoCKpZD@dWJ6GGl3v9HO/GS/WZ@f6nZQ2nwf5rkg0BhLiqAkGNFS6HmjCtCQEDiQxpYMJmSdw75DTQP2C6mooahRinPoCCxPZBQ1PJBT6FXQYK2ow94nwRKx6/a@YEJKGCWR5byEJcByexti6/d@ukp9g7WbF9s0mX8L2qUFDthiIl9vBs6NhNjhwhVWf7Gc33YPyJ6RvSDbIgtCp3sndwncHt4he3xydLtfbQpz@sjyCjSjiOVG9@Z42BxNCeknI7Y@68uXXp/dZ3lJpZyv" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, <s>69</s> <s>60</s> 56 bytes</h1>
<p><s>Very</s> slow bruteforcing approach. Generates all triangles of with the right number of stars in increasing size.</p>
<pre><code>[N&gt;L©ODULI.ÆεXLå}vy®£0δ.ýJ.c0ð:D.BÐíQs…1 1ƵA:€Sø€ü@PP*iq
</code></pre>
<p><a href="https://tio.run/##AWIAnf9vc2FiaWX//1tOPkzCqU9EVUxJLsOGzrVYTMOlfXZ5wq7CozDOtC7DvUouYzDDsDpELkLDkMOtUXPigKYxIDHGtUE64oKsU8O44oKsw7xAUFAqaXH//zE3/y0tbm8tbGF6eQ" rel="noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<p>If we sacrifice the performance, two more bytes can be saved: <a href="https://tio.run/##AV4Aof9vc2FiaWX//1swTE4@TMKpT8OjdnlPSVF5wq7CozDOtC7DvUouYzDDsDpExaAuQsOQw61Rc@KApjEgMca1QTrigqxTw7jigqzDvEBQUCoqaXH//zT/LS1uby1sYXp5" rel="noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<p>Some high-level comments:</p>
<pre class="lang-python prettyprint-override"><code>[                   # for N in 0, 1, ...
  N&gt;L©O             # K = (N+1-th triangular number)
  DULI.ÆεXLå}       # all length K lists of 0's and 1's that sum to the input
  vy                # for each list y
    ®£0δ.ýJ.c0ð:D.B # format as a pyramid with 1's and spaces
    ÐíQ             # is it symmetric?
    …1 1ƵA:         # make the pyramid &quot;dense&quot;, fill the gaps between 1's
    €Sø€ü@PP*       # check if each column is supported
    iq              # if so, exit and implicitly print
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/233471/">233471</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




