<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::261554</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Scala</td><td>230605T113906Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261570#261570">138 Aspe</a></td></tr>
<tr d-ix="1"><td>042</td><td>Perl 5 p</td><td>230823T062619Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/264541#264541">Nahuel F</a></td></tr>
<tr d-ix="2"><td>044</td><td>J</td><td>230823T044844Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/264539#264539">Jonah</a></td></tr>
<tr d-ix="3"><td>044</td><td>APL Dyalog Unicode</td><td>230823T011332Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/264534#264534">boltcapt</a></td></tr>
<tr d-ix="4"><td>049</td><td>K ngn/k</td><td>230821T103049Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/264450#264450">bstrat</a></td></tr>
<tr d-ix="5"><td>107</td><td>Java JDK</td><td>230607T141523Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261626#261626">Fhuvi</a></td></tr>
<tr d-ix="6"><td>075</td><td>JavaScript Node.js</td><td>230605T090726Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261566#261566">Fhuvi</a></td></tr>
<tr d-ix="7"><td>114</td><td>Javascript</td><td>230605T041405Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261556#261556">Dadsdy</a></td></tr>
<tr d-ix="8"><td>112</td><td>Python</td><td>230607T225940Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261640#261640">Luke Saw</a></td></tr>
<tr d-ix="9"><td>1396</td><td>Funciton</td><td>230608T132502Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261656#261656">Timwi</a></td></tr>
<tr d-ix="10"><td>nan</td><td></td><td>230607T201848Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261637#261637">Bruno Lo</a></td></tr>
<tr d-ix="11"><td>020</td><td>05AB1E</td><td>230605T050129Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261557#261557">Command </a></td></tr>
<tr d-ix="12"><td>081</td><td>Arturo</td><td>230607T050015Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261610#261610">chunes</a></td></tr>
<tr d-ix="13"><td>022</td><td>Jelly</td><td>230606T213858Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261604#261604">Unrelate</a></td></tr>
<tr d-ix="14"><td>126</td><td>SNOBOL 4</td><td>230606T101304Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261591#261591">Jerry Co</a></td></tr>
<tr d-ix="15"><td>079</td><td>JavaScript ES6</td><td>230605T090624Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261565#261565">Arnauld</a></td></tr>
<tr d-ix="16"><td>028</td><td>Charcoal</td><td>230605T101416Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261569#261569">Neil</a></td></tr>
<tr d-ix="17"><td>110</td><td>Python</td><td>230605T162515Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261576#261576">AnttiP</a></td></tr>
<tr d-ix="18"><td>029</td><td>Thunno 2</td><td>230605T074027Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261559#261559">The Thon</a></td></tr>
<tr d-ix="19"><td>186</td><td>Excel ms365</td><td>230605T122516Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261574#261574">JvdV</a></td></tr>
<tr d-ix="20"><td>034</td><td>Retina 0.8.2</td><td>230605T091438Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261567#261567">Neil</a></td></tr>
<tr d-ix="21"><td>157</td><td>Java 11</td><td>230605T085105Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261562#261562">Kevin Cr</a></td></tr>
<tr d-ix="22"><td>nan</td><td>Vyxal</td><td>230605T084118Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261561#261561">AndrovT</a></td></tr>
<tr d-ix="23"><td>096</td><td>ATOM</td><td>230605T054901Z</td><td><a href="https://codegolf.stackexchange.com/questions/261554/split-a-string-on-unnested-commas/261558#261558">Valencia</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, <del>140</del> 131 bytes</h1>
<p>Golfed version. <a href="https://tio.run/##VZA9T8QwDED3/grLYkh0AcTHVEilE2JgQAyIqe0Q2vQoKmlU@9AdVX97yZXrVXiK7ednK1SYxozt@6ctGJ5N7cDu2LqSYO099FEE8G0acPErd7Xb6OTN1Qw6GkknAvEyFrRCtUN5Qb6pWaBCKXvBykud1JXguZ5mWSr6PICNdRv@0HppySHL8kOL6h8r@2nMte7xy/Ne@rCXGydY3vnBNmSBw0Zc@WE8HseW@MGQJdCw7jqzF2ioVEVJqipKVIDiSl2rG/n3lKpPQ5ar2wFlUFRtB2J2wP354pPhAyDEfALhk/NbjuFsRibBAuDLlifgWHcn73/ukA3RMP4C" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>s=&gt;(&quot;&quot;/:(s+&quot;,x&quot;).split(&quot;,&quot;)){(t,p)=&gt;if(t.split(&quot;[\\[({]&quot;).length==t.split(&quot;[)}\\]]&quot;).size){if(t.nonEmpty)println(t);p}else t+&quot;,&quot;+p}
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##VZCxTsMwFEX3fsXVE4OtupUKTBVBqhADAzAgpqaDSdwSFFwrfkWtqnx7cNK4babk5Zx3fWOf6VI3zfbrx2SMV11YmD0bm3ssnMNxBPDBGbwhgfjgqrAbieQRn7bgUYB/uoSdn7Cf48poV1tegQMk6sb1toJweJgEG2OQ2pOcelcWLEiRlP0WUKwhOJJlmi7FcUUKk5mclsZu@BtJgosg6zRdDYVLVkyzW/v86/gg4UJLLq1geVbakq6f6v5pSm8CGIf6ikLdE29pHf@djecn7Y0P64uq0gdB2ucqy71aZ3koRGKmbtWdPL1KdVyGaaXua2rP7u4jZrTXcs6L9WNVTy/W7XiOm6iQHAj0vuNO6L/bc@7Qk139etQ0/w" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main extends App {
  type N = (String) =&gt; Unit

  val n: N = (s: String) =&gt; {
    var t = &quot;&quot;
    for (p &lt;- (s + &quot;,x&quot;).split(&quot;,&quot;)) {
      if (t.split(&quot;[\\[({]&quot;, -1).length == t.split(&quot;[)}\\]]&quot;, -1).length) {
        if (t.nonEmpty) println(t)
        t = p
      }
      else t += &quot;,&quot; + p
    }
  }

  val testCases = Array(&quot;asd,cds,fcd&quot;, &quot;(1,2,3)&quot;, &quot;(1),{[2,3],4}&quot;)
  for (testCase &lt;- testCases) {
    println(s&quot;Input: $testCase&quot;)
    println(&quot;Output: &quot;)
    n(testCase)
    println()
  }
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> (<code>-p</code>), 42 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s/([({[]([^({[]|(?1))*[]})])(*SKIP)^|,/ /g
</code></pre>
<p>or +1 byte to avoid catastrophic backtracking</p>
<pre class="lang-perl prettyprint-override"><code>s/([({[]([^({[]|(?1))*?[]})])(*SKIP)^|,/ /g
</code></pre>
<p><a href="https://tio.run/##VYw9D4IwEIZ3f4VpGO7IYcOHE1Fm42Li2BRjAI0JEWLdgL9ubUkRXO7jeZ@7tnrVW80ZbPwMGU@9y84LU604COiEBJHb1kMWIvpCDigR/PPxcMK8J77md63ZVZVUlIpuRcmCvbA7I2aIqZbJFYOQIopxjKd5xEidMJukZHAhmquZOUlEsouXhgMuBrAfKcGFMbNJSmhEf9KPyU/Tvh/NU@mgbr8" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 44 bytes</h1>
<pre><code>','&amp;(,&lt;;._1~1,=*0=6+/\@(&gt;-2*3&gt;])'}])([{'i.])
</code></pre>
<p><a href="https://tio.run/##ZY07D4IwFEZ3f8VNB9uLl8orDijEaOJkHFxrYwxI1MWBkeBfr/WFWoZ2OOd87cUwySvIUuBAEEBqjy9huV2vDCc@FDSbyn14CynzgmwyGu/mIvcjL8418lajUA0/S40GB4NjcbpCBfxQl1SUNVVFyWGzkODnilnIiFlsbyuY7nIRUkQxftM3@EuQGmWhpqT9DdG@1glnoCLdxL36RZ1UiMeHlKBbd8IdJPQ0/cFHMG3u" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1>APL (Dyalog Unicode), 44 bytes</h1>
<pre><code>x[⍸1=(x=',')-+\(x∊'({[')-x∊')}]']←⊆'&quot;,&quot;'⋄,/x
</code></pre>
<p><a href="https://tryapl.org/?clear&amp;q=x%E2%86%90%27%22(1)%2C(4%2C(2%2C3))%22%27%E2%8B%84x%5B%E2%8D%B81%3D(x%3D%27%2C%27)-%2B%5C(x%E2%88%8A%27(%7B%5B%27)-x%E2%88%8A%27)%7D%5D%27%5D%E2%86%90%E2%8A%86%27%22%2C%22%27%E2%8B%84%2C%2Fx&amp;run" rel="nofollow noreferrer">Try it on TryAPL.org!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="noreferrer">K (ngn/k)</a>, 49 bytes</h1>
<pre><code>{x@.i@=i-!#i:&amp;~(x=44)&amp;~+\+/(6#1 -1)*&quot;()[]{}&quot;=\:x}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs6qucNDLdLDN1FVUzrRSq9OosDUx0VSr047R1tcwUzZU0DXU1FLS0IyOra5Vso2xqqjl4kpTUNIw1NTR0DDSMdbUMdFU4gIAlC0QtQ==" rel="noreferrer">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK)</a>, 107 <sup><s>110</s> <s>122</s></sup> bytes</h1>
<blockquote>
<p>-12 bytes after the added possibility to output the list as a string joined with linebreaks<br>
-3 bytes thanks to <em>ceilingcat</em></p>
</blockquote>
<p>Port of my JS answer, see explanations <a href="https://codegolf.stackexchange.com/a/261566/116582">here</a></p>

<pre class="lang-java prettyprint-override"><code>s-&gt;{var r=&quot;&quot;;int a=0;for(var c:s.toCharArray())r+=c==44&amp;(a+=(&quot;{[()]}&quot;.indexOf(c)+4)%7-3)==0?10:c;return r;}
</code></pre>
<p><a href="https://tio.run/##bZDBTsMwDIbveworEihRs2qwSkirwoS4DnHguO1g0nR0dNlI0glU9ciNR4CX24uMdGtRgeWS5LN/@7eXuMX@Mnneb4rHPJMgc7QW7jDTUPZ6AJl2yqQoFUw8AH8enMn0AlLaPCyLPa/qZOvQ@RoTyEHsbf@63KIBIwiJfRlAMYjTtaE1lCMbuvXtE5obY/CNMmYCIYWIonOKgaCknFI2r0iY6US93qdUsiBiZ1f9IRNiML4YjGRslCuMBhNX@7ju3kzQmNiuswTUFvPW5wYNrnhrX71ulHQqYb@nMsoWuQMBeZjSg@IwnY@/WadW4bpw4cZnulxT2tYI1UuBuaVHMRuT3ef7TJMR2X19@JsFx0BA6s/Psk7YXfm1N3anc0CzsK29wyAABG3CZWJ5KhNSc35kM@3hTDe0sdxq6AW/5EN2yG81f9l/DePl1KfMeVSRVsNmugtPaKaX83JYkU4fr@nCExpKays8Yt0@XdjurNp/Aw" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 75 <sup><s>86</s> <s>98</s></sup> bytes</h1>
<blockquote>
<p>-12 bytes after realizing the string is balanced, so there is always the correct matching ending character for each type of block (and removing some unnecessary parentheses)</p>
</blockquote>
<blockquote>
<p>-11 bytes after the added possibility to output the list as a string joined with linebreaks</p>
</blockquote>
<p>(Solution without regex)<br>
Nice challenge :)</p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;[...s].map(c=&gt;c==&quot;,&quot;&amp;!(a+=(&quot;{[()]}&quot;.indexOf(c)+4)%7-3)?`
`:c,a=0).join``
</code></pre>
<p><a href="https://tio.run/##XY5RaoNAEIbfPYUdaNnBydJGoRDY5Ag9gAou61oMdhXXlID42Lceob1cLmI3NYHFeRnmm/n45yg/pVV93Q0b05Z6rsRsxT7lnNucf8iOKbFXQgDB0wOTkWAwpgzzCXhtSn1@q5jCKMHH102MhyIodoqkeEZ@bGtTFLO0VveDYLXpTgPpc6fVoEvqtT01g6gWjugyWmPbRvOmfWfsthbiLhzg8vOVGdjB5ffbdYyWkwiuQxAsMSwMQdqSVGmpUiWErmhhmXEwMzeKnsBeaEsx/h/fhTVbCUhj6vY5JRPcBcyMD9dCus3HeAIvwQk@XAuMXT@gBP0EH@L8Bw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<p>A little explanation:<br>
We parse each character of the input string.<br>
For each character, the code <code>(&quot;{[()]}&quot;.indexOf(c)+4)%7-3</code> gives<br>
<code>+1, +2 or +3</code> respectively for <code>{ [ (</code>,<br>
<code>-3, -2 or -1</code> respectively for <code>) ] }</code>, and <code>0</code> if it's another character.<br>
<br>
We increment (or decrement) our <em>&quot;nesting height counter&quot;</em> using this result.<br>
If the counter is <code>0</code> (meaning, when we are currently outside of a block) and the current character is a <code>,</code> then we replace it with a <code>\n</code>.<br>
A <code>,</code> at heights higher than 0 is kept without transformation.<br>
Then at the end, we join everything to get the wanted output.</p>
</div>
<div id="pu7" class="pu"><h1>Javascript, <s>140</s> <s>132</s> 114 Bytes</h1>
<p>Thanks to <a href="https://codegolf.stackexchange.com/users/52210/kevin-cruijssen">@KevinCruijssen</a> for -8 Bytes!</p>
<pre><code>c=&gt;(n=[],l=&quot;&quot;,(c+',').split`,`.map(p=&gt;l=a(/[([{]/)&gt;a(/[)\]}]/)?l+','+p:(l&amp;&amp;n.push(l),p)),n);a=r=&gt;l.split(r).length
</code></pre>
<p><a href="https://tio.run/##lcy9DoIwFIbh3cvoQM8Jxxp/BqMpXkhtQlMEMcfSUHQxXjtCXF3c3uF7vpt7uuT7Ng7L536s9eh1AUEbS6yFIPC5JIkqRW6Hkkp1dxGiLlg7WBkwL7vCYk482/fUJ573eTwAZ1lQ8ZGuwEgRkQIene4n@j2DHhVfQjNcR9@F1PFFcdeANELmNQiXKvJVotpXAtWtawNIQUJiLoWVuPhlYE0b2uIfe6SXmYil3fuXGj8" rel="nofollow noreferrer">TIO</a></p>
</div>
<div id="pu8" class="pu"><h1>Python, <strike>120</strike> <strike>118</strike> 112 bytes</h1>
<pre><code>def q(s):
 d,*L,p=0,''
 for c in s:d+=c in'{[(';d-=c in'}])';p,L=[[p+c,L],['',L+[p]]][1&gt;d!=c==',']
 return L+[p]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY6xDcIwEEX7THFUd0cuEgEKlMhM4A0sV3Ei0hjHcQqEmIQmDezAKGyDIKJ7X6_47_4Ml3Q6-3l-TKkrDu_g2g4GGrnKwMlaS1AbQcygO0dooPcwVi5XX8KrIaxdsYybZayDaGVMyBvRVgyi6NwEa60pj26lGqVQ0GYQ2zRFDz-5_L5C7H2igZBKFtoLbWXHjMyL__d9AA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>I realize this loses to the current Python answer by 2 bytes but I liked that it was an uncomplicated implementation of the most intuitive algorithm and wanted to add it.</p>
<p>6 bytes saved thanks to xnor.</p>
<p>Ungolfed it's pretty self-explanatory:</p>
<pre><code>def split_string(s: str) -&gt; list[str]:
  depth = 0
  piece = ''
  L = []
  
  for c in s:
    depth += c in '{[('
    depth -= c in '}])'
    
    if depth == 0 and c == ',':
      L += [piece]
      piece = ''
      
    else:
      piece += c

  return L + [piece]
</code></pre>
<p>Note that the last <code>+ [piece]</code> depends on the promise that the string doesn't end on <code>,</code>.</p>
<p>Also, I switched to a function because I realized that with <code>input</code> and <code>print</code> the code doesn't actually output a list, but rather prints something that would be as difficult to work with as the input. :) Otherwise, the solution would be the winning Python one at <strong>105</strong> bytes (<a href="https://ato.pxeger.com/run?1=m72soLIkIz9vwYKlpSVpuhY3M1N0tHx0CmwNdNTVudLyixSSFTLzgKigtERD0ypF2xbEV6-O1lC3TtGFcGpjNdWtC3R8bKOjC7STdXxidaLV1XV8tKMLYmNjow3tUhRtk21t1XXUY7kKijLzSjTAUpoQC6H2LlirYaipo2Gio2GkY6wJlQMA" rel="nofollow noreferrer">ATO</a>):</p>
<pre><code>d,*L,p=0,''
for c in input():d+=c in'{[(';d-=c in'}])';p,L=[[p+c,L],['',L+[p]]][1&gt;d!=c==',']
print(L+[p])
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://esolangs.org/wiki/Funciton" rel="noreferrer">Funciton</a>, 1396 bytes</h1>
<p>(The byte count uses UTF-16 and includes the BOM. UTF-8 is bigger, unfortunately.)</p>
<p><a href="https://tio.run/##nVW9jtQwEO7zFFOCtEV@djdJxYMgCjhAojka6KNUFFckYHM@tCvEytIVLKJZCSG2uvLeAr/IYnv8m@RyQOTT2s7MN998M5N7@fb87NWb1@enE4AgF4J0IOgHQRpBP4J69GWjV5fgiQmy0Ra73z@JoJ/xpbPkuDtIhMTam7OgV4LsBd34G9JG@6vvgvaJveU3PzR@JwhBbHPBte03aSsoE5QLukX26NoGt@jYBTdt7IOhiQKlMh1peWlQwCSKAAaJgd55So@sBEepyNLRbzXatUQzUaREWk@CIhsKoC0/6bhb59nnKjVlulcRbR2Q6uSm0fIi//G69MipRkZGTbycusPfW6Z@6S5L10VR5WGOfa3xWnAswCc3u@nLsqiqtIrQSpu3oiOaI5Zfpd9C0ExdUJmDrm5fSG5ZVUdomfwL6UgQiDuOaP@ja2HtVeR1uY6RVogUtKo9BA2guiOouvIr6ny1Wq1HrNywGImZaxLfGYq5KZdyq8p6mS4hhDJto9kEDWXaJm4Q1XPe3u7HyzahyZb5pMFBB2O4iVuIoTcOSBie33z1ErJ4PlniiyINf9mUfUbDlncDGk51HA@rwu0nqgvSajERr/24O0kb2cMcGTvro2kzgnlxwEsRjJf6boh37/MsKK3/6g4Wku0GZONybl0ROPgn7nqtx4DfXctouTeVgvAZSPY3cMOMTjDxDBWdtukh1QMx/RY14UaTWXz33@tgPmLz8VXkDOzcc5BdZk90h@@TaTamQmDLyN05ruBkRjHHO2xkVS@@zKjCZlT5tzi3W5P0/0cyKl/fX@js/kp7@U5PFw8eP1ucPVk8f7h48Qc" rel="noreferrer"><strong>Try it online!</strong></a></p>
<pre><code>  ┌┐ ╓─╖     ┌──┐
 ┌┘├─╢Ṕ╟─┐ ┌─┤ ┌┴╖
┌┘┌┴╖╙┬╜┌┴╖│┌┴╖│♯║
│┌┤·╟┐└─┤·╟┤│♭║╘╤╝┌┐
││╘╤╝└─┐╘╤╝│╘╤╝┌┴╖└┤╔═╗
││ ├──┐└─┘ └┐└─┤?╟─┼╢4║
││╔╧╗┌┴┐    └┐ ╘╤╝ │╚═╝
││║2║└┬┘    ┌┴╖┌┴╖┌┴╖┌─╖╔═══════╗
││║0║┌┴─────┤·╟┤·╟┤·╟┤ʘ╟╢1063382║
││║9║│ ┌─╖  ╘╤╝╘╤╝╘╤╝╘╤╝║7738808║
││║7║└─┤‼╟┐  │ ┌┘┌┐├──┴┐║3063189║
││║1║  ╘╤╝│  │┌┴╖└┴┼─┐ │║1329769║
││║5║  ┌┴╖│ ┌┴┤?╟──┘╔╧╗│║3925556║
││║1║┌─┤·╟┘┌┴┐╘╤╝   ║0║│║879404 ║
││╚═╝│ ╘╤╝ └┬┘┌┴╖┌┐ ╚═╝│╚═══════╝
││  ┌┘ ┌┴╖  └┬┤·╟┤├────┘
│└┐┌┴╖┌┤«║  ┌┘╘╤╝└┘
│┌┴┤»║│╘╤╝ ┌┴╖┌┴╖
││ ╘╤╝│┌┴╖┌┤?╟┤Ṕ╟┐
││  │ └┤·╟┘╘╤╝╘╤╝│
││  │  ╘╤╝ ┌┴╖┌┴╖│╔═══╗
││  └───┘ ┌┤«╟┤·╟┼╢−21║
││┌───────┘╘═╝╘╤╝│╚═══╝
│└┤           ┌┴╖└┐
│ └───────────┤?╟┬┘
│             ╘╤╝│
└────────────────┘
</code></pre>
<p>Oh boy, what an ungolfable language. I tried really hard to move things around to eke out a few bytes but this is the most compact arrangement I was able to find.</p>
<p>Funciton has two ways of representing collections: “sequences” and “lists”. I’m taking the challenge statement literally and made a function that returns a <em>list</em> of the results.</p>
<p><strong>Here’s how the function (<code>Ṕ</code>) works:</strong></p>
<ul>
<li>The function takes three parameters:
<ul>
<li><code>s</code>, the input string;</li>
<li><code>n</code>, a running count of currently-open parentheses/brackets/braces; and</li>
<li><code>l</code>, the list we’re constructing.</li>
</ul>
</li>
<li>The function must initially be called with <code>n</code> = 0 and <code>l</code> = 1. The integer 1 here represents a one-element list containing a 0, and 0 in turn represents the empty string.</li>
<li>If <code>s</code> is empty, we just return <code>l</code>.</li>
<li>Otherwise, let <code>c</code> be the first character of <code>s</code>, and let <code>i</code> be the index of <code>c</code> within the string <code>&quot;,([{)]}&quot;</code> (this is the big box on the right). <code>i</code> is −1 if the character is not in there.</li>
<li>Now perform a recursive call with the following parameters:
<ul>
<li><code>s</code> becomes the rest of the string with the first character removed.</li>
<li>If <code>i</code> &gt; 0, then: { if <code>i</code> &lt; 4, then we’re looking at an opening parenthesis, so increment <code>n</code>; else, we’re looking at a closing parenthesis, so decrement <code>n</code>; } else, we’re looking at a comma (<code>i</code> = 0) or something else (<code>i</code> = −1), so leave <code>n</code> unchanged.</li>
<li>If <code>i</code> bitwise-or <code>n</code> is 0, this means that <code>i</code> = 0 (we’re seeing a comma) and <code>n</code> = 0 (we are not in a parenthesis), so append an empty string to <code>l</code>. Otherwise, append <code>c</code> to the last string in <code>l</code>.</li>
</ul>
</li>
</ul>
<p><strong>An interesting golfing trick I used:</strong> See the −21 in the bottom-right? That’s used to do a shift-right by 21 on the input string <code>s</code> (this removes its first character). This construct uses the raw syntax (<code>┼</code>) which means it can also compute a “less-than” operation. Since <code>s</code> is certainly non-negative, it will never be less than −21, so this will always return 0. I re-use that 0 as the empty string to be appended to the list when a comma is encountered. This allowed me to save an entire <code>0</code> literal box, as well as the loop-de-loop I would otherwise need to swallow the less-than result.</p>
<p>To actually run this code, you need a program that calls the function, so here’s one provided for convenience. It’s not golfed and it’s not included in the byte count because the challenge only asked for the function.</p>
<pre><code>                ╔═══╗
                ║ 0 ║
                ╚═╤═╝
          ╔═══╗ ┌─┴─╖ ╔═══╗
          ║ 1 ╟─┤ Ṕ ╟─╢   ║
          ╚═══╝ ╘═╤═╝ ╚═══╝
                ┌─┴─╖
                │ ⌡ ║
                ╘═╤═╝
                ┌─┴─╖
                │ ʝ ╟─
                ╘═╤═╝
                ╔═╧══╗
                ║ 10 ║
                ╚════╝
</code></pre>
<p>This program calls <code>Ṕ</code> with stdin, 0, and 1; uses <code>⌡</code> to convert the list to a sequence; and then uses <code>ʝ</code> to join the strings with newlines (ASCII #10).</p>
</div>
<div id="pu10" class="pu"><p>Python:</p>
<pre><code>import re

def split_string(s):
    return re.split(r',(?![^(){}[\]]*[)\]}])', s)
</code></pre>
<p>JavaScript:</p>
<pre><code>function splitString(s) {
    return s.split(/,(?![^(){}[\]]*[)\]}])/);
}
</code></pre>
<p>Ruby:</p>
<pre><code>def split_string(s)
  s.split(/,(?![^(){}[\]]*[)\]}])/)
end
</code></pre>
<p>Java:</p>
<pre><code>import java.util.regex.Pattern;

public class SplitString {
    public static String[] splitString(String s) {
        return s.split(&quot;,(?![^(){}\\[\\]]*[)\\]}])&quot;);
    }
}
</code></pre>
<p>C++:</p>
<pre><code>#include &lt;iostream&gt;
#include &lt;regex&gt;
#include &lt;vector&gt;

std::vector&lt;std::string&gt; splitString(const std::string&amp; s) {
    std::regex regex(&quot;,(?![^(){}\\[\\]]*[)\\]}])&quot;);
    std::sregex_token_iterator iterator(s.begin(), s.end(), regex, -1);
    std::sregex_token_iterator end;
    return std::vector&lt;std::string&gt;(iterator, end);
}
<span class="math-container">```</span>
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>23</s> <s>21</s> 20 bytes</h1>
<p>-3 thanks to @Kevin Cruijssen</p>
<pre><code>',¡.œ',δý.ΔεžuS¢ιË}P
</code></pre>
<p><a href="https://tio.run/##ATUAyv9vc2FiaWX//ycswqEuxZMnLM60w70uzpTOtcW@dVPCos65w4t9UP//KDEpLHtbMiwzXSw0fQ" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<p><a href="https://tio.run/##yy9OTMpM/V9TVmmvpPCobZKCkn3lf3WdQwv1jk5W1zm35fBevXNTzm09uq80@NCiczsPd9cG/K/V@Z9YnKKTnFKsk5acwqVhqGOkY6wJpDV1qqOBzFgdk1owL9oottoYwtTQAKnRMdEEAA" rel="nofollow noreferrer">Try all testcases.</a></p>
<h2>Explanation</h2>
<pre><code>',        push a comma
¡         and split the implicit input by it
.œ        push all partitions, all possible ways to split it to continuous parts
',δý      and join each partition with commas.
.Δ        now keep (and implicitly output) the first partition such that:
 ε        for each of its parts
  žu       push &quot;()&lt;&gt;[]{}&quot;
  S        list of characters, [&quot;(&quot;, &quot;)&quot;, &quot;&lt;&quot;, ...]
  ¢        count each of the characters in the current part
  ι        uninterleave it, put the count of the even indices (opening brackets) and the odd ones (closing brackets) in two lists
  Ë        and check if the two lists are equal - the number of opening brackets of each type is equal to the number of closing ones.
 }
 P        take the product, which functions as and.
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://arturo-lang.io" rel="nofollow noreferrer">Arturo</a>, 81 bytes</h1>
<pre class="lang-arturo prettyprint-override"><code>$=&gt;[i:0loop split&amp;'c-&gt;'i+dec/??index&quot;([{^_^}])&quot;c&lt;=3prints(∧c=&quot;,&quot;0=i)?-&gt;&quot;\n&quot;-&gt;c]
</code></pre>
<p><a href="http://arturo-lang.io/playground?uoSGE2" rel="nofollow noreferrer">Try it!</a></p>
<pre><code>$=&gt;[                       ; a function; assign arg to &amp;
    i:0                    ; assign 0 to i
    loop split&amp;'c-&gt;        ; loop over input string; assign current letter to c
        'i+                ; increment i in place by...
        dec                ; ...one less than...
        index&quot;([{^_^}])&quot;c  ; index of c in the string literal
        ?? ... 3           ; if this is null, replace it with 3
        &lt;=3                ; duplicate 3
        / ... 3            ; integer divide by 3
        prints             ; print the following w/o newline
        (∧c=&quot;,&quot;0=i)?       ; is c a comma and is i 0?
        -&gt;&quot;\n&quot;             ; newline
        -&gt;c                ; otherwise, c
]                          ; end function
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 22 bytes</h1>
<pre><code>=“([{“}])”§_/)Ä&lt;=”,$œp
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/9/2UcMcjehqIFkbq/moYe6h5fH6modbbIDic3VUjk4u@H@4/VHjPiWlrEcb12UBWToKmpH//yslFqfoJKcU66QlpyjpKChpGOoY6RhrQpiaOtXRQF6sjkktTCDaKLbaGM7T0AAp1jHRVAIA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Jelly and multiple brackets + non-brackets are not friends</p>
<pre><code>             )            For each character in the input:
=                         is it equal to each of
 “([{“}])”                [&quot;([{&quot;, &quot;}])&quot;]?
          §               Sum the results from each half,
           _/             and take their difference,
=“([{“}])”§_/)            yielding 1 for opening, -1 for closing, or else 0.
              Ä           Cumulative sum, for depths.
               &lt;          Is each character's depth strictly less than
                =”,$      whether or not it's a comma?
                    œp    Split the input around those positions.
</code></pre>
</div>
<div id="pu14" class="pu"><h1>SNOBOL 4, 126 bytes</h1>
<p>I haven't really tried to golf this beyond using single-letter names. Well, I guess there is one little trick. Parsing lists of items separated by commas is usually something like <code>item arbno(',' item)</code> (i.e., an item followed by an arbitrary number of repetitions of a comma and another item. Here I've cheated a little bit instead, and added a comma to the beginning of the input, so we can parse the resulting list with code like: <code>arbno(',' item)</code></p>
<pre><code> L = ARBNO(ARBNO(NOTANY('([{}])')) | '(' *L ')' | '[' *L ']' | '{' *L '}')
 I = ',' INPUT
 I ARBNO(',' L . OUTPUT) RPOS(0)
END
</code></pre>
<p>Each item in the result is printed on a new line.</p>
<p>Then there's the cheating version that semi-sorta works, and reduces the size to 72 bytes:</p>
<pre><code> REPLACE(',' INPUT, &quot;[]{}&quot;, &quot;()()&quot; ) ARBNO(',' BAL . OUTPUT) RPOS(0)
END
</code></pre>
<p>SNOBOL has a built-in function to match strings with balanced parentheses (but not brackets or braces). This replaces brackets/braces with parens, then matches and prints those out (which will otherwise match the correct output). For example, for the test input: <code>(1),{[2,3],4}</code>, this prints out:</p>
<pre><code>(1)
((2,3),4)
</code></pre>
<p>General explanation:</p>
<p>Regular expressions are based on SNOBOL patterns.</p>
<ul>
<li><code>NOTANY('abcd')</code> is about the same as <code>[^abcd]</code> in a regex</li>
<li><code>arbno(foo)</code> is about like <code>foo*</code> in a regex</li>
<li>RPOS(0) is like <code>$</code> at the end of a regex--matches only if the rest of the pattern matches the whole string.</li>
</ul>
<p><code>string1 string2</code> concatenates the two strings.</p>
<p><code>string pattern</code> attempts to match the pattern against the string. The result will be the matched substring.</p>
<p>Then a rather strange SNOBOL thing. <code>string pattern . variable</code> matches <code>pattern</code> against <code>string</code>, then assigns the resulting substring to <code>variable</code>. In our case, we assign to <code>output</code>, so this prints out each matching substring.</p>
<p>On, I almost forgot. Formatting. SNOBOL is roughly concurrent with FORTRAN, and uses similar formatting: the only things that can go in column 0 or labels (that can be used as targets of jumps). Lines without labels have to start with a space character.</p>
</div>
<div id="pu15" class="pu"><h1>JavaScript (ES6), 79 bytes</h1>
<p><em>-2 thanks to <a href="https://codegolf.stackexchange.com/users/44718/tsh">@tsh</a></em></p>
<p><em><a href="https://tio.run/##bc3NCoMwDMDxu09RvJhg1H14EqoPUgtKq2NDrNixi/rsTmHiNrzk8s8veZSv0qr@3j2D1uhqrvlseWrDvuqaUlUQAeEIAsQgcRSYy0lGNwJLigzyFFSmE5P5vk50EGBmk8IpSPMTzsq01jRV2Jgb1OCWVpPSlmqlXWQ@8/LWQ8ZYFDGxRpfcJS9zXZDOn4YzXeiKP5JteosHCmkQS5MUT1/2o3D5tudDDbBephiP9Z7l/AY" rel="nofollow noreferrer">70 bytes</a> if we assume there's no linefeed in the input and use it as a separator in the output (also suggested by tsh)</em></p>
<p>The code includes the unprintable character <code>SOH</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;s.replace(/(,)|([([{])|[)\]}]/g,(s,c,o)=&gt;(c?d:o?++d:d--)?s:`&#1;`,d=0).split`&#1;`
</code></pre>
<p><a href="https://tio.run/##bYzLCoMwEEXptl8RXM3gqH24EtQPSQNKomIRI53Sje2320grgrgZmHPvuffyVbJ@tMMz6K2ppjqdOM04fFRDV@oKIiB8gwQ5KnxLvKmPihoCJk0W0wx0bhKb@75JTBBgzklxKMikJwx56Nqn@yZte7ZdFXa2gRq8kg1pw1Rr4yEKIaJIyJl65Dnu7pyo40aDM13oij9FLNpCd@pIo3SZovgzS/86uv2V72oA8yTFuNFWrqYv" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h2>Commented</h2>
<h3>Regular expression</h3>
<pre class="lang-javascript prettyprint-override"><code>regex = /(,)|([([{])|[)\]}]/g
//       \_/ \_____/ \__/
//        |     |      |
//        |     |      +---&gt; closing character (not captured)
//        |     +----------&gt; opening character (captured)
//        +----------------&gt; comma (captured)
</code></pre>
<h3>Function</h3>
<pre class="lang-javascript prettyprint-override"><code>s =&gt;          // s = input string
s.replace(    // replace in s:
  regex,      //   we match either a comma, an opening character,
              //   or a closing character (see above)
  (           //
    s,        //   s = matched character
    c,        //   c = defined if this is a comma
    o         //   o = defined if this is an opening character
  ) =&gt;        //
  ( c ?       //   if this is a comma:
      d       //     leave the nesting depth unchanged
    :         //   else:
      o ?     //     if this is an opening character:
        ++d   //       pre-increment the depth
      :       //     else:
        d--   //       post-decrement the depth
  ) ?         //   if the above test returns a non-zero depth:
    s         //     leave the character unchanged
  :           //   else:
    '\1',     //     replace it with SOH
  d = 0       //   start with d = 0
).split('\1') // end of replace(); split on SOH characters
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 28 bytes</h1>
<pre><code>≔⁰θＦＳ«≧⁺⁻№([{ι№}])ιθ¿θι≡,ι⸿ι
</code></pre>
<p><a href="https://tio.run/##TY25CsMwEAVr@ysWVStQIFflVCFVCoNJSseFcHwsCPmQlBTG3674KtIO8@bltezzRirvr8ZQpXEvoOOXsGx6wLtunX3annSFnMMQBrFsV@9BVW0xUc4IiEk7g7fGaYsM04EJIC5gA2PGF8DXcEAlYMchmaoWaSaFMgWYL9m8BmSCLU@5nCBFm8dePZvVd1FKp2z0Px/D0Xs8cDGkR3HKxHn0u4/6AQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⁰θ
</code></pre>
<p>Start with zero nesting level.</p>
<pre><code>ＦＳ«
</code></pre>
<p>Loop over the characters.</p>
<pre><code>≧⁺⁻№([{ι№}])ιθ
</code></pre>
<p>Adjust the nesting level depending on whether the characters is an open or close bracket.</p>
<pre><code>¿θι≡,ι⸿ι
</code></pre>
<p>Output the character if it is nested or not equal to a comma, but replace an unnested comma with a newline.</p>
<p>Alternative approach, also 28 bytes:</p>
<pre><code>⭆θ⎇›⁼ι,⊙⪪()[]{}²↨Ｅλ№…θκν±¹¶ι
</code></pre>
<p><a href="https://tio.run/##HYzBCsIwDIZfpfSUQjw4vXnSIp4UYd7mDmGUrVjareuEMfbsNfPy589H8jUdxSaQy/kZrU9QJh7tnXoYULxM9BRnuEVDyUS4DhO5ESwKiVKhOPsZyt7ZBBJUVS@rRFEwv9BoYHM4FDpMrNVz44zuwl/74ROvOB6mZS/sldo2@fb8b7mfcmaIS1Xgocbjmndf9wM" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Inspired by @AndrovT's Vyxal answer.</p>
<pre><code> θ                              Input string
⭆                               Map over characters
  ⎇                             Ternary
     ι                          Current character
    ⁼                           Equals
      ,                         Literal string `,`
   ›                            Is greater than
         ()[]{}                 Literal string of brackets
        ⪪      ²                Split into pairs of brackets
       ⊙                        Any pair satisfies
                  λ             Current pair of brackets
                 Ｅ              Map over brackets
                   №            Count of
                       ν        Current bracket in
                     θ          Input string
                    …           Truncated to length
                      κ         Outer index
                ↨       ±¹      Has a non-zero difference
                          ¶     If true then newline
                           ι    Else current character
                                Implicitly print
</code></pre>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 110 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda i,p=1,a=[],c=&quot;&quot;:i and f(i[1:],p+((q:=i[0])in&quot;([{&quot;)-(q in&quot;)]}&quot;),a+[c][(x:=q!=p*&quot;,&quot;):],(c+q)*x)or a+[c]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=RZBBTgMxDEXXzCmCV3bHlRhggSLlJFEWISEiEmQynSAVVT0FSzbdwJ24DZ6WERvL_n6Wv_35Xd_b81hOp6-3lrYPPyWZF__6GL3KXM3A3ljHwQDorHyJKmG2g3Zce8RJm2xvHOUCaA9AW5yU5OSOQOx7G5zFvTbTtakbYCAZw9BPtNnTuFNn4G_rR3ua26yMsh2CnyOHOHMKEdgupQyLIHGRHLFAOPAt39ECrOnaID5YERzfHy9toeBfWjDXJXGQeRS_6rxbd1d1l0vDzHIi8UgXa-tjfgE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Defines a recursive function <code>f</code>. The parameter <code>p</code> is the number of open parenthesis plus one, <code>a</code> is the accumulator for the output list and <code>c</code> is the accumulator for the current string.</p>
<p>If <code>i</code> is nonempty we recurse, possibly adding or subtracting one from the parenthesis count <code>p</code>. If <code>p</code> is equal to 1 and we are on top of a comma we append <code>c</code> to <code>a</code> and clear the value of <code>c</code>. Otherwise we append <code>q=i[0]</code> to <code>c</code>.</p>
<p>If <code>i</code> is empty we just return <code>a+[c]</code></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a>, 29 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ðX',/ıxs+',+ẊDøB?ðX:&quot;&quot;;;€ḣ€ṫæ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728JKM0Ly_faMGCpaUlaboWN3UOb4hQ19E_srGiWFtdR_vhri6Xwzuc7IGiVkpK1taPmtY83LEYRO5cfXjZkuKk5GKozgXrlTQMNXWqo410jGN1TGqVIMIA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a>, 18 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a> (non-competing)</h3>
<pre><code>ƒıtD',=nøB&amp;|;1µ/€J
</code></pre>
<p>This uses the <code>µ/</code> command which I added literally 5 minutes ago, so obviously non-competing. <br />
Port of AndrovT's Vyxal answer.</p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>ðX         # Store &quot; &quot; in x
  ',/     '# Split the input on commas
     ı     # Map over this list:
      xs+  #  Add the current string to x
',+Ẋ      '#  Add a comma and store in x
    D      #  Duplicate the resulting string
     øB?   #  If the brackets are balanced:
        ðX #   Store &quot; &quot; in x
:          #  Else:
 &quot;&quot;        #   Push an empty string
   ;       #  End if
    ;      # End map
     €ḣ    # Remove the first character from each
       €ṫ  # Remove the last character from each
         æ # Remove any empty strings
</code></pre>
<pre class="lang-python prettyprint-override"><code>ƒ          # Prefixes
 ı         # Map:
  t        #  Tail
   D       #  Duplicate
    ',=   '#  Equals &quot;,&quot;?
       n   #  Push character again
øB         #  Has balanced brackets?
  &amp;        #  Logical AND
   |       #  Logical OR
    ;      # End map
     1µ/   # Split on 1s
        €J # Join inner lists
</code></pre>
</div>
<div id="pu19" class="pu"><h1>Excel (ms365), 186 bytes</h1>
<p><a href="https://i.stack.imgur.com/EYbXk.png" rel="noreferrer"><img src="https://i.stack.imgur.com/EYbXk.png" alt="enter image description here" /></a></p>
<p>Formula in <code>B1</code>:</p>
<pre><code>=TEXTSPLIT(@REDUCE(VSTACK(A1,0),SEQUENCE(LEN(A1)),LAMBDA(a,b,LET(c,MAX(a),d,MID(@a,b,1),IF(d=&quot;,&quot;,IF(c,a,VSTACK(REPLACE(@a,b,1,&quot;|&quot;),c)),VSTACK(@a,c+IFERROR(FIND(d,&quot;)}]|[{(&quot;)-4,)))))),&quot;|&quot;)
</code></pre>
<p>The idea I started of with here was that I needed a ticker-system. <code>REDUCE()</code> gave me the option to keep this ticker counting and thus decide if a comma was nested within paranthesis or not. A fair chance that this specific idea lead me to use quite a bit of bytes.</p>
<p>I do believe there will be a fair bit of golfing possible here.</p>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="noreferrer">Retina 0.8.2</a>, 34 bytes</h1>
<pre><code>!`([({[]()|[]})](?&lt;-2&gt;)|\2,|[^,])+
</code></pre>
<p><a href="https://tio.run/##K0otycxL/P9fMUEjWqM6OlZDsyY6tlYzVsPeRtfITrMmxkinJjpOJ1ZT@///xOIUneSUYp205BQuDUMdIx1jTSCtqVMdDWTG6pjUAgA" rel="noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>
<pre><code>!`
</code></pre>
<p>Output the matches themselves rather than the count of matches, which is the default for a match stage, a match stage being the default for a single-line program.</p>
<pre><code>([({[]()|[]})](?&lt;-2&gt;)|\2,|[^,])+
</code></pre>
<p>Match as many as possible of...</p>
<pre><code>[({[]()
</code></pre>
<p>... an opening bracket, which increases the nesting level, tracked in <code>$#2</code>, ...</p>
<pre><code>[]})](?&lt;-2&gt;)
</code></pre>
<p>... an assumed matching closing bracket, which decreases the nesting level, ...</p>
<pre><code>\2,
</code></pre>
<p>... a comma, but only if we are nested, ...</p>
<pre><code>[^,]
</code></pre>
<p>... or failing that, any non-comma.</p>
<p>The same regex would work in Retina 1 but you would have to use a <code>L</code>ist stage instead for the the same length.</p>
</div>
<div id="pu21" class="pu"><h1>Java 11, 157 bytes</h1>

<pre class="lang-java prettyprint-override"><code>s-&gt;{var t=&quot;&quot;;for(var p:(s+&quot;,x&quot;).split(&quot;,&quot;))if(t.split(&quot;[\\[({]&quot;,-1).length==t.split(&quot;[)}\\]]&quot;,-1).length){if(t!=&quot;&quot;)System.out.println(t);t=p;}else t+=&quot;,&quot;+p;}
</code></pre>
<p>Inspired by <a href="https://codegolf.stackexchange.com/a/261556/52210">@Dadsdy's JavaScript answer</a>, so make sure to upvote him/her as well!</p>
<p>Outputs the parts on separated newlines to STDOUT.</p>
<p><a href="https://tio.run/##jVGxTsMwEN37FYcnn@JEKjA1CgsTA2XomGQwjlNcUjeKLwUU@duD0zYgJJBYbD/f87v3fDt5lPGueh1VI52DR2nssAAwlnRXS6VhPUGA48FUoPiGOmO34DANt34RljVYyGB08d1wlB1QxlhaHzo@gXbFXcTEO8PEtY0hzgRDNDWnGedFkfOhZCJeYtJou6WXLPuuoi@K8kcVh@n5VeiCmw9Hep8cekra4IoaywlTytrU68ZpoCgL/aIAx3Ry2vbPjVHgSFLYToH2Ie4lU15KPEed3ZN2dC@D0AqsfoOZNjDpKqEqJ2pVMQGML8W1uMHzEcWQB1SKW8/8RRDgF6vswbY9rYBFc5/Tn/7FfurpTP9iTZ6mcXFMbKL4f1QuNX@anR8/AQ" rel="noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>s-&gt;{                    // Method with String parameter and no return-type
  var t=&quot;&quot;;             //  Temp-String, starting empty
  for(var p:(s+&quot;,x&quot;)    //  ††Concat &quot;,x&quot; to the input
            .split(&quot;,&quot;))//  Then split it on &quot;,&quot;, and loop over the parts:
    if(t.split(&quot;[\\[({]&quot;,-1).length==t.split(&quot;[)}\\]]&quot;,-1).length){
                        //   †If String `t` has balanced brackets:
      if(t!=&quot;&quot;)         //    †††If `t` is NOT empty (so it's not the first iteration):
        System.out.println(t);
                        //     Print the current `t` with newline
      t=p;}             //    Replace the `t` with the current `p` for the next iteration
      else              //   Else:
        t+=&quot;,&quot;+p;}      //    Append a &quot;,&quot; and the current `p` to `t` for the next iteration
</code></pre>
<p>†: The <code>-1</code> in the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)" rel="noreferrer"><code>String#split</code></a> are to include empty Strings, when a part <code>p</code> starts with an opening bracket or ends with a closing bracket.<br />
††: We concat an <code>,</code> to the input-String before splitting, in order to have an additional iteration of the loop. The additional <code>x</code> (could have been any character) is a golfed shortcut for <code>,-1</code> in the split of the input.<br />
†††: In Java you'd almost always have to use <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#equals(java.lang.Object)" rel="noreferrer"><code>String#equals</code></a> when comparing Strings. In this case however, where we only want to skip the first iteration when <code>t</code> is still empty, we can use <code>!=&quot;&quot;</code> to check whether not just the value but also the reference is the same. This is possible here, because String literals point to the same reference point in memory, so the <code>&quot;&quot;</code> in both <code>t=&quot;&quot;</code> and <code>!=&quot;&quot;</code> are the same in memory.</p>
</div>
<div id="pu22" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="noreferrer">Vyxal</a>, 109 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="noreferrer">bits<sup>v2</a></sup>, 13.625 bytes</h1>
<pre><code>¦ƛt:\,=nøβ∧∨;1€ṅ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyI9IiwiIiwiwqbGm3Q6XFwsPW7DuM6y4oin4oioOzHigqzhuYUiLCIiLCJcIigxKSx7WzIsM10sNH1cIiJd" rel="noreferrer">Try it Online!</a></p>
<pre><code>¦ƛt:\,=nøβ∧∨;1€ṅ
¦                 # prefixes
 ƛ                # map:
  t               #   tail
   :              #   duplicate
    \,=           #   is equal to &quot;,&quot;?
       n          #   the prefix
        øβ        #   does it have balanced brackets?
          ∧       #   logical and
           ∨      #   logical or
            ;     # end map
             1€   # split on 1
               ṅ  # join inner lists
</code></pre>
</div>
<div id="pu23" class="pu"><h1><a href="https://github.com/SanRenSei/ATOM" rel="nofollow noreferrer">ATOM</a> <s>103</s> 100 bytes, <s>99</s> 96 chars</h1>
<pre><code>{a=*/&quot;,&quot;;i=0;📏*∀{a.i🚪{📏(*/&quot;(&quot;+*/&quot;[&quot;+*/&quot;{&quot;)!=📏(*/&quot;)&quot;+*/&quot;]&quot;+*/&quot;}&quot;)}:a.i+=&quot;,&quot;+a.(i+1);a-(i+1),i+=1};a}
</code></pre>
<h4>Version 2</h4>
<p>Saving a few characters by storing i+1 as a separate variable</p>
<pre><code>{a=*/&quot;,&quot;;i=0;📏*∀{j=i+1;a.i🚪{📏(*/&quot;(&quot;+*/&quot;[&quot;+*/&quot;{&quot;)!=📏(*/&quot;)&quot;+*/&quot;]&quot;+*/&quot;}&quot;)}:a.i+=&quot;,&quot;+a.j;a-j,i=j};a}
</code></pre>
<h2>Usage</h2>
<pre><code>s=&quot;(1),{[2,3],4}&quot;;

s INTO {a=*/&quot;,&quot;;i=0;📏*∀{a.i🚪{📏(*/&quot;(&quot;+*/&quot;[&quot;+*/&quot;{&quot;)!=📏(*/&quot;)&quot;+*/&quot;]&quot;+*/&quot;}&quot;)}:a.i+=&quot;,&quot;+a.(i+1);a-(i+1),i+=1};a}
</code></pre>
<h3><a href="https://sanrensei.github.io/ATOM/" rel="nofollow noreferrer">Try it online</a></h3>
<h2>Explaination</h2>
<p>It begins by splitting the original string by the comma into an array. It creates an iterator, and goes through each element in the created array. If the number of opening and closing symbols do not match, it will merge the current array element with the next one. If they do match, it will continue onwards. By the end of the iteration, all array elements should be correct, and it returns the final result.</p>
<h3>Commented and organized code</h3>
<pre><code>{
  a=*/&quot;,&quot;; # Split the input by the comma
  i=0; # Declare an iterator
  📏* FOREACH { # Repeat the following function based on the length of the string
    a.i INTO {📏(*/&quot;(&quot;+*/&quot;[&quot;+*/&quot;{&quot;)!=📏(*/&quot;)&quot;+*/&quot;]&quot;+*/&quot;}&quot;)}: # Check if the opening and closing characters match in the current item
      a.i+=&quot;,&quot;+a.(i+1); # If there is not a match, add the next element to the current one
      a-(i+1), # Remove the next element from the array and continue the loop
    i+=1 # Else, increment the counter
  };
  a # Return the final array
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/261554/">261554</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




