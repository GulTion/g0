<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::275689</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>173</td><td>Python 3.8 prerelease</td><td>240923T000833Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275699#275699">David Ch</a></td></tr>
<tr d-ix="1"><td>097</td><td>Perl 5 n</td><td>240922T191737Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275692#275692">Kjetil S</a></td></tr>
<tr d-ix="2"><td>100</td><td>JavaScript Node.js</td><td>240923T081611Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275711#275711">tsh</a></td></tr>
<tr d-ix="3"><td>114</td><td>Ruby</td><td>240922T194645Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275693#275693">Jordan</a></td></tr>
<tr d-ix="4"><td>016</td><td>Jelly</td><td>240923T092335Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275715#275715">emanresu</a></td></tr>
<tr d-ix="5"><td>104</td><td>JavaScript ES6</td><td>240922T195155Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275694#275694">Arnauld</a></td></tr>
<tr d-ix="6"><td>017</td><td>Vyxal</td><td>240923T072643Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275707#275707">emanresu</a></td></tr>
<tr d-ix="7"><td>032</td><td>Charcoal</td><td>240922T213047Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275696#275696">Neil</a></td></tr>
<tr d-ix="8"><td>033</td><td>K ngn/k</td><td>240922T202605Z</td><td><a href="https://codegolf.stackexchange.com/questions/275689/tic-tac-toe-encode-them-all/275695#275695">ovs</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, <s>177</s> 173 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda s:f&quot;{(t:=bin((L:=[t+' '*(9-len(t))for i in range(3**9)if(t:=g(i)[:-1]).count('x')-t.count('o')in(0,1)]).index(s))[2:]):0&gt;13}&quot;
g=lambda x:'1'*(x&lt;1)or' xo'[x%3]+g(x//3)
</code></pre>
<p><a href="https://tio.run/##TY9BjsIwDEX3cwoLCdkuFAjZQEQ5wdygdFGGpkSCpApBCkKcvROgjOZ58y3Z/t/dLRydlavO97rY9af6vD/UcFF6dKegir2xRN@qKMMEATNa56fGUmDWzoMBY8HXtm1IZtmajX6utGS4VLmoePbjrjYQRuQ8fBqHnG4upoLTgLGHJtKFuVyqitViK@Rj9NUWQ4yoUCTTuBHsPEJ0WMaxrCYtxflccv8XInk8cQmcYnRD/dPw1vAiaYChe@kBZNV5k1Lq9AP3vw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>-4 bytes thanks to Malo</p>
<p>Basically brute force, converts base 3 to <code>' xo'</code> strings and then enumerates cases where there are <code>0</code> or <code>1</code> more x's than o's. Also accounts for extra whitespace/zeros at the end of each string.</p>
<p>Ungolfed:</p>

<pre class="lang-python prettyprint-override"><code>def f(s):
    L=[]
    g=lambda x:'1'*(x&lt;1)or' xo'[x%3]+g(x//3)
    for i in range(3**9):
        t1=g(i)[:-1]
        if t1.count('x')-t1.count('o') in (0,1):L.append(t1+' '*(9-len(t1)))
    t1=bin(L.index(s))[2:]
    return '0'*(13-len(t1))+t1
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> -n, 97 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$i=$_;$n=0;y/123/ ox/==9&amp;&amp;(s/x/x/g- s/o/o/g)=~/0|^1/&amp;&amp;++$n&amp;&amp;/$i/&amp;&amp;printf&quot;%013b\n&quot;,$n for 1e8..4e8
</code></pre>
<p><a href="https://tio.run/##rc3RCoIwFMbxVznoGorpcWlkyN4kCqMpAzmTbRcLokdv2VU9QPz54Lv7LcrO@xiZluzSM5J1f0exaxBMQCmPnGcOw9pUgkOzNuXyifXjLJDzomDEOTK9/sVq8mOyqUVzPVGyZQSjsSBUV1Wt6mIK/zKyXySHgW5AKvgv17TqAOk4OK9sBGNC@OxlFq8NuVjS/AY" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Very slow as it loops from 100 000 000 to 400 000 000 (base-10) throwing away all numbers containing any other digits than <code>1</code>s, <code>2</code>s and <code>3</code>s by checking if <code>y/123/ ox/</code> returns 9 for the number of chars replaced where it translates <code>1</code> <code>2</code> <code>3</code> into <code> </code> <code>o</code> <code>x</code> accordingly. Then where the count of <code>x</code>s is the same as or one more than the count of <code>o</code>s the counter variable <code>$n</code> is increased by one since this is a valid input. When the now translated string of nine <code> </code>, <code>o</code> or <code>x</code>s equals the input string, it outputs the 13 digit binary representation of the current <code>$n</code>.</p>
<h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 142 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub{local($_,$n)=$&quot;x9;do{(s/x/x/g- s/o/o/g)!~/0|^1/ or$f{$_}=sprintf&quot;%013b&quot;,$n++}while s/([ o])x*$/($1eq$&quot;?o:x).($&quot;x(-1+length$&amp;))/e;$f{+pop}}
</code></pre>
<p><a href="https://tio.run/##fZRNT4NAEIbv/RUj2bpgW2GiNbFIPXk26dWPRu1SG5HBgnEN4l@vuxBMP9idvQC7z7zzzoTNxDoZb1gcbfLP5zKhl6fEZfMhS72IOfIyXFDp5r5UazmC3Ce1lt7Rrx/8PKIPtGZxyeZVlGfrVVrETj/As2dH4YNB9fW6SoRi3DugB0@eMN9lKD6Yc00T6Z26Kr87wkEi0mXxyo49zxehSjfIKKuqTdiLaQ3v38AKkRfg9kBFuUqzzyKacmiDD0HITLwUYgHRFHiwHbwa7mJSB6nYw/bKvwjOx/soEGlUykNF1FpYB@/GZFehGkNDoS0mbZhRjWwYGtWkrUizN0lmDE3eJNhagiZvCrOpYdfIm8EdqKE@jiZvLSbNGAZGtcOWbGMmNUk2rNub7iNYMTRhlpZg98/TYGTDTGoENjWjNwKbmtGbbdxYz63nlTWoL5glFRDBMYtdYPVt02SrwAvrM83lAE5/NM6h3prAVT@fqq1WYgL9XL2qTPrpPnWasnTU6cVHm7olKrgGTm98AvxmNrud8S1iu4iDz/8JdiXCXrX5Aw" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Second answer. This function gives each of the 6045 valid input strings a unique identifier with 13 bits in the hashmap <code>%f</code> and return those 13 bits (as a string of <code>0</code>s and <code>1</code>s) for all valid input strings of length 9 consisting of the three charachters <code> </code>, <code>o</code> and <code>x</code> where the number of <code>x</code>s is the same or one more than the number of <code>o</code>s. I chose to include the empty input of nine <code> </code>s which returns thirteen <code>0</code>s and this adds one more to the count of valid inputs: 6046 as I think the challenge wasn't clear about the all space input.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 100 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;(i=1e4,g=(p,c)=&gt;p[8]?i+=c&amp;6?0:p&lt;s:[0,7,1].map(n=&gt;g(p+' xo'[n%5],~~c+n))|i)``.toString(2).slice(1)
</code></pre>
<p><a href="https://tio.run/##BcHdDoIgFADgV@GmOGcS09bfLPQhunRuOkJGMw4T17hovjp933v8jlEvLqwHTy@TJ5WjasCpypyEVRCERtWE7ta3rlB6f2nLOjxi3ZXiKqpefsYAXjUWQsFZIt753bkX26YLj/hzOAxypee6OG/hiDLOThuoMGvykWYjZ7IwAU@MMUqJEUe85z8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Input a string, output 13 char 0-1 string.</p>
<hr />
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 77 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;(i=0,g=(p,c)=&gt;p[8]?i+=c&amp;6?0:p&lt;s:[0,7,1].map(n=&gt;g(p+' xo'[n%5],~~c+n))|i)``
</code></pre>
<p><a href="https://tio.run/##BcHdCsIgFADgV/Gm9KANu@iH1XEPIsLEtmEsj2SEF7FXt@97@q8v4R3z55DoMbUZW0EjImq1oMgqAJpsr26IEsP@POg@30tvtbqoo@tePouEZhFZclaJ27Q7ObVtQSaAX4RxbIFSoXXqVlrELHhljFGtjDjArf0B" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Input string as format <code>'x   oxx o'</code>, output an integer in range <span class="math-container">\$\left[0,6105\right]\$</span>.</p>
<hr />
<p>We encoded all 6046 valid boards together with another 59 invalid ones into number not greater than 6105. The bit string output version also added an extra 1808 to each output so they actually encoded in range <span class="math-container">\$\left[1808, 7913\right]\$</span>.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 114 bytes</h1>
<p>Brute-force solution. Iterates over all numbers in base 3, transliterates each to <code>o</code>/<code>x</code>/space, then if it’s a valid position increments a counter, breaking and returning the count in binary if it’s equal to the input.</p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;s{i=j=0
(t=(&quot;%9d&quot;%j.to_s(3)).tr&quot;012&quot;,&quot; xo&quot;
i+=1if(0..1)===t.count(?x)-t.count(?o)
j+=1)until s==t
&quot;%013b&quot;%(i-1)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bY5NCsIwEEb3OUUYCCRoQqMbXYzuegkpQpVCihhpEoyIJ3FTRA_lbYzUP9S3mZnHB98cz00od-0px0vwlRxdGzlxe4M1ZoR75MDGS2C18nbu-FAI5RvI9AD6QKMFYnqoTcUzpbRARK8WNqw9n0YhX7sVpE4xkQ6zoi6lCLBMD0tg3EgtDo_m7SZ4R_MZ0CdQkG8Xf138k0u_vV1MwsZIP529ExNQdPVt280b" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Ruby, 104 bytes</h2>
<p>Returns an integer rather than a binary string.</p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;s{i=j=0
(t=(&quot;%9d&quot;%j.to_s(3)).tr&quot;012&quot;,&quot; xo&quot;
i+=1if(0..1)===t.count(?x)-t.count(?o)
j+=1)until s==t
i-1}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpcsEiN9ulpSVpuhY3M3TtiqszbbNsDbg0Smw1lFQtU5RUs_RK8uOLNYw1NfVKipQMDI2UdJQUKvKVuDK1bQ0z0zQM9PQMNW1tbUv0kvNL80o07Cs0deHsfE2uLKAyTSAnM0ehGKiKK1PXsBZqX2qBglu0kgIMKMVyoQhUoAlUoKsAugIqUAHk5VdUKMAF8kGgAgiUYiGWLVgAoQE" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 16 bytes</h1>
<pre><code>3ṗ9SÞị“o x”iµBḊV
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/9/44c7plsGH5z3c3f2oYU6@QsWjhrmZh7Y6PdzRFfb//3@lfCBQqAACJQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a> Port of <a href="https://codegolf.stackexchange.com/a/275707/100664">my Vyxal</a>, see that for an explanation of why this works.</p>
<pre><code>           i     # Find the index of the input in
 ṗ               # All combinations of
3                # 1...3
  9              # of length 9
    Þ            # Sorted by
   S             # their sums
     ị           # Index each value into
      “o x”      # &quot;o x&quot;
            µB   # Convert to binary
              ḊV # Remove first digit and concatenate
</code></pre>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES6), 104 bytes</h1>
<p>Expects a 9-character string made of <code>' '</code>, <code>'O'</code>, <code>'X'</code> and returns a 13-character binary string.</p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;(g=k=&gt;i--?g(k/b|0)+&quot;01O X&quot;[t-=~-(k%=b),k+6%~b]:t=&quot;&quot;)((F=n=&gt;g(n,i=9)!=s&amp;&amp;!t+!~t+F(-~n))(b=3),i=13,b=2)
</code></pre>
<p><a href="https://tio.run/##jc6xTsMwEAbgnadwLLW6U2JIKarUShe2rlktIYY4pJHryq6wxYBQXoudB8M4VCyQVvw3frr/bt@8NL591scgrHvq4o6ipwp6MlRpIe57MDfqrcScl4uaSf4QBA0CzIwUFiZfzQb1uAnEOQJsyVLVgy00rTEjP59nIc@GkG9BDBYRFC0x4WJZKLrF2Drr3aG7PrgedsDrFCZTOOLVhEl2wUY8awnPm2S/jX@8j8P/bLBT6qk29pMLJv996fsvlh6caBtN1ieLn@4YdPIohA9Na4TXrx3dlevVFw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 81 bytes</h1>
<p>Expects a 9-character string made of <code>' '</code>, <code>'O'</code>, <code>'X'</code> and returns an integer in <span class="math-container">\$[0\dots6045]\$</span>.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(s,n)=&gt;(g=k=&gt;i--?g(k/3|0)+&quot;O X&quot;[t-=~-(k%=3),k]:t=&quot;&quot;)(n,i=9)!=s&amp;&amp;!t+!~t+f(s,-~n)
</code></pre>
<p><a href="https://tio.run/##jc5BCsIwEAXQvadIA0pCOyoogsLoEboNiItS2xJTEjHBhUiv5d6DGVPFjVbxz/Ixf2aXHTObH@TegTbbwvsSmU00xyWrUOFSAqwqpkaT85jHNCWCrh1gA0z1ccITtVk4pJQznUic8wjtYBC5OGpcXIYeaDT3udHW1MWwNhUrGU1DiAihnPc6TJAf1uJXC/jdBHk3er20Qz82yDNpVxt55YeJvy89/iLhwY621kT6NH8zeyeDewDrslyBlacCp@P57A4" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 17 bytes</h1>
<pre><code>2ʀ9↔µ∑;«+⅛«İṠḟbṅḢ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCIyyoA54oaUwrXiiJE7wqsr4oWbwqvEsOG5oOG4n2LhuYXhuKIiLCIiLCJvb29vIHh4eHgiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<p>This relies on a couple of <em>very</em> nice coincidences:</p>
<ul>
<li>Padding the output to length 13 would cost 4 bytes <code>13∆Z</code>. One thing we could do to avoid this is, instead of mapping the input to the range <code>[0, 6045]</code>, instead map it to some subset of <code>[2^13, 2^14)</code> or similar, resulting in 14-bit strings starting with a <code>1</code>, from which we can remove the first character.</li>
<li>Valid boards should contain at most 1 more X than O, which is equivalent to mapping <code>x</code> to <code>1</code>, <code>o</code> to <code>-1</code> and <code> </code> to <code>0</code>, and checking if the sum is 0 (same amount) or 1 (one more <code>x</code>). This is equivalent to mapping <code>o x</code> to <code>012</code> and checking if the sum is <code>9</code> or <code>10</code>.</li>
<li>Now for the neat part: There are 8272 boards with sum at most 8, and 5365 boards with sum at least 11. This means that, if we construct a list of all the boards and sort it by their sums, the valid boards with sums 9 and 10 will be between indices <code>8272</code> and <code>14317</code>, which is within the desired 14-bit range, so all we have to do is find the index of the input in that list, convert it to binary and remove the first character.</li>
</ul>
<p>The caveat of all this is that it's quite slow, taking 30-60 seconds on my computer. Because it's constructing a list of every board, it takes a while, and for some reason <code>ḟ</code>inding the input's index in that list takes 20+ seconds. As such, the above link will probably time out.</p>
<pre><code>             ḟ    # Find the index of the input in
  9↔              # Combinations of length 9 of
2ʀ                # [0, 1, 2] 
    µ ;           # Sorted by
     ∑            # their sum
           İ      # Index into
       «+⅛«       # &quot;o x&quot;
            Ṡ     # And concatenate
              bṅ  # Convert the index to binary and concatenate
                Ḣ # And remove the first character
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 32 bytes</h1>
<pre><code>Ｐ×¹³0⮌⍘⌕ΦＥＸ³χ◧⍘ι xo⁹¬÷⁻№ιx№ιo²Ｓ²
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iOSOxKDk_MWfBgqWlJWm6FjeP-JbmlGQWFGXmlWiEZOamFmsYGusoKBkoaWpacwWAhYNSy1KLilM1nBKLU4NLgELpGm6ZeSlAIqcktUjDN7FAIyC_HMgCajQ00NRRCEhM8UlNK0HWkAk0U6EiXwkoa6kJJPzySzQ880pcMssyU1I1fDPzSos1nPNLgbaBVFaA1CG4QG1AvpEmiPTMKygtgRoKE7VeUpyUXAz10fJoJd2yHKXYVRUKCgr5FRUK-VwQCQA" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｐ×¹³0
</code></pre>
<p>Place 13 <code>0</code>s on the canvas so that the bits can be output LSB first thus avoiding having to manually pad them to length 13.</p>
<pre><code>ＥＸ³χ◧⍘ι xo⁹
</code></pre>
<p>Generate all <code>3×3</code> boards of spaces, <code>x</code>s and <code>o</code>s. (Some spurious &quot;boards&quot; are also generated but they will never match the input.)</p>
<pre><code>Φ...¬÷⁻№ιx№ιo²
</code></pre>
<p>Filter on those where the count of <code>x</code>s minus the count of <code>o</code>s is zero or one.</p>
<pre><code>⮌⍘⌕...Ｓ²
</code></pre>
<p>Find the index of the input string and convert that to binary, LSB first.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 33 bytes</h1>
<pre><code>(13#2)\&quot;x o&quot;[+b\&amp;~-2!+/1-!b:9#3]?
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs9IwNFY20oxRqlDIV4rWTopRq9M1UtTWN9RVTLKyVDaOtefiSgNKKijkV4CUgDgVFfn5+UARJQDbAg+n" rel="nofollow noreferrer">Try it online!</a></p>
<p><code>+b\&amp;~-2!+/1-!b:9#3</code> generates all valid boards using 0 for <code>x</code>, 1 for spaces and 2 for <code>o</code>. <code>&quot;x o&quot;[...]</code> converts the boards to strings, <code>?</code> finds the argument in the list of strings and <code>(13#2)\</code> converts the integer to 13 binary digits.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/275689/">275689</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




