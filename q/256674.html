<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::256674</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>029</td><td>Perl 5 MListUtil=shuffle</td><td>240513T162847Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/273084#273084">Xcali</a></td></tr>
<tr d-ix="1"><td>165</td><td>Go</td><td>230113T154833Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256681#256681">bigyihsu</a></td></tr>
<tr d-ix="2"><td>060</td><td>C gcc</td><td>230123T060649Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/257004#257004">ErikF</a></td></tr>
<tr d-ix="3"><td>nan</td><td></td><td>230119T183341Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256882#256882">The Thon</a></td></tr>
<tr d-ix="4"><td>007</td><td>Brachylog</td><td>230119T142025Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256868#256868">Fatalize</a></td></tr>
<tr d-ix="5"><td>008</td><td>Pip</td><td>230113T163144Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256686#256686">Baby_Boy</a></td></tr>
<tr d-ix="6"><td>079</td><td>PHP</td><td>230116T233738Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256766#256766">dneustad</a></td></tr>
<tr d-ix="7"><td>056</td><td>Clojure</td><td>230116T163110Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256758#256758">Joshua</a></td></tr>
<tr d-ix="8"><td>059</td><td>Python 3</td><td>230113T201719Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256693#256693">friddo</a></td></tr>
<tr d-ix="9"><td>050</td><td>JavaScript ES6</td><td>230113T161914Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256685#256685">Arnauld</a></td></tr>
<tr d-ix="10"><td>023</td><td>Raku</td><td>230114T014812Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256697#256697">Sean</a></td></tr>
<tr d-ix="11"><td>040</td><td>R</td><td>230113T155327Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256684#256684">Dominic </a></td></tr>
<tr d-ix="12"><td>149</td><td>Haskell</td><td>230113T223316Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256696#256696">Roman Cz</a></td></tr>
<tr d-ix="13"><td>062</td><td>Factor</td><td>230113T215937Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256695#256695">chunes</a></td></tr>
<tr d-ix="14"><td>011</td><td>Pip</td><td>230113T184821Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256692#256692">DLosc</a></td></tr>
<tr d-ix="15"><td>005</td><td>Jelly</td><td>230113T154936Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256682#256682">Baby_Boy</a></td></tr>
<tr d-ix="16"><td>045</td><td>Jelly</td><td>230113T181650Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256691#256691">Jonathan</a></td></tr>
<tr d-ix="17"><td>035</td><td>Zsh</td><td>230113T170722Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256688#256688">pxeger</a></td></tr>
<tr d-ix="18"><td>009</td><td>05AB1E</td><td>230113T144417Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256676#256676">Kevin Cr</a></td></tr>
<tr d-ix="19"><td>005</td><td>Vyxal</td><td>230113T153748Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256680#256680">math sca</a></td></tr>
<tr d-ix="20"><td>121</td><td>Excel ms365</td><td>230113T150456Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256678#256678">JvdV</a></td></tr>
<tr d-ix="21"><td>062</td><td>JavaScript Node.js</td><td>230113T143815Z</td><td><a href="https://codegolf.stackexchange.com/questions/256674/implement-a-bag-without-replacement/256675#256675">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-MList::Util=shuffle</code>, 29 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$,=$/;1while say shuffle 1..7
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/19Fx1ZF39qwPCMzJ1WhOLFSoTijNC0NyDbU0zP///9ffkFJZn5e8X9dX1M9A0MDIO2TWVxiZRVakpljC1ULAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, <s>182</s> 165 bytes</h1>
<pre class="lang-go prettyprint-override"><code>import(.&quot;math/rand&quot;;.&quot;slices&quot;)
func f()func()int{b:=[]int{}
return func()int{n:=Intn(7)
for;Contains(b,n);n=Intn(7){}
b=append(b,n)
if len(b)&gt;6{b=[]int{}}
return n}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZY8_TsMwFIf3nMKyVMlWmwIL0ASzMLEhMVYVchInfUr8YjnuUEU5CUuF1ENwFO7AIbCTBgbkwX_e-33-3vtH1Z4-jcxrWSmiJWAE2rTWrWmpHT0fXBnff52nN7amWrr9lZVY0HRNuwZy1VEelQfMScl42BkHdH2WiO0uHIbIKnewSP5qmIhndMjufLC16VOLzv_bsWyFPMW55pOZkMYoLMZKBCVpFLKMP9722Uz_xeMwXGS_R5swCuOkjyqFJBHBLgKndBcuWtaKaWm2nrGTeBxFCCTiJoWHzSaF5dInvacP-9yL9X0NMliRyeNt1daJGHFb3KVt3RuJkLNXEzpLRhcFkY1VsjgSj1BWOlUQQOL20JFMVjSQ-BDNCIEBC4s7Ia77-TsaxzG9WIv_ykNY08yn07T_AA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A generator function that returns a function.
When the returned function is called, it returns an int in the range <code>[0,7)</code>.</p>
<ul>
<li>-17 bytes by using the now-stdlib <code>slices</code> package. Also applies to all &quot;bonuses&quot; below.</li>
</ul>
<h3>&quot;Bonuses&quot;</h3>
<h4>Arbitrary <code>n</code> distinct items, <s>204</s> 187 bytes</h4>
<pre class="lang-go prettyprint-override"><code>import(.&quot;math/rand&quot;;.&quot;slices&quot;)
func f(I[]int)func()int{b,l:=[]int{},len(I)
return func()int{e:=I[Intn(l)]
for;Contains(b,e);e=I[Intn(l)]{}
b=append(b,e)
if len(b)&gt;=l{b=[]int{}}
return e}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZDNSsQwEMfxaJ4iBBYSNl3dXQ9ua7x46k3wWBZJ27Qb2k5Lmz0spU_iZRF8CPFJ9GlMWouCySGZr9_8Z15e8_r83sikkLnCldSAdNXUrVmRrDLk7Wgy7_bzY_LRFamkOVy1ElISrEhX6kR1hKHsCAnOaBjtNRjmLMrsr4956YvR2Q-8VEBDhlplji3g3yTlizAKwQAt2R5ldRs81GCsko7GXLFA_Qn3A4qFbBoF6RhEOsOOG7N7Ufbx3GuYu6hhmEb4urgcRboJKcM9Cmdha77Z8O12y2_sGVCuAPvCDWPhRlWdsypZKFrJJrIFewkn5mRi7Yt1oO92u0AvlxYJvrDVlKHH1uaVQDXHMEp85nXhixEXwT6oi76RoBP61LjMjJJFimXZKpmesEWoVhqVYg3YHHSHY5kTR2IDmhECHFYvpp0Kcd3PPYnneeRHuvine0D2Ths5n6f3Gw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Generator function now takes a list of elements to choose from.</p>
<h4>Arbitrary <code>n</code> items + generic (<code>comparable</code>), <s>208</s> 191 bytes</h4>
<pre class="lang-go prettyprint-override"><code>import(.&quot;math/rand&quot;;.&quot;slices&quot;)
func f[T comparable](I[]T)func()T{b,l:=[]T{},len(I)
return func()T{e:=I[Intn(l)]
for;Contains(b,e);e=I[Intn(l)]{}
b=append(b,e)
if len(b)&gt;=l{b=[]T{}}
return e}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZDBSsQwEIbxmoPPEAILCduuuuvBbY0XT70J7m0pkrZpN7SdljR7WEqfxMsi-BCefA59GpPWgmByCMw_fPNNXt-K5vzRirQUhcS1UIBU3TbarEheG_J-NLl_9_U51eiK1MIcrrSAjIQr0lUqlR1hKD9CivP9DqdN3QotkkrGNNrHO-YSynZ94lUBt4V-8CoJNGJIS3PUgOcGGfBoH4EBWrEY5Y0OHxsw1qejiSdZKP_E_YASLtpWQjaGSOXYURP2wKs-meYM8wQ5DNMa3xeXo6jbkjLco8gpKTD9jbdee5vNxru1Z0CFBBxwu5DNYueqjKw7V6pFKWkt2jERcGLOFKuA34TqfrsN1XJpuRBwi6AMPWnbVwFVHobR8sVryoCPuD3EYVP2rQCV0ufWdeaULDIsKi1FdsIWIbUwMsMKsDmoDieiII7EBjQjODisWkyfyvl1P88kvu-TX3X-z3tA9k7fcj5P7w8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Works for any <code>comparable</code> type (bool, int, float, string, pointer, channel, struct of comparables, array of comparables, typeset of comparable).</p>
<h4>Arbitrary <code>n</code> items + generic (<code>comparable</code>) + <code>k</code> items at a time, <s>288</s> 271 bytes</h4>
<pre class="lang-go prettyprint-override"><code>import(.&quot;math/rand&quot;;.&quot;slices&quot;)
func f[T comparable](I[]T)(func()T,func(int)[]T){b,l:=[]T{},len(I)
A:=func()T{e:=I[Intn(l)]
for;Contains(b,e);e=I[Intn(l)]{}
b=append(b,e)
if len(b)&gt;=l{b=[]T{}}
return e}
return A,func(n int)(N[]T){for i:=0;i&lt;n;i++{N=append(N,A())};return}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZHBatwwEIbpVZe-ghAEJKLdrrMpFLsqLDn5shS6t8UE2ZYdsfbY2NpDEHqSXpZAHqKv0qepZK9LQnyRmH_0z_ePf7_U3eVPL4uTrBVupQak274bzJpUrSGvZ1Otvv399Hku0jVppXn6MkgoSbImY6MLNRKGqjMUuDoecNG1vRxk3qiMpsfswGiQKDvw6dRgWKjanDex8DfreKOApgztYnFttSoW6TEFA7RhGaq6IXnowHi2keZcsUS9ka1DuZB9r6CcRKQrHBxz9kM0Np9nODQocx4Aq_-33QwEOCDR_QTlJ2Edi02iv0Oib2_tfnHe8x1lzCXzY-eWvTxMwcPaKMMWpSGTN7QRv7vj2-2W3_vPoVoBr5XBsfBL8noWAmuj2jGUWnlStJX9pEh4ZugKEnmQr5tA4r0hFt6GMvRz8H0NUM0xTHEfeXeKxWR3hCzpTraXoAv6qw-dFSU3JZbNoGT5jL2FGqRRpc-NzZMecS5rEpyYQ4uFgGCrb-Y_I8TGLjPJarUiV3Txgdsh9xY9ihb0MbAbGm3e04_MP7ju8nKZz38" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A function that returns 2 functions. The first function takes 1 item, the second function takes <code>k</code> items.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 60 bytes</h1>

<pre class="lang-c prettyprint-override"><code>b;f(i,j){b-127||(b=0);for(;b&amp;1&lt;&lt;(i=rand()%7););b|=1&lt;&lt;i;j=i;}
</code></pre>
<p><a href="https://tio.run/##VY9Bj4IwEIXv/RUTNphpRCPGhMShe9/EePPmhVLQIVoM1L0Ivx1bPDmnyTfzXt4rV5eynCZNNXLSyJdepdtsGFCrjaS67ZD0Is1zZNUV1qCMM0mS9KA8ZGoU0zj9sC1vT1NB3jvD7fr6K77QjXVggq2De8EW/1s2El4CICAm4bd@9nd8r/B4OhyknGlIwGpDwMtlnu7oowJ4dF5ZY/Tnqq5w3FqI11uzh9icbZQAJ1BjsAi/7KvFmfKF4PF0PUbqM9F8H8U4vQE" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<pre class="lang-c prettyprint-override"><code>b; // Bag: initialized with nothing selected
f(i,j){
  b-127||(b=0); // Reset bag when all 7 pieces selected
  for(;b&amp;1&lt;&lt;(i=rand()%7);); // Find a random unselected piece
  b|=1&lt;&lt;i; // Mark it as selected
  j=i; // Return the piece
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Thunno/Thunno" rel="nofollow noreferrer">Thunno</a>, <span class="math-container">\$ 11 \log_{256}(96) \approx \$</span> 9.05 bytes</h1>
<pre><code>[7R7zPZw{ZK
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72sJKM0Ly9_wYKlpSVpuharo82DzKsCosqro7whIlAJmAIA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/256680/114446">mathcat's Vyxal answer</a>.</p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>[7R7zPZw{ZK
[            # Forever:
         ZK  #   Print
        {    #   Each element of
      Zw     #   A random element of
   7zP       #   The permutations
 7R          #   Of range(7)
</code></pre>
<h4>Bonuses</h4>
<ul>
<li>Arbitrary <code>n</code> items: <span class="math-container">\$ 13 \log_{256}(96) \approx \$</span> 10.70 bytes, <a href="https://ato.pxeger.com/run?1=m72sJKM0Ly9_wYKlpSVpuhZro6sMgqoMqgKiyqujvCFiUKkFC00hDAA" rel="nofollow noreferrer"><code>[z0Rz0zPZw{ZK</code></a></li>
<li>Generic bag: <span class="math-container">\$ 12 \log_{256}(96) \approx \$</span> 9.88 bytes, <a href="https://ato.pxeger.com/run?1=m72sJKM0Ly9_wYKlpSVpuhZroqsMXHyqAqLKq6O8IUJQmQV7otUTk5LVdRTUU1LTQFR6RiaIysrOUY-FqAEA" rel="nofollow noreferrer"><code>[z0DLzPZw{ZK</code></a></li>
</ul>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 7 bytes</h1>
<pre><code>7&gt;ℕ≜₁|↰
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/39zuUcvUR51zHjU11jxq2/D///8oAA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>
<p>This is a predicates that unifies its output with a random integer between 0 and 6, exhausting each possibility before beginning a new cycle.</p>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/qG3Do6bGh9sWHNr5qHHLf3O7Ry1TH3XOAYrVAKX@//8fBQA" rel="nofollow noreferrer">Try generating 14 random unifications here!</a></p>
<p>You can change <code>7</code> to any other number to get bigger bags.</p>
<h3>Explanation</h3>
<pre><code>7&gt;ℕ        Take an unknown integer between 0 and 6
    ≜₁     Assign a value to it, with a random choice
      |    Else
       ↰   Recursive call
</code></pre>
<p>Since our variable is constrained in <code>[0..6]</code>, <code>≜₁</code> will randomly unify it with one of those 7 values, leaving a choice point for each one. Brachylog will try each choice point when asked (e.g. with <code>ᶠ - findall</code>, failure loops, or by pressing <code>;</code> in Prolog’s REPL), so each integer value. <code>|</code> creates another choice point that will get called only once all the choice points created by <code>≜₁</code> are exhausted.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, <s>11</s> 8 bytes</h1>
<pre><code>LhP*SH,a
</code></pre>
<p>Implements the first bonus</p>
<p>-3 bytes thanks to <a href="https://codegolf.stackexchange.com/users/16766/dlosc">DLosc</a>!</p>
<p>How?</p>
<pre><code>LhP*SH,a  : One arg(Number of items)
       a  : First arg
L         : Loop x times;
 h        : Literal for 100
      ,   : Range zero to a
    SH    : Shuffle: random permutation of iterable
   *      : Map
  P       : Print
</code></pre>
<p><a href="https://dso.surge.sh/#@WyJwaXAiLCIiLCJMaFAqU0gsYSIsIiIsIiIsIjciXQ==" rel="nofollow noreferrer">Try It Online!</a></p>
</div>
<div id="pu6" class="pu"><h1>PHP, 79 bytes</h1>
<pre class="lang-php prettyprint-override"><code>$y=function()use(&amp;$a){$a=$a!=[]?$a:range(0,6);shuffle($a);echo array_pop($a);};
</code></pre>
<p><a href="https://tio.run/##HY1BCsIwEEWvMsIgE@qiKwWnoQcRkaEkRpBkSBuwlJ49hq7@4/Hga9Bah1GDAq7WlzgtnxTJlNnRGcVsKBblZB/PEeWeJb4d9Zer4TkU77@OWsNuCgkkZ1lfmvRQO1efMhD@wELP0HaA2wFdZ2Brb2QY9voH" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-php prettyprint-override"><code>$y = function() use (&amp;$a) {   // anonymous function with use clause by-reference
    $a = $a != []             // equal comparison, if $a is neither null nor empty array
        ? $a                  // then use $a        
        : range(0,6);         // else create range array
    shuffle($a);              // shuffle array        
    echo array_pop($a);       // splice off and return last element of $a
};
</code></pre>
</div>
<div id="pu7" class="pu"><h1>Clojure, 56 bytes</h1>
<pre><code>(run! #(run! println %)(repeatedly #(shuffle(range 7))))
</code></pre>
<p>Creates an infinite list containing random permutations of 0 to 6 and prints each number.</p>
<p><a href="https://tio.run/##S87JzyotSv3/X6OoNE9RQRlCFRRl5pXk5CmoamoUpRakJpakpuRUKhgDpYszStPSclI1ihLz0lMVzDWB4P9/AA" rel="nofollow noreferrer" title="Clojure – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 59 bytes</h1>
<p>-6 bytes thanks to @att</p>

<pre class="lang-python prettyprint-override"><code>from random import*
while[*map(print,sample(range(7),7))]:1
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/7/P60oP1ehKDEvBUhl5hbkF5VocZVnZOakRmvlJhZoFBRl5pXoFCfmFuSkagCVpadqmGvqmGtqxloZ/v8PAA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Infinitely prints integers.</p>
<p>I dont know if this is valid: (54 bytes)<br />
Prints all 7 integers of permutation in one line before a newline.</p>
<pre class="lang-python prettyprint-override"><code>from random import*
while 1:print(*sample(range(7),7))
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/7/P60oP1ehKDEvBUhl5hbkF5VocZVnZOakKhhaFRRl5pVoaBUn5hbkpGoAFaWnaphr6phrav7/DwA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1>JavaScript (ES6), 50 bytes</h1>
<p>A function that draws one piece at a time.</p>

<pre class="lang-javascript prettyprint-override"><code>m=f=_=&gt;m^(m|=1&lt;&lt;(i=Math.random()*7))?-~i:f(m%=127)
</code></pre>
<p><a href="https://tio.run/##DcVNDoIwEAbQPaf4NqQzEgi4aQKMnMAbGE0DVDG0NUDc@HP16tu8u3matV@mx5b7MIwxOrFykYM7k3tL1bY0ydFst2IxfgiOeKeZu/w71ZZcKtVec7RhoXnc4CEom38tdNkwXgnQB7@GeSzmcCVLjAyUZR4pNDoohRrq5BVzk3ziDw" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>m =               // m (aka &quot;the bag&quot;) is a global bitmask holding
                  // drawn pieces, initialized to a zero'ish value
f = _ =&gt;          // f is a recursive function ignoring its argument
m ^ (             // if m is modified when ...
  m |= 1 &lt;&lt; (     //   ... the floor(i)-th bit of m is set
    i =           //   where i is uniformly chosen
    Math.random() //   in [0, 7[
    * 7           //
  )               //
) ?               // then:
  -~i             //   return floor(i + 1)
:                 // else:
  f(              //   try again
    m %= 127      //   and reset m to 0 if it's 127 (0b1111111),
  )               //   meaning that the bag is empty
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://raku.org/" rel="noreferrer">Raku</a>, 23 bytes</h1>
<pre><code>{grab $||=SetHash(^7):}
</code></pre>
<p><a href="https://tio.run/##K0gtyjH7n1upoJamYPu/Or0oMUlBpabGNji1xCOxOEMjzlzTqvZ/cWKlQpqGpkJFhYKRwX8A" rel="noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<p>Ungolfed:</p>
<pre><code>{
  state $bag ||= SetHash(0..6);
  $bag.grab;
}
</code></pre>
<p>This is a function which, when called repeatedly, will return the integers 0-6 in a random order, then the same integers in a (likely) different random order, and so on, <em>ad infinitum</em>.</p>
<p>Raku has a built-in data type <code>SetHash</code> which stores a set of objects, and has a <code>grab</code> method that chooses one of them randomly, removes it from the set, and returns it.  All that's left to do for this challenge is the refilling.  A state variable (<code>$</code> in the golfed version, <code>$bag</code> in the ungolfed one) stores the <code>SetHash</code>, which is reset to a new object with full contents (using <code>||</code>) when the variable is undefined, as on the first call to the function, or has become empty, as after every seventh call.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>50</s> 40 bytes</h1>
<p><em>-10 bytes thanks to inspiration from Giuseppe</em></p>
<pre class="lang-r prettyprint-override"><code>{b=n=1;\()(b&lt;&lt;-c(b,sample(7)))[n&lt;&lt;-n+1]}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LY5BCsIwEEX3PcXgagZbsW5StD2FS3WRhlaLaVKSCSjiATyDm7oQvJK3sdKu_ufzePzny_UfxxW7xhfvwHWSffFWFqZIN3skLPM8UVjGXradrlAQ0c4Mm5mnh_vEP-rGeRbLwsuu01dM12IZ18EobqzBC016JIomMlKScaZOlToDnySD1BqOzobOg61BgA8tsIVVBvivw5YuFoLWezOjSFm9Da3HVg7aC07OePg2Hur7MX8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A reuseable function that on each call returns a single random nunber in the range <code>1..7</code>, sampled across calls using the 'tetris' distribution.<br />
This is how I interpret the intent of the challenge.</p>
<p>A 62-byte recursive variant of this satisfies all 3 bonuses (<a href="https://ato.pxeger.com/run?1=ZY9NTgQhEIX3fQqCGyrSyZC4MOPgRRwXQINDbH4CdLRjPImbdmHilTyFV7Dano1xU1V5PL689_Zels_SbCu-yo-puf7669bJFy2jFDdHFngG71gAw5g-HHrDNK8q5NGyDAB3EbV4Ke45enqBZng9U76DFFfkgmRvHkkgqhFFmg-2y94aW6Vh1I0z5bRmP9iCh_ZlwGVUwzmkh_VOTzhPqVRLAWEqzqTN2ZJUSJyCtoUkRzZid66xZv4VoEMUo-ZkMcHgKz7qqfkU98dIodtqiN1uTVVlVTmPMxN7VLibolmd7Bn-UaFrSmP_v_9hq70s2_4B" rel="nofollow noreferrer">try it here</a>):</p>
<pre class="lang-r prettyprint-override"><code>f={b=n=1;\(m,p)if(m)c((b&lt;&lt;-c(b,sample(p)))[n&lt;&lt;-n+1],f(m-1,p))}
</code></pre>
<hr />
<h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 24 bytes</h1>
<pre class="lang-r prettyprint-override"><code>repeat cat(sample(7),&quot;&quot;)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGCpaUlaboWO4pSC1ITSxSSE0s0ihNzC3JSNcw1dZSUNCHSUFUw1QA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Alternative: a full program that outputs an infinite sequence of random permutations of <code>1..7</code>.<br />
This probably satisfies the letter of the challenge, and other answers have used this approach, although it does seem rather trivial.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 149 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>import System.IO.Unsafe
import System.Random
import Data.List
d(o,[])=d([],o)
d(o,p)=(\n-&gt;(n:o,p\\[n]))$(p!!)$unsafePerformIO$randomRIO(0,length p-1)
</code></pre>
<p><a href="https://tio.run/##VY69CsIwFEb3PkULGRJog4IgCnVyKQgVxantcCG3Ntj8kFwHnz5qwcHxnOF83wTxgfOckjbeBcqvr0hoZNPKm40wYvbvL2CVMz95BAJ50pEyxV3ZDaJWvBtKJxb2oua9rQ7c7j/Q950dhGDcF4VgzyV@xjC6YJqWhaV7aVq@Kme0d5pyX61FMqBt7YO2xAgemG92zIDnE4KSYyTBNGEAwlyxz/Rayu3w/ZHe" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://factorcode.org/" rel="noreferrer">Factor</a>, <s>63</s> 62 bytes</h1>
<pre class="lang-factor prettyprint-override"><code>[ 0 get [ 7 iota 7 sample &gt;vector dup 0 set ] when-empty pop ]
</code></pre>
<p><a href="https://tio.run/##tU@7CsJAEOz9iiH9iZ2gYCs2NmIVUmwuqwbv5d0lIYjfHlfzBRZOMw@GWfZCOvs4nU@H434D7W3dOpIkoWf95cSPjp3mBEeWU6CPjOQab3Hn6NggRM55DLF1Ga3HdiqxwpUzSqwlyCSUyAbD2M2zaLognSSdCsONnWIb8ojgA6rpuYCghCZjsET1d9tEuVsopRwPqOkqqsD8z497L2jD1PP0Bg" rel="noreferrer" title="Factor – Try It Online">Try it online!</a></p>
<p>A quotation (anonymous function) that takes no arguments and outputs one piece each time it is called. You can look in the bag in between function calls with <code>0 get</code>.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 11 bytes</h1>
<pre><code>{l|:SHaPOl}
</code></pre>
<p>This is a function that takes as an argument a list of possible piece values (implementing the first two bonuses) and returns a single piece each time it is called.</p>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgwU0dlZLUkqLM3My8_GIFK4VodU8FdX8F9RAFdS8FdR8F9WAF9ahYLpW81IoSBaulpSVpuharq3NqrII9EgP8c2ohIvt8FDIUqrkUAhQ0ICqRDNXkgipasABCAwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<p>We store the current state of the bag in the global variable <code>l</code>. Initially, <code>l</code> is <code>[]</code>.</p>
<pre><code>{l|:SHaPOl}
{         }  Define a function:
 l|:          If l is empty, set it to
    SHa       the function argument, randomly shuffled
       POl    Pop the first element from l and return it
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/DennisMitchell/jellylanguage" rel="nofollow noreferrer">Jelly</a>, <s>6</s> 5 bytes</h1>
<pre><code>ẊÐḶFY
</code></pre>
<p>Implements the first bonus</p>
<p>Runs until a pattern is repeated</p>
<p>-1 byte thanks to <a href="https://codegolf.stackexchange.com/users/53748/jonathan-allan">Jonathan Allan</a>!</p>
<p>How?</p>
<pre><code>ẊÐḶFY  : Main Link, One arg(Number of pieces)
Ẋ      : Shuffle; return a random permutation
 ÐḶ    : Loop; Repeat until the results are no longer unique
   F   : Flatten list
    Y  : Join z, separating by linefeeds
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700KzUnp3LBgqWlJWm6Fqse7uo6POHhjm1ukUuKk5KLocJLo5XMlWKhHAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, (4) 5 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>7ẊṄ€ß
</code></pre>
<p>A full program that prints forever.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///hrq6HO1seNa05PP/////mAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<p><span class="math-container">\$4\$</span> bytes - <code>ẊṄ€ß</code> - taking either an arbitrary alphabet size <a href="https://tio.run/##y0rNyan8///hrq6HO1seNa05PP////@GRgA" rel="nofollow noreferrer" title="Jelly – Try It Online">TIO</a> or an arbitrary alphabet (as a list) <a href="https://tio.run/##y0rNyan8///hrq6HO1seNa05PP/////R6smJJeo6Cuop@ekgKiMxt7gktQjETMsszgDRufmlxakgRlFiUlImWHF6PlBTLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">TIO</a>.</p>
<h3>How?</h3>
<pre><code>7ẊṄ€ß - Main Link: no arguments
7     - seven
 Ẋ    - (implicit range [1..7]) shuffle
   €  - for each:
  Ṅ   -   print with trailing newline
    ß - call this link again with the same arity
</code></pre>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.zsh.org/" rel="nofollow noreferrer">Zsh</a>, 35 bytes</h1>
<pre class="lang-bash prettyprint-override"><code>exec&lt;&lt;(while shuf -i1-7)
f()read -e
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724qjhjwYKlpSVpuhY3lVMrUpNtbDTKMzJzUhWKM0rTFHQzDXXNNbnSNDSLUhNTFHRTIUp3F6UWpCaWKJgoaEBZ5gpp1gqpyRn5mhAVMEMB" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Uniquely for zsh, this is a function <code>f</code>, not a full program.</p>
<p>If you want to cheat and output infinitely, you only need the <code>while shuf -i1-7</code>.</p>
<p>Setup:</p>
<ul>
<li><code>while shuf -i1-7</code>: repeatedly output the shuffled range 1 to 7</li>
<li><code>&lt;()</code>: create a pipe from the output of that loop</li>
<li><code>exec&lt;</code>: move that pipe to standard input</li>
</ul>
<p><code>f</code>:</p>
<ul>
<li><code>read</code>: read one word from standard input</li>
<li><code>-e</code>: and print it</li>
</ul>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 9 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>[7L.r)˜ć,
</code></pre>
<p>Uses a bag with integers <code>[1,2,3,4,5,6,7]</code>. Outputs the random piece indefinitely on separated newlines.</p>
<p><a href="https://tio.run/##yy9OTMpM/f8/2txHr0jz9Jwj7Tr//xsDAA" rel="nofollow noreferrer">Try it online.</a></p>
<ol>
<li>(9 bytes) Replace <code>7</code> with <code>I</code> for the first bonus, where <code>n</code> is given as input-integer: <a href="https://tio.run/##yy9OTMpM/f8/2tNHr0jz9Jwj7Tr//5sAAA" rel="nofollow noreferrer">try it online</a>.</li>
<li>(8 bytes) Replace <code>7L</code> with <code>I</code> for the second bonus, where the bag is given as input-list: <a href="https://tio.run/##yy9OTMpM/f8/2lOvSPP0nCPtOkC2UlJOopKOrqGBgY6usZ6RgbFlLAA" rel="nofollow noreferrer">try it online</a>.</li>
<li>(11 bytes) Add <code>Iô</code> after <code>˜</code> for the third bonus, where <code>n</code> is given as input-integer and it'll output those <code>n</code> items as a list each iteration: <a href="https://tio.run/##yy9OTMpM/f8/2txHr0jz9BzPw1uOtOv8/28MAA" rel="nofollow noreferrer">try it online</a>. <sub>Will use a combination of the existing list and a new shuffled list if the bag doesn't hold enough items anymore (e.g. let's say <span class="math-container">\$n=3\$</span> and the first two iterations where <code>[4,2,5]</code> and <code>[1,7,3]</code>, then the third iteration will be <code>[6,a,b]</code>, where the <code>6</code> is from the existing bag, and <code>a,b</code> are two random integers from a new bag).</sub></li>
</ol>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>[          # Loop indefinitely:
 7L        #  Push a list in the range [1,7]
   .r      #  Randomly shuffle it
     )     #  Wrap the entire stack into a list
      ˜    #  Flatten it to a single list
       ć   #  Extract head; pop and push remainder-list and first item separately
        ,  #  Pop and output this first item
</code></pre>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="noreferrer">Vyxal</a>, 5 bytes</h1>
<p>Inspired by <a href="https://codegolf.stackexchange.com/users/52210/kevin-cruijssen">Kevin Cruijssen's</a> <a href="https://codegolf.stackexchange.com/a/256676/96037">05AB1E answer</a><br />
6 bytes without the bonus:</p>
<pre><code>{7Þ℅⟑,
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCJ7N8Oe4oSF4p+RLCIsIiIsIiJd" rel="noreferrer">Try it Online!</a></p>
<p><strong>Explanation</strong></p>
<pre><code>{7Þ℅⟑,
{         Loop forever
 7Þ℅      Random permutaton of range(7)
    ⟑,    Lazily evaluated lambda, print each item
</code></pre>
<p>Bonuses:</p>
<ul>
<li>5 bytes for <em>Arbitrary n items</em>: <a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCJ7w57ihIXin5EsIiwiIiwiNSJd" rel="noreferrer"><code>{Þ℅⟑,</code></a>. Implicitly takes an integer as the input.</li>
<li>5 bytes for <em>Generic bag</em>: <a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCJ7w57ihIXin5EsIiwiIiwiW1wiY29va2llXCIsIFwiY29va2lcIiwgXCJjb2tpZVwiXSJd" rel="noreferrer"><code>{Þ℅⟑,</code></a>. Implicitly takes a list as the input. Same program as above :P</li>
<li>8 bytes for <em>Draw n items</em>: <a href="https://vyxal.pythonanywhere.com/#WyIiLCIiLCJ7N8Oe4oSFP+G6juKfkSwiLCIiLCI1Il0=" rel="noreferrer"><code>{7Þ℅?Ẏ⟑,</code></a>. Slices the list until the input before applying it to the lambda.</li>
</ul>
</div>
<div id="pu20" class="pu"><h1>Excel (ms365), 121 bytes</h1>
<p><a href="https://i.stack.imgur.com/traKF.png" rel="noreferrer"><img src="https://i.stack.imgur.com/traKF.png" alt="enter image description here" /></a></p>
<p>Formula in <code>A1</code>:</p>
<pre><code>=LET(p,7,n,8,DROP(TAKE(REDUCE(0,SEQUENCE(ROUNDUP(n/p,0)),LAMBDA(a,b,VSTACK(a,SORTBY(SEQUENCE(p),RANDARRAY(p))))),n+1),1))
</code></pre>
<p>Idea here is that:</p>
<ul>
<li>'p' - Represents the amount of distinct items in our bag;</li>
<li>'n' - Represents the amount of tokens we take out of the bag at once (with refilling it offcourse). You may change this to any reasonable integer;</li>
<li>'SEQUENCE(p)' - Represents our array. In this specific case we create an array of integers, but <code>SORTBY()</code> can take any array of any type. This however will start changing byte-count!</li>
</ul>
<p>Below another sample where 'n' == 14 and another one where 'n' == 14 and 'p' == 3:</p>
<p><a href="https://i.stack.imgur.com/58TrL.png" rel="noreferrer"><img src="https://i.stack.imgur.com/58TrL.png" alt="enter image description here" /></a><a href="https://i.stack.imgur.com/8ESCf.png" rel="noreferrer"><img src="https://i.stack.imgur.com/8ESCf.png" alt="enter image description here" /></a></p>
</div>
<div id="pu21" class="pu"><h1><a href="https://nodejs.org" rel="noreferrer">JavaScript (Node.js)</a>, 62 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=_=&gt;x.match(i=Math.random()*7|0)?f(x=x[6]?'':x):(x+=i,i);x=''
</code></pre>
<p><a href="https://tio.run/##BcFRDoIwDADQfy@y1unClwZm5QSewBjTDCYzQM1YTD@8@3zvzV/eQk6fclxlGGuN9KSruoVLmCDRjcvkMq@DLID786/BPoKS3k@P3phOsQO1lA4JvZIx1e@iZGBqPF/a1lvLGGTdZB7dLC@IgFj/" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>I hope I understood question correctly</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/256674/">256674</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




