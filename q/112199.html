<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::112199</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>362</td><td>Python3</td><td>240124T233315Z</td><td><a href="https://codegolf.stackexchange.com/questions/112199/help-me-juice-my-avocados/269537#269537">Ajax1234</a></td></tr>
<tr d-ix="1"><td>350</td><td>Mathematica —</td><td>170308T003626Z</td><td><a href="https://codegolf.stackexchange.com/questions/112199/help-me-juice-my-avocados/112272#112272">Not a tr</a></td></tr>
</table>
<div id="pu0" class="pu"><h2>Python3, 362 bytes</h2>
<pre class="lang-py prettyprint-override"><code>E=enumerate
M=[(0,1),(0,-1),(1,0),(-1,0)]
def f(a):
 q=[({(x,y):u for x,r in E(a)for y,u in E(r)},[])]
 while q:
  m,j=q.pop(0)
  if{3}=={*m.values()}:return j
  for x,y in m:
   for G,s in[('S',M[:2]),('G',M[2:]),('R',M)]:
    if len(S:=[(x+X,y+Y)for X,Y in s+[(0,0)]if(C:=(x+X,y+Y))in m])==len(O:={C:m[C]+1for C in S if m[C]+1&lt;=3}):q+=[({**m,**O},j+[(G,x,y)])]
</code></pre>
<p><a href="https://tio.run/##bVFNb9swDD3Pv0LIxZKtBrHUQyFMp6TIqSvQXFqoQuGh8urAX/HHFsPwb89IO8kwIAeTfI@PpElVfftVFvKhqk@nR@2KLnd13DrvSRu64hHjYO/QRXwF9g6d9T5dQhIaM@WRAwgHeuQ9Ux1JypoceU3SgjxCGmHPuxnWbOTGQjH585VmjhygmOR8rw/LqqzoigFMk0GOWg9BvvwdZ51rKBtV7dquLsge8hs9@FtfDSP3d7N7QTdCah7d46wcO0/EljdAGApq/mSUsLACNIBYqCl@gZjZSQ/DSeYKulOw0TF85X34Nm3wyt@waxPiRWD7NKFrpa8ShhMt0xqLn5Ue1io3axtGWLvGyh22nrnvWo5MbczWmmkWsxrB8pdr6UzgjWDSEAQ5D4Lnke8BbTkeeDretFeKbTfTb0PrjUmtOoQavcnjI8WA2RO@Ult@/Czj@pM28Fjfzqc0JsjjiqZFy0nK7LVjkmatq@mPsnCcNMumytKW@u@Fz2Cy10REk8Vi4UkhPRGJySNuxCUhkY1E5MGHGnkWyLNACCkEWHG1EppIsPIivb9KIYF5qIj@Q2JG8oJQXdWwDE3ov3UjxtgNWtym5W36HujTXw" rel="nofollow noreferrer">Try it online!</a></p>
<p>The code above is a basic brute-force solution. However, it times out for the last test case, so below is an optimized solution (at the cost of 101 bytes) that solves all the test cases in a far more reasonable amount of time:</p>
<h2>Python3, 463 bytes</h2>
<pre class="lang-py prettyprint-override"><code>E=enumerate
M=[(0,1),(0,-1),(1,0),(-1,0)]
def f(a):
 q=[({(x,y):u for x,r in E(a)for y,u in E(r)},[])]
 while q:
  m,j=q.pop(0)
  if{3}=={*m.values()}:return j
  D={'G':{},'S':{},'R':{}}
  for x,y in m:
   for G,s in[('S',M[:2]),('G',M[2:]),('R',M)]:
    if len(S:=[(x+X,y+Y)for X,Y in s+[(0,0)]if(C:=(x+X,y+Y))in m])==len(O:={C:m[C]+1for C in S if m[C]+1&lt;=3}):D[G][len(S)]=D[G].get(len(S),[])+[({**m,**O},j+[(G,x,y)])]
  for i in D:
   if D[i]:q+=D[i][max(D[i])]
</code></pre>
<p><a href="https://tio.run/##bVFNb9swDD3Pv0LIxZKtBrHUQyFMp6TIqSvQXFqoQuGh8urAX/HHFsPwb89IO8kwIAeTfI@PpElVfftVFvKhqk@nR@2KLnd13DrvSRu64hHjYO/QRXwF9g6d9T5dQhIaM@WRAwgHeuQ9Ux1JypoceU3SgjxCGmHPuxnWbOTGQjH585VmjhygmOR8rw/LqqzoigFMk0GOWg9BvvwdZ51rKBtV7dquLsge8hs9@FtfDSP3d7N7QTdCah7d46wcO0/EljdAGApq/mSUsLACNIBYqCl@gZjZSQ/DSeYKulOw0TF85X34Nm3wyt@waxPiRWD7NKFrpa8ShhMt0xqLn5Ue1io3axtGWLvGyh22nrnvWo5MbczWmmkWsxrB8pdr6UzgjWDSEAQ5D4Lnke8BbTkeeDretFeKbTfTb0PrjUmtOoQavcnjI8WA2RO@Ult@/Czj@pM28Fjfzqc0JsjjiqZFy0nK7LVjkmatq@mPsnCcNMumytKW@u@Fz2Cy10REk8Vi4UkhPRGJySNuxCUhkY1E5MGHGnkWyLNACCkEWHG1EppIsPIivb9KIYF5qIj@Q2JG8oJQXdWwDE3ov3UjxtgNWtym5W36HujTXw" rel="nofollow noreferrer">Try it online!</a></p>
<p>Further optimizations could be added, including flood fills to check that a juicing process does not strand unjuiced avocados in a patch that can never be reached again.</p>
</div>
<div id="pu1" class="pu"><h2>Mathematica — 350 bytes</h2>

<p>Not a very short solution, but better than no solution at all, right?</p>

<pre><code>t[x_]:=Flatten@Table[x/@{G,S,R},{i,n},{j,n}];""&lt;&gt;Cases[StringReplace[(First@Solve[(Table[G[i,j]+G[i-1,j]+G[i+1,j]+S[i,j]+S[i,j-1]+S[i,j+1]+R[i,j]+R[i-1,j]+R[i+1,j]+R[i,j-1]+R[i,j+1],{i,n=Length@#},{j,n}]/.(G|S|R)[___,0|n+1,___]-&gt;0)==3-#&amp;&amp;And@@t[#[i,j]&gt;=0&amp;],t[#[i,j]&amp;],Integers])/.{(x_-&gt;m_):&gt;ToString[m x]},{"["-&gt;" ","]"-&gt;"\n",", "-&gt;","}],Except@"0"]&amp;
</code></pre>

<p>A more readable version (with extra spaces and indents and stuff):</p>

<pre><code>t[x_] := Flatten@Table[x /@ {G, S, R}, {i, n}, {j, n}]; 
"" &lt;&gt; Cases[
   StringReplace[(First@
       Solve[(Table[
             G[i, j] + G[i - 1, j] + G[i + 1, j] + S[i, j] + 
              S[i, j - 1] + S[i, j + 1] + R[i, j] + R[i - 1, j] + 
              R[i + 1, j] + R[i, j - 1] + R[i, j + 1], {i, 
              n = Length@#}, {j, n}] /. (G | S | R)[___, 
              0 | n + 1, ___] -&gt; 0) == 3 - # &amp;&amp; 
         And @@ t[#[i, j] &gt;= 0 &amp;], t[#[i, j] &amp;], 
        Integers]) /. {(x_ -&gt; m_) :&gt; ToString[m x]}, {"[" -&gt; " ", 
     "]" -&gt; "\n", ", " -&gt; ","}], Except@"0"] &amp;
</code></pre>

<p>Input is an array (e.g. <code>{{3,2,3},{2,2,2},{3,2,3}}</code>), output is a string (with a trailing newline — if this is unacceptable, enclose the function in <code>StringDrop[...,-1]</code> for an extra 15 bytes). I used the coordinate system that says (1,1) is the top-left corner, (n,n) is the bottom right (where n is the dimension of the matrix). Sometimes, if the solution requires doing the same operation multiple times, the output includes things like <code>3 G 2,2</code> (for "use the grater at (2,2) three times") — since you didn't say what to do in this case, I hope that's OK.</p>

<p>Explanation:</p>

<ul>
<li><code>Table[G[i,j]+G[i-1,j]+G[i+1,j]+S[i,j]+S[i,j-1]+S[i,j+1]+R[i,j]+R[i-1,j]+R[i+1,j]+R[i,j-1]+R[i,j+1],{i,n=Length@#},{j,n}]</code> creates an array with the variables G[i,j] in each place that's affected by using the grater at (i,j), and similarly for S[i,j] and R[i,j]. These variables represent the number of times the tool is used at that position.</li>
<li><code>.../.(G|S|R)[___,0|n+1,___]-&gt;0</code> removes the effects of using tools at positions outside the avocado field.</li>
<li><code>...==3-#</code> compares this to the difference between the input and a field of perfectly juiced avocados.</li>
<li><code>...&amp;&amp;And@@t[#[i,j]&gt;=0&amp;]</code> says the variables G[i,j], S[i,j], R[i,j] must be non-negative (you can't un-juice the avocados!), using the shorthand <code>t[x_]:=Flatten@Table[x/@{G,S,R},{i,n},{j,n}]</code>.</li>
<li><code>First@Solve[...,t[#[i,j]&amp;],Integers]</code> finds the first integer solution to our equations in terms of the variables G[i,j], S[i,j], R[i,j].</li>
<li><code>/.{(x_-&gt;m_):&gt;ToString[m x]}</code> hides the variables that equal zero, while also putting the solution in a nice string form.</li>
<li><code>StringReplace[...,{"["-&gt;" ","]"-&gt;"\n",", "-&gt;","}]</code> turns strings like <code>"2 G[1, 4]"</code> into strings like <code>"2 G 1,4"</code>, and adds a newline on the end.</li>
<li><code>""&lt;&gt;Cases[...,Except@"0"]</code> removes all the leftover <code>"0"</code>s and joins all the strings together.</li>
</ul>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/112199/">112199</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




