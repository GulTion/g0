<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::272110</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>254</td><td>Charcoal</td><td>240328T140808Z</td><td><a href="https://codegolf.stackexchange.com/questions/272110/implement-a-2-player-version-of-1d-chess/272171#272171">Neil</a></td></tr>
<tr d-ix="1"><td>513</td><td>Python 3</td><td>240327T061553Z</td><td><a href="https://codegolf.stackexchange.com/questions/272110/implement-a-2-player-version-of-1d-chess/272111#272111">Alec</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 254 bytes</h1>
<pre><code>≔KNR..rnkη≔⁰ζＷ∧›⁶№η.Φ⪪⭆η⭆η⭆×‹№⎇ζβαμ∧№⎇ζβακ§⟦⁼¹↔⁻νλ⁼²↔⁻νλ⬤η∨⁼ξ.›¹×⁻πν⁻λπ⟧⌕KNR↥κη⎇⁼πλ.⎇⁼πνκξ⁸∧∧⊖↔⁻⌕κK⌕κk⬤⌕Ａκ§nNζ⁻²↔⁻μ⌕κ§Kkζ⬤⌕Ａκ§rRζ¬⬤κ∨⁼ξ.›¹×⁻πμ⁻⌕κ§Kkζπ«§wbζηＤ⎚Ｓθ≔⭆η⎇⁼λＩ§θ⁰.⎇⁼λＩ§θ¹§ηＩ§θ⁰κδ¿№ιδ«≔δη≦¬ζ»»¿∨⊙⌕Ａη§nNζ⁼²↔⁻ι⌕η§Kkζ⊙⌕Ａη§rRζ⬤η∨⁼λ.›¹×⁻μι⁻⌕η§Kkζμ§bwζsη
</code></pre>
<p><a href="https://tio.run/##lVPfb9owEH6Gv@LkJ0fyUCmFTeoTottUsbKp7Z6mPQTwGiuOCXYyaKv@7ewudoJok02LFIjvl7/77rtVEtvVJtaHw9Q59WA4my9uBwNrUiYgiS77wXwm4AlPu0RpCXxq1vyzlXEhLZ8ImG1KU/BEABuwKBLwSWny3OVaFfyusMo83MQ5BXQc7lUmHf8ineO@1r20JraP/EnAUkCMNTN86douf0r@4tqs5Z7/@LgtY@34EE1Lt9FlIfmNMqXjRoCOCGKIOO@OmGpNIL9aHmL3vj8BdedY3gP3mbkAg15/0ALyiJ6fRAfiJl6R0u95Lu0qdpKnlZtIxjKhnXBTThiq29pcdEkqYB/yPwRi6L2SKyszaQqJ59O@KhCYxuYsCpDolLKo6ZaM9J8emWRmwWjyTV9vCcuO1Zqseeqzor8Xt7d18cWm4MH7X4RnDbBODPUg8IHnfu8bag7vqqN2Sx91WXtI872rMss5fcy0jG31dW3ysvCK5VsyhMU4UfSrYaEIZrE73rYVcFYR0jbZluChZy8Ykq5qafW7JlDqF4QNUWSpOq6Rrv1C93oINpiQdr/XvZf@S5@Skf2peWymlbRKoXN5VNBC0qEFUmp78aMU3uyd/ocMUIDqVAZJqwyyCF4Nf7kLwwepnQxe5hgS0ojhcBiOYHIBozG8n8A5fo9hNITxBIYXh3e/9R8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔KNR..rnkη≔⁰ζ
</code></pre>
<p>Start with the initial position with white to play.</p>
<pre><code>Ｗ∧›⁶№η.Φ⪪⭆η⭆η⭆×‹№⎇ζβαμ∧№⎇ζβακ§⟦⁼¹↔⁻νλ⁼²↔⁻νλ⬤η∨⁼ξ.›¹×⁻πν⁻λπ⟧⌕KNR↥κη⎇⁼πλ.⎇⁼πνκξ⁸∧∧⊖↔⁻⌕κK⌕κk⬤⌕Ａκ§nNζ⁻²↔⁻μ⌕κ§Kkζ⬤⌕Ａκ§rRζ¬⬤κ∨⁼ξ.›¹×⁻πμ⁻⌕κ§Kkζπ«
</code></pre>
<p>Loop over all pairs of starting square (which must contain a piece of the current player's colour) and ending square (which must not) and filter out those that aren't legal moves for the given piece and then filter out those that move into check. If the resulting list is not empty:</p>
<pre><code>§wbζηＤ⎚
</code></pre>
<p>Output the current player and position.</p>
<pre><code>Ｓθ≔⭆η⎇⁼λＩ§θ⁰.⎇⁼λＩ§θ¹§ηＩ§θ⁰κδ
</code></pre>
<p>Input the (0-indexed) move and calculate the resulting position.</p>
<pre><code>¿№ιδ«≔δη≦¬ζ
</code></pre>
<p>If this is one of the legal positions then set this as the current position and switch player.</p>
<pre><code>»»¿∨⊙⌕Ａη§nNζ⁼²↔⁻ι⌕η§Kkζ⊙⌕Ａη§rRζ⬤η∨⁼λ.›¹×⁻μι⁻⌕η§Kkζμ§bwζsη
</code></pre>
<p>If the current player is in check then show that the other player won otherwise show that the current position is a tie.</p>
</div>
<div id="pu1" class="pu"><h1>Python 3, <s>836</s> 513 bytes</h1>
<pre><code>def v(f,s,e):a=1-(f[s]in P[t][1:])+(f[e]in P[t])+any(f[s].upper()==p!='RKN.....NK'[s-e]for p in&quot;R&quot;*(1-r(f,s,e))+&quot;KN&quot;);f[s],f[e]=d,f[s];return a&lt;1&gt;c(f,f.index)!=s-e
c=lambda f,i:[(N in f and abs(i(N)-i(K))==2)+(R in f and r(f,i(R),i(K)))for K,N,R,_ in P][~t]
r=lambda f,s,e:{*f[s+1:e]+f[e+1:s]}&lt;={d}
t=1
d,*b='.KNR..rnk'
P=&quot;Knrk&quot;,&quot;kNRK&quot;
R=range(8)
J=''.join
while any(v(b[:],s,e)for s in R for e in R)*6&gt;b.count(d):
    print('bw'[t]+J(b));*n,=b
    if v(n,*map(int,input())):b,t=n,1-t
print(&quot;SBW&quot;[~t*c(b,b.index)]+J(b))
</code></pre>
<p>Much shorter thanks to Mukundan314, Jonathan Allan, and
l4m2. <a href="https://tio.run/##RZFBb@MgEIXPnV9BuRhsbImmya6c0sMea8mKvIc9WKiCGG/ZtMTCpN2qav96FrKpyumJebz5Zphew8PeLY7HwYzomYxsZobWSvCSjP0srUObPsie15IW8cZ83tBCudeTpTpMk/GECjFdiqxr2iqdtsn6uTRy3Hs0Ietwh3PCS3/uQAvctJiuUwBLsWJgSa@9CQfvkLrht9voHSvrBvOXXooYBlvxqJ70oNDIbN2TNuaiESk3IKVnYklLS0saGlGuIm33VU5tLekoO5VpgmpYyzp2nzwb2X8ECf4rPSLWb3kEKnhtZBEBo5jl@414G94hCA4Dy7XIqqbtqsq7XQYbgRvnd5jhXds1GDrhlfttyHcKdyLLqj976@DlwT4alDb3THRfy9MuEs2cODqUpDlJmq9udbXdH1wgA63hYvI2yky/ZHH7xR3RlK5zx4SGC5t@zrH8SU0kmph10yGQOGetWRCO8TLA/@f4549fOA6bb4lm@rzbc9rxyBewuobFEr6t4CrqJSw4LFfAr/8B" rel="nofollow noreferrer">Try it online!</a></p>
<p><a href="https://tio.run/##dVJNj9owED3jX@H6YltrImVZaBWte@gVKQd66AFxiMHuprBOZJul/Ho64w00rNpII2XGb@a9@ejP6aXzs8tlZx19E05FZWVFJo0WSWt2Yo3fCbeOG98l2nq2rFesC9St7WbwpOxCxpqP2L0PIyx6GYsIzN0jnjYmiji18pMuR4@1z49Y6ArQ@nEEWIUbIAyqJZk47Ypt158F/gNQIbfmBVfokUmw6Rg8ZomGgrStcJC21Yfm1ewa6qpR04J51nrq6FWlK1q/s78xLqc3ZwlNDdJY@JuAom4YaFzdJcgPQxOsZvTfZPWYbD8iW/2HDDai6F0GfCTcesRZVSI@25wKc3koK7uBsR19EqxgQGCncZq3Eb9eURZQ8R4FSwEUMXrNl1zxGmwFVgwWwDzYnm9I0vzEyemlPWC9s3gTJq/MwQ4iNh4a/9OKLzlgxwGJ9GbghbryeQHX2YcW3PTAefGra70wuHwoqF@bXsCTan1/TAKjLZ71O1tl8CQMnIRK@Siyzw0HDOwCJNpDtKj0vT6s5Ru7e2M/mITAFgiz@53JsYbLpZyRxROZzcnnBXmE/zmZlWS@IOXTHw" rel="nofollow noreferrer">836 byte version</a> matches up a bit more with the un-golfed explanation. The logic is similar to most chess programs. The core is about checking if a move is valid, i.e.:</p>
<ul>
<li>the start and end positions are valid</li>
<li>the piece movement is legal</li>
<li>the movement does not put yourself in check</li>
</ul>
<p>Un-golfed functions are as follows:</p>
<pre><code>def v(f, s, e):  # Check if a move is valid
    # Check valid start and end positions
    if t==&quot;w&quot; and (b[s] not in &quot;KNR&quot; or b[e] in &quot;KNR&quot;):  return False
    if t==&quot;b&quot; and (b[s] not in &quot;knr&quot; or b[e] in &quot;knr&quot;):  return False

    # Check correct movement
    if b[s] in &quot;Kk&quot; and abs(s-e) != 1:  return False
    if b[s] in &quot;Nn&quot; and not abs(s-e) == 2: return False
    if b[s] in &quot;Rr&quot; and not r(b, s, e): return False
    
    # Check if move puts own king in check
    f = f.copy()
    f[s], f[e] = '.', f[s]
    if c(f): return False
    
    return True

def c(f):  # Is in check
    if t==&quot;w&quot;:
        K = f.index(&quot;K&quot;)
        if &quot;n&quot; in f and abs(f.index(&quot;n&quot;)-K) == 2: # black knight can hit king
            return True
        if &quot;r&quot; in f and r(f, f.index(&quot;r&quot;), K): # black rook can hit king
            return True
    if t==&quot;b&quot;:
        k = f.index(&quot;k&quot;)
        if &quot;N&quot; in f and abs(f.index(&quot;N&quot;)-k) == 2: # white knight can hit king
            return True
        if &quot;R&quot; in f and r(f, f.index(&quot;R&quot;), k): # white rook can hit king
            return True
    return False

def r(f, s, e): # Rook can move from s to e (i.e. there are no pieces in-between)
    if s &lt; e and f[s+1:e].count(&quot;.&quot;) == e-s-1:
        return True
    if s &gt; e and f[e+1:s].count(&quot;.&quot;) == s-e-1:
        return True
    return False

</code></pre>
<p>and the while loop just checks:</p>
<ul>
<li>there is any valid move <code>any(v(b, s, e) for s in range(8) for e in range(8))</code></li>
<li>the board doesn't only have kings on it <code>b.count('.')&lt;6</code></li>
</ul>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/272110/">272110</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




