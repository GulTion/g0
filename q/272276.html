<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::272276</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>008</td><td>Vyxal</td><td>240403T052721Z</td><td><a href="https://codegolf.stackexchange.com/questions/272276/odds-for-second-smallest-prime-factor/272277#272277">emanresu</a></td></tr>
<tr d-ix="1"><td>028</td><td>Charcoal</td><td>240403T082150Z</td><td><a href="https://codegolf.stackexchange.com/questions/272276/odds-for-second-smallest-prime-factor/272285#272285">Neil</a></td></tr>
<tr d-ix="2"><td>009</td><td>05AB1E</td><td>240403T074030Z</td><td><a href="https://codegolf.stackexchange.com/questions/272276/odds-for-second-smallest-prime-factor/272284#272284">Kevin Cr</a></td></tr>
<tr d-ix="3"><td>013</td><td>05AB1E</td><td>240403T065956Z</td><td><a href="https://codegolf.stackexchange.com/questions/272276/odds-for-second-smallest-prime-factor/272283#272283">Command </a></td></tr>
<tr d-ix="4"><td>011</td><td>Jelly</td><td>240403T061638Z</td><td><a href="https://codegolf.stackexchange.com/questions/272276/odds-for-second-smallest-prime-factor/272281#272281">Bubbler</a></td></tr>
<tr d-ix="5"><td>011</td><td>Jelly</td><td>240403T061253Z</td><td><a href="https://codegolf.stackexchange.com/questions/272276/odds-for-second-smallest-prime-factor/272280#272280">hyper-ne</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 8 bytes</h1>
<pre><code>¡ƛǏḣh;=ṁ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCLCocabx4/huKNoOz3huYEiLCIiLCI3Il0=" rel="nofollow noreferrer">Try it Online!</a>
-2 thanks to tsh, -1 thanks to lyxal.</p>
<pre><code> ƛ   ;   # Map over range from 1 to...
¡        # n!
   ḣh    # Is the second element of
  Ǐ      # The prime factors of the number
      =  # Equal to the input
       ṁ # Take the mean of all those 1s/0s to get the probability
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 28 bytes</h1>
<pre><code>Ｎθ≔Φ…²θΠ﹪ι…²ιηＩ∕↨÷Π⊖η⊖η¹×θΠη
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iOSOxKDk_MWfBgqWlJWm6Fjd3eOYVlJb4leYmpRZpFGpaczkWF2em52m4ZeaUAEWCEvPSUzWMdBQKNXUUAoryU0qTSzR8gVROvkamjgJcOlMTCHQUMoAGBBRl5pVoOCcWl2i4ZJZlpqRqOCUWp2p45pVAuTBjXFKTi1JzU_NKUlM0MkC6MQQMgTgkMze1WKMQYXsGyCpN6yXFScnFUF8sj1bSLctRil1oCuEDAA" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: Port of @Bubbler's formula.</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>≔Φ…²θΠ﹪ι…²ιη
</code></pre>
<p>Get the primes below <code>n</code>.</p>
<pre><code>Ｉ∕↨÷Π⊖η⊖η¹×θΠη
</code></pre>
<p>Vectorised divide the product of the decremented primes by the decremented primes, take the sum, and divide by the product of <code>n</code> and the primes. (The sum is taken using base <code>1</code> as this works for zero elements.)</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 9 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>!Lfζ1èQÅA
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/272277/52210"><em>@emanresuA</em>'s Vyxal answer</a>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f9f0Sft3DbDwysCD7c6/v9vDgA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/W9xuLWgrNJeSeFR2yQFJftKl/@KPmnnthkeXhF4uNXxv85/AA" rel="nofollow noreferrer">verify the smaller test cases</a> (the larger ones time out).</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>!          # Take the factorial of the (implicit) input-integer
 L         # Pop and push a list in the range [1,n!]
  f        # Map each value to an inner list of its unique prime factors
   ζ       # Zip/transpose; swapping rows/columns,
           # using &quot; &quot; as filler for unequal length rows
    1è     # Pop and leave the second row of this matrix (0-based 1st row)
      Q    # Check for each item whether it's equal to the (implicit) input
           # (which will always be falsey for the spaces)
       ÅA  # Pop and take the arithmetic mean of these 0s and 1s
           # (which is output implicitly as result)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 13 bytes</h1>
<pre><code>&lt;ÅP&lt;Ð&gt;/Ps/Os/
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m73MwDQxyTB1wYKlpSVpuhbrbQ63BtgcnmCnH1Cs71-sv6Q4KbkYKrdgkaElhAUA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Directly computes the answer. This seems way too long.</p>
<p>Roughly equivalent to</p>
<pre class="lang-python prettyprint-override"><code>p = input()
a = primes_lt(p)
return sum(product((a-1)/a)/(a-1))/p
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 11 bytes</h1>
<pre><code>ÆRµṖ’P-ƤS÷P
</code></pre>
<p><a href="https://tio.run/##y0rNyan8//9wW9ChrQ93TnvUMDNA99iS4MPbA/4fbn/UtOb//2gjHQVjHQVTHQVzHQVDQyAG8gxBbMtYAA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Let <span class="math-container">\$P = p_1, p_2, \cdots, p_k\$</span> be the list of primes strictly less than the input prime <span class="math-container">\$p\$</span>. Then, the chance that a number is a multiple of <span class="math-container">\$p_i\$</span> but not <span class="math-container">\$p_1, \cdots, p_{i-1}, p_{i+1}, \cdots, p_k\$</span> is equal to <span class="math-container">$$\frac{(p_1-1)(p_2-1) \cdots (p_{i-1}-1) (p_{i+1}-1) \cdots (p_k-1)}{p_1 p_2 \cdots p_k}$$</span></p>
<p>and since such cases are pairwise disjoint, we can sum them and divide by <span class="math-container">\$p\$</span> (meaning that the chosen number is a multiple of <span class="math-container">\$p\$</span>). The denominators are all equal, so the code computes the sum of the numerators and divides by the product of all primes under <span class="math-container">\$p\$</span>, including <span class="math-container">\$p\$</span>.</p>
<pre><code>ÆR            List of primes under p, including p
  µ           Set the list as the argument of the rest
   Ṗ          Remove p from the list
    ’         Decrement each number
     P-Ƥ      Products of outfixes
        S     Sum
         ÷P   Divide by product of all primes
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jellylanguage" rel="nofollow noreferrer">Jelly</a>, 11 bytes</h1>
<pre><code>!ÆfQḊḢƲ€ċ÷!
</code></pre>
<p><a href="https://jht.hyper-neutrino.xyz/tio#WyIiLCIhw4ZmUeG4iuG4osay4oKsxIvDtyEiLCIiLCIiLFsiNyJdXQ==" rel="nofollow noreferrer">Try It Online!</a></p>
<p>Same idea as the <a href="https://codegolf.stackexchange.com/a/272277">Vyxal answer</a>, which is the observation that we can just look at <code>1</code> through <code>N!</code>. Unfortunately, this is much longer in Jelly due to chaining rules and certain built-ins. For example, Jelly has no &quot;unique prime factors&quot; built-in so we have to get the prime factorization and then deduplicate it. Getting the prime factorization itself takes an extra byte as well. Finally, since arithmetic mean is two bytes, it's less efficient (because of chaining rules) to do it the way the Vyxal answer did it at the end.</p>
<h3>Explanation</h3>
<pre><code>!ÆfQḊḢƲ€ċ÷!    Main Link
!              Factorial
       €       For each from 1 .. N!
 Æf                Get its prime factorization
   Q               Remove duplicates
    Ḋ              Remove the first element
     Ḣ             Get the first element (0 if the list is empty)
        ċ      Count occurrences of N
         ÷     Divide by
          !    N!
</code></pre>
<h3>Other Ideas</h3>
<p><code>!ÆfQiɗ€ċ2÷!</code> is also 11 bytes which instead checks for the index of <code>N</code> in each array and counts the number of <code>2</code>s.</p>
<p>This also lets us do <code>!ÆfQiɗ€=2Æm</code> for 11 bytes which checks for equality with <code>2</code> to get a bit array and then takes the mean like the Vyxal answer does. Having <code>=2</code> instead of just <code>=</code> saves us from needing to un-chain the <code>=</code> and <code>Æm</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/272276/">272276</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




