<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::169923</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>220</td><td>Python 2</td><td>180803T125029Z</td><td><a href="https://codegolf.stackexchange.com/questions/169923/bridge-deal-scoring/169924#169924">TFeld</a></td></tr>
<tr d-ix="1"><td>192</td><td>JavaScript Node.js</td><td>180804T010530Z</td><td><a href="https://codegolf.stackexchange.com/questions/169923/bridge-deal-scoring/169956#169956">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>230</s> <s>225</s> <s>221</s> 220 bytes</h1>

<p>I've posted this answer, as I found out the rules while creating this answer to the other question.</p>



<pre class="lang-python prettyprint-override"><code>def f(D,V):v,s=D[:2];d=D.count('X');m=int(D.split()[1]);v=int(v);C=3-(s&lt;'E');P=(v*C+(s=='N'))*2**d;W=-~V;return[-~W*25*max(0,v-5)+P+m*[C,10*W,20*W][d]+5*d+[5,30+20*V][P&gt;9],((m-W)*3+7+~-V*max(0,m+3))*d*10or+W*m*5][m&lt;0]*10
</code></pre>

<p><a href="https://tio.run/##dc9Na8IwGAfw@z5FYIe8S9LYdrPGS7urCJO2EHIYqzJhUWlr2S5@9S6oGzm4HB7Cnx/Py/G7/zjso3FsNluwRQUr8WxgnS7MLLJZo4vJ@@G07xGsIc6c3vlvMemOn7seYSMtzoZLNuAs14qjbg5fPFxpNJCcok5ruIQYk4iQJqs0P5dZu@lP7d7wc0WimLi3LyTYwGNMV9QRkzMpSMUiX6xpLI1JQ03MlKA@Kq1ZLZ4tQ8jxChNFU3rm5a2Ho8oPaogUh5ZWxJHYGjcX1gfjsfVL@vOgfAUCMiAwuL1HoBfgSTz8CbVcAyoDcxFTdY/IkCQhSfL6DpHpNDDTAvCQXA2XIjDpcl3XPlO/C11NKv5DMkCJR@MP" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<hr>

<p>Saved: </p>

<ul>
<li>-4 bytes, thanks to Mr. Xcoder</li>
<li>-1 byte, thanks to Jonathan Frech</li>
</ul>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, <s>211</s> <s>204</s> <s>195</s> 192 bytes</h1>



<pre class="lang-javascript prettyprint-override"><code>(r,v,[,c,s,d,t]=r.match(/(.)(.T?)(X*)(.*)/),l=d.length,m=s&gt;'D',g=(c*(m+=2)+!!s[1])&lt;&lt;l)=&gt;10*(t&lt;0?10*(l*(v?3*t+1:-"13"[~t]||3*t+4)||t):g+(10*l*-~v||m)*t+5*l+25*(c&gt;5&amp;&amp;(5-c)*~-~v)+5*(g&gt;9?4*v+6:1))
</code></pre>

<p><a href="https://tio.run/##jdA7b4MwFAXgvb@iYUjutQ3BPFKV8hiaOUsZkBADMo@0MlCBy4T469RZOlRV1Okene9M96Ocy0mM75/K7Ieq3ppog5HNLGeCTaxiqohGqyuVuMIRLAQrTRAyogPBIzIZVZas@1ZdWRdN8eF8YG0EXSKIS3e7KedFIIiDYSgxirlNQIV2cruSwJy4RFEemAZ3jXxVxbLcCg@XRWHQUtA7Scx1XpaOOqjJJ5I6PgER@/s9@KZAsmpHDdDGz4lHZnoKOOImhn4aZG3JoYUGDP5GbYM9NqWcasSXh1/sXlLK/@Fq/PqLT6/ZPfbO5h19uqRZZuoP/Cy2bw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> Link includes test cases. Edit: Saved 6 bytes by multiplying by 10 at the end. Saved 9 bytes thanks to @Arnauld. Explanation:</p>

<pre class="lang-javascript prettyprint-override"><code>(r,v
</code></pre>

<p>Input the result as a string and the vulnerability as a boolean (or 1/0).</p>

<pre class="lang-javascript prettyprint-override"><code>,[,c,s,d,t]=r.match(/(.)(.T?)(X*)(.*)/)
</code></pre>

<p>Split the string up into contract, suit, doubles and (over/under)tricks.</p>

<pre class="lang-javascript prettyprint-override"><code>,l=d.length
</code></pre>

<p>Count the number of doubles.</p>

<pre class="lang-javascript prettyprint-override"><code>,m=s&gt;'D'
</code></pre>

<p>Track whether this is a major or minor suit.</p>

<pre class="lang-javascript prettyprint-override"><code>g=(c*(m+=2)+!!s[1])&lt;&lt;l
</code></pre>

<p>Calculate the contract score. This is 3 per major suit or 2 per minor suit trick, plus 1 extra for no trump, and then doubled or redoubled as appropriate.</p>

<pre class="lang-javascript prettyprint-override"><code>)=&gt;10*
</code></pre>

<p>The score is always a multiple of 10. Subsequent comments take this multiplication into account.</p>

<pre class="lang-javascript prettyprint-override"><code>(t&lt;0
</code></pre>

<p>Do we have undertricks?</p>

<pre class="lang-javascript prettyprint-override"><code>?10*
</code></pre>

<p>Undertricks are multiples of 100.</p>

<pre class="lang-javascript prettyprint-override"><code>(l*(v?3*t+1:-"13"[~t]||3*t+4)
</code></pre>

<p>If they're doubled, then the potentially redoubled score depending on the vulnerability or number of undertricks.</p>

<pre class="lang-javascript prettyprint-override"><code>||t)
</code></pre>

<p>But if they're not doubled, then just the number of undertricks.</p>

<pre class="lang-javascript prettyprint-override"><code>:g
</code></pre>

<p>If the contract is made, then we start with the contract score.</p>

<pre class="lang-javascript prettyprint-override"><code>+(10*l*-~v||m)*t
</code></pre>

<p>Add on overtricks; per trick, if doubled then 100 potentially redoubled and doubled again if vulnerable, otherwise 30 for major or 20 for minor suits.</p>

<pre class="lang-javascript prettyprint-override"><code>+5*l
</code></pre>

<p>Add on the potentially redoubled doubled game bonus.</p>

<pre class="lang-javascript prettyprint-override"><code>+25*(c&gt;5&amp;&amp;(5-c)*~-~v)
</code></pre>

<p>Add on the slam bonus if applicable.</p>

<pre class="lang-javascript prettyprint-override"><code>+5*(g&gt;9?4*v+6:1))
</code></pre>

<p>Add on the game bonus.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/169923/">169923</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




