<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::200807</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>JavaScript Node.js</td><td>240801T185141Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/274620#274620">Andrew B</a></td></tr>
<tr d-ix="1"><td>nan</td><td>Pyth</td><td>220920T014630Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/252061#252061">E. Z. L.</a></td></tr>
<tr d-ix="2"><td>026</td><td>Charcoal</td><td>200311T205421Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/200892#200892">Neil</a></td></tr>
<tr d-ix="3"><td>001</td><td>bash + linux</td><td>200310T081621Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/200831#200831">don brig</a></td></tr>
<tr d-ix="4"><td>nan</td><td>Python 3</td><td>200309T175725Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/200813#200813">RGS</a></td></tr>
<tr d-ix="5"><td>099</td><td>C gcc</td><td>200309T194340Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/200816#200816">S.S. Ann</a></td></tr>
<tr d-ix="6"><td>nan</td><td>Jelly</td><td>200309T183826Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/200815#200815">Jonathan</a></td></tr>
<tr d-ix="7"><td>nan</td><td>05AB1E</td><td>200309T172329Z</td><td><a href="https://codegolf.stackexchange.com/questions/200807/as-close-to-flat-as-possible/200809#200809">Grimmy</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 96 bytes - score 1/100,000</h1>

<pre class="lang-javascript prettyprint-override"><code>r=m=&gt;Math.random()*m|0
k=0n
while(r(1e5))k=k*10n+BigInt(r(10))
console.log((k%2n?-1n-k:k)/2n+'')
</code></pre>
<p><a href="https://tio.run/##FcixCsIwEADQPf8hvWtJTQouQhTcHPyI0IY2XnInadDFf4/4xvf0b7/PJb6qZllCa8Vld3n4uo3F8yIZsM9fo8gZVp8tpgAFbDghkqPeGh5ucb1z/a9BVLPwLimMSVYAOkx81ZY1nQmPEw9dh639AA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Explanation:</p>
<p>While a number picked between 0 and 99,999 is not zero, add a single decimal digit to the output. When we're done, map the output (integer between 0 and +Infinity) to negative numbers as well.</p>
<p>0 has the greatest probability of being picked with a probability of 1/100,000.</p>
<p>I could improve the score a bit by increasing the constant 1e5 to say 1e15, but I wanted the TIO link to work and return a number in a reasonable amount of time, which it does.</p>
</div>
<div id="pu1" class="pu"><h1>Pyth, score of the order <span class="math-container">\$f_{\varphi(\omega,0)+1}(10^{10^{64}})^{-1}\$</span></h1>
<pre><code>M,-.&lt;hG@H1.&lt;hH@G1+@G1@H1D%ZYI&lt;hZ0R,_hZ@Z1J,1 0V.&lt;1Y=J%gZJY)R,hJ+@J1YVC*GCG=T@%TT1)K0WOT=+K1)IO2K.?_K
</code></pre>
<p><a href="https://tio.run/##DcexCsMgEIDhV8niYDXidVZ6kILJSQkESfGWjLkxQ5Y@vXX4@fiv3y2tfezogiScoTNjAtPr91ZclyDsN3sIIwNZGPzuAtRI6mSqerNCBgnqPj3SlGJBVQro7L9riSaDXtZndq8jt/YH" rel="nofollow noreferrer">Don't try it online!</a></p>
<h1>Pyth, score of the order <span class="math-container">\$f_{\varphi(\omega,0)+\omega}(4)^{-1}\$</span></h1>
<p>(More precisely around <span class="math-container">\$f_{\varphi(\omega,0)+4}(10)^{-1}\$</span>)</p>
<pre><code>M,-.&lt;hG@H1.&lt;hH@G1+@G1@H1D%dYI&lt;hd0R,_hd@d1J,1 0V.&lt;1Y=J%gdJY)R,hJ+@J1YVTVTVTVT=T@%TT1;WOT=+Z1)IO2Z.?_Z
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/31dHV88mw93BwxBIeTi4G2oDMZDnopoS6WmTkWIQpBOfkeKQYuilY6hgEKZnYxhp66WanuIVqRmkk@Gl7eBlGBkWAoG2IQ6qISGG1uH@IbbaUYaanv5GUXr28VH//wMA" rel="nofollow noreferrer">Don't try it online!</a></p>
<h1>Original python, but in the Pyth I made changes to increase size:</h1>
<pre class="lang-py prettyprint-override"><code>import random
g=lambda G,H:(G[0]&lt;&lt;H[1]-H[0]&lt;&lt;G[1],G[1]+H[1])
def C(Z,Y):
  if Z[0]&lt;0: return -Z[0],Z[1]
  J=(1,0)
  for N in range(1&lt;&lt;Y):J=C(g(Z,J))
  return J[0],J[1]+Y
T=10
for N in range(T): T=C(T,T)[1]
K=0
while random.randint(0,T):
  K+=1
if random.randint(0,1):
  print(K)
else:
  print(-K)
</code></pre>
<h1>Explanation</h1>
<p>This uses the extremely fast growing functions <span class="math-container">\$M_n\$</span> defined <a href="https://arxiv.org/pdf/2205.11017.pdf" rel="nofollow noreferrer">here</a>. They're actually my go-to when I need fast-growing functions, since they have a growth rate approaching <span class="math-container">\$\varphi(\omega,0)\$</span> and are simple to implement. Since they operate on fractions, I use the representation <span class="math-container">\$(a,b)=\frac{a}{2^b}\$</span>. I iterate the operation <span class="math-container">\$n\mapsto M_{2^n}(n)\$</span> starting from 10 roughly <span class="math-container">\$10^{10^{64}}\$</span> times, then output integers in a geometric distribution with parameter <span class="math-container">\$\frac{1}{n}\$</span>, with signs attached. Thus, the score is <span class="math-container">\$\frac{1}{n}\$</span>. Yes, you can slightly improve it, but it's so big your improvements are negligible.</p>
<p>Yes, this absolutely dominates every other entry so far.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 26 bytes, score 0.0005</h1>

<pre><code>Ｗ‽φ⊞υωＩ⎇‽²Ｌυ±⊕Ｌυ
</code></pre>

<p><a href="https://tio.run/##PYpBCoNADADvvmKPWbCw9urRk1BEih8Ia3CFNUKMFV8fpdDOaWAmJpS4YjY70pzJwRt5XBeoQgjeu37fEuylO3xd9DKzQoObwkDCKOdvfvrSvYgnvd9bO5pQCVqOQgux0gj/@qU2s8cnXw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. <code>0</code> and <code>-1</code> have probabilities of 0.0005, then each subsequent integer has a probability 0.999 times that of the previous. Obviously there are still 75 bytes with which to create some form of arbitrary large expression in order to obtain a lower score, but the resulting code would take longer than the heat death of the universe to run, so it's not quite suitable for TIO. Explanation:</p>

<pre><code>Ｗ‽φ
</code></pre>

<p>While a random number <code>0..999</code> is non-zero...</p>

<pre><code>⊞υω
</code></pre>

<p>...push the empty string to the empty list.</p>

<pre><code>Ｉ⎇‽²Ｌυ±⊕Ｌυ
</code></pre>

<p>Randomly print either the length of the list or <code>-1</code> minus that length.</p>
</div>
<div id="pu3" class="pu"><h1>bash + linux, 1 / big number</h1>

<pre><code>cat /dev/random | hexdump -n `b` -ve '/1 "%02u"'
</code></pre>

<p>This program will print out 'b' bytes of decimal digits, where b is a program producing a random input number.</p>

<p>(edited to try to be more infinity-ish, although technically still limited by the bash shell)</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, score <span class="math-container">\$\approx \frac{1}{\sqrt{8\pi\lambda}}\$</span> where <span class="math-container">\$\lambda \approx 9\uparrow\uparrow (9\uparrow \uparrow (9 \uparrow \uparrow (9 \uparrow \uparrow (9\uparrow\uparrow 9)))))\$</span></h1>

<p><a href="https://www.wolframalpha.com/input/?i=9%5E9%5E9%5E9%5E9%5E9%5E9%5E9%5E9%5E0" rel="noreferrer">This is <code>g(9)</code></a>, approximately <code>10^(10^(10^(10^(10^(10^(10^8.567841344463464))))))</code>; I'm doing <code>g(g(g(g(g(9)))))</code> to get the <span class="math-container">\$\lambda\$</span> above.</p>

<p><span class="math-container">\$a \uparrow b\$</span> (<a href="https://en.m.wikipedia.org/wiki/Knuth%27s_up-arrow_notation" rel="noreferrer">Knuth's up-arrow notation</a>) is <code>a</code> to the power of <code>b</code>. <span class="math-container">\$a \uparrow\uparrow b\$</span> is <code>a</code> to the power of itself, <code>b</code> times. So <span class="math-container">\$9\uparrow\uparrow 3 = 9^{9^9}\$</span> and <span class="math-container">\$9\uparrow\uparrow 9 = 9^{9^{9^{9^{9^{9^{9^{9^{9}}}}}}}}\$</span></p>



<pre class="lang-python prettyprint-override"><code>from numpy.random import*
g=lambda n:n and 9**g(n-1)
print(choice([-1,1])*poisson(g(g(g(g(g(9)))))))
</code></pre>

<p><a href="https://tio.run/##Tck9CoAwDEDh3VN0TIoKxUnBk4hD/asFm4Rah56@Ovq2jyc5nUxdKUfkoOgJkttoafvgg3BMunLjZcOyWUUDqW@pXmsH1BisJHpKsJ7s1x2mxtRmRi3s75sJHPT/ELGUFw" rel="noreferrer" title="Python 3 – Try It Online">DON'T Try it online!</a> Blows the recursion limit, of course.</p>

<p>How it works:</p>

<p>The <a href="https://en.m.wikipedia.org/wiki/Poisson_distribution" rel="noreferrer">Poisson distribution</a> is a random distribution that, by itself, already generates random positive integers from 0 to infinity. This distribution takes a parameter, <span class="math-container">\$\lambda \$</span>, that affects how likely the smaller integers are. What we have to do is set <span class="math-container">\$\lambda\$</span> in such a way that small numbers become <strong>very</strong> unlikely.</p>

<p>Then we use <a href="https://en.m.wikipedia.org/wiki/Poisson_distribution" rel="noreferrer">the wiki page</a> again to realize the <em>mode</em> of the distribution is related to its parameter and then we plug the mode into the probability density function to get the program's score. After that we use Sterling's approximation to simplify the expression to something that is only slightly more digestible.</p>

<p>If I really can't waive the recursion limit then a similar approach with a loop gives</p>

<h3><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, score <span class="math-container">\$\approx \frac{1}{\sqrt{8\pi\lambda}}\$</span> where <span class="math-container">\$\lambda = 9\uparrow\uparrow (9 \uparrow\uparrow 7)\$</span></h3>



<pre class="lang-python prettyprint-override"><code>from numpy.random import*
print(choice([-1,1])*poisson(eval('**'.join(`9`*9**9**9**9**9**9**9**9))))
</code></pre>

<p><a href="https://tio.run/##bYwxCoAwDEV3T@FmDCro5llEUNTSiE1CrYKnrwVXP294b/n6BCvcxWi8uJwvp0/jZ15TkFPxATP1xAEWK7RsMNRt1Y4lqtB5CsN2zwcUiEWzCzFM/YQ9/lGmxe/KQJf8BQ" rel="noreferrer" title="Python 2 – Try It Online">Don't try it online!</a> Got some more bigness because @xnor taught me how <code>join</code> works when used directly on strings.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 99 bytes</h1>



<pre class="lang-c prettyprint-override"><code>f(b,t)long b(),t;{for(b()/4503599627370496&amp;&amp;printf("-");t-9007199254740992;t=b())putchar(t%10+48);}
</code></pre>

<p><code>b</code> is a function returning 52 random bits in the form of an integer in the range of [0, 9007199254740992).</p>

<p><a href="https://tio.run/##ZY8xb4MwEIV3/worVZGtQkoSEopIu1QdOnRL10RgG3ISMcg@MjTKb6cGgqqoXnz36b27dyIohei6guU@8qrWJc0Z9zG9FLVhrnyO1uFqnSSbZbyKwyjZeF5jQGPBZsGMpxgkYRgvkmS5juIodH@Kr87GmxbFMTMMHxfhU/TC02v3AFpUrVR022qwKOfHN/LHHKgg/8egvkcIJ9UTMmQ1mZY5IOPkQqh7RmFr9IAZp3vKWC/jt367pQuXhFwJcRfQUwaanWuQk9uiaQXSfoVtlKBo04G32kKplaS9y2XXgJBV8KNkSgbB5DiUCpmH1qe7z6@Pw/fund8UdoiAdo7ng7Zu9p6OzVg7XwNj5Lv5k71gt0v79N0v" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 1 / 2M ?*,</h1>

<p>* Any help scoring this appreciated, 0 and -1 are the two equally most likely answers at <span class="math-container">\$\frac{1}{2M}\$</span> - see code breakdown.</p>

<p>Inspiration taken from <a href="https://codegolf.stackexchange.com/a/200809/53748">Grimmy's 05AB1E answer</a>.</p>

<pre><code>‘ɼµ⁹!!!!;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊ;”!ẋ$VƊX’µ¿~2X¤¡
</code></pre>

<p><a href="https://tio.run/##y0rNyan8//9Rw4yTew5tfdS4UxEIrB81zFV8uKtbJexY12BgRzxqmHlo66H9dUYRh5YcWvj/PwA" rel="nofollow noreferrer" title="Jelly – Try It Online">No point trying this online!</a></p>

<p><strong><a href="https://tio.run/##y0rNyan8//9Rw4yTew5tNQLScGT9qGEukHq4q1sl7FgX8byIRw0zD209tL/OKOLQkkML//8HAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try incrementing with 4 increment tetrations</a></strong> (with incrementing the self-referential tetration is just doubling, also start with 2 rather than 256 so n=(2+1+1+1+1)*2*2*2*2=96, much more likely to terminate)</p>

<h3>How?</h3>

<pre><code>‘ɼµ⁹!!!!;”!ẋ$VƊ;”!ẋ$VƊ ... X’µ¿~2X¤¡ - Link, no arguments
                              ¿      - while...
  µ                          µ       - ...condition: monadic chain (f(0)):
   ⁹                                 -     256
    !                                -     factorial = 256*255*...*1 = a
     !                               -     factorial = a*(a-1)*...*1 = b
      !                              -     factorial = b*(b-1)*...*1 = c
       !                             -     factorial = c*(c-1)*...*1 = A
              Ɗ                      -     last three links as a monad:
            $                        -       last two links as a monad:
         ”!                          -         literal '!' character
           ẋ                         -         repeated A times
        ;                            -       concatenate to A -&gt; number A with A '!' after it
             V                       -       evaluate as Jelly code -&gt; A!!..! * (A!!..!-1) * ... * 1
               ;”!ẋ$VƊ               -     call that B and repeat that process
                       ...           -     repeat 10 more times giving us M
                           X         -     choose a random integer in [1..M] inclusive
                            ’        -     decrement (i.e. while random choice != 1)
                                   ¡ - repeat...
                                  ¤  - ...number of times:
                                2    -   two
                                 X   -   random integer in [1,2] inclusive
                               ~     - ...action: bitwise NOT
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, score 0.5 / 1000!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</h1>

<p><em>bug fix thanks to FryAmTheEggman</em></p>

<p><em>+1 <code>!</code> thanks to ExpiredData</em></p>

<pre><code> [₄!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!LΩ#¼]¾D±)Ω
</code></pre>

<p><a href="https://tio.run/##yy9OTMpM/f8/@lFTiyKNgM@5lcqH9sQe2udyaKPmuZX//wMA" rel="noreferrer" title="05AB1E – Try It Online">(dont't) Try it online!</a> (will timeout).</p>

<p><a href="https://tio.run/##AR0A4v9vc2FiaWX//1vigoRMzqkjwrxdwr5EwrEpzqn//w" rel="noreferrer">Try it online without the factorials</a></p>

<pre><code>[           ]            # loop:
 ₄                       #  1000
  !!...!                 #  take the factorial, 88 times
        LΩ               #  pick a random number from 1 to that many
          #              #  if the number was 1, exit the loop
           ¼             #  increment counter_variable
             ¾           # after the loop: push counter_variable
              D±         # push its bitwise negation
                )        # wrap the two in a list
                 Ω       # pick a random element of that list
</code></pre>

<p>Any integer would work instead of <code>1000!!...!</code>, so this approach could score as low as <code>0.5 / BB(89)</code>, where <code>BB</code> is 05AB1E's Busy Beaver function.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/200807/">200807</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




