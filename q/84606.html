<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::84606</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>118</td><td>R</td><td>240506T202914Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/272979#272979">int 21h </a></td></tr>
<tr d-ix="1"><td>194</td><td>Commodore C64 just for fun/noncompeting</td><td>230605T225702Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/261582#261582">Shaun Be</a></td></tr>
<tr d-ix="2"><td>078</td><td>Julia 1.0</td><td>221014T183143Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/253223#253223">Ashlin H</a></td></tr>
<tr d-ix="3"><td>062</td><td>Arturo</td><td>230502T194403Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/260643#260643">chunes</a></td></tr>
<tr d-ix="4"><td>139</td><td>C gcc</td><td>230502T182555Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/260639#260639">evanstar</a></td></tr>
<tr d-ix="5"><td>010</td><td>Jelly</td><td>200909T122945Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/210806#210806">Unrelate</a></td></tr>
<tr d-ix="6"><td>012</td><td>Japt</td><td>221016T030809Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/253285#253285">Shaggy</a></td></tr>
<tr d-ix="7"><td>064</td><td>Julia 1.0</td><td>221020T145602Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/253493#253493">amelies</a></td></tr>
<tr d-ix="8"><td>002</td><td>Vyxal r</td><td>221013T200832Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/253172#253172">tybocopp</a></td></tr>
<tr d-ix="9"><td>009</td><td>05AB1E</td><td>200910T104549Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/210877#210877">ovs</a></td></tr>
<tr d-ix="10"><td>024</td><td>Pip</td><td>200910T103118Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/210876#210876">Razetime</a></td></tr>
<tr d-ix="11"><td>133</td><td>Google Sheets</td><td>200805T141210Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/209109#209109">General </a></td></tr>
<tr d-ix="12"><td>064</td><td>Ruby</td><td>160819T002440Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/90284#90284">Value In</a></td></tr>
<tr d-ix="13"><td>132</td><td>Lua</td><td>160818T234659Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/90282#90282">ATaco</a></td></tr>
<tr d-ix="14"><td>nan</td><td>Perl</td><td>160706T141557Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84621#84621">Dada</a></td></tr>
<tr d-ix="15"><td>180</td><td>Java 7</td><td>160707T092613Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84708#84708">Kevin Cr</a></td></tr>
<tr d-ix="16"><td>nan</td><td>Sed</td><td>160711T182624Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/85185#85185">someonew</a></td></tr>
<tr d-ix="17"><td>086</td><td>PowerShell</td><td>160706T222951Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84668#84668">ThePoShW</a></td></tr>
<tr d-ix="18"><td>256</td><td>Excel VBA</td><td>160707T130937Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84758#84758">tjb1</a></td></tr>
<tr d-ix="19"><td>085</td><td>C#</td><td>160706T155709Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84628#84628">aloisdg</a></td></tr>
<tr d-ix="20"><td>nan</td><td></td><td>160707T154023Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84780#84780">user5609</a></td></tr>
<tr d-ix="21"><td>009</td><td>Pyth</td><td>160706T125831Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84613#84613">PurkkaKo</a></td></tr>
<tr d-ix="22"><td>224</td><td>Javascript using external library</td><td>160706T203523Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84654#84654">applejac</a></td></tr>
<tr d-ix="23"><td>046</td><td>VIM</td><td>160706T224807Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84671#84671">DoYouEve</a></td></tr>
<tr d-ix="24"><td>029</td><td>Perl 6</td><td>160706T211740Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84660#84660">Brad Gil</a></td></tr>
<tr d-ix="25"><td>071</td><td>Haskell</td><td>160706T125632Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84609#84609">flawr</a></td></tr>
<tr d-ix="26"><td>050</td><td>Octave</td><td>160706T193218Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84644#84644">Marco</a></td></tr>
<tr d-ix="27"><td>128</td><td>PHP</td><td>160706T200612Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84651#84651">MonkeyZe</a></td></tr>
<tr d-ix="28"><td>004</td><td>TCC</td><td>160706T195659Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84649#84649">brianush</a></td></tr>
<tr d-ix="29"><td>066</td><td>Python</td><td>160706T195213Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84647#84647">xnor</a></td></tr>
<tr d-ix="30"><td>021</td><td>Jolf</td><td>160706T183829Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84640#84640">Conor O&</a></td></tr>
<tr d-ix="31"><td>013</td><td>MATL</td><td>160706T150157Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84624#84624">Luis Men</a></td></tr>
<tr d-ix="32"><td>009</td><td>Pyke</td><td>160706T134943Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84616#84616">Blue</a></td></tr>
<tr d-ix="33"><td>146</td><td>Racket</td><td>160706T163044Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84630#84630">Steven H</a></td></tr>
<tr d-ix="34"><td>071</td><td>Python</td><td>160706T125643Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84610#84610">user4594</a></td></tr>
<tr d-ix="35"><td>083</td><td>JavaScript ES6</td><td>160706T140654Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84619#84619">Neil</a></td></tr>
<tr d-ix="36"><td>022</td><td>CJam</td><td>160706T150846Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84625#84625">Martin E</a></td></tr>
<tr d-ix="37"><td>073</td><td>Python 2</td><td>160706T142337Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84623#84623">Lulhum</a></td></tr>
<tr d-ix="38"><td>065</td><td>Retina</td><td>160706T141139Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84620#84620">Martin E</a></td></tr>
<tr d-ix="39"><td>012</td><td>Dyalog APL</td><td>160706T131929Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84614#84614">Ad&#225;</a></td></tr>
<tr d-ix="40"><td>025</td><td>Actually</td><td>160706T125015Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84608#84608">user4594</a></td></tr>
<tr d-ix="41"><td>175</td><td>TSQL</td><td>160706T140032Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84617#84617">t-clause</a></td></tr>
<tr d-ix="42"><td>028</td><td>Brachylog</td><td>160706T125713Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84612#84612">Fatalize</a></td></tr>
<tr d-ix="43"><td>013</td><td>05AB1E</td><td>160706T124635Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84607#84607">Adnan</a></td></tr>
<tr d-ix="44"><td>030</td><td>J</td><td>160706T125710Z</td><td><a href="https://codegolf.stackexchange.com/questions/84606/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places/84611#84611">miles</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 118 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(S,`^`=bitwOr){V=rev(U&lt;-utf8ToInt(S))^32;Y=V[W&lt;-U^32&gt;U]%in%c(65:90,97:122);V[W][Y]=bitwAnd(V[W][Y],-33);intToUtf8(V)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGiNNulpSVpuhY3y2I0gnUS4hJskzJLyv2LNKvDbItSyzRCbXSB8hYh-Z55JRrBmppxxkbWkbZh0eE2uqFAtl1orGpmnmqyhpmplaWBjqW5laGRkaY1UD42OjIWbJZjXooGlK-ja2ysaZ2ZVxKSHwo0VCNMsxZqu32ahpJHak5Ovo6Cb2ZKXmZ6RklisZImF1A4UA9CF4SWZOYpeIRGghQV5QcHZyYqlCkUpBalpCppQoxZsABCAwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Pretty straightforward; I have used some tips from my <a href="https://codegolf.stackexchange.com/a/272950/101276">other golf</a>. Case conversion is performed by bitwise operators.</p>
</div>
<div id="pu1" class="pu"><h1>Commodore C64 (just for fun/non-competing), 194 Tokenised BASIC Bytes</h1>
<p>To enter this on a real C64, you must use <a href="https://www.c64-wiki.com/wiki/BASIC_keyword_abbreviation" rel="nofollow noreferrer">BASIC keyword abbreviations</a>, as you are not able to enter more than 80 characters onto a C64 BASIC line though once entered the interpreter will show the keywords in full. The listing is shown as abbreviations with switched character modes to upper/lower case. You may do this by pressing SHIFT + C=. The program will switch modes anyway on line 0 with the control character N (achieved by pressing <code>CTRL+N</code> after the opening quote).</p>
<pre><code>0input&quot;{CTRL+N}&quot;;a$:ifa$=&quot;&quot;tHeN
1l=len(a$):dIp(l),b(l):fOx=1tol:p(x)=aS(mI(a$,x,1))&gt;127:nE:i=1:fOx=lto1stE-1
2b(i)=aS(mI(a$,x,1))aN127:i=i+1:nE:fOx=1tol
3ifb(x)&gt;64tH?cH(b(x)-128*p(x));
4ifb(x)&lt;65tH?cH(b(x));
5nE
</code></pre>
<p><strong>Note</strong> I've marked this as non-competing because whilst the character encoding on the Commodore C64 (PETSCII) is compatible with ASCII, it is not ASCII. As this question is six years old at the time of writing, and the questioner has left, I'm sure no one will mind.</p>
<p>Some caveats, string handling with the <code>INPUT</code> command has some limitations. For instance, if you wanted to enter <code>Hello, World!</code> as a test, you would need to enter it starting with a double quotation mark, so <code>&quot;Hello, World!&quot;</code>.</p>
<p>A quick explanation:</p>
<ul>
<li>Line 0 switches the character set to upper/lower case, rather than PETSCII graphics mode, and waits for a user input; if there is an empty string entered then the program terminates. I added this otherwise it will error, as the <code>FOR/NEXT</code> loops are expecting at least one character to iterate over.</li>
<li>Line 1 will set l to the length of the string, and set up two numeric arrays, called <code>p(l)</code> and <code>b(l)</code>. <code>p(l)</code> is used for determines whether the positional character is upper case or not, by checking if the character code is 128 or more. If so, a <code>-1</code> is added to the array at position <code>x</code>, otherwise it is <code>0</code>. When that loop ends, we set variable <code>i</code> to <code>1</code>, and start a new loop counting down from the string length to 1.</li>
<li>Line 2 sets the array <code>b(l)</code> at position <code>i</code> to the PETSCII character code; this value is <code>AND</code>ed with 127 so that each position will be the lower-case character code. <code>i</code> is then incremented by <code>1</code> and the loop ends. We then set up a final <code>FOR/NEXT</code> loop, again counting up from 1 to <code>l</code>.</li>
<li>Line 3 checks if array position <code>b(x)</code> is 65 or greater (this is for characters <code>a</code> - <code>z</code> inclusive). If so, it prints the character -128 multiplied by the contents of <code>p(x)</code>, which is <code>-1</code> for upper-case at that position, or <code>0</code> if not. <code>-128*-1</code> will add <code>128</code> so converting the character at that position to upper case.</li>
<li>Line 4 checks if array position <code>b(x)</code> has a value below 64; if so, we don't want to convert this to upper case or we will get some odd results for numbers and punctuation etc.</li>
<li>Line 5 iterates the loop again until it is done. When the loop is finished, the program will end gracefully.</li>
</ul>
<p>The screen shot below shows the BASIC program as the interpreter lists it.</p>
<p>This was a fun challenge and took a little while to get the logic right, so it's quite likely that there are some further optimisations to save some BASIC bytes.</p>
<p><a href="https://i.stack.imgur.com/AvrPI.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/AvrPI.png" alt="Reverse a string while maintaining the capitalization in the same places, Commodore C64" /></a></p>
</div>
<div id="pu2" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 1.0</a>, <s>114</s> <s>92</s> 78 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>~x=(b=reverse(lowercase(x));prod(i-&gt;b[i]-32('@'&lt;x[i]&lt;'['&lt;b[i]-5&lt;'v'),keys(b)))
</code></pre>
<p><a href="https://tio.run/##yyrNyUw0rPj/v67CViPJtii1LLWoOFUjJ788tSg5Eciq0NS0LijKT9HI1LVLis6M1TU20lB3ULepALJt1KPVbcCCpjbqZeqaOtmplcUaSZqamv8dijPyyxXqlDxSc3LydRR8M1PyMtMzShKLlbhgUnqBCHZilWMUgucIBA7RCdVK/wE" rel="nofollow noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
<ul>
<li>-22 bytes thanks to amelies: use <code>prod</code></li>
<li>-10 bytes thanks to MarcMush: avoid <code>uppercase</code> and <code>isuppercase</code></li>
<li>-4 bytes thanks to MarcMush: use <code>keys(b)</code> instead of <code>1:length(b)</code></li>
</ul>
</div>
<div id="pu3" class="pu"><h1><a href="https://arturo-lang.io" rel="nofollow noreferrer">Arturo</a>, 62 bytes</h1>
<pre class="lang-arturo prettyprint-override"><code>$-&gt;s[i:0map reverse lower s'c[if&lt;=&gt;s\[i]`A``Z`-&gt;upper'c'i+1c]]
</code></pre>
<p><a href="http://arturo-lang.io/playground?Ye1pKi" rel="nofollow noreferrer">Try it</a></p>
<p>Takes a string, returns a list of characters.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, 139 bytes</h1>

<pre class="lang-c prettyprint-override"><code>#define B v[c+~i]
#define C(x,y)isupper(x)?toupper(y):tolower(y)
i,t,c;f(char*v){for(c=strlen(v);i&lt;c/2;i++)t=C(B,v[i]),v[i]=C(v[i],B),B=t;}
</code></pre>
<p><a href="https://tio.run/##XY7NasMwEITveoqFXKRYbWmPVdyCc8kb9GB8cPXjLCiSkWUlIaSv7spOA6F7mJ35GJaVT52U07RS2qDTUEGqZfGDDbmTLT3xM8Nh7Hsd6Il9Rn@zZ/YevfXHxRLkkUthqNy3YZ3YxfhAZTnEYLWjiQncyJc3gUXBYrmlFU81NmzRHOfFK8arMorrtEIn7ag0bIaoLH4/7z/IIwvouv9MoZ8RugiHFh2dTRs6yWF@CNbZp7ph5EIgz43lS1BCVjX2dCm8NkyQpWFo5vfQj3F4zCZo/ZevME07ba2HLx@s@gU" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>13</s> 10 bytes</h1>
<pre><code>ŒlðUŒuT}¦n
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///opJzDG0KPTioNqT20LO////8eQPF8HQXfzJS8zPSMksRiAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Did I say this was extremely golfable by someone who understands <code>¦</code>? Turns out it's just understanding anything at all about chaining in general.</p>
<pre><code>Œl            Lowercase the input,
   U          reverse it,
    Œu        then uppercase it
      T}¦     at indices where
  ð      n    the lowercase input doesn't equal the original input.
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 12 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>£ÔgY mvc-X¦v
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=o9RnWSBtdmMtWKZ2&amp;input=IkhlbGxvLCBNaWRuaWdodGFzIg" rel="nofollow noreferrer">Try it</a></p>
<pre><code>£ÔgY mvc-X¦v     :Implicit input of string U
£                :Map each character X at 0-based index Y
 Ô               :  Reverse U
  gY             :  Get the character at index Y
     m           :  Map
      v          :    Literal &quot;v&quot;
       c-        :    Reduce charcode by
         X¦      :      X does not equal
           v     :      Its lowercase
                 :(This results in mapping the character by either &quot;v&quot;,
                 : which is Japt's lowercase method or &quot;u&quot;,
                 : which is Japt's uppercase method)
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 1.0</a>, <s>73, 65 </s> 64 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>!s=prod(titlecase(s[end-i+1]^2)[2-('@'&lt;s[i]&lt;'[')] for i=keys(s))
</code></pre>
<p><a href="https://tio.run/##NcqxDsIgEADQ3a@44gDE1qSd26SDg4uDcSSYEIvl9ATTw6hfj5NvfrcXoWs/pVQ8PJc0qYyZ/MWxV2x8nBrctPbcadM1So6yZ4O2l0ZqC9e0AA53/2XFWpeRQ3pDJfaeKNVwwCniHLJjAWs4uRxmjDt8QJ2IfFj9@/Yoyg8" rel="nofollow noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
<p>-9 MarcMush</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>r</code>, <s>9</s> 2 bytes</h1>
<pre><code>Ṙ•
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyJyIiwiIiwi4bmY4oCiIiwiIiwiSGVsbG8iXQ==" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 9 bytes</h1>
<pre><code>Âls€.uÅÏu
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//cFNO8aOmNXqlh1sP95f@/@@RmpOTr6Pgm5mSl5meUZJYDAA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<p><strong>Commented:</strong></p>

<pre><code>Â          # Push input and input reversed
 l         # lowercase reversed input
  s        # swap to normal input
   €.u     # map is_upper
      ÅÏ   # where this is true,
           # apply to the reversed input:
        u  # uppercase
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 24 bytes</h1>
<pre><code>{b?UCaa}MZLCRVa(_NAZ Ma)
</code></pre>
<p>Gets a binary array for the uppercase indices and uppercases those places in the reversed lowercase string.</p>
<p><a href="https://tio.run/##K8gs@P@/Osk@1DkxsdY3ysc5KCxRI97PMUrBN1Hz////Hqk5Ofk6Cr6ZKXmZ6RklicUA" rel="nofollow noreferrer" title="Pip – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1>Google Sheets, 133</h1>
<p>Closing parens already discounted.</p>
<p>Input: <code>A1</code></p>
<ul>
<li><code>A2</code>: <code>=LEN(A1)</code></li>
<li><code>B1</code>: <code>=ArrayFormula(MID(A1,1+A2-SEQUENCE(A2),1))</code>
<ul>
<li>Reverse string</li>
</ul>
</li>
<li><code>C1</code>: <code>=JOIN(,ArrayFormula(if(REGEXMATCH(MID(A1,SEQUENCE(A2),1),&quot;[A-Z]&quot;),UPPER(B:B),LOWER(B:B))))</code>
<ul>
<li>Compare capital positions, capitalize if originally upper, lower if not. Then join. <code>EXACT(UPPER(...),...)</code> is worse because we're dealing with a range here.</li>
<li>It's a little sluggish because we don't chop off the <code>B:B</code> at the blanks.</li>
</ul>
</li>
</ul>
</div>
<div id="pu12" class="pu"><h1>Ruby, 64 bytes</h1>
<p><a href="https://repl.it/Coos" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>-&gt;s{i=0;s.gsub(/./){c=s[i-=1];$&amp;=~/[A-Z]/?c.upcase: c.downcase}}
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Lua, 132 Bytes</h1>

<pre><code>function(s)o=""i=0 for m in s:gmatch(".")do n=s:sub(#s-i,#s-i)l=m:lower()o=o..(m==l and n:lower()or n:upper())i=i+1 end print(o)end
</code></pre>

<p>There might be a better way to do this in lua, but I think this works.</p>
</div>
<div id="pu14" class="pu"><h2>Perl, 31 + 2 (<code>-lp</code>) = 33 bytes</h2>
<p><i>This solution is from <a href="https://codegolf.stackexchange.com/users/51507/ton-hospel">@Ton Hospel</a> (13 bytes shorter thant mine).</i></p>
<pre><code>s%.%(lc$&amp;gt$&amp;?u:l).&quot;c chop&quot;%eeg
</code></pre>
<p>But you'll need <code>l</code> and <code>p</code> switches on. To run it :</p>
<pre><code>perl -lpe 's%.%(lc$&amp;gt$&amp;?u:l).&quot;c chop&quot;%eeg'
</code></pre>
</div>
<div id="pu15" class="pu"><h1>Java 7, <s>221</s> <s>217</s> 180 bytes</h1>
<pre><code>void c(char[]s){int x=0,y=s.length-1;for(char t;x&lt;y;s[x]=s(t,s[y]),s[y]=s(s[y],t),x++,y--)t=s[x];}char s(char a,char b){return(char)(64&lt;a&amp;a&lt;91?96&lt;b&amp;b&lt;123?b-32:b:64&lt;b&amp;b&lt;91?b+32:b);}
</code></pre>
<p>Loads of bytes saved thanks to <em>@LeakuNun</em>'s approach.</p>
<p><strong>Ungolfed &amp; test cases:</strong></p>
<p><a href="https://ideone.com/oqyLIU" rel="nofollow noreferrer">Try it here.</a></p>
<pre><code>class Main{
  void c(char[] s){
    int x = 0,
        y = s.length-1;
    for(char t; x &lt; y; s[x] = s(t, s[y]),
                       s[y] = s(s[y], t),
                       x++,
                       y--){
       t = s[x];
    }
  }

  char s(char a, char b){
    return (char)(64 &lt; a &amp; a &lt; 91
                    ? 96 &lt; b &amp; b &lt; 123
                        ? b-32
                        : b
                    : 64 &lt; b &amp; b &lt; 91
                        ? b+32
                        : b);
  }

  public static void main(String[] a){
    print(&quot;Hello, Midnightas&quot;);
    print(&quot;TEST&quot;);
    print(&quot;test&quot;);
    print(&quot;Test&quot;);
    print(&quot;.,..,,!@&quot;);
    print(&quot;ABCDefgHijklMNOPqrsTuVWxyz&quot;);
    print(&quot;AbCdEfGHIJKlmnop123&quot;);
  }
  
  static void print(String s){
    char[] t = s.toCharArray();
    c(t);
    System.out.println(t);
  }
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>SathginDim ,olleh
q.
TSET
tset
Tset
@!,,..,.
ZYXWvutSrqpoNMLKjihGfEDcba
321pOnMLKJIhgfedcba
</code></pre>
</div>
<div id="pu16" class="pu"><h1>Sed, 113 + 1 = 114 bytes</h1>
<p>Why? Because it's fun to use the <em>wrong</em> tool to do things :P</p>
<p>Usage: Run <code>sed -rf file</code>, enter text and press <kbd>Ctrl</kbd> + <kbd>D</kbd> (send EOF).</p>
<p>Golfed:</p>
<pre><code>s/[A-Z]/\a\l&amp;/g;s/^.*$/\f&amp;\v/;:x;s/\f\a/\a\f/;s/\a\v/\v\a/;s/\f(.)(.*)(.)\v/\3\f\2\v\1/;tx;s/\f|\v//g;s/\a./\U&amp;/g
</code></pre>
<p>Ungolfed:</p>
<pre><code>s/[A-Z]/\a\l&amp;/g #Prepend all upper-case letters with a 
                #BEL ASCII character and make them lowercase
s/^.*$/\f&amp;\v/   #Wrap text between a from feed (\f) and a vertical tab (\v)
                #These are used as markers

:x #Define a label named x

s/\f\a/\a\f/;s/\a\v/\v\a/ #Move BEL characters outside of the boundary, so they're not moved later
s/\f(.)(.*)(.)\v/\3\2\1/  #This part does the switching itself
                          #It grabs a character preceded by a form feed and another 
                          #one followed by a vertical tab and swaps them, while keeping the text in-between
                          #and replaces the marker \f and \v

tx             #Conditional jump (t) to label x
               #Jumps to the label x if the last substitution (s command) was successful 
s/\f|\v//g     #Delete markers
s/\a(.)/\u\1/g #Make letters preceded by a BEL upper-case
</code></pre>
</div>
<div id="pu17" class="pu"><h1>PowerShell, <s>154</s>, <s>152</s>, <s>99</s>, 86 bytes</h1>

<p>Thank you @TimmyD for saving me a whopping 47 bytes (I also saved an additional 6)</p>

<p>Thank you @TessellatingHeckler for saving an additional 13 bytes.</p>

<p>Latest:</p>

<pre><code>param($a)-join($a[$a.length..0]|%{("$_".ToLower(),"$_".ToUpper())[$a[$i++]-in65..90]})
</code></pre>

<p>Original:</p>

<pre><code>param($a);$x=0;(($a[-1..-$a.length])|%{$_=$_.tostring().tolower();if([regex]::matches($a,"[A-Z]").index-contains$x){$_.toupper()}else{$_};$x++})-join''
</code></pre>

<p>Normal formatting:</p>

<p>Latest (looks best as two lines in my opinion):</p>

<pre><code>param($a)
-join($a[$a.length..0] | %{("$_".ToLower(), "$_".ToUpper())[$a[$i++] -in 65..90]})
</code></pre>

<p>Explanation:</p>

<pre><code>param($a)-join($a[$a.length..0]|%{("$_".ToLower(),"$_".ToUpper())[$a[$i++]-in65..90]})
param($a)
# Sets the first passed parameter to variable $a
         -join(                                                                      )
# Converts a char array to a string
               $a[$a.length..0]
# Reverses $a as a char array
                               |%{                                                  }
# Shorthand pipe to foreach loop
                                  ("$_".ToLower(),"$_".ToUpper())
# Creates an array of the looped char in lower and upper cases
                                                                 [$a[$i++]-in65..90]
# Resolves to 1 if the current index of $a is upper, which would output "$_".ToUpper() which is index 1 of the previous array
</code></pre>

<p>Original:</p>

<pre><code>param($a)
$x = 0
(($a[-1..-$a.length]) | %{
    $_ = $_.tostring().tolower()
    if([regex]::matches($a,"[A-Z]").index -contains $x){
            $_.toupper()
        }else{
            $_
        }
        $x++
    }
) -join ''
</code></pre>

<p>First time poster here, was motivated because I rarely see PowerShell, <s>but at <s>154</s> 152 bytes on this one... I can see why!</s> Any suggestions appreciated.</p>

<p>I have learned that I must completely change my way of thinking to golf in code and its fun!</p>
</div>
<div id="pu18" class="pu"><h1>Excel VBA, 256 bytes</h1>

<pre><code>Function z(d)
r = Len(d)
ReDim E(1 To r)
For i = 1 To r
b = Mid(d, i, 1)
If Asc(b) &gt; 64 And Asc(b) &lt; 91 Then E(i) = 1
Next i
i = 1
For p = r To 1 Step -1
v = Mid(d, p, 1)
If E(i) = 1 Then z = z &amp; UCase(v) Else z = z &amp; LCase(v)
i = i + 1
Next p
End Function
</code></pre>
</div>
<div id="pu19" class="pu"><h1>C#, <s>86</s> 85 bytes</h1>

<pre class="lang-cs prettyprint-override"><code>s=&gt;string.Concat(s.Reverse().Select((c,i)=&gt;s[i]&gt;96?char.ToLower(c):char.ToUpper(c)));
</code></pre>

<p>A C# lambda where the input and the output is a string. You can try it on <a href="https://dotnetfiddle.net/0NjPq2" rel="nofollow">.NetFiddle</a>.</p>

<hr>

<p><s>I am struggling to understand why I cant achieve to convert <code>char.ToLower(c)</code> to <code>c+32</code>. I hope to fix it!</s></p>

<p>12 bytes saved thanks to @PeterTaylor (<code>c|32</code> to add 32 to the ascii value of <code>c</code> and <code>c&amp;~32</code> to substract 32). The result would be 72 bytes (but can fail on non alpha char). </p>

<pre class="lang-cs prettyprint-override"><code>s=&gt;string.Join("",s.Reverse().Select((c,i)=&gt;(char)(s[i]&gt;96?c|32:c&amp;~32)));
</code></pre>
</div>
<div id="pu20" class="pu"><p>C</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main(int argc, char *argv[])
{
  char *a,*b,*c;

  a=c=strdup(argv[1]);
  b=&amp;argv[1][strlen(a)-1];
  for(;*a;a++,b--){
    *a=(*a&gt;='A'&amp;&amp;*a&lt;='Z')?((*b&gt;='a'&amp;&amp;*b&lt;='z')?*b-32:*b):((*b&gt;='A'&amp;&amp;*b&lt;='Z')?*b+32:*b);
  }
  puts(c);
  free(c);
  return 0;
}
</code></pre>
</div>
<div id="pu21" class="pu"><h1>Pyth, <s>13</s> <s>11</s> <s>10</s> 9 bytes</h1>
<p><em>Thanks to @FryAmTheEggman for reminding me about <code>V</code> and @LeakyNun for another byte.</em></p>
<pre><code>srV_Qm!/G
</code></pre>
<p><a href="http://pyth.tryitonline.net/#code=c3JWX1F9UnJHMQ&amp;input=IkhlbGxvLCBNaWRuaWdodGFzIg" rel="noreferrer">Try it online!</a>
<sub>now on mobile, updating link in a bit</sub></p>

</div>
<div id="pu22" class="pu"><h2>Javascript (using external library) (224 bytes)</h2>

<pre><code>(s)=&gt;{t=_.From(s);var cnt=t.Count();var caps=t.Select(x=&gt;{return x.toUpperCase()===x&amp;&amp;x.toLowerCase()!==x}).ToArray(),i=-1;return t.AggregateRight((a,b)=&gt;{i++;var c=caps[i];return c?a+b.toUpperCase():a+b.toLowerCase()},"");}
</code></pre>

<p>Disclaimer: Using a library I wrote to bring C#'s LINQ to Javascript</p>

<p><a href="https://i.stack.imgur.com/2dMRM.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/2dMRM.png" alt="Image 1"></a></p>
</div>
<div id="pu23" class="pu"><h1>VIM, 46 bytes</h1>
<p>It'd be three bytes <code>g~G</code> if we didn't need to read from stdin or write to stdout, but oh well...</p>
<pre><code>vim -es '+normal! g~G' '+%print|q!' /dev/stdin
</code></pre>
<p>To test this, run</p>
<pre><code>echo &quot;testString&quot; | vim -es '+normal! g~G' '+%print|q!' /dev/stdin
</code></pre>
<p>This is my first submission on here, not sure if this kind of submission is acceptable.</p>
</div>
<div id="pu24" class="pu"><h1><a href="http://perl6.org" rel="nofollow">Perl 6</a>, 29 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>$_=get;put .flip.samecase($_)
</code></pre>
</div>
<div id="pu25" class="pu"><h1>Haskell, <s>83</s> <s>80</s> <s>75</s> 71 bytes</h1>
<p>The most straightforward way I could think of.</p>
<pre><code>import Data.Char
f a|isUpper a=toUpper|1&gt;0=toLower
zipWith f&lt;*&gt;reverse
</code></pre>
</div>
<div id="pu26" class="pu"><h1>Octave, <s>51</s> 50 bytes</h1>
<p><s><code>@(s)merge(isupper(s),b=flip(toupper(s)),tolower(b))</code></s></p>
<pre class="lang-matlab prettyprint-override"><code>@(s)merge(s&gt;64&amp;s&lt;91,b=flip(toupper(s)),tolower(b))
</code></pre>
</div>
<div id="pu27" class="pu"><h1>PHP, 128 bytes</h1>

<pre><code>$s=$argv[1];$l=strrev($s);for($i=0;$i&lt;strlen($s);++$i){echo(strtolower($s[$i])!==$s[$i]?strtoupper($l[$i]):strtolower($l[$i]));}
</code></pre>

<p>I may attempt to optimize this further but I'll just leave it as is for now.</p>
</div>
<div id="pu28" class="pu"><h2>TCC - 4 bytes</h2>

<pre><code>&lt;&gt;ci
</code></pre>

<p><a href="https://www.ccode.gq/projects/tcc.html?code=%3C%3Eci&amp;input=Hello%2C%20Midnightas">Try it online!</a></p>

<p>Explanation:</p>

<pre><code>     - output is implicit in TCC
&lt;&gt;   - reverse string
  c  - preserve capitalization
   i - get input
</code></pre>
</div>
<div id="pu29" class="pu"><h2>Python, 66 bytes</h2>

<pre class="lang-python prettyprint-override"><code>f=lambda s,i=0:s[i:]and(s[~i]*2).title()[~('@'&lt;s[i]&lt;'[')]+f(s,i+1)
</code></pre>
<p>Recurses through the indices <code>i</code>, taking the character <code>s[~i]</code> from the back and the case of <code>s[i]</code> from the front. Being capital is checked as lying in the contiguous range <code>@ABC...XYZ[</code>.
Credit to FryAmTheEggman from the <code>(_*2).title()</code> trick.</p>
</div>
<div id="pu30" class="pu"><h1>Jolf, 21 bytes</h1>

<p><a href="http://conorobrien-foxx.github.io/Jolf/#code=zpxpZD8mzrMuX3BYaVM9cHhISHB4zrPOsw&amp;input=SGVsbG8sIE1pZG5pZ2h0YXMKCi5R" rel="nofollow">Try it here!</a></p>

<pre><code>Μid?&amp;γ._pXiS=pxHHpxγγ
</code></pre>

<h2>Explanation</h2>

<pre><code>Μid?&amp;γ._pXiS=pxHHpxγγ
Μid                   (Μ)ap (i)nput with (d)is fucntion:
   ?        =pxHH     (H is current element) if H = lowercase(H)
    &amp;γ._pXiS          and set γ to the uppercase entity in the reversed string
                 pxγ  lowercase γ
                    γ else, return γ
</code></pre>
</div>
<div id="pu31" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, 13 bytes</h1>
<pre><code>PktGtk&lt;)Xk5M(
</code></pre>
<p><a href="http://matl.tryitonline.net/#code=UGt0R3RrPClYazVNKA&amp;input=J0hlbGxvLCBNaWRuaWdodGFzJw" rel="nofollow noreferrer"><strong>Try it online!</strong></a></p>
<pre><code>Pk      % Implicit inpput. Flip, lowercase
t       % Duplicate
Gtk&lt;    % Logical index of uppercase letters in the input string
)       % Get letters at those positions in the flipped string
Xk      % Make them uppercase
5M(     % Assign them to the indicated positions. Implicit display
</code></pre>
</div>
<div id="pu32" class="pu"><h2>Pyke, <s>11</s> <s>10</s> 9 bytes</h2>
<pre><code>_FQo@UhAl
</code></pre>
<p><a href="http://pyke.catbus.co.uk/?code=_FQo%40UhAl&amp;input=Hello%2C+Midnightas" rel="nofollow noreferrer">Try it here!</a></p>
<pre><code>_         -   reversed(input)
 F        -  for i in ^
   o      -      o+=1
  Q @     -     input[^]
     Uh   -    ^.is_upper()+1
       Al -   [len, str.lower, str.upper, ...][^](i)
          - &quot;&quot;.join(^)
</code></pre>
</div>
<div id="pu33" class="pu"><h1>Racket, 146 bytes</h1>
<pre><code>(λ(s)(build-string(string-length s)(λ(n)((if(char-upper-case?(string-ref s n))char-upcase char-downcase)(list-ref(reverse(string-&gt;list s))n)))))
</code></pre>
<p>Racket is bad at this whole &quot;golfing&quot; thing.</p>
<p><em>Shrug</em>  As always, any help with shortening this would be much appreciated.</p>
</div>
<div id="pu34" class="pu"><h2>Python, 71 bytes</h2>
<pre class="lang-py prettyprint-override"><code>lambda s:''.join((z*2).title()[c.isupper()-1]for c,z in zip(s,s[::-1]))
</code></pre>
<p><a href="http://ideone.com/fork/py1Kjj" rel="noreferrer">Try it online</a></p>
<p>-3 bytes from Ruud, plus the inspiration for 2 more.</p>
<p>-4 more bytes from FryAmTheEggman</p>
</div>
<div id="pu35" class="pu"><h2>JavaScript (ES6), <s>95</s> 83 bytes</h2>

<pre><code>s=&gt;[...t=s.toLowerCase()].reverse().map((c,i)=&gt;s[i]==t[i]?c:c.toUpperCase()).join``
</code></pre>

<p>Edit: Saved a massive 12 bytes thanks to @edc65.</p>
</div>
<div id="pu36" class="pu"><h2>CJam, 22 bytes</h2>

<pre><code>q_W%.{el\'[,65&gt;&amp;{eu}&amp;}
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=q_W%25.%7Bel%5C&#39;%5B%2C65%3E%26%7Beu%7D%26%7D&amp;input=Hello%2C%20Midnightas" rel="nofollow">Test it here.</a></p>
</div>
<div id="pu37" class="pu"><h1>Python 2, 73 bytes</h1>

<p>Since the rules specify the input is ascii:</p>

<pre class="lang-python prettyprint-override"><code>lambda s:''.join([z.lower,z.upper]['@'&lt;c&lt;'[']()for c,z in zip(s,s[::-1]))
</code></pre>

<p>All the credit goes to @Mego though, but I had not the reputation to just comment on his answer.</p>
</div>
<div id="pu38" class="pu"><h2><a href="https://github.com/m-ender/retina" rel="nofollow">Retina</a>, <s>75</s> <s>67</s> 65 bytes</h2>

<p>Byte count assumes ISO 8859-1 encoding.</p>

<pre><code>$
±·$`
O$^`\G[^·]

s{T`L`l`±.
T01`l`L`±.*·[A-Z]
±·

±(.)
$1±
·.
·
</code></pre>

<p><a href="http://retina.tryitonline.net/#code=JShHYAokCsKxwrckYApPJF5gXEdbXsK3XQoKc3tUYExgbGDCsS4KVDAxYGxgTGDCsS4qwrdbQS1aXQrCscK3CgrCsSguKQokMcKxCsK3LgrCtw&amp;input=SGVsbG8sIE1pZG5pZ2h0YXMKLlEKLnE" rel="nofollow">Try it online!</a> (The first line enables a test suite with multiple linefeed-separated test cases.)</p>
</div>
<div id="pu39" class="pu"><h1><a href="http://goo.gl/9KrKoM" rel="nofollow noreferrer">Dyalog APL</a>, 12 <a href="http://meta.codegolf.stackexchange.com/a/9429/43319">bytes</a></h1>
<pre><code>⌽f¨⍨⊢≠f←819⌶
</code></pre>
<p><code>819⌶</code> is the case folding function</p>
<p><code>f←</code> because its name is long, we assign it to <em>f</em></p>
<p><code>⊢≠f</code> Boolean where text differs from lower-cased text</p>
<p><code>f¨⍨</code> use that (1 means uppercase, 0 means lowercase) to fold each letter...</p>
<p><code>⌽</code> ... of the reversed text</p>
<p>Handles non-ASCII according to the Unicode Consortium's rules.</p>
</div>
<div id="pu40" class="pu"><h2>Actually, 25 bytes</h2>
<pre><code>;`úíuY&quot;ùû&quot;E£`M@ùRZ`i@ƒ`MΣ
</code></pre>
<p><a href="http://actually.tryitonline.net/#code=O2DDusOtdVkiw7nDuyJFwqNgTUDDuVJaYGlAxpJgTc6j&amp;input=ImFiQ2Qi" rel="nofollow noreferrer">Try it online!</a></p>
<p>Explanation:</p>
<pre><code>;`úíuY&quot;ùû&quot;E£`M@ùRZ`i@ƒ`MΣ
;                          create a copy of the input
 `úíuY&quot;ùû&quot;E£`M             for each character in input:
  úíuY                       0-based index in lowercase English letters, or -1 if not found, increment, boolean negate (1 if uppercase else 0)
      &quot;ùû&quot;E£                 `û` if the character is lowercase else `ù` (str.lower vs str.upper)
              @ùRZ         make the other copy of the input lowercase, reverse it, and zip it with the map result
                  `i@ƒ`M   for each (string, function) pair:
                   i@ƒ       flatten, swap, apply (apply the function to the string)
                        Σ  concatenate the strings
</code></pre>
</div>
<div id="pu41" class="pu"><h1>TSQL, 175 bytes</h1>

<p>Golfed:</p>

<pre><code>DECLARE @ varchar(99)='Hello, Midnightas'

,@o varchar(99)='',@i INT=0WHILE @i&lt;LEN(@)SELECT
@i+=1,@o+=IIF(ascii(x)=ascii(lower(x)),lower(y),upper(y))FROM(SELECT
SUBSTRING(@,@i+1,1)x,SUBSTRING(@,len(@)-@i,1)y)z
PRINT @o
</code></pre>

<p>Ungolfed</p>

<pre><code>DECLARE @ varchar(99)='Hello, Midnightas'

,@o varchar(99)=''
,@i INT=0

WHILE @i&lt;LEN(@)
  SELECT @i+=1,@o+=IIF(ascii(x)=ascii(lower(x)),lower(y),upper(y))
  FROM
    (SELECT SUBSTRING(@,@i+1,1)x,SUBSTRING(@,len(@)-@i,1)y)z

PRINT @o
</code></pre>

<p><strong><a href="https://data.stackexchange.com/stackoverflow/query/508510/reverse-a-string-while-maintaining-the-capitalization-in-the-same-places" rel="nofollow">Fiddle</a></strong></p>
</div>
<div id="pu42" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow">Brachylog</a>, 28 bytes</h1>

<pre><code>@lr:?z:1ac.
h@u.,@A@um~t?|h.
</code></pre>

<h3>Explanation</h3>

<ul>
<li><p>Main Predicate:</p>

<pre><code>@lr                 Reverse the lowercase version of the Input
   :?z              Zip that reversed string with the Input
      :1a           Apply predicate 1 to each couple [char i of reverse, char i of Input]
         c.         Output is the concatenation of the result
</code></pre></li>
<li><p>Predicate 1:</p>

<pre><code>h@u.,               Output is the uppercase version of the first char of Input
     @A@um~t?       The second char of Input is an uppercase letter
             |      Or
              h.    Output is the first char of Input
</code></pre></li>
</ul>
</div>
<div id="pu43" class="pu"><h1><a href="http://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>19</s> <s>16</s> <s>15</s> 13 bytes</h1>
<p>Thanks to <strong>Emigna</strong> for saving a 3 bytes!</p>
<p>Probably gonna get beat by Jelly... Code:</p>
<pre><code>Âuvy¹Nè.lil}?
</code></pre>
<p>Uses the <strong>CP-1252</strong> encoding. <a href="http://05ab1e.tryitonline.net/#code=w4J1dnnCuU7DqC5saWx9Pw&amp;input=SGVsbG8sIE1pZG5pZ2h0YXM" rel="nofollow noreferrer">Try it online!</a>.</p>
</div>
<div id="pu44" class="pu"><h1><a href="http://jsoftware.com" rel="nofollow">J</a>, 30 bytes</h1>

<pre><code>(={"_1 toupper@]|.@,.])tolower
</code></pre>

<p>Doesn't support non-ASCII</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/84606/">84606</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




