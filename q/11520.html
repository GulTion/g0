<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::11520</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>090</td><td>C gcc</td><td>230630T093823Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/262318#262318">Peter</a></td></tr>
<tr d-ix="1"><td>090</td><td>Scala</td><td>230629T120008Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/262306#262306">138 Aspe</a></td></tr>
<tr d-ix="2"><td>015</td><td>Jelly</td><td>210928T045616Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/235782#235782">Bubbler</a></td></tr>
<tr d-ix="3"><td>045</td><td>Haskell</td><td>210117T190133Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/217672#217672">user</a></td></tr>
<tr d-ix="4"><td>022</td><td>APL Dyalog Unicode</td><td>201119T220705Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/215427#215427">user</a></td></tr>
<tr d-ix="5"><td>070</td><td>R</td><td>201122T233502Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/215519#215519">Dominic </a></td></tr>
<tr d-ix="6"><td>122</td><td>APLNARS</td><td>190313T091420Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/181449#181449">user5898</a></td></tr>
<tr d-ix="7"><td>069</td><td>AXIOM Computer Algebra System</td><td>190313T091308Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/181448#181448">user5898</a></td></tr>
<tr d-ix="8"><td>077</td><td>Groovy</td><td>130501T161227Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11546#11546">aditsu q</a></td></tr>
<tr d-ix="9"><td>039</td><td>Golfscript</td><td>130501T154425Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11544#11544">John Dvo</a></td></tr>
<tr d-ix="10"><td>nan</td><td>Ruby</td><td>130427T163256Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11521#11521">John Dvo</a></td></tr>
<tr d-ix="11"><td>004</td><td>Smalltalk Squeak 4.x flavour many bytes!</td><td>130430T003832Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11532#11532">aka.nice</a></td></tr>
<tr d-ix="12"><td>062</td><td>APL</td><td>130430T012615Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11533#11533">TwiNight</a></td></tr>
<tr d-ix="13"><td>092</td><td>Python</td><td>130427T194515Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11523#11523">flornqua</a></td></tr>
<tr d-ix="14"><td>083</td><td>Python</td><td>130427T211035Z</td><td><a href="https://codegolf.stackexchange.com/questions/11520/evaluate-the-nth-hyperoperation/11524#11524">Reinstat</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>C (gcc), <s>92</s> 90 bytes</h1>
<p>-2 bytes thanks to @ceilingcat!</p>
<pre class="lang-c prettyprint-override"><code>_;h(a,b,n){int k=_++||!scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;n),j=a;for(--n;n&amp;&amp;--b;)a=h(a,j,n);_*=k;a+=b;}
</code></pre>
<p><a href="https://tio.run/##RY7LCsIwEEX3@YqxYEhMAtoICmP@RChJSm1aTKWKm7bfHlvxcWcxi3vmMF5dvE@pwJpZ6WTkQ4gPaE0hxDiu7t7GimXrcplMUiupkzRy2RiLVdczpSJGSpVyyK1ZHM3swGJjWrTCOJzS4rvaENmzCyUnA4FP5ntgSxvAwBbndQKNIETg8Ke@ufUz@v7lHDMJNeMcf9BEppSDBk007CEnBzjCLr0A" rel="nofollow noreferrer">Try it online!</a></p>
<p>Ungolfed and explained:</p>
<pre class="lang-c prettyprint-override"><code>_;
h(a,b,n)
{
    int k = _++ || !scanf(&quot;%d %d %d&quot;, &amp;a, &amp;b, &amp;n),
    j=a;
    
    for (--n; n &amp;&amp; --b;)
        a=h(a,j,n);
    
    _*=k;
    a+=b;
}
</code></pre>
<p>The code applies the <code>n</code><sup>th</sup> hyperoperations to <code>a</code> and <code>b</code>, respectively. These inputs need not be provided by the caller, since they're immediately reinitialized anyways. <code>_++ || !scanf(&quot;%d %d %d&quot;, &amp;a, &amp;b, &amp;n)</code> makes <code>a</code>, <code>b</code> and <code>c</code> be read from <code>stdin</code> if and only if <code>_</code> is non-zero (that is, if the current function call is not a recursive one - if it's called by another function rather than itself). The expression returns 0 if any new characters were read and nonzero if they weren't, making <code>k</code> an indicator for whether the current function call is a recursive one or not.</p>
<p>Then, the <code>for</code> loop applies the <code>n-1</code><sup>th</sup> hyperoperation to <code>a</code> <code>b</code> times, using <code>j</code> to store the initial value of <code>a</code> and <code>a</code> to store the intermediate values. Finally, <code>_*=k</code> makes <code>_</code> zero again if and only if the current call is not a recursive one, so that the next call will reread the values of <code>a</code>, <code>b</code> and <code>c</code>, and <code>b</code> is added to <code>a</code>. Usually, <code>b</code> would equal 0 after the <code>for</code> loop, but if <code>n</code> equaled 1, the for loop wouldn't be executed at all and the function returns <code>a + b</code>. Note that the value of <code>a</code> is returned after <code>a+=b</code> since <a href="https://codegolf.stackexchange.com/a/106067/108622">assignments and returns are usually stored in the same register</a>.</p>
</div>
<div id="pu1" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 90 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/11521/110802">@John Dvorak's Ruby answer</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##XYtBC8IgGIbv/orvqOWCbZ0qB3Xr0LW7mYYhbmw2HOJvN2tdFrzwPDzwDoIbntrbUwoHF64tSO@kvQ9w7DoICKGRG1A7fNKPs3V0AcKaWYAl7OlEbS5aYduUJHxZkTDyHgTze9X2WB@KClwL00Zbd@XmJYlgKl8FtUVJ9iJKM8jgV1P82XqKCQF0fT4YixUuKXxGyKJWFLZ5f7WmUM8VxfQG" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>(x,y,n)=&gt;if(n&gt;1){if(n&gt;2){var c=x;for(i&lt;-2 to y.intValue)c=f(x,c,n-1);c}else{x*y}}else{x+y}
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##bY8/C8IwFMT3foobU02Ftk6igm4Oru4xTSQS0tJGSZF@9prW/hExvOH4vXfcpeJMs7bNr3fBLc5MGQhnhckqHIoCryAAMiEhidvgqG4nYynqWZpRhqPAzrvgn5IgBnvE4QBmlMwIeLIS3LvcRGRegihsIySwOeqVMvbC9EOQMJyO0Jt8LwrueyDyQdOSD6qB0JX4CnNYoB6XwZ8Th@Vw0K2b7v9F6fO1IZLEFN30LWaaUKz9/NCUIv3QoGnbNw" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main extends App {

  def f(x: BigInt, y: BigInt, n: BigInt): BigInt = {
    if (n &gt; 1) {
      if (n &gt; 2) {
        var c = x
        for (i &lt;- 2 to y.intValue())
          c = f(x, c, n - 1)
        c
      } else {
        x * y
      }
    } else {
      x + y
    }
  }

  println(f(1, 1, 1))
  println(f(2, 4, 4))
  println(f(3, 3, 4))

}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 15 bytes</h1>
<pre><code>ṛ+⁵ðx’ß@ƒ&gt;2¥ðỊ?
</code></pre>
<p><a href="https://tio.run/##DcqhDoJAGAfwzlP8ow4MMhMBeRXAAz7HPhh3DK5p0hltzmCyUwzOJpvvwb3IyX71txdlqS1x3SoZgD1oD71DGRgkQSwpZ8oojVkF0G7vVKoQTUdSzHu1xkIjrWoScolG7NpUINEw51MEqeJGEefoSBXg0LfT@@6a42scenO4jY/odw3973Mcps9la63dzPw/" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Writing a 3-argument program in Jelly is hard, though at least we need to use one of them only once in this problem. So this program takes three arguments in the order of <code>n y x</code> and recurses as a dyadic function. Roughly a hybrid of <a href="https://codegolf.stackexchange.com/a/235779/78410">this Ackermann solution</a> with <a href="https://codegolf.stackexchange.com/a/215427/78410">user's APL answer</a>.</p>
<h3>How it works</h3>
<pre><code>ṛ+⁵ðx’ß@ƒ&gt;2¥ðỊ?    Main program as a dyadic link.
                   Left = n, Right = y, 3rd arg (⁵) = x
A..ðB.......ðC?    If C then A else B
             Ị     If n &lt;= 1
ṛ+⁵                Then y + x
    x’ß@ƒ&gt;2¥       Else...
    x’             y copies of n-1
      ß@ƒ&gt;2        Reduce with the program itself flipped, with
                   the default value being n&gt;2 (1 or 0)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 45 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>1?x=(x+)
n?x=(!!)$iterate((n-1)?x)$signum$n-2
</code></pre>
<p><a href="https://tio.run/##JczBCoMwEIThu08xQg67dAON7VV9kLaHCKEN1UVMBN8@NRS@w38Y5uPTN8xzKW48ejou3GiNtmUTc9h8DkRqHY8HmxTfui9GbVeirntO6PEgJ6hYQJ3gfqp5FZxu/GoWH/UcrlvUDIPFr6AnecEkUIYdQDp6xsT4v5Yf" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p>Call it with <code>(n?a)b</code>.</p>
<h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 51 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>(1?a)b=a+b
(2?_)0=0
(_?_)0=1
(n?a)b=(n-1)?a$n?a$b-1
</code></pre>
<p><a href="https://tio.run/##JY1BCsMgFET3nmIWLv6nCpp2az1IW8IXCpUmIk16fmssvMUMM8y8ZHs/l6U18lE4BTklRVOc2QWnaB7CKyojpGI9R9Hd6WR9y6V@9w0BN/IGB2xAk8Glc0hn0DnzQ62SSy/WTy47NFapoDuJQTIoDHvF@EBi/FfbDw" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p>Copied straight from the hyperoperation formula on <a href="https://en.wikipedia.org/wiki/Hyperoperation#Definition" rel="nofollow noreferrer">Wikipedia</a>. Call it with <code>(n?a)b</code>.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>31</s> <s>23</s> 22 bytes (<a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a>)</h1>
<p><em>Saved 6 bytes thanks to <a href="https://codegolf.stackexchange.com/users/78410/bubbler">Bubbler</a></em></p>

<pre class="lang-apl prettyprint-override"><code>{×a←⍺-1:a∇⍣⍵×⍺-2⋄⍵+⍺⍺}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///v/rw9MRHbRMe9e7SNbRKfNTR/qh38aPerYeng0SMHnW3ADnaQDYQ1f5PA6vse9TVfGi98aO2iY/6pgYHOQPJEA/P4P8lqcUlQAXVFQqVCnlglVsVgAYo5CloVCikaSpU1nKBlBxaoaBhqACEmgoaJgpGcNoIShsDaWMFEzBtBKRNNOHajBQMwMpBtBGUNobSJpoA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>Can be used as <code>n (x f) y</code>.</p>
<pre class="lang-apl prettyprint-override"><code>{
 ×a←⍺-1:     ⍝ Check if n is greater than 1
  a←⍺-1      ⍝ Assign n - 1 to a variable a to reuse later
 ×           ⍝ Sign of a (0 if addition, 1 otherwise)

  a∇⍣⍵×⍺-2  ⍝ Apply the (n-1)th hyperoperation y times to x
       ×⍺-2  ⍝ Sign of n-2 (the identity for the nth hyperoperation
    ⍣        ⍝ Power operator, apply
   ∇         ⍝ the derived function (f x)
     ⍵       ⍝ y times
       ×⍺-2  ⍝ to the identity
  a          ⍝ With n-1 as the new n

⋄
⍵ + ⍺⍺     ⍝ n is 1 (addition)
}
<span class="math-container">```</span>
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 70 bytes</h1>

<pre class="lang-r prettyprint-override"><code>h=function(x,y,n)`if`(n&lt;2,x+y,{z=n&gt;2;while(y){z=h(x,z,n-1);y=y-1};+z})
</code></pre>
<p><a href="https://tio.run/##jY/BCsIwDIbvfYqCl1XjYJsn53wFH2EWrWuxa2WNuE589hnR01CQNGn78yfh60YdL6rzlBKNd9Woq9PVHV7vpIcITuzNaZ@4TQ79IsJ9qNw2L2/aWJVEQV9NtgHcMhNlrOIye5SL4SEmY5MMKASbqDmsYCXYjE/0AgrS@YyjNoHTCdbf0jTljLx0Bw8cPT@q1ruA1KTIKZGK4tI2vjOo21ff7rye7KwDyg6Na2qJdXu1aC7WHN7srPnBXkA//8befGVn/6/8kI5P" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>As other answers have noted, recursing back to the n=1 hyperoperation of addition is rather slow by the time that n&gt;3 and the hyperoperation is tetration or worse.  <a href="https://tio.run/##jY/BCsIwDIbvfYqCl1XjYJsn53wFH2EWrWuxa2WNuE589hnR01CQNGn78yfh60YdL6rzlBKNd9Woq9PVHV7vpIcITuzNaZ@4TQ79IsJ9qNw2L2/aWJVEQV9NtgHcMhNlrOIye5SL4SEmY5MMKASbqDmsYCXYjE/0AgrS@YyjNoHTCdbf0jTljLx0Bw8cPT@q1ruA1KTIKZGK4tI2vjOo21ff7rye7KwDyg6Na2qJdXu1aC7WHN7srPnBXkA//8befGVn/6/8kI5P" rel="nofollow noreferrer" title="R – Try It Online">TIO</a> link includes recursive version starting at n=2 (multiplication) to check that the approach is sound and works for the last test-case...</p>
<hr />
<h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>78</s> 74 bytes</h1>
<p><strong>(for all n, including n=0)</strong></p>

<pre class="lang-r prettyprint-override"><code>h=function(x,y=x,n)`if`(n&lt;2,x^n+y,{z=n&gt;2;while(y){z=h(x,z,n-1);y=y-1};+z})
</code></pre>
<p><a href="https://tio.run/##hZDdjoIwEEav7VNMsjc2YsKPesPWR9nYwLA0gUJoXakbn50tKC6uZU1K0jJz5pucpstNjU1lP65FJVmXs@wok/6@bD3DWk/Sg8gOS/keeu2HXBnv@8zkPoxPuShwaah95rb17Ml1QGPDzDq4xKvzhXZCJg2WKPVkJIXF4jHSspL5lPA0FcMK03xnu7FAQEl5LLSoC5FwF@akQkqwrStpdxIOyg1FlGjUjavfDWwovIHOhQJ7VFGdIKsa4EUB2CZYa/jCxoAq@z/Am89j70gR8mdY4A9i7CzFSwRux41CbY0C20MQOKBo0DPBRrND8cpFM1w45R4F/9KRP0NHU/pR9CTb95/40NuM3kb8rrwvDuBuu412hFi1qDQkXKGCU44SDHMtdLeXYiYkpv1QswqGFWbaZ63dbM/FvLB2pefgF9Ju0c/G/P@MjRTpfgA" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>This was one of those frustrating problems where I couldn't resist going-ahead and trying to write the shortest <em>general</em> solution, even if n=0 wasn't required by the question.<br />
The behaviour of n=0 (increment) and n=1 (addition) is different to all subsequent hyperoperations, since y=1 is not an identity function for these two cases.  I've worked-around this by stopping recursion when <code>n&lt;2</code>, and returning <code>x^n+y</code>, which manages to satisfy both the n=1 and n=0 cases.<br />
For added niceness (at the cost of another +2 bytes), we can specify a default value for y of x, which means that it needn't be provided as an argument at all for n=0, since this is can be considered a unary operation on y.<br />
So: +4 bytes wasted, but I'm happier now.</p>
</div>
<div id="pu6" class="pu"><h1>APL(NARS), chars 61, bytes 122</h1>
<pre><code>{(x y n)←⍵⋄n≤1:y+x*n⋄n=2:x×y⋄n=3:x*y⋄y≤0:1⋄∇x,(∇x(y-1)n),n-1}
</code></pre>
<p>test:</p>
<pre><code>  h←{(x y n)←⍵⋄n≤1:y+x*n⋄n=2:x×y⋄n=3:x*y⋄y≤0:1⋄∇x,(∇x(y-1)n),n-1}
  h 1 1 1
2
  h 2 4 4
65536
  h 3 4 4
∞
  h 3 3 4
7625597484987
</code></pre>
</div>
<div id="pu7" class="pu"><h1>AXIOM Computer Algebra System, bytes 69</h1>
<pre><code>p(x,y,n)==(n&lt;=1=&gt;y+x^n;n=2=&gt;y*x;n=3=&gt;x^y;y&lt;=0=&gt;1;p(x,p(x,y-1,n),n-1))
</code></pre>
<p>test:</p>
<pre><code>(2) -&gt; p(1,1,1)
   (2)  2
                                                 Type: Expression Integer
                                   Time: 0.05 (IN) + 0.03 (OT) = 0.08 sec
(3) -&gt; p(2,4,4)
   (3)  65536
                                                 Type: Expression Integer
                                                              Time: 0 sec
(4) -&gt; p(3,3,4)
   (4)  7625597484987
                                                 Type: Expression Integer
                                                              Time: 0 sec
</code></pre>
<p>This would eliminate some recursion...Possible I swap in x and y in some return...  are there other test values?</p>
</div>
<div id="pu8" class="pu"><h1>Groovy - 77</h1>

<pre><code>h={x,y,n-&gt;n&lt;2?x+y:y&lt;2?x:h(x,h(x,y-1,n),n-1)}
print h(args.collect{it as int})
</code></pre>

<p>Note: it requires obscene amounts of stack (and time) for non-tiny arguments.</p>
</div>
<div id="pu9" class="pu"><h3>Golfscript, slow, 39 characters</h3>

<pre><code> ~{\(.{3${[4$\2$4$.~}4$(*}{;;+}if])\;}.~
</code></pre>

<p><a href="http://golfscript.apphb.com/?c=OyIxMSA0IDMiCn57XCguezMkezQkXDIkNCQufn00JCgqe1w7fTQqfXs7Oyt9aWZ9Ln4%3D" rel="nofollow noreferrer">(live link)</a></p>

<p>This is the standard recursive algorithm with a base case of n=1 (addition) (i.e. slow). The same I've used in <a href="https://codegolf.stackexchange.com/a/11521/7209">my Ruby solution</a></p>

<p>Here's a version with my annotations (mostly stack-keeping). It doesn't include one optimisation I've added later:</p>

<pre><code>~{            #read the input and do (x y n f)
 \(.{         #(x y f n-1); if(n-1)
  3${         #(x y f n-1 c)
   4$\2$4$.~  #(x y f n-1 x c n-1 f); call
  }3$(*       #y-1 times
  {\;}4*
 }{           #else
  ;;+         #return (x+y)
 }if
}.~           #once
</code></pre>

<p><code>~</code> is the eval operator. In case of strings, it treats the string as a GolfScript program. Luckily, a space-separated list of integers is a valid GolfScript program that pushes those integers on the stack. Compared to this, my previous version of the input routine (<code>" "/{~}/</code>, split by space and eval each) is pretty lame. In case of functions, it calls the function. When preceded by <code>.</code> (clone), it calls the function with itself as the first argument.</p>

<p>Golfscript doesn't seem to be exactly well suited for making recursive algorithms. If you want a recursive algorithm that isn't tail-call optimisable, you need to create and destroy stack frames to preserve your variables. In most languages, this is done automatically. In golfscript, you have to actually clone the variables (actually, stack entries), and destroy the stack entries you no longer need. Golfscript has no concept of stack frames. Have I said GolfScript is a stack-based language?</p>

<p>The first requirement is understandable. You have to specify the arguments somehow. It's only nice if they keep their original positions as well. The second requirement is unfortunate, especially since the return value is on the top of the stack, and golfscript lacks the ability to delete just any stack element. You can rotate the stack and discard the new top element, but that quickly builds up. <code>\;</code> is fine. <code>\;\;\;\;\;</code> isn't. You can do <code>\;</code> in a loop (<code>{\;}9*</code>; cost: 6 chars to discard up to 9 elements, or 7 chars to discard up to 99 elements), but we can do better:</p>

<p>Golfscript has first-class arrays. It also has the array literal syntax <code>[1 2 3 4]</code>. What's unexpected is that <code>[</code> and <code>]</code> are not actually a part of the syntax. They are merely two operators: <code>[</code> marks the current position on the stack, and <code>]</code> collects every element until it finds the start-of-array mark or runs out of stack, and discards the mark. You can even tear these two apart and see what happens. Well, quite an interesting thing:</p>

<p>Did I say golfscript has no concept of stack frames? I lied. This is a stack frame: <code>[</code>. You can discard it all at once: <code>];</code>. But what if we want to keep the return value? You could close the stack frame on function entry (then we have a slightly mangled version of pass-by-array - not an interesting concept), or we can close the stack frame and take its last element instead of discarding it completely: <code>]-1=</code> or we can uncons the last element instead, and <em>then</em> discard the frame: <code>])\;</code>. They're the same length, but the latter is slightly cooler, so I'm using it.</p>

<p>So, instead of 6 or 7 characters to do a clean-up, we can do with 5. I still feel this could be golfed more, but hey, we've saved a character.</p>
</div>
<div id="pu10" class="pu"><h3>Ruby, slow, <del>86 84</del> 83 characters</h3>

<pre><code>def f x,y,n
n&gt;1?(c=x;2.upto(y){c=f(x,c,n-1)};c):x+y
end
p f *gets.split.map(&amp;:to_i)
</code></pre>

<h3>Ruby, fast, <del>96 94</del> 93 characters</h3>

<pre><code>def f x,y,n
n&gt;1?(n&gt;2?(c=x;2.upto(y){c=f(x,c,n-1)};c):x*y):x+y
end
p f *gets.split.map(&amp;:to_i)
</code></pre>

<p>The first version is <em>way</em> too slow with the last test case, so I added a version that uses multiplication as the base case instead of addition. The first version takes ages to calculate <code>3 3 4</code>; the second one is instanteneous (in the native IRB console; the web version is a bit slower).</p>

<p>Several beauties of Ruby show up here:</p>

<p>Almost every statement is an expression in ruby. Thus, you can stuff semicolons inside the ternary operator, provided you've got enough parentheses lying around. Coffeescript borrowed that one. It also borrowed Ruby's "no parens needed" call syntax.</p>

<p>Implicit returns: this is a cool feature, and follows from the previous. Indeed, starting the last line of a function with <code>return</code> is considered lame, even when not golfing. </p>

<p>Numbers are objects in ruby (even <code>null</code> is an object). In ruby, integers have the method <code>times</code>, which executes the block passed to it several times. This is just one of Ruby's many iterator methods. Here, the <code>upto</code> method lets us save two more characters over what <code>times</code> lets us.</p>

<p>unary <code>*</code> is the splat operator here. It turns an array into an argument list. Just like Javascript's <code>Function#apply</code>, but it's shorter and better.</p>

<p>unary <code>&amp;</code> turns a procedure into a block. While <code>:to_i</code> is a symbol, it converts into a procedure pretty well. Namely, it turns into a procedure that calls <code>to_i</code> on its argument and returns the result. <a href="https://stackoverflow.com/a/2259787/499214">More information on Stack Overflow.</a></p>

<p>It would be possible to get it even faster by using <code>n=3</code> as the base case, but I'm afraid it is not needed. It would only cost 11 characters, though, thanks to another beauty of ruby: the exponentiation operator <code>**</code>. Python has this operator, but it's not the first one (as @aka.nice noted - thanks -, Fortran already had this operator).</p>

<p>online ruby interpreter available here: <a href="http://repl.it/Ikj/1" rel="nofollow noreferrer">http://repl.it/Ikj/1</a></p>
</div>
<div id="pu11" class="pu"><p><strong>Smalltalk Squeak 4.x flavour many bytes!</strong></p>

<p>I could implement one of the recursive form in Integer in 71 char</p>

<pre><code>f:y n:n n=1or:[^(2to:y)inject:self into:[:x :i|self f:x n:n-1]].^self+y
</code></pre>

<p>Then reading from a file or FileStream stdin will cost me an arm... Squeak was obviously not designed as a scripting language. So I will spend many bytes to create my own general purpose utilities unrelated to the problem:</p>

<p>Implement this 21 char method in Stream (to skip seaparators)</p>

<pre><code>s self skipSeparators
</code></pre>

<p>Implement this 20 char method in Behavior (to read an instance from a Stream)</p>

<pre><code>&lt;s^self readFrom:s s
</code></pre>

<p>Then 28 chars in String (to create a file handle)</p>

<pre><code>f^FileDirectory default/self
</code></pre>

<p>Then 59 chars in FileDirectory (to create a readStream)</p>

<pre><code>r^FileStream concreteStream readOnlyFileNamed:self fullName
</code></pre>

<p>Then 33 chars in BlockClosure (to evaluate it n times)</p>

<pre><code>*n^(1to:n)collect:[:i|self value]
</code></pre>

<p>Then 63 chars in Array (evaluate the argument with receiver and arguments taken from the Array)</p>

<pre><code>`s^self first perform:s asSymbol withArguments:self allButFirst
</code></pre>

<p>then solve the problem by evaluating this 31 char snippet anywhere to read from file named x</p>

<pre><code>|s|s:='x'f r.[0class&lt;s]*3`#f:n:
</code></pre>

<p>Even without counting the utilities, that's 71+31=102 chars already...</p>

<p>Now, since I'm sure to lose the codeGolf, I have a funnier implementation in Integer:</p>

<pre><code>doesNotUnderstand:m
    (m selector allSatisfy:[:c|c=$+])or:[^super doesNotUnderstand:m].
    self class compile:
        m selector,'y y=0or:[^(2to:y)inject:self into:[:x :i|self'
        ,m selector allButLast,'x]].^'
        ,(Character digitValue:()asBit)
        ,(m selector size-2min:1)hex last.
    thisContext sender restart
</code></pre>

<p>This method will define (compile) a binary messages made of n + if it does not exist (is not understood by the receiver of the message m), and will restart execution at the beginning of sender context. I inserted additionnal carriage return and spaces for readability.</p>

<p>Note that <code>(m selector size-2min:1)hex last</code> is a shorted form of <code>(m selector size&gt;2)asBit printString</code>.</p>

<p>If it was not to demonstrate Smalltalk evil superpowers, the last statement could be replaced by shorter and simpler</p>

<pre><code>^m sendTo:self
</code></pre>

<p>Now implement 28 chars utility in Character (to repeat it n times in a String)</p>

<pre><code>*n^String new:n withAll:self
</code></pre>

<p>Then evaluate this 43 chars expression:</p>

<pre><code>|i s|i:=0class.s:='x'f r.[i&lt;s]*2`($+*(i&lt;s))
</code></pre>

<p>We can accelerate with 10 more chars by implementing in Integer:</p>

<pre><code>++y^self*y
</code></pre>

<p>and in this case we also have shorter code because we can replace <code>^',(m selector size-2min:1)hex last</code>with <code>^1'</code></p>

<p>For such a high price, the code work with second integer=0 :)</p>
</div>
<div id="pu12" class="pu"><h2>APL, 62</h2>

<pre><code>{1=3⌷⍵:2⌷+\⍵⋄0=2⌷⍵:(⍵[3]⌊3)⌷⍵[1],0,1⋄∇⍵[1],(∇⍵-0 1 0),3⌷⍵-1}⎕
</code></pre>

<p><code>{...}⎕</code>: Takes evaluated input (space-separated numbers evaluates to a numerical array) and apply function to it.</p>

<p><code>1=3⌷⍵:</code>: If n equals 1...<br>
<code>2⌷+\⍵</code>: Return sum of first 2 elements (x+y)...<br>
<code>⋄0=2⌷⍵:</code>: Else if y equals 0...<br>
<code>(⍵[3]⌊3)⌷⍵[1],0,1</code>: Create numerical array [x,0,1] and return index <code>min(n,3)</code>...<br>
<code>⋄∇⍵[1],(∇⍵-0 1 0),3⌷⍵-1</code>: Else return ∇(x,∇(x,y-1,n),n-1). (∇ is self-reference)</p>

<hr>

<p>I have got a "hyper-raiser" operator, which takes a function and return next hyperoperation</p>

<pre><code>{⍺⍺/⊃⍴/⌽⍵}
</code></pre>

<p>For example, <code>+{⍺⍺/⊃⍴/⌽⍵}</code> would be the multiplication function and <code>+{⍺⍺/⊃⍴/⌽⍵}5 3</code> outputs 15.</p>

<p>But can't get it to recurse. Maybe someone else can do it.</p>
</div>
<div id="pu13" class="pu"><h1>Python, <strike>96</strike> 92</h1>

<pre><code>def h(x,y,n):r=1;exec(n&gt;2)*y*"r=h(x,r,n-1);";return(r,(x+y,x*y)[n&gt;1])[n&lt;3]
print h(*input())
</code></pre>

<p>Input: <code>3, 3, 4</code><br>
Output: <code>7625597484987</code></p>

<p>Shortened using a couple of <a href="https://codegolf.stackexchange.com/a/11524/7409">@WolframH's ideas</a>.</p>
</div>
<div id="pu14" class="pu"><h1>Python, 83</h1>

<p>(Based on <a href="https://codegolf.stackexchange.com/a/11523/7971">flornquake's answer</a>)</p>

<pre><code>def h(x,y,n):r=n&gt;2;exec"r=h(x,r,n-1);"*y*(n&gt;1);return(x+y,r)[n&gt;1]
print h(*input())
</code></pre>

<p><strong>Very</strong> slow for large results.</p>

<p>For <code>2, 4, 4</code> the output is <code>65536</code>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/11520/">11520</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




