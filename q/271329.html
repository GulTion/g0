<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::271329</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>115</td><td>JavaScript Node.js</td><td>240227T033010Z</td><td><a href="https://codegolf.stackexchange.com/questions/271329/contract-a-tensor/271335#271335">tsh</a></td></tr>
<tr d-ix="1"><td>025</td><td>APL Dyalog Unicode</td><td>240226T222400Z</td><td><a href="https://codegolf.stackexchange.com/questions/271329/contract-a-tensor/271332#271332">Kamila S</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 115 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>f=(m,x,y,j)=&gt;(r=m.map?.((n,i)=&gt;f(n,x-1,y-1,x?j:i)),y?x?r:r.reduce(a=(u,v)=&gt;u.map?.((w,i)=&gt;a(w,v[i]))??u+v):r[j])??m
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=xVPBjtMwED1w61eMtIfarJs2aXfb7SrNiQsHOHBCrqU1rdNNaZzKTtpEiC_hsgf4KPgaxnYKC-JOpMj287w3b6yZL191tVVPT9-aOh8tvts8JSVrWcf2NF0Rk5ZRKY9ZRIhmBSI5ru0oZh3-bbZfFpSyLmszszSRUdtmo4hMScNOGNtcqGdPlbieeCEozbLm-kSXhu8F7suQ-seL97Wy9UZaZSGFhwHnEwYxg0SwAfApgxmDG7-_ZTBnsBCCgQuB0QriBK6gNnKjoMqhflRQytoU7QBlOBIXSHdc4KiI_LtwSPxNIrwsX_gc_RVmuOuTg3MycwohLvH55-EKxdDbJBymXg-dPbPGY6QmN3iaif9rJwl2nJWJt4Nvti3yXBmla5DanpUBeaj07jncKuttOz_-_Xs3IuRw6Sc9fOu2vSsXPu3x5FIU4vFvGAuKxZ_muHPW1_LPj8co4GjBE5-LoIDoLCh4CCvbVNo1RF1UGos6y85C6FBcpf4IHzpIBg8RdklJKDbv8YDdQ8ZX0cvxjsFwSCN7PBQ1Ga71WuMJm5mcIF3Bqb8YMyDr7TXtF5d9HMJaF_b63ds30VEaq0hLKb0f_GrvKK_MK7l5JISXDFoGHQMlqCN9wrrRuK2hwiHIwywiN6DVQUWHake8tEXnelfkHamQmqbwF6rQWIXUz_Q-TNhlyH8C" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 25 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{+/⍺⍉⍨(r-2)⌊⍋⍋(⍳r←⍴⍴⍺)∊⍵}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///v1pb/1Hvrke9nY96V2gU6RppPurpetTbDUQaj3o3Fz1qm/CodwsY7dJ81AGU2lr7/z8A" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p>Follows a golf suggested by Marshall. My original answer that shows the idea better:</p>
<pre class="lang-apl prettyprint-override"><code>{+/⍺⍉⍨(⍳r-2)@(⍵~⍨⍳r)⊢(r-2)@⍵⊢0⍴⍨r←⍴⍴⍺}
</code></pre>
<p>Matrix on the left, the two axes on the right. Works by noticing that tensor contraction on two axes given a tensor A is equivalent to dyadic transposition with rank(A)-2 in place of axes and iota everywhere else. Then we sum once by trailing axis. Transposition reduces rank by one, sum on trailing axis also reduces rank by one. Hence the resulting tensor has rank of rank(A)-2. Assumes quad IO of zero.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/271329/">271329</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




