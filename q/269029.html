<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269029</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>104</td><td>R</td><td>240108T172257Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269079#269079">qwr</a></td></tr>
<tr d-ix="1"><td>126</td><td>C gnu99</td><td>240108T182201Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269083#269083">qwr</a></td></tr>
<tr d-ix="2"><td>029</td><td>GolfScript</td><td>240106T231641Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269043#269043">noodle m</a></td></tr>
<tr d-ix="3"><td>045</td><td>JavaScript ES11</td><td>240106T213602Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269040#269040">Arnauld</a></td></tr>
<tr d-ix="4"><td>053</td><td>Python 2</td><td>240107T194635Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269058#269058">Albert.L</a></td></tr>
<tr d-ix="5"><td>011</td><td>Jelly</td><td>240107T141831Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269056#269056">Nick Ken</a></td></tr>
<tr d-ix="6"><td>154</td><td>APLNARS</td><td>240106T214937Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269041#269041">Rosario</a></td></tr>
<tr d-ix="7"><td>054</td><td>Python 3</td><td>240107T034823Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269049#269049">dingledo</a></td></tr>
<tr d-ix="8"><td>012</td><td>Wolfram Language Mathematica</td><td>240107T015552Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269045#269045">Greg Mar</a></td></tr>
<tr d-ix="9"><td>2040</td><td>APL NARS2000</td><td>240106T222806Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269042#269042">Ad&#225;</a></td></tr>
<tr d-ix="10"><td>100</td><td>Python</td><td>240106T174002Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269031#269031">noodle m</a></td></tr>
<tr d-ix="11"><td>025</td><td>Wolfram Language Mathematica</td><td>240106T175640Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269033#269033">ZaMoC</a></td></tr>
<tr d-ix="12"><td>023</td><td>Charcoal</td><td>240106T180641Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269035#269035">Neil</a></td></tr>
<tr d-ix="13"><td>063</td><td>Python 3.8</td><td>240106T174804Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269032#269032">m90</a></td></tr>
<tr d-ix="14"><td>011</td><td>Vyxal</td><td>240106T173417Z</td><td><a href="https://codegolf.stackexchange.com/questions/269029/calculate-500-digits-of-e/269030#269030">emanresu</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 104 bytes</h1>
<p>Since R doesn't have arbitrary precision arithmetic, and other answers already have used the limit definition and Taylor series of <em>e</em>, I use a decimal spigot algorithm to spice things up. I don't usually write loop-based code in R, so there is plenty of room for improvement. (<code>divmod</code> would be useful).</p>
<pre class="lang-r prettyprint-override"><code>m=254
C=rep(1,m)
cat(2)
for(i in 1:500){d=0;j=m;while(j&gt;1){t=10*C[j]+d;d=t%/%j;C[j]=t-d*j;j=j-1};cat(d)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMGCpaUlaboWNzNybY1MTbicbYtSCzQMdXI1uZITSzSMNLnS8os0MhUy8xQMrUwNDDSrU2wNrLNsc63LMzJzUjWy7Aw1q0tsDQ20nKOzYrVTrFNsS1T1VbOsQVzbEt0UrSyg6ixdw1prkHkpmrUQ-6DWwqwHAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Based on <a href="https://academic.oup.com/comjnl/article/11/2/229/378761?login=true" rel="nofollow noreferrer"><em>The Calculation of e to Many Significant Digits</em> by AHJ Sale (1968)</a>. The basic idea is to truncate the infinite series in nested form to a finite sum, extract an integer and fractional part, multiply the fractional part by 10, and repeat. Here's an example extracting the first decimal digit using the series up to the 4th term:</p>
<p><span class="math-container">$$
e = 2 + \left[  \frac 1 2 \left(1 + \frac 1 3 \left( 1 + \frac 1 4 (1) \right)  \right) \right]  \\
= 2 + \frac 1 {10}  \left[ \frac 1 2 \left(10 + \frac 1 3 \left( 10 + \frac 1 4 (10) \right)  \right) \right]  \\
= 2 + \frac 1 {10}  \left[ \frac 1 2 \left(10 + \frac 1 3 \left( 12 + \frac 1 4 (2) \right)  \right) \right]  \\
= 2 + \frac 1 {10}  \left[ \frac 1 2 \left(14 + \frac 1 3 \left( 0 + \frac 1 4 (2) \right)  \right) \right]  \\
= 2 + \frac 1 {10}  \left[ 7 + \frac 1 2 \left(0 + \frac 1 3 \left( 0 + \frac 1 4 (2) \right)  \right) \right]  \\
= 2 + \frac 1 {10}  \left[ 7 + \frac 1 {10} \left[ \frac 1 2 \left(0 + \frac 1 3 \left( 0 + \frac 1 4 (20) \right)  \right) \right] \right]  \\
\vdots
$$</span>
(idk how to do a proper mathjax align for each term)</p>
<p>I believe for <span class="math-container">\$m\$</span> terms, the integers involved never exceed <span class="math-container">\$10m\$</span>, and the fractional part is always less than 1, so the computed digit can't exceed 9 and affect the previous digit. <span class="math-container">\$e\$</span> is special because the coefficients of the Maclaurin series of <span class="math-container">\$e^x\$</span> are all 1. Trig functions for <span class="math-container">\$\pi\$</span> would have larger coefficients or negative terms.</p>
<p><span class="math-container">\$m\$</span> can be calculated beforehand from the error of the finite sum using Stirling's approximation. For $n$ digits (including 2 at the start), <span class="math-container">\$m\$</span> is the max integer such that</p>
<p><span class="math-container">$$m (\ln n-1) + 0.5 \ln (6.2831852 m) \le 2.30258509 n$$</span></p>
</div>
<div id="pu1" class="pu"><h1>C gnu99, 126 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/269079/17360">my R answer</a>. The initialization of array <code>C</code> to 1s is a GNU extension.</p>
<pre class="lang-c prettyprint-override"><code>i;d;j;t;C[]={[0 ...255]=1};main(){puts(&quot;2&quot;);while(++i&lt;500){d=0;j=254;while(j--&gt;2)t=10*C[j]+d,d=t/j,C[j]=t-d*j;putchar(d+48);}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700OT49OXnBgqWlJWm6FjfrMq1TrLOsS6ydo2Ntq6MNFPT09IxMTWNtDWutcxMz8zQ0qwtKS4o1lIyUNK3LMzJzUjW0tTNtTA0MNKtTbA2ss2yNTE2gElm6unZGmiW2hgZaztFZsdopOim2JfpZOiCObYluilaWNdCs5IzEIo0UbRMLTevaWogroI6BOQoA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="http://www.golfscript.com/golfscript/" rel="nofollow noreferrer">GolfScript</a>, 29 bytes</h1>
<pre><code>2 4000:a?:b){.*b/}a*5a?*+500&lt;
</code></pre>
<p><a href="https://tio.run/##S8/PSStOLsosKPn/30jBxMDAwCrR3ipJs1pPK0m/NlHLNNFeS9vUwMDm/38A" rel="nofollow noreferrer" title="GolfScript – Try It Online">Try it online!</a></p>
<p>Ports <a href="https://codegolf.stackexchange.com/a/269058/108687">Albert.Lang's wonderful Python 2 solution</a> to GolfScript. Check that answer for a better understanding of the math.</p>
<p>Code explanation:</p>
<pre class="lang-python prettyprint-override"><code>2 4000:a?:b)
2 4000        # Push 2, 4000 to the stack.
      :a      # Store 4000 in variable a.
        ?     # Power; 2 ^ 4000
         :b   # Store 2 ^ 4000 in variable b.
           )  # Add one.

{.*b/}a*5a?*
{             # Open a block:
 .*           # * Duplicate and multiply (squaring
              #     the top of the stack.)
   b/         # * Integer divide by b.
     }a*      # Run this block a times.
        5a?   # Push 5 ^ a.
           *  # Multiply.

+500&lt;
+      # Append this result to the implicit input,
       #   which is the empty string, therefore
       #   coercing the number to a string.
 500&lt;  # Leave just the first 500 characters of
       #   this string.
</code></pre>
<h2><a href="http://www.golfscript.com/golfscript/" rel="nofollow noreferrer">GolfScript</a>, 30 bytes</h2>
<pre><code>&quot;2.&quot;128 10 499?{2+/.@+\}251,/;
</code></pre>
<p><a href="https://tio.run/##S8/PSStOLsosKPn/X8lIT8nQyELB0EDBxNLSvtpIW1/PQTum1sjUUEff@v9/AA" rel="nofollow noreferrer" title="GolfScript – Try It Online">Try it online!</a></p>
<p>Based on m90's Python solution, since GolfScript has big integers but no floats.</p>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES11), 45 bytes</h1>
<p><em>-5 thanks to <a href="https://codegolf.stackexchange.com/users/76323/l4m2">@l4m2</a></em></p>
<p>A port of <a href="https://codegolf.stackexchange.com/a/269035/58563">Neil's method</a>, as suggested by Neil himself.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(q=i=999n)=&gt;i?f((q+10n**499n)/-~i--):&quot;2.&quot;+q
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/f8/zVaj0DbT1tLSMk/T1i7TPk1Do1Db0CBPS8sEJKSvW5epq6tppWSkp6Rd@D85P684PydVLyc/XSNNQ1PzPwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 53 bytes</h1>
<pre><code>p=4000
m=2**p+1
exec&quot;m=m*m&gt;&gt;p;&quot;*p
print`m*5**p`[:500]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728oLIkIz_PaMGCpaUlaboWN00LbE0MDAy4cm2NtLQKtA25UitSk5VybXO1cu3sCqyVtAq4Cooy80oScrVMgQoSoq1MDQxiIZqhZsDMAgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Outputs the digits as a single string, no decimal point.</p>
<h2>How?</h2>
<p>Approximately computes <span class="math-container">\$(1+1/n)^n\$</span> for <span class="math-container">\$n=2^{4000}\$</span> using repeated squaring.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 11 bytes</h1>
<pre><code>ȷ⁵*;R:\SDḣH
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///E9keNW7Wsg6xigl0e7ljs8f8/AA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A Jelly version of <a href="https://codegolf.stackexchange.com/a/269032/42248">m90’s Python answer</a>. This is a niladic link which returns the first 500 digits of e as a list of decimal digits.</p>
<h2>Explanation</h2>
<pre><code>ȷ           | 1000
 ⁵*         | 10 ** this
   ;R       | Concatenate to 1..1000
     :\     | Reduce using integer division, collecting intermediate results
       S    | Sum
        D   | Decimal digits
         ḣH | First 500 (since half of 1000 is 500)
</code></pre>
</div>
<div id="pu6" class="pu"><h1>APL(NARS), 154  chars</h1>
<pre><code>r←Q;d;k;v
r←d←1⋄k←÷10x*501⋄v←0x
r+←d×←÷v+←1⋄→2×⍳k&lt;∣d

499{⎕ct←0⋄k←≢b←⍕⌊⍵×10x*a←⍺⋄k-←s←'¯'=↑b⋄c←{s:'¯'⋄''}⋄m←s↓b⋄0≥z←k-⍺:c,'0.',('0'⍴⍨-z),m⋄c,(z↑m),'.',z↓m}Q
</code></pre>
<p>9+21+20+2+102 =154 (9+21+20+2=52)</p>
<p>154 chars because it seems is need to show the decimal float number, 52 if it is allowed show <code>e</code> as result
one rational number <code>eN</code> with <code>|eN-e|&lt;10^-500</code></p>
<pre><code>  2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200
  3059921817413596629043572900334295260595630738132328627943490763233829880753195251019011573834187930702154089149934
  8841675092447614606680822648001684774118537423454424371075390777449920695517027618386062613313845830007520449338265
  6029760673711320070932870912744374704723069697720931014169283681902551510865746377211125238978442505695369677078544
  99699679468644549059879316368892300987931
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 54 bytes</h1>

<pre class="lang-python prettyprint-override"><code>n=x=z=499
while~-n:x=(x+10**z)//n;n-=1
print(f'2.{x}')
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/7/P8@2wrbK1sTSkqs8IzMntU43z6rCVqNC29BAS6tKU18/zzpP19aQq6AoM69EI03dSK@6olZd8/9/AA" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 12 bytes</h1>
<pre><code>√Exp@2`500
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n277/1HHLNeKAgejBFMDg/8BRZl5JQoO6f//AwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a> I think this follows the letter of the rules since it doesn't &quot;call a library function to calculate e&quot;, although it could be considered cheaty to calculate <span class="math-container">\$e^2\$</span> and then its square root....</p>
<h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 17 bytes</h1>
<pre><code>Cosh@1+Sinh@1`500
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2773zm/OMPBUDs4Mw9IJZgaGPwPKMrMK1FwSP//HwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a> A direct port of <a href="https://codegolf.stackexchange.com/a/269030/56178">emanresu A's nice answer</a>.</p>
</div>
<div id="pu9" class="pu"><h1>APL (NARS2000), 20 chars = 40 bytes</h1>
<pre><code>499⍕+/5 6x○≢⎕FPC←1E4
</code></pre>
<p><code>⎕FPC←1E4</code> set Floating Point Control to use ten thousand bit floats</p>
<p><code>≢</code> count that (gives 1)</p>
<p><code>5 6x○</code> compute sinh and cosh of that (while indicating with <code>x</code> that we want extended precision)</p>
<p><code>+/</code> sum</p>
<p><code>499⍕</code> output with 499 decimals, i.e. 500 digits in total</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 100 bytes</h1>
<pre class="lang-python prettyprint-override"><code>from decimal import*
getcontext().prec=500
e=d=Decimal(1)
for x in range(2,254):e+=1/d;d*=x
print(e)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=Nc1LCsIwEADQfU6RZVJ_bbFQlOy8SMlMasBkwjBCPIubbvRO3sZFdf_gPd_lIVfKy_K6S9iNHwhMSQP6mKabjqkQS6NmFE9ZsIqx-8Lo3dC2Ch24yypNZ1Ug1lXHrHnKM5p-2w9He8KN6w5whsZVVThmMWjX61f-6y8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>-2 bytes thanks to <a href="https://codegolf.stackexchange.com/users/118045/rubenverg">RubenVerg</a></p>
<p>254 is the lowest number which gives the correct result, but this doesn't get slow until you start looping for thousands of iterations.</p>
<p>This uses the definition:</p>
<p><span class="math-container">\$ \displaystyle e = \sum_{n=1} ^{\infty} \frac{1}{n!} = \frac{1}{1} + \frac{1}{1 \cdot 2} + \frac{1}{1 \cdot 2 \cdot 3} + \cdots \$</span></p>
<p>The only optimization used is to instead of calculating the factorial of each n from 1 to 254, we store the factorial of <span class="math-container">\$ n-1 \$</span> in the variable <code>d</code>, and each iteration multiply d by the loop number <code>x</code>.</p>
<p>This uses the Python's decimal library with <code>getcontext()</code> in order to calculate the number to 500 digits of precision.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="noreferrer">Wolfram Language (Mathematica)</a>, 25 bytes</h1>
<pre><code>Sum[1/k!,{k,0,∞}]~N~500
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n277P7g0N9pQP1tRpzpbx0DnUce82tg6vzpTA4P/AUWZeSUKDun//wMA" rel="noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<h1><a href="https://www.wolfram.com/wolframscript/" rel="noreferrer">Wolfram Language (Mathematica)</a>, 29 bytes</h1>
<pre><code>Limit[(1+1/n)^n,n-&gt;∞]~N~500
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n2773yczN7MkWsNQ21A/TzMuTydP1@5Rx7zYOr86UwOD/wFFmXklCg7p//8DAA" rel="noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="noreferrer">Charcoal</a>, 23 bytes</h1>
<pre><code>≔⁰θＦ⊖φ≔÷⁺Ｘχ⁴⁹⁹θ⁻φιθ2.Ｉθ
</code></pre>
<p><a href="https://tio.run/##PYxBCsIwEEX3nmLoagaiRHFTuhK7cVHIFUI66kBMaBLb48cWxeXnv/fc0yYXra/1krM8AmoFE3W7e0yAPbvELw6FRzxqrYngR91C6WWWkdH4d0YTF04rouDctrQVFAwS1mfTFAjRN2uShILN6dD8x9XmghNRV2vdz/4D" rel="noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⁰θ
</code></pre>
<p>Start with a running total of <code>0</code>.</p>
<pre><code>Ｆ⊖φ≔÷⁺Ｘχ⁴⁹⁹θ⁻φιθ
</code></pre>
<p>For each integer from <code>1000</code> down to <code>2</code>, add <code>10**499</code> to the running total, then divide by that integer. This is equivalent to summing the reciprocals of the factorials from <code>2</code> to <code>1000</code> but without any loss of precision.</p>
<pre><code>2.Ｉθ
</code></pre>
<p>Output <code>e</code> to <code>500</code> digits.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="noreferrer">Python 3.8</a>, 63 bytes</h1>

<pre class="lang-python prettyprint-override"><code>x=10**499
print(f'2.{sum((x:=x//i)for i in range(2,253))+128}')
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM7YoKPr/v8LW0EBLy8TSkqugKDOvRCNN3Uivurg0V0Ojwsq2Ql8/UzMtv0ghUyEzT6EoMS89VcNIx8jUWFNT29DIolZd8/9/AA" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="noreferrer">Vyxal</a>, 11 bytes</h1>
<pre><code>1∆ȯ1∆ṡ+500Ḟ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCIx4oiGyK8x4oiG4bmhKzUwMOG4niIsIiIsIiJd" rel="noreferrer">Try it Online!</a></p>
<p>Calculates cosh(1)+sinh(1) to 500 decimal places.</p>
<pre><code>1∆ȯ         # cosh(1)
      +     # + 
   1∆ṡ      # sinh(1)
       500Ḟ # to 500 decimal places
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269029/">269029</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




