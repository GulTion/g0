<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::205654</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>348</td><td>Tamsin</td><td>240220T114709Z</td><td><a href="https://codegolf.stackexchange.com/questions/205654/explicit-ify-apl-expressions-involving-trains/270183#270183">Mukundan</a></td></tr>
<tr d-ix="1"><td>887</td><td>Python3</td><td>220528T180725Z</td><td><a href="https://codegolf.stackexchange.com/questions/205654/explicit-ify-apl-expressions-involving-trains/247951#247951">Ajax1234</a></td></tr>
<tr d-ix="2"><td>051</td><td>APL Dyalog Classic</td><td>200605T115027Z</td><td><a href="https://codegolf.stackexchange.com/questions/205654/explicit-ify-apl-expressions-involving-trains/205674#205674">ngn</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/catseye/Tamsin" rel="nofollow noreferrer">Tamsin</a>, 348 bytes</h1>
<pre><code>1=[2]-&gt;L&amp;f-&gt;F&amp;1-&gt;R&amp;a(F,[L,R])|2.2=&quot;(&quot;&amp;1-&gt;E&amp;&quot;)&quot;&amp;E|&quot;a&quot;|&quot;b&quot;|&quot;c&quot;|&quot;d&quot;|&quot;e&quot;|&quot;f&quot;|&quot;g&quot;|&quot;h&quot;|&quot;i&quot;|&quot;j&quot;|&quot;k&quot;|&quot;l&quot;|&quot;m&quot;|&quot;n&quot;|&quot;o&quot;|&quot;p&quot;|&quot;q&quot;|&quot;r&quot;|&quot;s&quot;|&quot;t&quot;|&quot;u&quot;|&quot;v&quot;|&quot;w&quot;|&quot;x&quot;|&quot;y&quot;|&quot;z&quot;.f=&quot;(&quot;&amp;(f|2)/nil/list-&gt;T&amp;&quot;)&quot;&amp;T|!(2|&quot;)&quot;)&amp;any.a([F,G,H|T],A)=a(H,A)-&gt;L&amp;a(F,A)-&gt;R&amp;a(G,[L,R])-&gt;R&amp;a([R|T],A).a([F|G],A)=a(F,A)-&gt;R&amp;a(G,[nil,R]).a(F,[L,R])=n@F&amp;R|1@F|n@L&amp;''+F+R|'('+L+')'+F+R.n=“nil“.
</code></pre>
<p><a href="https://tio.run/##VdDLTttAFAbgvZ/CzGLmHPkSxXtbARInaowAEy4hzWKABlyS4ZIADp1KfYtu@jZ9k75I@o9BQiw@zxzrP545XunFsjKbTTudJNMoK@QsynLZjrJSasrDSRGWU7ZJnKSChHvfk4KF7FmhhRUXcAlX8A1mcA03UMF3uIU5LMDAHdzDAzzCElbwBM/wAjWs4VXEs@ZgmtmEW6aat@bVchVlo@YWI7tFicWOpTbrWNMkD/vhwI6m4TanmgZY3ExuErdzM/XfZ3qrJuVbuOm1/fe@T2kc6vLxx@9ITSeXpW13cms6hVQqyIPSKlJBEShuqtik/379QSue8WahK@On/g/aEl@N8KWP23JLKT/K/AIltf2OX7Ar91HeP1Zm1eyQ@4lFqXijKYj@/uYXr6azMa@9p@Fw@OwdU31yyutz7e2ZAzosl6NjPjmtXeisHo/HV90uspqo28u5P/jCwwvvkuiWDg7LI2QXTOh3X6Tzbd7Z7bL5Dw" rel="nofollow noreferrer" title="Tamsin – Try It Online">Try it online!</a></p>
<p>Ungolfed version:</p>
<pre><code>expr1 = [expr2] -&gt; L &amp; function -&gt; F &amp; expr1 -&gt; R &amp; apply(F, [L, R])
      | expr2.

expr2 = &quot;(&quot; &amp; expr1 -&gt; E &amp; &quot;)&quot; &amp; E
      | &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot; | &quot;g&quot; | &quot;h&quot; | &quot;i&quot; | &quot;j&quot; | &quot;k&quot; | &quot;l&quot;
      | &quot;m&quot; | &quot;n&quot; | &quot;o&quot; | &quot;p&quot; | &quot;q&quot; | &quot;r&quot; | &quot;s&quot; | &quot;t&quot; | &quot;u&quot; | &quot;v&quot; | &quot;w&quot; | &quot;x&quot;
      | &quot;y&quot; | &quot;z&quot;.

function = &quot;(&quot; &amp; (function | expr2)/nil/list -&gt; T &amp; &quot;)&quot; &amp; T
         | !(expr2 | &quot;)&quot;) &amp; any.

apply([F, G, H | T], A) = apply(H, A) -&gt; L
                        &amp; apply(F, A) -&gt; R
                        &amp; apply(G, [L, R]) -&gt; R
                        &amp; apply([R | T], A).

apply([F | G], A) = apply(F, A) -&gt; R &amp; apply(G, [nil, R]).

apply(F, [L, R]) = n @ F &amp; R
                 | expr1 @ F
                 | n @ L &amp; '' + F + R
                 | '(' + L + ')' + F + R.

n = “nil“.
</code></pre>
<p>Unfortunately Tamsin does not have a easy way to match only uppercase/lowercase letters, so we need to do <code>&quot;a&quot;|&quot;b&quot;|...|&quot;z&quot;</code> for matching arrays, though we can take a shortcut for functions by just matching any char that cannot be matched as a array and is not <code>(</code> and <code>)</code> as a bonus this means symbols (like <code>+</code>, <code>-</code>, <code>×</code>, etc.) are considered functions.</p>
</div>
<div id="pu1" class="pu"><h1>Python3, 887 bytes:</h1>
<pre class="lang-py prettyprint-override"><code>def p(s):
 r=[]
 while s and(S:=s[0])!=')':
  if S.isalpha():r+=[s[0]]
  if'('==S:r+=[(K:=p(s[1:]))[0]];s=K[1]
  s=s[1:]
 return r,s
F=lambda x:(O:=ord(str(x)[0]))&lt;=91 and(64&lt;O&lt;91 or all(F(i)for i in x[-2:]))
R=lambda x:[i for i in x if i]
def f(s,l=0,r=0):
 if F(s):
  J=[]
  while s:
   if F(S:=s.pop(0))==0:J+=[S]
   else:
    if len(s)&gt;1 and F(s[0])==0:J+=[[S,s.pop(0)]]
    else:J+=[S]
  s=J
  c,s=[f([*s[0]])]if(t:=F(s[0])==0)else[],s[t:]
  c+=[f(R([l,s[0],r]))]if(S:=sum(map(F,s))%2)else[];s=s[S:]
  while s:
   if F(s[0])==0:c+=[s[0]];s=s[1:];continue
   a,b=s[:2];c+=[a,f(R([l,b,r]))if F(b) else f(b)];s=s[2:]
  return f(c)
 c=[]
 while s:
  if F(j:=s.pop(0)) and type(j)==list:
   c+=[f(j,l=c and not F(c[-1])and c.pop(),r=f(s))]
  else:c+=[j]
 return c
P=lambda e,l=0:e if str==type(e)else '('*(Y:=(l&gt;0 and len(e)&gt;1))+''.join(P(i,l+1)for i in e)+')'*Y
M=lambda s:P(f(p(s)[0]))
</code></pre>
<p><a href="https://tio.run/##bVNdb9pAEHz3r7g@VN4NTgS0qlqTi9SWOggrCoHmg1h@MMZWTI2xfKY1/fN097BDoLwgmJudnZ1d8k35sso@fM6L7XYexSIHhbYhCun5hvjzkqSRUCLI5jCxpfLaPr6TJprEEEksJheJCtL8JQC0i5b0mODrJxNMKScaBNeWpOp1bB@RCT0lXa/DPCU1TO2icl1korCU4cg0WM7mgahsuLXlqpiDKguouBTxUn7paDufPl7eXtL3VSGCNAUHEozpeyKSTFTeeZebGeO9lpeI/Tt7T3yD541BWalsW4Vs89z04OwSEEMdQZMBI7tXDuIiX@XQRpSybQ9pxgkzRZSqSPOYmEYZCV1pt6zJ9hu6N7EaCZ1XXfqqpOSQPkNLSS8G70zHin4SQ2nLvRRykedbyis5QxG2mD4GL7WYYhUUARex4fUSlkEOjqUQ33fryh7nP7FPTvnqN2z22qu31QtXWZlk64i5gTUj1O4SSrzAqvvPdHMtNEM9HAU9w51GV3esVx5DiIYI355bfVwOLN4krWMsN3kEC7KVJqrUXnczL2iFoWZkq5IKQ@@84yP/DnU90npp0RSHUUfNdYv94YXGqDmViM/BjtgB3Z2UumekExN01WcwtSWkV23djpcc0ZIRW6Z5sVglGYwgsdJWZ3@NEb2heTY1bpoWyh5BDPxP0ze9zYskK@EGzEo44lpsTDrdV8yhcz3GmLch9O8BCkRFQgdHbGDRAYrqEF2fRE9glWgUjl00Gv/hp1HoiwD1iFQ4EEMU7n8seJriIbR2Xff3AXIP1cMjbp6DA/QmG8HdWP28x4fH6lj0qZpOp/N@/0g7IE8/HLweDNGdHbyEAL9gdDeekN4SgfqxM3j@it@@9zFj7vYf" rel="nofollow noreferrer">Try it online!</a></p>
<p>This ended up being longer than I had originally anticipated, but this is an intriguing problem, and I thought I would add a non-APL, parsing-based solution.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, <s>63 59 58 54 52</s> 51 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>∊⍎'.[A-Z].'⎕r'{0::&amp;⍵⋄''() '',⍪⍺&amp;⍵}'⊢'\w'⎕r'''&amp;'''⊢⍞
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ooz0NSHQ96u1T14t21I2K1VN/1De1SL3awMpK7VHv1kfdLerqGpoK6uo6j3pXPerdBRKsVX/UtUg9phyiVF1dDYiBIo9654EM/J/GVaEREalZyZXGVert7V0GpEM1KsLCNSujEoFs37wAjcCg4pBQzbDwCi6w4oiKyMjIFBcXsJ5EDQ0XVzdNdw8vTe8kID9ZQyNbIyAwKBioI1dTA2gOyHSNKEdNJ2cXzTwA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>

<p>put all letters in quotes, replace uppercase letters with dfns that return either "(left) self right" or "self right" depending on the presence of a left arg, and execute.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/205654/">205654</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




