<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::270260</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>3132</td><td>05AB1E</td><td>240223T080952Z</td><td><a href="https://codegolf.stackexchange.com/questions/270260/sum-up-snail-number-neighbours/270264#270264">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>060</td><td>Charcoal</td><td>240223T065953Z</td><td><a href="https://codegolf.stackexchange.com/questions/270260/sum-up-snail-number-neighbours/270262#270262">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 31/32<sup><em>†</em></sup> <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>¯I·FāUøí¬g+Xš}2Fø€ü3}€`ʒ˜4èQ}˜O
</code></pre>
<p>Inputs in the order <span class="math-container">\$n,m\$</span>.</p>
<p>31 bytes - sum including <span class="math-container">\$m\$</span>: <a href="https://tio.run/##AT4Awf9vc2FiaWX//8KvScK3RsSBVcO4w63CrGcrWMWhfTJGw7jigqzDvDN94oKsYMqSy5w0w6hRfcucT///NQoxNw" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVC2P9D64sPbXc70hh6eMfhtYfWpGtHHF1Ya@R2eMejpjWH9xjXAqmEU5NOzzE5vCIysPb0HP//Ov@jo010DE1idaJNdQzNwZSRKZAy0zEyAVPGBhDKCEIZx8YCAA" rel="nofollow noreferrer">verify all test cases</a>.<br />
32 bytes - sum excluding <span class="math-container">\$m\$</span>: <a href="https://tio.run/##AUAAv/9vc2FiaWX//8KvScK3RsSBVcO4w63CrGcrWMWhfTJGw7jigqzDvDN94oKsYMqSy5w0w6hRfcucT86x//81CjE3" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWXC4QlhRf8PrS8@tN3tSGPo4R2H1x5ak64dcXRhrZHb4R2PmtYc3mNcC6QSTk06Pcfk8IrIwNrTc/zPbfyv8z862kTH0CRWJ9pUx9AcTBmZAikzHSMTMGVsAKGMIJRxbCwA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>Step 1: Create the spiral matrix for the given <span class="math-container">\$n\$</span>, taken from <a href="https://codegolf.stackexchange.com/a/241860/52210">this answer of mine</a>:</p>
<pre class="lang-python prettyprint-override"><code>¯             # Start with an empty list []
 I·           # Push the first input n and double it
   F          # Pop and loop that many times:
    ā         #  Push a list in the range [1,length] (without popping the matrix)
     U        #  Pop and store this list in variable `X`
      øí      #  Rotate the matrix 90 degrees clockwise:
      ø       #   Zip/transpose; swapping rows/columns
       í      #   Reverse each row
        ¬     #  Push the first row (without popping the matrix)
         g    #  Pop and push its length
          +   #  Add that to each value in the matrix
           Xš #  Prepend list `X` as first row
   }          # Close the loop
</code></pre>
<p>Step 2: Create overlapping 3x3 blocks of this matrix:</p>
<pre class="lang-python prettyprint-override"><code>2F            # Loop 2 times:
  ø           #  Zip/transpose; swapping rows/columns
   €          #  Map over each inner list:
    ü3        #   Create overlapping triplets
 }            # Close the loop
</code></pre>
<p>Step 3: Only keep the 3x3 block with <span class="math-container">\$m\$</span> in the center:</p>
<pre class="lang-python prettyprint-override"><code>€`            # Flatten the matrix of 3x3 blocks one level down to a list of 3x3 blocks
  ʒ           # Filter this list by:
   ˜          #  Flatten the 3x3 block to a list of 9 values
    4è        #  Pop and leave the 0-based 4th item (the center)
      Q       #  Check whether it equals the second (implicit) input m
  }           # Close the filter
</code></pre>
<p>Step 4: Sum the found 3x3 block, and output the result:</p>
<pre class="lang-python prettyprint-override"><code>˜             # Flatten the single wrapped 3x3 block to a list
 O            # Sum it together
  α           # (optionally) Take the absolute difference with the second (implicit) input m
              # to subtract m from this sum
              # (after which this is output implicitly as result)
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 60 bytes</h1>
<pre><code>Ｆ⊗Ｎ≔⁺⟦Ｅυ⊕λ⟧Ｅ∧υ⌊υ⁺ＬυＥ⮌υ§μλυＮθ≔⊟Φυ№ιθηＩΣＥΦυ‹↔⁻κ⌕υη²ΣΦι‹↔⁻μ⌕ηθ²
</code></pre>
<p><a href="https://tio.run/##bY49awMxDIb3/AqPMrhDAyVDpiMlcJCUkI6lw32osYk/LrYV@u@vspPQDl0Ekt5HegbdxSF0dp6/QhTwGqi3OELrJ8pv5HqMIKUUTUrm5OFgKcHHvpuAlGj9ENGhz5y3Un4qURaNH8tyb7xx5ICkVKJiO/SnrHlwyx3xijFh7Zvc@hG/wSnBh2RBSK4XfyUu3D8kwgRbYzNP@dEmkM9glLhUTnPuEA2PNl3K8M4K5dtvfocpQdOnYCkjsCarnZXYmpu3rleWpRT2zpn/OXfn9OP7strL9Ty/LJ5X89PV/gA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｆ⊗Ｎ≔⁺⟦Ｅυ⊕λ⟧Ｅ∧υ⌊υ⁺ＬυＥ⮌υ§μλυ
</code></pre>
<p>Input <code>n</code> and generate the spiral using the method from my answer to <a href="https://codegolf.stackexchange.com/q/241803/">Print a NxN integer involute</a> except 1-indexed.</p>
<pre><code>Ｎθ≔⊟Φυ№ιθη
</code></pre>
<p>Input <code>m</code> and find the row containing <code>m</code> in the spiral.</p>
<pre><code>ＩΣＥΦυ‹↔⁻κ⌕υη²ΣΦι‹↔⁻μ⌕ηθ²
</code></pre>
<p>Extract the neighbours of <code>m</code> and output the sum.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/270260/">270260</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




