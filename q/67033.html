<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::67033</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>672</td><td>Python3</td><td>240201T181104Z</td><td><a href="https://codegolf.stackexchange.com/questions/67033/please-parse-this-all1en-language/269677#269677">Ajax1234</a></td></tr>
<tr d-ix="1"><td>177</td><td>JavaScript ES6</td><td>210725T162600Z</td><td><a href="https://codegolf.stackexchange.com/questions/67033/please-parse-this-all1en-language/231771#231771">tjjfvi</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 672 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def F(b,g):
 if not b[0].isupper():yield b[0]
 for a,*B in g:
  if b[0]==a:yield from F(B*(B!=[' '])+b[1:],g)
def T(a,g):
 q=[(a,b,[])for A,*b in g if A==a]
 for A,b,s in q:
  for i,j in enumerate(b):
   if j==a and b[i+1:]and not b[i+1].isupper():yield b[i+1]
   for J,*k in g:
    if j==J and j not in s:q+=[(J,b[:i]+k*(k!=[' '])+b[i+1:],s+[j])]
def f(g):
 l,*g=g
 D={i[0]:{}for i in g}
 for i,(a,*b)in E(g):
  K=[*F(b,g)]
  for j in K:D[a][j]=i
  if' 'in K:
   for j in{*T(a,g)}:D[a][j]=i
 q,R=['S'],[]
 l+=[' ']
 while q:
  a,b=q.pop(0),l.pop(0)
  if a!=b:
   if a not in D:return
   q=[t for t in g[D[a][b]][1:]if' '!=t]+q;l=[b]+l;R+=[D[a][b]+1]
 return R
</code></pre>
<p><a href="https://tio.run/##dVJdi@IwFH3e/Iroi0kbZBxnYOmQh4r2wYF9sM5TNiwJ03aitV9WlkH87e5NWkVYBanpPTfn3HNPq@/2qyymP6vmfF7wpDjskka1CfpMUhwRzTIaIGxSXJQt1uJJjs3@UFVJQ2jwbZL80xURTssGK@bNsClwBjfsFYtwrvq@tCl3wDjzyGzAxQiPJPW1mAQSJJzamqhOreYCjpoJSS1tyDztaC1nCIS9XAgtewvUVs9WDNvY96sJoi2dm2UD97Aq7LjGB1F77CzB6z1TtmzvWt4l87ZXYxe6paPbOBbA9kHtw9xLpkVgpL/1yPbGptNke19sJJXObUqc15x5Gc8QnvOjgXUFx5Mz4tROqHcF2/A0hdKiu4TfufC6cGRv3Rl/D@ZCSdDgxiUA6q568WGbjl6359Ntb81WMGs8krBzmMnvBkf475fJk26/EAivx1VZkSfK8v7Q5awGXF/2rC77mAdN0h6awtYh0NYN4JBMOGUtpU3fTTngrfTrt5xD1c/fVjBA3@NS6Jjw6pxNMMfD4RAR5SuK4gjFJPYjiiKFbDl7xtz@K69vWC/QwrcPjNbRB/rw7AOjiMTXOyib9qRKKa01ilWIQhVqBL@u4eXacB9/vSX4H7dxt@WfrFG7nWpchD96S0J4Rl4TT03ewkf4qywShrPxvspNS0a/ixGFnBGqGlO0JCW3XBNK6V3g@REwfQS8PAJeATj/Aw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1 id="javascript-es6-177-bytes-0yqx">JavaScript (ES6), 177 bytes</h1>
<p>177 looks like LL1 rotated 177°, so I stopped golfing.</p>
<pre class="lang-js prettyprint-override"><code>s=&gt;(f=(x,i)=&gt;x&lt;&quot;A&quot;||x&gt;&quot;Z&quot;?v=s[i]==x&amp;&amp;[i+1,x]:s.split`
`.some((r,a,j)=&gt;v=r[0]==x&amp;&amp;[j=i,a=[a],...r].slice(3).every(y=&gt;f(y,j)&amp;&amp;a.push(([j]=v)[1]))&amp;&amp;[j,a]))(&quot;S&quot;,0)&amp;&amp;s[v[0]]==0&amp;&amp;v[1]
</code></pre>
<p><a href="https://tio.run/##LY@xasQwEER7f4YKscKK8JEmhKxDGhdXJIW6CIGFkS8yvrPR@oQM9@@OAplqB@YNO5NLjoYY1u0pvRzDcqNl9mpeLnDWX5@KthhulzDuAAdhCyNClkFgm9/YB3s8csu@2XtCMsEiZs5NqE8y21dStM5h66te0XL1AFE6ORUwYTTNf3bCIB0aZ6VSKlpFcxg8PAvlk4877NiOsBeKc6fWO/0AmMliEuZkhfjjpSsHMM1kUzyZVKpLd8N5KplDQF@Bq52odFdp0HUnqs6Vl8qqK4ii4xc" rel="noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<p>Outputs <code>false</code> if the string does not match, otherwise outputs a nested array of rule indices and terminals:</p>
<pre class="lang-js prettyprint-override"><code>[2,&quot;(&quot;,[1,[3,&quot;a&quot;]],&quot;+&quot;,[3,&quot;a&quot;],&quot;)&quot;]
</code></pre>
<h2 id="ungolfed-kldp">Ungolfed</h2>
<pre class="lang-js prettyprint-override"><code>str =&gt;
  (applyRule = (ruleName, index) =&gt;
    ruleName &lt; &quot;A&quot; || ruleName &gt; &quot;Z&quot;
      ? result = str[index] == ruleName &amp;&amp; [index + 1, ruleName]
      : str.split(&quot;\n&quot;).some(
        (rule, appliedRules, jndex) =&gt; result =
          rule[0] == ruleName &amp;&amp;
          (
            jndex = index,
            appliedRules = [appliedRules],
            [...rule].slice(1).every(char =&gt;
              applyRule(char, jndex)
              &amp;&amp; appliedRules.push(([jndex] = result)[1])
            )
            &amp;&amp; [jndex, appliedRules]
          )
      )
  )(&quot;S&quot;, 0)
  &amp;&amp; str[result[0]] == 0 // &quot;\n&quot; == 0
  &amp;&amp; result[1]
</code></pre>
<pre class="lang-js prettyprint-override"><code>function main(input) {
  const [str, ...rules] = input.split(&quot;\n&quot;)

  const result = applyRule(&quot;S&quot;, 0)

  if(result &amp;&amp; result[0] === str.length)
    return result[1]

  function applyRule(ruleName, index) {
    if (ruleName === ruleName.toLowerCase())
      return str[index] === ruleName ? [index + 1, ruleName] : null

    main: for (const [ruleIndex, rule] of rules.entries()) {
      if (!rule.startsWith(ruleName))
        continue
      let curIndex = index
      let appliedRules = [ruleIndex + 1]
      for (const char of rule.slice(1)) {
        let result = applyRule(char, curIndex)
        if (!result) continue main
        curIndex = result[0]
        appliedRules.push(result[1])
      }
      return [curIndex, appliedRules]
    }

    return null
  }
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/67033/">67033</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




