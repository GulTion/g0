<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::93651</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>170</td><td>Wolfram Language Mathematica</td><td>201009T043254Z</td><td><a href="https://codegolf.stackexchange.com/questions/93651/expand-the-variadic-expression/212205#212205">att</a></td></tr>
<tr d-ix="1"><td>567</td><td>Python 3</td><td>201008T153826Z</td><td><a href="https://codegolf.stackexchange.com/questions/93651/expand-the-variadic-expression/212186#212186">hyper-ne</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>267</s> <s>246</s> <s>190</s> <s>172</s> 170 bytes</h1>
<pre><code>R[ToString[&quot;&quot;@ToExpression@R[#,{&quot;(&quot;-&gt;&quot;~In~##&amp;[&quot;,&quot;)&quot;-&gt;&quot;]&quot;,a:(WordCharacter|&quot;_&quot;)..:&gt;q&lt;&gt;a&lt;&gt;q}]/.#2/.$...[[0]]|List-&gt;(##&amp;)/.In-&gt;(#@##2&amp;),CForm],q-&gt;&quot;&quot;]&amp;
R=StringReplace
q=&quot;\&quot;&quot;
</code></pre>
<p><a href="https://tio.run/##rZPBaoNAEIbvPoWMRVwwRnMMidhIA4FSWhvowUpYjCaC0agbKKh5dTtqEhpMW2g9iLszzjf/v@vsKNt6O8oCl1b@tLLsZfzK0iDa2ADGMn742KdelgVxZFi2IOcgwUCH4yI6CoJogwyk3jsg07H0Fqdrc0tT6jIvLWAFRFHGejLR6URPSmeoCKOhcqcoim2rjlM8Bhkb6BJyyFBZRPXSEISRSGRzHqc7R06QDI7IWdNWkeXtQ@p6XDKFd4Dq5RB4zHjGDLOFge5jsSMahpFzOdB0k6nYCWSOnxTtFoXmcK9CiTGeb2KjJjZT0cd1QqsTZaFjqIVpfcF8qQmRnnmIIz3xTFXmz@fXrkY9qz010H6hI0nrkNoWM63b26wTJia@XJuKbn7GX33cdJF88kdFZ5Mryf0nQbpcwLd/Swdy29JNIXMc0TgNaIgV9RjiC4fLo8xbPx3C8MapqBdF5PR03dUe6itoyrmy@gQ" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Input <code>[&quot;expr&quot;, packs]</code>. <code>packs</code> can be in any format accepted by <a href="https://reference.wolfram.com/language/ref/ReplaceAll.html" rel="nofollow noreferrer"><code>ReplaceAll</code></a>.</p>
<p>There unfortunately seems to be no straightforward way to simultaneously expand heads (<a href="https://reference.wolfram.com/language/ref/Through.html" rel="nofollow noreferrer"><code>Through</code></a>, <a href="https://reference.wolfram.com/language/ref/Comap.html" rel="nofollow noreferrer"><code>Comap</code></a><sup>14.0+</sup>) and arguments (<a href="https://reference.wolfram.com/language/ref/Thread.html" rel="nofollow noreferrer"><code>Thread</code></a>).</p>
<pre><code>R=StringReplace;q=&quot;\&quot;&quot;
ToExpression@R[#,{                  parse input:
 &quot;(&quot;-&gt;&quot;~In~##&amp;[&quot;,&quot;)&quot;-&gt;&quot;]&quot;,            convert f(args...) to In[f,args...]
 a:(WordCharacter|&quot;_&quot;)..:&gt;q&lt;&gt;a&lt;&gt;q     convert symbols to strings
}]
&quot;&quot;@ %                               wrap in &quot;&quot;
  /.#2                                insert packs
  /.$...[[0]]|List-&gt;(##&amp;)             expand packs
  /.In-&gt;(#@##2&amp;)                      convert In[f,args...] to f[args...]
ToString[ % ,                       stringify,
  CForm                               converting [] to ()
]
R[ % ,q-&gt;&quot;&quot;]                        unquote names
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 567 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda v,q:w(g(v,p(q),-1))
def c(s):
&#9;a=[];b=0;l=""
&#9;for x in s:
&#9;&#9;if x!=","or b:l+=x;b+=~-")(".find(x)%3-1
&#9;&#9;else:a+=[p(l)];l=""
&#9;return a+[p(l)]
p=lambda s:(0,p(s[:-3]))if"..."==s[-3:]else(1,(2,s.split("(")[0]),c(s[s.find("(")+1:-1]))if")"==s[-1]else(2,s)
def g(v,q,i):
&#9;if q[0]&gt;1:return q[1]if q[1]not in v or i&lt;0else v[q[1]][i]
&#9;if q[0]:return(g(v,q[1],i),[g(v,k,i)for k in q[2]])
&#9;a=[];i=0
&#9;while 1:
&#9;&#9;try:a+=[g(v,q[1],i)];i+=1
&#9;&#9;except:return a
w=lambda k:",".join(q for q in[w(x)for x in k]if q)if type(k)==list else k if type(k)==str else k[0]+"("+w(k[1])+")"
</code></pre>
<p><a href="https://tio.run/##TVLLjtwgEDwPX0GQIoGMLTNz84RIST6DcPCs8S4x68GGzENR8uuTbtu72ltTTRdV1cR7fjmPh0evfz5C@3rqWnqRU3Plz/wiI5@ELJUQpHM9feJJNGTXamOPJ10fg2aM7PrzTG/UjzRBb@d7evukmWSAnppQ6NvxVOh/JROcVb0fO34Tnw@lgqsuJNe0hTaRB2E3ttnl3/NI22JFSdSbqNTwGvQk05QHK4TvWVVVTOtkykNjkYsryfcyVSkGnznjTJjaCgmqTVqfRqxQTalWArGOq3UaRlebaHySHq2CmwlIvqpm0zUZZRdQ2fGc0fWFglP/pUYOejHYscbb99ltcokTm0AsDR4GqDC7AVkms7dWbNl6XZPd9cUHRxVmmuf7ktMHCrhU6CXE25OL@U1eS65veQ0NLKH6dfYjnyi@M8E75grxvy9sWKxAEjTfo@OD0Dr4lOliBWR9wFOeNxgsFZBjceUDSBEFpPjwr/E8Z5ruiZCWaiyqlDs/VrNrOy7gMPvIBSEBuu26oeBHlxDrAPvzlxDUhSBKCwa3BOYHaCK4bRUi6gxqsICDgMYS4vAKrhFei6F9cpxRJiljwB1nP2be805SJ8SjnZ9TTb/VlGC1p9/xsNSK9PxHLelyA37WWu0FlP8B" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Could use a lot of golfing but I'm pretty happy with this answer. Tested on all 10 example cases.</p>
<p>-9 bytes thanks to Neil</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/93651/">93651</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




