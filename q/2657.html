<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::2657</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>055</td><td>Julia</td><td>231013T143755Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/265972#265972">MarcMush</a></td></tr>
<tr d-ix="1"><td>010</td><td>Uiua</td><td>231013T093852Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/265967#265967">Bubbler</a></td></tr>
<tr d-ix="2"><td>012</td><td>Japt</td><td>190213T160549Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/179857#179857">Kamil Dr</a></td></tr>
<tr d-ix="3"><td>102</td><td>Clojure</td><td>190213T131457Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/179840#179840">NikoNyrh</a></td></tr>
<tr d-ix="4"><td>014</td><td>APL Dyalog Extended</td><td>190208T123713Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/179686#179686">lirtosia</a></td></tr>
<tr d-ix="5"><td>117</td><td>Python</td><td>120401T133418Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/5377#5377">hallvabo</a></td></tr>
<tr d-ix="6"><td>195</td><td>JavaScript</td><td>110525T152932Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2667#2667">pimvdb</a></td></tr>
<tr d-ix="7"><td>118</td><td>Haskell</td><td>110525T065037Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2666#2666">MtnViewM</a></td></tr>
<tr d-ix="8"><td>nan</td><td></td><td>110525T025720Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2664#2664">Theo Bel</a></td></tr>
<tr d-ix="9"><td>042</td><td>Golfscript</td><td>110524T221416Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2659#2659">YOU</a></td></tr>
<tr d-ix="10"><td>236</td><td>Scala</td><td>110524T215918Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2658#2658">Gareth</a></td></tr>
<tr d-ix="11"><td>108</td><td>Windows PowerShell</td><td>110524T222957Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2661#2661">Joey</a></td></tr>
<tr d-ix="12"><td>102</td><td>Ruby 1.9</td><td>110524T221915Z</td><td><a href="https://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps/2660#2660">Ventero</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://julialang.org" rel="nofollow noreferrer">Julia</a>, 55 bytes</h1>
<pre><code>!a=[sum(a[:,j].&gt;m-i) for i=1:(m=max(a...)),j=axes(a,2)]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VVG7boMwFFVXvuKSyZYIwqa0FZGztAxd2g6JVMliMApIRkBRAImO_Y4uWfJR7dfUNg6htmzfxznn-trf53KopDidzkNfrB9-7l3BeDfUSPDYK1N_W68lhuLjCJKRGNWsFiMSvu9j7JVMjHmHhEdxOtF_b776vOs7YMAdHkEIFAhs1LqFCO6Upf0AohTYFngAek4AfVJjkdmi1qJ2bpSglgxTh1OLCdWuVC6CxBINycBC6-kSttAVHNgUMdqGkjq6W9UV5GOLQTZgWnJAjfYomx6tnl9iWGETOciurcQnEngJeN3vZkSmHsMV_8DZlJGFLgEug8z4C4Hk_S153CVPs8qSru9lgnlzuFatGoQdFZl-4vKhfw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.uiua.org" rel="nofollow noreferrer">Uiua</a>, 10 bytes</h1>
<pre><code>⇌⍉/+⬚0∵↯∶1
</code></pre>
<p><a href="https://www.uiua.org/pad?src=ZiDihpAg4oeM4o2JLyvirJow4oi14oav4oi2MQoKZiBbWzEgNF1bMiAyXVswIDBdXQpmIFtbNSAzIDIgMV1bMSA0IDUgNl1bMiAxIDAgNV1d" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>⇌⍉/+⬚0∵↯∶1    input: a matrix of numbers
        ∵↯∶1    replace each number with that many 1s repeated...
     ⬚0         ...filling the remaining space in the 3D array with zeros
   /+            sum layers element-wise
⇌⍉              transpose and reverse to put the result in correct orientation
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 12 bytes</h1>

<pre><code>c rÔÆÕËè&gt;X
w
</code></pre>

<p><a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=YyBy1MbVy+g+WAp3&amp;input=W1tbNSAzIDIgMV0KWzEgNCA1IDZdClsyIDEgMCA1XV0sCgpbWzIgMl0KWzEgM10KWzAgMF1dLAoKW1syIDMgMl0KWzIgMSAwXQpbMSAwIDFdXV0KLVFt" rel="nofollow noreferrer">Try all test cases</a></p>

<p>Outputting the rows in reversed order would save <a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=YyBy1MbVy+g+WA==&amp;input=W1s1IDMgMiAxXQpbMSA0IDUgNl0KWzIgMSAwIDVdXQotUQ==" rel="nofollow noreferrer">2 bytes</a>, taking input in column-major order would save <a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=YyBy1MbL6D5YCnc=&amp;input=W1s1IDEgMl0KWzMgNCAxXQpbMiA1IDBdClsxIDYgNV1dCi1R" rel="nofollow noreferrer">1 byte</a>, doing both would (naturally) save <a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=YyBy1MbL6D5Y&amp;input=W1s1IDEgMl0KWzMgNCAxXQpbMiA1IDBdClsxIDYgNV1dCi1R" rel="nofollow noreferrer">3 bytes</a></p>

<p>Explanation:</p>

<pre><code>c rÔ          #Find the maximum height
    Æ         #For each number X in the range [0...max_height]:
     Õ        # Get the columns of the input
      Ë       # For each column:
       è&gt;X    #  Count how many items are greater than X

w             #Reverse the output
</code></pre>
</div>
<div id="pu3" class="pu"><h2>Clojure, 102 bytes</h2>

<pre><code>#(for[h(range(apply max(flatten %))0 -1)](map(fn[w _](count(for[r % :when(&gt;=(r w)h)]_)))(range)(% 0)))
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, 14 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>{⊖⍉+⌿⍵≥⍀⍳⌈/,⍵}
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/v/pR17RHvZ3aj3r2P@rd@qhz6aPehke9mx/1dOjrAAVq/6c9apvwqLfvUd9UT/9HXc2H1hs/apsI5AUHOQPJEA/P4P@VQCXGCiaPereYKhgrGCkYAqGJgqmCGZhtoGDKxVXJ9ah3DVeaQiUA" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>

<pre class="lang-apl prettyprint-override"><code>{⊖⍉+⌿⍵≥⍀⍳⌈/,⍵}    Monadic function:
             ⍵     Start with a 2D array ⍵.
          ⌈/,      Find the overall maximum value h.
         ⍳         Make the list 1...h
       ≥⍀          Make a ≥ table between that list and ⍵.
                   Now we have a 3D matrix where position [a,b,c]
                   represents whether ⍵[a,b] is at least c.
    +⌿             We sum along the outermost (first) dimension, 
                   since that corresponds to a column of ⍵.
                   Now we have a 2D matrix where position [b,c]
                   represents how many values in column b of ⍵ are at least c.
  ⍉                Transpose so the heights are rows.
 ⊖                 Flip vertically.
</code></pre>
</div>
<div id="pu5" class="pu"><h2>Python, 117 chars</h2>

<pre><code>import sys
a=zip(*sys.stdin)[:-1]
n=int(max(map(max,a)))
while n:print''.join(`sum(e&gt;=`n`for e in r)`for r in a);n-=1
</code></pre>

<p>Similar to Ventero's Ruby solution.</p>
</div>
<div id="pu6" class="pu"><h2>JavaScript, <s>235</s> <s>208</s> 195 bytes</h2>

<pre><code>function _(b){for(e=Math.max.apply(0,b.join().split(",")),f=[],c=i=0;i&lt;e;i++){for(
c=[],a=0;a&lt;b[0].length;a++)for(d=c[a]=0;d&lt;b.length;d++)b[d][a]&gt;i&amp;&amp;c[a]++;f[e-i-1]
=c.join("")}return f.join("\n")}
</code></pre>

<p>Just for the record, this is the code I made up before posting the question. (Smallened now)</p>
</div>
<div id="pu7" class="pu"><h2>Haskell, 118 characters</h2>

<pre><code>import List
p h=map(\c-&gt;transpose(lines h)&gt;&gt;=show.length.filter(&gt;=c))['1'..maximum h]
main=interact$unlines.reverse.p
</code></pre>

<hr>

<ul>
<li>Edit (122 → 118): avoid filtering by only iterating to maximal height</li>
</ul>
</div>
<div id="pu8" class="pu"><p>Haskell Version (Now optimized)</p>

<pre><code>import Data.List
import Text.Parsec
import Text.Parsec.String

main= readFile"in.txt"&gt;&gt;=(\t-&gt;either print(putStrLn.intercalate"\n".map(concatMap show).(\j-&gt;map (\n-&gt;(map(length.(filter(&gt;=n)))(transpose$reverse j))) (reverse [1..(maximum$map maximum j)])))(parse(many1$many1 digit&gt;&gt;=(\x-&gt;newline&gt;&gt;(return$map(read.return)x)))""t))
</code></pre>

<p>Ungolfed version</p>

<pre><code>import Data.List (foldl', transpose, intercalate)
import Text.Parsec
import Text.Parsec.String

-- Source:  http://codegolf.stackexchange.com/questions/2657/swapping-heightmaps-to-depthmaps

digitArray :: Parser [[Int]]
digitArray = many1 $ do xs &lt;- many1 digit
                        optional newline
                        return $ map (read . return) xs

maxHeight :: Ord c =&gt; [[c]] -&gt; c
maxHeight = maximum . (map maximum)

heightToDepth :: [[Int]] -&gt; [[Int]]
heightToDepth ins = level (maxHeight ins)
        where level 0 = []
              level n = (map (length . (filter (&gt;=n))) xs) : level (n-1)
              xs      = transpose $ reverse ins

lookNice xs = intercalate ['\n'] $ map (concatMap show) xs

main = do inText &lt;- readFile "in.txt"
          case parse digitArray "" inText of
              Left err -&gt; print err
              Right xs -&gt; putStrLn $ lookNice $ heightToDepth xs
</code></pre>
</div>
<div id="pu9" class="pu"><h3>Golfscript, 42 chars</h3>
<pre><code>n%{n*~]}%zip:|[]*$),{:);n|{{)&gt;},,}%}%-1%\;
</code></pre>
<p>results</p>
<pre><code>$ golfscript 2657.gs &lt; 2657-1.txt 
0001
1012
1112
1212
2222
3323

$ golfscript 2657.gs &lt; 2657-2.txt 
01
12
22

$ golfscript 2657.gs &lt; 2657-3.txt 
010
211
322
</code></pre>
</div>
<div id="pu10" class="pu"><h2>Scala 236 characters</h2>

<pre><code>object D extends App{var(l,m,z)=(io.Source.stdin.getLines.toList,0,0);val a=Array.ofDim[Int](l.head.size,10);for(i&lt;-l;(j,q)&lt;-i.zipWithIndex;x&lt;-1 to j-48){a(q)(x-1)+=1;m=List(m,j-48).max};for(i&lt;-1 to m){for(j&lt;-a){print(j(m-i))};println}}
</code></pre>

<p>With some formatting:</p>

<pre><code>object Depthmap extends App
{
    var(l,m,z)=(io.Source.stdin.getLines.toList,0,0)
    val a=Array.ofDim[Int](l.head.size,10)
    for(i&lt;-l;(j,q)&lt;-i.zipWithIndex;x&lt;-1 to j-48)
    {
        a(q)(x-1)+=1
        m=List(m,j-48).max
    }
    for(i&lt;-1 to m)
    {
        for(j&lt;-a)
        {
            print(j(m-i))
        }
        println
    }
}
</code></pre>

<p>I'm sure a better facility with for comprehensions would mean I could cut some characters from this.</p>
</div>
<div id="pu11" class="pu"><h2>Windows PowerShell, 108 <s>111</s> <s>114</s></h2>
<pre><code>(($i=@($input))-split''|sort)[-1]..1|%{$h=$_
-join(1..$i[0].Length|%{$x=$_-1
@($i|?{&quot;$h&quot;-le$_[$x]}).count})}
</code></pre>
<p>Passes all test cases.</p>
</div>
<div id="pu12" class="pu"><h2>Ruby 1.9, 102 characters</h2>

<pre><code>f=$&lt;.map{|g|[*g.chop.bytes]}
f.flatten.max.downto(49){|j|puts f.transpose.map{|n|n.count{|r|r&gt;=j}}*""}
</code></pre>

<p>Passes all testcases.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/2657/">2657</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




