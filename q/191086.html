<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::191086</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>115</td><td>Python 3</td><td>240506T073501Z</td><td><a href="https://codegolf.stackexchange.com/questions/191086/heavy-box-stacking/272969#272969">Jitse</a></td></tr>
<tr d-ix="1"><td>270</td><td>Scala 3</td><td>240503T004932Z</td><td><a href="https://codegolf.stackexchange.com/questions/191086/heavy-box-stacking/272928#272928">138 Aspe</a></td></tr>
<tr d-ix="2"><td>377</td><td>Python3</td><td>240501T152342Z</td><td><a href="https://codegolf.stackexchange.com/questions/191086/heavy-box-stacking/272910#272910">Ajax1234</a></td></tr>
<tr d-ix="3"><td>178</td><td>Python 3.8 prerelease</td><td>190830T234734Z</td><td><a href="https://codegolf.stackexchange.com/questions/191086/heavy-box-stacking/191093#191093">Hiatsu</a></td></tr>
<tr d-ix="4"><td>116</td><td>JavaScript Node.js</td><td>190830T215022Z</td><td><a href="https://codegolf.stackexchange.com/questions/191086/heavy-box-stacking/191088#191088">Arnauld</a></td></tr>
<tr d-ix="5"><td>019</td><td>Jelly</td><td>190830T214923Z</td><td><a href="https://codegolf.stackexchange.com/questions/191086/heavy-box-stacking/191087#191087">Erik the</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 115 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda x=0,*q,z=[]:x and min((f(*q,z=z[:i]+[[x]+y]+z[i+1:])for i,y in enumerate(z+[[]])if x&gt;=sum(y)),key=len)or z
</code></pre>
<p><a href="https://tio.run/##JY9NjsMgDIX3OYWX0HgRwkx/ItGLIC/ohGhQG9ImqRS4fArUQpb1/L4HPMP6P3m574N6mPHWG9hUg4cXRqWp28D4HkbnGRtYEaPuHNVab1QHqqN2teiID9MMDgM4D9a/Rzub1bKYbETcDbBd1fIeWeAc7zaoh/U8AXHP2J9ZbOZ0pQVCiyARfhB@EY4IFwTRElb6fEqqTNtLqizK5JGNbPJSFHviREHbMhxLP30jS0RxncvJNyWNugrgOTu/5u8t07zanuUHcc73Dw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, 270 bytes</h1>
<p>A port of <a href="https://codegolf.stackexchange.com/a/191093/110802">@Hiatsu's Python answer</a> in Scala.</p>
<p>270 bytes, it can be golfed more.</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=jZLNjtMwEMe11xx4hlFOtupG26ZAsZRIIHFAYgEJcaoiZNK4GeQ4UTwFqqpPspflwL7JPgT7NDgOlO1KiI2s8cf8Zsb_cS6vXamMSn_Gq3hqlN1s1aaSXetI47e3nYtFPLXtV9XbuLg9u2k_fa5KgguFFvYRwLrS0PgNU_3GSXje92q3ek892k3BJXywSJAFEuCLMkCVo5k_eY2O2PKpgEU6F_DMfwJm83QhID1Pz_kJP__DzwR4OPVBAh4LeOIDh6hTOr1D_3OchiyOFwp5l2EMxUYsmM5LImNZgxYbZd6pnpCwtSwo4vz_0PwhUPoQaBGgQxSNEu4zEtigZvXKUpHlYXncF9xr_bElPV3enj1SWa6ZSlzbU7XmSaM69jHRaKjq_cK29mXT0Y57D9oXO380Em7b8GCi4fk1s_KYXzh5r2AWOhsM5_yO9y9SZNb_RFTW-6hUroJaSspyl6BdY1m5RBtFF6rbY5ajZnWeOYbjBTQj4ZJtt1ZeAENRT-Tg47wyPs8bNIeE2qHQZBJQOQkXqX0DQyVPjB1ijh_Gtnz_PV9djfMv" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>a=&gt;f(a.sorted).map(_.filter(_.nonEmpty)).minBy(_.map(_.sum).sum)
def f(n:List[Int],s:List[List[Int]]=List(List())):List[List[List[Int]]]=n match{
case h::t=&gt;s.indices.flatMap{i=&gt;if(h&gt;=s(i).sum)f(t,s.updated(i,h+:s(i)))else Nil}.toList++f(t,s:+List(h))
case Nil=&gt;List(s)}
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=jZTPatwwEMYvPeUp5iixqsmut83WsIEWeigkSyDkFJagteVERZaNNU5Zwl76Gr3k0jxUnqaSLP_ZbEJjjLCl3zeab8bWnyeTcsXjx8e_DeYfF88ffpebnyJFOOdSw8MRQCZyKOwL4fWtSeBrXfPt9SXWUt-uaQJXWiIsPQlwzxWgMDi1M2fSIFmcMJjHMwZf7MVgOovnDOLj-Jju8bOOnzKwcGxFDD4x-GyFTrVPxyP6zXtfMu8T8nEX_nabtZgfKmsJlSaF1LLg6oLXKFGWmnhHlP4fmr0Hit8DzT20Owr1z6XOesAQ3RQbUdtmOEvXPzSuGZhmYwR2c_3CujPuB0rpGBgoh4WottmY3oWGptwIuBM8gyQB5FLB8tQvQLdhZFOTqTBRrjie8woeQA4QgMyB-ACny05CJI1MU9CwR3u5Tmnx69IjNhuvmSQjzVuwgT5y1FQZR5ERyYb1sfBFIZ2jEWkGdAdCWesrqcLULsLS1Qsmk9ejhBQgmbQFdwZCq30VV7547ZoZtut7fPAdHHaZvtbd4c8zZW29r0Ib-4ZG7XyPVX3mlnlhZS_E8AvpUn8vKtxejKVDnKjgFbmJcqlQ1Pahw4P9Q3VkzX7bWrIVuo_BD74eu_YoCidSdzL9Aw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def main(args: Array[String]): Unit = {
    val test1 = List(87, 432, 9999, 1234, 3030)
    val test2 = List(1, 2, 3, 4, 5, 6, 9, 12)
    val test3 = List(1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
    val test4 = List(8, 5, 8, 8, 1, 2)
    
    println(minimalPartition(test1))
    println(minimalPartition(test2))
    println(minimalPartition(test3))
    println(minimalPartition(test4))
  }

  def findPartitions(numbers: List[Int], subsets: List[List[Int]] = List(List())): List[List[List[Int]]] = numbers match {
    case head :: tail =&gt;
      subsets.indices.flatMap { i =&gt;
        if (head &gt;= subsets(i).sum) {
          val newSubset = head +: subsets(i)
          val newSubsets = subsets.updated(i, newSubset)
          findPartitions(tail, newSubsets)
        } else Nil
      }.toList ++ findPartitions(tail, subsets :+ List(head))
    case Nil =&gt; List(subsets)
  }

  def minimalPartition(numbers: List[Int]): List[List[Int]] = {
    val sortedNumbers = numbers.sorted
    val partitions = findPartitions(sortedNumbers)
    val nonEmptyPartitions = partitions.map(_.filter(_.nonEmpty))
    nonEmptyPartitions.minBy(_.map(_.sum).sum)
  }
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Python3, 377 bytes</h1>
<p>Takes input sorted in descending order. A little long, but fast.</p>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(b):
 q=[(b,[])]
 for b,c in q:
  if[]==b:return c
  Q,S=[(b[1:],[],1,0)],{}
  for B,o,I,k in Q:
   if o:S[len(o)]=S.get(len(o),[])+[o]
   if B:O=o+[I];Q+=[(B[1:],O,I+1,k+B[0])]*(k+B[0]&lt;=b[0]and all(b[K]&gt;=sum(b[j]for j in O[J+1:])for J,K in E(O)));Q+=[(B[1:],o,I+1,k)]
  for I in S[max(S)]:q+=[([a for i,a in E(b)if i not in[0]+I],c+[[b[0]]+[b[i]for i in I]])]
</code></pre>
<p><a href="https://tio.run/##hY8/T8MwEMX3foobbXxCSQO0DZghUoe0Q1VltDwkrQPpn7h1UwRCfPZydhiApVHknO/uvffL4aN7tW0yPrjLZSpNe94bV3ZmsDY11Kzi6QCOUrEKleZ6ALV1UOEKmhaONIKmVlrKKnWmO7sWVtRaYuEFKk41iTDGiGv8/KKJF2doMcetN1h6A3IAmxZqZ1pmuZbF7YvpWH/zmUJZ/bOWpQtphcr141JQQhYSFpiLGLciUxEB3rC@epIVnWW7hnK3I5a5fpan856qjfYUG5@/UDNBFtw3Zjj3rSlbcM5/@9ve3/974M/9WqH25TsruE6PflOVYdRg2XtUnGgbaG1Hd@IQucaVUMozaUGfJkA0fjvXhH05uKbtWM1O1nVmzVSMMERIEO4Q7hEeECYI8VCjM2/GnYyMCXPwXzUekSAh4YQev5@QPImS6IouDiGUFofAYSgewjnqQa4FB4NxeD363/XLNw" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 178 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda b,s=[[]]:(a for i in range(len(s))if b[0]&gt;=sum(s[i])for a in f(b[1:],s[:i]+[[b[0]]+s[i]]+s[i+1:]+[[]]))if b else[s]
g=lambda a:(c:=sorted(f(a),key=len)[0])[:c.index([])]
</code></pre>

<p><a href="https://tio.run/##dY7daoQwEIXvfYqB3kwwlNXsjw3YFxlyEddow7pRjIXu09sktqWlu5MwDMz5zpnptryNTlTTvK5dPehr02pouK@JlJKooRtnsGAdzNr1Bgfj0DNmO2hop15r/35FT1axqNNR12FDhVTck7QqJ4o6lUdN6nnY5dF8MwEzeENeZf13uJZ4lrUf58W02KFm/GJudchlwYiRPD9b15oPJMXUOs3WLdjjYP2CXwxVJw57UXJ4CcWhKMWeg9iJgIfK7jIFhwCIAHI4cDgGOJJ/iaD699Sv/c8ByaNKPxpHl@wJHgUfUnCRsss0HFM/bTdtN6yf" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>

<p>Now works on all possible inputs. <em>(It times out on TIO with more than ten or so boxes, but it calculates a correct answer)</em></p>
</div>
<div id="pu4" class="pu"><h1>JavaScript (Node.js), <s> 139 122 </s> 116 bytes</h1>
<p>Expects the input sorted in ascending order.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(A,s=[],[n,...a]=A,r)=&gt;n?s.some((b,i,[...c])=&gt;n&lt;eval(b.join`+`)?0:f(A,c,a,c[i]=[n,...b]))?S:r?0:f(A,[...s,[]]):S=s
</code></pre>
<p><a href="https://tio.run/##bY3NCsIwEITvPkWOCa6hTdRqMRafwWMImMZWKjWRRvr6desfIi5z2vlm5mx7G13XXG8zH47VMNSK7iAqbUB74Jxbo3bQMbX1ReQxXCpKS2hAo@XM@N5UvW1pyc@h8YfpgRVJXmOFAwtON0Y9a0rDWLHPu5c7xiNoY1i@V3FwwcfQVrwNJ1pTnQIRQCSQOZAFkCWQNZBUYMXkh1xlCEkxuhJhmcgEYbw/LLZ@JN4L3yPZ/5B4@KunEBnu" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (                        // f is a recursive function taking:
  A,                         //   A[] = input array
  s = [],                    //   s[] = list of stacks, initially empty
  [n,                        //   n   = next weight to process
      ...a] = A,             //   a[] = array of remaining weights
  r                          //   r   = recursion flag
) =&gt;                         //
  n ?                        // if n is defined:
    s.some((b, i,            //   for each stack b[] at position i in s[],
                  [...c]) =&gt; //   using c[] as a copy of s[]:
      n &lt; eval(b.join`+`) ?  //     if n is not heavy enough to support all values in b[]:
        0                    //       abort
      :                      //     else:
        f(                   //       do a recursive call:
          A, c, a,           //         using A[], c[] and a[]
          c[i] = [n, ...b]   //         with n prepended to c[i]
        )                    //       end of recursive call
    ) ?                      //   end of some(); if successful:
      S                      //     return S[]
    :                        //   else:
      r ?                    //     if this is a recursive call:
        0                    //       do nothing
      :                      //     else:
        f(A, [...s, []])     //       try again with an additional stack
  :                          // else:
    S = s                    //   success: save the solution in S[]
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 19 bytes</h1>

<pre><code>Œ!ŒṖ€ẎṖÄ&gt;ḊƲ€¬ȦƊƇLÞḢ
</code></pre>

<p><a href="https://tio.run/##y0rNyan8///oJMWjkx7unPaoac3DXX1AxuEWu4c7uo5tAgocWnNi2bGuY@0@h@c93LHo/@F2kMoZ//9HW5jrKJgYG@koWAKBjoKhkbGJjoKxgbFBLAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Obvious -3 thanks to <a href="https://codegolf.stackexchange.com/users/42248/nick-kennedy">Nick Kennedy</a>...</p>

<p>Top to bottom.</p>

<p>Explanation:</p>

<pre><code>Œ!ŒṖ€ẎṖÄ&gt;ḊƲ€¬ȦƊƇLÞḢ  Arguments: S (e.g. [1, 2, 3, 4, 5])
Œ!                   Permutations (e.g. [..., [4, 1, 5, 2, 3], ...])
    €                Map link over left argument (e.g. [..., [..., [[4, 1], [5], [2, 3]], ...], ...])
  ŒṖ                  Partitions (e.g. [..., [[4, 1], [5], [2, 3]], ...])
     Ẏ               Concatenate elements (e.g. [..., ..., [[4, 1], [5], [2, 3]], ..., ...])
               Ƈ     Filter by link (e.g. [..., [[1, 3], [2], [4], [5]], ...])
              Ɗ       Create &gt;=3-link monadic chain (e.g. [[1], [], [0]])
           €           Map link over left argument (e.g. [[1], [], [0]])
          Ʋ             Create &gt;=4-link monadic chain (e.g. [1])
      Ṗ                  Remove last element (e.g. [4])
       Ä                 Cumulative sum (e.g. [4])
         Ḋ               [Get original argument] Remove first element (e.g. [1])
        &gt;                Greater than (vectorizes) (e.g. [1])
            ¬          Logical NOT (vectorizes) (e.g. [[0], [], [1]])
             Ȧ         Check if non-empty and not containing zeroes after flattening (e.g. 0)
                 Þ   Sort by link (e.g. [[[1, 2, 3], [4, 5]], ..., [[5], [4], [3], [2], [1]]])
                L     Length (e.g. 4)
                  Ḣ  Pop first element (e.g. [[1, 2, 3], [4, 5]])
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/191086/">191086</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




