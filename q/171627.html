<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::171627</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>006</td><td>Uiua SBCS</td><td>240209T093256Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/269935#269935">chunes</a></td></tr>
<tr d-ix="1"><td>054</td><td>Ruby</td><td>180906T071137Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171799#171799">G B</a></td></tr>
<tr d-ix="2"><td>119</td><td>Haskell</td><td>180903T144356Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171637#171637">Damien</a></td></tr>
<tr d-ix="3"><td>007</td><td>Mathematica</td><td>180904T224410Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171732#171732">LegionMa</a></td></tr>
<tr d-ix="4"><td>nan</td><td></td><td>180905T075319Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171744#171744">Peter Co</a></td></tr>
<tr d-ix="5"><td>077</td><td>R</td><td>180903T174145Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171646#171646">J.Doe</a></td></tr>
<tr d-ix="6"><td>045</td><td>JavaScript Node.js</td><td>180903T132905Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171632#171632">Arnauld</a></td></tr>
<tr d-ix="7"><td>112</td><td>Clean</td><td>180903T223303Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171652#171652">Οurous</a></td></tr>
<tr d-ix="8"><td>009</td><td>APL Dyalog Unicode</td><td>180903T165527Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171644#171644">Erik the</a></td></tr>
<tr d-ix="9"><td>009</td><td>APL Dyalog</td><td>180903T130529Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171630#171630">Uriel</a></td></tr>
<tr d-ix="10"><td>010</td><td>05AB1E</td><td>180903T130318Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171629#171629">Kevin Cr</a></td></tr>
<tr d-ix="11"><td>014</td><td>Japt</td><td>180903T153809Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171640#171640">Shaggy</a></td></tr>
<tr d-ix="12"><td>015</td><td>Pyth</td><td>180903T160510Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171642#171642">Mr. Xcod</a></td></tr>
<tr d-ix="13"><td>008</td><td>Jelly</td><td>180903T144801Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171638#171638">Dennis</a></td></tr>
<tr d-ix="14"><td>060</td><td>JavaScript Node.js</td><td>180903T132145Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171631#171631">Luis fel</a></td></tr>
<tr d-ix="15"><td>055</td><td>Python 2</td><td>180903T130256Z</td><td><a href="https://codegolf.stackexchange.com/questions/171627/multi-dimensional-reversal/171628#171628">TFeld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a> <sup><a href="https://tinyurl.com/Uiua-SBCS-Jan-14" rel="nofollow noreferrer">SBCS</a></sup>, 6 bytes</h1>
<pre><code>∧(⍉⍥⇌)
</code></pre>
<p><a href="https://uiua.org/pad?src=0_8_0__ZiDihpAg4oinKOKNieKNpeKHjCkKCmYgMV8wXzEgWwogIFtbMSAyIDMgNF0KICAgWzUgNiA3IDhdCiAgIFs5IDEwIDExIDEyXV0KCiAgW1sxMyAxNCAxNSAxNl0KICAgWzE3IDE4IDE5IDIwXQogICBbMjEgMjIgMjMgMjRdXV0KCmYgWzEgMV0gW1s3XV0KZiBbMV0gWzEgMiAzIDQgNSA2IDddCg==" rel="nofollow noreferrer">Try it!</a></p>
<p>Takes the array and a mask of which dimensions to reverse like <code>[1 0 1]</code>.</p>
<pre><code>∧(⍉⍥⇌)
∧(   )  # fold over mask and array, using array as accumulator
   ⍥⇌   # reverse the array either 0 or 1 times
  ⍉     # transpose
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 54 bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>f=-&gt;a,d{r,*z=d;r&amp;&amp;a.reverse!;d==[]?a:a.map{|w|f[w,z]}}
</code></pre>

<p><a href="https://tio.run/##NU7LDoIwELzzFXjhYEbClrek@iFNDyXASRNSRCKPb69LlD3szmQyM2vH@uNcJy83g2axOM@yqWwQmNC279YO7alqpFT6bq4mfJp@Wae1UxNmvW1O8RCEhoqRaD4vO7bYFxPvr2LXoFJkyFEwKkERiEBityiKQQkoBWVMKQcVoBIiYibYLyBiCI4/8jvzGI4WT/@eMqhXv/c7xUBv7gs" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1>Haskell, <s>120</s> 119 bytes</h1>
<p>the function f takes the N-dimensional list and a list of bool as input</p>

<pre class="lang-hs prettyprint-override"><code>class F r where f::[Bool]-&gt;r-&gt;r
instance F Int where f=seq
instance F r=&gt;F[r]where f(a:y)=last(id:[reverse|a]).map(f y)
</code></pre>
</div>
<div id="pu3" class="pu"><h1>Mathematica, 7 bytes</h1>

<pre><code>Reverse
</code></pre>

<p>Function. Give it a nested list as the first argument, and the 1-based list of levels/dimensions to reverse as the second argument. <a href="https://tio.run/##bVAxDsJADNt5RUaQbiC50hYh/oBYEUNBBTrAABXL6d5enFyrAuqQIbbjJL5X7a2@V21zrrruQlua7@t3/XzVi023ezaP9nA5hBDYkTjyjrLoKKwc5Y4KR6V2a0e8REHDEhUJDCVnKCg5V4ih5hIFtSwVEfWEqUArWbRBQD4ej5vZuLrfrCwMdXNS/stMMEkVg7X8EuNPyRcfTYxPOSpmpoafmityQ0hBvzY77lNa24p0sfbeNg2pFSbw6fUQ0jFln3GeRrUz2g@sRSHD9ArTcbwNt/Qx6uD31YmRCUyh7gM" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>

<p><sup><sup>Finally, another challenge where Mathematica has a builtin!</sup></sup></p>
</div>
<div id="pu4" class="pu"><p>(untested but I <em>think</em> correct.  compiler asm output looks like what I expect.  Will update if/when I find time to write a test harness that creates and prints this data structure.)</p>

<h1>GNU C++ (portable) 148 bytes</h1>

<pre><code>#include&lt;algorithm&gt;
#include&lt;cstdint&gt;
struct m{intptr_t d,l,a[];void R(int*r){if(*r)std::reverse(a,a+l);for(int i=0;d&amp;&amp;i&lt;l;((m*)a[i++])-&gt;R(r+1));}};
</code></pre>

<h1>GNU C++ (int=pointer and falls off a non-void function UB) 120 bytes</h1>

<pre><code>#include&lt;algorithm&gt;
struct m{int d,l,a[],R(int*r){if(*r)std::reverse(a,a+l);for(int i=0;d&amp;&amp;i&lt;l;((m*)a[i++])-&gt;R(r+1));}};
</code></pre>

<p>This is a struct of depth counter, length, array of {integers or pointers}.  In the bottom level of this non-binary tree (<code>depth==0</code>), the array of <code>intptr_t</code> is an array of integers.  In higher levels, it's a <code>struct m*</code> stored in <code>intptr_t</code>.  Traversal takes a cast.</p>

<p>The <code>R()</code> reverse function is a member function because that saves declaring an arg, and saves a lot of <code>p-&gt;</code> syntax to reference the struct members vs. the implicit <code>this</code> pointer.</p>

<p><strong>The only GNU extension is the <a href="https://en.wikipedia.org/wiki/Flexible_array_member" rel="nofollow noreferrer">C99 flexible array member</a> to make a variable-sized struct</strong>, which is supported in C++ as a GNU extension.  I could have used a <code>*a</code> member pointing to a separately-allocated array and have this be plain ISO C++.  (And that would actually save a byte without requiring any other changes).  I wrote this as a mockup / reference implementation for an asm version.</p>

<hr>

<p>The shorter version with just <code>int</code> also declares <code>R()</code> as returning <code>int</code> instead of <code>void</code>.  These two bits of hackery are unrelated; this is just the "works on at least one implementation" version.</p>

<p>It should work fine on 32-bit targets (where <code>int</code> can hold a pointer), as long as you compile with gcc7 or older, or disable optimizations.  (<code>gcc8 -O3</code> assumes that execution can't reach the bottom of a non-<code>void</code> function because that would be UB.)  x86 <code>gcc -m32 -O3</code> should work fine with gcc7, <a href="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSAbAQwDtRkBSAJgCFufSAZ1QBXYskwgA5AHoZHAMx8linggIEADoJBy0WYKgYAzAHSCCTZAGtMAD2QJWwTKbQBbGQEcRmC3lQWQRlaAHZaADYuUJl3EQYCPABafHdMIICWJgYk4kwAN0xiQWyOAAYAQXKKuW4FPBZkBhEsAGpFAGELdAY8ACNTBEVsarqGppbMTuzDYkIEd2HqrLTBTStMVsMTTHQAfQBVHj2GgnbQvkrqi2IRZDPFi9PW9EZSJg4AVj5PgBFSABKEFOACpiABKDhPYwQMHg7ogEB5QrFTAQJjvfgMSEqSrGEjAlhnPCKX5lVTobgRKkkhQdBiqKDuEHgj7fEm8fhfX7gpLDIHEfi0cE4y5VUK/KGS3FVK6VJgiIitYyaAjEdoKX7tLgRdyIgGqVpyLaYM7AZDIVpKzDuQitVj2wTuF6YYwNQiZUYSo0yVorPzrCRbIzGXaHY6nUZy2VVLj1RrNLDTBizeaLBQjK5x8aJqZ05DdSMZ5ZMVaBzbbUPoc5i65qu4PKE8U6q4h7M6vBiY77c1T5VB4atA0EQpt4GFwhFIgpFQRojEfXjY1TVfHEQnE0nkpSUnU0zoMpRMlls5tczl/Xn8iCC3jC0VeyUSlfRhVKlVqjVaql6kAGpQ%2BiaZoWlaqCtDadoOkwToum6LAeoEj6Af6awbMGOyUtGKHlq0IhsCGuw1tUrStDcDatI8tZlAAnHsJxEq27YvG8p69gBJGAVgqoIF%2BrRlBRmCsIIrT5NkviCKQGrYPxaRCa0mgDkSs6mMRHHGgwvEMOkwAEEMcrUcaeGehcIkDtWmhfD80o8LhLZqkxlI9n8hpSi%2BsoGTIdF2W2HaWWxNmAcYWl2P0Wn2sQxBMAAngJ7h9EUIDhZFMVoESeDACIojCQA7vMVoIJsZH3FGFQcaZg6tMORKtIKTk8kRlRleU1HjrCo6NRxzXNVOyKzvOkmLjwy4ymVZWteg4KAXkyBiHOrTjvleDCUtLBgFIZy6ZsfSoBoqDOlxumqaNnU0WuG7zVuGo2bS9JXRdnK8JNgFqpgmxqkwKIlAyHUkV1NFlcerKWSSl58hmApCqKam%2Brlun5ZseQWK0qDGPDLrca0vQWEd5ySh1rkytUxouMBlrWraZxQTBWBwQhLBEzI/YVb1qIQEVDwgu4knPLVVmTU2HHuGD2AClDuPVG%2BYEfuqpLarq%2BpuVKyGlgGaF4ZWuwlWMqP8caLCBEkaRxUUSTGHh9yZCJs6epUtTZgmkwal0BA9P0gxLFm8YTG0yaprp6aZjG7MUUwZxNlGtH0Vo9kdpg3GGoBMmCUEIliX4knDEnckKacykR15DEx5j6SKzRhnwYhJlM%2BZfnOQBIjeQ5tfWeLhM0QX0c%2BS8oesXXAXGkF9ihZsTARdFsXxcQiWj8lrSpYkGVZa0sM8ZtpH1sVVzPm3FTVyHL35GzG8PKHrQgpo3PVSzc7N5CW9US1MLX1M3yaMLB1DJeONlT1M6s2/wx0A90kgAjMQDLD8FAdgLSLAHw/XmjCKBH8vyyzKJNPIBAxD0zbtRM6zxaRkjujdKBMCiHnh4PzC4EdmruFDsiJkocWRIJ7sDbkkln5wPcq5LeeNYwKHSPgYwUhwSMGkJ8KQpAWDSDKBI1A0gOjkNIqIcQmw6i0AkQQaRwiRHWBAJ8BQphQifFoGEUIERqKhDMdRExERRFSAACwSL1LQMoZRJFaNIHIqQEidBuM0VIGRIi4CwBgIgFAe1NB4C0mQCgEAPCROiSAYAoQFCkDdAkWclA%2BgeL6A0UeUVpDqNIB4NIRIADyLAGAFICRIrAtC2BaQ8fgaaiRCg6BqaQewmAZoEEkFIIpucGAeLVHgPU/ThGMGcCgchjB%2Bg6EgCI1AqpMjtKSN0UkwAWAiHISY1oSQynCVNvrJIeFiBGByAwVASzhJ7OMMcl6mAkiFHuCQPAAAvTYSQADq2QNLfM0LsVgiRLSGwUFwHxyiJB0BEUMqQ4j3EdK8XYAAHBEJIER7FbBAqEUwChWgQFwIQEg2oFD0FaB0CJUSigkuFOS8hGitEilIAVJgWAp4QB0SAexERTBcHsci5FXA4xlCFQoGidjHGkD1KEexph7EyvlfYxVyrkUIpkZ46QPiQB%2BMZaQYJYTRBaEVOQSg8SqVT3oLsIlFrSDZUipoQpEzYXwqkYi6Qajl55RRWijFWLLQ4oUAympTKWVssoDC6Qkq9RcE%2BKYT4Mb42fETcm6IarZGaqENq0g/jAmcu5by/lgrhWivFbCwNaaNXeOzYyiNUhwVSroK4itXig25tIJ9TIXKgA%3D%3D%3D" rel="nofollow noreferrer">like on Godbolt</a> where I included both versions (in different namespaces) and a non-member-function version.</p>

<h3>Ungolfed</h3>

<p><strong>The function arg, <code>int r[]</code>, is an array of 0 / non-zero integers that indicate whether a given depth should be swapped, starting with the outer-most level.</strong></p>

<pre><code>#include&lt;algorithm&gt;  // for std::reverse
#include&lt;cstdint&gt;    // for intptr_t.  GNU C defines __intptr_t, so we could use that...

struct m{
    __intptr_t d,l,a[];    // depth = 0 means values, &gt;0 means pointers.
    // l = length
    //__intptr_t a[];  // flexible array member: array contiguous with the struct

    void R(int r[]) {
        if(*r)
            std::reverse(a, a+l);   // *r &amp;&amp; std::reverse() doesn't work because it returns void.

        if(d) // recurse if this isn't the bottom depth
            for(int i=0 ; i&lt;l ; i++)  // tree traversal
                ((m*)a[i])-&gt;R(r+1);   // with the rest of the depth list
    }

}; // struct m
</code></pre>

<p>When we recurse, we pass <code>r+1</code>, so checking the current depth is always <code>*r</code>.</p>

<p>An earlier version just passed <code>r</code> unchanged, and checked <code>r[d]</code>.  With a flexible array member, I needed to store some kind of last-level indicator because <code>a[]</code> is not a pointer, it's a true array with no indirection.  But with a <code>intptr_t *a</code> member, I couldn't just have that be <code>nullptr</code> for the leaf level, because I want it to be values.</p>

<p>Reversing the current level before or after the tree traversal shouldn't matter.  I didn't try to do it <em>during</em>.</p>

<p>I'm not <em>sure</em> that <code>std::reverse</code> is worth the byte count vs. a manual loop, especially if I can work in calling <code>R()</code> on each pointer exactly once somewhere inside that loop.  But only if <code>d!=0</code></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>80</s> <s>78</s> 77 bytes</h1>

<p>Create the call to R's extractor <code>[</code> by creating a list of sequences reversed where indicated. They actually contain zeros, which are silently ignored. The <code>drop=F</code> is needed to prevent R's default dropping of dimensions. We need the <code>rev</code> call to the dimension reverse indicator, because of the way R fills arrays.</p>

<p>-2 thanks @Giuseppe</p>

<p>-1 using in-line assignment.</p>



<pre class="lang-r prettyprint-override"><code>function(x,a,d=dim(x))do.call("[",c(list(x),Map(seq,r&lt;-d*rev(a),d-r),drop=F))
</code></pre>

<p><a href="https://tio.run/##XZDLasMwEEX3@QqhLDoK42I9/CrJNrtuinddCUsGg2q7klOSr3dlt2ATBIN0jq6GkZ9bck7m9tY3Uzf0cEeN5mK6L7gzZobXRjsH9JNiA64LU6T4rkcI9hv9OTEnb39AMzSJj8UP4@XK2NyC9l4/gL8JFYMKJQrG4q7GK9aMHQ7bjTzind7LBjiqhQvkq38KR79Q/m/r56eLCIs/tRdpBCmmW4Ycj@SDmMGG/mUi3saRH/FI@ptzZM2ELW0dhMmH0XUTUMkVzyqRZzIrq6KSQpYqF7mSspSiqDKKlK59FIplbZ@w9J1/AQ" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>Honorable mention to @JayCe who came up with a variation that gets the same result in the same length:</p>



<pre class="lang-r prettyprint-override"><code>function(x,a,d=dim(x))array(x[t(t(expand.grid(Map(seq,r&lt;-d*rev(a),d-r))))],d)
</code></pre>

<p><a href="https://tio.run/##XZA9a8MwEIb3/ArhDD2Vc7E@/FXStVuX4q10EJZcDKrjSkpxfr0rOwWb6Bbpee69A7m5I6d07i5DG/rzABMq1C@6/4aJUuWcusL0ESCAmUY16Kcv12t4UyN484PulOpHZ35BUdSpo/F8oqZzB7cke@YSW5AokFMabw2@YkPp4bB1FBHv9F62wFAunCNb/V04@oWyf9vcjy4jLG9qL7IIMsy2DDkeyTvRZ@OHh0CcUdZe45MMF2vJmvFb2ljwwfnR9gESwSTLa17kIq/qshZcVLLghRSiErys8wSTZN0jkS@1fcKyd/4D" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://nodejs.org" rel="noreferrer">JavaScript (Node.js)</a>, <s>58</s> <s>55</s> <s>53</s> 45 bytes</h1>
<p><em>Saved 8 bytes thanks to @Shaggy</em></p>
<p>Takes input as <code>(indications)(array)</code>, where <em>indications</em> is a Boolean list.</p>

<pre class="lang-javascript prettyprint-override"><code>f=([r,...b])=&gt;a=&gt;1/r?a.sort(_=&gt;r).map(f(b)):a
</code></pre>
<p><a href="https://tio.run/##zVHLTsMwELzzJbE0mK7zLFLCnQMcOFoWcktSBYWkcgISXx/WpuJ5STlUXKzd1Yx3ZufRvthx69r9dN4PD/U8N2WkHaSUGyPKypYVXbgrK8fBTdF9WTkhn@w@aqKNEJd23g79OHS17IZddH13eyPHybX9rm1eGaIn91yjsd1Yw5dGRFprgkKMxECnyJCj4GoNWoEIpAx3mmJQAkpBGbeUgwrQGmrFnWK@goqhEmOMEOJsqYawPmznbxLw9r/wPXcx78N1vpTi0YcLIdznCN4C6HsYn3bYzXFHwHdfWnNULJVCnByRPyonmLKB9BBtzvPYhLH2xooQfuaxXPlxHKY@FhXQqVkU7RdBP339A12/3hMIm98A" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (                // f is a function taking:
  [r,                //   r = next 'reverse' Boolean flag
      ...b]          //   b = array of remaining flags
) =&gt;                 // and returning an anonymous function taking:
  a =&gt;               //   a = array (or sub-array) to process, or atomic element
    1 / r ?          // if r is defined:
      a.sort(_ =&gt; r) //   reverse a if r = 1; leave it unchanged otherwise
      .map(f(b))     //   for each element in the resulting array: do a recursive call,
                     //   using f to generate a new callback function for the next flag
    :                // else:
      a              //   a must be an atomic element and is simply left unchanged
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Ourous/curated-clean-linux" rel="nofollow noreferrer">Clean</a>, <s>122</s> 112 bytes</h1>

<pre><code>import StdEnv
class$r::[Bool]-&gt;r-&gt;r
instance$r where$_=id
instance$[r]| $r where$[a:y]=if(a)reverse id o map($y)
</code></pre>

<p><a href="https://tio.run/##RY1PS8QwFMTv/RQBe9iFt7Av7f4r1IOoIHgQ1lsI8mhTDaRJSdKVgp/dGBUU5jC/GYbpjCKbRtfPRrGRtE16nJyP7Bz7O3spOkMhlL5pxI1zRm6ufVahbYhkO1V69v6mvCpfWt3/p8LLD/bXCWoW2ephRWuvLsoHxXTPXH6bVuWyTudIPhZX2k5zZC0TQiBwqKCWIHawhwMcszsBbgERkMtMAivAGnAHuM@IB8Aj4An4NhPPew68Al5LKYuWleLZzwruyQQF31ayn7f02Q2GXkPaPDym28XSqLtfeDIUB@fHLw" rel="nofollow noreferrer" title="Clean – Try It Online">Try it online!</a></p>

<p>A version of Damien's Haskell answer using Clean's golfier type system. Really shows the extensive similarities between the two languages.</p>

<p>Explained:</p>

<pre><code>import StdEnv                 // import basic stuff
class $ r :: [Bool] -&gt; r -&gt; r // $ takes a boolean list and returns a function on r to r
instance $ r                  // instance on all types, taken when no more specific instances exist
    where $ _ = id            // return the identity function for all arguments
instance $ [r] | $ r          // instance for lists of a type which has an instance itself
    where $ [a: y]
        = if(a) reverse id    // reverse if the head of the argument is true
            o map ($ y)       // composed with the map function acting on $ applied to the tail
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.dyalog.com/" rel="noreferrer">APL (Dyalog Unicode)</a>, 9 <a href="https://github.com/abrudz/SBCS" rel="noreferrer">bytes</a></h1>



<pre class="lang-apl prettyprint-override"><code>⊃{⊖[⍺]⍵}⌿
</code></pre>

<p><a href="https://tio.run/##tZCxTsMwGIT3PsVtLQNS/t92nA5MLLBSNsRQCZWlEl0RYmklhghXLPAUjLCw8C7/i4SzQUIguRPESmT7vtzZN18t9y@u58ury2GwfnNj/dOZpbdzS6@3dv8@LOzuwdJWqdn2cXZyyO/p0fFsNOKE2gICN1E4eEsvgjJDQIuIDlNIAxGIQhzEQwKkhURIB5lCGyj/UaiD@r0vz/FBfsbfCdn/p/suVApad4NOpECx7hJ/X6aONkQtPVcA69c80m4mVwhPLI9cI6tirjCZFTE9UA@lzsjXlXN1JNqieq7yOu9nPdRi9N8jPm/7VxnDBw" rel="noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p>It looks like <a href="https://codegolf.stackexchange.com/a/171630/41024">Uriel edited into something almost identical</a> first, but I developed it independently. I thought this input format is invalid.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.dyalog.com/" rel="noreferrer">APL (Dyalog)</a>, <s>20</s> 9 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>⊃{⌽[⍺]⍵}/
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///P@1R24RHXc3Vj3r2Rj/q3RX7qHdrrT5QWMFQwVhBwwhImDzq3fKod7ORiSYA" rel="noreferrer">Try it online!</a></p>

<p><strong>How?</strong></p>

<p><code>/</code> - reduce - take the rightmost element in the input (the array) and apply the function with next left element as left argument</p>

<p><code>{⌽[⍺]⍵}</code> - reverse in the <code>left argument</code> (<code>⍺</code>) dimension</p>

<p><code>⊃</code> - flatten the enclosed array</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>23</s> <s>11</s> 10 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>'€s×'R«J.V
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9f/VHTmuLD09WDDq320gv7/z/aQMdIxziWKxoIjHUMdUx0DGN1ok11LIHCZrFAJpBtrGOqYwFkWuqYA8WNY8HC0UBtOhY6JkC2GUgtkAUSNgaLGgOZRmDVpkDVsQA" rel="nofollow noreferrer">Try it online.</a></p>
<p>-12 bytes thanks to <em>@Mr.Xcoder</em>.</p>
<p>Input as 0-indexed truthy-values (i.e. <code>[0,2,3]</code>), which is the first input.</p>
<p><strong>Explanation:</strong></p>
<pre><code>'€s×           # Repeat &quot;€&quot; the indices amount of times
               #  i.e. [0,2,3] → [&quot;&quot;,&quot;€€&quot;,&quot;€€€&quot;]
    'R«        # Append each with &quot;R&quot;
               #  i.e. [&quot;&quot;,&quot;€€&quot;,&quot;€€€&quot;] → [&quot;R&quot;,&quot;€€R&quot;,&quot;€€€R&quot;]
        J      # Join them all together
               #  i.e. [&quot;R&quot;,&quot;€€R&quot;,&quot;€€€R&quot;] → R€€R€€€R
         .V    # Execute string as 05AB1E code
</code></pre>
<p>For example: if the indices input-list is <code>[0,2,3]</code>, it will create the following string:</p>
<pre><code>R€€R€€€R
</code></pre>
<p>Which will:</p>

<pre class="lang-python prettyprint-override"><code>    €€€R    # Reverse the items in the most inner (4th level) lists
 €€R        # Reverse the most inner (3rd level) lists themselves
            # Do nothing with the inner (2nd level) lists 
R           # Reverse the entire outer (1st level) list
</code></pre>

<hr />
<p><strong>Original 23 byte answer:</strong></p>
<pre class="lang-none prettyprint-override"><code>ćURvy„ RèJ…εÿ}}„ RXèJ.V
</code></pre>
<p>Input as boolean-list (i.e. <code>[1,0,1,1]</code>), which is the first input.</p>
<p><a href="https://tio.run/##yy9OTMpM/f//SHtoUFllpnrQ4dWHt9Z6PWpYdm7r4f21sY8a5ikERRxe4aUX9v9/tKGOgY6hjmEsVzQQGAOZJkCOTrSpjqWOkY5ZLJAJZBvrmOpYAJmWOuZAceNYsHC0EVDcQscEyDYDqQWyQMLGYFFjINMIrNoUqDoWAA" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>ćU                 # Pop and save the first boolean in variable `X`
  R                # Reverse the remaining boolean-list
   v    }          # Loop `y` over each of them:
    „ Rè           #  Take the string &quot;R &quot;, and index the current boolean (0 or 1) in it
    J              #  Join it together with the string of the previous iteration
    …εÿ}           #  Surround it with &quot;ε&quot; and &quot;}&quot;
         „ RXè     # Index variable `X` also in &quot;R &quot;
              J    # Join it together with the rest
.V                 # Execute string as 05AB1E code
</code></pre>
<p>For example: If the boolean input-list is <code>[1,0,1,1]</code>, it will create the following string:</p>
<pre class="lang-python prettyprint-override"><code>εεεR}R} }R
</code></pre>
<p>Which will:</p>
<pre class="lang-python prettyprint-override"><code>  εR}         # Reverse the items in the most inner (4th level) lists
 ε   R}       # Reverse the most inner (3rd level) lists themselves
ε       }     # Do nothing with the inner (2nd level) lists 
         R    # Reverse the entire outer (1st level) list
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, <s>15</s> 14 bytes</h1>
<p>With some inspiration from <a href="https://codegolf.stackexchange.com/a/171632/58974">Arnauld's solution</a>.</p>
<p>Takes the indications as the first input, as a boolean array of <code>1</code>s and <code>0</code>s.</p>
<pre><code>Ê?Vn@ÎÃ£ßUÅX:V
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=yj9WbkDOw6PfVcVYOlY=&amp;input=WzEsMCwxXQpbW1sxLDIsMyw0XSxbNSw2LDcsOF0sWzksMTAsMTEsMTJdXSxbWzEzLDE0LDE1LDE2XSxbMTcsMTgsMTksMjBdLFsyMSwyMiwyMywyNF1dXQotUQ==" rel="nofollow noreferrer">Try it</a></p>
<hr />
<h2>Explanation</h2>
<pre><code>                   :Implicit input of boolean array U=indications and multi-dimensional integer array V
Ê                  :Get the length of U
 ?                 :If truthy (i.e., &gt;0)
  Vn               :  Sort V
    @ÎÃ            :   Function that gets the first element of U; 0 will leave the array untouched, 1 will reverse it.
       £           :  Map each X
        ß          :  Run the programme again with the following inputs
         UÅ        :   U with the first element removed
           X       :   X will serve as the new value of V
            :      :Else
             V     :  Just return V
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://pyth.readthedocs.io" rel="nofollow noreferrer">Pyth</a>, 15 bytes</h1>

<pre><code>.v+jk.n*\_*L\ME
</code></pre>

<p><a href="https://pyth.herokuapp.com/?code=.v%2Bjk.n%2a%5C_%2aL%5CME&amp;input=%22%5B%5B%5B1+2+3+4%29+%5B5+6+7+8%29+%5B9+10+11+12%29%29+%5B%5B13+14+15+16%29+%5B17+18+19+20%29+%5B21+22+23+24%29%29%29%22%0A%5B0%2C2%5D&amp;debug=0" rel="nofollow noreferrer">Try it here!</a></p>

<p>Annoyingly, handling the empty dimension list case takes no less than 2 bytes... I'd rather use <code>ss</code> in place of <code>jk.n</code> but :| Assumes that the list to be transformed can be given in native Pyth syntax, as a string. I've written a <a href="https://pyth.herokuapp.com/?code=XXz%5C%5D%5C%29%5C%2Cd&amp;input=%5B%5B%5B1%2C2%2C3%2C4%5D%2C%5B5%2C6%2C7%2C8%5D%2C%5B9%2C10%2C11%2C12%5D%5D%2C%5B%5B13%2C14%2C15%2C16%5D%2C%5B17%2C18%2C19%2C20%5D%2C%5B21%2C22%2C23%2C24%5D%5D%5D&amp;debug=0" rel="nofollow noreferrer">converter to Pyth syntax</a> to make testing easier. In the unfortunate case that the OP chooses not to allow this, a 17-byter will "fix" it:</p>

<pre><code>.v+jk.n*\_*L\ME\E
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 8 bytes</h1>

<pre><code>”€ẋ”ṚpFv
</code></pre>

<p>Takes a 0-indexed list of dimensions.</p>

<p><a href="https://tio.run/##tVA7bkIxEOw5xTvASLxd@324AHeIVi5pIgoqpHRR2nSpokjUNFyAtIiDPC7ijBeTKElNtzM7np3x42q9fsr58ry7vBymz1cO0/Fjs9zm017n57fp@M7FQ85mLTShaRozEygCYoJ16DFg5LSAtBCBaCIyCZAI6SA9oQyQEbKAtkTK9woN0JgonjXWunPxdmtqImj9b1kWlYTUNMMfVQ0Hj/Z75agCvqTbzcyPlmrG3Hws3o15PYRxDjS89hzIh@S0lVOj/0RftIhOB2dLDXV1l2pP@a5y50M/Je94aJa@AA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>”€ẋ”ṚpFv  Main link. Left arg: D (dimensions, 0-based), Right arg: A (array)

”€ẋ       Repeat '€' d times, for each d in D.
   ”Ṛp    Perform Cartesian product of ['Ṛ'] and each string of '€'s, prepending a
          'Ṛ' to each string of '€'s.
      F   Flatten the result.
          If, e.g., D = [0,2,4], we build the string "ṚṚ€€Ṛ€€€€".
       v  Eval the resulting string, using A as left argument.
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 60 bytes</h1>

<p><em>A different (recursive) approach. doesn't beat Arnauld's answer ... yet....</em></p>

<p>Takes the input as <code>array, boolean list</code></p>



<pre class="lang-javascript prettyprint-override"><code>f=(a,r)=&gt;r&gt;[]?(r[0]?a.reverse():a).map(c=&gt;f(c,r.slice(1))):a
</code></pre>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=(a,r)=&gt;r&gt;[]?(r[0]?a.reverse():a).map(c=&gt;f(c,r.slice(1))):a

console.log(f([[[[3,1,4,1],[5,9,2,6]],[[5,3,5,8],[9,7,9,3]]],[[[2,3,8,4],[6,2,6,4]],[[3,3,8,3],[2,7,9,5]]]],[true,false,true,true]))</code></pre>
</div>
</div>
</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, <s>56</s> 55 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda a,t:t and[f(l,t[1:])for l in a][::1|-t[0]]or a
</code></pre>

<p><a href="https://tio.run/##vVHLasNADLznK/aYwBSs9duQa7@gN7EHl8Q04DohdQ@F/rsryU5qU1@by6LdndGMNJev/u3c@WFo9m39/nqoXY2@6l3dHbjZtuiZqrBrzlfXulPn6sBVRd9PPUchyGM9XK6nrnfNlpkJHjGSAE6RIUchVQmKQATyQW5MMSgBpaBMrpSDClAJH8nNC9/Dx/BJUPDL9fOI57r9OELLsNvvnapkxpcusZIi5WuXXG@J8aULmVwifjxIykL8ZEhV1JufCKWobDa//s2@ABKIfaG7mQMTdzz9YcIu6Upd@h5ZSlPKEp7foffhFJkvUNNGYfuc8DeozYPbhDPSAscLUflS2XGpS4v2NccyS1bSnyxPyciWwlLHojtmm8t7bGExq9PC0s8UC9uF9NBXS8rQaVjLdrkDXbP1sDAKnXBSVkUvpfW8Kyu2HLNVv/puyubPsjfPITxwwNlsa9teVcGqI9NeUcGqo4eP@Oeczfhv4pvhBw" rel="noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/171627/">171627</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




