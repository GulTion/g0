<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::263645</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>222</td><td>Python 3</td><td>230803T151244Z</td><td><a href="https://codegolf.stackexchange.com/questions/263645/repeating-occupied-pattern-in-hilberts-hotel/263663#263663">spooky_s</a></td></tr>
<tr d-ix="1"><td>100</td><td>JavaScript ES6</td><td>230802T193410Z</td><td><a href="https://codegolf.stackexchange.com/questions/263645/repeating-occupied-pattern-in-hilberts-hotel/263646#263646">Arnauld</a></td></tr>
<tr d-ix="2"><td>059</td><td>Charcoal</td><td>230803T081454Z</td><td><a href="https://codegolf.stackexchange.com/questions/263645/repeating-occupied-pattern-in-hilberts-hotel/263655#263655">Neil</a></td></tr>
<tr d-ix="3"><td>024</td><td>Jelly</td><td>230802T225528Z</td><td><a href="https://codegolf.stackexchange.com/questions/263645/repeating-occupied-pattern-in-hilberts-hotel/263648#263648">Jonathan</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <strike>223</strike> 222 bytes</h1>

<pre class="lang-python prettyprint-override"><code>def f(*g,h=[0]):
 for q in g:
  if q in h:
   h=[w if w!=q else 0for w in h];continue
  h=h+h;p=1
  for w in range(len(h)):
   if not h[w]:h[w]=p*q;p=1-p
 while h==h[:len(h)//2]*2:h=h[:len(h)//2]
 return[1-(i&lt;1)for i in h]
</code></pre>
<p><a href="https://tio.run/##XY7BDsIgEETvfMV6g9qmUm9VvqTpwSh0SZotRQzx6yvYaKyXzczs2wH3DDjRcVlu2oDhxVCi6g69aBmYycMMlmBIBqxZDWYDCYo5ijs1gx7vGg4Zj2@iP10nCpYemmUS93hySib9RfyFBs1HTRyFeBemLpoCYBf7Ng/lijlfVY5BRDvqVKSwa9ebum76omlxmzDwOjw8dbLi9ixFfs6uP1qctxS44UKwj5S/umy2rpT/vjxukrRfXg" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), 100 bytes</h1>
<p>Returns a comma-separated binary string.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;/(.*?)(,\1)*$/.exec(a.reduce((b,x)=&gt;[...b,...b].map(q=v=&gt;x&lt;0|v?v+x&amp;&amp;v:q^=x),[0]).map(x=&gt;+!!x))[1]
</code></pre>
<p><a href="https://tio.run/##fc9LDoIwEAbgvaeAxJAOLYXqzlg4CNak1GI0yFObLrw7CtFoiNjJzOqbf9KzNLJT7am@BmV10H3Oe8njEFE/AUR2DPxlSLXVCkna6sNNaYQyYoHHKaU0I8MQ9CJr1HDDY7uN7iYx2Hqe2TR7boGkkYARWB5j17UAKRO9qsquKjQtqiPKUSqczwNwwtB5ri0mCDMxRYz8YgSvxIQNNUNJMOa@zw7wDyV4Lb5So1fPpAdMTD7VPwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p><a href="https://tio.run/##fc9LDoIwEAbgvadgYUiHlpbqzlg4CNakQDEa5KlNF94dgWg0RJxJu@k3fzMXZVSXtuf65pdVpvtc9EqEDFEvAkQOHLw1o9rqFCna6uyeaoQSYkGEMaU0IeMl6VXVqBFGhHYfPExksHVds2uOwgKJAwkTsMMzswAxl31alV1VaFpUJ5SjWDqfAnAYc4ap1QxhLueIk1@M4I2csbEXKPGn3Pe3I/xDCd7Kr9TgdRbSfS5nS/VP" rel="nofollow noreferrer">99 bytes</a> if we use <code>NaN</code> for unoccupied</p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt;                 // a[] = input array
/(.*?)(,\1)*$/       // a regular expression that looks for the shortest
                     // prefix which, when repeated a whole number of
                     // times with a leading comma, allows to reach the
                     // end of the string
.exec(               // apply this to:
  a.reduce((b, x) =&gt; //   for each element x in a[],
                     //   using the array b[] as the accumulator:
    [...b, ...b]     //     append b[] to itself
    .map(q =         //     initialize q to a NaN'ish value
      v =&gt;           //     for each element v in the resulting array:
      x &lt; 0 | v ?    //       if x is negative or v is not 0:
        v + x &amp;&amp; v   //         append 0 if v = -x, or v otherwise
      :              //       else:
        q ^= x       //         toggle q between 0 and x and append that
    ),               //     end of map()
    [0]              //     initialize the accumulator to [0]
  )                  //   end of reduce()
  .map(x =&gt; +!!x)    //   update each value to either 0 or 1
                     //   implicit coercion to a string
)[1]                 // end of exec(); return the prefix
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 59 bytes</h1>
<pre><code>⊞υ⁰Ｆθ¿‹ι⁰ＵＭυ∧⁺ικκ«≔⁺υυυＦΦ⌕Ａυ⁰﹪λ²§≔υκι»≔⭆υ¬¬ιηＷ⁼η×²÷η²≔÷η²ηη
</code></pre>
<p><a href="https://tio.run/##XY7NasMwEITP8VPscUUUaN2jT6Y/EGiKob2FHESkxEvWUmNJaaH02d1V3F56GK3YGX2jfW/GfTA8TV2OPWYNN6qpDmEEPCugA@CzixGp7BVszPt9GAbjbUm2MjrOV/ekilQDjqODr2rRxkhHP/uSzaqoqRZX9BNxcqMMb1vmuVXDJtjMAVlDraRsJrRp7a37LJmTBhLEd/XLfk0j@aP8qZgvIWERyVMNveQ@emIH@HjOhiP2Gt5ocBFrDWufHuhC1pVt6forw3/ODOqkJqHcpmm7Xd7qZa1Xct7tdtPqwj8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>⊞υ⁰
</code></pre>
<p>Start with one empty room.</p>
<pre><code>Ｆθ
</code></pre>
<p>Loop over the input values.</p>
<pre><code>¿‹ι⁰
</code></pre>
<p>If it is negative, then...</p>
<pre><code>ＵＭυ∧⁺ικκ«
</code></pre>
<p>Discard those values whose sum is zero, otherwise:</p>
<pre><code>≔⁺υυυ
</code></pre>
<p>Duplicate the list.</p>
<pre><code>ＦΦ⌕Ａυ⁰﹪λ²
</code></pre>
<p>Loop over alternate indices of the empty rooms. (Filtering is golfier than slicing alternate indices.)</p>
<pre><code>§≔υκι
</code></pre>
<p>Fill the room at this index.</p>
<pre><code>»≔⭆υ¬¬ιη
</code></pre>
<p>Convert the rooms to a binary string of occupancy.</p>
<pre><code>Ｗ⁼η×²÷η²
</code></pre>
<p>While the string equals half of itself repeated twice, ...</p>
<pre><code>≔÷η²η
</code></pre>
<p>... halve the length of the string.</p>
<pre><code>η
</code></pre>
<p>Output the final string.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 28 </s> 24 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>N;`⁹¬Tm2Ʋ¦A¬ẹ¦ʋƒ0ṠŒṖEƇḢḢ
</code></pre>
<p>A full program* that accepts the register list and prints a Jelly representation of the pattern list.</p>
<p><sup>* Only a full program to handle specifically <code>[] =&gt; [0]</code> for which the monadic Link would yield the integer <code>0</code></sup></p>
<p><strong><a href="https://tio.run/##y0rNyan8/9/POuFR485Da0JyjY5tOrTM8dCah7t2Hlp2qvvYJIOHOxccnfRw5zTXY@0PdywCov///0drG@poG@noAknjWAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<p>Replacing <code>ŒṖ</code> with <code>sJ$</code> will be faster if you want to <a href="https://tio.run/##y0rNyan8/9/POuFR485Da0JyjY5tOrTM8dCah7t2Hlp2qvvYJIOHOxcUe6m4Hmt/uGMREP3//z/aUMdIR9dQx1hH10jHRMdUx0xHF8g21dE1iwUA" rel="nofollow noreferrer" title="Jelly – Try It Online">try slightly longer inputs</a>.</p>
<h3>How?</h3>
<p>The idea is to process the <em>moves</em> in turn maintaining a prefix that starts at <code>[0]</code> and doubles in length at each <em>move</em> either occupying every other empty room with a copy of <em>move</em> or removing all occurrences of the negative of <em>move</em>. Once this is done we can then find the shortest prefix that repeats to give the same.</p>
<p>Actually, the implementation is a little more convoluted - rather than the &quot;either or&quot; above, we process negated values of the <em>moves</em>, always add these to every other unoccupied room, take absolute values and then always remove all occurrences of the negated <em>move</em> from all rooms. This saves some precious bytes.</p>
<pre><code>N;`⁹¬Tm2Ʋ¦A¬ẹ¦ʋƒ0ṠŒṖEƇḢḢ - Main Link: list of moves, Moves
N                        - negate {Moves} (vectorises)
               ƒ0        - start with 0 and reduce {that} by:
              ʋ          -   last four links as a dyad - f(Rooms, -Move)
 ;`                      -     {Rooms} concatenate {Rooms} -&gt; R2
         ¦               -     sparse application...
        Ʋ                -     ...to indices: last four links as a monad - f(R2):
    ¬                    -       logical NOT {R2}
     T                   -       truthy indices of {that} -&gt; I
       2                 -       two
      m                  -       {I} modulo-slice {2
                                   -&gt; indices of every other empty room
   ⁹                     -     ...apply: set to chain's right argument = -Move
          A              -     absolute value {that} (vectorises)
             ¦           -     sparse application...
            ẹ            -     ...to indices: indices of {-Move}
           ¬             -     ...apply: logical NOT
                 Ṡ       - signs {that} -&gt; occupied or not indicators
                  ŒṖ     - partitions of {that}
                     Ƈ   - keep those {patitions} for which:
                    E    -   all equal? -&gt; repetitive partitions
                      Ḣ  - head {that} -&gt; shortest repetitive partition
                       Ḣ - head {that} -&gt; shortest possible prefix
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/263645/">263645</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




