<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::273003</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>077</td><td>Charcoal</td><td>240508T152151Z</td><td><a href="https://codegolf.stackexchange.com/questions/273003/anti-tic-tac-toe/273013#273013">Neil</a></td></tr>
<tr d-ix="1"><td>124</td><td>JavaScript ES6</td><td>240508T115516Z</td><td><a href="https://codegolf.stackexchange.com/questions/273003/anti-tic-tac-toe/273010#273010">Arnauld</a></td></tr>
<tr d-ix="2"><td>042</td><td>Jelly</td><td>240508T012757Z</td><td><a href="https://codegolf.stackexchange.com/questions/273003/anti-tic-tac-toe/273006#273006">Jonathan</a></td></tr>
<tr d-ix="3"><td>052</td><td>05AB1E</td><td>240508T074653Z</td><td><a href="https://codegolf.stackexchange.com/questions/273003/anti-tic-tac-toe/273008#273008">Kevin Cr</a></td></tr>
<tr d-ix="4"><td>145</td><td>JavaScript Node.js</td><td>240508T004512Z</td><td><a href="https://codegolf.stackexchange.com/questions/273003/anti-tic-tac-toe/273004#273004">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 77 bytes</h1>
<pre><code>Ｐ.≔Ｅχ⁰θＦＳ¿¬ⅈ«§≔θＩι∨±Σθ¹≔ΦＥΦ⁺⪪Φθλ³⁺Ｅ³✂θ⊕κχ³⟦✂θ¹χ⁴✂θ³⊖χ²⟧‹↔ΣκΣ↔κΣκκη¿η§!OX⁺⌊η⌈η
</code></pre>
<p><a href="https://tio.run/##TVBdS8MwFH12vyL26QaqtNtAxKeiCAW7DfoyEB9il7VhadomqQzE317v7drpQ@Dk3HPO/SgqYYtG6GHIeu1Va5XxENwH/GmROKdKA5loIY5CFvGQdUgfG8sgNW3vc4/qEjhn6shg03jY44ez78XNxZv41BzkGbqQPQvnQWHE1sJGlsJLyPsaOo5UzDF2ssCr0l7asesEd7p3kLda@ZnBPI2@Fb6xSOJVyHKtCknF1BRW1tJ4eYATNYhIjOD9Kokv7Jr/s2HEi/xzxrTxkn@Q8U06B8mna3Q/TX4imsCVRWbmxiJ1rmgzuk7F2W687XyT4Ha7D@b5lVE12ip0ZOI8YU5n@RmGZbxePTwOd1/6Fw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｐ.
</code></pre>
<p>Output a <code>.</code> without moving the cursor. This will remain if the game is unfinished.</p>
<pre><code>≔Ｅχ⁰θ
</code></pre>
<p>Start with an empty board. (The extra element is ostensibly due to 1-indexing, but it's also golfier, since it doesn't require a separator.)</p>
<pre><code>ＦＳ¿¬ⅈ«
</code></pre>
<p>Loop though the input string while the game is still ongoing.</p>
<pre><code>§≔θＩι∨±Σθ¹
</code></pre>
<p>Place a <code>1</code> or <code>-1</code> as appropriate in the given board position.</p>
<pre><code>≔ΦＥΦ⁺⪪Φθλ³⁺Ｅ³✂θ⊕κχ³⟦✂θ¹χ⁴✂θ³⊖χ²⟧‹↔ΣκΣ↔κΣκκη
</code></pre>
<p>Score only those horizontal, vertical and diagonal slices of the board that contain both <code>1</code>s and <code>-1</code>s (determined by comparing the absolute value of the sum with the sum of the absolute values), keeping only those slices with a non-zero score.</p>
<pre><code>¿η§!OX⁺⌊η⌈η
</code></pre>
<p>If there were any non-zero scores then output the appropriate symbol, which will also cause the rest of the input to be skipped. Since there could be more than one <code>1</code> or <code>-1</code>, the sum of the minimum and maximum score is taken, which will be <code>0</code> for a bad game, <code>2</code> if <code>X</code> wins, or <code>-2</code> (which cyclically wraps to <code>1</code>) if <code>O</code> wins.</p>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), 124 bytes</h1>
<p>Expects a list of integers.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;&quot;.XO!&quot;[a.some(b=v=&gt;[7,56,73,84,146,273,292,448].map(m=q=&gt;m|=q==(p=b&amp;q)+(q&amp;=b&gt;&gt;9)&amp;&amp;p*q&amp;&amp;-~!(q&amp;~-q),b|=1&lt;&lt;v-1+(a^=9))|m)*m]
</code></pre>
<p><a href="https://tio.run/##dc7NisIwEAfw@z6F9RASnUbSD9uAk1fwKpQKqVsXxZjGSk/FV68RKoK6cxiG4cf856g73e4uh@Yanu1vPexx0KimfLMOpoXmrTU1rbBDVWSQLiGLIU9AJEuI/BjJCJIkL7nRDTXoUJned6QNVsSxOXUEK6UkI6SZOULCW@BXt9AxqHoUq1UXijnVW5SM9YbNTDns7Lm1p5qf7B/d00KUjE1etVhM@M87Af8EpJBB/sD/kfh1yZPNJ0khBvlEnqzfSQTCB8U@SI5BX4gciRhJMNwB" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt;                     // a[] = input array
&quot;.XO!&quot;[                  // lookup string for output
  a.some(b =             // b = board bitmask, initially zero'ish
  v =&gt;                   // for each value v in a[]:
    [                    //   lookup array of matching patterns:
      7,                 //     000 000 111 - 1st row (1-2-3)
      56,                //     000 111 000 - 2nd row (4-5-6)
      73,                //     001 001 001 - 1st column (1-4-7)
      84,                //     001 010 100 - anti-diagonal (3-5-7)
      146,               //     010 010 010 - 2nd column (2-5-8)
      273,               //     100 010 001 - diagonal (1-5-9)
      292,               //     100 100 100 - 3rd column (3-6-9)
      448                //     111 000 000 - 3rd row (7-8-9)
    ].map(m =            //   m = score bitmask, initially zero'ish
    q =&gt;                 //   for each value q in the above array:
      m |=               //     update m
        q ==             //     if q is equal to the sum of ...
        (p = b &amp; q) +    //     ... the pattern p of O's masked with q
        (q &amp;= b &gt;&gt; 9) &amp;&amp; //     and the pattern q of X's masked with q
        p * q &amp;&amp;         //     and neither p nor q is zero, then do:
        -~!(q &amp; ~-q),    //       m |= 2 if there's a single bit set in q
                         //       (we figure this out by clearing the LSB)
                         //       m |= 1 otherwise
      b |= 1 &lt;&lt;          //     start by updating the board b:
        v - 1 +          //       do either b |= 1 &lt;&lt; v - 1 for a new 'O'
        (a ^= 9)         //       or b |= 1 &lt;&lt; v + 8 for a new 'X' (*)
    ) | m                //   end of map(); yield m
  ) * m                  // end of some(); yield m
]                        // get the m-th character from the lookup string
</code></pre>
<p><em><sup>(*) Because we re-use <code>a</code> to store the shift offset, this fails if the input array is a singleton. But in that case, only one bit will be set in <code>b</code> and no 3-bit pattern will be found anyway.</sup></em></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 45 </s> 42 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>9s3ZU,ƊjJị&quot;$€$⁸iⱮⱮẠƇḂĠ€Ẉ€ṖƇµƤȯ/Q’ḄSị“XO!.”
</code></pre>
<p>A monadic Link that accepts the list of moves from <span class="math-container">\$[1,9]\$</span> and yields one of the characters <code>.XO!</code> for ongoing, X-wins, O-wins, and bad-game, respectively.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/9@y2DgqVOdYV5bXw93dSiqPmtaoPGrckflo4zogerhrwbH2hzuajiwAij/c1QEid0471n5o67ElJ9brBz5qmPlwR0swUOejhjkR/op6jxrm/v//30jHUsdEx1jHXMcQAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h4>How?</h4>
<p>Analyses the state of the board for each prefix of the moves producing data that can identify the game's win-state at that point, then outputs the appropriate character.</p>
<p>The rows, columns, and diagonals of the board at each point are formed from <code>0</code> (empty), odd-positives (X), and even-positives (O) by using their index in the input. If any of these triples contain <code>0</code> they are removed and any remaining ones are converted to their parities (X:<code>1</code>, O:<code>0</code>), then their indices are grouped by their values and the lengths of these groups are taken (e.g. for XOX: <code>[1,0,1] =&gt; [[2],[1,3]] =&gt; [1,2]</code>).</p>
<p>The results for all these fully-filled lines are deduplicated giving the following possible lists of lists which are decremented, converted from binary, summed, and then used to index into <code>XO!.</code>:</p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th style="text-align: center;">group lengths deduplicated</th>
<th style="text-align: center;">decrement; convert from binary</th>
<th style="text-align: center;">sum</th>
<th style="text-align: center;">index into <code>XO!.</code></th>
<th style="text-align: center;">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>[[1,2]]</code></td>
<td style="text-align: center;"><code>[1]</code></td>
<td style="text-align: center;"><code>1</code></td>
<td style="text-align: center;"><code>X</code></td>
<td style="text-align: center;">X won</td>
</tr>
<tr>
<td style="text-align: center;"><code>[[2,1]]</code></td>
<td style="text-align: center;"><code>[2]</code></td>
<td style="text-align: center;"><code>2</code></td>
<td style="text-align: center;"><code>O</code></td>
<td style="text-align: center;">O won</td>
</tr>
<tr>
<td style="text-align: center;"><code>[[1,2],[2,1]]</code></td>
<td style="text-align: center;"><code>[1,2]</code></td>
<td style="text-align: center;"><code>3</code></td>
<td style="text-align: center;"><code>!</code></td>
<td style="text-align: center;">bad game</td>
</tr>
<tr>
<td style="text-align: center;"><code>[[2,1],[1,2]]</code></td>
<td style="text-align: center;"><code>[2,1]</code></td>
<td style="text-align: center;"><code>3</code></td>
<td style="text-align: center;"><code>!</code></td>
<td style="text-align: center;">bad game</td>
</tr>
<tr>
<td style="text-align: center;"><code>[]</code></td>
<td style="text-align: center;"><code>0</code></td>
<td style="text-align: center;"><code>0</code></td>
<td style="text-align: center;"><code>.</code></td>
<td style="text-align: center;">ongoing game</td>
</tr>
</tbody>
</table></div>
<pre><code>9s3ZU,ƊjJị&quot;$€$⁸iⱮⱮẠƇḂĠ€Ẉ€ṖƇµƤȯ/QḄSị“XO!.” - Link: list of integers, Moves
                           µƤ             - for each prefix of {Moves}:
9s3                                       -   [1..9] split into threes
   ZU,Ɗ                                   -   rotate a quarter and pair
       jJị&quot;$€$                            -   join with their diagonals
              ⁸iⱮⱮ                        -   {Moves} indices (0 if not found)
                  ẠƇ                      -   keep if all non-zero (all found)
                    Ḃ                     -   mod-2
                     Ġ€                   -   group indices of each by values
                       Ẉ€                 -   length of each of each
                         ṖƇ               -   keep if pop (discards [3] (XXX or OOO))
                            ȯ/            - reduce by logical OR (first non-empty result, or [] if none found)
                              Q           - deduplicate
                               ’          - decrement
                                Ḅ         - convert from binary
                                 S        - sum
                                  ị“XO!.” - modular-index into &quot;XO!.&quot;
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>55</s> 52 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>9Å0Iv˜NÈ&gt;y&lt;ǝ3ôÐø«DÂ‚€Å\«ʒĀP}D&lt;‚ΘO2QO2β&quot;.XO!&quot;ès}\)Ù1è
</code></pre>
<p><a href="https://tio.run/##AVwAo/9vc2FiaWX//znDhTBJdsucTsOIPnk8x50zw7TDkMO4wqtEw4LigJrigqzDhVzCq8qSxIBQfUQ84oCazphPMlFPMs6yIi5YTyEiw6hzfVwpw5kxw6j//zI5NDM3MQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKS/X/Lw60GlWWn5/gd7rCrtDk@1/jwlsMTDu84tNrlcNOjhlmPmtYcbo05tPrUpCMNAbUuNkChczP8jQL9jc5tUtKL8FdUOryiuDZG8/BMw8Mr/uv8jzbUMTQyMTW3AFLGOoamxpY6RoYmxuZAyhJIGcYCAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>9Å0             # Start with a list of 9 0s
   I            # Push the input-integer
    v           # Pop and loop over its digits `y`:
     ˜          #  Flatten the current list/matrix
      N         #  Push the 0-based loop-index
       È&gt;       #  %2+1 so even indices become 1 and odd become 2
         y&lt;     #  Push the current `y`, and decrement it to a 0-based index
           ǝ    #  Insert the N%2+1 at index y-1 into the list
            3ô  #  Then convert the list to a 3x3 matrix
     Ðø«DÂ‚€Å\« #  Get a list of all rows, columns, and (anti-)diagonals:
     Ð          #   Triplicate the current matrix
      ø         #   Pop one copy, and zip/transpose it; swapping rows/columns
       «        #   Merge the lists of rows and columns together
        D       #   Duplicate it
         Â      #   Bifurcate it; short for Duplicate &amp; Reverse copy
          ‚     #   Pair the two together
           €Å\  #   For each inner 3x6 matrix: map it to its main diagonal
              « #   Merge the diagonals to the list of rows and column
     ʒ  }       #  Filter this list of triplets by:
      Ā         #   Check for each inner value whether it's NOT 0 (thus 1 or 2)
       P        #   Check if all three are truthy
         D      #  Duplicate this list of valid lines
          &lt;     #  Decrease each inner value in the copy by 1
           ‚    #  Pair the two lists of triplets together
            Θ   #  Check for each inner-most values whether they're equal to 1
             O  #  Sum each inner-most triplet
     2β         #  Convert it from a base-2 list to a base-10 integer
       &quot;.XO!&quot;è  #  0-based index that into string &quot;.XO!&quot;
              s #  Swap so the matrix is at the top again for the next iteration
    }\          # After the loop: discard the matrix
      )         # Wrap all intermediate results into a list
       Ù1è      # Get the first non-&quot;.&quot; result if present, or &quot;.&quot; otherwise:
       Ù        #  Uniquify it
        1è      #  Pop and leave the modular 0-based 1st item
                # (which will be output implicitly as result)
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 145 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>e=&gt;'.OX!'[e.some(o=x=&gt;v=/001/.test(s='123456789147258369159753'.replace(/.../g,'$&amp;$&amp; ',o[x]=++i%2).replace(/./g,i=&gt;o[i]))+2*/011/.test(s),i=0)*v]
</code></pre>
<p><a href="https://tio.run/##hc6xDoIwFAXQ3a/ABG0L@kpbCnYov@BqQhgIVoNBSigh/j12UgcS53vue/dRz7VrxnaYjr29muWmF6MLBOfLFpUGnH0abPVLF7OmScIoTMZN2GnEuEhllp8US3MuTyJTTKpcCgSjGbq6MZgCAL0fULgP9wE62PJV6Thud5z8EA9aXdiyrQiJeUQT9vlBfJKQaK6WxvbOdgY6e8c3XPq7iCFfoDQ4FgFs1nIuvuKyKqRQX3JeI5ylIv@LlEc/c7bLGw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/273003/">273003</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




