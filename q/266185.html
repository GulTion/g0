<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::266185</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>083</td><td>JavaScript Node.js</td><td>231024T041113Z</td><td><a href="https://codegolf.stackexchange.com/questions/266185/expected-number-of-rounds-for-this-labeling-scheme/266187#266187">l4m2</a></td></tr>
<tr d-ix="1"><td>048</td><td>Charcoal</td><td>231024T084753Z</td><td><a href="https://codegolf.stackexchange.com/questions/266185/expected-number-of-rounds-for-this-labeling-scheme/266193#266193">Neil</a></td></tr>
<tr d-ix="2"><td>010</td><td>05AB1E</td><td>231024T034726Z</td><td><a href="https://codegolf.stackexchange.com/questions/266185/expected-number-of-rounds-for-this-labeling-scheme/266186#266186">Command </a></td></tr>
<tr d-ix="3"><td>nan</td><td>Tried all three methods</td><td>231024T070204Z</td><td><a href="https://codegolf.stackexchange.com/questions/266185/expected-number-of-rounds-for-this-labeling-scheme/266191#266191">att</a></td></tr>
<tr d-ix="4"><td>013</td><td>Nekomata</td><td>231024T065930Z</td><td><a href="https://codegolf.stackexchange.com/questions/266185/expected-number-of-rounds-for-this-labeling-scheme/266190#266190">alephalp</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 83 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;g=(k,j=0,c=(a,b=k)=&gt;!b||c(a,--b)*(b-a)/~b)=&gt;j++&lt;n&amp;&amp;c(n,j)/(1-c(n-j)/c(n))-g(k,j)
</code></pre>
<p><a href="https://tio.run/##bYzBCsIwEETv/oWXsmOzVkX00u2/JLENpiURWzwVfz2uR0EYmDfvMNG@7Oyf98fCKd/6MkhJ0gWh0UQ5GC9kjZMR0m3dunpdzA47cmzRvJ36WNdtqipPyUQ0dGQlVtICOHyPUHxOc576/ZQDDXQGnYDNr7z8k1doUD4" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Method 1</p>
<p>-5 bytes from tsh</p>
<p>-1 from Arnauld</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 48 bytes</h1>
<pre><code>ＮθＮηＩΣＥθ∕×Ｘ±¹ιΠ⁻θ⁺…⁰η…⁰⊕ι×Π…·¹⊕ι⁻Π⁻θ…⁰ηΠ⁻⁻θ⊕ι…⁰η
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZZC9CsIwFIVx9SmC0y1EsbgIjro4WIq6iUNMrzbQpjU_9WFcOlT0mXwaoy2l2AshnHC-cy65v3jMFM9YUpYPa87j-XswWcvcmsCmJ1Rw9RbDro6dDpWQBpZMG9jZFDYshyslK1GICGEvUtQQZjdnDvDCDILvUSLcCVUWWW5gI6TVXyRM3L1l8oIwpSR2llasJVeYojQYgfB-Q0mT3cQ4i-NFgTXk9yFK6qpecafT6y3Wuv7i_rBmFpU-cd183vMwGhfJ6Fj50-GsfvoA" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation: Implements a modification of Method 1:</p>
<p><span class="math-container">$$ \sum_{j=1}^n (-1)^{j-1} \binom n j \frac 1 {1 - \binom {n-j} k / \binom n k} $$</span></p>
<p><span class="math-container">$$ = \sum_{j=1}^n \frac {(-1)^{j-1} \binom n j \binom n k} {\binom n k - \binom {n-j} k} $$</span></p>
<p><span class="math-container">$$ = \sum_{j=1}^n \frac {(-1)^{j-1} \frac {n!} {j! (n-j)!} \frac {n!} {(n-k)!}} {\frac {n!} {(n-k)!} - \frac {(n-j)!} {(n-j-k)!}} $$</span></p>
<p><span class="math-container">$$ = \sum_{j=1}^n \frac {(-1)^{j-1} \prod_{i=n-j+1}^n i \prod_{i=n-k+1}^n i} {\prod_{i=1}^j i (\prod_{i=n-k+1}^n i - \prod_{i=n-j-k+1}^{n-j} i)} $$</span></p>
<p><span class="math-container">$$ = \sum_{j=1}^n \frac {(-1)^{j-1} \prod_{i=0}^{j-1} (n-i) \prod_{i=0}^{k-1} (n-i)} {\prod_{i=1}^j i (\prod_{i=0}^{k-1} (n-i) - \prod_{i=0}^{k-1} (n-j-i))} $$</span></p>
<p><span class="math-container">$$ = \sum_{j=0}^{n-1} \frac {(-1)^j \prod_{i=0}^j (n-i) \prod_{i=0}^{k-1} (n-i)} {\prod_{i=1}^{j+1} i (\prod_{i=0}^{k-1} (n-i) - \prod_{i=0}^{k-1} (n-j-i-1))} $$</span></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>13</s> 10 bytes</h1>
<p>-3 thanks to @alphalpha</p>
<pre><code>Ýsc¤/&lt;z¹F¥
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m73MwDQxyTB1wYKlpSVpuhbrDs8tTj60RN-m6tBOt0NLlxQnJRdDpRYsNucygTAB" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Uses a variant of the first method. Ports <a href="https://codegolf.stackexchange.com/a/229775/92727">this</a> Jelly answer for the binomial transform.</p>
<pre><code>Ý      calculate [0,1,...,n]
s      swap so k is on top
c      calculate [0Ck, 1Ck, ..., nCk]
¤      push the last item without poping
/      divide by it
&lt;      subtract one
z      and inverse. Luckily for us, 05AB1E have 1/0 = 0
¹F¥    calculate the binomial transform, by calculating the differences n times.
</code></pre>
</div>
<div id="pu3" class="pu"><p>Tried all three methods, with some minor changes to each for golfiness. In order:</p>
<h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 52 bytes</h1>
<pre><code>b[i=-Range@#,++i+#].(b[-i,#2]/b@##-1)^-1&amp;
b=Binomial
</code></pre>
<p><a href="https://tio.run/##JcrBCsIgGADgu6/xw6j8LRyjdTGkB4iooxjo2NYPaRDeZHt1a@z0Xb7g0qsPLlHnyqCKN6TE3cWx14CcEwe733gjCKG2B68BhNw@hayYVxeKn0DuXW5fismAOF/1btAabDU/OhfnzLJEOSHLDdYLx5UWm5V24fQvbCo/" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Shortest by a long shot.
<span class="math-container">$$E(n,k)=\sum_{i=1}^n{-i\choose 1-i+n}\left(\frac{i-1\choose k}{n\choose k}-1\right)^{-1}.$$</span></p>
<h3><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 82 bytes</h3>
<pre><code>Tr@Last@Inverse@Table[Boole[i==j]-b[#-i,#2-i+j]i~b~j/b@##,{i,#},{j,#}]&amp;
b=Binomial
</code></pre>
<p><a href="https://tio.run/##JY2xCoMwFEX3/EbAoY0URWqXlOBWKKVQN8nwIpG@oBE0dAnm19OIyzlwuZc7gfvqCRz2EAce20U8YXXiYX96WbVoQY26a@Y5ETk3MlcdzZHRMsezkRhUMBclKGU@hRvzJlFmRPEG7TwhjPG9oHVpdH@J0yAElVn49GCDJ75gxcaIr1i563qoZtWhetctVcgW0@cf" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Reversed both axes of the matrix, summing the last row instead.</p>
<h3><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 85 bytes</h3>
<pre><code>n_~f~k_=0//If[#&lt;n,(n.k+Sum[(n-#).i#.(k-i)#0[#+i],{i,k}])/(n.k-#.k),0]&amp;/.Dot-&gt;Binomial
</code></pre>
<p><a href="https://tio.run/##JcrBCoIwGADgu68xEJf/Ng3JDiUSXbpE4HGIDEn6WZsQ6zTcq6/E03f5jHKvp1EORxWjHcIU9HAuhLhNkpwsZJbrvPsamVlGKEfCM82QkkKSHHvwCHrpqVgbI1xTKPpU8OvsWHNBOxtU7/j4oHWSsObe7qa2JX0aulHZ4BNfQrlA4ivYrxw2aqg26pXjvyRL/AE" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Got to use a few goodies like postfix application (<code>//</code>) and overwriting operators, but it's still the longest. Reversed the domain.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a>, 13 bytes</h1>
<pre><code>→r$ÇƆ/←ŗ0ɔ$ᵑ∆
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFZtJJurlLsgqWlJWm6FjsftU0qUjncfqxN_1HbhKPTDU5OUXm4deKjjrYlxUnJxVBVC25qGSoYcpkoGHGZAbG5ggkQm3NZAMUsFEy5DA0UjLkMjYAiRgYKRhAtAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A port of <a href="https://codegolf.stackexchange.com/users/92727/command-master">@Command Master</a>'s <a href="https://codegolf.stackexchange.com/a/266186/9288">05AB1E answer</a>. Unfortunately, Nekomata doesn't have <code>1/0=0</code>.</p>
<pre><code>→r$ÇƆ/←ŗ0ɔ$ᵑ∆
→r              [0,1,...,n]
  $Ç            [0Ck, 1Ck, ..., nCk]
    Ɔ/          [0Ck/nCk, 1Ck/nCk, ..., (n-1)Ck/nCk]
      ←ŗ        decrement and reciprocal
        0ɔ      Append 0
          $ᵑ∆   Take the delta n times
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/266185/">266185</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




