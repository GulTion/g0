<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::266444</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>113</td><td>R</td><td>231104T133227Z</td><td><a href="https://codegolf.stackexchange.com/questions/266444/the-too-short-urinal-problem/266465#266465">Nick Ken</a></td></tr>
<tr d-ix="1"><td>032</td><td>Jelly</td><td>231103T224902Z</td><td><a href="https://codegolf.stackexchange.com/questions/266444/the-too-short-urinal-problem/266449#266449">Nick Ken</a></td></tr>
<tr d-ix="2"><td>058</td><td>Charcoal</td><td>231104T011850Z</td><td><a href="https://codegolf.stackexchange.com/questions/266444/the-too-short-urinal-problem/266453#266453">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 113 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(x,s=seq(x),y=!x){for(i in s)y[order((.5/(sapply(s,\(w)min((w-s[!!y])^2))+!c(y[-1],0)*c(0,y)[s])-x)*!y)[1]]=i;y}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XU5LCsJADN33FA5ukprR_gRBepI6gtQWCtrWjmIH8SRuquDCI3kbx3bQKlm8T5KXXK5Vc0vD-2Gf8tlzt4CaZCiTHdRIKmQ1ntKigmyQ5QOJKiqqdVIBjKcTkKuy3CiQtIAjbrMc4MhlxJgSuPQQRywGFXFXkIN2DA4pjKRAXqPNNHWFCLO5OpvDjxRicEkXojWU-6IEtFoPDZpex70ve_vkG-1rHZCvneAz4VPr9nP0zK_-S9cbAU17mb073cNN0-EL" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>A function taking a vector of urinal heights and returning a vector of people. The warnings generated occur on the first pass through when the people vector has no one in but do not affect the result.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 32 bytes</h1>
<pre><code>żJạṂ¥€¥_ṬṖŻ+ḊƲ$}ɗNỤḟḣ1⁹;
“”ç@ƬṪỤ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///oHq@HuxY@3Nl0aOmjpjWHlsY/3Lnm4c5pR3drP9zRdWyTSu3J6X4Pdy95uGP@wx2LDR817rTmetQw51HD3MPLHY4BVa4CSv63Bgop6NopAIWtww63P9y571gX18PdWx7u2PRwx6LD7ce6gGZH/v@vpKRkCFJnyGWoA4Rgpo6xjhGQawTiGOmAZIxAcjrGIAGgnI6JjilQGMIyBkqYQCRMQUwdM7BmYx2wNEjCFMgwBkpArQCyoOpBxhjBhZHsNwWrhxgE0WsKMcgEbCrEahRXQSwGOcFcxwjoJwA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A pair of links which is called with a single argument of urinal heights and returns the list of people at each urinal, as per the question spec.</p>
<h2>Explanation</h2>
<pre><code>żJạṂ¥€¥_ṬṖŻ+ḊƲ$}ɗNỤḟḣ1⁹;  # ‎⁡Helper link: takes the list of heights as the left argument and the current sequence of urinals used as the right; returns the updated sequence
ż               ɗ         # ‎⁢Zip the urinal lengths with the following:
      ¥                   # ‎⁣- Following as a dyad:
 J                        # ‎⁤  - Sequence 1..number of urinals
  ạṂ¥€                    # ‎⁢⁡  - For each of those, minimum absolute distance from the existing people
       _      $}          # ‎⁢⁢- Subtract the following run as a monad on the current sequence of urinals used:
        Ṭ                 # ‎⁢⁣  - Untruthy (so a list of 1 in each used urinal position and 0 in those unused)
             Ʋ            # ‎⁢⁤  - Following as a monad
         Ṗ                # ‎⁣⁡    - Remove last list member
          Ż               # ‎⁣⁢    - Prepend zero
           +Ḋ             # ‎⁣⁣    - Add to the untruthied list with the first member removed
                 N        # ‎⁣⁤Negate
                  Ụ       # ‎⁤⁡Indices in ascending value order (break ties from the left)
                   ḟ      # ‎⁤⁢Filter out used indices
                    ḣ1    # ‎⁤⁣First list member (can’t use Ḣ because this returns zero if list is empty)
                      ⁹;  # ‎⁤⁤Append to existing list
‎⁢⁡⁡
“”ç@ƬṪỤ                   # ‎⁢⁡⁢Main link: take a list of urinal heights and return the list of people
“”ç@Ƭ                     # ‎⁢⁡⁣Starting with an empty list, call the helper link repeatedly with the current list on the right and the urinal heights on the left until there’s o change, gathering intermediate values
     Ṫ                    # ‎⁢⁡⁤Final version of list
      Ụ                   # ‎⁢⁢⁡Indices of list sorted by list values (takes sequence of urinals used and returns the people using the urinals as per spec)
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>63</s> 58 bytes</h1>
<pre><code>Ｗ∧⌈θＥθ∧⁼κ⌈θ⁻⁺χ⌊Ｅθ⎇›μ⁰↔⁻λνＬθΣＥθ∧‹μ¹‹↔⁻λν²§≔θ⌕ι⌈ι±ＬΦθ‹κ¹Ｉ⁻¹θ
</code></pre>
<p><a href="https://tio.run/##dY9PCwIhEMXvfQqPs2CQdey0REVQEdQtOlgNu0Outer259Obs210SlCccd7vPU@ldqerNjE@SjIoILdnWOknVU0FdSbFSt@gloLb07rRxsOFm98BniDbeNiYdKhBW7ZvnXCHzmr3grlDHdBBJcUgifKjv5omIHzURgrLrCXaIpTMzbjc/jgcYIneM0C1k@n@hzLMvkvk3lNh87CwZ3wyZ0YJRL8vEAvWWKRw0LnPyHDSujO5sCGvcW/jyAaYaB86RyUFZx3HuN@P5FCqdis5Ohxi/27e" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｗ∧⌈θＥθ∧⁼κ⌈θ⁻⁺χ⌊Ｅθ⎇›μ⁰↔⁻λνＬθΣＥθ∧‹μ¹‹↔⁻λν²
</code></pre>
<p>Until all of the urinals are occupied, calculate the desirability of each urinal, which is zero for all urinals shorter than the tallest, or <code>10</code> plus the distance to the nearest occupied urinal minus the number of adjacent occupied urinals for the tallest urinals.</p>
<pre><code>§≔θ⌕ι⌈ι±ＬΦθ‹κ¹
</code></pre>
<p>Mark the leftmost urinal of those of equal maximum desirability as occupied using the negation of the number of previously occupied urinals. The first of these will be zero, which will cause the loop to exit once all of the urinals are marked as occupied.</p>
<pre><code>Ｉ⁻¹θ
</code></pre>
<p>Output the final list of orders.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/266444/">266444</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




