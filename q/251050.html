<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::251050</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>122</td><td>JavaScript ES7</td><td>220814T222550Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251094#251094">Arnauld</a></td></tr>
<tr d-ix="1"><td>058</td><td>Charcoal</td><td>220814T061135Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251075#251075">Neil</a></td></tr>
<tr d-ix="2"><td>117</td><td>gbz80 machine code on Better Game Boy</td><td>220829T000403Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251405#251405">SNBeast</a></td></tr>
<tr d-ix="3"><td>155</td><td>Perl 5</td><td>220819T194354Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251206#251206">Kjetil S</a></td></tr>
<tr d-ix="4"><td>135</td><td>Python without numpy</td><td>220813T200745Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251063#251063">97.100.9</a></td></tr>
<tr d-ix="5"><td>153</td><td>C clang</td><td>220816T133235Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251136#251136">jdt</a></td></tr>
<tr d-ix="6"><td>126</td><td>Python Numpy</td><td>220814T020513Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251071#251071">loopy wa</a></td></tr>
<tr d-ix="7"><td>nan</td><td>Python 3 with numpy</td><td>220813T174653Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251060#251060">m90</a></td></tr>
<tr d-ix="8"><td>188</td><td>Knight</td><td>220815T162737Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251122#251122">Aiden Ch</a></td></tr>
<tr d-ix="9"><td>176</td><td>C gcc</td><td>220813T192940Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251062#251062">matteo_c</a></td></tr>
<tr d-ix="10"><td>046</td><td>K ngn/k</td><td>220814T084233Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251076#251076">ngn</a></td></tr>
<tr d-ix="11"><td>022</td><td>Jelly</td><td>220813T232800Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251066#251066">Jonathan</a></td></tr>
<tr d-ix="12"><td>121</td><td>Retina</td><td>220814T002630Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251068#251068">Neil</a></td></tr>
<tr d-ix="13"><td>055</td><td>Wolfram Language Mathematica</td><td>220813T134600Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251053#251053">alephalp</a></td></tr>
<tr d-ix="14"><td>029</td><td>MATL</td><td>220813T123152Z</td><td><a href="https://codegolf.stackexchange.com/questions/251050/smallest-number-of-steps-for-a-knight-in-chess/251052#251052">Luis Men</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES7), <s> 129 123 </s> 122 bytes</h1>
<p><em>Saved 1 byte thanks to a suggestion from <a href="https://codegolf.stackexchange.com/users/114260/coder">@Coder</a> on <a href="https://codegolf.stackexchange.com/a/145676/58563">my answer</a> to a previous challenge</em></p>

<pre class="lang-javascript prettyprint-override"><code>f=(x,y,n=0,m=[...s=1/0+''].map(_=&gt;[...s]))=&gt;m.map((r,Y)=&gt;r.map((V,X)=&gt;V&lt;=n|((x-X)*(y-Y))**2^4||f(X,Y,n+1,m)),m[y][x]=n)&amp;&amp;m
</code></pre>
<p><a href="https://tio.run/##JcjRCoIwFADQX@lJ79Xr0uix62fIRFaIaRhuE41wsH9fYo/nvNtvu3bLOH8yY599CAPDRo4M56S5EUKsXJzzNI6V0O0MDy6PVIhc6qNgoXrH8kdFckd1Y@MBtkxiAi6rEZPkcr96P4CkmkxakEYk3TjVbIoNRpEOnTWrnXox2RcMUNApRww/" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (                // f is a recursive function taking:
  x, y,              //   the current position (x, y)
  n = 0,             //   a move counter n
  m = [...           //   the output matrix m[], initialized to an array
    s = 1 / 0 + ''   //   of 8 arrays made of the string &quot;Infinity&quot;
  ].map(_ =&gt; [...s]) //   i.e. [&quot;I&quot;, &quot;n&quot;, &quot;f&quot;, &quot;i&quot;, &quot;n&quot;, &quot;i&quot;, &quot;t&quot;, &quot;y&quot;]
) =&gt;                 //
m.map((r, Y) =&gt;      // for each row r[] at position Y in m[]:
  r.map((V, X) =&gt;    //   for each entry at position X in m[]:
    V &lt;= n |         //     do nothing if V is less than or equal to n
    (                //     or if the squared product of
      (x - X) *      //       x - X and
      (y - Y)        //       y - Y
    ) ** 2 ^ 4 ||    //     is not equal to 4
    f(               //     otherwise, do a recursive call:
      X, Y,          //       pass the new position (X, Y)
      n + 1,         //       increment the move counter
      m              //       pass m[] unchanged
    )                //     end of recursive call
  ),                 //   end of inner map()
  m[y][x] = n        //   set the current square to n
) &amp;&amp; m               // end of outer map(); return m[]
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>59</s> 58 bytes</h1>
<pre><code>⊞υ⟦⁰ＮＮ⟧Ｆυ«≔⊟ιη≔⊟ιθＪηθＩΣιＦ⁸Ｆ⁸«Ｊλκ¿›⁼⁵⁺Ｘ⁻λη²Ｘ⁻κθ²℅ＫＫ⊞υ⟦⊕Σικλ
</code></pre>
<p><a href="https://tio.run/##XZDBagMhEIbPu08xxxEsJIFCoadQSkkhqdDeQg92Y7qyrrtRpz2UPLsZQ7aEHBydz9@Zf2xaHZpBu5wVxRZJwnYmYeVHShvqv0xAcZN@isd6PwRAEvBXV8sY7bdHNYxoWdry7S07FPZK/fgxYHtJVbA@4ZOOCd@pZ5ko9Fz3QcC0c/3poZPQFUll94AvwejEZp4PpF3EewnKUeSGvwzX1vPZFS8SFryucVf6Fyw4voWd9dqhMqZDJgL@P2Hlm2B645PZTQbZgARXxq@O9THnOczy3Y87AQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>⊞υ⟦⁰ＮＮ⟧
</code></pre>
<p>Start a breadth-first search by placing a <code>0</code> at the input coordinates.</p>
<pre><code>Ｆυ«
</code></pre>
<p>Loop over the squares as they are discovered.</p>
<pre><code>≔⊟ιη≔⊟ιθＪηθＩΣι
</code></pre>
<p>Set this square to the current number of steps.</p>
<pre><code>Ｆ⁸Ｆ⁸«Ｊλκ
</code></pre>
<p>Loop over the whole board.</p>
<pre><code>¿›⁼⁵⁺Ｘ⁻λη²Ｘ⁻κθ²℅ＫＫ
</code></pre>
<p>If this is an empty square that is a Euclidean distance of √5 from the current square, then...</p>
<pre><code>⊞υ⟦⊕Σικλ
</code></pre>
<p>... save this square as being one more step away.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://rgbds.gbdev.io/docs/v0.5.2/gbz80.7/" rel="nofollow noreferrer">gbz80</a> <a href="https://www.pastraiser.com/cpu/gameboy/gameboy_opcodes.html" rel="nofollow noreferrer">machine code</a> on <a href="https://bgb.bircd.org/" rel="nofollow noreferrer">Better Game Boy</a>, <strike>128</strike> <strike>127</strike> <strike>124</strike> <strike>123</strike> <strike>118</strike> 117 bytes</h1>
<pre><code>11 03 04 21 80 FF 06 08 0E 08 7C 22 0D 20 FC 3E
0D 22 3E 0A 22 05 20 F0 70 26 2F CD 7A 01 52 18
08 64 64 01 00 80 FF 00 00 76 24 3E 37 BC 28 43
3E 07 BA 38 3E BB 38 3B 3E 80 2E 0A 83 2D 20 FC
82 4F F2 BC 38 2D 7C E2 D5 14 1C 1C CD 7A 01 14
1D CD 7A 01 1D 1D CD 7A 01 15 1D CD 7A 01 15 15
CD 7A 01 15 1C CD 7A 01 1C 1C CD 7A 01 14 1C CD
7A 01 D1 25 C9
</code></pre>
<p>Eight more bytes can be saved from severe compromises to printed data, read the <a href="https://github.com/SNBeast/Knight_Board_GB_ASM_Golf_Thing/blob/main/source.asm#L9" rel="nofollow noreferrer">assembly source</a> to learn more.</p>
<p>As a detail of the Game Boy platform, it must be placed at 0x150, and be jumped to from the entrypoint at 0x100. I opted to not count that because of it being standard GB dev practice (the entrypoint gives you only four bytes to work with).</p>
<p>I know that this answer sucks in terms of length (all those calls!), but I was overcome by the urge to do it for a problem after <a href="https://codegolf.stackexchange.com/a/185978/114388">seeing someone else do x86 real-mode machine code elsewhere</a>, and for this problem to get it to 0x80 bytes. I have no idea why I did this, I'm an ASM noob, but here we are.</p>
<p>BGB is specified because of the desire to print the answer. BGB has a debug print function that is only usable by its debugger (and that of no$gmb and a few others).</p>
<p>The initial position is encoded in the second and third byte and zero-indexed: second is y, third is x.</p>
<p>As for checking my answer, I suppose the only way is to have you download my ROM, or for you to assemble my assembly using <a href="https://rgbds.gbdev.io/" rel="nofollow noreferrer">rgbds</a>. I have put both on <a href="https://github.com/SNBeast/Knight_Board_GB_ASM_Golf_Thing" rel="nofollow noreferrer">GitHub</a>. My assembly is incredibly undercommented.</p>
<p>Edit 1: Shortened corrective increments and decrements into a push and pop, saving one byte.</p>
<p>Edit 2: Moving various things around allowed saving 3 bytes, as well as much better pruning.</p>
<p>Edit 3: Remove decrement that was never necessary, saving 1 byte. That's embarrassing.</p>
<p>Edit 4: Removing a useless load and moving things around in the init loop to allow use of postincrement indexing saved 5 bytes, and the ability to remove <strike>9</strike> 8 bytes with severe compromises was identified.</p>
<p>Edit 5: thejonymyster reminded me that I may assume valid input, moving one byte from compromises to saved.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 155 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub{$_=$&quot;x64;($x,$y,$i,@_)=@_,&quot;$x$y&quot;=~/^[0-7]{2}$/&amp;&amp;s/(?&lt;=^.{@{[$x+$y*8]}}) /0+$i/e&amp;&amp;push@_,map{/./;$x+$&amp;-3,$y+$'-3,$i+1}21,41,12,52,25,45,14,54while@_;$_}
</code></pre>
<p><a href="https://tio.run/##LY5Ra8IwEMff9ymChKhNNKamrhKv9mXb4wYT@uC0tEVnQEttJ0sp7VfvIu7guPsd///dFYfy7PWXGuEj9NUtbXAMeGAWUo2wYbhmWLMwHkMYswE2uB5Ax/fb2eR517gt5oRUfLRewX7ahM0WG4prx9@17RjxGcWaHwgpbtXJui9J0fApV3cNmcztaoqH96qpaF3BpGDCZZ7LXI9JjwnJPPl70udDGCsct716Kkqd/yCCjyPBZmMEHar4tPFbjslXzr/LvleQvyowHwpqm9WnM1wOF5I6fo3MZqaiYAk5FbmCshNR4ENJRakge0BGRaYg6eZRICGhIlGQPiClIiVrjzoJSpwUpcSGNRiaoHLVCXOHmqYos1AHL@itosbe3MDVdqXjZxv7y/@MiqsC3flRsJCgqa/frRxp5P8B" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Somewhat ungolfed:</p>
<pre class="lang-perl prettyprint-override"><code>$f=

sub {
  $_ = $&quot;x64;                      #init board string to 64 spaces
  ($x, $y, $i, @_) = @_            #move x, y and i from head of @_ param array
  ,
  &quot;$x$y&quot;=~/^[0-7]{2}$/             #if x,y within board
  &amp;&amp;                               #and
  s/(?&lt;=^.{@{[$x+$y*8]}}) /0+$i/e  #space found+replaced by i+1 in current x,y
  &amp;&amp;                               #and
  push @_,                         #push possible jump to cells to todo-queue
    map {/./; $x+$&amp;-3, $y+$'-3, $i+1 }
    21, 41, 12, 52, 25, 45, 14, 54 #knight pos cells digits x-3,y-3
        while @_;                  #...all that while there's more to do
  $_                               #return filled up 64 char board string
}

;print &amp;$f( 1 , 0 ) =~ s/.{8}/$&amp;\n/gr,&quot;\n&quot;;
</code></pre>
<p>Output:</p>
<pre class="lang-perl prettyprint-override"><code>30323234
23212343
12143234
23232343
32323434
43434345
34343454
45454545
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> (<em>without</em> numpy), <s>142</s> 135 bytes</h1>
<pre class="lang-py prettyprint-override"><code>lambda x,y,k=[9]*64,r=range(64):[k:=[(x*8+y!=i)*k[i]and-~min(k[j]for j in r if(i%8-j%8)**2^(i//8-j//8)**2==5)for i in r]for _ in r][-1]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY5BCoMwFAX3nuJvhCSNKMVKKuQkIS2Cpv0GowQLuukReoFu3NQ79TZV224eDG8W85y7sb-2bppet95E4v0oKwOGDHzkVqqjZlnKvfSFu1QkSynNA7BqYGI3apkEYFoPZ0AHPl90q1AXrozuDTpiVa3Xu95uQEMwFFEdCsrY_kQwjhdaZkUpD3R1cXN1AJ1H1xNLv1WzIQlPfvBP_QA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes in x and y coordinate as separate inputs, outputs a flattened square list. The code for finding if two positions are a knight's move from each other is taken from <a href="https://codegolf.stackexchange.com/a/145676/113573">Arnauld's answer to &quot;Where can the knight be in N moves?&quot;</a>.</p>
<hr />
<p>-7 bytes from @CursorCoercer by moving the code onto a single line &amp; into a lambda</p>
</div>
<div id="pu5" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 153 bytes</h1>
<p>12 bytes thanks to ceilingcat!</p>

<pre class="lang-c prettyprint-override"><code>e;r(*b,x,y,l,i){for(;i--&amp;&amp;x&gt;0&amp;y&gt;0&amp;x&lt;9&amp;y&lt;9&amp;l&lt;9;b[e=x+y*8]&gt;l?b[e]=l:0)e=&quot;XVTPJFDB&quot;[i]-65,r(b,x+e%5-2,y+e/5-2,l+1,8);}f(*b,x,y){r(memset(b,1,324),x,y,0,8);}
</code></pre>
<p><a href="https://tio.run/##VY5Ba4QwFITv@ytCYCUxkeq2W9zGbKGUHnraQykF8aA2LkJ0S7SQIP712qe1hT7yGCZ8mUkZlDpvz9OkhCF@wS13XPOaDtXFEFEHgefZY@g5WJscPAerk4MoUiUtc36cHfU9mEzqu5Aqid9eX07PT48POK2z4HbPDYFMprb7YMcdU1ezahbxmIqxWgvpYEijmk71AEf8endDl3@ECzU1ed0SioYNgqnbHhVpHGVisRW8QBEcuvqLQWRmHJIoEiCJRDEoY78J/zD7g9kVszP2R83zYQCrCN6@I8yh2SIGoT6Ks7VxgT77jmC83oybcfoqK52fu@kb" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a> Numpy, 126 bytes</h1>
<pre>lambda*z:H[z]
from numpy import*
x=mat(tri(8)).I
x-=x*x
x+=x.T
H=8-inner(*([kron(x,x)-eye(64)&lt;0,1]**c_[:8]).T).A
H.shape=4*[8]</pre>
<p><a href="https://ato.pxeger.com/run?1=Lc4xCsIwGEDhPadwa_6YhCpFgpjBre7d2iJVUyyaNMQUUgcv4lIQvZO3kVKnb3rwnh_b-3Nrhlcti3fnaya-j2ulD6eK3Ndpfi9R7Vo9M522_azRtnWeoCB15bF3DRYAfIcCk4EEFOYy8AylUrDGGOUwwfnFtQYHGoCpXuFVApuYLkpCjvt8LUrgGfAtSvntXFklE5KL8n_BrGuMxzWOaQx0ZDGynEhoAvSmrIwKU5gIpmgYJn8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>How</h2>
<p>The entire solution is precomputed, the function itself does no more than a simple lookup.</p>
<p>The finalised lookup table is 8x8x8x8, but while building it is reduced to 64x64.</p>
<p>We start by setting up the single step matrix and then take powers to cover sequences of moves.</p>
<h4>1 1D considerations</h4>
<p>The 1D case is easy but useful to build on. We can go 1 or 2 units up or down. If we represent that in a 2D source-target matrix <em>x</em> this means that the two diagonals just above the main diagonal must be set and the two below.</p>
<h4>2 Go 2D</h4>
<p>The two dimensions must be combined in an AND like way because the restriction 1 or 2 up or down holds along both axes. The Kronecker product does that, but there is the additional constraint that if it is 1 or 2 along one axis it must be the other along the other axis. This can be enforced by giving the 1. and 2. off diagonals different signs. After Kroneckering the valid bits will all be negative.</p>
<h4>3. Construct 1D</h4>
<p>There are many ways to construct <em>x</em>. The shortest I found was: Get the upper or lower triangle. Take the inverse. This is almost what we want only shifted one unit to the centre. This can be fixed by taking the difference with the square. Finally, we must add (or OR) the transpose.</p>
<h4>4. Putting the bits together</h4>
<p>After taking the Kronecker product we need to add the identity matrix so taking nth power gives the indicator of what's reachable in up to n steps. Conveniently, as the matrix at this point is boolean valued multiple paths to the same target are only counted as one. To get the right distance indices we must count in how many powers a target does not occur. Therefore, the type of the matrices must be changed to int <em>after</em> taking powers but <em>before</em> adding them together. We do this by taking the inner product with a vector of ones which forces coercion to int and then sums.</p>
<h3>Previous <a href="https://www.python.org" rel="nofollow noreferrer">Python</a> Numpy, 131 bytes</h3>
<pre>lambda y,x:65-((D:=Z==y*8+x)+sum(D:=D|M@D for _ in Z)).reshape(8,8)
import numpy
Z=numpy.c_[:64];X=Z//8+Z%8*1j
M=abs((X-X.T)**2)==5</pre>
<p><a href="https://ato.pxeger.com/run?1=Lc7LCoJAGIbhvVcxm2h-HQ-FxWD80MJtuxYyGaKlZOQ4eICEdl1GGyHqnrqbMFs98MIH3-OtuuZUyv6ZYfhqm8zkn_slLpJjTDp29ZYLk1LfQ4HY6dy4glG3xRD822btk6ysSERySQSAVaX1KVYp5YyDlheqrBoi20J1msCf1iHaeUt3vwpQ2DY3xITrs7O2wTipKQ3MwNqCrs8BcfG_Yqoqlw3NqMMcYAOzgfmIy1xgdapwGspQTmEc9f3oFw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Conceptually straight-forward approach. Form the full 64-by-64 indicator matrix of knight's moves (by checking for Euclidean distance <span class="math-container">\$=\sqrt 5\$</span>). Repeatedly multiply by it the indicator vector of the starting position.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a> with <a href="https://numpy.org/" rel="nofollow noreferrer">numpy</a>, <del>138</del> <del>136</del> 133 bytes</h1>
<pre>lambda*a:(S:=sum(D:=-abs(mgrid[:8,:8].T-a).T,0))-(amin([*D//2,S//3,2//S],0)+S&amp;-2)+equal(*D)*(S&amp;-~amin(S)//6==-4)*2
from numpy import*</pre>
<p><a href="https://ato.pxeger.com/run?1=LY49DoIwGIZ3T8Ek31dbq5UY0qQbN6ibOJQoSmJL5WdwcfMULiRG7-RtBHF6kvcv7-Ptr82pdN0zV-mrbXIWf-5nY7O9IUaClqpuLSRSMZPVYI9Vsd_KmMp4N98wg_MNXSAyMLZwsCUJ54JqzldUcK53vTfTUyZwdri05gwkQQK9cPvFNXK-VopFSMQkr0obuNb6a1BYX1YN-Z9hvipcAzks-jU6YDlAjIhohLQ-eBWmLnUhjqWuG_kF" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Example, with arguments 1,2 (a=<code>[1,2]</code>):</p>
<pre><code>mgrid[:8,:8]
[[[0 0 0 0 0 0 0 0]   [[0 1 2 3 4 5 6 7]
  [1 1 1 1 1 1 1 1]    [0 1 2 3 4 5 6 7]
  [2 2 2 2 2 2 2 2]    [0 1 2 3 4 5 6 7]
  [3 3 3 3 3 3 3 3]    [0 1 2 3 4 5 6 7]
  [4 4 4 4 4 4 4 4]    [0 1 2 3 4 5 6 7]
  [5 5 5 5 5 5 5 5]    [0 1 2 3 4 5 6 7]
  [6 6 6 6 6 6 6 6]    [0 1 2 3 4 5 6 7]
  [7 7 7 7 7 7 7 7]]   [0 1 2 3 4 5 6 7]]]
</code></pre>
<p>This produces two matrices that hold the co-ordinates.</p>
<pre><code>D:=-abs(mgrid[:8,:8].T-a).T
[[[-1 -1 -1 -1 -1 -1 -1 -1]  [[-2 -1  0 -1 -2 -3 -4 -5]
  [ 0  0  0  0  0  0  0  0]   [-2 -1  0 -1 -2 -3 -4 -5]
  [-1 -1 -1 -1 -1 -1 -1 -1]   [-2 -1  0 -1 -2 -3 -4 -5]
  [-2 -2 -2 -2 -2 -2 -2 -2]   [-2 -1  0 -1 -2 -3 -4 -5]
  [-3 -3 -3 -3 -3 -3 -3 -3]   [-2 -1  0 -1 -2 -3 -4 -5]
  [-4 -4 -4 -4 -4 -4 -4 -4]   [-2 -1  0 -1 -2 -3 -4 -5]
  [-5 -5 -5 -5 -5 -5 -5 -5]   [-2 -1  0 -1 -2 -3 -4 -5]
  [-6 -6 -6 -6 -6 -6 -6 -6]]  [-2 -1  0 -1 -2 -3 -4 -5]]]
</code></pre>
<p>Transpose, subtract <code>a</code>, and transpose again: this subtracts the arguments from the two matrices, respectively. Also take the absolute value and negate.</p>
<p>This produces the negative vertical and horizontal distances from the given square.</p>
<pre><code>S:=sum(D,0)
[[ -3  -2  -1  -2  -3  -4  -5  -6]
 [ -2  -1   0  -1  -2  -3  -4  -5]
 [ -3  -2  -1  -2  -3  -4  -5  -6]
 [ -4  -3  -2  -3  -4  -5  -6  -7]
 [ -5  -4  -3  -4  -5  -6  -7  -8]
 [ -6  -5  -4  -5  -6  -7  -8  -9]
 [ -7  -6  -5  -6  -7  -8  -9 -10]
 [ -8  -7  -6  -7  -8  -9 -10 -11]]
</code></pre>
<p>Add the two matrices for the negative taxicab distance from the given square.</p>
<p>The reason for the negation is that we really want rounding-up division,
but only have easy access to rounding-down division with <code>//</code>.</p>
<p><span class="math-container">\$\lfloor\frac{-n}{d}\rfloor = -\lceil\frac{n}{d}\rceil\$</span></p>
<pre><code>O:=amin([*D//2,S//3,2//S],0)
[[-1 -1 -2 -1 -1 -2 -2 -3]
 [-1 -2  0 -2 -1 -2 -2 -3]
 [-1 -1 -2 -1 -1 -2 -2 -3]
 [-2 -1 -1 -1 -2 -2 -2 -3]
 [-2 -2 -2 -2 -2 -2 -3 -3]
 [-2 -2 -2 -2 -2 -3 -3 -3]
 [-3 -3 -3 -3 -3 -3 -3 -4]
 [-3 -3 -3 -3 -3 -3 -4 -4]]
</code></pre>
<p>The <code>*D//2,S//3</code> part produces concentric octagons corresponding to
the furthest points the knight can reach in a number of moves. <code>2//S</code> is 0 with a RuntimeWarning for S=0, −2 for S=1, −1 for S≥2; it makes a difference only in the case S=1, changing the values of the squares adjacent to the given square from −1 to −2.</p>
<pre><code>S-(O+S&amp;-2)
[[1 2 3 2 1 2 3 4]
 [2 3 0 3 2 3 2 3]
 [1 2 3 2 1 2 3 4]
 [2 1 2 1 2 3 2 3]
 [3 2 3 2 3 2 3 4]
 [2 3 2 3 2 3 4 3]
 [3 4 3 4 3 4 3 4]
 [4 3 4 3 4 3 4 5]]
</code></pre>
<p>A correction for parity: the number of moves should have the same parity as the the taxicab distance <code>S</code>. Add <code>S</code>, round down to the nearest multiple of 2 (by zeroing the low bit), and subtract <code>S</code>; also negate and simplify.</p>
<p>Finally, some more adjustments:</p>
<p><code>+equal(*D)*(S&amp;-~amin(S)//6==-4)*2</code></p>
<ul>
<li><p>The squares two steps away along a diagonal should have value 4 instead of 2.</p>
</li>
<li><p>If the given square is a corner square, the diagonally adjacent square should also have value 4 instead of 2.</p>
</li>
<li><p><code>equal(*D)</code> checks for squares sharing a diagonal with the given square.</p>
</li>
<li><p><code>amin(S)</code>, the negated highest taxicab distance, is −14 if the given square is a corner square, and otherwise ranges from −8 (for a centre square) to −13.</p>
</li>
<li><p><code>-~amin(S)</code> is one higher: −13 for corner squares, −7 to −12 otherwise.</p>
</li>
<li><p>Floor-dividing by 6 produces −3 for corner squares and −2 otherwise.</p>
</li>
<li><p>On the diagonals, S is even. ANDing with −2 = ...1110<sub>2</sub> leaves it unchanged, whereas ANDing with −3 = ...1101<sub>2</sub> zeroes the twos bit, mapping both −2 and −4 to −4.</p>
</li>
</ul>
<p>The result:</p>
<pre><code>[[1 2 3 2 1 2 3 4]
 [2 3 0 3 2 3 2 3]
 [1 2 3 2 1 2 3 4]
 [4 1 2 1 4 3 2 3]
 [3 2 3 2 3 2 3 4]
 [2 3 2 3 2 3 4 3]
 [3 4 3 4 3 4 3 4]
 [4 3 4 3 4 3 4 5]]
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/knight-lang/knight-lang" rel="noreferrer">Knight</a>, <s>272</s> <s>264</s> <s>193</s> <s>190</s> 188 bytes</h1>
<pre><code>;=nF;=xP;=yP;=sS*'9'64+*8y xT0;W&gt;9=n+1n;=r~1W&gt;8=r+1r;=c~1W&gt;8=c+1c;=a~3W&gt;4=a+1a;=b~3W&gt;4=b+1b&amp;?5+*a a*b b&amp;&amp;&amp;&amp;&gt;8=x+a r&lt;~1x&amp;&gt;8=y+b c&lt;~1y&gt;E Gs+x*8yT=qGs+r*8cT=sSs+x*8yT+1q;=i~8W&gt;64=i+8iO Gs i 8
</code></pre>
<p>Input is 0-based horizontal and vertical coordinates, each on separate lines.</p>
<p>A fitting language for this challenge... or maybe not...</p>
<p><a href="https://tio.run/##lVhrU9tIFv2eX9FoM1htCWFn2CxYtKmEJVOpnZhsYIbatZ3QarVtTWTJ6AFmbPHXmdt6tvwiQxWUpD59X33uo/mD3tOQBc4sOvB8mz8zl4Yh@o/njCfRRRD4AeLziHt2iNK3RZIBPtMg5PV1aU@B@hJ7kTN9GXcVBZxOF8z3wiiIWeQHKsWLaOKERujHAeOEJrDizG4mTsTDGWVczdenNGIT9fCr2h8MB/1BCN@TzlBb/qP/deANm@rAW77GuHmIkxnn32E14FEceEgS3m8Nl0svdt0kE2bpjLTwwuURosQy@JwzVYJjMxchthBC6Jl46MgQIj0bYWyB7SoFNYbLvXE0wTrtsyFOIh8cd7zxRquSJA0Huv7f54sr0h@aWah@p27MF2FEI4ehmTgF1cILy1gLjzmCKN7TAHxomfQ0FZPrN6mmZf4xkn7v06FRyDKdkcpwbg9LJF@TIPbSsAf@A/L4Q8aIxOZWPN7wfYt3qRCjWgRcL55aPNiCKxYB9973XU69LcByNclZ9SsEI6BuSbwsdCskC@OZkK6nor7ZNKLAtcxRSckGZ/L3at8mT/L3OmjNjeKDDON3rjAvR1DkgNXUY9wfZV5LbuzvS8YDH7OnIgpCeBmCPCRr/Cm4XmXT9Ych7r87@P@weai3S8rT/X1xwEKmqlwrQhtO7Hg6K525LZx5neZngm8TN5pUruxVtu7v09qxjWUcknF7dWCSkXkWhxNVfMVmlioXvd8/frnsfbroXZNFkifMR5t70QoHXnK/Tw/@/DYUf1sHJ98gBKsBSIWCsckuNjkCBGyqxyfd6owcwGUhynAiUGCuM/aEHMmTfoUZltTMDN6CEhl87zs2au2J8yksN6sEleuyevub993zHzzklJahRs20xm095qkLuIivFN0fpdfA1tZDCgHN04XiVVLlCxWnqG1LXCn2V5zRqFQ6cAI1eCf8oA6fxu5OeLMOt5172ctqSZxE7RAKUZ9oNDGANx6TpB6C39sOSTmnnudHCFTBmSDrEf3JA18BU337b@quFP5EX9QH4mPXl/TN/Ifd@irxy@WeSk9b@IecbzZ/wHs@n/meICmNeGoQinyojR4fA9/uOQLjeABGulsqyal8blvrTbeGqhG/on0PGuJu3kvVuyR@Ly@pOOO8EFIrIUUFEe12JQcUAVaxsqszpPJy518IJfOnYCZPtxhKGYy/uUsOjvhWRAea44vBERSyCJV6jtIYYpjjwsHVsHmGB@1D/U1KKxENYJYlEwk0iGElG2KokQ13Aqw0RFtiy2VDaYgHXLlUDa2i6IFVU8cDJtnoLvaBUNxjfiw@c7uDXi9ocruppaf21/NIb7fwctlaqVn5gLCrZgknbnNArnC99AhQpcsI@IxT6D1yBXqB8eWotZPxJUo@VPiYd1fYRe2rR491aEICfhc7AVeVUahgfSFG5HTJkpbYxHHtb7PAZzwUqA@/9c6vP172rqre/AFqwK7WLLEkO2CYzEsxfUvqdOlJS7OqKfHqrJNmnbY08GHGGC7maTEfixcb5mP7lBWzsV3MxiOSWmQUpghle6MtdPrkQO/2xogG43gqBo7XC1trJwiUoJHwEjqqJRqpybPAjnAinbEIhMp0S@crIwV8YitjhRBHaPbs0SknVvYMqkPC1mfXdINqGEaJKitLVsUVoT1yfE9VtFJqGR4LFSNnupVqRNGRollGJqPs4pqyVpsurT84iwwnTPmrw7iUjHJVKOBjJ4x46iJeQGjbolcVF6SVu4Sq9MAkNI1hyLMgUeeURe4jgl6A2IQG8AYzi@t7Y6hJZkUQOiSWpBECU3Yu@WjzJIMbqGpJeYDl2lONUdl9w9xIA6Xno3shGQpl7NrC1lSFvQe1UsoqEXCslyFQPiu6ikk3v5Ipim6R9/FoxAODuq7PVBjAbV8EiaotYEQLJnIdKG/BlRJbYPh3k2ng6gNkHFfb0IXTlfQmZ4jcunEg8ZWBp2DMCDNC14EbYktHB9VkX1QahhPZsi@ZZbXWPXJ98PXozcnRydt/vTl520y/BtSz/akIm7z/QtEp6YqQ0VpoK0jjXUNAykTPwptbZcndDQw4K8zMJBmjwJ@eAwPOfRsGzfzuhDuFufJxGizHvYvEzCYb@T41ksqfzrNP@eUy/Ssv36bLZR@qO7fFUeW/6aa8IBp87qxWcQm7VypI71r1C1AN@WuJFB7LhhTJJKP/LbjVLce3WrALy8LI9uPIeAigcYPALM@xTmsxu6wLqrTm0pTBIL0e5mQDpp1tkV@wESC4sxFzK3rjq1uslzOTbIkGFBVFpDou0Whz32rOH6whxb1gE7K5hhR9eRPycA2Z3gY2IH9al@lvtvPrGjKdujcgT0tkSZVii5gIyi3ynu72PeNte8627xElf@Oe/XKPSou8rv2f5izf1qll3vLFbbRjrWekKW3LVvVNASMSrFZbxJV2uQSV0vW@nsjUyO/nFin1WzXhN6XwheieZi1pTbySbhvJ/DETAU2fdOnGYLF133@RNqVBq@zWrdolTRflX3otKhgt/ksphCyXilKP2lWuwE5VFJteUGUTe11zCS5avRjrz6gGU2VhAnQ4rDGtMkmzRS@uGsZTQ6549as74CA6RRWBieW@/wY64fPzc/tV69WzSbwPJpl/Nskj/IZXzcZJ4@2R1jx@RPPrlnnTPSGe1vZMEjy1b7rHJNDagUlY9sK0NjMJffr5pntEqNamJrGyF0trW/tn/9SaFNGmhax9@IENc42i4PSpPRcvj5qFGLw8di/QL6E2B53X5A6eguYxuwZb8m9a@84kztPxTfftEXG0Y@cS4MhBx38B" rel="noreferrer">Try it Online!</a></p>
<p>Here's the Knight code translated to Python: <a href="https://tio.run/##bZFRb8IgFIXf@RUnfYKCiZ2b6Yzsj5hmoRUdicEKNLO/voNaU9PsgQS@A/eec2n78HO1m7J1w3DUJ/iu9sGELmjqBZRALdCwHYHVv98eEllGcLo6GBgLp@xZ04u21LN0CeYUBXsNsxhLKF6P4lSDS/iDqSLQl3RfSrVQg6MNI3A6dM4@OCH32NzYQI1tu0AZI/0SJHsv/rPPDDm27wJl3vO7QCGwZiSZt7O/bbKWmJtZOdpNsFnCkaqZrt7E5iGMSv2vksai8jiGvIaU@JgoUiTF3XRKeWreTKf4ZFXs7/sSyh7Ttp@2KbI/jJEq9kVvO/kkDXcVe7YEFuPwr3O48YIRsvjHMWHrnuXMLi5eVmwYCrL@Aw" rel="noreferrer">Try It Online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>191</s> <s>179</s> 176 bytes</h1>
<p><em>-15 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">@ceilingcat</a></em></p>

<pre class="lang-c prettyprint-override"><code>f(a,x,y)int*a;{a[x=x*8+y]=!memset(a,1,256);r(a,x);}r(a,x,b,y)int*a;{for(b=0;++b&lt;9;x/8==y&gt;&gt;3&amp;a[x]+1&lt;a[y-=8*~(~b&amp;1)*~-(b&amp;2)]&amp;x&gt;&gt;6==y&gt;&gt;6&amp;&amp;r(a,y,a[y]=a[x]+1))y=x-~(b&amp;1)*~-(b/2&amp;2);}
</code></pre>
<p><a href="https://tio.run/##VZDLaoQwFIbX41NYoSHRyKhtxRLji9gsEjuWCFqxs0gY9NXtORZm6Crk@28kXfrVdfveU80d98xO11iLm26ddHGVeCWfxsv4c7mCnvPirWRiQSsT63Fy8wj13ws1MhNJYup34c6VlL5pXgiUqSSvdetTWcUb3QzJWbyl1JCCKeKapjycJSHY6Tk4lfxLMealSzd6j5wLCIl1n@mxym7BCXfhElrYtnUF@xbxnQ/Ah4MPBz/NC@CeRs@fYcRD3Vp46aCYAG0NHvLHFCED9J@sQTBqO1Esw37dlq8KjPiHGc8wM1ONxv0X" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>48</s> 46 bytes</h1>
<pre><code>8 8#{x&amp;1+&amp;/'x@&amp;'4=*/4#i-\:'i:!8 8}/9*~(!64)=8/
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs7JQsFCurlAz1FbTV69wUFM3sdXSN1HO1I2xUs+0UgTK1upbatVpKJqZaNpa6HNxpSkYKBgCAGgsDDo=" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s> 24 23 </s> 22 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>W8p¤ạṢ€ċØ½ʋƇ$ƬŒṬĖP€o/’
</code></pre>
<p>A monadic Link that accepts a pair of integers and yields a list of lists of integers.</p>
<p><strong><a href="https://tio.run/##ATsAxP9qZWxsef//VzhwwqThuqHhuaLigqzEi8OYwr3Ki8aHJMasxZLhuazEllDigqxvL@KAmf/Dh0f//zEsMQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> (The footer pretty prints the grid)</p>
<h3>How?</h3>
<p>Repeatedly finds coordinates reachable from the current list of coordinates starting with just the given coordinate. Then creates grids from each of these lists with their grid number at the identified coordinates and reduces these with logical OR to keep the first non-zero value at each coordinate. This has the initial position as <span class="math-container">\$1\$</span> rather than <span class="math-container">\$0\$</span>, so all numbers are then reduced by one.</p>
<pre><code>W8p¤ạṢ€ċØ½ʋƇ$ƬŒṬĖP€o/’ - Link: integers [x, y]
W                      - wrap -&gt; [[x, y]]
             Ƭ         - collect up while distinct applying:
            $          -   last two links as a monad:
   ¤                   -     nilad followed by link(s) as a nilad:
 8                     -       eight
  p                    -       ([1..8]) Cartesian power ([1..8]) -&gt; all coordinates
           Ƈ           -     keep those for which:
          ʋ            -       last four links as a dyad:
    ạ                  -         absolute difference (vectorises)
     Ṣ€                -         sort each
        Ø½             -         [1,2]
       ċ               -         count occurrences
              ŒṬ       - convert to grids of zeros with ones at the coordinates 
                Ė      - enumerate -&gt; [[1, 1st grid], [2, 2nd grid], ...]
                 P€    - product of each -&gt; grids with 1s replaced by grid number
                    /  - reduce by:
                   o   -   logical OR (vectorises)
                     ’ - decrement
</code></pre>
<hr />
<p>Alternative 22, same method just identifying the existence of <code>[1,2]</code> and <code>[2,1]</code> by filtering for those which, when sorted, are invariant under the operation of getting the range of their length (<code>[1,2]</code>):</p>
<pre><code>W8p¤ạṢJƑ$Ƈ¥Ƈ$ƬŒṬĖP€o/’
            
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 121 bytes</h1>
<pre><code>.+
*#8*$(8*_ ¶
^(#)*((?&lt;-1&gt;.)*)_
$2$#1
s)+`(?&lt;=(\d)(....|.{11}|.{13})?.{7})_|_(?=.{7}(....|.{11}|.{13})?(\d))
$.(_$1*_$4*
</code></pre>
<p><a href="https://tio.run/##K0otycxLNPz/X0@bS0vZQktFw0IrXuHQNq44DWVNLQ0NextdQzs9TS3NeC4VIxVlQ65iTe0EoKitRkyKpoYeENToVRsa1oJI41pNe71q81rN@Jp4DXtbEBOLCpBGTS4VPY14FUOteBUTrf//DQwB" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Takes input as a pair of 0-indexed digits. Explanation:</p>
<pre><code>s)`
</code></pre>
<p>Run the whole script in single-line mode where <code>.</code> also matches newlines.</p>
<pre><code>.+
*#8*$(8*_ ¶
</code></pre>
<p>Treat the input as base 10 and insert that many <code>#</code>s followed by an empty chessboard of 8 rows of 8 <code>_</code>s terminated by spaces and newlines to bring each row up to 10 characters.</p>
<pre><code>^(#)*((?&lt;-1&gt;.)*)_
$2$#1
</code></pre>
<p>Replace the <code>n</code>th character of the chessboard with a <code>0</code>, removing <code>n</code>. (<code>$#1</code> is just a weird way of saying <code>0</code>; I can't use <code>0</code> literally because it will tokenise with the previous <code>2</code>.)</p>
<pre><code>+`
</code></pre>
<p>Repeat until no more changes can be made.</p>
<pre><code>(?&lt;=(\d)(....|.{11}|.{13})?.{7})_|_(?=.{7}(....|.{11}|.{13})?(\d))
</code></pre>
<p>Search for all empty squares that are a knight's move away from a square that already contains a digit (which will always be the largest digit so far).</p>
<pre><code>$.(_$1*_$4*
</code></pre>
<p>Replace them with the next digit.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 55 bytes</h1>
<pre><code>GraphDistance[8~KnightTourGraph~8,#+8#2+1]~Partition~8&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n6Zg@9@9KLEgwyWzuCQxLzk12qLOOy8zPaMkJL@0CCxTZ6GjrG2hbKRtGFsXkFhUklmSmZ9XZ6H2P6AoM68kOi3aQEfBIDb2PwA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Using the built-in <code>KnightTourGraph</code> function.</p>
<hr />
<p>If the strict output format is required:</p>
<h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 69 bytes</h1>
<p>-6 bytes and fixed a bug thanks to <a href="https://codegolf.stackexchange.com/users/81203/att">@att</a> and <a href="https://codegolf.stackexchange.com/users/92689/steffan">@Steffan</a></p>
<pre><code>StringRiffle[GraphDistance[8~KnightTourGraph~8,#+8#2+1]~Partition~8]&amp;
</code></pre>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n6Zg@z@4pCgzLz0oMy0tJzXavSixIMMls7gkMS85NdqizjsvMz2jJCS/tAgsU2eho6xtoWykbRhbF5BYVJJZkpmfV2cRq/Y/AGhISXRatIGOgkFs7H8A" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, <s>34</s> <s>32</s> <s>31</s> 29 bytes</h1>
<pre><code>8t&amp;Oli(9:&quot;tt3Zv&amp;+3=Z+g&lt;@Q*+]q
</code></pre>
<p>Input is a cell array with the vertical and horizontal coordinates, starting at top left, 1-based.</p>
<p><a href="https://tio.run/##y00syfn/36JEzT8nU8PSSqmkxDiqTE3b2DZKO93GIVBLO7bw//9qQx3DWgA" rel="noreferrer" title="MATL – Try It Online">Try it online!</a></p>
<h3>How it works</h3>
<pre><code>8t&amp;O      % Push 8×8 array of zeros
li(       % Write 1 at the position taken as input
9:&quot;       % For each k in [1, 2, ..., 9]
  t       %   Duplicate. This is the current pattern, to be extended. A 0 in an
          %   entry means position not yet reached. A non-zero value indicates
          %   the required number of moves plus 1
  t       %   Duplicate again
  3Zv     %   Symmetric range: [1 2 3 2 1]
  &amp;+      %   5x5 matrix of pair-wise additions
  3=      %   True for entries that equal 3. This gives a 5×5 matrix containing
          %   the 8 possible moves for a knight
  Z+      %   2-dimensional convolution of the two above matrices, maintaining
          %   the size of the former (8×8) in the output
  g       %   Convert the result to logical: non-zeros become 1
  &lt;       %   Less than (element-wise)? This indicates *new* available positions
  @Q*     %   Multiply element-wise by k+1
  +       %   Add, element-wise. This updates the pattern with the new values
]         % End
q         % Subtract 1 element-wise. Implicit display
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/251050/">251050</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




