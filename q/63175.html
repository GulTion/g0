<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::63175</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>011</td><td>Vyxal 3 s</td><td>231222T030940Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/268691#268691">lyxal</a></td></tr>
<tr d-ix="1"><td>017</td><td>Husk</td><td>201107T201223Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/214898#214898">Dominic </a></td></tr>
<tr d-ix="2"><td>020</td><td>Husk</td><td>201102T120219Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/214572#214572">Razetime</a></td></tr>
<tr d-ix="3"><td>103</td><td>Python 2</td><td>190622T190341Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/187280#187280">Erik the</a></td></tr>
<tr d-ix="4"><td>013</td><td>Jelly</td><td>190622T175808Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/187279#187279">Erik the</a></td></tr>
<tr d-ix="5"><td>011</td><td>Japt x</td><td>190621T164311Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/187243#187243">Shaggy</a></td></tr>
<tr d-ix="6"><td>017</td><td>Brachylog</td><td>190621T080705Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/187203#187203">Unrelate</a></td></tr>
<tr d-ix="7"><td>026</td><td>CJam</td><td>151204T152301Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/65741#65741">Martin E</a></td></tr>
<tr d-ix="8"><td>141</td><td>JavaScript ES6</td><td>151107T032630Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63182#63182">Downgoat</a></td></tr>
<tr d-ix="9"><td>120</td><td>Matlab</td><td>151108T090845Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63302#63302">Abr001am</a></td></tr>
<tr d-ix="10"><td>055</td><td>APL</td><td>151108T062600Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63291#63291">user4691</a></td></tr>
<tr d-ix="11"><td>034</td><td>CJam</td><td>151108T042618Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63287#63287">Reto Kor</a></td></tr>
<tr d-ix="12"><td>020</td><td>Pyth</td><td>151107T200003Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63248#63248">isaacg</a></td></tr>
<tr d-ix="13"><td>087</td><td>Julia</td><td>151107T025040Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63180#63180">Alex A.</a></td></tr>
<tr d-ix="14"><td>052</td><td>Julia</td><td>151107T152642Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63219#63219">Glen O</a></td></tr>
<tr d-ix="15"><td>022</td><td>TeaScript</td><td>151107T023237Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63179#63179">Downgoat</a></td></tr>
<tr d-ix="16"><td>058</td><td>CJam</td><td>151107T132956Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63214#63214">anOKsqui</a></td></tr>
<tr d-ix="17"><td>087</td><td>Mathematica</td><td>151107T121914Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63210#63210">LegionMa</a></td></tr>
<tr d-ix="18"><td>145</td><td>PHP</td><td>151107T113302Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63208#63208">Blackhol</a></td></tr>
<tr d-ix="19"><td>052</td><td>Minkolang 0.11</td><td>151107T031101Z</td><td><a href="https://codegolf.stackexchange.com/questions/63175/counting-1-primes/63181#63181">El&#39;e</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3" rel="nofollow noreferrer">Vyxal 3</a> <code>s</code>, 11 bytes</h1>
<pre><code>bƛ?bm1ỊB}uṄ
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#WyJsc2IiLCIiLCJ0by1iaW5hcnkgbWFwPCBpbnB1dCB0by1iaW5hcnkgbSAxIGluc2VydCBmcm9tLWJpbmFyeX0gdW5pcXVpZnkgcHJpbWU/IiwiIiwiMzMiLCIzLjMuMCJd" rel="nofollow noreferrer">Try it Online! (link is to literate version)</a></p>
<h2>Explained</h2>
<pre><code>'uniquify( to-binary map&lt; 
  (input to-binary) 'insert (ctx-m 1)
  from-binary}
)
  
prime?
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, <s>18</s> 17 bytes</h1>
<pre><code>#oṗḋużoJ1eḣḋ¹mtṫḋ
</code></pre>
<p><a href="https://tio.run/##yygtzv6f@6ip8b9y/sOd0x/u6C49uiffyzD14Y7FQM6hnbklD3euBrL@//8fbaJjqGNormNsrGNqaqxjbGRurGNiaGIKJAwsYwE" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>Different approach to <a href="https://codegolf.stackexchange.com/a/214572/95126">Razetime's Husk answer</a>, saving <s>2</s> 3 bytes.</p>
<p><strong>How?</strong></p>
<pre><code>#oṗḋużoJ1eḣḋ¹mtṫḋ
#o                      # how many
  ṗ                     # prime numbers
   ḋ                    # among numbers formed by binary digits of
    u                   # unique elements of
     żo                 # zip together 2 lists of lists,
       J1e              # joining each pair with the digit '1'
          ḣḋ¹           # list 1:
          ḣ             # all prefixes of 
           ḋ¹           # binary digits of input
             mtṫḋ       # list 2:
             mt         # remove first element from
               ṫ        # all suffixes of
                ḋ       # binary digits of input
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 20 bytes</h1>
<pre><code>←#ṗumȯḋJ1`Cḋ¹oSze↔ŀḋ
</code></pre>
<p><a href="https://tio.run/##yygtzv7//1HbBOWHO6eX5p5Y/3BHt5dhgjOQOrQzP7gq9VHblKMNQN7///8NzQE" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>Barely got away with a single byte.</p>
<h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 21 bytes</h1>
<pre><code>#oṗḋumJ1§z§e↑↓oΘŀo¢;ḋ
</code></pre>
<p><a href="https://tio.run/##yygtzv7/Xzn/4c7pD3d0l@Z6GR5aXnVoeeqjtomP2ibnn5txtCH/0CJroNz///8NzQE" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<p>There's probably a much shorter way to do this.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 103 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda n:sum(all(i%j for j in range(2,i))for i in{n%2**i+((n&gt;&gt;i)*2+1&lt;&lt;i)for i in range(len(bin(n))-2)})
</code></pre>

<p><a href="https://tio.run/##PctBDoIwEEbhq8yGZKbogi6IGOQkbkqkOqT8NLUsjPHsVRPj9nt58ZFvK2zxp3MJbhkvjnC8bwu7EFirmfyaaCYFJYfrxHanIl/Tjz1RWWO0ZsYwqBhbN32v//xbwgQeFQyRvZWXlJgUmTwr4pZZpDRde2i7Nw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 13 bytes</h1>

<pre><code>BLṬkj1ʋ€$QḄẒS
</code></pre>

<p><a href="https://tio.run/##ASYA2f9qZWxsef//QkzhuaxrajHKi@KCrCRR4biE4bqSU////zE5Njg2OQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> <a href="https://codegolf.meta.stackexchange.com/a/14339/"><code>-x</code></a>, <s>14</s> 11 bytes</h1>
<pre><code>Æ¤iX1Ãâ ®Íj
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;flags=LXg&amp;code=xqRpWDHD4iCuzWo&amp;input=MTc" rel="nofollow noreferrer">Try it</a> or <a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=xqRpWDHD4iCuzWo&amp;footer=eA&amp;input=WzQsMSwxNywzMyw1NTMsMzI3Myw0MTQ1LDQxMDksMTk2ODY5XQotbQ" rel="nofollow noreferrer">run all test cases</a></p>
<pre><code>Æ¤iX1Ãâ ®Íj     :Implicit input of integer U
Æ               :Map each X in the range [0,U)
 ¤              :  Convert U to binary string
  iX1           :  Insert &quot;1&quot; at 0-based index X
     Ã          :End map
      â         :Deduplicate
        ®       :Map
         Í      :  Convert to decimal
          j     :  Is prime?
                :Implicit output of array sum
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, 17 bytes</h1>

<pre><code>{ḃ~c₂{,1}ʰc~ḃṗ}ᶜ¹
</code></pre>

<p><a href="https://tio.run/##SypKTM6ozMlPN/pfXa6koGunoFRu/6htw6Ompoe7Omsfbp3wv/rhjua6ZKBAtY5h7akNyXVA/sOd02sfbptzaOf//9EmOoY6huY6xsY6pqbGOsZG5sY6JoYmpkDCwFLH0NLMwsxSx1THTMc8FgA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>

<p>Input through the input variable and output through the output variable.</p>

<pre><code>{             }ᶜ¹    Count every unique
             ṗ       prime number
           ~ḃ        the binary representation of which is
 ḃ                   the binary representation of the input
  ~c₂                partitioned into two (possibly empty) lists
     {  }ʰ           with the first list
      ,1             having a 1 appended
          c          and the two lists then being concatenated back into one.
</code></pre>
</div>
<div id="pu7" class="pu"><h2>CJam, 26 bytes</h2>

<p>Not a winner, but it beats the existing CJam answers quite solidly and it's the first time I got to use the 0.6.5 command <code>e\</code>.</p>

<pre><code>1ri2b+_,{_)e\_}%_&amp;{2bmp},,
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=1ri2b%2B_%2C%7B_)e%5C_%7D%25_%26%7B2bmp%7D%2C%2C&amp;input=196869" rel="nofollow">Test it here.</a></p>

<h3>Explanation</h3>

<pre><code>1       e# Push a 1 (this is the 1 we'll be inserting everywhere).
ri      e# Read input and convert to integer.
2b      e# Convert to base 2.
+       e# Prepend the 1.
_,      e# Duplicate and get the number of bits N.
{       e# Map this block over i from 0 to N-1...
  _)    e#   Create a copy and increment to i+1.
  e\    e#   Swap the bits at positions i and i+1, moving the 1 one step through the array.
  _     e#   Duplicate so we keep this version on the stack.
}%
_&amp;      e# Remove duplicates via set intersection with itself.
{       e# Filter the remaining digit lists based on this block...
  2b    e#   Convert bits back to an integer.
  mp    e#   Test for primality.
},
,       e# Get the length of the remaining list.
</code></pre>

<p>One thing worth noting is that we swap the bits at <code>0</code> and <code>1</code> before making the first copy, so we lose the original array with the <code>1</code> prepended to the front. However, the input is always positive, so the leading digit will always be one. That means after prepending another one, the digit list will always start with <code>[1 1 ...]</code> so the first swap will be a no-op in any case.</p>
</div>
<div id="pu8" class="pu"><h1>JavaScript ES6, 141 bytes <s>143</s> <s>147</s> <s>160</s></h1>

<p><em>Saves 13 bytes, thanks to @Naouak</em></p>

<pre><code>n=&gt;[...t=n.toString(2)].map((l,i)=&gt;t.slice(0,v=i+1)+1+t.slice(v)).filter((l,i,a)=&gt;a.indexOf(l)==i&amp;&amp;(p=(n,c)=&gt;n%c&amp;&amp;c&gt;n-2||p(n,++c))('0b'+l,2))
</code></pre>

<p>Similar method to my TeaScript answer, uses RegExp (you heard me right) to check for primes.</p>

<h3>Ungolfed</h3>

<pre><code>n=&gt;
   [...t = n.toString(2)]                  // To binary
   .map((l,i)=&gt;                            // Make cycles
               t.slice(0, v = i+1)
               + 1
               + t.slice(v)
   ).filter((l,i,a)=&gt;  
                     a.indexOf(l) == i &amp;&amp;  // Remove Duplicates
                     (p=(n,c)=&gt;            // Prime checking
                               n % c &amp;&amp;
                                 c &gt; n - 2 ||
                                 p(n,++c)
                     )('0b'+l,2)
   ).length
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Matlab (120)</h2>

<pre><code>n=input('');a=dec2bin(n);g=arrayfun(@(x)bin2dec(cat(2,a(1:x),49,a(x+1:end))),1:log2(n));nnz(unique(g(find(isprime(g)))))
</code></pre>

<hr>

<ul>
<li>More golfing in progress ...</li>
</ul>
</div>
<div id="pu10" class="pu"><h1>APL, 55</h1>

<pre><code>{+/{2=+/0=⍵|⍨⍳⍵}¨∪⍵{2⊥(⍵↑X),1,⍵↓X←⍺⊤⍨N⍴2}¨-1-⍳N←1+⌊2⍟⍵}
</code></pre>

<p>2 bytes shorter Dyalog-specific version:</p>

<pre><code>{+/2=+/¨0=|⍨∘⍳⍨¨∪⍵{2⊥⍵(↑,(1∘,↓))⍺⊤⍨N⍴2}¨-1-⍳N←1+⌊2⍟⍵}
</code></pre>
</div>
<div id="pu11" class="pu"><h1>CJam, 34 bytes</h1>

<pre><code>li2b_,),\f{_2$&lt;@@&gt;1\++}_&amp;2fb{mp},,
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=li2b_%2C)%2C%5Cf%7B_2%24%3C%40%40%3E1%5C%2B%2B%7D_%262fb%7Bmp%7D%2C%2C&amp;input=196869" rel="nofollow">Try it online</a></p>

<p>First version, will update if I come up with something better.</p>
</div>
<div id="pu12" class="pu"><h1>Pyth, 20 bytes</h1>

<pre><code>s/LPd{mij\1c.BQ]d2hQ
</code></pre>

<p><a href="https://pyth.herokuapp.com/?code=s%2FLPd%7Bmij%5C1c.BQ%5Dd2hQ&amp;input=2&amp;test_suite=1&amp;test_suite_input=2%0A4%0A1%0A17%0A33%0A553%0A3273%0A4145%0A4109%0A196869&amp;debug=0" rel="noreferrer">Test Suite</a></p>

<pre><code>s/LPd{mij\1c.BQ]d2hQ
                        Q = eval(input())
      m           hQ    For insertion position in [0 ... Q]
            .BQ         Convert Q to binary string
           c   ]d       Chop at insertion position
        j\1             Join on '1'
       i         2      Convert to integer
     {                  Deduplicate
 /LPd                   Map each number to the number of times it occurs in its
                        prime factorization, e.g. whether or not it is prime.
s                       Sum and print.
</code></pre>
</div>
<div id="pu13" class="pu"><h1>Julia, <s>110</s> <s>108</s> <s>104</s> 87 bytes</h1>



<pre class="lang-julia prettyprint-override"><code>n-&gt;sum(i-&gt;isprime(parse(Int,i,2)),(b=bin(n);∪([b[[1:i;1;i+1:end]]for i=1:endof(b)])))
</code></pre>

<p>This creates an unnamed function that accepts and integer and returns an integer. To call it, give it a name, e.g. <code>f=n-&gt;...</code>.</p>

<p>Ungolfed:</p>

<pre class="lang-julia prettyprint-override"><code>function f(n::Integer)
    # Get the binary representation of n as a string
    b = bin(n)

    # Construct an array consisting of binary strings with
    # a one prepended, appended, and each insertion
    x = [b[[1:i; 1; i+1:end]] for i = 1:endof(b)]

    # Count the number of primes
    c = sum(i -&gt; isprime(parse(Int, i, 2)), unique(x))

    return c
end
</code></pre>

<p>Saved 17 bytes thanks to Glen O!</p>
</div>
<div id="pu14" class="pu"><h1>Julia, <s>55</s> 52 bytes</h1>

<pre><code>n-&gt;sum(isprime,∪(2n+(k=2.^(0:endof(bin(n))))-n%k))
</code></pre>

<p><code>k=2.^(0:endof(bin(n)))</code> generates an array containing the powers of 2 from 1 to the highest power less than <code>n</code>. <code>2n+k-n%k</code> then uses array operations to determine all of the possible "+1 numbers". <code>∪</code> (equivalent to <code>union</code>, which does the same thing as <code>unique</code> in this situation) removes the repeat values. Then <code>sum(isprime,)</code> counts the number of primes on the list.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/vihanb/TeaScript" rel="nofollow">TeaScript</a>, 22 <a href="https://en.m.wikipedia.org/wiki/ISO/IEC_8859" rel="nofollow">bytes</a></h1>

<pre><code>x÷¿®x÷E(i¬,1)¤©d¡F(¥)n
</code></pre>

<p>TeaScript is starting to look like APL... The special characters are converted to longer, commonly repeated sequences</p>

<p><a href="http://vihanserver.tk/p/TeaScript/" rel="nofollow">Online interpreter</a> be sure to check "Inputs are numbers."</p>

<h3>Explanation &amp;&amp; Ungolfed</h3>

<pre><code>xT(2)s``m(#P(xT(2)E(i+1,1),2))d()F($P)n

xT(2)      // Take input, convert to binary
s``m(#     // Loop over input

  P(         // Convert to decimal...
     xT(2)     // Input to binary
     E(i+1,1)  // Inset 1 into (above) at current index in loop
  ,2)    

)d()       // Remove duplicates
F($P)      // Filter items that aren't prime
n          // Grab length.
</code></pre>
</div>
<div id="pu16" class="pu"><h1>CJam, 58 bytes</h1>

<pre><code>L{:TQ\=A+Q\+TWe\-2&lt;s:~2b}q~2b0+:Q,(%{:BLe=!{B+:L}&amp;}%~:mp:+
</code></pre>

<p>This took me a day, and this was my 4th iteration.</p>
</div>
<div id="pu17" class="pu"><h1>Mathematica, 87 bytes</h1>

<pre><code>Union[#~FromDigits~2&amp;/@StringReplaceList[#~IntegerString~2,a_:&gt;a&lt;&gt;"1"]]~Count~_?PrimeQ&amp;
</code></pre>
</div>
<div id="pu18" class="pu"><h2>PHP, 145 bytes</h2>



<p>I've added a newline for readability:</p>

<pre class="lang-php prettyprint-override"><code>function($n){for($b=base_convert;++$i&lt;=strlen($s=$b($n,10,2));$r+=!$s[$i]&amp;$k&lt;=$j)
for($j=1;($k=$b(substr_replace($s,1,$i,0),2,10))%++$j;);echo$r;}
</code></pre>
</div>
<div id="pu19" class="pu"><h2><a href="https://github.com/elendiastarman/Minkolang" rel="nofollow">Minkolang 0.11</a>, <s>54</s> 52 bytes</h2>

<pre><code>n1(2*d0c`,)(0c1c$%$r2*1c*1c++1g2:d1G)rxSI1-[0g2M+]N.
</code></pre>

<h3>Explanation</h3>

<pre><code>n             Get integer from input (let's call it n)
1(       )    Get the smallest power of 2 (say, k) greater than input (starting with 1)
  2*d         Multiply by 2 and duplicate
     0c`,     Copy n and see if it's greater (while loop breaks on 0)

(0c1c$%                       Copy n, copy k, and divmod (pushes n//k, n%k)
       $r                     Swap top two elements
         2*                   Multiply by 2
           1c*                Copy k and multiply
              1c+             Copy k and add
                 +            Add
                  1g2:        Get k and divide by 2
                      d1G)    Duplicate and put one copy back in its former place

rx            Reverse and dump (dumps n and top of stack is now 0)
S             Remove duplicates
I1-[     ]    Check each element for primality
    0g        Get potential prime from bottom of stack
      2M      1 if prime, 0 otherwise
        +     Add (this is why I didn't dump the left-over 0 earlier)
N.            Output as integer and stop.
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/63175/">63175</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




