<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::QNNN</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
  <!-- TXXX -->
<tr d-ix="0"><td>007</td><td>Thunno 2</td><td>230720T095911Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/263062#263062">The Thon</a></td></tr>
<tr d-ix="1"><td>007</td><td>Pyth</td><td>170717T155652Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132906#132906">Mr. Xcod</a></td></tr>
<tr d-ix="2"><td>031</td><td>SmileBASIC</td><td>180313T185331Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/158030#158030">12Me21</a></td></tr>
<tr d-ix="3"><td>019</td><td>Cubix</td><td>171119T124641Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/148560#148560">FlipTack</a></td></tr>
<tr d-ix="4"><td>026</td><td>Perl 5</td><td>171119T180625Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/148584#148584">Xcali</a></td></tr>
<tr d-ix="5"><td>010</td><td>ngn/apl</td><td>171119T173828Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/148580#148580">ngn</a></td></tr>
<tr d-ix="6"><td>042</td><td>Lean Mean Bean Machine</td><td>170717T162743Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132920#132920">Mayube</a></td></tr>
<tr d-ix="7"><td>025</td><td>TIBasic</td><td>170719T014829Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133205#133205">Timtech</a></td></tr>
<tr d-ix="8"><td>019</td><td>><></td><td>170718T021437Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133014#133014">Not a tr</a></td></tr>
<tr d-ix="9"><td>052</td><td>Bash</td><td>170719T121505Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133313#133313">Olivier </a></td></tr>
<tr d-ix="10"><td>014</td><td>APL</td><td>170717T151740Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132883#132883">Uriel</a></td></tr>
<tr d-ix="11"><td>016</td><td>J</td><td>170718T213658Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133144#133144">Jonah</a></td></tr>
<tr d-ix="12"><td>044</td><td>Java 8</td><td>170717T181705Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132952#132952">Socratic</a></td></tr>
<tr d-ix="13"><td>017</td><td>braingasm</td><td>170718T183944Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133101#133101">daniero</a></td></tr>
<tr d-ix="14"><td>064</td><td>PowerShell</td><td>170718T182500Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133097#133097">Jeff Fre</a></td></tr>
<tr d-ix="15"><td>2530</td><td>JavaScript ES6</td><td>170718T105444Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133052#133052">Arnauld</a></td></tr>
<tr d-ix="16"><td>025</td><td>Mathematica</td><td>170717T154757Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132904#132904">ZaMoC</a></td></tr>
<tr d-ix="17"><td>3023</td><td>Javascript</td><td>170718T052355Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133029#133029">Alan Rat</a></td></tr>
<tr d-ix="18"><td>038</td><td>Java OpenJDK 8</td><td>170717T195904Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132968#132968">Olivier </a></td></tr>
<tr d-ix="19"><td>007</td><td>Pyth</td><td>170718T103408Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133049#133049">isaacg</a></td></tr>
<tr d-ix="20"><td>005</td><td>05AB1E</td><td>170718T092945Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133046#133046">kalsower</a></td></tr>
<tr d-ix="21"><td>028</td><td>Octave</td><td>170718T060706Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133030#133030">rahnema1</a></td></tr>
<tr d-ix="22"><td>198</td><td>Common Lisp</td><td>170718T031924Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/133018#133018">Cheldon</a></td></tr>
<tr d-ix="23"><td>032</td><td>Applesoft</td><td>170717T225009Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132992#132992">Alan Rat</a></td></tr>
<tr d-ix="24"><td>035</td><td>Javascript</td><td>170717T233957Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132997#132997">asgallan</a></td></tr>
<tr d-ix="25"><td>032</td><td>Ruby</td><td>170717T212950Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132980#132980">daniero</a></td></tr>
<tr d-ix="26"><td>009</td><td>05AB1E</td><td>170717T205031Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132978#132978">Magic Oc</a></td></tr>
<tr d-ix="27"><td>055</td><td>C# .NET Core</td><td>170717T184031Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132958#132958">Charlie</a></td></tr>
<tr d-ix="28"><td>027</td><td>Ruby</td><td>170717T182155Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132953#132953">alexande</a></td></tr>
<tr d-ix="29"><td>049</td><td>C gcc</td><td>170717T155002Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132905#132905">cleblanc</a></td></tr>
<tr d-ix="30"><td>060</td><td>Chip</td><td>170717T194257Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132966#132966">Phlarx</a></td></tr>
<tr d-ix="31"><td>011</td><td>Charcoal</td><td>170717T190820Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132964#132964">Neil</a></td></tr>
<tr d-ix="32"><td>011</td><td>CJam</td><td>170717T171909Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132938#132938">geokavel</a></td></tr>
<tr d-ix="33"><td>006</td><td>05AB1E</td><td>170717T163127Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132924#132924">Emigna</a></td></tr>
<tr d-ix="34"><td>056</td><td>><></td><td>170717T162332Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132918#132918">KSmarts</a></td></tr>
<tr d-ix="35"><td>028</td><td>PHP</td><td>170717T161149Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132913#132913">Titus</a></td></tr>
<tr d-ix="36"><td>027</td><td>QBIC</td><td>170717T161347Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132914#132914">steenber</a></td></tr>
<tr d-ix="37"><td>031</td><td>R</td><td>170717T154634Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132903#132903">Giuseppe</a></td></tr>
<tr d-ix="38"><td>013</td><td>q/kdb+</td><td>170717T155844Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132908#132908">mkst</a></td></tr>
<tr d-ix="39"><td>010</td><td>MATL</td><td>170717T153647Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132899#132899">Luis Men</a></td></tr>
<tr d-ix="40"><td>051</td><td>Python 3</td><td>170717T152551Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132892#132892">Mr. Xcod</a></td></tr>
<tr d-ix="41"><td>106</td><td>C</td><td>170717T153106Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132897#132897">caylee</a></td></tr>
<tr d-ix="42"><td>050</td><td>Python</td><td>170717T153034Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132896#132896">Jonathan</a></td></tr>
<tr d-ix="43"><td>006</td><td>Jelly</td><td>170717T152014Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132885#132885">Jonathan</a></td></tr>
<tr d-ix="44"><td>008</td><td>05AB1E</td><td>170717T151607Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132881#132881">Riley</a></td></tr>
<tr d-ix="45"><td>008</td><td>Jelly</td><td>170717T151602Z</td><td><a href="https://codegolf.stackexchange.com/questions/132877/randomly-select-a-character-plinko-style/132880#132880">Leaky Nu</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a>, 7 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>«¦/d×Jɼ
</code></pre>
<p><a href="https://Not-Thonnu.github.io/run#aGVhZGVyPSZjb2RlPSVDMiVBQiVDMiVBNiUyRmQlQzMlOTdKJUM5JUJDJmZvb3Rlcj0maW5wdXQ9JTIyQSUyMiUyQyUyMkIlMjIlMkMlMjJDJTIyJTJDJTIyRCUyMiZmbGFncz0=" rel="nofollow noreferrer">Try it online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>«¦/d×Jɼ  # Implicit input
«¦/      # Push 1322
   d     # Cast to digits
    ×    # Multiply elementwise
     J   # Join into a string
      ɼ  # Choose a random character
         # Implicit output
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, <s>8</s> 7 bytes</h1>
<pre><code>O+@Q1t+
</code></pre>
<p>Uses the exact same algorithm as in my Python answer.</p>
<p><a href="https://pyth.herokuapp.com/?code=O%2B%40Q1t%2B&amp;input=%22ABCD%22&amp;test_suite=1&amp;test_suite_input=%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22&amp;debug=0" rel="nofollow noreferrer">Try it here!</a></p>
<h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, <s>10</s> 8 bytes</h1>
<pre><code>O+&lt;Q2*2t
</code></pre>
<p>Uses the exact same algorithm as is Jonathan Allan's Python answer.</p>
<p><a href="https://pyth.herokuapp.com/?code=O%2B%3CQ2%2a2t&amp;input=%22ABCD%22&amp;test_suite=1&amp;test_suite_input=%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22%0A%22ABCD%22&amp;debug=0" rel="nofollow noreferrer">Try it here!</a></p>
<hr />
<h3>Explanation</h3>
<ul>
<li><p><code>O</code> - Takes a random element of the String made by appending (with <code>+</code>):</p>
<ul>
<li><code>&lt;Q2</code> - The first two characters of the String.</li>
<li><code>*2t</code> Double the full String (<code>*2</code>) except for the first character (<code>t</code>).</li>
</ul>
</li>
</ul>
<p>Applying this algorithm for <code>ABCD</code>:</p>
<ul>
<li><code>&lt;Q2</code> takes <code>AB</code>.</li>
<li><code>*2t</code> takes <code>BCD</code> and doubles it: <code>BCDBCD</code>.</li>
<li><code>+</code> joins the two Strings: <code>ABBCDBCD</code>.</li>
<li><code>O</code> takes a random character.</li>
</ul>
<hr />
<p>-2 thanks to Leaky Nun (second solution)</p>
<p>-1 thanks to mnemonic (first solution)</p>
</div>
<div id="pu2" class="pu"><h1>SmileBASIC, 31 bytes</h1>
<pre><code>LINPUT S$N=RND(8)?S$[N+!N*2&gt;&gt;1]
</code></pre>
<p>Pick a number from 0 to 7, add 2 if it's 0, then divide by 2.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/ETHproductions/cubix" rel="nofollow noreferrer">Cubix</a>, <s>39</s> <s>24</s> <s>22</s> <s>21</s> 19 bytes</h1>

<pre><code>.&lt;.^iD&gt;D|@oioi.\i;U
</code></pre>

<p><a href="https://ethproductions.github.io/cubix/?code=LjwuXmlEPkR8QG9pb2kuXGk7VQ==&amp;input=QUJDRA==&amp;speed=20" rel="nofollow noreferrer" title="Cubix – Try It Online"><strong>View in the online interpreter!</strong></a></p>

<p>This maps out to the following cube net:</p>

<pre><code>    . &lt;
    . ^
i D &gt; D | @ o i
o i . \ i ; U .
    . .
    . .
</code></pre>

<h1>Random Distribution Implementation Explanation</h1>

<p>Cubix is a language in which an instruction pointer travels around the faces of a cube, executing the commands it encounters. The only form of randomness is the command <code>D</code>, which sends the IP in a random direction: an equal chance of <code>1/4</code> each way.</p>

<p>However, we can use this to generate the correct weighted probabilites: by using <code>D</code> twice. The first <code>D</code> has a <code>1/4</code> of heading to a second <code>D</code>. This second <code>D</code>, however, has two directions blocked off with arrows (<code>&gt; D &lt;</code>) which send the instruction pointer back to the <code>D</code> to choose another direction. This means there are only two possible directions from there, each with a <code>1/8</code> overall chance of happening. This can be used to generate the correct character, as shown in the diagram below:</p>

<p><a href="https://i.stack.imgur.com/pLhpa.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/pLhpa.png" alt="Image showing probabilities of each direction"></a></p>

<p>(Note that, in the actual code, the arrow on the right is replaced with a mirror, <code>|</code>)</p>

<h1>Code Explanation</h1>

<pre><code>        . &lt;
        . ^
IP&gt; i D &gt; D | @ o i
    o i . \ i ; U .
        . .
        . .
</code></pre>

<p>The instruction pointer starts on the right, at the character <code>i</code>, facing right. It executes this <code>i</code>, taking the first character as input, and then moves onto the <code>D</code>, beginning the random process shown above.</p>

<ul>
<li><p><strong>Char A:</strong> In the case that the first <code>D</code> sends us east, and the second south, we need to print character A. This is already on stack from the first <code>i</code>. The following is executed:</p>

<ul>
<li><code>\</code> - Reflect the IP so it heads east</li>
<li><code>i;</code> - Take an input, then pop it again (no-op)</li>
<li><code>U</code> - Perform a U-turn, turning the IP left twice</li>
<li><code>o</code> - Output the TOS, character A</li>
<li><code>@</code> - Terminate the program</li>
</ul></li>
<li><p><strong>Char B:</strong> If either the first or second <code>D</code> head north, we need to generate character B, which will be the next input. Both paths execute the following commands:</p>

<ul>
<li><code>^</code> - Head north</li>
<li><code>&lt;</code> - Head west, wrapping round to...</li>
<li><code>i</code> - Take another input, character B</li>
<li><code>o</code> - Output the TOS, character B</li>
<li><code>;</code> - Pop the TOS</li>
<li><code>@</code> - Terminate the program</li>
</ul></li>
<li><p><strong>Char C:</strong> If the first <code>D</code> sends us west, the following is executed:</p>

<ul>
<li><code>i</code> - Take another input, character B</li>
<li><code>i</code> - Take another input, character C</li>
<li><code>o</code> - Output TOS, character C</li>
<li><code>@</code> - Terminate the program</li>
</ul></li>
<li><p><strong>Char D:</strong> If the first <code>D</code> sends us south, the following is executed:</p>

<ul>
<li><code>i</code> - Take another input, character B</li>
<li><code>..</code> - Two no-ops</li>
<li><code>i</code> - Take another input, character C</li>
<li><code>|</code> - This mirror reflects east-west, but the IP is heading north, so we pass through it.</li>
<li><code>^</code> - This joins up with the path taken for character B. However, because we have taken two inputs already, the fourth character (character D) will end up being printed.</li>
</ul></li>
</ul>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 26 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>say((A..D,B..D,B)[rand 8])
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/784sVJDw1FPz0XHCUxoRhcl5qUoWMRq/v//L7@gJDM/r/i/rq@pnoGhAQA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1>ngn/apl, 10 bytes</h1>
<p><a href="https://ngn.github.io/apl/web/index.html#code=%u2395a%5B%u2308/%3F2%204%5D" rel="nofollow noreferrer"><pre>⎕a[⌈/?2 4]</pre></a></p>
<p><code>?2 4</code> chooses randomly a pair of numbers - the first among 0 1 and the second among 0 1 2 3</p>
<p><code>⌈/</code> is &quot;max reduce&quot; - find the larger number</p>
<p><code>⎕a</code> is the uppercase alphabet</p>
<p><code>[ ]</code> indexing</p>
<hr />
<p>note the chart for max(a,b) when a∊{0,1} and b∊{0,1,2,3}:</p>
<pre><code>    ┏━━━┯━━━┯━━━┯━━━┓
    ┃b=0│b=1│b=2│b=3┃
┏━━━╋━━━┿━━━┿━━━┿━━━┫
┃a=0┃ 0 │ 1 │ 2 │ 3 ┃
┠───╂───┼───┼───┼───┨
┃a=1┃ 1 │ 1 │ 2 │ 3 ┃
┗━━━┻━━━┷━━━┷━━━┷━━━┛
</code></pre>
<p>if a and b are chosen randomly and independently, we can substitute 0123=ABCD to get the desired probability distribution</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/gunnerwolf/lmbm" rel="noreferrer">Lean Mean Bean Machine</a>, <s>55</s> <s>43</s> 42 bytes</h1>
<p><em>-13 bytes thanks to Alex Varga</em></p>
<pre><code>  O
  i
  ^
 ^ ^
\ ^ ^
 i / U
 ii
 ^
i U
U
</code></pre>
<p>Hope you guys don't mind me answering my own question after only 2 hours, but I highly doubt anybody else was planning on posting an answer in LMBM.</p>
<p>This literally just reflects the Plinko layout shown in the OP, flipped horizontally to cut down on unnecessary whitespace.</p>
</div>
<div id="pu7" class="pu"><h1>TI-Basic, 25 bytes</h1>
<pre><code>sub(Ans,randInt(1,8),1
If int(2rand(Ans=&quot;A
&quot;B
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow noreferrer">>&lt;></a>, <s>25</s> <s>22</s> 19 bytes</h1>

<pre><code>i_ixio;o
ox&lt;/;
;\$o
</code></pre>

<p><a href="https://tio.run/##S8sszvj/PzM@syIz3zqfK7/CRt@ayzpGJf//fzfPYA8A" rel="nofollow noreferrer" title="&gt;&lt;&gt; – Try It Online">Try it online!</a>, or watch it at the <a href="https://fishlanguage.com/playground" rel="nofollow noreferrer">fish playground</a>!</p>

<p>A brief overview of >&lt;>: it's a 2D language with a fish that swims through the code, executing instructions as it goes. If it reaches the edge of the code, it wraps to the other side. The fish starts in the top left corner, moving right. Randomness is tricky in >&lt;>: the only random instruction is <code>x</code>, which sets the fish's direction randomly out of up, down, left and right (with equal probability).</p>

<p>At the start of the program, the fish reads in two characters of input with <code>i_i</code> (each <code>i</code> reads a character from STDIN to the stack, and <code>_</code> is a horizontal mirror, which the fish ignores now). It then reaches an <code>x</code>.</p>

<p>If the <code>x</code> sends the fish rightwards, it reads in one more character (the third), prints it with <code>o</code> and halts with <code>;</code>. The left direction is similar: the fish reads two more characters (so we're up to the fourth), wraps around to the right, prints the fourth character and halts. If the fish swims up, it wraps and prints the second character, before being reflected right by <code>/</code> and halting. If it swims down, it gets reflected left by the <code>/</code> and hits another <code>x</code>.</p>

<p>This time, two directions just send the fish back to the <code>x</code> (right with an arrow, <code>&lt;</code>, and up with a mirror, <code>_</code>). The fish therefore has 1/2 chance of escaping this <code>x</code> in each of the other two directions. Leftwards prints the top character on the stack, which is the second one, but downwards first swaps the two elements on the stack with <code>$</code>, so this direction prints the first character.</p>

<p>In summary, the third and fourth characters are printed with probability 1/4 each; the first character has probability 1/2 x 1/4 = 1/8; and the second character has probability 1/4 + 1/2 x 1/4 = 3/8.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.gnu.org/software/bash/" rel="nofollow noreferrer">Bash</a>, 52 bytes</h1>

<pre><code>f(){ c=$1$2$2$2$3$3$4$4;echo ${c:$(($RANDOM%8)):1};}
</code></pre>

<p>Usage exemple:</p>

<pre><code>$ f a b c d
b
$ f a b c d
d
$ f a b c d
b
$ f a b c d
a
</code></pre>
</div>
<div id="pu10" class="pu"><h1>APL, 14 bytes</h1>

<pre><code>(?8)⊃1 3 2 2\⊢
</code></pre>

<p>Input as a string.</p>

<p><strong>How?</strong></p>

<p><code>1 3 2 2\⊢</code> - repeat each letter x times (<code>'ABCD'</code> → <code>'ABBBCCDD'</code>)</p>

<p><code>⊃</code> - take the element at index ..</p>

<p><code>(?8)</code> - random 1-8</p>
</div>
<div id="pu11" class="pu"><h1>J, 16 bytes</h1>

<pre><code>(1?8:){1 3 2 2&amp;#
</code></pre>

<h2>how?</h2>

<ul>
<li><code>1 3 2 2&amp;#</code> - copy the input elementwise, ie, 1 copy of A, 3 copies of B, etc, yielding the list <code>ABBBCCDD</code> </li>
<li><code>1?8:</code> - choose 1 element at random from the list <code>0 1 2 3 4 5 6 7</code></li>
<li><code>{</code> - "From", ie, choose from <code>ABBBCCDD</code> the random index generated by <code>1?8:</code></li>
</ul>

<p><a href="https://tio.run/##y/r/P81WT0HD0N7CSrNaw1DBWMFIwUhNWZMrMw8oru7o5OyizpWanJGvkKaQmcfl56SnkJKvkKiQVJqXnKGQn6ZQkpGaq6enB1WjZKhgZ2igbJOZ9/8/AA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1>Java 8, <s>53</s> 44 bytes</h1>
<pre><code>s-&gt;s[-~Math.abs((int)(Math.random()*8)-6)/2]
</code></pre>
<p>This is a <code>Function&lt;char[], Character&gt;</code>.</p>
<p><a href="https://tio.run/##fZHRboIwFIbveYoTkwUqUtGLZQnOZHPZnVdeErJUQKmDlrTFxRj26uxUcc5lWVN6Ss/X8/9td2zPAlnnYpe9d7yqpTKwwzXaGF7STSNSw6Wgr/0kcpy6WZc8hbRkWsOScQFHxwFsfUIbZjDsJc@gwrS3MoqLbZwAU1tNkIa@XYrO0oKpOBnBAiNLTa7mYJWn8AidDuY6Dj6XzBSUrbXncWGId/pVTGSy8sjwgQT3ZDxNuui7NlKomMpGGKxyDEfQ9/bKnGXRsLKI@@SOwH22w8IOL257Uw5KXiE3eQvD0H7X5EYqsLaAYz6MMMwsjBPf/3neiyZY44iezkhZXZcHD02Q6Ja03uMTGgCaS3z/CrT/imMxWuZia4o/PawO2uQVlY2hNT6NKYWVj3kCPgzgg2l0KXUugK2RwSUfvLMbRMbgZRJfOienCxnCJAyJ3XgHcgOmyMHwKh@Q315bx2md7gs" rel="noreferrer">Try it online!</a> (this test program runs the above function 1,000,000 times and outputs the experimental probabilities of choosing <code>A</code>, <code>B</code>, <code>C</code>, and <code>D</code>).</p>
<p>The general idea here is to find some way to map <code>0-7</code> to <code>0-3</code>, such that <code>0</code> appears <code>1/8</code> times, <code>1</code> appears <code>3/8</code> times, <code>2</code> appears <code>2/8</code> times, and <code>3</code> appears <code>2/8</code> times. <code>round(abs(k - 6) / 2.0))</code> works for this, where <code>k</code> is a random integer in the range <code>[0,8)</code>. This results in the following mapping:</p>
<pre><code>k -&gt; k - 6 -&gt; abs(k-6) -&gt; abs(k-6)/2 -&gt; round(abs(k-6)/2)

0 -&gt; -6 -&gt; 6 -&gt; 3   -&gt; 3
1 -&gt; -5 -&gt; 5 -&gt; 2.5 -&gt; 3
2 -&gt; -4 -&gt; 4 -&gt; 2   -&gt; 2
3 -&gt; -3 -&gt; 3 -&gt; 1.5 -&gt; 2
4 -&gt; -2 -&gt; 2 -&gt; 1   -&gt; 1
5 -&gt; -1 -&gt; 1 -&gt; 0.5 -&gt; 1
6 -&gt; 0  -&gt; 0 -&gt; 0   -&gt; 0 
7 -&gt; 1  -&gt; 1 -&gt; 0.5 -&gt; 1
</code></pre>
<p>Which, as you can see, results in the indices <code>0 111 22 33</code>, which produces the desired probabilities of <code>1/8</code>, <code>3/8</code>, <code>2/8</code> and <code>2/8</code>.</p>
<p>But wait! How in the world does <code>-~Math.abs(k-6)/2</code> achieve the same result (again, where <code>k</code> is a random integer in the range <code>[0,8]</code>)? It's pretty simple actually... <code>(x+1)/2</code> (integer division) is the same thing as <code>round(x/2)</code>, and <code>x + 1</code> is the same thing as <code>-~x</code>. Although <code>x+1</code> and <code>-~x</code> are the same length, in the above function it is better to use <code>-~x</code> since it <code>-~</code> takes precedence and thus does not require parenthesis.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/daniero/braingasm" rel="nofollow noreferrer">braingasm</a>, 17 bytes</h1>

<pre><code>4[,&gt;]&lt;4r&lt;#z[2r&gt;].
</code></pre>

<p>Works like this:</p>

<pre><code>4[,&gt;]&lt;             Input 4 bytes from stdin and stay in cell 3 (0-indexed).
        &lt;          Move left ...
      4r           ... randomly between 0 (inclusive) and 4 (exclusive) times.
         #z[   ]   If we're at cell 0,
              &gt;      move right ...
            2r       ... with 50% probability.
                .  Print the byte value of the cell.
</code></pre>

<p>Given the input <code>ABCD</code>, each character has 1/4 = 2/8 chance of being printed because of  <code>4r</code>, but if we selected <code>A</code>, we have 1/2 chance of printing <code>B</code> instead, giving <code>A</code> (1/4)/2 = 1/8 chance and <code>B</code> 1/4 + 1/8 = 3/8 chance.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 64 bytes</h1>



<pre class="lang-powershell prettyprint-override"><code>$args|%{($_-replace '(^.)(.)',"`$1`$2`$2`$2$'")[(Get-Random)%8]}
</code></pre>

<p><a href="https://tio.run/##K8gvTy0qzkjNyfn/XyWxKL24RrVaQyVetyi1ICcxOVVBXSNOT1NDT1NdRylBxTBBxQiCVNSVNKM13FNLdIMS81LyczVVLWJr////r56YlJyiDgA" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>

<p>It replaces the string <code>abcd</code> with <code>abbbcdcd</code> using <code>regex</code> witchcraft and then randomizes which of the eight characters it chooses.  The regex is expensive; it requires a backtick per grouping, so there may be a better method using recursive lookups.</p>

<p>Here's a quick explanation of the regex:</p>

<p>For input <code>abcd</code> the full match is <code>ab</code>, grouping <code>$1</code> is 'a', grouping <code>$2</code> is 'b', and <code>$'</code> (note quote, not backtick) returns everything after the full match.  Then, the pattern <code>$1$2$2$2$'</code> is substituted for the full match:  <code>abcd</code> goes to  <code>$1$2$2$2$'</code> + <code>cd</code> = <code>abbbcdcd</code></p>
</div>
<div id="pu15" class="pu"><h2>JavaScript (ES6), 25 bytes / 30 bytes</h2>

<p>In both following versions, we're looking for two positive integers <strong><em>m</em></strong> and <strong><em>n</em></strong> such that <strong><em>n MOD (m + i) MOD 4</em></strong> gives us results in <strong>[<em>0...3</em>]</strong> at the expected frequencies for <strong><em>i</em></strong> in <strong>[<em>0...7</em>]</strong>.</p>

<hr>

<h3>Version 1, 25 bytes</h3>

<p>If a time-dependent formula is allowed, we can just do:</p>

<pre class="lang-js prettyprint-override"><code>s=&gt;s[11%(new Date%8+2)%4]
</code></pre>

<p>This one is using <strong><em>n = 11</em></strong> (smallest possible value of <strong><em>n</em></strong>) and <strong><em>m = 2</em></strong>.</p>

<pre><code>i | 2 + i | 11 % (2 + i) | 11 % (2 + i) % 4
--+-------+--------------+-----------------
0 |     2 |            1 |                1
1 |     3 |            2 |                2
2 |     4 |            3 |                3
3 |     5 |            1 |                1
4 |     6 |            5 |                1
5 |     7 |            4 |                0
6 |     8 |            3 |                3
7 |     9 |            2 |                2
</code></pre>

<h3>Demo</h3>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>let f =

s=&gt;s[11%(new Date%8+2)%4]

for(stat = {A:0, B:0, C:0, D:0}, i = 0; i &lt; 80000; i++) {
  stat[f("ABCD")]++;
}
console.log(stat);</code></pre>
</div>
</div>
</p>

<hr>

<h3>Version 2, 30 bytes</h3>

<p>With the native JavaScript PRNG -- which generates a floating-point number in <strong>[<em>0...1</em>)</strong> -- we'd rather do:</p>

<pre class="lang-js prettyprint-override"><code>s=&gt;s[21%(Math.random()*8|8)%4]
</code></pre>

<p>Here, we use <strong><em>n = 21</em></strong> and <strong><em>m = 8</em></strong> because it allows us to do the addition and isolate the integer part at the same time with <code>Math.random()*8|8</code>.</p>

<pre><code>i | 8 + i | 21 % (8 + i) | 21 % (8 + i) % 4
--+-------+--------------+-----------------
0 |     8 |            5 |                1
1 |     9 |            3 |                3
2 |    10 |            1 |                1
3 |    11 |           10 |                2
4 |    12 |            9 |                1
5 |    13 |            8 |                0
6 |    14 |            7 |                3
7 |    15 |            6 |                2
</code></pre>

<h3>Demo</h3>

<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>let f =

s=&gt;s[21%(Math.random()*8|8)%4]

for(stat = {A:0, B:0, C:0, D:0}, i = 0; i &lt; 80000; i++) {
  stat[f("ABCD")]++;
}
console.log(stat);</code></pre>
</div>
</div>
</p>
</div>
<div id="pu16" class="pu"><h1>Mathematica, 25 bytes</h1>
<pre><code>RandomChoice@{##,##2,#2}&amp;
</code></pre>
<p><strong>input</strong></p>
<blockquote>
<p>[&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;]</p>
</blockquote>
<p><em>-23 bytes from @MarkS!</em></p>
</div>
<div id="pu17" class="pu"><h1>Javascript, <s>31</s> 30 bytes / 23 bytes</h1>

<p>Seeing asgallant's earlier Javascript answer got me to thinking about JS. As he said:</p>

<blockquote>
  <p>Takes a string <code>ABCD</code> as input, outputs <code>A</code> 1/8th of the time, <code>B</code>
  3/8ths of the time, <code>C</code> 1/4th of the time, and <code>D</code> 1/4th of the time.</p>
</blockquote>

<p>Mine is:</p>

<pre><code>x=&gt;(x+x)[Math.random()*8&amp;7||1]
</code></pre>

<p><strong>Explanation:</strong></p>

<pre><code>x=&gt;(x+x)[                 // return character at index of doubled string ('ABCDABCD')
         Math.random()*8  // select a random number from [0, 8]
         &amp;7               // bitwise-and to force to integer (0 to 7)
         ||1              // use it except if 0, then use 1 instead
        ]
</code></pre>

<p>From <code>Math.random()*8&amp;7</code> it breaks down as follows:</p>

<pre><code>A from 4      = 12.5% (1/8)
B from 0,1,5  = 37.5% (3/8)
C from 2,6    = 25%   (1/4)
D from 3,7    = 25%   (1/4)
</code></pre>

<h2>Version 2, 23 bytes</h2>

<p>But then thanks to Arnauld, who posted after me, when he said:</p>

<blockquote>
  <p>If a time-dependent formula is allowed, we can just do:</p>
</blockquote>

<p>which, if it is indeed allowed, led me to:</p>

<pre><code>x=&gt;(x+x)[new Date%8||1]
</code></pre>

<p>in which <code>new Date%8</code> uses the same break-down table as above.</p>

<p>And <code>%8</code> could also be <code>&amp;7</code>; take your pick. Thanks again, Arnauld.</p>
</div>
<div id="pu18" class="pu"><h1><a href="http://openjdk.java.net/" rel="nofollow noreferrer">Java (OpenJDK 8)</a>, <s>40</s> 38 bytes</h1>



<pre class="lang-java prettyprint-override"><code>s-&gt;s[5551&gt;&gt;2*(int)(Math.random()*8)&amp;3]
</code></pre>

<p><a href="https://tio.run/##VY9db4IwFIbv@RUnJMxWhDEniRmDhLl455WXhCwdUK2TQtrqYhZ@Ozui7qNJcz56nvc93bEj85q2krvyo28P73tRQLFnWsOKCQlfFoCQplKcFRUshxqg2DIFnJxDljMaYbPDe8W1YQbDsREl1ChC1kYJuclyYGqj6VVjCRxi6LWX6CwMw4ckmY4JWlGyYmbrKybLpiZ0PKd3j3kPw4kGEodQq0BaVp9DNcujn73wScd2@rJ4tX3TLLCTKsVOhF5GeKPgbAMiDiLxPA@CtyDAzHVvi6FMxn1ONPVG6Sh33QvY3fA/9Ow/tz5pU9V@czB@iz82nNhO8QSOP@WO40h7AsJFyQkaiPwerYOS/op3Vmf13w" rel="nofollow noreferrer" title="Java (OpenJDK 8) – Try It Online">Try it online!</a></p>

<p><code>5551</code> in base 10 is <code>01112233</code> in base 4. So let's randomly pick one of those base-4 digits using bit shift and selection, then pick the n-th character from the originating <code>char[]</code>.</p>
</div>
<div id="pu19" class="pu"><h1>Pyth, 7 bytes</h1>

<pre><code>@z|O8 1
</code></pre>

<p><a href="https://pyth.herokuapp.com/?code=%40z%7CO8+1&amp;input=%0A&amp;test_suite=1&amp;test_suite_input=ABCD%0AABCD%0AABCD%0AABCD&amp;debug=0" rel="nofollow noreferrer">Test suite</a></p>

<p><code>O8</code> generates a random number from 0 to 7. <code>| ... 1</code> applies a logical or with 1, converting the 0 to a 1 and leaving everything else the same. The number at this stage is 1 2/8th of the time, and 2, 3, 4, 5, 6, 7 or 8 1/8 of the time.</p>

<p><code>@z</code> indexes into the input string at that position. The indexing is performed modulo the length of the string, so 4 indexes at position 0, 5 at position 1, and so on.</p>

<p>The probabilities are:</p>

<ul>
<li><p>Position 0: Random number 4. 1/8 of the time.</p></li>
<li><p>Position 1: Random number 0, 1 or 5. 3/8 of the time.</p></li>
<li><p>Position 2: Random number 2 or 6. 2/8 of the time.</p></li>
<li><p>Position 3: Random number 3 or 7. 2/8 of the time.</p></li>
</ul>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 5 bytes</h1>

<pre><code>¦Ćì.R
</code></pre>

<p><a href="https://tio.run/##MzBNTDJM/f//0LIjbYfX6AX9/@/o5OwCAA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<h3>Explanation</h3>

<pre><code>¦Ćì.R   Argument s                      "ABCD"
¦       Push s[1:]                      "BCD"
 Ć      Enclose: Pop a, Push a + a[0]   "BCDB"
  ì     Pop a, Concatenate a and s      "ABCDBCDB"
   .R   Random pick
</code></pre>
</div>
<div id="pu21" class="pu"><h1>Octave, <s>30</s> 28 bytes</h1>

<pre class="lang-matlab prettyprint-override"><code>@(S)S([1:4 2 2:4])(randi(8))
</code></pre>
<p><a href="https://tio.run/##y08uSSxL/f/fQSNYM1gj2tDKRMFIwcjKJFZToygxLyVTw0JT839iXrGGunewi6u65n8A" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
<p>Previous answer:</p>
<pre class="lang-matlab prettyprint-override"><code>@(S)S('ABBBCCDD'(randi(8))-64)
</code></pre>
<p><a href="https://tio.run/##y08uSSxL/f/fQSNYM1hD3dHJycnZ2cVFXaMoMS8lU8NCU1PXzETzf2JesYa6d7CLq7rmfwA" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>
<p>Input is taken as a string of 4 characters.</p>
<p>Explanation:</p>
<p>Instead of <code>[1 2 2 2 3 3 4 4 ]</code> we can write <code>'ABBBCCDD'-64</code> and randomly select one of indexes and use the index to extract the desired character from the string.</p>
</div>
<div id="pu22" class="pu"><h1><a href="http://www.clisp.org/" rel="nofollow noreferrer">Common Lisp</a>, 198 bytes</h1>



<pre class="lang-lisp prettyprint-override"><code>(setf *random-state*(make-random-state t))(defun f(L)(setf n(random 8))(cond((&lt; n 1)(char L 0))((and(&gt;= n 1)(&lt; n 4))(char L 1))((and(&gt;= n 4)(&lt; n 6))(char L 2))((&gt;= n 6)(char L 3))))(princ(f "ABCD"))
</code></pre>

<p><a href="https://tio.run/##VctNCsIwEIbhqwxdfVMoWC3FhQr@LHuJ0CRYtNOSxPPH1EDV2c37zPTPwc8xwptgqXRK9DRWPqhgSozqYarfRIEZ2tiXkEXH@UmQT2ifsJ9EAwcSqtNyV4462qSOdILTMfeFG169/vMme/v17eIfa9e24zSY3SA9LBXny/VWMMf4Bg" rel="nofollow noreferrer" title="Common Lisp – Try It Online">Try it online!</a></p>

<p>Readable:</p>

<pre class="lang-lisp prettyprint-override"><code>(setf *random-state* (make-random-state t))
(defun f(L)
    (setf n (random 8))
    (cond 
            ((&lt; n 1) 
                (char L 0))
            ((and (&gt;= n 1)(&lt; n 4))
                (char L 1))
            ((and (&gt;= n 4)(&lt; n 6))
                (char L 2))
            ((&gt;= n 6)
                (char L 3))
    )
)
(princ (f "abcd"))
</code></pre>
</div>
<div id="pu23" class="pu"><h1>Applesoft, <s>29</s> oops, 32 bytes</h1>

<p>A little "retrocomputing" example. Bear with me, I'm brand new at this. I gather that what is designated <strong>as</strong> the "input" need not be byte-counted itself. As stated in the OP, the input would be given as "ABCD". (I didn't initially realize that I needed to specify input being obtained, which added 4 bytes, while I golfed the rest down a byte.)</p>

<pre><code>INPUTI$:X=RND(1)*4:PRINTMID$(I$,(X&lt;.5)+X+1,1)
</code></pre>

<p>The terms INPUT, RND, PRINT and MID$ are each encoded internally as single-byte tokens.</p>

<p>First, X is assigned a random value in the range 0 &lt; X &lt; 4. This is used to choose one of the characters from I$, according to (X &lt; .5) + X + 1. Character-position value is taken as truncated evaluation of the expression. X &lt; .5 adds 1 if X was less than .5, otherwise add 0. Results from X break down as follows:</p>

<pre><code>A from .5 ≤ X &lt; 1           = 12.5%
B from X &lt; .5 or 1 ≤ X &lt; 2  = 37.5%
C from 2 ≤ X &lt; 3            = 25%
D from 3 ≤ X &lt; 4            = 25%
</code></pre>
</div>
<div id="pu24" class="pu"><h1>Javascript 35 bytes</h1>

<p>Takes a string <code>ABCD</code> as input, outputs <code>A</code> 1/8th of the time, <code>B</code> 3/8ths of the time, <code>C</code> 1/4th of the time, and <code>D</code> 1/4th of the time.</p>

<pre><code>x=&gt;x[5551&gt;&gt;2*~~(Math.random()*8)&amp;3]
</code></pre>

<h2>Explanation</h2>

<pre><code>x=&gt;x[                     // return character at index
    5551                  // 5551 is 0001010110101111 in binary
                          // each pair of digits is a binary number 0-3
                          // represented x times
                          // where x/8 is the probability of selecting
                          // the character at the index 
    &gt;&gt;                    // bitshift right by
    2 *                   // two times
    ~~(                   // double-bitwise negate (convert to int, then 
                          // bitwise negate twice to get the floor for
                          // positive numbers)
        Math.random() * 8 // select a random number from [0, 8)
    )                     // total bitshift is a multiple of 2 from [0, 14]
    &amp;3                    // bitwise and with 3 (111 in binary)
                          // to select a number from [0, 3]
]
</code></pre>
</div>
<div id="pu25" class="pu"><h1>Ruby, 32 bytes</h1>

<p>Pretty straightforward..?</p>

<pre><code>-&gt;s{s[[0,1,1,1,2,2,3,3].sample]}
</code></pre>

<p><a href="https://tio.run/##KypNqvyfZvtf1664ujg62kDHEAyNgNBYxzhWrzgxtyAnNbb2f2ZeQWmJgq2CkqOTs4sSV0lqMYhnYWCgV5KZm1qsl5tYoFCtkBYNVherUMvFBaSLFcBcveSMxCKYkprkGgUl5erkWisF5WqQMXrJ@aV5JRrJmrVKCrX/AQ" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 9 bytes</h1>

<pre><code>•20åÝ•.Rè
</code></pre>

<p><a href="https://tio.run/##MzBNTDJM/f//UcMiI4PDSw/PBTL0gg6v@P/f0c3dAwA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<pre><code>•20åÝ•   # Push 33221110.
     .R  # Randomly selected index.
       è # Character at that index.
</code></pre>
</div>
<div id="pu27" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, <strike>76</strike> 55 bytes</h1>



<pre class="lang-cs prettyprint-override"><code>s=&gt;(s+s[1]+s[1]+s[2]+s[3])[new System.Random().Next(8)]
</code></pre>

<p><a href="https://tio.run/##PY47C8IwFIX3/orglFAtrS5CH@ADJ3WwgoN0COmtXqiJ5MYX0t9eK1iXjzN8h3MUjZSx0KpaEjHz9shJh4rdDZZsI1Fz8fbyFzm4BKubVgk5i/o0VGdpM1alLaUZJ5@OUdFj/MWkEEcND/ar7qQuzYWLYAtPx6eiaGOvMpajdgzTMMYk6uD7gv3XFkaTqSE4WHSwRg284oPZfLEcCBH30v5sQZbdoV8K8hrgyqMw7JzGa5r2Aw" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>

<p>My first answer written directly on TIO using my mobile phone. Level up!</p>

<p>Explanation: if the original string is "ABCD", the function creates the string "ABCDBBCD" and takes a random element from it.</p>
</div>
<div id="pu28" class="pu"><h1>Ruby, <strike>34</strike> <strike>33</strike> <strike>29</strike> 27 bytes</h1>

<p>Saved 2 bytes thanks to @Value Inc</p>

<p>Input as four characters</p>

<pre><code>a=$**2
a[0]=a[1]
p a.sample
</code></pre>

<p>construct an array <code>[B,B,C,D,A,B,C,D]</code> and sample it. </p>

<p><a href="https://tio.run/##KypNqvz/P9FWRUvLiCsx2iDWNjHaMJarQCFRrzgxtyAn9f///47/nf47/3cBAA" rel="nofollow noreferrer">try it online!</a></p>

<p><a href="https://tio.run/##VY3NCoJAFIX3PsWhCLTEtF3CLMrewkSmvFbkHzNjIeqz24zUors4nPv3HdFeumnKKEduc3F7ORbAmXHrnbGxnzAeB4nxnuRlU5BFVWZZgmRbKAmGHocQvovjrNGsJ60YzVVDXOmjva5f66lHSRJZraFfTJzbq7d9wBERTo7jqTqVXZlgwxD85XnEr3f9iuFJnYsXL1oaNKcRj0phsez1eAyx7OfN9hdYp/l4rhYGNU0f" rel="nofollow noreferrer">try it <code>n</code> times!</a> (I converted it to a function to repeat it more easily, but the algorithm is the same)</p>
</div>
<div id="pu29" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>50</s> 49 bytes</h1>



<pre class="lang-c prettyprint-override"><code>i[8]={1,1,1,2,2,3,3};f(char*m){m=m[i[rand()%8]];}
</code></pre>

<p><a href="https://tio.run/##S9ZNT07@/z8z2iLWttpQBwSNgNBYx7jWOk0jOSOxSCtXszrXNjc6M7ooMS9FQ1PVIjbWuvZ/bmJmnoYmVzWXAhAUg6VKMnNTNQw0Na3BYgVFmXklaRpKqskxeUo6QIajk7OLEk7Z8IjIKLBsLdd/AA" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu30" class="pu"><h1><a href="https://github.com/Phlarx/chip" rel="nofollow noreferrer">Chip</a>, 60 bytes</h1>

<pre><code>)//Z
)/\Z
)\/^.
)\x/Z
)\\\+t
|???`~S
|z*
`{'AabBCcdDEefFGghH
</code></pre>

<p><a href="https://tio.run/##S87ILPj/X1NfP4pLUz8GSMTox@kByQqQQExMjHYJV429vX1CXTBXTZUWV0K1umNikpNzcoqLa2qam3t6hsf//4lJySkA" rel="nofollow noreferrer" title="Chip – Try It Online">Try it online!</a></p>

<p>The three <code>?</code>'s each produce a random bit. On the first cycle, these bits are run through the switches above (<code>/</code>'s and <code>\</code>'s) to determine which value we are going to output from this table:</p>

<pre><code>000 a
01_ b
0_1 b
10_ c
11_ d
</code></pre>

<p>(where <code>_</code> can be either <code>0</code> or <code>1</code>). We then walk along the input as necessary, printing and terminating when the correct value is reached.</p>

<p>The big alphabetic blob at the end is copied wholesale from the cat program, this solution simply suppresses output and terminates to get the intended effect.</p>
</div>
<div id="pu31" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 11 bytes</h1>

<pre><code>‽⟦εεζζηηηθ⟧
</code></pre>

<p><a href="https://tio.run/##S85ILErOT8z5/z@gKDOvRCMoMS8lP1cjOlUnVacKCDPAsDBWU9P6/39HLicuZy6X/7pl/3WLcwA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code, although you hardly need it; <code>‽</code> picks a random element, <code>⟦⟧</code> creates a list, and the variables are those that get the appropriate input letters (in reverse order because I felt like it).</p>
</div>
<div id="pu32" class="pu"><h1>CJam, 11 bytes</h1>

<pre><code>XZYY]q.*smR
</code></pre>

<p><a href="http://cjam.aditsu.net/#code=XZYY%5Dq.*smR&amp;input=ABCD" rel="nofollow noreferrer">Try it Online</a></p>

<pre><code>XZYY]    e# add [1,3,2,2] to stack
q        e# add input string to stack
.*       e# element-wise multiply the two arrays. char * int in CJam = repeat character x times
s        e# flatten result to string
mR       e# pick random char from string
</code></pre>
</div>
<div id="pu33" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 6 bytes</h1>

<pre><code>«À¨Ć.R
</code></pre>

<p><a href="https://tio.run/##MzBNTDJM/f//0OrDDYdWHGnTC/r/39HJ2QUA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<p><strong>Explanation</strong></p>

<p>Works for both lists and strings.</p>

<pre><code>«       # concatenate input with itself
 À      # rotate left
  ¨     # remove the last character/element
   Ć    # enclose, append the head
    .R  # pick a character/element at random
</code></pre>
</div>
<div id="pu34" class="pu"><h1>&gt;&lt;&gt;, 56 bytes</h1>
<pre><code>v
!

&quot;
D
C
B
A ;
&quot; o
! @
! ^&lt;
x!^xv!
@  v&lt;
@  o
o  ;
;
o
</code></pre>
<p><a href="https://tio.run/##S8sszvj/v4xLkYtLicuFy5nLictRwZpLSSGfS1HBAYjjbLgqFOMqyhS5HBQUymxAZD5XvgJQjTVX/v//AA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu35" class="pu"><h1>PHP, 28 bytes</h1>
<pre class="lang-php prettyprint-override"><code>&lt;?=$argn[5551&gt;&gt;2*rand(0,7)];
</code></pre>
<p>Run as pipe with <code>-nR</code>.</p>
<p><code>01112233</code> in base-4 is <code>5551</code> in decimal ...</p>
</div>
<div id="pu36" class="pu"><h1><a href="https://drive.google.com/drive/folders/0B0R1Jgqp8Gg4cVJCZkRkdEthZDQ" rel="nofollow noreferrer">QBIC</a>, 27 bytes</h1>

<pre><code>?_s;+;+B+B+;+C+;+D,_r1,8|,1
</code></pre>

<h2>Explanation</h2>

<pre><code>?           PRINT
 _s         A substring of
   ;+       A plus
   ;+B+B+   3 instances of B plus
   ;+C+     2 instances of C plus
   ;+D      2 instances of D plus
   ,_r1,8|  from position x randomly chosen between 1 and 8
   ,1       running for 1 character
</code></pre>
</div>
<div id="pu37" class="pu"><h1><a href="https://www.r-project.org/" rel="noreferrer">R</a>, 31 bytes</h1>



<pre class="lang-r prettyprint-override"><code>sample(scan(,''),1,,c(1,3,2,2))
</code></pre>

<p>Reads the characters from <code>stdin</code> separated by spaces. <code>sample</code> draws random samples from its first input in quantity of the second input (so <code>1</code>), (optional replacement argument), with weights given by the last argument.</p>

<p><a href="https://tio.run/##K/r/vzgxtyAnVaM4OTFPQ0ddXVPHUEcnWcNQx1jHSMdIU/N/okKSQrJCyn8A" rel="noreferrer" title="R – Try It Online">Try it online!</a></p>

<p><a href="https://tio.run/##K/qfZ2toAAT/SxKTclI1ihNzC0BUcmKeho66uqZOnk6ITrKGoY6xjpGOkaampn7e/0SFJIVkhZT/AA" rel="noreferrer" title="R – Try It Online">Try it <code>n</code> times!</a></p>

<p>For the latter code, I sample <code>n</code> times (set <code>n</code> in the header) with replacement set to <code>T</code>rue (it's false by default), tabulate the results, and divide by <code>n</code> to see the relative probabilities of the inputs.</p>
</div>
<div id="pu38" class="pu"><h1>q/kdb+, <s>15</s> 13 bytes</h1>

<p><strong>Solution:</strong></p>

<pre><code>1?a[0],7#1_a:
</code></pre>

<p><strong>Example:</strong></p>

<pre><code>q)1?a[0],7#1_a:"ABCD"
,"B"
</code></pre>

<p><strong>Explanation:</strong></p>

<p>This is pretty much a <code>q</code> version of the <code>jelly</code> solution. Create the list <code>"ABCDBCDB"</code> and then pick one item from it at random</p>

<p><strong>Bonus:</strong></p>

<p>Another <code>q</code> solution in 15 bytes, same style as the <code>APL</code> one:</p>

<pre><code>1?(,/)1 3 2 2#'
</code></pre>

<p>A <code>k</code> version of this solution is 13 bytes:</p>

<pre><code>1?,/1 3 2 2#'
</code></pre>
</div>
<div id="pu39" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>12</s> 10 bytes</h1>

<pre><code>l3HHvY"1Zr
</code></pre>

<p><a href="https://tio.run/##y00syfn/P8fYw6MsUskwquj/f3VHJ2cXdQA" rel="nofollow noreferrer" title="MATL – Try It Online">Try it online!</a> Or <a href="https://tio.run/##y00syflvaGBgYKX03z3H2MPDRKUsUskwquh/bFlwpPp/dUcnZxd1AA" rel="nofollow noreferrer">run it 1000 times</a> (slightly modified code) and check the number of times each char appears.</p>

<h3>Explanation</h3>

<pre><code>l3HH   % Push 1, 3, 2, 2
v      % Concatenate all stack contents into a column vector: [1; 3; 2; 2]
Y"     % Implicit input. Run-length decode (repeat chars specified number of times)
1Zr    % Pick an entry with uniform probability. Implicit display
</code></pre>

<p>Changes in modified code: <code>1000:"Gl3HH4$vY"1Zr]vSY'</code></p>

<ul>
<li><code>1000:"...]</code> is a loop to repeat <code>1000</code> times.</li>
<li><code>G</code> makes sure the input is pushed at he beginning of each iteration.</li>
<li>Results are accumulated on the stack across iterations. So <code>v</code> needs to be replaced by <code>4$v</code> to concatenate only the top <code>4</code> numbers.</li>
<li>At the end of the loop, <code>v</code> concatenates the <code>1000</code> results into a vector, <code>S</code> sorts it, and <code>Y'</code> run-length encodes it. This gives the four letters and the number of times they have appeared.</li>
</ul>
</div>
<div id="pu40" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>64 55</s> 51 bytes</h1>
<p><em>-9 bytes thanks to @ovs</em></p>

<pre class="lang-python prettyprint-override"><code>lambda s:choice((s*2)[1:]+s[1])
from random import*
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/6fZhvzPycxNyklUaHYKjkjPzM5VUOjWMtIM9rQKla7ONowVpMrrSg/V6EoMS8FSGXmFuQXlWj9LyjKzCvRSNPIzCsoLdHQ1NT87@jk7AIA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<hr />
<h2>Explanation</h2>
<p><code>random.choice()</code> gets a random character of the String, while <code>(s*2)[1:]+s[1]</code> creates <code>BCDABCDB</code> for an input of <code>ABCD</code>, which has 1/8 <code>A</code>s, 2/8 <code>C</code>s, 2/8 <code>D</code>s and 3/8 <code>B</code>s.</p>
</div>
<div id="pu41" class="pu"><h1>C, 106 bytes</h1>

<pre><code>int f(){int r=(int)random()%8;if(!r--)return 'A';if(--r--&gt;0)if(r&lt;2)return 'C';else return 'B';return 'D';}
</code></pre>
</div>
<div id="pu42" class="pu"><h1><a href="https://docs.python.org/" rel="noreferrer">Python</a>, 50 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda x:choice(x[:2]+x[1:]*2)
from random import*
</code></pre>

<p>An unnamed function taking and returning strings (or lists of characters).</p>

<p><strong><a href="https://tio.run/##K6gsycjPM/qfZhvzPycxNyklUaHCKjkjPzM5VaMi2sooVrsi2tAqVstIkyutKD9XoSgxLwVIZeYW5BeVaP0vKMrMK9FI01BydHJ2UdLU/A8A" rel="noreferrer" title="Python 2 – Try It Online">Try it online!</a></strong></p>

<h3>How?</h3>

<p><code>random.choice</code> chooses a random element from a list, so the function forms a string with the correct distribution, that is, given <code>"ABCD"</code>, <code>"ABCD"[:2] = "AB"</code> plus <code>"ABCD"[1:]*2 = "BCD"*2 = "BCDBCD"</code> which is <code>"ABBCDBCD"</code>.</p>
</div>
<div id="pu43" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 6 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="noreferrer">bytes</a></h1>

<pre><code>Ḋṁ7;ḢX
</code></pre>

<p>A monadic link taking a list of four characters and returning one with the probability distribution described.</p>

<p><strong><a href="https://tio.run/##y0rNyan8///hjq6HOxvNrR/uWBTx//9/RydnFwA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>

<h3>How?</h3>

<pre><code>Ḋṁ7;ḢX - Link: list of characters, s  e.g. ABCD
Ḋ      - dequeue s                         BCD
 ṁ7    - mould like 7 (implicit range)     BCDBCDB
    Ḣ  - head s                            A
   ;   - concatenate                       BCDBCDBA
     X - random choice                     Note that the above has 1*A, 3*B, 2*C, and 2*D
</code></pre>
</div>
<div id="pu44" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 8 bytes</h1>

<pre><code>ìD1è0ǝ.R
</code></pre>

<p><a href="https://tio.run/##MzBNTDJM/f//8BoXw8MrDI7P1Qv6/z9aKVFJRykJiJOBOEUpFgA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>

<pre><code>         # Implicit input                            | [A,B,C,D]
ì        # Prepend the input to itself               | [A,B,C,D,A,B,C,D]
 D1è     # Get the second character                  | [A,B,C,D,A,B,C,D], B
    0ǝ   # Replace the first character with this one | [B,B,C,D,A,B,C,D]
      .R # Pick a random character from this array   | D
</code></pre>
</div>
<div id="pu45" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 8 bytes</h1>

<pre><code>122b4⁸xX
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/9/QyCjJ5FHjjoqI////Kzk6ObsoAQA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Remove the <code>X</code> to see <code>"ABBBCCDD"</code>. The <code>X</code> chooses a random element.</p>
</div>
