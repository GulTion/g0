<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::125966</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>038</td><td>K ngn/k</td><td>230806T003700Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/263768#263768">doug</a></td></tr>
<tr d-ix="1"><td>183</td><td>R</td><td>190410T171725Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/182974#182974">Sumner18</a></td></tr>
<tr d-ix="2"><td>150</td><td>Python 3 Stackless</td><td>190407T022509Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/182775#182775">vo1stv</a></td></tr>
<tr d-ix="3"><td>041</td><td>J</td><td>190407T065412Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/182776#182776">Jonah</a></td></tr>
<tr d-ix="4"><td>029</td><td>APL Dyalog Classic</td><td>180131T141141Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/154468#154468">ngn</a></td></tr>
<tr d-ix="5"><td>083</td><td>Wolfram Language Mathematica</td><td>180131T111355Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/154458#154458">DELETE_M</a></td></tr>
<tr d-ix="6"><td>144</td><td>Python 165 or</td><td>180203T211714Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/154795#154795">user2699</a></td></tr>
<tr d-ix="7"><td>041</td><td>J</td><td>180131T183722Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/154503#154503">FrownyFr</a></td></tr>
<tr d-ix="8"><td>282</td><td>C</td><td>170612T135053Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/125982#125982">Steadybo</a></td></tr>
<tr d-ix="9"><td>247</td><td>Python 3</td><td>170612T190906Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/126038#126038">nocturam</a></td></tr>
<tr d-ix="10"><td>nan</td><td>C++</td><td>170614T113212Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/126308#126308">Julio E.</a></td></tr>
<tr d-ix="11"><td>174</td><td>PHP</td><td>170613T100449Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/126122#126122">Titus</a></td></tr>
<tr d-ix="12"><td>192</td><td>PHP</td><td>170612T163834Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/126023#126023">J&#246;r</a></td></tr>
<tr d-ix="13"><td>178</td><td>C#</td><td>170612T144125Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/125998#125998">TheLetha</a></td></tr>
<tr d-ix="14"><td>041</td><td>Dyalog APL</td><td>170612T130633Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/125974#125974">Uriel</a></td></tr>
<tr d-ix="15"><td>206</td><td>Clojure</td><td>170612T180110Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/126030#126030">NikoNyrh</a></td></tr>
<tr d-ix="16"><td>177</td><td>Mathematica</td><td>170612T145427Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/126003#126003">ZaMoC</a></td></tr>
<tr d-ix="17"><td>003</td><td>MATL</td><td>170612T123330Z</td><td><a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/125969#125969">Luis Men</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 38 bytes</h1>
<pre><code>{(x,x)#&lt;0,+\(,/-:\1,x)4!-1_&amp;1+-1_&amp;x#2}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700Oz4vPW_BgqWlJWm6Fjc10qyqNSp0KjSVbQx0tGM0dPR1rWIMgXwTRV3DeDVDbRBZoWxUC1WvW5xhlWBgpaGjpKSpo6SgpK-uol9jqKFbo6-vbKWurhmjYsVVnKGepm6irWhqDdEEswwA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 183 bytes</h1>

<pre class="lang-r prettyprint-override"><code>x=scan()
b=t(d&lt;-1)
while(2*x-1-d){m=max(b)
y=(m+1):(m+sum(1:dim(b)[2]|1))
z=d%%4
if(z==1)b=cbind(b,y)
if(z==2)b=rbind(b,rev(y))
if(z==3)b=cbind(rev(y),b)
if(z==0)b=rbind(y,b)
d=d+1}
b
</code></pre>
<p><a href="https://tio.run/##PY5BbsIwEEX3PoWlCmmmkKgOsEHMSSoWdmy3lrBBTigOIWdPY0GyeYv3/x9NHD/4Pcorb2oZALkLXHJ7C3XrLoHbS@RGNs5E3pqmdeGHWZpTSNjn1bFYTFmW2KdhTPQ6xxS1oI@FQHb/dWcD1WcqRKGx9@RlAoWsI/BrgYeJzc2DOGjnJ/9dnZ4CkT1Ir1Y75iw8iAQqqpULGtSmw7esJhnfMpo/6HBOtkv95TdqTr6WTZelJr0WA1PjwCxMv1qoMrYZu4w9jv8" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Output is a matrix snake (or snake matrix, whatever). It's probably not the most efficient method, and it could likely be golfed, but I thought it was worth showing. I'm rather proud of this actually!</p>
<p>The method builds the matrix from the inside out, always appending an additional number of integers equal to the number of columns in the matrix before appending.
The pattern that follows is either binding by columns or by rows, while also reversing some values so they are appended in the correct order.</p>
<h1>193 bytes</h1>

<p>Exact same as above, but final <code>b</code> is</p>
<pre class="lang-r prettyprint-override"><code>matrix(b,x)
</code></pre>
<p><a href="https://tio.run/##PY5BbsMgEEX3nAKpijTT2FZx0k0UThJ1AQZapEAqTBIc12d3QYm9eYv3549@mN/oPYhf2nfCA1LrqaDm6rtoL56aS6Ba9FYHGnUfrf8mhi8pJBxL61ivpmkaHNM0J/58RySPoI41Q3L/sWcN7XuqWa1wdNyJBBLJwMFtGR4y@6sDdlDWZX9qv/4YInlwtdnsiTXw4Jyh5J20XoGsBnzJNsvwkkHfYMAl2a3nT1/JJflYO0ORiqstm4gTMdg8qko4T8RAXm2gLdgV7As@cf4H" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>which gives slightly cleaner output, but I didn't see any special criteria for output, so the first answer should work if I'm not mistaken.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/stackless-dev/stackless" rel="nofollow noreferrer">Python 3 (Stackless)</a>, <s>192</s> <s>188</s> <s>179</s> 150 bytes</h1>



<pre class="lang-python prettyprint-override"><code>lambda n:[list(map(v,list(range(t-n,t)),[y]*n))for t in[1+n//2]for y in range(n-t,-t,-1)]
v=lambda x,y,r=0:y&gt;=abs(x)and(3-2*r+4*y)*y+x+1or v(y,-x,r+1)
</code></pre>

<p><a href="https://tio.run/##RY7LCoMwFET3fkWWuXlgo6ULIf0R6yJWbaV6lSRI8vWptoXCLObAcJg1@ueCpXTe3F9T71wa9C1NZm47Q7Cqp9F5OpuVbuJTrcFHT71E4QFEHRuGAMNiiScj1opjnhfNwXFn8l2j9OKIgibb9M8dRBRWn6p41aZ1NIDBjpayYJafWQQWeeBq92w0ChmE5QrS4cW/9wJVRlY7oqcD3W@kNw" rel="nofollow noreferrer" title="Python 3 (Stackless) – Try It Online">Try it online!</a></p>

<p>The algorithm here is to form a phasor for each coordinate in the grid, and then rotate it 90-degrees clockwise until the phasor lies between the upper diagonals.  A simple formula can be used to calculate the value based on the coordinates and the number of clockwise rotations:
<span class="math-container">$$
(2y+1)^2-(y-x)-2yr
$$</span></p>

<p>Saved 4-bytes since 90-degree phasor rotation is easily done without complex numbers</p>
</div>
<div id="pu3" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 41 bytes</h1>

<pre><code>,~$[:/:[:+/\_1|.1&amp;,(]##@]$[,-@[)2}:@#1+i.
</code></pre>

<h2>standard formatting</h2>

<pre><code>,~ $ [: /: [: +/\ _1 |. 1&amp;, (] # #@] $ [ , -@[) 2 }:@# 1 + i.
</code></pre>

<p>This approach is based off <a href="https://www.jsoftware.com/papers/play132.htm" rel="nofollow noreferrer"><em>At Play With J Volutes</em></a> (Uriel's APL uses a similar technique).</p>

<p>It's unexpected and elegant enough to justify a 2nd J answer, I thought.</p>

<p>Essentially, we don't do anything procedural or even geometric.  Instead, we arithmetically create a simple sequence that, when scan summed and graded up, gives the correct order of the spiraled number from left to right, top to bottom.  We then shape that into a matrix and are done.</p>

<p>I'll add a more detailed explanation when time permits, but the linked article explains it in depth.</p>

<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/depUoq30raKttPVj4g1r9AzVdDRilZUdYlWidXQdojWNaq0clA21M/X@a3KlJmfkK6QpmEAY6uowAdP/AA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, <s>32</s> 29 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>1+×⍨-{⊖∘⌽⍣⍵⌽{⌽⍉,⌸⍵+≢⍵}⍣2⍣⍵⍪⍬}
</code></pre>

<p><a href="https://tio.run/##bZG9TsNAEIT7e4rpXCSWsns2wXkbK/iQhSWjhCay3EQI4ZBDUPBThwYhWiSERMWb7IuYDT/BQm7udufmmykuPS7Cg0ValIfhtEjn83zayuVNXsrZFbVuew4@7sQ/hpWsbuX8Xtbv4h/Ev@hQfS3NUNavKgyk2ehV6zP/WPyT@Oe6bU80p9oKzWamoxP/NglcmheBTqrP5OI0KI@C2pgMapDVcox9JCYbfm97IPBuixHBGguNvc66iDJIQKMOpyAYRB1YaVjQXx5pfAyKQNZE/1NZmxlswRE43jE8AnoKKQF6Skl9fcVjdLvj3279gdK5Tw" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>

<p>Uses <code>⎕io←1</code>. Starts with a 0-by-1 matrix (<code>⍪⍬</code>). 2N times (<code>⍣2⍣⍵</code>) adds the height of the matrix (<code>≢⍵</code>) to each of its elements, puts <code>1 2...height</code> on its right (<code>,⌸</code>), and rotates (<code>⌽⍉</code>). When that's finished, corrects the orientation of the result (<code>⊖∘⌽⍣⍵⌽</code>) and reverses the numbers by subtracting them from N<sup>2</sup>+1 (<code>1+×⍨-</code>).</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>(...)</s> 83 bytes</h1>

<p>Byte measured in UTF8, <code>\[LeftFloor]</code> (<code>⌊</code>) and <code>\[RightFloor]</code> (<code>⌋</code>) cost 3 bytes each. Mathematica doesn't have any special byte character set.</p>

<pre><code>Table[Max[4x^2-Max[x+y,3x-y],4y
y-{x+y,3y-x}]+1,{y,b+1-#,b=⌊#/2⌋},{x,b+1-#,b}]&amp;
</code></pre>

<p><a href="https://tio.run/##y00syUjNTSzJTE78n2b7PyQxKSc12jexItqkIs5IF8So0K7UMa7QrYzVMankqtStBvMrdStqY7UNdaordZK0DXWVdZJsH/V0KesbPerprtWproCJ1saq/Q8oyswrcQjJDy4BMtId3IsyUxzSok1j/wMA" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>

<hr>

<p>Uses the closed form for each of the 4 cases, then takes the maximum carefully to get the desired result.</p>

<p>Returns a 2D array of integers. I'm not sure if this is allowed, and although <a href="https://codegolf.stackexchange.com/questions/125966/wind-me-a-number-snake/154458#comment309960_125966">it has been asked in the comments</a>, the OP didn't reply.</p>
</div>
<div id="pu6" class="pu"><h1>Python 165 (or 144)</h1>

<pre><code>from pylab import *
def S(n):
 a=r_[[[1]]];r=rot90;i=2
 while any(array(a.shape)&lt;n):
  q=a.shape[0];a=vstack([range(i,i+q),r(a)]);i+=q
 if n%2==0:a=r(r(a))
 print(a)
</code></pre>

<p>This creates a numpy array, then rotates it and adds a side until the correct size is reached.  The question didn't specify if the same start point needs to be used for even and odd numbers, if that's not the case the line <code>if n%2==0:a=r(r(a))</code> can be removed, saving 21 bytes.</p>
</div>
<div id="pu7" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 41 bytes</h1>
<pre><code>(]|.@|:@[&amp;0](|.@|:@,.*/@$+#\)@]^:[1:)2*&lt;:
</code></pre>
<p><a href="https://tio.run/##y/r/P81WT0EjtkbPocbKIVrNIFYDwtTR09J3UNFWjtF0iI2zija00jTSsrH6n5qcka@QppCamJyhYKhgpGCsYKJg@h8A" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Does the same thing as <a href="https://codegolf.stackexchange.com/a/154468/74681">ngn’s APL submission</a> but starts with a 1-by-1 matrix and repeats 2×N−2 times.</p>
</div>
<div id="pu8" class="pu"><h1>C, <s>321</s> <s>307</s> <s>295</s> <s>284</s> <s>283</s> 282 bytes</h1>

<p><em>Thanks to both @Zachary T and @Jonathan Frech for golfing a byte!</em></p>

<pre><code>#define F for(b=a;b--;)l
i,j,k,a,b,m;**l;f(n){n*=n;l=calloc(a=m=3*n,4);F[b]=calloc(m,4);for(l[i=j=n][j]=a=k=1;n&gt;k;++a){F[i][++j]=++k;F[++i][j]=++k;++a;F[i][--j]=++k;F[--i][j]=++k;}for(i=0;i&lt;m;++i,k&amp;&amp;puts(""))for(j=k=0;j&lt;m;)(a=l[i][j++])&gt;0&amp;&amp;a&lt;=n&amp;&amp;printf("%*d ",(int)log10(n)+1,k=a);}
</code></pre>

<p>Allocates a two-dimensional array of zeroes, then starts filling it from somewhere in the middle. Lastly the values that are larger than zero but smaller than or equal to the square of the input are printed.</p>

<p><a href="https://tio.run/##ZY/BbsMgDIbveYoo0yIIICVqd3LdY14iyoHQUpEAmdruFOXVl5lq3Q7lhL/vxzZGXYzZtrfT2bp4ztvczlc2oIZBKeA@c3KUk9RykAGqyoNlkS@xwggejfZ@NkxjwF0V5Z5D2w39E4cEUjffORwx9t3Yo8YJG4jHCYTQfGk713dCkBBiotdCuEcsVRSAh1fqzyv179fU22EN7hAo7ORUlp9f9xsrCs6TG2lWDSNZTjv61GoUoufHuiz1ASPFry7eLSveq1NeSEYF9/OlqemPopETag7rRjQP2kXGsyXL6Vi24/CcBL9o/4o@XlHT0HXdvo31@nLblA8/" rel="nofollow noreferrer">Try it online!</a></p>

<p><strong>Formatted:</strong></p>

<pre><code>#define F for(b=a; b--;)l
i, j, k, a, b, m; **l;
f(n)
{
    n *= n;
    l = calloc(a=m=3*n, 4);

    F[b] = calloc(m, 4);

    for(l[i=j=n][j]=a=k=1; n&gt;k; ++a)
    {
        F[i][++j] = ++k;
        F[++i][j] = ++k;
        ++a;

        F[i][--j] = ++k;
        F[--i][j] = ++k;
    }

    for(i=0; i&lt;m; ++i, k&amp;&amp;puts(""))
        for(j=k=0; j&lt;m;)
            (a=l[i][j++])&gt;0 &amp;&amp; a&lt;=n &amp;&amp; printf("%*d ", (int)log10(n)+1, k=a);
}
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>249</s> 247 bytes</h1>

<p>I initialize an 2D array and find the starting point, which is the center for odd n or offset (-1,-1) for even n, then scale the fill/cursor pattern with the current 'ring' number.  I feel like I'm missing a trick for interpreting the directions but I haven't come up with anything cheaper.</p>



<pre class="lang-python prettyprint-override"><code>def f(n):
 M=[n*[0]for a in range(n)]
 x=y=n//2-1+n%2
 M[x][y]=i=s=1
 while 1:
  t=s*2
  for d in'R'+'D'*(t-1)+'L'*t+'U'*t+'R'*t:
   if i==n*n:print(*M,sep='\n');return
   v=[1,-1][d in'LU']
   if d in'UD':x+=v
   else:y+=v
   M[x][y]=i=i+1
  s+=1
</code></pre>

<p><a href="https://tio.run/##RU67boNAEOz5im2ivYeRc0RpSLZzaTeWqC5XIPsIJ1kLgrMDH56aHMhSmlnN7szs9HNsO35blqtvoBEsywxOZFnZV9d0A9QQGIaav326uQwmmon3@yIX/FJ8GpnUdnJ2dhRoJJPBTxtuHkyKgUijKtJcc64pB8@o8YBKxNxIjUdUUWO14TnhaoHQQCBixWU/BI5CnXaj7wm/GOXH4ON94FX2IGt2uXF2yz1W6J7mjVcHLCdNj3Xnb6Mv5yf57xp06gqjJrM0Yn0UuL9HIaVc3n@5yy/1pfV/" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>-2 thanks to Zachary T!</p>
</div>
<div id="pu10" class="pu"><h1>C++, <S>245</S> 228 bytes</h1>

<pre class="lang-cpp prettyprint-override"><code>void f(){for(int i=0,j=-1,v,x,y,a,b;i&lt;n;i++,j=-1,cout&lt;&lt;endl)while(++j&lt;n){x=(a=n%2)?j:n-j-1;y=a?i:n-i-1;v=(b=y&lt;n-x)?n-1-2*(x&lt;y?x:y):2*(x&gt;y?x:y)-n;v=v*v+(b?n-y-(y&gt;x?x:y*2-x):y+1-n+(x&gt;y?x:2*y-x));cout&lt;&lt;setw(log10(n*n)+1)&lt;&lt;v&lt;&lt;' ';}}
</code></pre>

<p><a href="https://tio.run/##TZDdboMwDIXv/RSRprUJIROwX5EAz5ICbYPAoEIpUcWzs1Cmqb6wTj4fK7bzrhOnPF9eDOb1tSiJMm0/XErdpPDMGo2me0aNHs5v5xTg2hs8EdRN2Xc6L0k/FBLA4EBQLmNrCnKk7H5sL3RlJgn8KhGhP/qTb33tH6RRKA3nG87b66BUiUXNbmdTl5TzSiG7TwnVCb5GLKtiFJUIpU10Zpw2To8JPSRWoZhYhiIUkUcnZbMptixedbppgc45eiOnB2ezgtp0Wgte5Bpjy0OB/M8cedYxJrd5@nK40bo9hQFFDxkPmVKjUnuyl/O8rHs12iBlcAfi4jE5oblBkqYEyW7nUkoC9qhunjXcYeT/Y/2JKEXW3Tc6w7yEEME7fMAnfME3/EDwCw" rel="nofollow noreferrer">Try it online!</a></p>

<p>The function calculates and prints the value of each number of the matrix depending on its <em>x, y</em> position by applying this logic:</p>

<p><a href="https://i.stack.imgur.com/WDPWe.jpg" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/WDPWe.jpg" alt="Snake values calculation depending on position"></a></p>

<p><strong>Formatted version</strong>:</p>

<pre class="lang-cpp prettyprint-override"><code>#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;math.h&gt;

using namespace std;

void f(int n)
{
    for (int i = 0; i &lt; n; i++)
    {
        for (int j = 0; j &lt; n; j++)
        {
            int value = 0;

            // Invert x and y when n is even
            int x = n % 2 == 0 ? n - j - 1 : j;
            int y = n % 2 == 0 ? n - i - 1 : i;
            if (y &lt; (n - x))
            {
                // Left-top part of the matrix
                int padding = x &lt; y ? x : y;
                value = n - 1 - padding * 2;
                value *= value;
                value += y &gt;= x ? n - x - y : n + x - y - (y * 2);
            }
            else
            {
                // Right-bottom part of the matrix
                int padding = x &gt; y ? n - x : n - y;
                value = n - padding * 2;
                value *= value;
                value += x &gt; y ? y - padding + 1 : n + y - x - (padding * 2) + 1;
            }

            cout &lt;&lt; setw(log10(n * n) + 1);
            cout &lt;&lt; value &lt;&lt; ' ';
        }

        cout &lt;&lt; endl;
    }
}

int main()
{
    int n;
    while (cin &gt;&gt; n &amp;&amp; n &gt; 0)
    {
        f(n);
        cout &lt;&lt; endl;
    }
}
</code></pre>
</div>
<div id="pu11" class="pu"><h1>PHP, <s>185 176</s> 174 bytes</h1>
<pre class="lang-php prettyprint-override"><code>for(;$n++&lt;$argn**2;${xy[$m&amp;1]}+=$m&amp;2?-1:1,$k++&lt;$p?:$p+=$m++%2+$k=0)$r[+$y][+$x]=$n;ksort($r);foreach($r as$o){ksort($o);foreach($o as$i)printf(&quot; %&quot;.strlen($n).d,$i);echo&quot;
&quot;;}
</code></pre>
<p>Run as pipe with <code>-nR</code> or <a href="http://sandbox.onlinephpfunctions.com/code/01f51bef6102edba9a92eddd782f62ffe40650f2" rel="nofollow noreferrer">test it online</a>.</p>
<p><strong>breakdown</strong></p>
<pre class="lang-php prettyprint-override"><code>for(;$n++&lt;$argn**2;     # loop $n from 1 to N squared
    ${xy[$m&amp;1]}+=$m&amp;2?-1:1, # 2. move cursor
    $k++&lt;$p?:               # 3. if $p+1 numbers have been printed in that direction:
        $p+=$m++%2+             # increment direction $m, every two directions increment $p
        $k=0                    # reset $k
)$r[+$y][+$x]=$n;           # 1. paint current number at current coordinates

ksort($r);              # sort grid by indexes
foreach($r as$o){       # and loop through it
    ksort($o);              # sort row by indexes
    foreach($o as$i)        # and loop through it
        printf(&quot; %&quot;.strlen($n).d,$i);   # print formatted number
    echo&quot;\n&quot;;               # print newline
}
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 192 bytes</h1>



<pre class="lang-php prettyprint-override"><code>for($l=strlen($q=($a=$argn)**2)+$d=1,$x=$y=$a/2^$w=0;$i++&lt;$q;${yx[$w%2]}+=$d&amp;1?:-1,$i%$d?:$d+=$w++&amp;1)$e[$x-!($a&amp;1)][$y]=sprintf("%$l".d,$i);for(;$k&lt;$a;print join($o)."\n")ksort($o=&amp;$e[+$k++]);
</code></pre>

<p><a href="https://tio.run/##HY7djoJAFIPv9yncSSGMxz@4dDjhQVhMSEYFITAOJECMz84evWz7tamr3JpmrnI/KP29YxUnyqy33kdoeRh9e@0iPDlCyV9Ab7eJJliOd5gZi7jH5IKJTwY1UYqnwWuZc0xBUryJYcM4O@@FrgPY7Awr3kQUxhrXHPP@V6ZFFDmWggfn6268RSpAqw5WStp8vhg0KUrzTTePvpZPvT6ov07pZuj9KJJD2SM0RIU26/oP" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>

<p>Same way build a string instead of an array</p>

<p><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 217 bytes</p>



<pre class="lang-php prettyprint-override"><code>for($l=strlen($q=($a=$argn)**2)+$d=1,$x=$y=($a/2^$w=0)-!($a&amp;1),$s=str_pad(_,$q*$l);$i++&lt;$q;${yx[$w%2]}+=$d&amp;1?:-1,$i%$d?:$d+=$w++&amp;1)$s=substr_replace($s,sprintf("%$l".d,$i),($x*$a+$y)*$l,$l);echo chunk_split($s,$a*$l);
</code></pre>

<p><a href="https://tio.run/##HY7djoIwEIXvfYqVHExL6w9cig0PslFSKSxkGywtBojx2bH1cmbO950xrVkvhWnNBtL@9SJKsyhfm4cl0MKNVtc9wSAIpPgGaJJklEGJlGMWWMLlmN0wiRPdb/2wSymHC2hppCIlx5BA0xwdYxcMOV7L/Ispzq5vJqB2aXHee1cXQxVnKL@bGPOS4Hjeg8bWRsuqJnDcGdv1Y0OiGDo6KI9RTjAnkAwL9T08VNVV@/ip2mf/XzqjuzGQkN8v1vUD" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1>C#, <s>203</s> <s>202</s> <s>196</s> <s>193</s> 178 bytes</h1>



<pre class="lang-c# prettyprint-override"><code>n=&gt;{var r=new int[n,n];for(int o=n-2+n%2&gt;&gt;1,i=r[o,o]=1,c=2,w=o,h=o,b=1-2*(i%2),j;n&gt;i++;){r[h,w+=b]=c++;for(j=0;j&lt;i-1;++j)r[h+=b,w]=c++;for(j=0;j&lt;i-1;++j)r[h,w-=b]=c++;}return r;}
</code></pre>

<p><em>Saved a byte thanks to @StefanDelport.</em><br>
<em>Saved 22 bytes thanks to @FelipeNardiBatista.</em></p>

<p>This works by the following observation of how the squares are built up:</p>

<p><a href="https://i.stack.imgur.com/6Y5nn.png" rel="noreferrer"><img src="https://i.stack.imgur.com/6Y5nn.png" alt="Image of square where n=5"></a></p>

<p>As you can see each bit is added on to the previous square. For even numbers we go right of where we were, down till were one lower than where the square was and then left to the end. Odd numbers are essentially the opposite, we go left one, up till were one above the current height and then right to the end.</p>

<p>Full/Formatted version:</p>

<pre class="lang-c# prettyprint-override"><code>using System;
using System.Linq;

class P
{
    static void Main()
    {
        Func&lt;int, int[,]&gt; f = n =&gt;
        {
            var r = new int[n, n];
            for (int o = n - 2 + n % 2 &gt;&gt; 1, i = r[o, o] = 1, c = 2, w = o, h = o, b = 1 - 2 * (i % 2), j; n &gt; i++;)
            {
                r[h, w += b] = c++;

                for (j = 0; j &lt; i - 1; ++j)
                    r[h += b, w] = c++;

                for (j = 0; j &lt; i - 1; ++j)
                    r[h, w -= b] = c++;
            }

            return r;
        };

        Console.WriteLine(String.Join("\n", f(3).ToJagged().Select(line =&gt; String.Join(" ", line.Select(l =&gt; (l + "").PadLeft(2))))) + "\n");
        Console.WriteLine(String.Join("\n", f(4).ToJagged().Select(line =&gt; String.Join(" ", line.Select(l =&gt; (l + "").PadLeft(2))))) + "\n");
        Console.WriteLine(String.Join("\n", f(5).ToJagged().Select(line =&gt; String.Join(" ", line.Select(l =&gt; (l + "").PadLeft(2))))) + "\n");

        Console.ReadLine();
    }
}

public static class ArrayExtensions
{
    public static T[][] ToJagged&lt;T&gt;(this T[,] value)
    {
        T[][] result = new T[value.GetLength(0)][];

        for (int i = 0; i &lt; value.GetLength(0); ++i)
            result[i] = new T[value.GetLength(1)];

        for (int i = 0; i &lt; value.GetLength(0); ++i)
            for (int j = 0; j &lt; value.GetLength(1); ++j)
                result[i][j] = value[i, j];

        return result;
    }
}
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Dyalog APL, <s>70</s> <s>56</s> <s>45</s> 41 bytes</h1>

<pre><code>,⍨⍴∘(⍋+\)×⍨↑(⌈2÷⍨×⍨),(+⍨⍴1,⊢,¯1,-)(/⍨)2/⍳
</code></pre>

<p><a href="http://tryapl.org/?a=%u236A%28%2C%u2368%u2374%u2218%28%u234B+%5C%29%D7%u2368%u2191%28%u23082%F7%u2368%D7%u2368%29%2C%28+%u2368%u23741%2C%u22A2%2C%AF1%2C-%29%28/%u2368%292/%u2373%29%A82+%u23734&amp;run" rel="noreferrer">Try it online!</a></p>

<p><strong>How?</strong></p>

<pre><code>(+⍨⍴1,⊢,¯1,-)(/⍨)2/⍳
</code></pre>

<p>calculates the differences between the indices; <code>1</code> and <code>¯1</code> for right and left, <code>¯⍵</code> and <code>⍵</code> for up and down.</p>

<p><code>1,⊢,¯1,-</code> comes as <code>1 ⍵ ¯1 ¯⍵</code>, <code>+⍨⍴</code> stretches this array to the length of <code>⍵×2</code>, so the final <code>2/⍳</code> can repeat each of them, with a repetition count increasing every second element:</p>

<pre><code>      (1,⊢,¯1,-) 4
1 4 ¯1 ¯4
      (+⍨⍴1,⊢,¯1,-) 4
1 4 ¯1 ¯4 1 4 ¯1 ¯4
      (2/⍳) 4
1 1 2 2 3 3 4 4
      ((+⍨⍴1,⊢,¯1,-)(/⍨)2/⍳) 4
1 4 ¯1 ¯1 ¯4 ¯4 1 1 1 4 4 4 ¯1 ¯1 ¯1 ¯1 ¯4 ¯4 ¯4 ¯4
</code></pre>

<p>then,</p>

<pre><code>(⌈2÷⍨×⍨),
</code></pre>

<p>prepends the top-left element of the spiral,</p>

<pre><code>×⍨↑
</code></pre>

<p>limit the first ⍵<sup>2</sup> elements of this distances list,</p>

<pre><code>+\
</code></pre>

<p>performs cumulative sum,</p>

<pre><code>⍋
</code></pre>

<p>grades up the indices (<code>⍵[i] = ⍵[⍵[i]]</code>), to translate the original matrix with the indices of every element, and finally</p>

<pre><code>,⍨⍴
</code></pre>

<p>shapes as a <code>⍵×⍵</code> matrix.</p>
</div>
<div id="pu15" class="pu"><h2>Clojure, 206 bytes</h2>

<pre><code>(defmacro F[s]`(if(~'r(+ ~'p ~'v ~s))~'v ~s))
#(loop[i 1 p(*(quot(dec %)2)(inc %))v 1 r{}](if(&lt;(* % %)i)(partition %(map r(range i)))(recur(inc i)(+ p v)({1(F %)-1(F(- %))%(F -1)(- %)(F 1)}v)(assoc r p i))))
</code></pre>

<p>I guess this is a decent start, builds the board in sequence to a hash-map and then partitions it into <code>n x n</code> lists. That <code>defmacro</code> ended up being quite long, but the code is still shorter with it than without. Is there a more succint syntax to describe it?</p>

<p>Bulk of bytes calculate the starting point, and build the look-up logic of the next velocity <code>v</code>. Perhaps a nested <code>vec</code> would be better, but then you've got two indexes and velocities to keep track of.</p>
</div>
<div id="pu16" class="pu"><h1>Mathematica, 177 bytes</h1>
<pre><code>(n=#;i=j=Floor[(n+1)/2];c=1;d=0;v={{1,0},{0,-1},{-1,0},{0,1}};a=Table[j+n(i-1),{i,n},{j,n}];Do[Do[Do[a[[j,i]]=c++;{i,j}+=v[[d+1]], {k,l}];d=Mod[d+1,4],{p,0,1}],{l,n-1}];Grid@a)&amp;
</code></pre>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, 3 bytes</h1>

<pre><code>1YL
</code></pre>

<p><a href="https://tio.run/##y00syfn/3zDS5/9/UwA" rel="noreferrer" title="MATL – Try It Online">Try it online!</a></p>

<h3>Explanation</h3>

<p>Built-in... ¯\_(ツ)_/¯</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/125966/">125966</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




