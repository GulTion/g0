<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::218544</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>098</td><td>Scala</td><td>231014T011812Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/265988#265988">138 Aspe</a></td></tr>
<tr d-ix="1"><td>036</td><td>Julia 1.0</td><td>210204T162647Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218599#218599">MarcMush</a></td></tr>
<tr d-ix="2"><td>2178</td><td>Wenyan Language</td><td>210216T015647Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/219110#219110">atzlt</a></td></tr>
<tr d-ix="3"><td>089</td><td>C gcc</td><td>210204T063205Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218559#218559">anotherO</a></td></tr>
<tr d-ix="4"><td>079</td><td>JavaScript Node.js</td><td>210205T020630Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218622#218622">anotherO</a></td></tr>
<tr d-ix="5"><td>078</td><td>JavaScript ES6</td><td>210204T011656Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218546#218546">Arnauld</a></td></tr>
<tr d-ix="6"><td>057</td><td>JavaScript Node.js</td><td>210204T053833Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218557#218557">tsh</a></td></tr>
<tr d-ix="7"><td>013</td><td>Pyth</td><td>210204T201901Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218607#218607">randomdu</a></td></tr>
<tr d-ix="8"><td>051</td><td>Python 3.8 prerelease</td><td>210204T150014Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218595#218595">xnor</a></td></tr>
<tr d-ix="9"><td>103</td><td>Python 3</td><td>210204T120344Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218573#218573">Noodle9</a></td></tr>
<tr d-ix="10"><td>019</td><td>Charcoal</td><td>210204T105334Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218569#218569">Neil</a></td></tr>
<tr d-ix="11"><td>007</td><td>05AB1E</td><td>210204T085336Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218566#218566">Kevin Cr</a></td></tr>
<tr d-ix="12"><td>033</td><td>Wolfram Language Mathematica</td><td>210204T060657Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218558#218558">att</a></td></tr>
<tr d-ix="13"><td>007</td><td>Jelly</td><td>210204T013448Z</td><td><a href="https://codegolf.stackexchange.com/questions/218544/the-rod-cutting-problem/218548#218548">rak1507</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 98 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/218557/110802">@tsh's Javascript answer</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://tio.run/##ZZHBTsMwDIbvfQpzi7UMNU0HY10mceTACXFCO4SuHYlKhrqqCFV99uIkG5pGJTuO/dn@lR5L3ejp8G6rsoNnbRwMSdLrBuoVe2xb/fP25Lqt2pBHUJNWm6HXLRhuea/S4vvDNBXTzOCNSnGwfym7Njj0SjOLMyrP7VxgYeqArnv0h@oLO1NiLEzwnhI4TgC7qoZPksJ0uz@uIMp46Vrj9ltcwaszHSjSCfR5qY5uAWIhBaeL4LDgsOTwwEGkZPfRMopT5NespErouONAVB5ar7lYjmge4mWg5flKeRFri/MY@X9MFif4LsIkQT4jRU5enCyLQealCV/2c@WFizo8lUu/MiYCmoedYSUm4agPLTAD6zm4W@N2pqyOeHpCgC962q5xrGaO/gvGxjHxNk6/" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>a=&gt;{var i,j,v=0;while(a(i)!=0){j=0;while(j&lt;i){v=a(j)+a(i-j-1);if(a(i)&lt;v)a(i)=v;j+=1};i+=1};a(i-1)}
</code></pre>
<p>Ungolfed version. Try it online!</p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def f(a: Array[Int]): Int = {
    var i = 0
    var j = 0
    var val_ = 0

    while (a(i) != 0) {
      j = 0
      while (j &lt; i) {
        val_ = a(j) + a(i - j - 1)
        if (a(i) &lt; val_) {
          a(i) = val_
        }
        j += 1
      }
      i += 1
    }
    a(i - 1)
  }

  def main(args: Array[String]): Unit = {
    val n = Array(
      Array(1, 5, 8, 9, 10, 17, 17, 20, 0),
      Array(1, 3, 2, 5, 6, 7, 4, 8, 0),
      Array(5, 6, 3, 2, 4, 6, 8, 7, 3, 4, 6, 2, 12, 4, 5, 7, 4, 3, 0),
      Array(23, 2, 3, 45, 34, 23, 3143, 13, 13, 213, 1321, 3123, 12, 312, 312, 31, 3, 213, 432, 41, 3, 123, 43, 0)
    )

    for (i &lt;- n.indices) {
      println(f(n(i)))
    }
  }
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 1.0</a>, <sup><s>47</s></sup> 36 bytes</h1>
<p>port of <a href="https://codegolf.stackexchange.com/a/218595/98541">xnor's answer</a></p>

<pre class="lang-julia prettyprint-override"><code>n*l=max(0,(1:n.|&gt;x-&gt;l[x]+(n-x)l)...)
</code></pre>
<p><a href="https://tio.run/##hVHbboMwDH3nK6wKiaR1EbkwyiT4EYamimYrG8sQUAlN@3fmECr1bQ@O7HOxneTj1rVnMS@L3XfF13lmCTLxbOPfcj6WXTXXB2aPM@94HMd8mcw4vfZD25gRCmABQCUQUoQTQo4gEorMh0xqdLz6hyc/SeSqekIgRpPccx7ytF7z06pQ95Jw4bn0blXeKr3LKYlSRDhECU2n2EL6RLoVhKNdL/Vw@NlOpZUb44FVqt0cHpi5N81kLu41JEmk9l1yummus5QHzdU0n2ZwgujlJjPdRAhrJlTEg7fvAViPhkNr4aft2cMTI9zbc7oSgKUmnbHv05X1HnG/sGcWt5Jsduos24U9hqQuIRxhh7DtUDFTFCM/iJoWt5flDw" rel="nofollow noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
<h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 0.4</a>, 42 bytes</h1>
<p>or with Julia 1.0+ and Combinatorics.jl</p>

<pre class="lang-julia prettyprint-override"><code>f(p,n)=maximum(x-&gt;sum(p[x]),partitions(n))
</code></pre>
<p><a href="https://tio.run/##hVHbbsIwDH3vV1gIiUTLJHLpoA/lRxiaqhIgG4SoSaVqP985MUi87cGJ7XOO7Tjf49V183xiQXje3rrJ3cYbm953Ea@wnw5chG5ILrm7j8xzPicb01cYXG8jtMAqgL0UUAvYCmgEyDXahkytDyLj@h8c9UhRhfUhABGDdMIoRbAp/rYw9DPEvCSsfko1SRWpMhMhjUDOaGnwlA9T5Kg8gsxwrqVfDuqdWUbnNpQoVJP78MpOwfbJHvM2FFKUoSoNvrQxm5pX/cX2P3bIhNXnqDamXwkontQrXp3uA@D@LQfn4dcF9rJiAc/yHJ8E4LHI1fpzurBAmfwL9H0lRJlPV88WyyCWyN7BMsJCwGOGPbNtG/mbPODg/jj/AQ" rel="nofollow noreferrer" title="Julia 0.4 – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://wy-lang.org" rel="nofollow noreferrer">Wenyan Language</a>, 2178 bytes</h1>
<p>I know what you're going to say -- <strong>WHAT ON EARTH IS THIS?!</strong></p>
<pre><code>吾有一術名之曰「獲取」欲行是術必先得一物曰「對象」一物曰「域」乃行是術曰乃得對象[域]是謂「獲取」之術也吾有一術名之曰「賦值」欲行是術必先得一物曰「對象」一物曰「域」一物曰「值」乃行是術曰乃得對象[域]=值是謂「賦值」之術也減零以三萬二千七百六十七名之曰「極小」吾有一術名之曰「分桿」欲行是術必先得一物曰「物價」一物曰「桿數」乃行是術曰吾有一列名之曰「遞歸」昔之「索引」者今零是矣恆為是吾有一爻名之曰「甲丙」若「索引」不大於「桿數」者昔之「甲丙」者今陽是矣云云若「甲丙」等於零者乃止云云充「遞歸」以零加「索引」以一昔之「索引」者今其是矣云云昔之「索引」者今一是矣恆為是加「桿數」以一吾有一爻名之曰「甲申」若「索引」小於其者昔之「甲申」者今陽是矣云云若「甲申」等於零者乃止云云吾有一物曰「極小」名之曰「最大」昔之「索引其二」者今零是矣恆為是吾有一爻名之曰「亥卯」若「索引其二」小於「索引」者昔之「亥卯」者今陽是矣云云若「亥卯」等於零者乃止云云吾有一術名之曰「丁戊」欲行是術必先得一物曰「a」一物曰「b」乃行是術曰乃得Math.max(a,b)是謂「丁戊」之術也施「獲取」於「物價」於「索引其二」名之曰「子甲」減「索引」以「索引其二」夫「遞歸」之其加「子甲」以其名之曰「午申」施「丁戊」於「最大」於「午申」昔之「最大」者今其是矣加「索引其二」以一昔之「索引其二」者今其是矣云云施「賦值」於「遞歸」於「索引」於「最大」噫加「索引」以一昔之「索引」者今其是矣云云施「獲取」於「遞歸」於「桿數」。名之曰「支子」乃得 「支子」是謂「分桿」之術也噫吾有一列名之曰「桿長」吾有一數名之曰「桿數」夫「桿長」之長昔之「桿數」者今其是矣施「分桿」於「桿長」於「桿數」名之曰「卯地」吾有一物曰「卯地」書之
</code></pre>
<p>Expect an input at char 678:</p>
<pre><code>...
吾有一列名之曰「桿長」(INPUT GOES HERE!)吾有一數
...
</code></pre>
<p>Using the format:</p>
<pre><code>充「桿長」以(some number)以(some number)以(some number)以......
</code></pre>
<p>Well I know it's difficult for those who don't understand Chinese. Fortunately the language compiles into equivalent JavaScript. I'll show it below for you to understand:</p>
<pre class="lang-javascript prettyprint-override"><code>var 獲取 = () =&gt; 0
獲取 = function(對象) {
  return function(域) {
    return 對象[域]
  }
}
var 賦值 = () =&gt; 0
賦值 = function(對象) {
  return function(域) {
    return function(值) {
      return (對象[域] = 值)
    }
  }
}
// Notice that functions above are only for convenience, because all function calls in this language is curry.

var 極小 = 0 - 32767

// The main function
var 分桿 = () =&gt; 0
分桿 = function(物價) {
  return function(桿數) {
    // The above two lines is to make the function a curry.
    var 遞歸 = []
    索引 = 0
    while (true) {
      // In this language we only have while-loops, but we can use 'if' and 'break' to control it.
      var 甲丙 = false
      if (索引 &lt;= 杆數) {
        甲丙 = true
      }
      if (甲丙 == 0) {
        break
      }
      遞歸.push(0)
      索引 = 索引 + 1
    }
    索引 = 1
    while (true) {
      var 甲申 = false
      if (索引 &lt; 杆數 + 1) {
        甲申 = true
      }
      if (甲申 == 0) {
        break
      }
      var 最大 = 極小
      索引其二 = 0
      while (true) {
        var 亥卯 = false
        if (索引其二 &lt; 索引) {
          亥卯 = true
        }
        if (亥卯 == 0) {
          break
        }
        var 丁戊 = () =&gt; 0
        丁戊 = function(a) {
          return function(b) {
            return Math.max(a, b)
          }
        }
        var 子甲 = 獲取(物價)(索引其二)
        var _ans5 = 索引 - 索引其二
        var _ans6 = 遞歸[_ans5 - 1]
        var _ans7 = 子甲 + _ans6
        var 午申 = _ans7
        最大 = 丁戊(最大)(午申)
        索引其二 = 索引其二 + 1
      }
      var _ans10 = 賦值(遞歸)(索引)(最大)
      索引 = 索引 + 1
    }
    var 支子 = 獲取(遞歸)(杆數)
    return 支子
  }
}
var 桿長 = []
// There should be some input...
杆數 = 桿長.length
var 卯地 = 分桿()
console.log(卯地) // Program complete
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>98</s> 89 bytes</h1>
<p>-9 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a></p>

<pre class="lang-c prettyprint-override"><code>m;*n;l;g(N,L)int*N;{n=N;l=L;f(0,m=0);}f(t,s,i){m&lt;t?m=t:0;for(i=0;++i&lt;l-s;f(t+n[i],s+i));}
</code></pre>
<p><a href="https://tio.run/##ZZDhbsIgEMe/@xTEZQnYc6GAU0e7vYDxBbQflmodSYtLi5@aPnt3h4tdMgIc3P/HHXfl8lKW45PzZX07nVnWhZO7vny9j41deFvbC9/DTjgfFnvb@3xv63xnKy6hyaWwQ8UDdOBE32Tho8nDm7TVteUulzZJXFYvO4RD4g@ugC5xAp@MGIw1n85zwfrZjOEgjz@Y4qBMwXL0kjNuvYQUVrCBLaR4XNNUcoBJ1KAQeIU1GNhMArlIMmg3KOp4UpCSaxVpPdGKUERWoA1ddGo0pHGqaBQmSlHA5/qx4K4ajTHpQoDRQww62KkIKq8@U4FU3JZq2YIyf5HYNMQcEtKiyZhBkyTitxsPksaFx4ZSTFcI@x/4bjFYxefPp6OfA2uQuf9qytiew631mGw2jD8" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>That's the explanation of a previous <a href="https://tio.run/##ZZDdToQwEIXveYpmjQnIrCltccGCPghyYfjRJtA1wF4Rnh1nioKJTcu053xMO1OdP6pqvTO26m51w7Jxqs318fNl7XXrW@hggjEwdnqweu6z6bXPp2eu2@vgo8hMznUYmqw7j794aAtTwhiaINDLSlD/bqwfsNnzGA5SbKHKQqiS5aiS6D4zhwhiSCCFCLcXmoIvcJgSBAJPcAEFyWGQRJbCmKAp3U5ARFLsaHnQglBEYpCKDjJSEiI3hQsCL4rQwN/lvmBzlcScdCBAycUlXfRRBJXXNVQgFZdSLSkI9RfZm4cE1xgypjCEYfDTjZ10tO8aSjkxcOCB/g99DZiw9U/39Zs9AeuR2b1@u2Z76fGKoZlug0XHW9Zv" rel="nofollow noreferrer" title="C (gcc) – Try It Online">illegal version</a>, but not so much has changed, so the explanation is still valid.</p>
<p>The function <code>f()</code> call itself recursively and into a loop, so that for each index of the loop it starts a whole new loop, and for each index of this other loop it launches a whole new loop and so on.</p>
<p>Each branch stops when the sum of the lengths of the pieces of that particular branch reaches the length of the rod.</p>
<p>Every time, before to enter a new branch-generating loop, the current maximum value possible is compared with that of the branch and eventually updated to a greater value.</p>
<pre class="lang-c prettyprint-override"><code>m;             // variable used to store the maximum value possible
f(            // this is a recursive function creating all the possible combinations of the pieces
n,            // it takes: an array of integers
l,             // the length of the array
t,            // the total price of the current branch
s)             // the sum of the inches virtually sold till now
int*n;{                            
    m&lt;t?m=t:0;    // if the maximum value is less than the total of a branch, update it
    for(int i=0;  // `i` represents the inches of a particular piece
    ++i&lt;l-s;      // untill `i` is less than the maximum length minus the current sum of the inches
      f(         // f() calls itself with:
      n,         // the same array
      l,          // the same length
      t+n[i],     // the current total price plus the price of this one more piece
      s+i)        // the current sum of the inches plus the length of this one more piece
    );            // end of for() loop
}                // end of function
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/218622/100356">Ported to JavaScript</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, <s>82</s> 79 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>(n,m=0)=&gt;(g=(t,s,i=0)=&gt;{m&lt;t?m=t:0;while(i&lt;n.length-s)g(t+n[i],s-~i++);})(0,0)|m
</code></pre>
<p><a href="https://tio.run/##bY3djsIgFITv90kgnRr@utZV1gcxXhitFdPSjRC9cPXV6wETbzQ55DDMN8Nxc96E7cn9xdIPu2bc25F59FZw@8tayyICXFbXfhGXvY0/Yn45uK5hbuEnXePbeCgDb1ks/MqtEcq7Kwo@v3EmIPh/P24HH4aumXRDy/ZsJVGhxgxSQE7TKLHm/OuN0lBEfmMKg/oDkbzEGNo1UTrfFGR6qnJMf4iplCG2gjYgoaXRkHlUXoq@lmRQj34dPF2jqTyJBJhUPz4A" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>That's my first JavaScript answer!!</h3>
<p>Made translating <a href="https://codegolf.stackexchange.com/a/218559/100356">my C answer</a>. The algorithm is the same (you can read the explanation from there if interested).</p>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES6), 78 bytes</h1>
<p><em>Saved 1 byte thanks to @Davide</em></p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;(m=F=(n,i=0,s=0)=&gt;n?i&gt;n||F(n+~i,i,s+a[i])|F(n,i+1,s):m=s&lt;m?m:s)(a.length)&amp;m
</code></pre>
<p><a href="https://tio.run/##bY3NisIwFIX3PsiQ0KM0P9Uqpu58CXERtGqkSYeJuJJ59XpvBTcKN9yf852Tq7/7fPgLv7dp6o/tcHKDd42IbutEQnAlsiula9ImNOnx2IpU/AcE5MLvwl7yAaFQyHIVXV7HTVxlKfysa9P5dpE/cTj0KfddO@v6sziJnUKFGkuoEmrBpcu9lJMPykATOccCFvUXgjVmLPWaKDNOGopP1WgzX2yaPcRWMBa0GGUN1Fh6bJq@ViRQjnk/vFRrKJwXBizHD08" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>a =&gt; (              // a[] = input array
  m =               // initialize m to a non-numeric value
  F = (             // F is a recursive function taking:
    n,              //   n = integer to be partitioned
    i = 0,          //   i = integer to be subtracted from n (-1)
    s = 0           //   s = price sum
  ) =&gt;              //
    n ?             // if n is not equal to 0:
      i &gt; n         //   abort if i is greater than n
      ||            //   otherwise:
        F(          //     first recursive call with:
          n + ~i,   //       n - i - 1
          i,        //       i unchanged
          s + a[i]  //       s + i-th price
        ) |         //
        F(          //     second recursive call with:
          n,        //       n unchanged
          i + 1,    //       i + 1
          s         //       s unchanged
        )           //
    :               // else:
      m = s &lt; m ? m //   update m to max(m, s)
                : s //
)(a.length)         // initial call to F with n = length of a[]
&amp; m                 // return m
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 57 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map((v,i)=&gt;a[i]=w=a.map(u=&gt;v=(u+=a[--i])&gt;v?u:v)|v)|w
</code></pre>
<p><a href="https://tio.run/##rZNNb4JAEIbv/Iq5uSgfLgtVaRZPPfTUQ4/WZAlFuw0CkQVNxN9uZ1Ga9NDioZslsx8zzzvZvHzGTVwle1kqOy/e08uGX2Iexc4uLglpLGniZiXX/MCvZzWPGk7qCY9Xti3XZtQs67AxW5yHi0orlcRVChw2dZ4oWeRATDiBOzZauGs852Wt7sps4aVWOrk12tD@1xH2wLAd6ltQCGAOC6BToDM9vakY6BuE52FOO/wmSGfgocIDzMCHuRh8Eyz5iy00SiN9jHOEsm7lAdVHQafCxK/sxfTGFp6GYHEAzAfcMOozoN30uuBh6xQvEMy@P7je@gzV9EYn@KiHwIU/C3BhjF04O6p4VXuZb4npYNxhqMpMKjJ6y0e4zmSSEmaBTc1Hozedsyn2T3HyQTKZowMjOBlZqmAltaMsSI9lmqg1WlPfo5cVprrCGS@Fu0WMzi2uhkL3kq7qpkQ7pb4FwA70n3DUGpOjibVJkVdFljpZsSU9g3OYXDV/UKybCFad8bt8AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>As the question is a <a href="https://en.wikipedia.org/wiki/Knapsack_problem" rel="nofollow noreferrer">knapsack problem</a>. Let <span class="math-container">\$ val\left[i\right] \$</span> be the price of segment of length <span class="math-container">\$i\$</span>. We have:</p>
<p><span class="math-container">$$ dp\left[0\right] = 0$$</span>
<span class="math-container">$$ dp\left[i\right] = \max_{j=1..i} \left\{ val\left[j\right] + dp\left[i-j\right] \right\} $$</span></p>
<p>And <span class="math-container">\$dp\left[len\right]\$</span> is the answer.</p>
<p>To golf more bytes, we slightly modify the transition equation into <span class="math-container">$$ dp\left[i\right] = \max\left\{val\left[i\right], \max_{j=1..i-1} \left\{ dp\left[j\right] + dp\left[i-j\right] \right\} \right\} $$</span></p>
<p>We use <span class="math-container">\$a\$</span> for both <span class="math-container">\$val\$</span> and <span class="math-container">\$dp\$</span> during iteration. When try to calculate <span class="math-container">\$a\left[i\right]\$</span>, all values <span class="math-container">\$a\left[0..i-1\right]\$</span> equals to <span class="math-container">\$dp\$</span> and all other values equals to <span class="math-container">\$val\$</span>. Also, our array is 0-indexed instead of 1-indexed. So we modify the equation into</p>
<p><span class="math-container">$$ a\left[i\right] = \max\left\{a\left[i\right], \max_{j=0..i-1} \left\{ a\left[j\right] + a\left[i-j-1\right] \right\} \right\} $$</span></p>
<p>Use the feature that when access values out of array range, <code>undefined</code> is returned. And mathematics operation on <code>undefined</code> results <code>NaN</code>. <code>NaN&gt;v</code> will also be <code>false</code>. We can ignore <span class="math-container">\$j=0..i-1\$</span> part from <span class="math-container">\$\max\$</span>. And the code is shown above.</p>
<p>Ungolfed C program as reference:</p>
<pre class="lang-c prettyprint-override"><code>int f(int* a) {
  int i, j, val;
  // before loop: a[i] = price of length (i+1) segement
  // after loop: a[i] = max sum price of cutted length (i+1) segment
  for (i = 0; a[i]; i++) {
    // before loop j
    // a[i] = price of length (i+1) segment
    //      = price if do not cut the segment
    for (j = 0; j &lt; i; j++) {
      // price when cut the segment into two parts with length (j+1), (i-j)
      val = a[j] + a[i - j - 1];
      // we prefer higher price if we can
      if (a[i] &lt; val) {
        a[i] = val;
      }
    } // j
  } // i
  return a[i - 1];
}
</code></pre>
<p><a href="https://tio.run/##hVPbcpswEH3vV5xJJjNQyw0YkqbB7Y@4flBAGDG25MFy3ZkM357uShDl8lBmdGH37NnDkaiXu7p@udam3p8bhfXJNdp@6369aOPQJjR/hUzx/AXgiBboBf7IfUWB21s8qdYOCntrj4@QG73FTxwHXSvYFntldq5Dohd5ipPaqYMyLtTJ1qnhfdlB/sXpfIjl9dk51XximUioL8WoLqs8QwW9WAShH5Whn4P/Uzhxe6x/Zqxu0VgY61gVXKfeob2WPmjpsYamJYrxbIHm0inzkYF9tXAXi6Mc3AkXTYpmYT0JE6Rv2acTF3lPjeSm32LB34MltVwi31ax2UVRP9WSw53edbS8fgRlamkmJL0n3pE1s0a5mH2azpmf0a8js7ObfqNpMyh3HswkhEWM/uYcpDZJvDZms93kWcacockzcoE7gQeBHwJ5RuN7GKsMo4iYgiIeeS9A2ZJKYj6EA6T0@wePKuZXiuchdzeXF7F8FSoZTemCkhwp8pLmfBqrsFmxlJzTzFe8mUJ/RpUFtwoBD2WezDs3Vq83lg883BRNvpfztZ2dn@ymAzOuTa5umt/mStCPaOhE0pRpxuh6xnb/Aw" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Above C code may golf to <a href="https://tio.run/##TVFtT4MwEP7Or7jMuFBbTEuZzhT8I9gPBIaWaGeQ8YXhX8c7umWS3Ovz3HNw1Ml7XS@LE50YTRs7PzxUbGqPfeyKrpCmS5LzuSq7gnNnTVU6m4/bbUxJMTI2FohZjiX/7ayh0iXKmnm5c77@PDUHyH@Gxh0fP16jCNXhq3I@ZjBFAFT60pZKSgvF2gKYQAnYCdgLeBGgJNpzsFTCLG4cjZ2V@SQA0QxHbnhoB0q25vuVpa8l9lXAdtdxfRtPwySxEdYIUkerDL26WBqSlF5FEUx6@p8L@4mVaVoVGiuVdPBrcNts0OG5gU4PDs8gDYYcMgyc46Hg8kQhfPdIbOPNffPmNwLa2OOvYIxkSK8/DKfeo0g0R8sf" rel="nofollow noreferrer">81 bytes</a>, but still longer than JavaScript implementation. :(</p>
<hr />
<ul>
<li>-5 bytes thanks to <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a></li>
</ul>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, 13 bytes</h1>
<pre><code>eSmsm@Qtkd./l
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/PzU4tzjXIbAkO0VPP@f//2gjYx0FIx0FIGliCqRMgDwg29jQBEgaQrERhGFkCJIASRsagVlwAqwfrMrEGChgAhEAKzUxjgUA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>The obvious approach: try all integer partitions, compute their value, and take the maximum. I spent a while trying to use the <code>M</code> or <code>L</code> builtins, but they didn't end up being shorter.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 51 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda l,n:n and max(x+f(l,n:=n-1)for x in l[:n])
</code></pre>
<p><a href="https://tio.run/##hVHNboMwDL7zFL6RaKnU/HS0ldiLMDQxCGo1mkbAJDbEszM7KVJvOziyvx87cfzPeLk7ffT9urZ5V90@mwo64c4OKtfArZrY9NIyQnK3k7y99zDB1UFXnF3J19EO44fvr7UdIAeWABRSwEHAUcBJgNxjZDHUvhTE63949KNEBdWrAGQMyiMXoUibkB@DQm8l4jJyh82qo1VFFymR0kgQoqXBUz5CxUTRFSTR1Es/HXE2qYymMREIUkNzeGInb@vRNrQNhRJlYpcTvvRksgNP6outv2xPgvT9W2WmTgWETOqUJ7RhLyzt@Pfq2dOCBWzN@RlfBOCwR2cd8zyU9AMt88LFEk1uZG06@0XA7BbYvcE8LDA/LlDYPB/KJeXrHw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Same length:</p>
<p><strong>51 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>f=lambda l,n:max([0]+[x+f(l,n:=n-1)for x in l[:n]])
</code></pre>
<p><a href="https://tio.run/##hVHNboMwDL7zFL6RqKnU/DBoJfYiDE0dDSoqTSNgEhvi2ZlNitTbDo7s78dOHP8zXB9OZ75bljpvz/evyxla4U7388iKQ7krxl3NCMjdXvL60cEIjYO2OLmy5Mtg@@HTd01le8iBRQCFFJAIyAQcBcgDRhpCHUpBvP6HRz9K1Kp6E4CMQXngAhRos@bZqtBbibgMXLJZdbCq4CIlUhoJQrQ0eMpnqJAouoIkmnrplyPMJpXRNCYAq9TQHB7Z0dtqsBfahkKJMqHLEV96NGnCo@pqq5vtSBB/fKvUVLGANZM65hGt2AtLS/5tPHtZsICtOT/hiwAc9mitY56vJf1AzbxwoUSTG1gdT34WMLkZ9u8w9TNMzwsUNs/7co758gc" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 103 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda p,n:max(map(sum,d(p,n)))
d=lambda p,n:[[p[n-1]]]+[m+[p[i]]for i in range(n-1)for m in d(p,n+~i)]
</code></pre>
<p><a href="https://tio.run/##hVJNb4MwDL3zKzztAFFTqRC6fkjsvtMuu1E0UQgragkRpFo7xP46s5NW6m0HB/u95w/Z6Ks5tEpMVbKbTnmzL3PQXG2b/BI0uQ76c8PLABHGmFcmD4o01amah1mWzdJmhkGdZVXbQQ21gi5XXzJAmhHUEGSrzH5rlk1G9uZTd3Uhe0gg8ADSkMOSw5rDhkO4QFs5ixYZJ178w2M@SiKreuGATIxyxznI0bH111Yh7iHioeOW91ThUiOXRUqkBBKEiDDGN7xZ5JyIRgiJplri4XG9SRULauMAK42pD/PkRcvCyJK2EaEkil2VzYLBM37i1ZLBx9s7mLrBnbVnA60Cc5BwynvyJewRqw18t92xJ7K5IqdNq5@84iCLo@youL87R6u48DlYLxQ@8@hCmku60U@tg4fjcLgPxra4DQCFNU5SBZrZkK5X2Z/DhpikTFD5gx45DGqE@SsM/QjDbYBUJkmfjT6b/gA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Inputs the prices as a list of integers along with the length of the rod.<br />
Returns the maximum price you can get.</p>
<p>Uses a variation of the integer partition function I wrote for my <a href="https://codegolf.stackexchange.com/q/217536/9481">Landau logarithm</a> <a href="https://codegolf.stackexchange.com/a/217602/9481">answer</a>.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 19 bytes</h1>
<pre><code>ＦＡ⊞υ⌈⊞ＯＥ⮌υ⁺κ§υλιＩ⊟υ
</code></pre>
<p><a href="https://tio.run/##PUs5DsIwEOx5hcu1ZAofVFSIKkWERRulsIJRInLJR5Tfm7WDKHZ2zq43rlvMmNJ7cQSqeY0BKCU6@h4iI7XZhylOkPVjtc6ExUFtVnjazTpvIVJG9Bg9fBi5hWp@2T3vRkoxGBCvJ@2GOcDd@AB6WXGBZkpNIyQjghFEdcGnUCGXXCHy34mDCJ6DHHNR2B/KvrSUREMdRqkq2bbpvI1f" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Based on @tsh's approach.</p>
<pre><code>ＦＡ
</code></pre>
<p>Loop over each input element.</p>
<pre><code>⊞υ⌈⊞ＯＥ⮌υ⁺κ§υλι
</code></pre>
<p>The value of each length is the maximum of the current input element and the array sum of the array of values so far with its reverse. This is pushed to the array of values.</p>
<pre><code>Ｉ⊟υ
</code></pre>
<p>Output the last value.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 7 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>gÅœ&lt;èOà
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8//XDr0ck2h1f4H17w/3@0oY6pjoWOpY6hgY6hOQgZGcQCAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##PY5BCgIxDEWvMsz6L5qmdSoIs3HvAYYuFERcuRCEOYAeQC/g0nsUL@JF6k8FISXJ@79JTuft7rivl3nsu8/t3vXjvK6Hcn0/VuW1Kc@KOk2CiIQlxEEGC@8ySBWeygIDAhKJ1cYCcyLVVnmIodhsSps3D7UIDWCjEhTSwrfkOVoo8J/@H35qUA6zxgxB2x2tddwgttUucSQRLucv" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>g        # Get the length of the (implicit) input-list
 Åœ      # Get all lists of positive integers that sum to this length
   &lt;     # Decrease each by 1 to make it a 0-based index
    è    # Index those into the (implicit) input-list
     O   # Sum each inner list
      à  # Pop and push the maximum
         # (after which it is output implicitly as result)
</code></pre>
<p><a href="https://tio.run/##NY9NSgMxFMf3nuIxK4UIHUH8QCkFNwWhm@7ERTp9nXmaSYZ5b9p6AE/gBVx6Ag@geK7xJWkhgcD/65fAdkU4jsXcd4PcQmHuf76nJ8Uj@loaCBuQBoGOYp3VmXPgiIWjoQtMQtvoEqyxZ41YAR5akKBvYnCpLRb8vv995I4HrHq0jIC2amD1BmXU77I492vcZ0VbQ4ZoO0cVSaY5j/up8StHlvYVky8OK9Yh7LGHo3VxoPdrJbJK/DKwpExr99TmXAbWBJzuGood@suh1ys6e5YmP804PpXm0lybG1NOTHkVz8Xk@R8" rel="nofollow noreferrer">Try it online with step-by-step output.</a></p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 33 bytes</h1>
<pre><code>Max[Range@#~FrobeniusSolve~#.#2]&amp;
</code></pre>
<p><a href="https://tio.run/##PYxPC4JAEMXvfo0FT1O4O2vaofDUqSDyKB42Wf9ArmAWgehXtxmDYIaZ93tvpjVDbVszNIVZysNyMZ/sZlxlEzGf@u5uXfN6pt3jbWexFSr3l2vfuCETm2OZna2rhjoRIPLcn9PCuHn0RgkhxLAHGYCMuFQwAWMERdYOItAQM2LBUNOMCeO6KZCMwjWHnFMcIjME1EACpUaQa6l1KHouyaBD/Df8XI30jQUHNE7etHwB" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Input the length and list of prices.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 7 bytes</h1>
<pre><code>LŒṗịµ§Ṁ
L        length
 Œṗ      integer partitions
   ị     index
     §Ṁ  sum each and take the maximum
</code></pre>
<p>My first jelly answer, so there can probably be improvements made.</p>
<p><a href="https://tio.run/##y0rNyan8/9/n6KSHO6c/3N19aOuh5Q93Nvz//z/ayFjHSMdYx8RUx9hEB8gxNjQx1jEEIyMwZWQIFANKGBqBaCjWgciaGBvpmIA4IAUmxrEA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/218544/">218544</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




