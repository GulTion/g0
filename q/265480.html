<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::265480</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>017</td><td>05AB1E</td><td>230929T002626Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265581#265581">andrewza</a></td></tr>
<tr d-ix="1"><td>071</td><td>K ngn/k</td><td>230927T043618Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265513#265513">Bubbler</a></td></tr>
<tr d-ix="2"><td>116</td><td>Ruby</td><td>230926T222638Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265507#265507">Value In</a></td></tr>
<tr d-ix="3"><td>116</td><td>Raku</td><td>230925T195007Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265489#265489">Sean</a></td></tr>
<tr d-ix="4"><td>122</td><td>Charcoal</td><td>230925T115524Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265482#265482">Neil</a></td></tr>
<tr d-ix="5"><td>119</td><td>JavaScript ES6</td><td>230925T135320Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265485#265485">Arnauld</a></td></tr>
<tr d-ix="6"><td>038</td><td>05AB1E</td><td>230925T115608Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265483#265483">Command </a></td></tr>
<tr d-ix="7"><td>050</td><td>Jelly</td><td>230925T195356Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265490#265490">Nick Ken</a></td></tr>
<tr d-ix="8"><td>122</td><td>JavaScript Node.js</td><td>230925T192448Z</td><td><a href="https://codegolf.stackexchange.com/questions/265480/do-you-win-a-numeric-mahjong/265488#265488">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>05AB1E, <strike>12 bytes</strike> 17 bytes</h1>
<p>I have managed to get the following:</p>
<p><strike>3L÷‚€Ù¹¢¢2Q*</strike></p>
<p>After a revision, I have come up with:</p>
<pre><code>Δ3ôʒ4KË}å_P*}à3Å0så_*
</code></pre>
<p>Explanation:</p>
<ul>
<li>Δ: This is the start of a block that repeats until a fixed point is
reached. It allows us to iterate over different possibilities.</li>
<li>3ô: This command splits the input list into groups of 3 elements
each. It's used to create triples and pairs.</li>
<li>ʒ4KË}å_: This is a filter operation that checks each group of 3
elements. Let's break down the filter logic:
<ul>
<li>4K: This converts the group to a list of absolute differences between consecutive elements.</li>
<li>Ë: Checks if all elements in this list of differences are equal. If they are equal, it means the group consists of three identical numbers (a triple).</li>
<li>}: This closes the filter block.</li>
<li>å_: This checks if the filtered group contains an underscore
character (which is unlikely in a list of integers). If it contains
an underscore, it means the group is not a valid triple.</li>
</ul>
</li>
<li>P*: This calculates the product of the filtered groups. If any group
was invalid (not a triple or pair), this product will be 0.</li>
<li>}à: This takes the maximum value from all the products calculated in
the previous step. If any of the groups were invalid, the maximum
will be 0.</li>
<li>3Å0så_*: This part checks if the maximum value from step 5 equals 3
(indicating three valid triples or pairs).</li>
</ul>
<p>Test case results:</p>
<p>Truthy:</p>
<ul>
<li>[0, 0] - Returns 1 (Truthy)</li>
<li>[999, 999, 999, 1234, 1234] - Returns 1 (Truthy)</li>
<li>[1, 2, 2, 2, 3] - Returns 1 (Truthy)</li>
<li>[1, 4, 7, 2, 5, 5, 5, 8, 3, 6, 9] - Returns 1 (Truthy)</li>
<li>[1, 2, 2, 3, 3, 4, 4, 4, 5, 5, 6, 6, 7, 7] - Returns 1 (Truthy)</li>
<li>[1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3] - Returns 1 (Truthy)</li>
<li>[0, 0, 0, 0, 0, 0, 0, 0] - Returns 1 (Truthy)</li>
</ul>
<p>Falsy:</p>
<ul>
<li>[] - Returns 0 (Falsy)</li>
<li>[1] - Returns 0 (Falsy)</li>
<li>[1, 3, 5, 7, 9] - Returns 0 (Falsy)</li>
<li>[1, 1, 2, 2, 4, 4, 8, 8, 16, 16, 32, 32, 64, 64] - Returns 0 (Falsy)</li>
</ul>
<h1>Python, 55 bytes</h1>
<pre><code>f=lambda l:sum(c%3!=1for c in[l.count(i)for i in{*l}])==2
</code></pre>
<p>Lambda function takes a list of non negative integers “<code>l</code>” as input and returns ”<code>true</code>” if it forms a winning hand and “<code>false</code>” if otherwise.</p>
<p>It uses a set comprehension to get unique elements, counts the occurrences of each element, and checks if there are exactly 2 elements with counts not equal to 1.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 71 bytes</h1>
<pre><code>oo::{*0-0!=|/{:[&amp;/0=x;1;|/^%x;0;o@@[1_x;!2;-;3!*x]]}'+@[-2*=3+/x;x;1+]}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxlUstuhDAMvOcrzGrbSjxEHpAAKRL/QdN2L5V6yhVpd/+9jr2kVNWMrRB7xlZEjNN0LWUji/nWXqf1uZXz5pW/te9Pm5c+LsuqPjZfaN94U5RbCPeXalkbXc6majePzVW4C/E1oTpGSGKZLlqxyhpkEOs4jjX8JqVNxxlrqga90/A3Fh199zsHrNVgUX9UGGK3k1stEfWOWzP1cRAz8Ib/GYRYk5wtDBm7PD2b8dyBqCyH0Ry2S5HX5UX7IN7wpUCCxIyPkSO9BiW8V6AJhs4dODz3hAEMWBhzj0F0hFS1CAeOqgy9OyXw3CNwlQUKmXKtSGbQxj0GsDyZDwhlE41OtB3ysURaoCejz+/zKeLfdKrPMYrXS3GZ/lz9AKoTePc=" rel="nofollow noreferrer">Try it online!</a></p>
<p>Based on a polynomial-time algorithm with respect to the maximal element, so it can test all test cases and itself in a second.</p>
<p>Let's call <code>(x,x,x)</code> an <em>x-triplet</em> and <code>(x,x+1,x+2)</code> an <em>x-sequence</em>.</p>
<ul>
<li>Count the occurrence of each number in <code>[0, 1, 2, ...]</code> up to the maximal element that appears in the input. Let's call it C.</li>
<li>For <code>i</code> from 0 to the maximum index of C,
<ul>
<li>Construct a copy of C where <code>i</code>-th element is subtracted by 2. (i.e., Assume a pair is <code>(i,i)</code>.)</li>
<li>Repeat until one of the halting condition is met:
<ul>
<li>If the remaining array is all zeros, return true.</li>
<li>If the remaining array contains a negative value, return false.</li>
<li>Otherwise, pop <code>x</code> from the front, and subtract <code>x%3</code> from the first two elements. (i.e., Maximally create <code>j</code>-triplets and try creating <code>j</code>-sequences for the remaining <code>j</code>s.)</li>
</ul>
</li>
</ul>
</li>
<li>If any choice of <code>i</code> gives true, return true. Otherwise return false.</li>
</ul>
<p>If a partition exists and it contains three or more <code>j</code>-sequences for some <code>j</code>, three copies of <code>j</code>-sequences can be replaced with <code>j</code>-, <code>j+1</code>-, and <code>j+2</code>-triplets to get another valid partition. Also, when considering all possible partitions where the minimum value is <code>j</code>, choosing to have three <code>j</code>-sequences (compared to one <code>j</code>-triplet) has the effect of fixing a <code>j+1</code>- and <code>j+2</code>-triplet from the remaining numbers, leaving a strict subset of choices afterwards. Therefore, it suffices to check if a greedy partitioning (favoring triplets) leads to a valid one.</p>
<pre><code>{|/{:[&amp;/0=x;1;|/^%x;0;o@@[1_x;!2;-;3!*x]]}'+@[-2*=3+/x;x;1+]}

+@[-2*=3+/x;x;1+]  construct number-count arrays with all choices of pairs
      =3+/x        identity matrix of size `sum of x + 3`
   -2*             change 1s on the diagonal to -2
 @[        ;x;1+]  for each number i in x, add 1 to i-th row of the above
+                  transpose

{:[...]}'  test if each number-count array is partitionable
&amp;/0=x;1;   if all elements are 0, return 1
|/^%x;0;   if any element is negative, return 0
           (monadic % is square root, which gives 0n for negatives;
            monadic ^ is null-check, which gives 1 for 0n)
o@@[1_x;!2;-;3!*x]  otherwise, update the array and do recursive call
    1_x             remove first element k
        !2          and update 0th and 1st elements by
           - 3!*x   subtracting k%3
o@                  recursive call

|/  return 1 if any is true

*0-0!=  filler that preserves truthiness
oo::    globally assign function to the name oo
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 116 bytes</h1>
<p>Brute force solution checking all permutations until it finds one that matches. Times out on medium inputs, so verification was done using the program below since it doesn't time out as easily.</p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;a{a.size%3&gt;1&amp;&amp;a.permutation.any?{_1.each_slice(3).all?{|b|x,=b.sort!;b&amp;b==[x]||b==[*x..x+2]}}}#&quot;#$2&lt;@[]_||aeehhruu
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=xZBtTsIwGMfj152i8jpke7IXFRAK3mNplhaLm5mwbJ1usp3EL8ToFbwLnsZuBSXxACb_PM3z1v-vfX1PMlbs3lb4IxMrc7wX5pxuKaThC--6c7vXoxDz5DETVISbNdB1sdj6NnC6DPw0CpdcdwdAo2ixLVmZG5hBuknE-ZT1GMZeTsqyPi9ygHzokKqq2q12x5ndesQvS8p5ECRZpry_zm6egzDi6J6LVEMxWnn8iUYdn2h8fadpKe7_B1xfixHDKbBC8LS5QIszkSIG4fqBL4Xeag2k62zmO5UcVYgNisAUhLQvprrwfJuY2BnMsVVj19ccyHgpPE6auq5bAFCnXXwk1zkAHzrHd4RyOiS4Dj0w7aoaSGyPEfWFu_2nZxnIIpo3mUwM9Btsx71UUfZsAzlHuSqXzVGTXx01lj0DXct9NfEj53RbSU7Utn91unowq0uq7DY-o9pB4X8D" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 137 bytes</h2>
<p>Count the number of occurrances of each element. Then, for each element, removes a pair from the count (if possible), then checks if everything else is sequences or triplets.</p>
<pre class="lang-ruby prettyprint-override"><code>-&gt;a{a.any?{t=a.tally;(t[_1]-=2)&gt;=0&amp;&amp;a.sort.all?{|e|t[e]&gt;=0&amp;&amp;((0...t[e]%=3).all?{(e..e+2).all?{|i|t[i]=t[i]&amp;.-1}})}}}#$&amp;*++3;;??\\__lmtty|
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=zVHRboIwFM1e-xWNcwQmNNA61CjyIdiQ4upkQSVStxDgA5bsD_Zilu2jtq9ZaZWZ7AeWnHuT03PvOTfw9rE_JOXxfRV8HsTKGX-9OHNWMcS2ZViJgCHBsqycmiKKPeoE2JoHrmEwVOz2AkkprGpei4hT9W6aLkKopTcBsbRucoT4AJ9YncrplAZtM5DjNY3VNM1137gdDMh0GoaLRRxnGyHK-nTQJoEBfOCiQMv1bpOjpBS8UPkgh4m-D-QHUUiSbh_5Upi9nlXF3mwW40bOrKKEAvC8TjOufABMpSN_YhnsxwDmMLXlTEoB394DHXr8vnr9N98BRK4NXQqiyWRiw9_mYTLUXWqeDfEZRHMpjhS_O2MsNRv6cv9ygygMz9CjvoLcH-nRDvgySIPqC_9CCu22diDKd9SFd146dqzg-boI1uUP26L6r_wA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://raku.org/" rel="nofollow noreferrer">Raku</a>, <s>121</s> 116 bytes</h1>
<pre><code>{sub k(\u){u{*}~~[.2/.1]||?(u{*}:k).grep:{?grep {u (&gt;)$_&amp;&amp;k u (-)$_},^3+$_,[$_,$_,$_]}}(bag |$_)}#%&amp;//:&gt;&gt;?\`aabeqqss
</code></pre>
<p><a href="https://tio.run/##ZY7dboMwDIVfxeoYClsGJWGhMBUehDIGEvSCVqMgLqqQvjrLD7SbJn3HsWzn2F3dn9h8voLdwH7mw1hBiw6jw0f@Im63zCWe6@fTlCJViFvHPfZ1F/NUPcBHQIljFbbdgkzfZCrwJ321CpxJaXIhUFUeYbIKRzw9254XJ0l6@CrLqr5chmH@gKG8wsYq3E4egxzYJ8AbkFYbaL57yLYYtjmGLIoiDI/gExqYqJo@BrJCl4Jsh7rwvrKTTQxMOvz5QzXBipllGmkQLrN3yO9dBjWi7vyP6miDxYVq8/Bxwt3QLN9pfGZEiRELlPL5Bw" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<p>The inner subroutine name <code>k</code> and its argument <code>u</code> were somewhat haphazardly chosen to try to produce more triples and runs.</p>
<ul>
<li><code>bag |$_</code> converts the argument list into a <code>Bag</code> (a set with multiplicity) which is then given to the inner recursive subroutine <code>k</code>.</li>
<li>The subroutine returns true if <code>u{*} ~~ [.2/.1]</code>, that is, if the bag contains a single element with multiplicity 2.  This is the pair that a winning mah jong hand must contain.</li>
<li>Otherwise, for the keys 𝑥 in the bag (<code>u{*}:k</code>), return true if the bag is a superset (<code>u (&gt;) $_</code>) of either the run 𝑥, 𝑥 + 1, 𝑥 + 2 (<code>^3 + $_</code>) or the triple 𝑥, 𝑥, 𝑥 (<code>[$_, $_, $_]</code>), and the bag minus those elements (<code>u (-) $_</code>) produces a true result when passed to the inner recursive function <code>k</code>.  (Normally I prefer using the Unicode characters for superset (<code>⊃</code>) and set minus (<code>∖</code>), which are the same number of bytes as the equivalent plain ASCII operators (<code>(&gt;)</code> and <code>(-)</code> respectively), but then I'd have to repeat both of them twice in the trailing comment for a substantial byte penalty.)</li>
</ul>
<p>Of course, the trailing comment <code>#%&amp;//:&gt;&gt;?\`aabeqqss</code> makes the overall code snippet into a winning numerical mah jong hand.  The function takes an infeasibly long time to validate itself; I constructed the comment by visual inspection of the function's character distribution.</p>
<p>The pair is: <code>~~</code></p>
<p>The runs are: <code>#$%</code>, <code>()*</code>, <code>()*</code>, <code>+,-</code>, <code>123</code>, <code>[\]</code>, <code>[\]</code>, <code>^_</code> plus a backtick I can't figure out how to escape, <code>pqr</code>, <code>pqr</code></p>
<p>The triples are: <code>   </code>, <code>   </code>, <code>$$$</code>, <code>$$$</code>, <code>&amp;&amp;&amp;</code>, <code>(((</code>, <code>)))</code>, <code>,,,</code>, <code>...</code>, <code>///</code>, <code>:::</code>, <code>&gt;&gt;&gt;</code>, <code>???</code>, <code>___</code>, <code>___</code>, <code>aaa</code>, <code>bbb</code>, <code>eee</code>, <code>ggg</code>, <code>kkk</code>, <code>sss</code>, <code>uuu</code>, <code>uuu</code>, <code>{{{</code>, <code>{{{</code>, <code>|||</code>, <code>}}}</code>, <code>}}}</code></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>128</s> <s>125</s> 122 bytes</h1>
<pre><code>¿⁼²﹪Ｌθ³«≔⟦⟧η≔⟦⟧ζＷ⌊⁻θη«⊞ηι⊞ζ⟦ι№θι⟧»⊞υζＦυ¿⁼¹ＬΦι﹪§κ¹↔³Ｐ¹Ｆη¿⁼³ＬΦι×§λ¹›²↔⁻κ§λ⁰⊞υＥι⟦§λ⁰⁻§λ¹›²↔⁻κ§λ⁰⟧»Ｗ›ηη«⊞⊞⌊⌊№№≔Φ﹪××⁻⁻¹ＥＥＦＰＰＷ∕»
</code></pre>
<p><a href="https://tio.run/##fY/BagIxEIZfpQ/gpdrah1n2IF56KBR8AhdUXOlx697qyQjag7hgNpuAMHuP7zAvkEfY/hMrvRU@SJh8M/Nn/DqajN9Hb11HF84cnYLZB/fta6rowHnBG8Wbndd/13Nwmj9WnFlfew1p9eW1N3KcoeA2W@PFwCWL6nUuLeo6vy0wMh0W9tDON2R4UVAV3FFeFAZGq/q12hKShTRt6ARTtjZS4uwYZwe3lVXqXsvsPw2SSNJPGyS@RRfwGTBbC3nhFaK1ZVuiVcYh1jaiEDKieflJtuuS5LH30I8MIk93niPDyAtI0x8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Uses the Charcoal code page. Outputs a Charcoal boolean, i.e. <code>-</code> for a winning hand, nothing if not. Explanation:</p>
<pre><code>¿⁼²﹪Ｌθ³«
</code></pre>
<p>Check that the length is satisfactory.</p>
<pre><code>≔⟦⟧η≔⟦⟧ζＷ⌊⁻θη«⊞ηι⊞ζ⟦ι№θι⟧»
</code></pre>
<p>Count the number of times each number appears in the array.</p>
<pre><code>⊞υζＦυ
</code></pre>
<p>Start a breadth first search with the original list of counts.</p>
<pre><code>¿⁼¹ＬΦι﹪§κ¹↔³Ｐ¹
</code></pre>
<p>If this hand is all sets of <code>3</code> identical numbers except one, then it is a winning hand. Otherwise:</p>
<pre><code>Ｆη
</code></pre>
<p>Loop over all numbers that appeared.</p>
<pre><code>¿⁼³ＬΦι×§λ¹›²↔⁻κ§λ⁰
</code></pre>
<p>Check to see whether this number might be the middle of a run of three.</p>
<pre><code>⊞υＥι⟦§λ⁰⁻§λ¹›²↔⁻κ§λ⁰⟧»
</code></pre>
<p>If so then remove that run and add the result to the list of hands to check.</p>
<pre><code>Ｗ›ηη«⊞⊞⌊⌊№№≔Φ﹪××⁻⁻¹ＥＥＦＰＰＷ∕»
</code></pre>
<p>Filler bytes to satisfy the source layout, wrapped in a <code>while</code> loop whose condition (value greater than itself) can never be true.</p>
<p>128 bytes for an optimised version that's just about fast enough to verify its own bytes:</p>
<pre><code>¿⁼²﹪Ｌθ³«≔⟦⟧η≔⟦⟧ζＷ⌊⁻θη«⊞ηι⊞ζ⟦ι№θι⟧»⊞υζＦυ¿⁼¹ＬΦι﹪§κ¹↔³Ｐ¹Ｆ⁻ＥΦη⁼³ＬΦι×§μ¹›²↔⁻κ§μ⁰Ｅι⟦§μ⁰⁻§μ¹›²↔⁻κ§μ⁰⟧υ⊞υκ»¿›ηη«⊞⊞⌊⌊№№≔﹪××⁻¹ＥＦＰＰＷＷ∕κκυυ»
</code></pre>
<p><a href="https://tio.run/##pVLBasJAEP2VfkAPWhtNvkU8bGJCD4VCTz0qaKnSo9VbPRmh7UEUjImBwnrf/MP@QD4hndkNzNjiqbA819k3b97MJLgTj8GDuK8q@a2HudyW6UeZf6mD3MlPPZnpZayXa5XQdV/miX6d6uFRHVQCpOm7SlSKP3ugwG00h5cUuPII0WKMKXExtgVSVAcW1JFrlclUP8/krsw3@BKDapmv4D1B7q7mnhZAhVQ9yOQW@Fg7w5AebpAOteL6Lzxd5oKlYmwtZfIIfgYZWLc94IGu4IzmeCYzcHhanBaoCNZW4A5cmpPgCF7eVKayYgyNHauq2208@dH1FWDf4A2icBCDADFqmnjLxF1E18T7vkGTFV6IR8LcO4hNzyj0SdNmWc2GQ5HQo0it4FPcdZmCR7UEz2K5QZsiZ502qUfRIjXbu7g1EZ@YXpvm0G8whTb1FThMzWW1WhdqCVaLufJD2oXH9K2fM36D6tbTuMCxCv@vVW/W@T3tmu@xOYdsp392bdF@FU22WZd9S/UuBEO@O4fmbzdSY4dhQN4sRsyz8Hq9Hw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Add the <code>-x</code> argument to show the hex dump which you can compare against the input.</p>
<p>122 bytes for an optimised version which relies on the trailing junk being unparseable rather than wrapping it in a condition:</p>
<pre><code>¿⁼²﹪Ｌθ³«≔⟦⟧ηＷ⌊⁻θＥη§κ⁰⊞η⟦ι№θι⟧⊞υηＦυ¿⁼¹ＬΦι﹪§κ¹↔³Ｐ¹Ｆ⁻ＥΦＥι§κ⁰⁼³ＬΦι×§μ¹›²↔⁻κ§μ⁰Ｅι⟦§μ⁰⁻§μ¹›²↔⁻κ§μ⁰⟧υ⊞υκ»⌊⌊№№≔≔§﹪⁻⁰¹›¿ＥＥＦＰＰＷＷηηυυ
</code></pre>
<p><a href="https://tio.run/##pVI7TsNAFLwKB6CwCXHss0Qp/IlFgYRERUmkGCkRZRQ6UmFLQBElhWPHUqSlX99hL@AjmPcx2jUiFfJqEr@dmZ23z@GNfx/e@bdtK05qVoldU7w31ac8iL34UIuV2qRqk8m8qXL1vFSzozw01ZvMRSZLNduq5avMgSMLNV/LA/xsMqjVCSrSOmHTAh2BA96oE4V6Wol9U21xJwVTtEwRih9fUO071dcLFMFEPZZiB0oMUWIJeKSB87tX2DrPhWh1wuFKccRuYM3XuKDPxUpkkA8EQGWDE7jTgmhbWngNEp46qZO2HY@thyC@vACMCK8Q/SFiGCLGNtUHVHcRXapHASGpplSPRoi2R8xIa8Oh5vjX9J@0gYVoGbvsOSUH19UOXOGzmB8bqtDRlV4vtu7CH2gf7q6XhJieozuNLMPB0R1xL@zW9eX93VeXYXAmg2@ojLTBVE/BM85l5x7f@p0hOsNhh/@fxffP99ybAvM9PX3bmKBrfDOM7NxNwfDvpYp1dx06ei4djjTyl8AYd9kmk28" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Add the <code>-x</code> argument to show the hex dump which you can compare against the input.</p>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES6), <s> 143 122 </s> 119 bytes</h1>
<p><em>-24 bytes thanks to <a href="https://codegolf.stackexchange.com/users/44718/tsh">@tsh</a>!</em></p>
<p>Expects an <code>Uint32Array</code>. Returns a Boolean value.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;(q=([v,...f],e)=&gt;6/v?[e,4,4.5].some(t=&gt;q(f.filter(i=&gt;p&gt;t|v+t%1*p-i||0%[p*=2],p=2),t&lt;p?4&gt;t?4:e:1%0)):e&gt;3)(n.sort(),3)
</code></pre>
<p><a href="https://tio.run/##nZDNTsMwDMfvfYpo0qRkZKFNsu6LZOLAnmCcSg/RSFlRabs0FE3au5euYaXAjehnK7Id52@/qlpVe5OWdpoXz7rZiiYXEh4FjGpMCElirJGQ4W29iTTmmJNZTKriTUMr5BEmJEkzqw1MhSylPdc3dhxMyml6PvvjqJwIGuNSUITtXbnh0m74Sq@CsY/QSkuGYN72MhYizFCzL/KqyDTJihc4inbm3R5O8QitvcgDIPIx8GN8uS2XSwy@XUAZd96lAwzoFdaH2pJ5F5pdWbRpDMK2y693rINfcdVhR9ti3lf30OGPDld00fyX2Is9khTmQe0PUAEhwXDyLcz1B3hMc8vovTHqBBVqz9rzfuznKY@2KqsGC/rS1ctjne75cL5eq5ts0RGEzhh1FvKL/U9k8wk" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>The above function is too slow to validate itself on TIO, so this is using my original answer with an additional optimization:</p>
<p><a href="https://tio.run/##Xc/PToQwEAbw@z4FbgKZQqlQ0APLlOhh38AT4UCwNRhs@VMxJrw7FuNh4xwnk@/7zXu7tks396ONtXmV@xV3hQImhHqljDHVUIkJQZHer5UseRDUnOb0oWGL@ZBg3a3GlBpUTPWDlTP0KHTIhd36eI2tz0O9bXdRpAn9XQfBBIbKCGyZETeFREwJKJc3WyBkH6T1Okfx0Dvr/xQHeXSQWjpDzm4UE9wCRle/RtZPwzHuty3x6zFE3tAROaG2HKtc2CovZJH6yUEQGQH9J6AZOV9Op87oxQySDeYNrqDll/fSa5vxp3luv@H5UylXdTiPJy77Dw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s>47</s> <s>47</s> <s>44</s> <s>41</s> 38 bytes</h1>
<pre><code>œʒ3ôʒ¥J&gt;}gy3ôʒ¥T&gt;SQ}g+3*Ig&gt;Q}ćQ,¥›HUyy
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f//6ORTk4wPbzk16dBSL7va9EooO8QuOLA2XdtYyzPdLrD2SHugzqGljxp2eYRWVv7/H22oo2Cko2Cso2Cio2AaCwA" rel="nofollow noreferrer">Try it online!</a>, or <a href="https://tio.run/##yy9OTMpM/V9Waa@koGunoGRfeWjl/6OTT00yPrzl1KRDS73satMroewQu@DA2nRtY61D69LtAmuPtAfqHFr6qGGXR2hl5f//0dGxOgrRhiDCQEfBAMzRUTDWUTDVUTDXUbCEChjBkDFIwNLSEigFJwyNjE0gJEI10ASgmGlsLAA" rel="nofollow noreferrer">try all test cases (this code can handle in under a minute)</a>.</p>
<p><a href="https://tio.run/##yy9OTMpM/a/0/@jkU5OMD285NenQUi@72vRKKDvELjiwNl3bWMsz3S6w9kh7oM6hpY8adnmEVlb@Vzq07cKec1uP7jvSVpxdW11Waa@koGunoGQPEqk8vEKn9j8A" rel="nofollow noreferrer">See the codepoints</a></p>
<p>Returns <code>0</code> for true and <code>[]</code> for false.</p>
<h2>Explanation</h2>
<p>The general approach is this: Test for the existence of a permutation such that if we split it to parts of length 3, and then keep all the valid ones and count them, and multiply by 3, we should get 1 plus the length of the original input.</p>
<pre><code>œ       # all permutations
ʒ       # keep those such that:
 3ô      # split to parts of length 3
 ʒ       # keep parts where:
  ¥       # their differences
  J       # joined to a string
  &gt;       # plus one
 }       # (is equal to 1)
 g       # find the length
 y       # push the input again
 3ô      # and split to parts of length 3
 ʒ       # keep parts such that:
  ¥      # their differences
  T&gt;     # 11
  S      # [1, 1]
  Q      # [1, 1] is equal to the differences
 }
 g       # take their lengths
 +       # sum the lengths of the two types of parts
 3*      # times 3
 I       # input
 g       # length
 &gt;       # plus one
 Q       # is equal to the number of valid parts times 3
}
ćQ      # test whether the array is empty, by comparing arr[0] == arr[1:]
,        # output - this suppresses implicit output, so the rest of the code doesn't matter
¥›HUyy  # filler to satisfy the self validation requirement
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 50 bytes</h1>
<pre><code>°þþ&amp;&amp;,@ƑƒWß»Ȥ
WÞW+þ@3’œ&amp;ƑƇœ-@€Ʋ€Ẏ$ƬẎŒɠ%¹Ƈɗ€3‘œ&amp;ƑƇ3
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///QhsP7Du9TU9NxODbx2KTww/MP7T6xhCv88Lxw7cP7HIwfNcw8OlkNKNV@dLKuw6OmNcc2AYmHu/pUjoHIo5NOLlA9tPNY@8npQGGg6hlQ1cb/D@08PMMr89HGdUAjjnX5H5tof7j94a4dXA937ju0E8S1ftQwR0HXTuFRw1zrw@1cD3dvOTopDGjK4XYgEfn/v5KSUrSBjoJBLFe0paWljgKCMDQyNoGQQDlDHQUjGDKG8IGS5mC@KQxZAOV0FMyA@pF1GIORCQxBlJqBEVC/OUQpHBkhWwRBQBUgF2KiWC4lrAF7aBvlIavEFQ1yGcR1xmA3m8M9BncnxEsWYGRoBsHGRhBsZgLCscAABgA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>The main part is a monadic link that takes a list of integers and returns an empty list for false and a list containing one or more items for truthy. To meet the challenge rules, the program includes another link above the main one which is just filler.</p>
<p>Completes all test cases including itself in about 17 seconds on TIO. Full explanation to follow. Note the footer turns the falsy and truthy outcomes to 0 and 1 for more compact printing.</p>
<p>General explanation:</p>
<ul>
<li>Remove every possible combination of runs of three (including removing none)</li>
<li>Check the remaining integers are in groups of length 0 mod 3, except for one that is of length 2 mod 3</li>
</ul>
<h2>Explanation</h2>
<pre><code>°þþ&amp;&amp;,@ƑƒWß»Ȥ | Filler to meet challenge requirements

WÞ                                   | Sort (technically with order based on that after wrapping each item in a list, but this doesn't affect sort order)
  W                                  | Wrap in a list
                   $Ƭ                | Repeat the following until no changes are made, gathering up intermediate results
                Ʋ€                   | - For each list in the lists of lists (example for e.g. [1, 2, 3, 4, 4])
   +þ@3                              |   - Outer addition using 1, 2, 3 e.g. [[[2, 3, 4], [3, 4, 5], [4, 5, 6], [5, 6, 7], [5, 6, 7]]
       ’                             |   - Decrease by 1 e.g. [[1, 2, 3], [2, 3, 4], [3, 4, 5], [4, 5, 6], [4, 5, 6]]
        œ&amp;ƑƇ                         |   - Filter, keeping only those lists that were seen in the original list e.g. [[1, 2, 3], [2, 3, 4]]
            œ-@€                     |   - Filter the original list removing each of these in turn [[4, 4], [1, 4]]
                  Ẏ                  | - Join inner lists together, leaving one list of lists
                     Ẏ               | Join all gathered intermediate results into one list of lists
                           ɗ€        | For each list within this list:
                      Œɠ             | - Run lengths
                        %    3       | - Mod 3
                         ¹Ƈ          | - Only keep those non-zero (i.e. those lists that were not a multiple of 3 in length)
                              ‘      | Increase by 1
                               œ&amp;ƑƇ3 | Only keep those that consist of a single 3
</code></pre>
<p>Some of the code above (e.g. using <code>WÞ</code> rather than <code>Ṣ</code>) would be suboptimal in normal code-golf challenges, but here improve length by reducing the amount of filler required.</p>
<p>The runtime is sufficient to complete all the test cases, but as written becomes very inefficient as the number of runs of three consecutive numbers increases. This can be greatly improved by adding a uniquify step (<a href="https://tio.run/##y0rNyan8///QBp3D@w7vU1NVdTg28dik8MPzD@0@sSQw8FjXsS6u8MPzwrUP73MwftQw8@hkNaCC9qOTdR0eNa05tglIPNzVB1IHoo9OOrlA9dDOY@0npwMlgOpnQNUb/z@08/AMr8xHG9cBDTnW5X9sov3h9oe7dnA93Lnv0E4Q1/pRwxwFXTuFRw1zrQ@3cz3cveXopDCgKYfbgUTk//9KSkrRBjoKBrFc0ZaWljoKCMLQyNgEQgLlDHUUjGDIGMIHSpqD@aYwZAGU01EwA@pH1mEMRiYwBFFqBkZA/eYQpXBkhGwRBAFVgFyIiWK5lPCF8KFt1AhiJa5okBMhzjQGO94c7kO4gyF@swAjQzMINjaCYDMTEI4FhjQA" rel="nofollow noreferrer">TIO</a>), reducing the run time for all test cases and my original code down to ~0.3 seconds total).</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 122 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(A,e,k,n)=&gt;1/n&amp;&amp;!{'1,1':1,'0,0':'B\():'|1}[[e-k,k-n]]?!!0:A+A?A.some((C,j)=&gt;f(A.filter(B=&gt;j--),C,...1/n?[]:[e,k])):e==+k
</code></pre>
<p><a href="https://tio.run/##jZBRT4MwEMff@RTdHkabHZXChA3TLWxxn8C3rg9kFjdAMDBNjPrZsaMOUV9Mfndp7q53/7sseUmafX18Ojllda/aLW9TjmNQkENJ@JJdlZPJ6M1mwOyIge2Ca0f2eodJZL@zDyGUk0PulFKuRiM3iqfxKqZN9agw3kCmG6Q4pumxOKkar/kycxwCG6CU6sYrISOhB0lCIsX5NG/3VdlUhaJF9YDH4q5@Ph1e5ZjcWMJCSLiAXAnn12KxAPTtmOfPjDdpBsi74PchXRJ2oesLc50GFOguv/75HbMLpjro0C3CvrrHG040mKKz5r/onLRoWtW3yf6AE8SXaLj6FieE6K2tH/fYlWKbFM3gIF86ejl@pzMc7tNrM5vMO1hgzPeMBbOzyf9oaj8B" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Besides tuplets: <code>&amp;&amp; ++,,-- --..// AABBCC [\] ijjkkl mno rst {|}</code></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/265480/">265480</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




