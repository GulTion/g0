<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::75239</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>640</td><td>Python3</td><td>240102T183744Z</td><td><a href="https://codegolf.stackexchange.com/questions/75239/help-develop-alphys-newest-puzzle/268958#268958">Ajax1234</a></td></tr>
<tr d-ix="1"><td>529</td><td>C</td><td>170119T215232Z</td><td><a href="https://codegolf.stackexchange.com/questions/75239/help-develop-alphys-newest-puzzle/107436#107436">Seth</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 640 bytes</h1>
<pre class="lang-py prettyprint-override"><code>M=[(1,0),(-1,0),(0,-1),(0,1)]
E=enumerate
def f(b):
 D=eval(str(b))
 C=[(j,k)for j,r in E(b)for k,_ in E(r)]
 q=[(len(b)//2,0,b,0,{})]
 while q:
  x,y,b,s,m=q.pop(0)
  b[x][y]='#'
  if y==len(b[0])-1:return b
  for X,Y in M:
   if(K:=(x+X,y+Y))in C and K not in m.get((x,y),[])and(B:=D[x+X][y+Y])not in['R','Y']and(B!='B'or(s!=1 and[]==[1 for Q,W in M if(x+X+Q,y+Y+W)in C and'Y'==D[x+X+Q][y+Y+W]])):
     I=eval(str(b));P={**m,(x,y):m.get((x,y),[])+[K]}
     if'U'==B:
      T=2;I[x+X][y+Y]='#';Z,G=x+X+X,y+Y+Y;J,K=[K,(Z,G)][(Z,G)in C]
      if D[J][K]not in['R','Y']:q+=[(J,K,I,[T,1]['O'==D[J][K]],P)]
     else:q+=[(*K,I,[s,1]['O'==B],P)]
</code></pre>
<p><a href="https://tio.run/##pVNfT9swEH@eP4XHHmI3hjUFpKnILx6TBRWzsRYxz7OmVqQj0CYlCRvVtM/Ozk5gGk@TsBQ75/v9uXOczba7qqv9d5vm4eGMO5KxMWVkt1/GbDeLS0Y9@sCL6m5dNPOuQJfFEi/Jgk4RPubFj/mKtF0DMUX4PYhcsxu6rBt8zRpcVvgDZEJ4w771YQNy@BaAq6KC3Nu3EzZmC3h@/Q6Zn1flqsC3II7v2RYSLVvz271NvSFjcMALd@/d1vPkTQJRucRbzqOSG3u6m02bortrKryAZLD9zGywPQt6gCazKSf36We2TS2lkHiP59UlnuGq7gJuvfe96AgBZ8qcp5AjYsqPHVDANbWe9kCXmIQlNvER8ZonIqkb0r7mWdBznnOXRf9zdhH9gzeIpOfBOb14sgYN3uun59EhvfCe0lguxif/nO@R5r9GozWL5U2flZq6mf/ds8plkoOqGETwJz45OvnbQji6oy9M8mAaTyK1R6dsxt2MEdin3sUllOgHCTjnY3fqweNZ/9PbFD4lsNkJc59Y5l2iYkcR7Jmmg0SxaosePIrY9gkrIuqhzTDHOzs7SEgrJNJShzkXWiCVwxbSWmmNAqKdDFADAxmtDQBVeBMDYH8AaGuBBDRrpDQwRV2rc2BYI5RVEimhpbWA0UZqZbVCVluwDCxplDDWIgNkIQAc1Q8e1YU1FgRBwkil@qplbpSCeqQyIg8d6DyHLWhL5hYskBRKQzF9SuTQmYQijR7UUXs4yEsYBuYcZqWkFE87YQ6I8Ct29bdFPW8uSQu35tVw/Z0blT5ewDJcv2W56oqGfKyrguF2r92syo4kX6uEwudBaNOUVR/vXddlRdbzDUn6d7Ykfw0yGsYjfDcZTcb0v8mTl5D3X0I@eAn5MJIf/gA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h2>C 529 bytes</h2>

<pre><code>#define M m[y][x]
char**m,*l,i;main(Y,X){for(;scanf("%ms",&amp;l)&gt;0;)(m=realloc(m,Y*8))[Y-1]=l,X=puts(m[Y++-1])-2;puts("");int s(x,y,c,d){(x&lt;0|y&lt;0|y/Y)?:({if(M^'R'&amp;&amp;M^'Y')if(M^'B'||c^2&amp;&amp;!((y&amp;&amp;m[y-1][x]=='Y')|(x&amp;&amp;m[y][x-1]=='Y')|(y&lt;Y-1&amp;&amp;m[y+1][x]=='Y')|(x&lt;X-1&amp;&amp;m[y][x+1]=='Y'))){x^X?:({M='#';return 1;});c=M^'O'?c:2;M^'U'?:({return s(x+(d&lt;4?d-2:0),y+(d&gt;3?d-5:0),1,d)?({M='#';1;}):0;});if(d^1&amp;&amp;s(x+1,y,c,3)||d^4&amp;&amp;s(x,y+1,c,6)||d^6&amp;&amp;s(x,y-1,c,4)||d^3&amp;&amp;s(x-1,y,c,1)){M='#';return 1;}}});return 0;}s(0,--Y/2,0,3);for(;i&lt;Y;)puts(m[i++]);}
</code></pre>

<p>We approach the puzzle by stepping first to the right, provided we are not blocked, then trying up, then down and finally back to the left.  The search is recursive and once we identify a successful path, we mark the spaces in our matrix and return.</p>

<h2><a href="http://ideone.com/3uDkHU" rel="nofollow noreferrer">Try it Online</a></h2>

<h3>Ungolfed</h3>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;malloc.h&gt;
char**m,*l,i;
main(Y,X) {
  for(Y=1;scanf("%ms",&amp;l)&gt;0;Y++)
      m=realloc(m,Y*8),
      m[Y-1]=l,
      X=puts(m[Y-1])-2;
  puts("");
  int step(x,y,c,d,i){
    if(x&lt;0||y&lt;0||y&gt;=Y)return 0;
      if(m[y][x]=='R'||m[y][x]=='Y')return 0;
      if(m[y][x]=='B'&amp;&amp;(c==2||(y&amp;&amp;m[y-1][x]=='Y')||(x&amp;&amp;m[y][x-1]=='Y')
               ||(y&lt;Y-1&amp;&amp;m[y+1][x]=='Y')||(x&lt;X-1&amp;&amp;m[y][x+1]=='Y')))return 0;
      if(x==X){m[y][x]='#';return 1;}
      if(m[y][x]=='O')c=2;
      if(m[y][x]=='U')return step(x+(d&lt;4?d-2:0),y+(d&gt;3?d-5:0),1,d,i+1)?({m[y][x]='#';1;}):0;
      else if((d!=1&amp;&amp;step(x+1,y,c,3,i+1)) ||
    (d!=4&amp;&amp;step(x,y+1,c,6,i+1)) || (d!=6&amp;&amp;step(x,y-1,c,4,i+1)) ||
    (d!=3&amp;&amp;step(x-1,y,c,1,i+1))) {m[y][x]='#';return 1;}
      return 0;
  }
  step(0,--Y/2,0,3,0);
  for(;i&lt;Y;)puts(m[i++]);
}
</code></pre>

<hr>

<h3>Example Output 1</h3>

<pre><code>PYYOPPPP
YRGGRYRG
PGPBYPUR
PYRBOYOG
OBPGYYPP
PRGPOYPO
YPYOUGPP
YGROBRYY
RGRYBBOG

PYY#####
YR##RYRG
###BYPUR
#YRBOYOG
#BPGYYPP
PRGPOYPO
YPYOUGPP
YGROBRYY
RGRYBBOG
</code></pre>

<h3>Example Output 2</h3>

<pre><code>PBYRYPGP
OBRGOOBG
PGPGUROO
PUGORBUG
PUPUUURO
BGGUYPRG
GBOPGGRG
PUPUBUYB
GYOPRPOG

PBYRYPGP
OBRGOOBG
PGPGUROO
PUGORBUG
###UUURO
BG#UYPRG
GB####RG
PUPUB#YB
GYOPR###
</code></pre>

<h3>Example Output 3</h3>

<pre><code>RRRR
RPPR
PUOR
RPBP

RRRR
R##R
###R
R###
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/75239/">75239</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




