<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::49307</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>046</td><td>Pip</td><td>240329T061632Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/272184#272184">DLosc</a></td></tr>
<tr d-ix="1"><td>046</td><td>Retina 0.8.2</td><td>240329T044613Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/272182#272182">DLosc</a></td></tr>
<tr d-ix="2"><td>052</td><td>J</td><td>230412T102849Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/260003#260003">elcaro</a></td></tr>
<tr d-ix="3"><td>122</td><td>Lua</td><td>230413T214036Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/260063#260063">bluswimm</a></td></tr>
<tr d-ix="4"><td>225</td><td>Vyxal L</td><td>210621T061358Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/230142#230142">emanresu</a></td></tr>
<tr d-ix="5"><td>046</td><td>K ngn/k</td><td>230412T105055Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/260006#260006">ovs</a></td></tr>
<tr d-ix="6"><td>158</td><td>PowerShell</td><td>230414T192304Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/260090#260090">James Fl</a></td></tr>
<tr d-ix="7"><td>114</td><td>JavaScript ES6</td><td>150429T102408Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49436#49436">edc65</a></td></tr>
<tr d-ix="8"><td>065</td><td>K ngn/k</td><td>230412T114146Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/260008#260008">doug</a></td></tr>
<tr d-ix="9"><td>072</td><td>k9 2021.03.27</td><td>230411T225047Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/259984#259984">chrispsn</a></td></tr>
<tr d-ix="10"><td>029</td><td>Japt v2.0a0</td><td>201030T110855Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/214419#214419">Shaggy</a></td></tr>
<tr d-ix="11"><td>089</td><td>APL Dyalog Extended</td><td>201012T053649Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/212360#212360">Razetime</a></td></tr>
<tr d-ix="12"><td>064</td><td>Perl 5 pl</td><td>200603T221644Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/205610#205610">Xcali</a></td></tr>
<tr d-ix="13"><td>034</td><td>05AB1E</td><td>200603T124712Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/205593#205593">Kevin Cr</a></td></tr>
<tr d-ix="14"><td>153</td><td>C</td><td>150429T170415Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49449#49449">anatolyg</a></td></tr>
<tr d-ix="15"><td>132</td><td>R</td><td>150715T004939Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/53125#53125">MickyT</a></td></tr>
<tr d-ix="16"><td>135</td><td>Ruby</td><td>150428T161133Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49406#49406">14mRh4X0</a></td></tr>
<tr d-ix="17"><td>nan</td><td></td><td>150502T202904Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49562#49562">Abr001am</a></td></tr>
<tr d-ix="18"><td>187</td><td>PHP</td><td>150503T000916Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49564#49564">axiac</a></td></tr>
<tr d-ix="19"><td>094</td><td>Ruby</td><td>150502T221806Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49563#49563">blutoran</a></td></tr>
<tr d-ix="20"><td>163</td><td>Scala</td><td>150430T071631Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49469#49469">Jacob</a></td></tr>
<tr d-ix="21"><td>136</td><td>Python 2</td><td>150428T121700Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49392#49392">Uri Gran</a></td></tr>
<tr d-ix="22"><td>252</td><td>rs</td><td>150428T013024Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49371#49371">kirbyfan</a></td></tr>
<tr d-ix="23"><td>nan</td><td>Python 3</td><td>150427T193603Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49352#49352">Tim</a></td></tr>
<tr d-ix="24"><td>165</td><td>Haskell</td><td>150427T181548Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49343#49343">nimi</a></td></tr>
<tr d-ix="25"><td>038</td><td>CJam</td><td>150427T082613Z</td><td><a href="https://codegolf.stackexchange.com/questions/49307/road-length-encoding/49310#49310">Optimize</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a>, 46 bytes</h1>
<pre><code>a^:CXUYP'_X$+aPnP@CH_M$X RUWaR'N&quot;==&quot;R'P&quot;- &quot;n.y
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgwYKlpSVpuhY39RLjrJwjQiMD1OMjVLQTA_ICHJw94n1VIhSCQsMTg9T9lGxtlYLUA5R0FZTy9CohuqCat0YrmfiZBBga-5kHGPoZBhj5GQUoxUIlAQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Explanation</h3>
<pre class="lang-lisp prettyprint-override"><code>a^:CXU
a      ; Command-line argument
 ^:    ; Split by this separator and assign back to a:
    XU ;   Built-in regex `[A-Z]` (uppercase letters)
   C   ;   Wrapped in capturing group
       ; Splitting by a regex wrapped in a capturing group has the effect of keeping
       ; the matches of the regex in the result list, so this gives a list of
       ; alternating numbers and letters (with a stray empty string at the end)

YP'_X$+a
       a ; The new value of a, calculated above
     $+  ; Fold on addition (sum, treating letters as 0)
  '_X    ; String of underscores of that length
YP       ; Print, with trailing newline, and also yank into y variable

Pn ; Print newline, with trailing newline

P@CH_M$X RUWaR'N&quot;==&quot;R'P&quot;- &quot;
            a               ; In a,
             R'N&quot;==&quot;        ; Replace &quot;N&quot; with &quot;==&quot;
                    R'P&quot;- &quot; ; Replace &quot;P&quot; with &quot;- &quot;
          UW                ; Unweave, giving a list containing a list of numbers and
                            ; a list of strings (&quot;==&quot; or &quot;- &quot;)
         R                  ; Reverse so the list of strings comes first
      $X                    ; Fold on string repetition
                            ; We now have a list of strings like &quot;====&quot; or &quot;- - &quot;
                            ; Each one is twice as long as it should be
     M                      ; Map this function over that list:
  CH_                       ;   Chop the string into two equal-length halves
 @                          ;   and take the first one
P                           ; Print that list, joined together

n.y ; Print a newline concatenated with y (the underscore string from earlier)
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 46 bytes</h1>
<pre><code>\d+N
$*=
\d+P
$*-
--
- 
.+
$.0$*_¶¶¶$0¶¶$.0$*_
</code></pre>
<p><a href="https://tio.run/##K0otycxL/P8/JkXbj0tFy5YLyAgAMnS5dIFIgUtPm0tFz0BFK/7QNhBUMQCTYJH//038TAIs/cwDDP0MA4z8jAIA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<pre><code>\d+N
$*=
</code></pre>
<p>Match digits followed by <code>N</code>; treating the digits as a number, replace the match with that many <code>=</code>.</p>
<pre><code>\d+P
$*-
</code></pre>
<p>Same, but with <code>P</code> and <code>-</code>.</p>
<pre><code>--
- 
</code></pre>
<p>Replace any two consecutive dashes with dash-space.</p>
<pre><code>.+
$.0$*_¶¶¶$0¶¶$.0$*_
</code></pre>
<p>Replace the whole string with:</p>
<ul>
<li>Get the length of the whole match (<code>$.0</code>) and make a string of that many underscores (<code>$*_</code>)</li>
<li>Three newlines (<code>¶¶¶</code>)</li>
<li>The original match (<code>$0</code>)</li>
<li>Two more newlines (<code>¶¶</code>)</li>
<li>The same underscores code again</li>
</ul>
</div>
<div id="pu2" class="pu"><h1>J (<s>69</s> <s>59</s> <s>55</s> 52 bytes)</h1>
<p>-14 bytes thanks to <em>Raul Miller</em> and <em>ovs</em> on <em>The APL Farm</em> Discord.<br />
-3 bytes by removing noun assigments</p>
<pre><code>6$'_',4$'','',:'\d+.'(&quot;.@}:$'-= '#~'PNP'={:)rxapply]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=LYxLCoJQAEXnreJWwlUySXv0eSQ0cvh4CyhCUonIlCgoHraRJjZoES2l3fQxOKPLued239b143TM-pOXGFlc0RUW6X6QXCQ9j3bHm1fSYj8Eu1dqpRka6RzOcVnuLsv_V2X7OE8RejAGti3acujAwsCBkfKK7yAczMALUVUgW0kBRgglXRgPzInskMYJfqGmWj_T9aZABAol9FSNta98HahAsxHe" rel="nofollow noreferrer">Attempt This Online</a></p>
<h4>Explanation</h4>
<p><code>'\d.+'(...)rxapply]</code>: For every match of pattern <code>\d+</code>, apply the function...</p>
<p><code>&quot;.@}:$'-= '#~'PNP'={:</code>, a Fork/3-Train.</p>
<ul>
<li><code>'-= '#~'PNP'={:</code>: The right tine of the Fork. <code>{:</code> takes the last element (<code>'N'</code> or <code>'P'</code>), and checks it's     equality against <code>'PNP'</code>, then uses the resulting boolean mask to select from <code>'-= '</code>. <code>'P'</code> gets <code>1 0 1</code> so it  selects <code>'- '</code>, and N gets <code>0 1 0</code> and selects <code>'='</code>.</li>
<li><code>&quot;.@}:&quot;</code>: The left tine of the Fork. <code>}:</code> drops the last element, keeping the digit(s) as a sting. The string is converted to a integer with <code>&quot;.</code>, the Execute operator.</li>
<li><code>$</code>: The Reshape operator reshapes the right arg by the left arg</li>
</ul>
<p>The expression so far has produced the mid line, eg. <code>====- - =========- - - -=-==- </code>, which I will refer to as <code>m</code>  below.</p>
<p><code>,:</code> Itemize <code>m</code> (ie. Puts it in an array, changing the shape from <code>30</code> to <code>1 30</code>)</p>
<p><code>4$'',''</code> Prepend 2 blank rows (arrays are rectangular, so the 2 chars get padded to the width of <code>m</code>) and then reshape by 4. Since there are 3 rows, reshape cycles to reuse the first row, adding another blank line.</p>
<p><code>6$'_',</code> Prepends a <code>_</code> char (which again gets padded to the width of <code>m</code>) then reshapes to 6. Again, since there's  5 rows, reshaping cycles back to the first item in the array (ie. the top line) which is appended to the array, producing the final result.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.lua.org/" rel="nofollow noreferrer">Lua</a>, <strike>123</strike> 122 bytes</h1>

<pre class="lang-lua prettyprint-override"><code>p=print s=(...):gsub('(%d+)(.)',load'a,b=...return({N=&quot;=&quot;,P=&quot;- &quot;})[b]:rep(a):sub(1,a)')r=('_'):rep(#s)p(r)p'\n'p(s)p()p(r)
</code></pre>
<p><a href="https://tio.run/##HcvRCsIgFIDhVxlGnHPIBMcgEs4riPcVoWxEMJzovIqe3doufz7@ufrWEqf8jmtXGJVSZF6lBgQ8jidCRSDnxY/gZeC/5mmtOeLHsmAhHYtzJ750Cw@Tp4SezPZq6QkoM8ITaIdDoYSZEtwjJNxi79baYAd3tRenrXa97d0P" rel="nofollow noreferrer" title="Lua – Try It Online">Try it online!</a></p>
<p>Ungolfed Version:</p>

<pre class="lang-lua prettyprint-override"><code>p=print 
s=(...):gsub('(%d+)(.)',                       --For each number/letter pair
function(a,b)                                  --Number in a, letter in b
    return({N=&quot;=&quot;,P=&quot;- &quot;})[b]:rep(a):sub(1,a)  --Replace each number/letter pair 
                                               --with respective pattern
end)
r=('_'):rep(#s)                                --Create edges of road
p(r)p'\n'p(s)p()p(r)                           --Print road
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>L</code>, 180 bits<sup><a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">v1</a></sup>, 22.5 bytes</h1>
<pre><code>⁽aḊyC½`- =`½$İ$⌊Ẏ∑ƛ4↳Ǔ\_pǏ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=1#WyJMPSIsIiIsIuKBvWHhuIp5Q8K9YC0gPWDCvSTEsCTijIrhuo7iiJHGmzTihrPHk1xcX3DHjyIsIiIsIjRONFA5TjdQMU4xUDJOMTJQIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
<pre><code>  Ḋ                        # Group by...
⁽a                         # Is it an uppercase letter?
   y                       # Uninterleave - split into [numbers, chars]
    C½                     # Charcodes / 2 - N -&gt; 39, P -&gt; 40
            $İ             # Index into...
      `- =`½               # [&quot;- &quot;, &quot;=&quot;]
                Ẏ          # Extend to length
              $⌊           # numbers
                 ∑         # Concatenate into a single string
                  ƛ        # For each character
                   4↳      # Prepend three spaces
                     Ǔ     # Move a space to the end
                      \_p  # Prepend a _
                         Ǐ # Append the _
                           # L flag transposes and joins the whole thing
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, 46 bytes</h1>
<p>Created on the APL Farm with lots of input from chrispsn.</p>
<pre><code>{++(,/(.x@y)#'&quot;-=&quot;x_y#=&quot;PNP&quot;;&quot;_&quot;)@3\466}`c$!58
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs6rW1tbQ0dfQq3Co1FRWV9K1VaqIr1S2VQrwC1CyVopX0nQwjjExM6tNSFZRNLXg4kowsEpTUDI08lOCMwNgTBM/kwBLP/MAQz/DACM/oDgAQCoWRQ==" rel="nofollow noreferrer">Try it online!</a></p>
<hr />
<h1>k9 2021.03.27, <s>53</s> 52 bytes</h1>
<p>-1 byte thanks to chrispsn!</p>
<pre><code>++&quot;_  &quot;,|&quot;_ &quot;,,,/{.[x]#*&quot;-=&quot;y#=&quot;PNP&quot;}/'-2^(~=':64&gt;)^
</code></pre>
<p><a href="https://kparc.io/k/#f%3A%2B%2B%22_%20%20%22%2C%7C%22_%20%22%2C%2C%2C%2F%7B.%5Bx%5D%23*%22-%3D%22y%23%3D%22PNP%22%7D%2F%27-2%5E(%7E%3D%27%3A64%3E)%5E%3B%20f%20%2212P4N4P9N7P1N1P2N2P%22" rel="nofollow noreferrer">Try it online</a> on kparc.io!</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 158 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>$f='';($_|sls &quot;\d*\w&quot;-a|% m*).value|%{$n=($_|sls &quot;\d+&quot;-a|% m*).value;if($n-eq$null){$n=1};switch($_[-1]){N{$f+='='*$n}P{$f+=-join(1..$n|%{(' ','-')[$_%2]})}}}
</code></pre>
<p><strong>Ungolfed</strong></p>
<pre class="lang-powershell prettyprint-override"><code>$args|%{

    # empty string for adding road later
    $finalString=''

    # breaks every pair apart and selects the value (N4, P4, etc.)
    ($_|sls "\d*\w"-a|% m*).value|%{
       &#32;
        # selects just the number
        $num = ($_|sls "\d+"-a|% m*).value
       &#32;
        # for those pairs that don't have a number associated
        if($num -eq $null){$num = 1}
   &#32;
        # switch depending on the char
        switch($_[-1]){
           &#32;
            # nothing to do with N so append to finalString var
            N{
                $finalString += '=' * $num
            }

            # for loop to determine the alternating of the road pattern
            P{
                $finalString += -join (1..$num | %{(' ','-')[$_%2]})
            }
        }
    }
       &#32;
    # formats string for desired output
    "{0}`n`n`n{1}`n`n{0}" -f $("_"*$finalString.length),$finalString
}
</code></pre>
<p><a href="https://tio.run/##XY3RasMwDEXf9xXGKNhO6zCngTJCfsH4vS1Z2OImw3W3ul0eHH@75wQGYwjula6O0Od16m9u6I2J0N3Obs58BN0QUlNoZ2ccwsf3/Dhh3s0ZuuSs@O7Mo08Y2OYPsvkH1KOmYHn/BfZhDFtoEWo3jfe3IZ0duDgxLz3oTUMakoMNah34x3W0VBQF2PSDEkS2hBN2gDYrT4GFECL2z@HVLuXF2qQZI64RUNziHHRhenu@D2wL@inEiEUpMUqqklayUi9yr4QUqpRrtNhO7tSyWvw3rmRZKfwD" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1>JavaScript (ES6), 114</h1>
<p>Using  <a href="https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/template_strings" rel="nofollow noreferrer">template strings</a>, the 5 linefeeds are significant and thus must be counted.</p>
<pre class="lang-js prettyprint-override"><code>f=s=&gt;(b=(s=s.replace(/(\d+)(.)/g,(x,n,b)=&gt;(b&lt;'P'?'=':'- ').repeat(n).slice(0,n))).replace(/./g,'_'))+`
   

${s}

`+b
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a>, <s>71</s> <s>69</s> <s>68</s> <s>64</s> <s>69</s> <s>68</s> 65 bytes</h1>
<pre><code>{++&quot;_  &quot;,|&quot;_ &quot;,+&quot; =-&quot;@+/1(~&lt;\2=)\-78+*'&amp;.'!/|+0N 2#(&amp;~=':58&lt;x)_x}
</code></pre>
<p><a href="https://ngn.codeberg.page/k#eJxLs6rW1laKV1BQ0qkBUko62koKtrpKDtr6hhp1NjFGtpoxuuYW2lrqanrqivo12gZ+CkbKGmp1tupWphY2FZrxFbVcXMVWSiZ+JgGGBn7mAYZ+hgFGfkYBSlxcCQZWaQ7FAEE4FqE=" rel="nofollow noreferrer">Try it online!</a></p>
<p>-2 superfluous parens
<br/>-1 shuffling
<br/>-4 borrowing a parsing idea from ovs
<br/>+5 I actually prefer using &quot;-&quot; for the embankment, but what evs.
<br/>-1 woo hoo!
<br>-4 bye bye beloved Bubbler train...</p>
</div>
<div id="pu9" class="pu"><h1>k9 2021.03.27, 72 bytes</h1>
<pre><code>&quot; -=_&quot;{++(3;0;0;mod[x]+2*~x;0;3)}@{y*x+y}\&amp;?`P=!/`i`n$+-2^{9&lt;a|-a:-':x}^
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a> v2.0a0, <s>30</s> <s>29</s> <s>28</s> 29 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>Takes input in lowercase, prepend <code>v&lt;space&gt;</code> for +2 bytes if that's not allowed. Had to sacrifice a byte to fix a bug with inputs that contained a <code>0</code> :\</p>
<pre><code>ò!Í®n îZèÍg&quot;- =&quot;òÃ¬yÈû4 Ôû6'_
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=2.0a0&amp;code=8iHNrm4g7lrozWciLSA9IvLDrHnI%2bzQg1Ps2J18&amp;input=IjRuNHA5bjdwMW4xcDJuMnAi" rel="nofollow noreferrer">Try it</a></p>
<pre><code>ò!Í®n îZèÍg&quot;- =&quot;òÃ¬yÈû4 Ôû6'_     :Implicit input of string
ò!Í                               :Partition into the run length groups we need (See more detailed explanation below)
   ®                              :Map each Z
    n                             :   Convert to integer (the letter at the end is ignored)
      î                           :   Repeat and slice to that length
       Zè                         :     Count the occurrences in Z of
         Í                        :     &quot;n&quot; (see below for the why)
          g                       :     Index into
           &quot;- =&quot;ò                 :     Partitions of &quot;- =&quot; of length 2
                 Ã                :End map
                  ¬               :Join
                   y              :Transpose
                    È             :Pass each row through the following function and transpose back
                     û4           :   Centre pad with spaces to length 4
                        Ô         :   Reverse ('cause centre padding is right-biased)
                         û6'_     :   Centre pad with &quot;_&quot; to length 6
</code></pre>
<p>OK, I finally (think I) figured out how the partitioning is working! First the basics: The <code>ò</code> method partitions string between pairs of characters (X &amp; Y) that return a truthy value when run through the method that's passed as an argument. We're using <code>Í</code> here, which is the shortcut for <code>n2&lt;space&gt;</code>. The space is used to close the <code>ò</code> method and the <code>n</code> and the <code>2</code> being split into two separate arguments, with the second being ignored as <code>ò</code> only expects one argument. That means that we're currently testing <code>XnY</code> but, by adding the <code>!</code>, the elements get flipped giving us <code>YnX</code>.</p>
<p>And now for the trickery: The possible combinations we can have (where <code>L=[np]</code> &amp; D=<code>[0-9]</code>) are <code>DnL</code>, <code>LnD</code> &amp; <code>DnD</code> and, in all cases, both elements are strings, which is important. The <code>n</code> attempts to convert Y to an integer, run X on it as a method and convert it back to a string, with the following possible outcomes:</p>
<ul>
<li><code>Dnp</code> squares the integer resulting in a non-empty string, which is truthy, creating a partition.</li>
<li><code>Dnn</code> negates the integer resulting in a non-empty string, which is truthy, creating a partition.</li>
<li><code>DnD</code> &amp; <code>LnD</code>, for some reason that I can't figure out, both result in <code>0</code>, which is falsey, so no partition is created.</li>
</ul>
<p>Hopefully, that all made some sort of sense but, if it helps, <a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=2.0a0&amp;flags=LVI&amp;code=5EBbWFlZblggISFZblhdw2kiWCBZIFluWCBCb29sZWFuIrggrvk0IG/5OCC4w2nJIPot&amp;input=IjhuODhwODA4biI" rel="nofollow noreferrer">here's a handy table</a>.</p>
<p>And, as a final note: the <code>Í</code> works exactly the same way as above when passed to the <code>è</code> method, which only expects a single string argument.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, 89 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>{,⌿{⍪(⌽,2∘↓∘⊢)⍵,'  _'}¨⍪⍎¯1↓('\d+'⎕R{'(',⍵.Match})('[P]' '[N]'⎕R'⍴''- ''),' '⍴''=''),')⍵}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/v1rnUc/@6ke9qzQe9ezVMXrUMeNR22QQ2bVI81HvVh11BYV49dpDK4AqHvX2HVpvCJTWUI9J0VZ/1Dc1qFpdQ10HqEzPN7EkOaNWU0M9OiBWXUE92i8WLK/@qHeLurqugrq6JtAkCM8WzAEZXvs/7VHbBKCxj7qaH/WuAcoeWm/8qG0iUGdwkDOQDPHwDP6fpqBu4mcSYOlnHmDoZxhg5GcUoA4A" rel="nofollow noreferrer" title="APL (Dyalog Extended) – Try It Online">Try it online!</a></p>
<p>A huge, clunky solution with a lot of regex and <code>⍎</code>.</p>
<h2>Explanation</h2>
<p><code>('[P]' '[N]'⎕R'⍴''- ''),' '⍴''=''),')⍵</code> Replace <code>N</code> with code for producing '=' and <code>P</code> for producing '- ' with a closing bracket</p>
<p><code>('\d+'⎕R{'(',⍵.Match})</code> prepend an opening bracket to each digit
('\d+'⎕R{'(',⍵.Match})</p>
<p><code>⍎¯1↓</code> drop the last character, and execute (gives the road markings)</p>
<p><code>⍪</code> table it</p>
<p><code>⍵,'  _'}¨</code> add two spaces and underscore for each marking</p>
<p><code>⍪(⌽,2∘↓∘⊢)</code> Palindromize that, table it</p>
<p><code>,⌿</code> join all the columns into a single road</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-pl</code>, 64 bytes</h1>



<pre class="lang-perl prettyprint-override"><code>y/PN/-=/;s/\d+(.)/$1x$&amp;/ge;s/--/- /g;$_=($t=y//_/cr)."


$_

$t"
</code></pre>

<p><a href="https://tio.run/##K0gtyjH9/79SP8BPX9dW37pYPyZFW0NPU1/FsEJFTT89FSiiq6uvq6Cfbq0Sb6uhUmJbqa8fr59cpKmnxMXFpRIPxCVK//@b@JkEWPqZBxj6GQYY@RkF/MsvKMnMzyv@r@trqmdgaPBftyAHAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>35</s> 34 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>.γa}2ôε`„PN…- =2ä‡s∍}J©¶ĆìĆ'_®∍DŠ»
</code></pre>
<p><a href="https://tio.run/##AVUAqv9vc2FiaWX//y7Os2F9MsO0zrVg4oCeUE7igKYtID0yw6TigKFz4oiNfUrCqcK2xIbDrMSGJ1/CruKIjUTFoMK7//80TjRQOU43UDFOMVAyTjJQMTJO" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9TpuSZV1BaYqWgZF@pw6XkX1oC4elU/tc7tzmx1ujwlnNbEx41zAvwe9SwTFfB1ujwkkcNC4sfdfTWeh1aeWjbkbbDa460qccfWgcUcjm64NDu/zqHttn/NzTy4zI0CuAy8TMJsPQzDzD0Mwww8jMKAAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>.γ                # Consecutive group the (implicit) input by:
  a               #  Check if the character is a letter
   }2ô            # After the group by: split it into parts of size 2
ε                 # Map each pair of integer + letter to:
 `                #  Pop and push them separated to the stack
  „PN             #  Push string &quot;PN&quot;
     …- =         #  Push string &quot;- =&quot;
         2ä       #  Split it into 2 parts: [&quot;- &quot;,&quot;=&quot;]
           ‡      #  Transliterate the &quot;P&quot; to &quot;- &quot; and &quot;N&quot; to &quot;=&quot;
            s     #  Swap to take the integer value
             ∍    #  Extend (or shorten) the string to that length
              }J  # After the map: join all parts together to a single string
                © # And store it in variable `®` (without popping)
¶                 # Push a newline character &quot;\n&quot;
 Ć                # Double it &quot;\n\n&quot;
  ì               # Prepend it in front of the string
   Ć              # Enclose the string, appending it's own first character
'_               '# Push string &quot;_&quot;
  ®∍              # Extend it to a size equal to the length of string `®`
    D             # Duplicate it
     Š            # Triple swap the three values on the stack from a,b,c to c,a,b
      »           # Join the values on the stack with newline delimiter
                  # (after which the result is output implicitly)
</code></pre>
</div>
<div id="pu14" class="pu"><h1>C, <strike>155</strike> 153 bytes</h1>

<p>−2 bytes thanks to <strong>ceilingcat</strong></p>

<pre><code>l=6;main(k,v,n,x,s,c)char*s,**v,c;{for(;l--;puts(s))for(s=v[1];*s;s+=k)for(x=sscanf(s,"%d%c%n",&amp;n,&amp;c,&amp;k);n--;)putchar(" -=_"[l%5?l^2?0:c^78?++x&amp;1:2:3]);}
</code></pre>

<p>More readable:</p>

<pre><code>main(l,v,k,n,x,s,c)
    char*s,**v,c;
{
    for(l=6;l--;puts(s))
        for(s=v[1];*s;s+=k)
            for(x=sscanf(s,"%d%c%n",&amp;n,&amp;c,&amp;k);n--;)
                putchar(l%5?l^2?32:c^78?++x&amp;1?45:32:61:95);
}
</code></pre>

<p>The outer loop counts lines from 5 to 0.</p>

<p>The middle loop iterates over parts of the encoded string:</p>

<pre><code>4N4P9N7P1N1P2N2P
4P9N7P1N1P2N2P
9N7P1N1P2N2P
7P1N1P2N2P
1N1P2N2P
1P2N2P
2N2P
2P
string is empty - exit
</code></pre>

<p>The inner loop decodes a part, like, <code>7P</code>, and iterates the needed number of times (e.g. 7).</p>

<p>Each iteration prints one <code>char</code>. The value of the <code>char</code> is described by the code <code>" -=_"[l%5?l^2?0:c^78?++x&amp;1:2:3]</code>:</p>

<ul>
<li>If line number is 5 or 0, print <code>_</code></li>
<li>Otherwise, if line number is not equal to 2, print a space</li>
<li>Otherwise, if the symbol is 'N', print <code>=</code></li>
<li>Otherwise, increase <code>x</code> by 1 (it was initialized to 2 by <code>sscanf</code>)</li>
<li>If odd, print <code>-</code>, else print a space</li>
</ul>
</div>
<div id="pu15" class="pu"><h1>R, 132 bytes</h1>

<p>
Not greatly happy with this, but it was a bit of fun to do:)  Tried to get rid of the multiple <code>gsub</code>s, but my efforts were in vain.  I suspect there's a much better way to do this.</p>

<pre><code>cat(rbind(nchar(a&lt;-scan(,'',t=gsub('PN','P N',gsub('NP','N P',chartr('- =','PPN',scan(,'',sep='|')[4]))))),substring(a,1,1)),sep='')
</code></pre>

<ul>
<li><code>scan</code> gets the strings from STDIN and grabs the 4th one.  <strong>Note</strong> that the empty lines require a space (or something) in them for scan to carry on getting the input.

<blockquote>
  <p>"====- - =========- - - -=-==- "</p>
</blockquote></li>
<li>It replaces the <code>=</code>s with <code>N</code>s, the <code>-</code> and <code></code> with <code>P</code>s.

<blockquote>
  <p>"NNNNPPPPNNNNNNNNNPPPPPPPNPNNPP"</p>
</blockquote></li>
<li>Then it inserts a space between each <code>NP</code> and <code>PN</code>

<blockquote>
  <p>"NNNN PPPP NNNNNNNNN PPPPPPP N P NN PP"</p>
</blockquote></li>
<li>The scan splits the string on spaces

<blockquote>
  <p>"NNNN" "PPPP" "NNNNNNNNN" "PPPPPPP" "N" "P" "NN" "PP"</p>
</blockquote></li>
<li>The string length is then bound(<code>rbind</code>) with the first character of each string

<blockquote>
  <p>4   4   9   7   1   1   2   2<br/>
  "N" "P" "N" "P" "N" "P" "N" "P"</p>
</blockquote></li>
<li>The array is then output using <code>cat</code>.</li>
</ul>

<p>Test run</p>

<pre><code>cat(rbind(nchar(a&lt;-scan(,'',t=gsub('PN','P N',gsub('NP','N P',chartr('- =','PPN',scan(,'',sep='|')[4]))))),substring(a,1,1)),sep='')
1: ____________
2:  
3:  
4: ============
5:  
6: ____________
7: 
Read 6 items
Read 1 item
12N
&gt; 
&gt; cat(rbind(nchar(a&lt;-scan(,'',t=gsub('PN','P N',gsub('NP','N P',chartr('- =','PPN',scan(,'',sep='|')[4]))))),substring(a,1,1)),sep='')
1: ____________
2:  
3:  
4: - - - - - - 
5:  
6: ____________
7: 
Read 6 items
Read 1 item
12P
&gt; cat(rbind(nchar(a&lt;-scan(,'',t=gsub('PN','P N',gsub('NP','N P',chartr('- =','PPN',scan(,'',sep='|')[4]))))),substring(a,1,1)),sep='')
1: ______________________________
2:  
3:  
4: ====- - =========- - - -=-==- 
5:  
6: ______________________________
7: 
Read 6 items
Read 8 items
4N4P9N7P1N1P2N2P
</code></pre>
</div>
<div id="pu16" class="pu"><h1>Ruby, <s>137</s> 135 bytes</h1>

<p>Not the shortest I could come up with, but close to the nicest. Partly borrowed from Optimizer's answer.
</p>

<pre class="lang-ruby prettyprint-override"><code>require'scanf'
N='_  = _'
P='_  - _'
a=[]
scanf('%d%c'){|l,t|a+=[eval(t).chars]*l}
puts (a.shift.zip(*a).map(&amp;:join)*?\n).gsub'--','- '
</code></pre>

<p>Ungolfed:</p>

<pre class="lang-ruby prettyprint-override"><code>require 'scanf'

N = '_  = _'
P = '_  - _'
columns = [] # array of columns
# scan stdin for a number followed by a single char
scanf('%d%c') do |length, type|
  columns += [eval(type).chars] * length
done

# Convert to an array of rows, and join into a string
rows = columns.shift.zip(*columns).map(&amp;:join)
str = rows * "\n" # join lines

# Replace '--' by '- ' and print
puts str.gsub(/--/, '- ')
</code></pre>
</div>
<div id="pu17" class="pu"><p>let me include my <strong><em>matlab</em></strong> version</p>

<h2>MATLAB (267 b)</h2>

<pre><code>function d=p(V,a),j=numel(V)-1;if (a==0),d=0;return; end,d=(V(a)-48+10*p(V,a-1))*(V(a)&lt;64);fprintf('%c%.*s%c%.*s',(a&gt;=j)*10,(a==j|a==1)*eval(strcat(regexprep(V,'[NP]','+'),48)),ones(99)*'_',(a&lt;3)*10,(V(a+1)&gt;64)*d,repmat((V(a+1)==78)*'=='+(V(a+1)==80)*'- ',[1 99]));end
</code></pre>

<hr>

<h2>input</h2>

<p>An ascii-formatted string tailed by a space (since there is no end of chain '\0' in matlab</p>

<p><strong>example</strong> V='12N13P '</p>

<hr>

<h2>output</h2>

<p>pattern representation of the road</p>

<pre><code>_________________________


============- - - - - - -

_________________________
</code></pre>

<h2>function</h2>

<p>the function must be called from its tail-1 (the empty character is removed)</p>

<p><strong>example</strong> : p(V,numel(V)-1) </p>

<h2>Simulation</h2>

<p>try it online <a href="http://www.tutorialspoint.com/codingground/index.htm?port=9197&amp;sessionid=sup8e17e757ccean6qdbiahe91&amp;home=http://codingground.tutorialspoint.com" rel="nofollow">here</a></p>
</div>
<div id="pu18" class="pu"><h1>PHP, 187 bytes</h1>
<pre><code>preg_match_all('/(\d+)(\w)/',$argv[1],$m,2);
$o='';
foreach($m as $p)
    $o.=str_replace('--','- ',str_repeat($p[2]&lt;'P'?'=':'-',$p[1]));
$a=preg_replace('/./','_',$o);
echo(&quot;$a\n\n\n$o\n\n$a\n&quot;);
</code></pre>
<p>The code can stay on a single line; it is displayed here on multiple lines to be more readable (the whitespaces and newlines used for formatting were not counted).</p>
<p>Two bytes can be saved by not printing the trailing newline. Five more bytes can be saved by using real newline characters on the <code>echo()</code>:</p>
<pre><code>echo(&quot;$a


$o

$a&quot;);
</code></pre>
<p>Six additional bytes can be saved by omitting the initialization of <code>$o</code> (<code>$o='';</code>) but this will trigger a notice. The notice can be suppressed by running the script using the command line:</p>
<pre><code>$ php -d error_reporting=0 &lt;script_name&gt; 4N4P9N7P1N1P2N2P
</code></pre>
<p>These brings it to 174 bytes.</p>
</div>
<div id="pu19" class="pu"><h1>Ruby, 94 bytes</h1>
<p>Borrows the <code>gsub'--','- '</code> idea from <a href="https://codegolf.stackexchange.com/a/49406/26465">14mRh4X0r's answer</a>. I think that answer is more interesting, though, although this is shorter.</p>
<pre><code>f=-&gt;x{n=?_*x.gsub!(/(\d+)(.)/){($2==?P??-:?=)*$1.to_i}.size
&quot;#{n}


#{x.gsub'--','- '}

#{n}&quot;}
</code></pre>
<p>Testing:</p>
<pre><code>f=-&gt;x{n=?_*x.gsub!(/(\d+)(.)/){($2==?P??-:?=)*$1.to_i}.size
&quot;#{n}


#{x.gsub'--','- '}

#{n}&quot;}

puts f['4N4P9N7P1N1P2N2P']
</code></pre>
<p>Produces:</p>
<pre><code>______________________________


====- - =========- - - -=-==- 

______________________________
</code></pre>
</div>
<div id="pu20" class="pu"><h1>Scala, 163 bytes</h1>

<pre><code>(s:String)=&gt;{val r=(("\\d+(P|N)"r) findAllIn(s) map(r=&gt;{val l=r.init.toInt;if(r.last=='N')"="*l else ("- "*l).take(l)})).mkString;val k="_"*r.length;s"$k\n\n\n$r\n\n$k"}
</code></pre>

<p>First try, might be golfed some more.</p>
</div>
<div id="pu21" class="pu"><h2>Python 2, 136 bytes</h2>

<p>Surprisingly, importing <code>re</code> seems to be actually worthwhile here.</p>

<pre><code>import re
s=""
for x,y in re.findall("(\d+)(.)",input()):s+=(("- ","==")[y=="N"]*int(x))[:int(x)]
t="_"*len(s);print t+"\n"*3+s+"\n"*2+t
</code></pre>
</div>
<div id="pu22" class="pu"><h1><a href="https://github.com/kirbyfan64/rs" rel="nofollow noreferrer">rs</a>, 252 chars</h1>

<p>Although this might not count because I <a href="https://github.com/kirbyfan64/rs/commit/29f5993f443a40982ca89fe5be48a920718f0072" rel="nofollow noreferrer">added the convergence operator as a ripoff of Martin Büttner's Retina</a> an hour ago...I'm not really here to compete anyway. It's just fun making a regex-based solution for this.</p>

<pre><code>(\d+\D)/#\1
+(\d*)#(?:(((((((((9)|8)|7)|6)|5)|4)|3)|2)|1)|0)(?=\d*\D)/\1\1\1\1\1\1\1\1\1\1\2\3\4\5\6\7\8\9\10#
\d(?=\d*#N)/=
(^|(?&lt;=\D))\d(?=\d*#P)/-
+(?&lt;=-)\d\d(?=\d*#P)/ -
(?&lt;=-)\d(?=\d*#P)/ 
#\D/
((?:(=|-| ))+)/A\1\n\n\n\1\n\nA\1\n
+(A_*)(.)/\1_
A/
</code></pre>

<p>I got line 2 from <a href="https://codegolf.stackexchange.com/a/48479/21009">Martin's Retina answer for Programming Languages Through the Years</a>.</p>

<h2>Explanation</h2>

<pre><code>(\d+\D)/#\1
+(\d*)#(?:(((((((((9)|8)|7)|6)|5)|4)|3)|2)|1)|0)(?=\d*\D)/\1\1\1\1\1\1\1\1\1\1\2\3\4\5\6\7\8\9\10#
</code></pre>

<p>This does lots of magic. See the answer I linked above for more info.</p>

<p>Basically, with the input <code>4N4P9N7P1N1P2N2P</code>, this will be the result:</p>

<pre><code>4444#N4444#P999999999#N7777777#P1#N1#P22#N22#P
</code></pre>

<p>Next:</p>

<pre><code>\d(?=\d*#N)/=
</code></pre>

<p>This replaces the numbers preceding the no-passing symbol (N) with the equal signs. The result with the previous input:</p>

<pre><code>====#N4444#P=========#N7777777#P=#N1#P==#N22#P
</code></pre>

<p>This:</p>

<pre><code>(^|(?&lt;=\D))\d(?=\d*#P)/-
</code></pre>

<p>replaces the first number preceding a passing symbol (P) with the first dash. The result:</p>

<pre><code>====#N-444#P=========#N-777777#P=#N-#P==#N-2#P
</code></pre>

<p>The next two lines continue the same pattern:</p>

<pre><code>+(?&lt;=-)\d\d(?=\d*#P)/ -
(?&lt;=-)\d(?=\d*#P)/ 
</code></pre>

<p>The first line replaces the rest of the line with the dash-space pattern. The second one handles an odd number; it replaces the last dash followed by a single integer (such as <code>-5</code>) with a dash-space (<code>-</code>). Now, the output is:</p>

<pre><code>====#N- - #P=========#N- - - -#P=#N-#P==#N- #P
</code></pre>

<p>Now things are starting to fall into place. The next line:</p>

<pre><code>#\D/
</code></pre>

<p>just removes the <code>#N</code> and <code>#P</code>.</p>

<pre><code>((?:(=|-| ))+)/A\1\n\n\n\1\n\nA\1\n
+(A_*)(.)/\1_
</code></pre>

<p>set up the underscores on the top and bottom to give:</p>

<pre><code>A______________________________


====- - =========- - - -=-==- 

A______________________________
</code></pre>

<p>Lastly, we remove the <code>A</code>:</p>

<pre><code>A/
</code></pre>
</div>
<div id="pu23" class="pu"><h1>Python 3, <s>169</s> 168 bytes. (167 with Python 2)</h1>

<pre class="lang-python prettyprint-override"><code>p,s='',str.split
for _ in s('N '.join(s('P '.join(s(input(),'P')),'N'))):
 v=int(_[:-1]);p+=['='*v,('- '*v)[:v]][_[-1]=='P']
l=len(p)
u='_'*l
print(u+'\n'*3+p+'\n\n'+u)
</code></pre>
<p><strong>Fairly ungolfed:</strong></p>
<pre class="lang-python prettyprint-override"><code>p=''
for i in'N '.join('P '.join(input().split('P')).split('N')).split():

  v=int(i[:-1])         # Get the number from the input section
  
  if i[-1]=='N':        # Check the letter (last char) from the input section
      p+=('='*v)        # Repeat `=` the number from input (v)
  else:
      p+=('- '*v)[:v]   #Repeat `- ` v times, then take first v chars (half)
l=len(p)                #Get the length of the final line markings
print('_'*l+'\n\n\n'+p+'\n\n'+'_'*l)
</code></pre>
<hr />
<pre class="lang-python prettyprint-override"><code>print('_'*l                          # Print _ repeated the length of p
           +'\n\n\n'                 # 3 new lines
                    +p+              # print out p (the markings)
                       '\n\n'        # 2 new lines
                             +'_'*l) # Print _ repeated the length of p
</code></pre>
<hr />
<pre class="lang-python prettyprint-override"><code>for i in
        'N '.join(
                  'P '.join(
                            input().split('P'))
                                               .split('N'))
                                                           .split():
                            # Split the input into items of list at P
                  # Join together with P and ' '
                                                # Split at N...
         # Join with N and ' '
                                                           # Split at space
# Loop through produced list
</code></pre>
<p>Try it online <a href="http://repl.it/lOt" rel="nofollow noreferrer">here</a>.</p>
</div>
<div id="pu24" class="pu"><h1>Haskell, 165 bytes</h1>

<pre><code>k 'N'="="
k _="- "
d c=c&gt;'/'&amp;&amp;c&lt;':'
p[]=[]
p s=take(read$takeWhile d s)(cycle$k a)++p r where(a:r)=dropWhile d s
f s=unlines[q,"\n",p s,"",q]where q=map(\x-&gt;'_')$p s
</code></pre>

<p>Example run (<code>f</code> returns a string, so for better display print it):</p>

<pre><code>*Main&gt; putStr $ f "4N4P9N7P1N1P2N2P"
______________________________


====- - =========- - - -=-==- 

______________________________
</code></pre>

<p>How it works: <code>p</code> returns the middle line by recursively parsing the input string and concatenating the given number of symbols found by the lookup function <code>k</code>. The main function <code>f</code> joins a five element list with newlines, consisting of the top line (every char of the middle line replaced by <code>_</code>), a newline, the middle line, an empty line and the bottom line (same as top).</p>
</div>
<div id="pu25" class="pu"><h1>CJam, 38 bytes</h1>
<pre><code>&quot;_  - _&quot;:N3'=t:P;q~]2/e~z'
*&quot;--&quot;/&quot;- &quot;*
</code></pre>
<p><strong>How it works</strong></p>
<p>We first assign the correct road column to variables <code>N</code> and <code>P</code> and then simply evaluate the input string. This leaves a pair of the length and the column on stack. We group them up, run an RLD on it to get the full columns, transpose to join them and then finally, convert the continuous <code>--</code> to <code>- </code>.</p>
<pre><code>:_  - _&quot;:N                    e# This is the no passing column. We assign it to N
          3'=t:P              e# Replace the '-' in N with '=&quot; and assign it to P
                q~]2/         e# Read the input, evaluate it and then group it in pairs
                     e~       e# Run a run-length-decoder on the pairs
                       z'
*                             e# Transpose and join with new lines.
 &quot;--&quot;/                        e# Split on two continuous occurrence of -
      &quot;- &quot;*                   e# Join by an alternate &quot;- &quot;
</code></pre>
<p><a href="http://cjam.aditsu.net/#code=%22_%20%20-%20_%22%3AN3%27%3Dt%3AP%3Bq%7E%5D2%2Fe%7Ez%27%0A*%22--%22%2F%22-%20%22*&amp;input=4N4P9N7P1N1P2N2P" rel="noreferrer">Try it online here</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/49307/">49307</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




