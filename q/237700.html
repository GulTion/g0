<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::237700</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>003</td><td>Thunno 2 S</td><td>230818T103356Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/264334#264334">The Thon</a></td></tr>
<tr d-ix="1"><td>027</td><td>Retina</td><td>211126T152259Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237731#237731">Neil</a></td></tr>
<tr d-ix="2"><td>069</td><td>Desmos</td><td>211202T080402Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237946#237946">Aiden Ch</a></td></tr>
<tr d-ix="3"><td>057</td><td>Python 2</td><td>211127T000658Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237751#237751">xnor</a></td></tr>
<tr d-ix="4"><td>027</td><td>TIBasic</td><td>211126T170959Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237740#237740">Youserna</a></td></tr>
<tr d-ix="5"><td>064</td><td>Haskell</td><td>211129T133045Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237814#237814">Roman Cz</a></td></tr>
<tr d-ix="6"><td>021</td><td>x8664 machine code</td><td>211126T153007Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237732#237732">m90</a></td></tr>
<tr d-ix="7"><td>034</td><td>Wolfram Language Mathematica</td><td>211126T090028Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237718#237718">theorist</a></td></tr>
<tr d-ix="8"><td>091</td><td>Batch</td><td>211127T234358Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237773#237773">Neil</a></td></tr>
<tr d-ix="9"><td>045</td><td>R</td><td>211127T185356Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237770#237770">Giuseppe</a></td></tr>
<tr d-ix="10"><td>065</td><td>C gcc</td><td>211127T104759Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237756#237756">Noodle9</a></td></tr>
<tr d-ix="11"><td>011</td><td>ayr</td><td>211126T171217Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237742#237742">ZippyMag</a></td></tr>
<tr d-ix="12"><td>057</td><td>Python 3.8 prerelease</td><td>211126T030450Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237703#237703">loopy wa</a></td></tr>
<tr d-ix="13"><td>044</td><td>Haskell</td><td>211126T163109Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237737#237737">AZTECCO</a></td></tr>
<tr d-ix="14"><td>097</td><td>Excel</td><td>211126T161651Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237736#237736">Axuary</a></td></tr>
<tr d-ix="15"><td>020</td><td>Charcoal</td><td>211126T153734Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237734#237734">Neil</a></td></tr>
<tr d-ix="16"><td>057</td><td>R</td><td>211126T145801Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237730#237730">pajonk</a></td></tr>
<tr d-ix="17"><td>041</td><td>JavaScript ES6</td><td>211126T153547Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237733#237733">Arnauld</a></td></tr>
<tr d-ix="18"><td>052</td><td>Scala</td><td>211126T193256Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237744#237744">real use</a></td></tr>
<tr d-ix="19"><td>037</td><td>Ruby</td><td>211126T084343Z</td><td><a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays/237717#237717">G B</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a> <code>S</code>, 3 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ƑʂE
</code></pre>
<p><a href="https://Not-Thonnu.github.io/run#aGVhZGVyPSZjb2RlPSVDNiU5MSVDQSU4MkUmZm9vdGVyPSZpbnB1dD0lNUI3JTVEJTIwLSUzRSUyMDAlMEElNUI4JTVEJTIwLSUzRSUyMDElMEElNUIzJTJDJTIwNSU1RCUyMC0lM0UlMjAxJTBBJTVCNiUyQyUyMDIlNUQlMjAtJTNFJTIwMyUwQSU1QjIlMkMlMjA0JTJDJTIwNSU1RCUyMC0lM0UlMjAzJTBBJTVCNyUyQyUyMDQlMkMlMjAwJTJDJTIwNSUyQyUyMDglNUQlMjAtJTNFJTIwNiUwQSU1QjQlMkMlMjA4JTJDJTIwNyUyQyUyMDklMkMlMjA1JTVEJTIwLSUzRSUyMDclMEElNUIxJTJDJTIwOSUyQyUyMDElMkMlMjAwJTJDJTIwNCU1RCUyMC0lM0UlMjA3JTBBJTVCNyUyQyUyMDUlMkMlMjAyJTJDJTIwMSUyQyUyMDQlMkMlMjA4JTVEJTIwLSUzRSUyMDklMEElNUIwJTJDJTIwNiUyQyUyMDYlMkMlMjA1JTJDJTIwMyUyQyUyMDMlMkMlMjA4JTVEJTIwLSUzRSUyMDEzJTBBJTVCOCUyQyUyMDUlMkMlMjA5JTJDJTIwNCUyQyUyMDUlMkMlMjAxJTJDJTIwMCU1RCUyMC0lM0UlMjAxNiZmbGFncz1DUw==" rel="nofollow noreferrer">Try it online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>ƑʂE  # Implicit input
Ƒ    # All sublists of the input
 ʂ   # Sum each inner list
  E  # Is each sum even?
     # Implicit output of sum
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, <s>42</s> 27 bytes</h1>
<pre><code>.\B|\D

Y`d`01
Cw`(0|10*1)+
</code></pre>
<p><a href="https://tio.run/##K0otycxLNPyvquGe8F8vxqkmxoWLKzIhJcHAkMu5PEHDoMbQQMtQU/v//2jzWK5oCyA21lEwBVJmOgpGQMpIR8EEImAOZhkAOToKIHVAjoWOAlDUEiJvCGYZgpWYQNQDVRqBhUwgWoAyZmAElDAGI5CoBZhvCbEIYkIsAA" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases. Edit: Saved 15 bytes thanks to @m90. Explanation:</p>
<pre><code>.\B|\D

</code></pre>
<p>Delete anything that's not the last digit of an integer.</p>
<pre><code>Y`d`01
</code></pre>
<p>Reduce modulo 2.</p>
<pre><code>Cw`(0|10*1)+
</code></pre>
<p>Count the number of overlapping matches with an even number of <code>1</code>s.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://desmos.com/calculator" rel="nofollow noreferrer">Desmos</a>, 69 bytes</h1>
<p>Brute force method</p>
<pre><code>L=l.length
f(l)=\sum_{n=0}^L\sum_{a=n+1}^Lmod(\sum_{b=a-n}^al[b]+1,2)
</code></pre>
<p><a href="https://www.desmos.com/calculator/honbgxhhmm" rel="nofollow noreferrer">Try It On Desmos!</a></p>
<p><a href="https://www.desmos.com/calculator/hpq9pblmr5" rel="nofollow noreferrer">Try It On Desmos! - Prettified</a></p>
<h3>78 bytes</h3>
<p>Bubbler's <a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays#comment539157_237700">comment</a></p>
<pre><code>L=l.length
a=total(mod(\sum_{n=1}^{[1...L]}l[n],2))
b=L-a+1
f(l)=(aa-a+bb-b)/2
</code></pre>
<p><a href="https://www.desmos.com/calculator/dfsdxsacee" rel="nofollow noreferrer">Try It On Desmos!</a></p>
<p><a href="https://www.desmos.com/calculator/tobjpbprra" rel="nofollow noreferrer">Try It On Desmos! - Prettified</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 57 bytes</h1>

<pre class="lang-python prettyprint-override"><code>z=1
for x in input():z+=1j+1-x%2*2*z%1j
print abs(z*z)//4
</code></pre>
<p><a href="https://tio.run/##JU3bCoMwDH33K4IgeOlwqZ1WwS8RH7bhUBEV51jXn3cxhROSc0my/vZ@meXx7YepA6w60z193z9sjd5r2cDAMBPWzx5GlU1qHBO8mEDGMrYBjt66DfMO98c7tLGN0lQd53ZTtF6jqTIBN2q5AElNClBOKHi6EhFw5ohoAaSWzkeekCPK5SkpWVJuhZycQUbGOFXNvHSP3IX2Dw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>Thanks to dingledooper for saving 2 bytes with <code>z%1j</code> in place of <code>z.real</code>!</p>
<p><strong>58 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>z=p=1
for x in input():p*=1|x%-2;z+=1j+p
print abs(z*z)//4
</code></pre>
<p><a href="https://tio.run/##JU3bCoMwDH33K4Iw8NLhWjtvo18iPmzDoTK0uI51Zf/uYgonJOeSRH/NsMxi@wzjswfe9La/h2G4OaUVDx7LChbGGaHfJoobnSj@s4ejuLhU8SnVgV7H2cD19opc4uIsk9u@3pZd0FZYOYMztoKBwCYYSC@UNJ2QMNhzSCoGqNbe5zRxikifx6QgSfoVdAoCGjlhVyvitX/kL3R/" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p><strong>59 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>t=e=o=0
for x in input():e+=1;exec&quot;e,o=o,e;&quot;*x;t+=e
print t
</code></pre>
<p><a href="https://tio.run/##JU3bCoMwDH33K0KftpkHW5230i8Rn0aGwrBFKnNf79IUTkjOJUn4xcVv5vou64dAj3TSSyl1RUfOu6p4@x1OWDdGOOLtPlLptJUUoXceyarHaWPpqAj7ukWIV9qfurmYeq4a4cmtRTDcDEKThU6miglCyjHpEVgdsq9l0hJpcp6TRqQmr7DTCtioBUnthQ/5Ub4w/wE" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p><strong>59 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>n=0;a=1
for x in input():n+=1;a+=1-x%2*2*a
print a*a+n*n&gt;&gt;2
</code></pre>
<p><a href="https://tio.run/##JU3bCoMwDH33K4Iw2GoHNjqv6I@ID2U4FEYUccx9fZemcJrkXNJsv2NeCd13Xt4TmGY6p2ccx466tLWdiV7rDicsxNg@x/XWUNKZ1nK5nxdUqGy07QsdYJVNSFHfo/P7QzlGQ8Uv0/DgVmhAbqghD0IpU8pEg88xqTSwWgffyGQkkoc8J1GkPKywUwjYyARerYTX4VD4YfwD" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p><strong>59 bytes</strong></p>

<pre class="lang-python prettyprint-override"><code>p,t=l=[0,0]
for x in input():l[p]+=1;p^=x%2;t+=l[p]
print t
</code></pre>
<p><a href="https://tio.run/##JU3bCoMwDH33K4Iw2DAPbXValX5J6V5Gh4Jokcrc17s0hROSc0kSfnHaVnV9p3nxIAd/@ndZllfAaBZjBQpXfLYdTphXQjji/TEsNrjKyDG8zHlTY6xMUoqwz2uEeKV927nCaqoa4UmtRVDUFEKThY4nQQQh5YhoBFL77EueJEeanKekYqnJK@S0DDJqRlI18z4/yhfcHw" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
<p>All these solutions iterate through the list just once. They're based on <a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays#comment539157_237700">Bubbler's observation</a> that the output can be expressed in terms of the numbers <span class="math-container">\$(e,o)\$</span> of even and odd entries in the cumulative sum as:</p>
<p><span class="math-container">$$ \frac{e(e+1)+o(o-1)}{2}$$</span></p>
<p>This is because a sub-list has even sum if and only if its start and end indices correspond to elements of the same parity in the cumulative sum.  The number of ways to choose two even or two odd elements in the cumulative sum is <span class="math-container">\$\binom{c}{2}\$</span>, that is <span class="math-container">\$c(c-1)/2\$</span>,  where <span class="math-container">\$c\$</span> is their count. For evens, we need to either prepend a <code>0</code> to the cumulative sum or increase the count by 1 to account for the initial total being 0 which is even.</p>
<hr />
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python</a>, 52 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda l,b=-1:l&gt;[]and~sum(l)%2+f(l[1:],0)+f(l[:b])
</code></pre>
<p><a href="https://tio.run/##JU3NCoMwDL7vKXoZtKwDW50/BfcipYeKikLsZNONXfbqXUxLSr6/JOt3mx4hj3FswS9d7xnIrr0qA3frfOh/r33hIM76MnKwyjiZCYKmcyJ@phkGpsz6nMPGRz68PfA5rPvGBb5oK3eyNf5cshu2UjKNTUtWJKEilCGR7MghqSVDtUm@IqQoUqQ8JjVJRRpBp6RCI6c61Jp4kw6lDe4P" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Inspired by <a href="https://codegolf.stackexchange.com/a/237703/20260">loopy walt's inclusion-exclusion approach</a>. Thanks to loopy walt for -2 bytes!</p>
<p>We want to recursively reach all contiguous sublists of <code>l</code> to count those with even sum. We do this by repeatedly removing either the start (first) or end (last) element. But, this generates duplicate sublists because they can be reached via removals in different orders, like start then end versus end then start.</p>
<p>So, we guarantee that we do all start removals before any end removals. That is, once we remove the end, we no longer remove the start. We use a flag <code>b</code> for whether start removals are allowed, which starts at -1 and is set to 0 after an end removal. When <code>b</code> is 0, end removals are replaced with removing the entire list, which effectively cuts off that branch. This gives a quadratic runtime.</p>
</div>
<div id="pu4" class="pu"><h1>TI-Basic, 27 bytes</h1>
<pre><code>fPart(.5cumSum(Ans
{2sum(Ans),1+sum(not(Ans
sum(Ans.5(Ans-1
</code></pre>
<p>Uses <a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays#comment539157_237700">Bubbler's formula</a>. Takes input in <code>Ans</code>. Output is stored in <code>Ans</code> and displayed.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 64 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>f a=sum[div(d*d-d)2|d&lt;-[sum[1|b&lt;-scanl(+)0a,c b]|c&lt;-[even,odd]]]
</code></pre>
<p><a href="https://tio.run/##NU5LboMwEN37FG9RKdDaEr/wiaAn6A0sFBnsUCsEqkCz4u50MEWaxfvNm/lW0930/breoKrp9yG1fXn6XQvtR4suhdy0cGlKMbVq6L0PP1C8RVMvLZnmZQY@al3X9fpQdkAFPTKgQynQmfnLDoZob2Z4ll8v18voU6Z5GnWHV1UncfLRUeLnaYcZb7jBI0/DUqyCg1vf1r3KrIb4RMBk7kDIZMxxPnDKETkcMxlxJIdFNHM0IIVj302ZJCXnIKs4khmToaOhCyeHmLnFyOnJ0VAwSZnUDbmxm//H6GTu1GL/Y2/cvfQP" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>x86-64 machine code, 21 bytes</h1>
<pre><code>31 c9 f7 e1 ff c1 f6 07 01 74 02 87 d1 01 c8 af ff ce 75 f0 c3
</code></pre>
<p><a href="https://tio.run/##XVFRS8MwEH7PrzgqQluyqahDnPNB8F1kL7Lt4ZakbTRNS9LJ6NhftybpbJnhSL77vst9F8ImOWNddyE1Uzsu4Mk2XFbT4pmcUUpuPUfQlhCTaK2nuaq2qEBYi5EnPHgMCNzaVwYE21O/DWS5U0NuRC2wGS84s7PaRtgGXj6Wr/C2fIeV4XJD4WaQP1uwX7Ie/ViRnwx538TLY3vkHAT@m8cytHzIuHATWDla6Bb6KQfKCIeTOSFSN@HlsQcpUvCn@lNKlDooaHJGgRVoIE1d8p2QA@lf68TVBhZwuKYwC3FP4TbEw3EeimrjyrI4upRrHdHez1lZ2YoqizG5OqEUk8RZH0nX/bBMYW67STm7c5v7rYXrIdQv" rel="nofollow noreferrer">Try it online!</a></p>
<p>Following the standard calling convention for Unix-like systems (from the System V AMD64 ABI), this takes the address of an array of 32-bit integers in RDI and the length of the array in RSI.</p>
<p>Assembly:</p>
<pre><code>.text
.global essa
.intel_syntax noprefix
essa:
    xor ecx, ecx    #
    mul ecx         # Initialise ECX, EAX, and EDX to 0.
repeat:
                    # EAX holds the running total of even-sum subarrays.
                    # ECX holds the number of even-sum subarrays ending at the current position.
                    # EDX holds the number of odd-sum subarrays ending at the current position.
    inc ecx                 # Increment the even count.
    test BYTE PTR [rdi], 1  # Check the low bit of the current number.
    jz skip                 # Jump if the low bit is 0.
    xchg ecx, edx           # (Executed if odd) Swap the counts.
skip:
    add eax, ecx            # Add the even count to the running total.
    scasd                   # Advance to the next number, and perform an unnecessary comparison.
    dec esi                 # Count down from the length of the array.
    jnz repeat              # Jump back if there is more to be processed.
    ret                     # Return.
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.wolfram.com/mathematica/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>36</s> 34 bytes</h1>
<pre><code>Tr[1-Mod[Tr/@Subsequences@#,2]]-1&amp;
</code></pre>
<p>–2 bytes from @alephalpha</p>
<p><a href="https://tio.run/##y00syUjNTSzJTE78n277P6Qo2lDXNz8lOqRI3yG4NKk4tbA0NS85tdhBWccoNlbXUO1/QFFmXolDenS1eW0sF5xjgcwx1lEwReab6SgYIfONdBRM0JSYg4UMgKI6CihmAUUtdBSA0pZoOgzBQoZgTSZoRgENMQLLmaCZBlRrBkZAFcZgBJRWQPIGWMYS4j6I6UD5/wA" rel="nofollow noreferrer">Try it online!</a></p>
<p>There is an <code>EvenQ</code> test in Mathematica, but alephalpha's use of <code>Mod</code> saves 2 bytes relative to it:</p>
<pre><code>Count[Tr/@Subsequences@#,_?EvenQ]-1&amp;
</code></pre>
<p>Alternative 34-byte function from @att:</p>
<pre><code>Count[{a__/;2∣+a}]@*Subsequences
</code></pre>
</div>
<div id="pu8" class="pu"><h2>Batch, 91 bytes</h2>
<pre><code>@set/at0=t=e=0,t1=-1
@for %%a in (%*)do @set/ae^^=%%a%%2&amp;call set/at+=t%%e%%+=1
@echo %t%
</code></pre>
<p>Takes input as command-line arguments. Explanation: Rough port of @Arnauld's JavaScript answer, but starting with <code>[0, -1]</code> as preincrement is golfier.</p>
<pre><code>@set/at0=t=e=0,t1=-1
</code></pre>
<p>Start with a cumulative total of <code>0</code>, a result of <code>0</code>, 1 even cumulative total and 0 odd cumulative totals, but with the totals decremented so that they can be preincremented.</p>
<pre><code>@for %%a in (%*)do 
</code></pre>
<p>Loop over the command-line arguments.</p>
<pre><code>@set/ae^^=%%a%%2
</code></pre>
<p>Update the parity of the cumulative total. (<code>^&amp;1</code> would also work for the same byte count.)</p>
<pre><code>&amp;call set/at+=t%%e%%+=1
</code></pre>
<p>Increment the count of even or odd cumulative totals respectively and add the new value to the final total. This has to use <code>call</code> and <code>%%</code> so that <code>e</code> gets substituted after its calculation above.</p>
<pre><code>@echo %t%
</code></pre>
<p>Output the final total.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 45 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,x=table(diffinv(a)%%2))x%*%(x-1)/2
</code></pre>
<p><a href="https://tio.run/##VY9BCoMwEEX3PcVACSQlUhNtYhb2LtY2IBSFYou3T9MfbRBmM@/9mUxewbfBv8d@HqaRd3Jp5@72fPD74P0wfngnGNNCLOzE@FIocdbB855bIY5UXKk8/Lpm7RS6StJlB4wkvYIKQEuqcygxC1ZGLGnbZ2AibiRF7/KMhVFgCmP1zljs0ZB1XuggY9qgYqRC/T@QbmmgXLoyPbAFTPgC" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Uses Bubbler's observation and pajonk's test harness.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>77</s> <span class="math-container">\$\cdots\$</span> <s>67</s></sup> 65 bytes</h1>

<pre class="lang-c prettyprint-override"><code>t;p;f(a)int*a;{for(int b[]={1,t=p=0};~*a;)t+=b[p^=*a++&amp;1]++;t=t;}
</code></pre>
<p><a href="https://tio.run/##bZTbjpswEIbv9ykspFScomLO1KW9qPoUhK1YAlu0W4KCpUaN6KOXDrY57LARyeD5fs8/TCzK43NZjiNnHav1wmhabhbsXl@uOtySpyxP79TmaZc6A/sLyOBW@pR1j6lZWNYHmlsW4ylnwzjJfxVNqxvk/kDgMyV41fMfNMtJSu6RTY50YGvelfkY5z2Z92wSYORLFNrExSiQCPL@OxvDpQegjhDsfCOp8QUCZfJOnVhqqKBUlPKxJlm8AtEnFZqdHXWkDkqE4gK1J669lC6jCoSzfETpP0nngZtC30u13GqrYavoqeirGKgYqhipGKuY2HO3883GTmRa6dY3f6pLrUuN8VEtTbW2yZa7iLuIe4h7iPuI@4gHiAeIh4iHiEeIR4jHiMeIJ4gniFMHD8jBit0IqbGZe3XrqpJX5@UEUXHJ4xOK0ysPMIU1DdXO8tL2nJQ/i6sJv1X5Ul1lAe10@@6ebsk3@AaaTbZrT1O74Z1AxEuhac/VDbY5TN1@nluf21p7XzKMWJZQz6@H9cRCKXlqBc/ZFpNW0XZH135UL9BHK2y2FtOnu4Ks1rVDfzjD0zVfp0f8pGUQeNbkxlpzeOPdQ2H4P4y3HVWQXeaPm5qtcnL8Qg5ncuhPLdj09jLwPk2r2XJ4GMZ/Zf1aPPfj8fd/" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p><em>Saved <s>9</s> 11 bytes thanks to <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a>!!!</em></p>
<p>Inputs a pointer to an array of non-negative integers terminated by <span class="math-container">\$-1\$</span>  (because pointers in C carry no length info).<br />
Returns the number of contiguous subarrays with an even sum.</p>
<p>Port of <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a>'s <a href="https://codegolf.stackexchange.com/a/237733/9481">JavaScript answer</a>.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/ZippyMagician/ayr" rel="nofollow noreferrer">ayr</a>, 11 bytes</h1>
<p>Thanks to <a href="https://codegolf.stackexchange.com/a/237720/90265">ovs's</a> method.</p>
<pre><code>+/|2|,+\\.I
</code></pre>
<h1>Explanation</h1>
<p><code>I</code> is the input (eg <code>6 2</code>) passed through the command line.</p>
<pre><code>        \.  Suffixes decreasing in length
      +\    Cumulative sum of each
     ,      Flatten
   2|       Mod 2
  |         Not this (is the number divisible by 2?)
+/          Sum; count number of even elements
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="noreferrer">Python 3.8 (pre-release)</a>, 57 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda S,p=1:S&gt;[]and f(S[1:])+sum((p:=p^s%2)for s in S)
</code></pre>
<p><a href="https://tio.run/##NVDZSsUwEH3PVwwBIdEot4vdJPcn2rexQi/XYqBLaKNgf76mUwPzcLaZTMb@uq95Sgq77Huvh2683TuoldVRVV@x7aY79KLGqGrl0/o9CmErbT/Wh1j28wIrmAlquTeac455C89XuDAsCEQMEwWvAWcKYsIJw1hBGixPc6IXryg4ezOGXikUeKsMyZxhRDSicBrEnBpj0tMwoWToMxmVdxOq/8X8kwWp5bnHOfH0Mv@Tl9UOxgn@PnHJGo34OHZWfP50g3LBO8JcyvY4gzvO0LTswEbNxKpN98LIN7uYyYlNbVrPcv8D" rel="noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Similar to brute-force method below but should have better complexity.</p>
<h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 57 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda S:S&gt;[]and~sum(S)%2+f(S[1:])+f(S[:-1])-f(S[1:-1])
</code></pre>
<p><a href="https://tio.run/##NU/JasMwEL3rKwZBQWrlEi/1VpyfcG6qDiqpqcCWha0U4kN/3VXGFczhbbO5u/@ebb7vQzfq6fOqoW/7s1TaXn/X28R6/pS9DKyXaas4gjZJFU8O6QF3M7l58WBvk7uDXsE6cukopbJSkJzhRGSNICUyF/AWcSkgQ5wTmQkoohVohfQUFAFHb0lkUGoBwWpisiIyRZpiuIhihY0Z6kWc0BAZMiVWcHOs/8PCyhrV5rjjmHh4ZfjkdXWj8Yx@WMrDb1I@T9qxrx89Ch@9R5hyroZ5AQ/GwkWRBzZiRtZu3cAMf3eLsZ5tYuu6me9/" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>This is a brute force method based on inclusion-exclusion. Also works on Python2.</p>
<h1><a href="https://docs.python.org/3/" rel="noreferrer">Python 3</a>, 60 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda S,e=0,i=0:e+(S&gt;S[:i]and f(S,[e+1,i-e][S[i]&amp;1],i+1))
</code></pre>
<p><a href="https://tio.run/##NU/JboMwEL37K0YcKrtMKhwoW@X8BLlNfaAKqJbAWIRWCj9PHVOkObxtNvdYviebbluvhnb8urXQYKcSNCqpu5g3l4Zqo1t7g543SF0s0Zw6TQ0Z/SI1mlgKsZnRTfMC9md0D2jvYB27qiiKqNBwukDCqAxAMkoR3g@cI5wDThmdEbLD8rQINPEKwt6bM/JKieCt6kgWjGSgMoSzQyxC4zno2TGhYuQzeSjvpqH@D/Mry6BW@x37xN3L/SdvdzeYhUefNhL@N6LXsXW8@20HXA7vGY6E0P00wwLGwlWzJzY4BVavqudGfLjZ2IWvuCo1ie0P" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>This loops over the right ends of possible subarrays keeping the number of non empty even summing subarrays in <code>e</code>. The number of odd summing subarrays is implicit in <code>i-e</code> (<code>i</code> is the loop index). As we move <code>i</code> to the right we update <code>e</code> by incrementing if we pass through an even element and by replacing with the current odd summing number if we pass through an odd element. The sum of all <code>e</code>s is then output.</p>
<h2>Correctness and connection with @Bubbler's closed formula</h2>
<p>This is a routine combinatorial partition. To count all (non-empty) contiguous subarrays of <code>S</code> with even sum (cswes) we split the set of all cswes into all cswes ending at <code>S(1)</code>, all cswes ending at <code>S(2)</code> etc. and add the sizes of these sets instead. If <code>e(n)</code> is the size of the set of cswes ending at <code>S(n)</code> then depending on the parity of <code>S(n+1)</code> we have <code>S(n+1)</code> even ~&gt; <code>e(n+1)=e(n)+1</code> and <code>S(n+1)</code> odd ~&gt; <code>e(n+1)=o(n)</code> where <code>o(n)</code> is the number of contiguous subarrays with odd sum ending at <code>S(n)</code>. Obviously, <code>o(n)+e(n)=n</code>. And with that we have got all the pieces used by the algorithm.</p>
<p>Now to connect with Bubbler's formula let us reinterpret what we are doing when going from <code>e(n)</code> to <code>e(n+1)</code>. If <code>S(n+1)</code> is even then we &quot;increment a counter&quot;, more specifically, &quot;the active counter&quot;. There is also an &quot;inactive counter&quot; which is, err, inactive. If <code>S(n+1)</code> is odd then we &quot;swap the active and inactive counters&quot;. Which of the two counters is currently active, i.e. in <code>e</code> depends on the cumulative parity of <code>S</code> up to the current position. The counter that started out as <code>e(0)</code> therefore counts from <code>0</code> to <code>n0</code> (excl) where <code>n0</code> is as defined by Bubbler and the counter that started out as <code>o(0)</code> counts from <code>0</code> to <code>n1</code>. The algorithm adds all the steps together. Therefore, using the well-known summation formula <code>1+2+...+n = n(n+1)/2</code> we recover Bubbler's formula.</p>
<p>For reference, here is Bubbler's relevant comment in full:</p>
<blockquote>
<p>Fastest algorithm: prepend 0, cumulative sum, each number mod 2, then count zeros (n0) and ones (n1) and calculate n0*(n0-1)/2+n1*(n1-1)/2. Probably not so appealing for golf though. –
Bubbler</p>
</blockquote>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>50  47</s> 44 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>g l=sum[1|t&lt;-scanr(:)[]l&gt;&gt;=scanl1(+),even t]
</code></pre>
<p><a href="https://tio.run/##TY7LboMwEEX3/YorlIUtGzUGyiMKfEG76pKiCqVWUtU4KDhtF/l3auwaRZrNuWfmak799CWVmucjVD1dh1bczD6eDr2@kB1tO9U09UJKEEa5/JYappuH/lOjxtCPL@8Yr@bVXJ412geQ6XT@gaKMRYgbRIy5ZHP8zx4hf0d5MPIDu9VCLu5NRzeiuKT72BYBpC06ji3lHkoLIkDK8XTPOUdiOQ2ccGR@ZY0KF21tyrF05UHYtOSwuvIXRRDCRcIdZfeicCWJc5lvq4Kzu7kbu5G6cY@vb5TOVP4/3774nHbd/Ac" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<ul>
<li>thanks to @ovs for reminding me there's already an <em>even</em> function in Haskell (3 Bytes saved).</li>
<li>saved 3 more bytes inspired by @Lynn <a href="https://codegolf.stackexchange.com/a/237741/84844">answer</a> and <a href="https://codegolf.stackexchange.com/a/52945/84844">tip for golfing in Haskell</a></li>
</ul>
<pre class="lang-hs prettyprint-override"><code>sum          Total of
[1|t&lt;-       * list comprehension counting:
scanr(:)[]l    -tails
&gt;&gt;=            - concatMapped to
scanl1(+)      - cumulative sum
,even t]       ? that satisfy the requirements 
</code></pre>
<p>Old recursive version</p>
<pre class="lang-hs prettyprint-override"><code>g[]=0
g l=sum[1|t&lt;-scanr1(+)l,even t]+g(init l)
</code></pre>
<pre class="lang-hs prettyprint-override"><code>g[]=0            empty list has 0 even sums
g l=             list has :
sum              &gt; number of results found in:
even t             valid tails
t&lt;-scanr1(+)l      directly reduced by +
+g(init l)       &gt; + results of inits
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Excel, <s>130</s> 97 bytes</h1>
<p><em>-33 bytes applying Bubbler's formula</em></p>
<pre><code>=LET(x,COUNT(A1#),a,SEQUENCE(x),b,SUM(MOD(MMULT(A1#,(a&lt;=TRANSPOSE(a))*1),2)),b*(b-1-x)+(x^2+x)/2)
</code></pre>
<p><a href="https://1drv.ms/x/s!AkqhtBc2XEHJnW7R4Ai3XDnmVNZr?e=EAGuNE" rel="nofollow noreferrer">Link to Spreadsheet</a><br />
Rearranged Bubbler's formula to use the number of 1s and size of the original array (instead of the number of 0s). Multiplies the array by an upper triangular matrix to calculate the cumulative sums.</p>
<h2>Original Answer not using Bubbler's method</h2>
<pre><code>=LET(x,COUNT(A1#),a,SEQUENCE(1,x^2)-1,b,MOD(a,x)+1,c,INT(a/x)+1,d,SEQUENCE(x),SUM(1-MOD(MMULT(A1#,FILTER((d&gt;=b)*(d&lt;=c),b&lt;=c)),2)))
</code></pre>
<h3>Explanation</h3>
<p>Since Excel formulas don't really have loops, I have to get creative with in sequences in two dimensional space.<br />
<code>LET(x,COUNT(A1#),</code> : x = number of elements<br />
<code>a,SEQUENCE(1,x^2)-1,</code> : a = [0..x^2]<br />
<code>b,MOD(a,x)+1,</code> : b = array of indices of the first items to be summed<br />
<code>c,INT(a/x)+1,</code> : c = array of indices of the last items to be summed<br />
<code>d,SEQUENCE(x),</code> : d = [1..x]<br />
<code>FILTER((d&gt;=b)*(d&lt;=c),b&lt;=c))</code> : array containing all permutations of possible consecutive sums indicated by 1 in the elements to be summed<br />
<code>MMULT(A1#,~,2)</code> : use matrix multiplication to determine all the sums of consecutive elements<br />
<code>SUM(1-MOD(~,2)))</code> : count the sums where the sum mod 2 = 0</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>23</s> 20 bytes</h1>
<pre><code>ＩΣＥ²↨¹…№﹪Ｅ⊕Ｌθ↨¹…θλ²ι
</code></pre>
<p><a href="https://tio.run/##RYvBCsIwEER/ZY8biKBFQfFmToIF0WPpYUmXppAmbZoIfn2M9eDAwMC8pw0F7cnmfA@Di6hoifhMI9Y0YSXhQgvjTsKDXM@ofCpM7btk/UpcnQ48sovc4Y1dHw3OQvw19daWlfETzhLs96lKB/HLOeemOUo4SDhJ2K@jSNu2zZuX/QA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Uses @Bubbler's formula.</p>
<pre><code>   ²                    Literal `2`
  Ｅ                     Map over implicit range
            θ           Input list
           Ｌ            Length
          ⊕             Incremented
         Ｅ              Map over implicit range
                θ       Input list
               …        Truncated to length
                 λ      Inner index
             ↨¹         Converted from base 1 i.e. summed
        ﹪               Vectorised modulo
                  ²     Literal `2`
       №           ι    Count the number of `0`s or `1`s
      …                 Exclusive range from 0
    ↨¹                  Converted from base 1 i.e. summed
 Σ                      Take the sum
Ｉ                       Cast to string
                        Implicitly print
</code></pre>
<p>Each contiguous subarray with an even sum must start and end at a point where the cumulative sums are either both even or both odd. The positions of these sums don't matter, only their counts do. The number of sums for a given count is then simply <code>n(n-1)/2</code>, since a given sum can't start and end at the same point. This is readily calculated as the sum of the exclusive range from <code>0</code> to <code>n</code>. (Both these sums are implemented as base conversion from base <code>1</code> since that returns <code>0</code> for an empty list whereas <code>Sum</code> returns <code>None</code>.)</p>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>61</s> 57 bytes</h1>
<p>Or <strong><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>&gt;=4.1, 50 bytes</strong> by replacing the word <code>function</code> with <code>\</code>.</p>
<p><em>-4 bytes thanks to <a href="https://codegolf.stackexchange.com/users/95126/dominic-van-essen">@Dominic van Essen</a>.</em></p>

<pre class="lang-r prettyprint-override"><code>function(a,b=diffinv(a)%%2,`+`=sum,z=+!b,o=+b)0:z+0:o-z-o
</code></pre>
<p><a href="https://tio.run/##VY9NCsMgEEb3PYWlBBQnYEyqScCeJT9FyKIKbdNFLm/tmDQEZjPvfTOOz2BNsLMb35N3tIfB3CdrJ/ehPcsyCR3vzGt@wGL4eQBv@MBEu3DR@nzJfbB0pJqxC8lvRJx@Xb12BXYlkOsBKCByBSUCCaTaQ4lpZCJiINs@hSbiGkj0zT6j0RTIChyrDkbjHomy2hc2KGNaYcVIifX/QLqlRtWkK9MDW0CFLw" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>Using @Bubbler's formula.</p>
<p>Without it:</p>
<h3><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 64 bytes</h3>
<p>Or <strong><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>&gt;=4.1, 57 bytes</strong> by replacing the word <code>function</code> with <code>\</code>.</p>

<pre class="lang-r prettyprint-override"><code>function(a){for(i in seq(!a))for(j in 1:i)F=F+!sum(a[j:i])%%2;F}
</code></pre>
<p><a href="https://tio.run/##VY/BCoMwDIbve4rIEFrWga3aqsMdfYmxg8gKFaZM52ns2bua6kTIJd/3J00Hq0urp655m74jNf3ofiAGTAfj40WCmtIZtDPghaFVWZ2CcXqS@tYW5k7DUFyqr9WkIYrSI5yvEB3mLls6jl3MIN0ByUAsIEYgGCRbyDOFLHKYwbpPonE4Y@B8vs0oNBwZx7FkZxTuESiTbWGO0qUllovEWP8P@FsyVLm/0j@wBqT9AQ" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1>JavaScript (ES6), <s> 44 </s> 41 bytes</h1>
<p>This is inspired by <a href="https://codegolf.stackexchange.com/questions/237700/even-sum-subarrays#comment539157_237700">Bubbler's comment</a>, but updates the sum <span class="math-container">\$n_0(n_0-1)/2+n_1(n_1-1)/2\$</span> on the fly rather than computing it afterwards. The number of 0's and 1's are stored in <code>a[0]</code> and <code>a[1]</code> respectively, with <code>a[]</code> initialized to <code>[1,0]</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(c=&gt;t+=a[p^=c&amp;1]++,a=[1,p=t=0])|t
</code></pre>
<p><a href="https://tio.run/##fdDBDoIwDAbgu0@xk4EwgQFucBgvQjBZEI0G2SKLJ999zhKjjunS49d/bc/iJqbuelJ6M8p9bw7cCF6L@CJU0PFaR1w0ase7NWmjCAveEKy45mkb3rXp5DjJoY8HeQwOQcPaMETLlyQoXTm0/EmJS3OMth7toxSjzE9zl2YYFZ5gH2VAU6sx@pjbUupS60qMbEP1lW0pcykBRCC4@E8ZfJ2BLt4zWFq51IZRKNuQQ4F@HmuxVwmqmg8xj/Ky1DwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1>Scala, 52 bytes</h1>
<pre class="lang-scala prettyprint-override"><code>_.tails.flatMap(_.inits)count(x=&gt;x.size&gt;0&amp;x.sum%2&lt;1)
</code></pre>
<p><a href="https://scastie.scala-lang.org/IpRl4HwDREa4FVXZntPAlw" rel="nofollow noreferrer">Try it online!</a></p>
<p>This is a naive answer, but it didn't seem as if Bubbler's approach would be shorter, so I went with this. <code>_.tails.flatMap(_.inits)</code> first gets all subarrays that stretch to the end, then all the prefixes of those subarrays to get all subarrays of the original array.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="noreferrer">Ruby</a>, <s>59 ...</s> 37 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;l{*q=r=0,-1;l.sum{|n|q[r^=n%2]+=1}}
</code></pre>
<p><a href="https://tio.run/##VY/NDoIwEITvPsUmxosWQ39sIaa8CKkHD5yQSA0HAzx7bXaLDcle5pvZ6dZPz2/obCiafj6P1tuSFfzeXz/Ta16GZWz9ww4n4S6Wr2t4Q9e2xrkjFA2UB5RVkpykZHDbE81AJCKJCAYqxxI0CMvIGWydmqzIKwYxUOctQxZHyHFR7S2DVQJdlTtrcmNe48SMxPl/JB1UoVfTrfTGltDhBw" rel="noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<p>Finally found the time to implement Bubbler's advice.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/237700/">237700</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




