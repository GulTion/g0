<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::78334</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>034</td><td>Maxima</td><td>230906T114229Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/264975#264975">138 Aspe</a></td></tr>
<tr d-ix="1"><td>nan</td><td>Ruby 2.4 + polynomial</td><td>170804T072706Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/137506#137506">Value In</a></td></tr>
<tr d-ix="2"><td>034</td><td>Pyth</td><td>160424T090907Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78367#78367">Leaky Nu</a></td></tr>
<tr d-ix="3"><td>024</td><td>Sage</td><td>160424T060641Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78362#78362">user4594</a></td></tr>
<tr d-ix="4"><td>103</td><td>JavaScript ES6</td><td>160426T002812Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78582#78582">Neil</a></td></tr>
<tr d-ix="5"><td>223</td><td>Python 2</td><td>160424T101328Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78371#78371">orlp</a></td></tr>
<tr d-ix="6"><td>035</td><td>Python + SymPy</td><td>160423T222806Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78335#78335">Dennis</a></td></tr>
<tr d-ix="7"><td>028</td><td>MATLAB with Symbolic Toolbox</td><td>160424T030414Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78357#78357">Luis Men</a></td></tr>
<tr d-ix="8"><td>138</td><td>Python 2</td><td>160424T003817Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78352#78352">feersum</a></td></tr>
<tr d-ix="9"><td>072</td><td>Haskell</td><td>160424T030919Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78358#78358">Anders K</a></td></tr>
<tr d-ix="10"><td>019</td><td>PARI/GP</td><td>160424T042922Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78360#78360">Charles</a></td></tr>
<tr d-ix="11"><td>012</td><td>TIBasic 68k</td><td>160423T224040Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78338#78338">flawr</a></td></tr>
<tr d-ix="12"><td>017</td><td>Mathematica</td><td>160423T223555Z</td><td><a href="https://codegolf.stackexchange.com/questions/78334/polynomialception/78336#78336">feersum</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://maxima.sourceforge.net/" rel="nofollow noreferrer">Maxima</a>, 34 bytes</h1>
<p><a href="https://tio.run/##dYzLCsIwEEV/ZZYzcQSbiBb7KT7KhLoIJGmwFcavj5GuXd3D4XCTaEhSn1okT2OZ4yfPKUgcoyQ/CVxudSO8Cvs7byEub7@s6FlZiKgO5RXyin9f0J5hD11/MAo76Fxv9GGbcacGrinX9sjwQ2uUaKhf" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>lambda([a,b],expand(subst(b,x,a)))
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.ruby-lang.org" rel="nofollow noreferrer">Ruby 2.4</a> + <a href="http://adrianomitre.github.io/Polynomial/website/index.html" rel="nofollow noreferrer">polynomial</a>, 41+12 = 53 bytes</h1>
<p>Uses flag <code>-rpolynomial</code>. Input is two <code>Polynomial</code> objects.</p>
<p>If someone outgolfs me in vanilla Ruby (no polynomial external library), I will be very impressed.</p>
<pre><code>-&gt;a,b{i=-1;a.coefs.map{|c|c*b**i+=1}.sum}
</code></pre>
</div>
<div id="pu2" class="pu"><h1>Pyth, <s>51</s> 34 bytes</h1>

<pre><code>AQsM.t*LVG.usM.t.e+*]0k*LbHN0tG]1Z
</code></pre>

<p><a href="http://pyth.herokuapp.com/?code=AQsM.t%2aLVG.usM.t.e%2B%2a%5D0k%2aLbHN0tG%5D1Z&amp;test_suite=1&amp;test_suite_input=%5B5%2C3%2C1%5D%2C%5B1%2C1%5D%0A%5B1%2C0%2C1%2C0%2C0%2C0%2C1%5D%2C%5B0%2C-1%2C1%5D%0A%5B-192%2C288%2C-144%2C24%5D%2C%5B2%2C1%5D%0A%5B27%2C-180%2C138%2C-36%2C3%5D%2C%5B3%2C2%5D&amp;debug=0" rel="nofollow noreferrer">Test suite</a>.</p>
</div>
<div id="pu3" class="pu"><h2>Sage, 24 bytes</h2>
<pre class="lang-py prettyprint-override"><code>lambda A,B:A(B).expand()
</code></pre>
<p>As of Sage 6.9 (the version that runs on <a href="http://sagecell.sagemath.org" rel="nofollow noreferrer">http://sagecell.sagemath.org</a>), function calls without explicit argument assignment (<code>f(2) rather than f(x=2)</code>) causes an annoying and unhelpful message to be printed to STDERR. Because STDERR can be ignored by default in code golf, this is still valid.</p>
<p>This is very similar to <a href="https://codegolf.stackexchange.com/a/78335/45941">Dennis's SymPy answer</a> because Sage is a) built on Python, and b) uses <a href="http://maxima.sourceforge.net/" rel="nofollow noreferrer">Maxima</a>, a computer algebra system very similar to SymPy in many ways. However, Sage is much more powerful than Python with SymPy, and thus is a different enough language that it merits its own answer.</p>
<p><a href="http://sagecell.sagemath.org/?z=eJxNjk0KgzAQhfeCdxjoIolNbU2stQUXehDBYgTBn5Bom96-o9m4mXm8-ebN9KOezQL2Z8MAS2yXVhkDBcxaTZRcW_W5TuswEE6-hMEJ7Kq1UdaCJ8OgK4ZmfLcNlLx6lbRisXK6mVrKwiAMtOmnBTrqagFnkJHDeuewtYQdxxk6Hkr4Li7gDoBII1dLNJN0Uxsn8hzj0HkKHygOPF6qUxzKbN_DVJlHPjbJb_sb4sFB7EqyP3mzRek=&amp;lang=sage" rel="nofollow noreferrer">Verify all test cases online</a></p>
</div>
<div id="pu4" class="pu"><h2>JavaScript (ES6), <s>150</s> 103 bytes</h2>

<pre><code>(f,g)=&gt;f.map(n=&gt;r=p.map((m,i)=&gt;(g.map((n,j)=&gt;p[j+=i]=m*n+(p[j]||0)),m*n+(r[i]||0)),p=[]),r=[],p=[1])&amp;&amp;r
</code></pre>

<p>Accepts and returns polynomials as an array a = [a<sub>0</sub>, a<sub>1</sub>, a<sub>2</sub>, ...] that represents a<sub>0</sub> + a<sub>1</sub>*x + a<sub>2</sub>*x<sup>2</sup> ...</p>

<p>Edit: Saved 47 bytes by switching from recursive to iterative polynomial multiplication, which then allowed me to merge two <code>map</code> calls.</p>

<p>Explanation: <em>r</em> is the result, which starts at zero, represented by an empty array, and <em>p</em> is <em>g</em><sup><em>h</em></sup>, which starts at one. <em>p</em> is multiplied by each <em>f</em><sub><em>h</em></sub> in turn, and the result accumulated in <em>r</em>. <em>p</em> is also multiplied by <em>g</em> at the same time.</p>

<pre><code>(f,g)=&gt;f.map(n=&gt;            Loop through each term of f (n = f[h])
 r=p.map((m,i)=&gt;(           Loop through each term of p (m = p[i])
  g.map((n,j)=&gt;             Loop though each term of g (n = g[j])
   p[j+=i]=m*n+(p[j]||0)),  Accumulate p*g in p
  m*n+(r[i]||0)),           Meanwhile add p[i]*f[h] to r[i]
  p=[]),                    Reset p to 0 each loop to calculate p*g
 r=[],                      Initialise r to 0
 p=[1]                      Initialise p to 1
)&amp;&amp;r                        Return the result
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Python 2, <strike>239</strike> <strike>232</strike> 223 bytes</h1>
<pre class="lang-py prettyprint-override"><code>r=range
e=reduce
a=lambda*l:map(lambda x,y:(x or 0)+(y or 0),*l)
m=lambda p,q:[sum((p+k*[0])[i]*(q+k*[0])[k-i]for i in r(k+1))for k in r(len(p+q)-1)]
o=lambda f,g:e(a,[e(m,[[c]]+[g]*k)for k,c in enumerate(f)])
</code></pre>
<p>A 'proper' implementation that does not abuse bases. Least significant coefficient first.</p>
<p><code>a</code> is polynomial addition, <code>m</code> is polynomial multiplication, and <code>o</code> is composition.</p>
</div>
<div id="pu6" class="pu"><h1>Python + SymPy, <s>59</s> 35 bytes</h1>

<pre><code>from sympy import*
var('x')
compose
</code></pre>

<p><em>Thanks to @asmeurer for golfing off 24 bytes!</em></p>

<h3>Test run</h3>

<pre><code>&gt;&gt;&gt; from sympy import*
&gt;&gt;&gt; var('x')
x
&gt;&gt;&gt; f = compose
&gt;&gt;&gt; f(x**2 + 3*x + 5, x + 1)
x**2 + 5*x + 9
</code></pre>
</div>
<div id="pu7" class="pu"><h1>MATLAB with Symbolic Toolbox, 28 bytes</h1>

<pre><code>@(f,g)collect(subs(f,'x',g))
</code></pre>

<p>This is an anonymous function. To call it assign it to a variable or use <code>ans</code>.  Inputs are strings with the format (spaces are optional)</p>

<pre><code>x^2 + 3*x + 5
</code></pre>

<p>Example run:</p>

<pre><code>&gt;&gt; @(f,g)collect(subs(f,'x',g))
ans = 
    @(f,g)collect(subs(f,'x',g))
&gt;&gt; ans('3*x^4 - 36*x^3 + 138*x^2 - 180*x + 27','2*x + 3')
ans =
48*x^4 - 96*x^2
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Python 2, 138 <s>156 162</s> bytes</h1>

<p>The inputs are expected to be integer lists with smallest powers first.</p>
<pre class="lang-py prettyprint-override"><code>def c(a,b):
 g=lambda p,q:q&gt;[]and q[0]+p*g(p,q[1:]);B=99**len(`a+b`);s=g(g(B,b),a);o=[]
 while s:o+=(s+B/2)%B-B/2,;s=(s-o[-1])/B
 return o
</code></pre>
<p>Ungolfed:</p>
<pre class="lang-py prettyprint-override"><code>def c(a,b):
 B=sum(map(abs,a+b))**len(a+b)**2
 w=sum(B**i*x for i,x in enumerate(b))
 s=sum(w**i*x for i,x in enumerate(a))
 o=[]
 while s:o+=min(s%B,s%B-B,key=abs),; s=(s-o[-1])/B
 return o
</code></pre>
<p>In this computation, the polynomial coefficients are seen as digits (which may be negative) of a number in a very large base. After polynomials are in this format, multiplication or addition is a single integer operation. As long as the base is sufficiently large, there won't be any carries that spill over into neighboring digits.</p>
<p>-18 from improving bound on <code>B</code> as suggested by @xnor.</p>
</div>
<div id="pu9" class="pu"><h1>Haskell, <s>86</s> 72 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>u!c=foldr1((.u).zipWith(+).(++[0,0..])).map c
o g=(0:)!((&lt;$&gt;g).(*))!pure
</code></pre>

<p>Defines a function <code>o</code> such that <code>o g f</code> computes the composition f ∘ g.  Polynomials are represented by a nonempty list of coefficients starting at the constant term.</p>

<h2>Demo</h2>

<pre><code>*Main&gt; o [1,1] [5,3,1]
[9,5,1]
*Main&gt; o [0,-1,1] [1,0,1,0,0,0,1]
[1,0,1,-2,1,0,1,-6,15,-20,15,-6,1]
*Main&gt; o [2,1] [-192,288,-144,24]
[0,0,0,24]
*Main&gt; o [3,2] [27,-180,138,-36,3]
[0,0,-96,0,48]
</code></pre>

<h2>How it works</h2>

<p>No polynomial-related builtins or libraries.  Observe the similar recurrences</p>

<p>f(x) = a + f₁(x)x ⇒ f(x)g(x) = a g(x) + f₁(x)g(x)x,<br>
f(x) = a + f₁(x)x ⇒ f(g(x)) = a + f₁(g(x))g(x),</p>

<p>for polynomial multiplication and composition, respectively.  They both take the form</p>

<p>f(x) = a + f₁(x)x ⇒ W(f)(x) = C(a)(x) + U(W(f₁))(x).</p>

<p>The operator <code>!</code> solves a recurrence of this form for W given U and C, using <code>zipWith(+).(++[0,0..])</code> for polynomial addition (assuming the second argument is longer—for our purposes, it always will be).  Then,</p>

<p><code>(0:)</code> multiplies a polynomial argument by x (by prepending a zero coefficient);<br>
<code>(&lt;$&gt;g).(*)</code> multiplies a scalar argument by the polynomial <code>g</code>;<br>
<code>(0:)!((&lt;$&gt;g).(*))</code> multiplies a polynomial argument by the polynomial <code>g</code>;<br>
<code>pure</code> lifts a scalar argument to a constant polynomial (singleton list);<br>
<code>(0:)!((&lt;$&gt;g).(*))!pure</code> composes a polynomial argument with the polynomial <code>g</code>.</p>
</div>
<div id="pu10" class="pu"><h1><a href="http://pari.math.u-bordeaux.fr/" rel="nofollow">PARI/GP</a>, 19 bytes</h1>

<pre><code>(a,b)-&gt;subst(a,x,b)
</code></pre>

<p>which lets you do</p>

<pre><code>%(x^2+1,x^2+x-1)
</code></pre>

<p>to get</p>

<blockquote>
  <p>%2 = x^4 + 2*x^3 - x^2 - 2*x + 2</p>
</blockquote>
</div>
<div id="pu11" class="pu"><h1>TI-Basic 68k, 12 bytes</h1>
<pre><code>a|x=b→f(a,b)
</code></pre>
<p>The usage is straightforward, e.g. for the first example:</p>
<pre><code>f(x^2+3x+5,y+1)
</code></pre>
<p>Which returns</p>
<pre><code>y^2+5y+9
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Mathematica, 17 bytes</h1>
<pre><code>Expand[#/.x-&gt;#2]&amp;
</code></pre>
<p>Example usage:</p>
<pre><code>In[17]:= Expand[#/.x-&gt;#2]&amp; [27 - 180x + 138x^2 - 36x^3 + 3x^4, 3 + 2x]

              2       4
Out[17]= -96 x  + 48 x
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/78334/">78334</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




