<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269850</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>067</td><td>JavaScript ES6</td><td>240207T015133Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269852#269852">Arnauld</a></td></tr>
<tr d-ix="1"><td>117</td><td>Python 3</td><td>240207T044947Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269855#269855">totallyh</a></td></tr>
<tr d-ix="2"><td>027</td><td>Jelly</td><td>240208T004021Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269884#269884">Jonathan</a></td></tr>
<tr d-ix="3"><td>013</td><td>Jelly</td><td>240208T014931Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269889#269889">Jonathan</a></td></tr>
<tr d-ix="4"><td>084</td><td>Python 3</td><td>240207T101033Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269860#269860">ovs</a></td></tr>
<tr d-ix="5"><td>058</td><td>APLDyalog Unicode</td><td>240207T130527Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269861#269861">ovs</a></td></tr>
<tr d-ix="6"><td>036</td><td>Charcoal</td><td>240207T094950Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269859#269859">Neil</a></td></tr>
<tr d-ix="7"><td>015</td><td>05AB1E</td><td>240207T092356Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269858#269858">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>011</td><td>Nekomata + n</td><td>240207T091950Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269857#269857">alephalp</a></td></tr>
<tr d-ix="9"><td>120</td><td>JavaScript Node.js</td><td>240207T035808Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269854#269854">l4m2</a></td></tr>
<tr d-ix="10"><td>222</td><td>Python3</td><td>240207T024520Z</td><td><a href="https://codegolf.stackexchange.com/questions/269850/counting-rankings/269853#269853">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES6), 67 bytes</h1>
<p>A port of <a href="https://codegolf.stackexchange.com/a/269860/58563">ovs' great Python answer</a>. Now including the optimization suggested by xnor.</p>
<p>Expects <code>(n, k)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,k,d=1)=&gt;(--n?n*(f(n,k,d+1)*(d!=k-1)+f(n,k-d)):k&lt;2)/(d-!~-k||1)
</code></pre>
<p><a href="https://tio.run/##dZDBDoIwEETvfgXeutBKtkuIMaIfYjgQCkYhxYjxRPx1rJRiDHjqpDPztttr9sza/H65PYRuVNH3ZcI0r7hKEJIDE0Iftc9Kexcg@Eytk0ogBMOdUAC7ai8hZEqsX6LqOoQ@b3Tb1MWmbs6mihwBvDD00GMnTGH1a0tny4/NMeWeOeRCTn4xpjQLkAPFFuRQyMkKmuAGP4rJkgu8cWBkB9qsdBgDcQIX22TbZNrkXkNDdhBLK0TTX8Qzx22/nTn014lGh/o3" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES7), 114 bytes</h1>
<p>Expects <code>(n)(k)</code>.</p>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;k=&gt;eval(&quot;for(j=t=n**n;j--;)t-=(a=[...Array(n)].map((_,i)=&gt;x=j/n**i%n|0)).some(r=&gt;a.map(v=&gt;q-=v&lt;r,q=r)|q|~x+k)&quot;)
</code></pre>
<p><a href="https://tio.run/##dZB9a4MwEIf/36eQQiHXxbgkUgbtCfscRUbodGhtUqNIB7Kv7jLfytBBIAfP755LLleNqs42u9W@Nh9Jl2KnMbpglDSqIJvUWJJjjXq304fc9w9Q@0gUnhhjb9aqL6IhZld1I@SdZoDRHfPAhbOtbl8AWGWuCbEYqT7TYFT62BwtLdFCW7bf9@cLbKA7G12ZImGF@SQp4eAOeEHgcY@ceAxPf7mYufjllMfUc5dYC4qHSNClSs6q/aCaZJzKoZCz3g0YixmJNeE4MhxGDmExeZxlKvh6uxzapWuX03tkH@6LtV@Ej4Xsl2hawesSyf9ROCLZ/QA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<p>This is a version without <code>eval()</code> for readability.</p>
<pre class="lang-javascript prettyprint-override"><code>n =&gt;                 // outer function taking n
k =&gt; {               // inner function taking k
  for(               // loop:
    j = t = n ** n;  //   start with j = t = n ** n, where:
                     //     j = iteration counter
                     //     t = success counter
    j--;             //   stop once j = 0 has been processed
  )                  //
    t -=             //   decrement t for each failure
    ( a =            //   let a[] be an array of n entries,
      [...Array(n)]  //   which are turned into 0-indexed rankings
      .map((_, i) =&gt; //   for each value at index i in a[]:
        x =          //     save the last value in x
        j / n ** i   //     fill with an integer in [0 .. n-1],
        % n | 0      //     according to j and i
      )              //   end of map()
    ).some(r =&gt;      //   for each ranking r in a[]:
      a.map(v =&gt;     //     for each ranking v in a[]:
        q -= v &lt; r,  //       decrement q if v &lt; r
        q = r        //       starting with q = r
      )              //     end of map()
      | q            //     some() is triggered if q != 0
      | ~x + k       //     or x != k - 1 (i.e. the last ranking
                     //     is not Alice's ranking)
    );               //   end of some() / end of for()
  return t           // return the success counter
}                    //
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>124</s> <s>119</s> 117 bytes</h1>
<p><em>-5 bytes thanks to <a href="https://codegolf.stackexchange.com/users/91472">enzo</a>.</em></p>

<pre class="lang-python prettyprint-override"><code>lambda n,k:sum(all(r==sum(q&lt;r for q in s)for r in s)for s in product([k-1],*[range(n)]*(n-1)))
from itertools import*
</code></pre>
<p><a href="https://tio.run/##VYxBDoIwEEX3nGKWHSyLxrghchJgUYUqaTstQ1l4@kqjifGvXvLyfnylZ6BzNt2Qnfa3SQNJ2267F9o5wV1XcL0ymMCwwkKwYUH@4VYwcpj2exK9bdQo6541PWZBONaCGoWIleHgYUkzpxDc0fgYONW5PFB5@BRKwgXbCo4VY/8MwQnU15ZFXigJI0iCRcxv" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>This uses the <code>sum</code> function two times too many, considering the algorithm doesn't involve any addition at all...</p>
<h2>Explanation</h2>
<p>The algorithm is pretty simple. Let's assume there are <span class="math-container">\$n = 3\$</span> contestants and Alice's rank <span class="math-container">\$k = 1\$</span>. The ranks that follow will be 0-indexed because it's more convenient to work with. First, it generates a list of possible rankings where Alice's rank, or the first rank in the list, is <span class="math-container">\$0\$</span>. This is done by taking the Cartesian product of the singleton list <span class="math-container">\$[0]\$</span> with <span class="math-container">\$n - 1 = 2\$</span> copies of <span class="math-container">\$[0, 3)\$</span>.</p>
<pre class="lang-python prettyprint-override"><code>[(0, 0, 0), (0, 0, 1), (0, 0, 2),
 (0, 1, 0), (0, 1, 1), (0, 1, 2),
 (0, 2, 0), (0, 2, 1), (0, 2, 2)]
</code></pre>
<p>Then, it knocks out invalid rankings by checking if each rank is equal to &quot;the number of other participants who performed strictly better than them&quot;, or in other words, the number of ranks lower than the rank in question.</p>
<pre class="lang-python prettyprint-override"><code>[(0, 0, 0), (0, 0, 2),
 (0, 1, 1), (0, 1, 2),
 (0, 2, 0), (0, 2, 1)]
</code></pre>
<p>Finally, it returns the number of rankings remaining, which is <span class="math-container">\$6\$</span>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 27 <a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">bytes</a> (fast version)</h1>
<pre><code>cⱮ`€U;ḋ¥ƒ1H1¦ṖṚ,Ʋ⁹ịⱮPḤ×c×÷⁸
</code></pre>
<p>A dyadic Link that accepts <span class="math-container">\$n\$</span> on the left and <span class="math-container">\$k\$</span> on the right and yields the count of weak orderings given a labelled item's rank.</p>
<p><strong><a href="https://tio.run/##AUUAuv9qZWxsef//Y@KxrmDigqxVO@G4i8KlxpIxSDHCpuG5luG5mizGsuKBueG7i@KxrlDhuKTDl2PDl8O34oG4////NDD/MjA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8/z/50cZ1CY@a1oRaP9zRfWjpsUmGHoaHlj3cOe3hzlk6xzY9atz5cHc3UE3Awx1LDk9PPjz98PZHjTv@60C1PdzVd2jr0UkPd87QObxcP@tRwxwFWzuFRw1zNSP//zc0AAA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<p>First calculates the first <span class="math-container">\$n+1\$</span> Fubini numbers (<a href="https://oeis.org/A000670" rel="nofollow noreferrer">A000670</a>): <span class="math-container">\$F(a) \forall a \in [0,n]\$</span>.</p>
<p>This is achieved by expanding the recursive calculation <span class="math-container">\$F(a) = \sum_{j=1}^a{F(a-j)\binom{a}{j}}, F(0)=1\$</span> as a reduction of dot-products over the relevant portion of Pascal's triangle. (I think this can probably be golfed a little by using the recursive calculation itself.)</p>
<p>Then uses that to calculate half of the number of necklaces of partitions of n+1 labelled beads (<span class="math-container">\$\frac{1}{2}\$</span><a href="https://oeis.org/A000629" rel="nofollow noreferrer">A000629</a>) which is simply <span class="math-container">\$F\$</span> but with the first term halved: <span class="math-container">\$\frac{N(a)}{2} \forall a \in [0,n]\$</span></p>
<p>Finally applies the formula suggested by <a href="https://codegolf.stackexchange.com/users/69059/nitrodon">Nitrodon</a> in the comments:</p>
<p><span class="math-container">$$R(n,k)=F(k-1)N(n-k)\binom{n-1}{k-1}$$</span></p>
<pre><code>cⱮ`€U;ḋ¥ƒ1H1¦ṖṚ,Ʋ⁹ịⱮPḤ×c×÷⁸ - Link: n, k
   €                        - for each {v in [1..n]}:
 Ɱ`                         -   map across {w in [1..v]} with:
c                           -     {v} choose {w}
    U                       - reverse each -&gt; [[1C1], [2C2, 2C1], [3C3, 3C2, 3C1], ...]
        ƒ1                  - starting with 1 reduce by:
       ¥                    -   last two links as a dyad f(current, next):
      ḋ                     -     {current} dot-product {next}
     ;                      -     {current} concatenate {that}
                               -&gt; [F(a) for a in [0..n]] = Fubinis
                Ʋ           - last four links as a monad - f(Fubinis):
          H1¦               -   halve the first term
             Ṗ              -   remove the last term
              Ṛ             -   reverse
               ,            -   pair {Fubinis} -&gt; [Necklaces/2, Fubinis]
                 ⁹ịⱮ        - kth element of each -&gt; [N(n-k)/2, F(k-1)]
                    P       - product
                     Ḥ      - double -&gt; F(k-1)*N(n-k)
                       c    - {n} choose {k}
                      ×     - multiply -&gt; F(k-1) * N(n-k) * nCk
                        ×   - multiply by {k}
                         ÷⁸ - divide by {n} -&gt; F(k-1) * N(n-k) * (n-1)C(k-1)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 13 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a> (golf version)</h1>
<pre><code>ṗ`&lt;Ɱ`§‘ƊƑƇḢ€ċ
</code></pre>
<p>A dyadic Link that accepts <span class="math-container">\$n\$</span> on the left and <span class="math-container">\$k\$</span> on the right and yields the count of weak orderings given a labelled item's rank.</p>
<p><strong><a href="https://tio.run/##ASkA1v9qZWxsef//4bmXYDzisa5gwqfigJjGisaRxofhuKLigqzEi////zX/Mw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see the <a href="https://tio.run/##y0rNyan8///hzukJNo82rks4tPxRw4xjXccmHmt/uGPRo6Y1R7r/64AkgMyHu/oObT066eHOGTqHl@tnPWqYo2Brp/CoYa5m5P//pgA" rel="nofollow noreferrer" title="Jelly – Try It Online">test-suite</a>.</p>
<h3>How?</h3>
<pre><code>ṗ`&lt;Ɱ`§‘ƊƑƇḢ€ċ - Link: n, k
ṗ`            - {n} Cartesian power {n} -&gt; all length n words of alphabet [1..n]
         Ƈ    - filter keep those for which:
        Ƒ     -   is invariant under?:
       Ɗ      -     last three links as a monad - f(word):
  &lt;Ɱ`         -       {word} less than mapped over {word}
     §        -       sums -&gt; [count of elements less than i for i in word]
      ‘       -       increment {those}
                 -&gt; all valid rankings
          Ḣ€  - head each -&gt; Alice's rank in each valid ranking
            ċ - count occurrences of {k}
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>93</s> 84 bytes</h1>
<p>-9 bytes thanks to @xnor!</p>
<p>Going for the brownie points, but still exponential runtime ;)</p>

<pre class="lang-python prettyprint-override"><code>f=lambda n,k,d=1:(n&gt;1and~-n*(f(n-1,k,d+1)*(d!=k-1)+f(n-1,k-d))or k&lt;2)/(d-(k==1)or 1)
</code></pre>
<p><a href="https://tio.run/##Tc5BCsJADAXQvaeIqybtBInipji9y0gcLdG0lG7cePWxAy5cBd6H/zO/18fkp1JyfKbXVRN4sKBRevRBkuuHvcWMzlK9E2pR99FYqPspK9G0gF2OdEBltBilglDJ23EYHZbk9xtKOFO/A6hs/@xbbw0A5mX0FesPDQ9NqBvBiMoX" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://dyalog.com" rel="nofollow noreferrer">APL(Dyalog Unicode)</a>, <sup><s></s></sup>58 bytes <sup><a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a></sup></h1>
<pre><code>{⍵÷⍨⍺(⊣{n×⍵÷1⌈(⌽-⍺∘=)⍳n←≢⍵}¯1↓⊢/⍤⊢+⊢×(≠∨=∘⍳)∘≢)⍣⍵⊢0,⍨⍺≤⍳⍵}
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=JY0xDkBAEEWvs4LgAK7kAqKV3Y1JJApKWQqdQkQi0dib/JP4KCY/mfffTAnZ/QFZIKeCncrC998qQ6MVmismgB7yALIVqFsYR17da4a6g3UJZGaEHN8rmBF6ySmwHrxhHM2JCgtp9D@CmYnfMw8&amp;f=01DPU1dQzwbixLxidc1HvasetU181NWso1/9qHcrEO8CUhpAnAZkatYeWvGodzOQB2FYAAA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
<p>A dynamic programming adaption of my recursive Python answer. Runs in <span class="math-container">\$ \mathcal{O}(n^2) \$</span>. A brute force approach would 25 bytes:</p>
<pre><code>{⊃+⌿⍺=1+↑∪(+/∘.&lt;⍨)¨,⍳⍵⍴⍵}
</code></pre>
<p><a href="https://razetime.github.io/APLgolf/?h=AwA&amp;c=q37U1az9qGf/o95dtobaj9omPupYpaGt/6hjhp7No94VmodW6Dzq3fyod@uj3i1AshYA&amp;f=01DPU1dQzwbixLxidc1HvasetU181NWso1/9qHcrEO8CUhpAnAZkatYeWvGodzOQB2GYAAA&amp;i=AwA&amp;r=tryapl&amp;l=apl-dyalog&amp;m=dfn&amp;n=f" rel="nofollow noreferrer">Try it on APLgolf!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 36 bytes</h1>
<pre><code>ＮθＮηＩＬΦＥＸθ⊖θ⊞Ｏ﹪÷ιＸθ…⁰⊖θθ⊖η⬤ι⁼λＬΦι‹νλ
</code></pre>
<p><a href="https://tio.run/##ZY7NCsIwEITvPkWOG4gg4q0nsQoFf4pvENulCWyTNj/18WMqFCzubWZnPqZR0jVWUkqVGWK4x/6FDkZebH61yrp22gQ4SR/giqYLCi6aQn7e5AC1fc81wUpsHPZoAraZwgWro1ePAZ0MNkdtG8lCZUKpJ90i6BxYqk9pOoTdH2OmjHxtq697JJoJ5zFK8kCCrYfp2fAejGDElytSOmz2aTvRBw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Based on @totallyhuman's Python answer.</p>
<pre><code>Ｎθ                                      Input `n` as a number
  Ｎη                                    Input `k` as a number
         θ                              Input `n`
        Ｘ                               Raised to power
           θ                            Input `n`
          ⊖                             Decremented
       Ｅ                                Map over implicit range
                ι                       Current value
               ÷                        Vectorised integer divided by
                  θ                     Input `n`
                 Ｘ                      Vectorised raised to power
                   …                    Range from
                    ⁰                   Literal integer `0` to
                       θ                Input `n`
                      ⊖                 Decremented
              ﹪                         Vectorised modulo
                       θ                Input `n`
            ⊞Ｏ                          Concatenated with
                         η              Input `k`
                        ⊖               Decremented
      Φ                                 Filtered where
                           ι            Current list
                          ⬤             All elements satisfy
                                 ι      Current list
                               Φ        Filtered where
                                  ν     Inner element
                                 ‹      Is less than
                                   λ    Outer element
                              Ｌ         Take the length
                            ⁼           Equals
                             λ          Current element
     Ｌ                                  Take the length
    Ｉ                                   Cast to string
                                        Implicitly print
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 15 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>L¤ãʒ&lt;Ðδ›OQ}€нQO
</code></pre>
<p>Port of <a href="https://codegolf.stackexchange.com/a/269855/52210"><em>@totallyhuman</em>'s Python answer</a>, so make sure to upvote that answer as well!</p>
<p><a href="https://tio.run/##ASYA2f9vc2FiaWX//0zCpMOjypI8w5DOtOKAuk9RfeKCrNC9UU///zMKMQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfWVC8X@fQ0sOLz41yebwhHNbHjXs8g@sfdS05sLeQP//Ov@jow11DGN1oo2gpBGQNAazjaFsYyBpAhYxAYuYQEVMYmMB" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>L           # Push a list in the range [1, first (implicit) input-integer n]
 ¤          # Push its last item (without popping): n
  ã         # Cartesian product to get all n-sized lists using [1,n]-ranged integers
   ʒ        # Filter it by:
    &lt;       #  Decrease all values in the list by 1
     Ð      #  Triplicate the list
      δ     #  Pop two, and apply double-vectorized:
       ›    #   Larger than check
        O   #  Sum each inner list/row together
         Q  #  Check if this list of sums equals the original list we've triplicated
     }€н    # After the filter: only leave the first item of each remaining list
        Q   # Check for each whether it equals the second (implicit) input-integer k
         O  # Sum those checks together
            # (which is output implicitly as result)
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a> + <code>-n</code>, 11 bytes</h1>
<pre><code>RJ:ᵐhmj↕ũh=
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFNtJJurpKOgpJunlLsgqWlJWm6FhuCvKwebp2QkZv1qG3q0ZUZtkuKk5KLoZILbqobKhhyGYGxEZcxkDYG08ZcJkC2CZBtAmabQNQDAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>RJ:ᵐhmj↕ũh=     Take input n, k
R               Range from 1 to n
 J              Split the range into a list of parts
  :ᵐhm          Replace every element in each part with the head of the part
                For example, [[1],[2,3],[4,5]] -&gt; [[1],[2,2],[4,4]]
      j         Join the list of parts into a single list
       ↕        Take a permutation
        ũ       Remove duplicate permutations
         h=     Check if the head of the list is equal to k
</code></pre>
<p><code>-n</code> counts the number of solutions.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 120 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;g=(k,...s)=&gt;(s[n-1]?k==s[0]&amp;[...s].sort((a,b)=&gt;a-b).every(u=(t,i)=&gt;t==u|(u=t)==i+1):g(k,n,...s))+(--s[0]?g(k,...s):0)
</code></pre>
<p><a href="https://tio.run/##dZDRjsIgEEXf/Yo@mSECCjRmYzL6IQ0P1a1N1cCmoMkm@@@VSqkx7SYkXObeOQNcykfpTm3z45mx31V3xs7gvka4Us65I7gHVxgm9OGK6IqNXhZ9XXNnWw9Q0mOIlOxIePWo2l@4I3jahJpHvP@FoyeIzUqQXR2QJkLJChjrYYc6zdltSHeyxtlbxW@2hjMIEhbJ1utMZFAITRafvhx92ftUaJqFTc4F5Rsk6RSlRtQ2ohJMUBWFGvFhwCBGS84Bh5F5HBnDMnECJQkx365iuwrtKt1HvcIvMfeK/P0h26mVvuBraqn/rXywVPcE" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1>Python3, 222 bytes</h1>
<pre class="lang-py prettyprint-override"><code>from itertools import*
R=range
def f(n,k):
 t=0
 q=[(1,{*R(n)},{})]
 for a,b,c in q:
  if not b:t+=c.get(k,[-1])[0]==0
  else:
   for i in R(len(b)):
    for C in combinations(b,i+1):q+=[(a+i+1,b-{*C},{**c,a:C})]
 return t
</code></pre>
<p><a href="https://tio.run/##XY4xboQwEEV7n2JKD3ijZaGIkFxxA1pEgYm9sRZsMJMiQnt2YpAiLdvN@3p/9Kdf@vYu/5zCtpngR7CkA3k/LGDHyQdKWC1D5@6afWkDhjvxwJIBySuDWTY8E2tSc4dPsT6xZWB8gE4o0YN1MEcTrAHnCVRJqew/7pr4QzSXrMXm2sr9Dehh0bt5lO1erPmgHVeIR3zk1Z73flTWdWS9W7gSNs2wnNM4o0vjLdRlTaq4JEl60ZXVMSho@gkOaJuCdcRNXJwhsn@6CXjD2wvm7/jqFudqcXYj5mcsELc/" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269850/">269850</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




