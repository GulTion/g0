<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::161483</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>841</td><td>Python3</td><td>240125T235721Z</td><td><a href="https://codegolf.stackexchange.com/questions/161483/expand-sine-and-cosine/269556#269556">Ajax1234</a></td></tr>
<tr d-ix="1"><td>221</td><td>Bracmat</td><td>191103T181605Z</td><td><a href="https://codegolf.stackexchange.com/questions/161483/expand-sine-and-cosine/195251#195251">Bart Jon</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 841 bytes</h1>
<p>Longer than I hoped, but the logic is straightforward.</p>
<pre class="lang-py prettyprint-override"><code>E=enumerate
S,O='sin','cos'
def f(e):
 e=[[(a,b,[([1,-1][j&lt;0]*([1,j]['pi'==C]),C)for j,C in c for _ in range(1,abs(j)+1 if'pi'!=C else 2)],d)for a,b,c,d in i]for i in e]
 P=1
 while P:
  P=0
  for i,a in E(e):
   F=0
   for I,A in E(a):
    if len(A[2])&gt;1:q,*w=A[2];l=[[(A[0],S,[q],1),(1,O,w,1)],[(A[0],S,w,1),(1,O,[q],1)]]if S==A[1]else[[(A[0],O,[q],1),(1,O,w,1)],[(-1*A[0],S,[q],1),(1,S,w,1)]];l=[u+a[:I]+a[I+1:]for u in l];e=e[:i]+e[i+1:]+l;F=1;break
   if F:P=1;break
 r={}
 for i in e:
  R,T={},1
  for a,b,[(C,V)],d in i:
   if C==-1 and'sin'==b:a*=-1
   if'pi'==V:
    if(L:=[[1,-1][abs(C)%2],0][b==S])==0:R,T={},0;break
    else:T*=L*a
   else:R[(b,V)]=R.get((b,V),0)+d;T*=a
  r[M]=r.get(M:=str(sorted(R.items())),0)+T
 return' + '.join(str(b)+''.join(f'{j}{[&quot;^&quot;+str(l),&quot;&quot;][l==1]}({k})'for(j,k),l in eval(a))for a,b in r.items()if b)
</code></pre>
<p><a href="https://tio.run/##tVTdbtowFL7PU3igKTZxKkwyxsI8qUKtVKlVK6h6Y7lTAqYNTUMbYDAhpL3hHokd2yTQtap2sxvr/H7nOz/J08/5/TQPOk/FdnvCVb54VEU8V86AXnJ3luYudYfTmeuM1BiNsSKRgxQXAsc0oQILRn0mxeRrUza0MpHCfUpdznuS0B4ZTws0oT2U5miItPJdi0Wc3ynMaJzM8IR4DKVjnfSB95DKZgq1iKQjk6uLDOlIJ6VSG1ItKumgK84ctLxPM4WugBLoTXhNCI110InlitCp8RjXGT22rti6oDDKVI6PRUuSbyx6po0l10o30y0ei6akAyqeJWWEAuFLugRJ0sq1rBw2SEpAHHDAYFK3UoJcvgnis8arEhZTGgYLLxbRmYT3zGOR6X@h@Weyq7gSUSo9JVLt8rLuKWfdpFDxg2P7Oo2u9paCrzcO2g9Qd9@n12ClbDc2u88evdHDNwOPdkg9zn2G4nxkzoHzJIobYLFeu@2bcpz4PILJ2aPQ6@2Rjy1Jm1IknA8k4bwZ7eo292zN1qPrBj9vxE6p9gVONBneP7pTc2wU2iTeqAuBOqwQF5IXxnkR8dm8wLNpMVcj3D9K5@pxhgkxCdfQvpovitxFHnKPJtM0xzo6IZ67U8fuerJZi9ptzdOejNBaTYqMcyY3eP2wIS5MCE/oA6GZmd@POIMbKk/U3HRZFAaWkK1jvhFGkf2EECw7AGXlwnSR3f6hk1W@AHaP6mCHhBXxQLgN8Io4T0Waz7H@AAmqt0qzH@jIFYEv9Lalw2xmCNJrAuEhAfkSMSwRAUnjhntcU96pa0fstRJ/6AW/fx3g679D2UPsEopwC6TESL4JMKJuH27l7fK6IRiofhNDwb5D4u8dw12XiZlKZdTEtdE3BKsYm@5ZYxmzw2xV1qqaxXLs/FZe@3PYaXe@dNrQqWdNnU7Q/tQJg5fN/7VA6LNKfdFvGfM6vsJ9bz6u@y/Uwv9ELXyPWhVkKwfUAh3eA6vuYXcO9ld5iFMm72mURff3tCuP6u3DzR2ibP8A" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/BartJongejan/Bracmat" rel="nofollow noreferrer">Bracmat</a>, 221 bytes</h1>

<pre><code>(P=F v a b.!arg:((sin|cos):?F.?v)&amp;(!v:@&amp;(!F.!v)|!F$!v)|!arg:%?a_%?b&amp;(P$!a)_(P$!b)|!arg)&amp;(f=i a b n u.1+(!arg:e^(?n*((i|-i):?i)*?u+?b)&amp;(!i*(sin.!u)+(cos.!u))^!n*f$(e^!b)|!arg:%?a_%?b&amp;(f$!a)_(f$!b)|!arg)+-1)&amp;(Z=.f$(P$!arg))
</code></pre>

<p><a href="https://tio.run/##jY7NboMwEITvfQosEbK2haUESl0k5J4455wDkY0gtdRCxF858O7UBlKuvXhXszPzWTUy/5bdPMMlSZ3BkY5iSDb3GKDV1ZTXLY5FysSAPUBD/GHelKEBTyh1l2G9ByFvB6E8uLhI4psdaj2ZVJlo2@pUTs9OFJZAkYGoCICefG36NSaip0JZhiYWzFCPKRi6XXCGKlK6UGTP2p1YrsRyJ1L/ZHquCTMJ@x8j4fnn8@sI96I7xqIYH03RtrquvLrv3KuLdgXPC/xMRvyy0NfNan5gVrqsI86C/UwD8lTPmzX8y0t6Jsr8iOTG9tBb10ijt5BH/J1HVtxaKedB9MrD4P/OcHH@Ag" rel="nofollow noreferrer" title="Bracmat â€“ Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/161483/">161483</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




