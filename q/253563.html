<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::253563</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>470</td><td>Java 10</td><td>221024T145658Z</td><td><a href="https://codegolf.stackexchange.com/questions/253563/parletts-movement-notation/253703#253703">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>305</td><td>JavaScript V8</td><td>221021T172539Z</td><td><a href="https://codegolf.stackexchange.com/questions/253563/parletts-movement-notation/253566#253566">Arnauld</a></td></tr>
<tr d-ix="2"><td>136</td><td>Charcoal</td><td>221022T093015Z</td><td><a href="https://codegolf.stackexchange.com/questions/253563/parletts-movement-notation/253618#253618">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Java 10, <s>631</s> <s>608</s> <s>606</s> <s>597</s> <s>578</s> <s>504</s> <s>489</s> <s>475</s> 470 bytes</h1>

<pre class="lang-java prettyprint-override"><code>s-&gt;{int i=0,k,d,n,x,y,l,e[],f[];var m=new boolean[81];for(var p:s.split(&quot;,&quot;)){e=f=new int[81];e[40]=k=1;for(var P:p.split(&quot;\\.&quot;)){f=e.clone();k++;for(i=81;i--&gt;0;)if(e[i]==k-1)for(n=P.charAt(0),d=9;d--&gt;0;)for(l=n&gt;99?0:n-49;d*n==440|(&quot;ǰ« )ņ©+  Ł &quot;.charAt((P.chars().sum()-n)%42%15)-1&gt;&gt;d&amp;1)&gt;0&amp;&amp;l++&lt;n%48;)if((y=i/9-d/3*l+l)&gt;=0&amp;y&lt;9&amp;(x=i%9-d%3*l+l)&gt;=0&amp;x&lt;9)f[y*9+x]=k;e=f;}for(;++i&lt;81;)m[i]|=e[i]==k;}for(;i--&gt;0;)System.out.print((i==40?&quot;O&quot;:m[i]?&quot;X&quot;:&quot;.&quot;)+(i%9&lt;1?&quot;\n&quot;:&quot;&quot;));}
</code></pre>
<p>-74 bytes, opening up another -22 bytes, thanks to <em>@Arnauld</em><br />
-5 bytes thanks to <em>@ceilingcat</em></p>
<p><a href="https://tio.run/##hVPLattAFF0UushXDAM2M5rRRGMrED1GpssumgSyKTheKHq0E8sjY8mpTOJFKPRfSjf9BkPoZ7mjh9NEDe1m4J577vvMTXgbmjfxfB9lYVGAD6FUd0cASFUmqzSMEnBWmwDc5jIGEbosV1J9AgX2NLo90k9RhqWMwBlQQIB9YQZ3OhZIYdE5jamiFd3QjCbTGU2nM@82XIGFUMkXcJ3nWRKq6SmfeWm@QrVn6RasWGayRJBCjO8SkTZcnbHhJVPbmom54E8RF@7yEHF1xeqYVCQsynKVIOzNCWmYUpxyT5pmYHlYpiiZypkQc5Pj2qnEBYs@h6t3JbIwjYXjxS2zdmZCBY4zsVxl2tphKCFs27pH8NfP3Q@we8BvHr/tvu@@EgAeH8BbeMiE2pwFwqxYLxA2FR7YowE/wSYPgnjIcWANhxkhvhrYp01XaCPksWPGx2MjIxkOhDXc@M4QVUIONDz4A1e@g9PpxnBIpbfh6S1527pZjxDp60nxQg94L7oxO183/uWmKJMFy9clW@pT6k6lHsmawHPo1mET@BG6UG@SIF3W5xN4pTSgN@tt91598OX6OtMH7@7e6GKhVdNJYzoLcauYMin0VTiBjVYO9qjq2cZLWxHK@xTBuB/QkR8wLnrsxvUS4xXrF@XkNWgc9LPpCqrye0SDjf4OHwtmi1cgdtJDbYPxZsT2F2nJ5stCwIoSatCA@lRPJmggqC9oFVBd/dkPaBMdtJ67OhQ3UJd9TPL/cqCCHev5d23O1viffnR7tb4@MoXge7Vcly6ApOiqvUY6X5ctq@MoFqF/8LuOtvvf" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>s-&gt;{                            // Method with String parameter and no return-type
  int i=0,                      //  Index-integer, starting at 0
      k,                        //  'and then'-iteration integer
      d,                        //  Direction-integer
      n,                        //  Step-size integer
      o,                        //  Operation-integer
      x,y,                      //  x,y-coordinates
      l,                        //  Inner loop integer (when the step-size is 'n')
      e[],f[];                  //  Temp integer-arrays
  var m=new boolean[81];        //  Result boolean-array, starting at 81x false
  for(var p:s.split(&quot;,&quot;)){      //  Split the input by &quot;,&quot; and loop over the parts:
    e=f=new int[81];            //   Set `e` to an empty list
                                //   (and `f` as well to prevent uninitialized errors)
    e[40]=k=1;                  //   (Re)set `k` to 1
                                //   And also fill the center cell with 1
    for(var P:p.split(&quot;\\.&quot;)){  //   Inner loop over the parts split by &quot;.&quot;:
      f=e.clone();              //     Set `f` to a copy of `e`
      k++;                      //     Increase `k` by 1
      for(i=81;i--&gt;0;)          //     Loop over all the cells:
        if(e[i]==k-1)           //      If the cell contains the previous `k`:
          for(n=P.charAt(0),    //       Set `n` to the first character of `P`
              d=9;d--&gt;0;)       //       Loop over the directions `d` in the range (9,0]:
            for(l=n&gt;99?         //        If the step-size is 'n':
                   0            //         Set `l` to 0
                  :             //        Else:
                   n-49;        //         Set `l` to digit 'n' minus 1
                 d*n==440       //         If `n` = 'n' and the direction is 4,
                 |(&quot;ǰ« )ņ©+  Ł &quot;.charAt((P.chars().sum()-n)%42%15)-1&gt;&gt;d&amp;1)&gt;0
                                //         or bitmask magic† to check whether the direction applies to operation:
                &amp;&amp;l++&lt;n%48;)    //          If `n` != 'n': simply use `l` once
                                //          Else (`n` = 'n'): loop `l` in the range [0,14):
                                //          (any integer &gt;= 8 would be fine here)
              if((y=i/9-d/3*l+l)//          Set `y` to `l` steps into direction `d`
                 &gt;=0&amp;y&lt;9        //          And check if it's still in bounds
                 &amp;(x=i%9-d%3*l+l)&gt;=0&amp;x&lt;9)
                                //          Change and check bounds for `x` as well:
                f[y*9+x]=k;     //           Fill the `x,y`'th cell with value `k`
      e=f;}                     //     Set `f` as new `e` for the next iteration
    for(;++i&lt;81;)               //   Loop over all the cells again:
      m[i]|=                    //    OR the boolean at cell `i` with:
            e[i]==k;            //     Check if the `i`'th cell of `e` contains value `k`
  }                             //  After we've looped over the entire input-String:
  for(i=81;i--&gt;0;)              //   Loop one last time over all the cells:
    System.out.print(           //    Print:
      (i==40?                   //     If it's the center cell:
        &quot;O&quot;                     //      Print &quot;O&quot;
       :m[i]?                   //     Else-if the `i`'th cell of the boolean-matrix is true:
        &quot;X&quot;                     //      Print &quot;X&quot;
       :                        //     Else (it's false instead):
        &quot;.&quot;)                    //      Print &quot;.&quot;
      +(i%9&lt;1?&quot;\n&quot;:&quot;&quot;));}       //     And print a newline every 9 cells
</code></pre>
<p><em>†Explanation of the 'bitmask magic':</em></p>
<div class="s-table-container"><table class="s-table">
<thead>
<tr>
<th>Operation</th>
<th><code>P.chars().sum()</code><br><code>-n</code></th>
<th><code>%42</code></th>
<th><code>%15</code></th>
<th><code>&quot;ǰ« )ņ©+  Ł &quot;</code><br><code>.charAt(...)-1</code></th>
<th><code>&gt;&gt;d</code> for direction <code>d</code><br> in range <span class="math-container">\$[0,8]\$</span></th>
<th><code>&amp;1</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>120</td>
<td>36</td>
<td>6</td>
<td>325</td>
<td>325,162,81,40,20,10,5,2,1</td>
<td>101<br>000<br>101</td>
</tr>
<tr>
<td>+</td>
<td>43</td>
<td>1</td>
<td>1</td>
<td>170</td>
<td>170,85,42,21,10,5,2,1,0</td>
<td>010<br>101<br>010</td>
</tr>
<tr>
<td>*</td>
<td>42</td>
<td>0</td>
<td>0</td>
<td>495</td>
<td>495,247,61,30,15,7,3,1</td>
<td>111<br>101<br>111</td>
</tr>
<tr>
<td>&gt;</td>
<td>62</td>
<td>20</td>
<td>5</td>
<td>2</td>
<td>2,1,0,0,0,0,0,0</td>
<td>010<br>000<br>000</td>
</tr>
<tr>
<td>&lt;</td>
<td>60</td>
<td>18</td>
<td>3</td>
<td>128</td>
<td>128,64,32,16,8,4,2,1,0</td>
<td>000<br>000<br>010</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>122</td>
<td>38</td>
<td>8</td>
<td>130</td>
<td>130,65,32,16,8,4,2,1,0</td>
<td>010<br>000<br>010</td>
</tr>
<tr>
<td>=</td>
<td>61</td>
<td>19</td>
<td>4</td>
<td>40</td>
<td>40,20,10,5,2,1,0,0,0</td>
<td>000<br>101<br>000</td>
</tr>
<tr>
<td>&gt;=</td>
<td>123</td>
<td>39</td>
<td>9</td>
<td>42</td>
<td>42,21,10,5,2,1,0,0,0</td>
<td>010<br>101<br>000</td>
</tr>
<tr>
<td>&lt;=</td>
<td>121</td>
<td>37</td>
<td>7</td>
<td>168</td>
<td>168,84,42,21,10,5,2,1,0</td>
<td>000<br>101<br>010</td>
</tr>
<tr>
<td>x&gt;</td>
<td>180</td>
<td>14</td>
<td>14</td>
<td>5</td>
<td>5,2,1,0,0,0,0,0</td>
<td>101<br>000<br>000</td>
</tr>
<tr>
<td>x&lt;</td>
<td>182</td>
<td>12</td>
<td>12</td>
<td>320</td>
<td>320,160,80,40,20,10,5,2,1</td>
<td>000<br>000<br>101</td>
</tr>
</tbody>
</table></div>
</div>
<div id="pu1" class="pu"><h1><a href="https://v8.dev/" rel="nofollow noreferrer">JavaScript (V8)</a>, 305 bytes</h1>
<p>Prints the ASCII art.</p>
<pre class="lang-javascript prettyprint-override"><code>s=&gt;s.split`,`.map(s=&gt;(g=(x,y,[s,...a])=&gt;(r=m[y])&amp;&amp;r[x]&amp;&amp;b.map((v,d)=&gt;s?',x&lt;,&gt;,,=,,&gt;=,,&lt;,,&lt;&gt;,,&lt;=,,+,,x&gt;,x'.split`,`.indexOf(s.slice(1))&gt;&gt;v&amp;d!=4&amp;&amp;b.map((_,n)=&gt;n-s[0]||g(x+d%3*n-n,y+n*~-(d/3),a)):r[x]='X'))(4,4,s.split`.`),b=[...'4142.2030'],m=b.map(_=&gt;[...b].fill`.`))|m.map(r=&gt;print(r.join` `),m[4][4]='O')
</code></pre>
<p><a href="https://tio.run/##RU/bboMwDP0VhjRIwGQNMGlacfa0575OQqjQUjoqSBGpUKp1@3UWQFsl2zr28eX4VAyF2vd1dwmGl7HCUaFQTHVNfckhZ23REVMhRyQarpAqYIwVGTWlHtv0mlHH6VOdOc5u7iUDlIZUby7oBAQAAgjjiTGTJQb6AFqAdu9Halke9KYi5m5T7w@EUyrE4JQPGP/v3YI0e2Wg0lV2ux2J9svHyJOBhKsvvZ@AlE8RhYLS10kOuh8upSSGGP6eYTmFHaZGvhvzOGThKlq5GbS4HNiimLhdxqq6aaZuemtnpkfR9bW8kJ6dzrXMLbOoTePMGLobl47r1LK5b4Nlh3qO3hSlD3xJkXHze5gIxnFm5sKEuGbLIPfvIBJzV4QsRva8TJhZqZMJxh7jnm0Zmef@vdh/EmWhsL6sRaKia6ua45Ib8E3HXw" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<h3>Encoding</h3>
<p>Each symbol is encoded by its position into a lookup array, packed as the following comma-separated string:</p>
<pre class="lang-javascript prettyprint-override"><code>',x&lt;,&gt;,,=,,&gt;=,,&lt;,,&lt;&gt;,,&lt;=,,+,,x&gt;,x'
</code></pre>
<p>The position is then interpreted as a 5-bit mask. Note that the symbol <code>*</code> is not stored at all, so its position is <code>-1</code> and all bits are set in that case.</p>
<pre><code> symbol | position | bitmask      bits:
--------+----------+---------
   x&lt;   |     1    |  00001       4 3 2 1 0
   &gt;    |     2    |  00010       | | | | |
   =    |     4    |  00100       | | | | +--&gt; Diagonal backward
   &gt;=   |     6    |  00110       | | | +----&gt; Directly forward
   &lt;    |     8    |  01000       | | +------&gt; Left or right
   &lt;&gt;   |    10    |  01010       | +--------&gt; Directly backward
   &lt;=   |    12    |  01100       +----------&gt; Diagonal forward
   +    |    14    |  01110
   x&gt;   |    16    |  10000
   x    |    17    |  10001
   *    |    -1    |  11111
                      -----
                      43210
</code></pre>
<p>Given a symbol and a direction <span class="math-container">\$d\in[0..3,5..8]\$</span>, we retrieve one of the bitmasks described above and get the character at position <span class="math-container">\$d\$</span> in the lookup string <code>&quot;4142.2030&quot;</code> to figure out which bit should be tested. If the bit is set, we are allowed to move in this direction.</p>
<p>The direction vector is <span class="math-container">\$\big((d\bmod 3)-1,\lfloor d/3 \rfloor-1\big)\$</span>, leading to the following compass:</p>
<p><span class="math-container">$$\begin{matrix}0&amp;1&amp;2\\3&amp;&amp;5\\6&amp;7&amp;8\end{matrix}$$</span></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 136 bytes</h1>
<pre><code>ＵＯ⁹.Ｆ⪪Ｓ,⊞υ⁺⮌⪪ι.⟦⁴¦⁴⟧Ｆυ«≔⊟ιθ≔⊟ιη≔⊟ιζＦ⌕Ａ⮌⍘§⦃x¹⁷⁰+⁸⁵*²⁵⁵&gt;⁴&lt;⁶⁴&lt;&gt;⁶⁸=¹⁷&gt;=²¹&lt;=⁶⁹x&gt;χx&lt;¹⁶⁰⦄Φζλ²1Ｆ…·Σζ∨Σζ⁹«ＪθηＭλ✳κ¿⬤⟦ⅉⅈ⟧⁼μ﹪μ⁹¿ι⊞υ⁺ι⟦ⅉⅈ⟧X»»Ｊ⁴¦⁴OＵＥ¹
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=bVLRSiMxFIV9a78i5OlGozhFa2ur0GUVKkiL7oNL6cM4TduwadJOkjJU-iW--KDoN_k1e-84qyC-ZA7nnHtz59w8vGbzNM9cah4fn2OY7rXefrQHd8bZGbQl4_tcdOpTlzO4WRodoG-XMdyEXKMuUJdcCDaMfg5RsqGJHq7VWuVeVX793gOto0PJDsfif7so2H291vNezywM3RI0elaofuXm33Ab4so2F9pOesZ83Poz9aoarxf6dqIKuOcFP2HJ8QGOsouodYRgB0HjiNAZIhyNd_HbLAExzRai07KOPIQaCYmEmpRMQbaEmhZUmjQPtpJdaBNUDhvJDP1zgw6eUEbltH2bYUR6ra5TO8OI4gI26BjkH7AtRBlM7TIulr8drKoAaldurcBI9kvnKgvaWfgrSkFPGVACoz-0kFsQY8nOVzE1HhaSXblJNI4QdRaM3PrLxnBHn8Wiw5Txig0xwwD8lvZf29a39Wog2iJSlTwg-bwIyk4gEZ0nf5f56h29jPje2vDxi-2e7dui-87-Aw" rel="nofollow noreferrer">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＵＯ⁹.
</code></pre>
<p>Draw a 9×9 board.</p>
<pre><code>Ｆ⪪Ｓ,⊞υ⁺⮌⪪ι.⟦⁴¦⁴⟧
</code></pre>
<p>Get the input string, split it on <code>,</code>s, split each piece on <code>.</code>s, and append two <code>4</code>s to each reversed list of instructions as being the starting coordinates.</p>
<pre><code>Ｆυ«
</code></pre>
<p>Loop over the list of instruction and coordinate entries.</p>
<pre><code>≔⊟ιθ≔⊟ιη≔⊟ιζ
</code></pre>
<p>Remove the coordinates and one instruction and assign them to their own variables.</p>
<pre><code>Ｆ⌕Ａ⮌⍘§⦃x¹⁷⁰+⁸⁵*²⁵⁵&gt;⁴&lt;⁶⁴&lt;&gt;⁶⁸=¹⁷&gt;=²¹&lt;=⁶⁹x&gt;χx&lt;¹⁶⁰⦄Φζλ²1
</code></pre>
<p>Map the instruction into a binary number and loop over the positions of the <code>1</code> bits (counting back from the end) which represent the allowed directions.</p>
<pre><code>Ｆ…·Σζ∨Σζ⁹«
</code></pre>
<p>Loop over the allowed distances. (This assumes that zero distance means any amount up to and including <code>9</code>. Larger explicit distances are supported, and the range for arbitrary distances could be increased to <code>1000</code> without changing the byte count.)</p>
<pre><code>ＪθηＭλ✳κ
</code></pre>
<p>Move to the resulting position for the given direction and distance.</p>
<pre><code>¿⬤⟦ⅉⅈ⟧⁼μ﹪μ⁹
</code></pre>
<p>If the current position is on the board, then...</p>
<pre><code>¿ι⊞υ⁺ι⟦ⅉⅈ⟧X
</code></pre>
<p>... if there are more instructions to process then push them with the current position to the list of instructions, otherwise mark the current position with an <code>X</code>.</p>
<pre><code>»»Ｊ⁴¦⁴O
</code></pre>
<p>Mark the initial position with an <code>O</code>.</p>
<pre><code>ＵＥ¹
</code></pre>
<p>Space the board out horizontally.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/253563/">253563</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




