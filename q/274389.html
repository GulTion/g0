<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::274389</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>015</td><td>Brachylog</td><td>240724T203657Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274420#274420">DLosc</a></td></tr>
<tr d-ix="1"><td>021</td><td>Haskell + hgl</td><td>240724T135452Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274410#274410">Wheat Wi</a></td></tr>
<tr d-ix="2"><td>011</td><td>Retina 0.8.2</td><td>240724T173832Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274417#274417">Neil</a></td></tr>
<tr d-ix="3"><td>085</td><td>Python 3.8 prerelease</td><td>240724T095658Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274399#274399">Jitse</a></td></tr>
<tr d-ix="4"><td>048</td><td>R</td><td>240724T103921Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274402#274402">pajonk</a></td></tr>
<tr d-ix="5"><td>010</td><td>Japt</td><td>240724T093257Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274397#274397">Shaggy</a></td></tr>
<tr d-ix="6"><td>043</td><td>JavaScript ES6</td><td>240724T081140Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274391#274391">Arnauld</a></td></tr>
<tr d-ix="7"><td>009</td><td>QuadR</td><td>240724T085533Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274394#274394">Ad&#225;</a></td></tr>
<tr d-ix="8"><td>008</td><td>05AB1E legacy</td><td>240724T083148Z</td><td><a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency/274393#274393">Kevin Cr</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/JCumin/Brachylog" rel="nofollow noreferrer">Brachylog</a>, <s>16</s> 15 bytes</h1>
<pre><code>~c₃↺{h&amp;~j}ʰ↻c↰|
</code></pre>
<p><a href="https://tio.run/##SypKTM6ozMlPN/r/vy75UVPzo7Zd1RlqdVm1pzY8atud/KhtQ83//0qeEZ4RjhGOSv8jAA" rel="nofollow noreferrer" title="Brachylog – Try It Online">Try it online!</a></p>
<h3>Explanation</h3>
<p>I wouldn't be surprised if there's a better way to do this.</p>
<pre><code>~c₃↺{h&amp;~j}ʰ↻c↰|
~c₃               &quot;Unconcatenate&quot; the input string into three substrings
   ↺              Rotate the first element to the end
    {    }ʰ       Apply this predicate to the new first element:
     h&amp;             Assert that it is nonempty
       ~j           Assert that it consists of a substring repeated twice,
                    and return that substring
           ↻      Rotate the final element back to the beginning
             c    Concatenate the list back together
              ↰   Call the main predicate again on the result
               |  If there was no way to partition the input string that
                  satisfied the assertions, return the input unchanged
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.haskell.org" rel="nofollow noreferrer">Haskell</a> + <a href="https://gitlab.com/wheatwizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 21 bytes</h1>
<pre><code>yyc$gkY$bn h_ ʃ#|hdS
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYvtabaVlckq6dmRKkl5ChnxCqealWsyUoIhsjcn5yZm5inYKqTkcyko5MYraBQUKdgopGkCeQoK0QpKiUpglg6QhcRMAkIkCSAPiJGlMfhghK4lGUQjMSDysRCnLVgAoQE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<ul>
<li><code>yyc</code>: Repeat until reaching a fixed point.</li>
<li><code>gkY</code>: Apply a parser as many times as is required to consume the input.</li>
<li><code>bn h_ ʃ</code>: Parse some string twice. This returns the parsed string only once.</li>
<li><code>#|</code>: ... or else ... (<code>++</code> would also work here).</li>
<li><code>hdS</code>: Parse a single character.</li>
</ul>
<h1>No parser, 21 bytes</h1>
<pre><code>yyc$mBl&lt;(he~&lt;&lt;gr)&lt;&lt;pt
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708I7E4OzUnZ8FNxczcgvyiEoXC0sSczLTM1BSFgKLUnNKUVC6oRMDS0pI0XYvtabaVlckquU45NhoZqXU2NulFmjY2BSUQ2Zs9uYmZeQq2Cin5XAoKufEKGgVFCjYKaZpAnoJCtIJSohKYpQNkITGTgBBJAsgDYmRpDD4YoYgkg9QkAakkmEQsxE0LFkBoAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Explanation</h2>
<ul>
<li><code>yyc</code>: Repeat until reaching a fixed point.</li>
<li><code>pt</code>: Get all partitions.</li>
<li><code>gr</code>: Group each partition into groups of contiguous equal elements.</li>
<li><code>he</code>: Get the first element of each group.</li>
<li><code>mBl</code>: Get the smallest result.</li>
</ul>
<h1>Reflection</h1>
<p>Although I only have two versions of this answer I am splitting the reflection into three based on three <em>potential</em> solutions to this challenge.</p>
<h2>Parser version</h2>
<p>I think that the parser version is alright. I'm annoyed by the operator precedence between <code>(~&lt;)</code> and <code>(#|)</code>/<code>(++)</code>, but I'm not sure it's actually wrong in general.</p>
<h2>Regex version</h2>
<p>I don't think I could reasonably do this with regex right now, since I haven't implemented back-referencing yet. This is just yet another push to do that.</p>
<h2>Non-parser version</h2>
<p>I am rather frustrated with trying to build a non-parser version here. There is a lot to improve on this front.</p>
<ul>
<li>A contiguous nub function would be useful.</li>
<li>I would like an &quot;unpairs&quot; function that basically undoes what <code>pA</code> does.</li>
<li><code>sps</code> finds all the splits into two pieces. But here I'd like all partitions into <em>3</em> pieces. It'd be good to have builtin which takes a number, <span class="math-container">\$n\$</span>, and finds all the partitions into <span class="math-container">\$n\$</span> pieces, with presets for small numbers like 3. <code>pST eL3</code> almost does what I want, but it returns a list which is a bit annoying. It's also inefficient and 7 bytes long.</li>
</ul>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 11 bytes</h1>
<pre><code>+`(.+)\1
$1
</code></pre>
<p><a href="https://tio.run/##K0otycxL/P9fO0FDT1szxpBLxfD/f64KrgogquRSVLTn0tbX1ucy1AZCIGkEJOvq6rhCMlKBKJerJCO1BEQn@4emZ3BFeEY4RjhyeULpiAouQ0sLA2MTIOLS09NTBGEYw57LPz9bEYjtuWzy7Wzy8@0A" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation: Blatant rip-off of @Adám's rip-off of @l4m2's golf of @Arnauld's answer.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 85 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda s:[r:=range(len(s))]+[s:=s.replace(s[i:j]*2,s[i:j])for i in r for j in r]and s
</code></pre>
<p><a href="https://tio.run/##TY9Pc4IwEMXvfIqQi6RQ/NeDZUTHoycv7Qwz6nSoomAxZJJ0Ri98dbrLIhUS9r3fvgxZdbd5JaczpZtTvGvK9Pp9TJmJtjqKdSrPmVdm0jNC7P2tiWIT6kyV6SHzzLaILvuXSUBCnCrNClZIphnKSyv3qTwy07Q9qQL2FbDq12LrmirPWB0aVRYWqIK/jISIHEZJjMVtqr@SCeFAobwBH4iAeY@YEHBGZ4a1T8xO2EGmdCGth504xmCAKdFwzl4XjHOH30jdUD7re6fvYFx3SQ6qw/2hPyQL1eFjH17yKBBM/sGkRXVdE6jBfOQZrCuBVjnc5pntmSV22HyecyIkHZ6sk1WyIoYa0PqZEUq6ORIcZPw@G03fYHU3ai3wMAxd3ISh9mj5QCFOu6l@XNgd7J3D51VVLeCzoM4cxB8" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 48 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(s){while(s!=(s=sub(&quot;(.+)\\1&quot;,&quot;\\1&quot;,s,,T)))0;s}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=XdHBSsNAEAZgvPoU3fWyS9JtUj1UbFJyLAhFaGAPOVkSIyoBN8UWMS_iJQo-gU-jT-PMrrOmktnN_N8QyCavb4_9e5V8bNtqPPuKCmHk81N9e18KwxJhErO9FlyoQBZFzENudxOGaylldGFe3HPfR5-V4Fd5BpVnl1weQ-TyZDROR5xj2FHaufg_733eW2BsQQIdSjAJJkTQIcUBXGTYOpwOcfrLXdcRdhbWdQn1QGh79LYu24G35JtVflOTuoCslzrTGTkmy8tDJ9b-3NodPD6fRadnUP6NLdiZUorhohF0A178sXJfaNXcMVh-4DMO5006b5qUZhC5-3d97-4_" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 10 <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">bytes</a></h1>
<p>I didn't understand the spec <em>at all</em> so this is based on the worked example &amp; test cases.</p>
<pre><code>e&quot;(.+)%1&quot;Ï
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=ZSIoLispJTEizw&amp;input=WyJRVUFRVUFVQUwiLCIiLCJ4IiwieHgiLCJ4eSIsIiEhPyIsIisvKy8iLCIxKzErMSIsIjErMisxIiwifn5%2bIiwiVGhlVGhlbSIsInRoZXRoZW0iLCJjT1VnaCIsIlhJWEFYQSIsIklYSVhBWEEiLCJYeCIsIjE5ODAzNDAzNCIsIi4uLiEuLi4hIiwiLi4uIS4uLj8iLCJPb2shT29rPyIsIjxvPjxvbz4iXS1tUg" rel="nofollow noreferrer">Try it</a> (includes all test cases)</p>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 43 bytes</h1>
<p><em>-2 thanks to <a href="https://codegolf.stackexchange.com/users/76323/l4m2">@l4m2</a></em></p>

<pre class="lang-javascript prettyprint-override"><code>f=s=&gt;s==(s=s.replace(/(.+)\1/,&quot;$1&quot;))?s:f(s)
</code></pre>
<p><a href="https://tio.run/##bZLPToMwHMfve4rSmAChFqcedFshO3jYaRdNSOYOhHVDxXWhjZkx8gQmXjzqe/g8ewEfAcufls4JLXy//fTb/kq4j59inuR3G3G8ZgtalkvCScAJcTjhOKebLE6o4zvYc2/7PoJHfei6IR8sHe6Ww1kPgBmAEKgLmWaOGryFBu6Mxnrof/xsYm0UtqwQaqy1xp7v@VBhJTvc9@QNW6ykiU9NrIzCRVF0excHlV@nVLZHWONWGVikVGgsDnAyvVmlau/OKBxNonE0hg2uzH56ojmqzPjPwSLzm3dGn/vy4uTsXDaIlIEGxhhbVYdVunrtp1scthiH@6VN2YMle4M7o/CIBSPGgqbyUS3qdG/ew0uWX8VJ6jgzwEWOAN1uaCLoAsxdQALwIlfIqAA55YAA@YuK3B3KsYStOcsoztjKqXNyAmpmkW6NENg/3@@7zw/5tMEA2LuvN1vmX91h@Qs" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/abrudz/QuadRS" rel="nofollow noreferrer">QuadR</a>, 9 bytes</h1>
<p><em>Blatant rip-off of <a href="https://codegolf.stackexchange.com/questions/274389/reduce-a-string-up-to-idempotency#comment590875_274391">l4m2's golf</a> of <a href="https://codegolf.stackexchange.com/a/274391/43319">Arnauld's JavaScript solution</a> — go upvote!</em></p>
<pre><code>(.+)\1
\1
</code></pre>
<p><a href="https://tio.run/##KyxNTCn6/19DT1szxpArxvD/f64KrgogquRSVLTn0tbX1ucy1AZCIGkEJOvq6rhCMlKBKJerJCO1BEQn@4emZ3BFeEY4RjhyeULpiAouQ0sLA2MTIOLS09NTBGEYw57LPz9bEYjtuWzy7Wzy8@3@P@pcCAA" rel="nofollow noreferrer" title="QuadR – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands/2649a799300cbf3770e2db37ce177d4a19035a25" rel="nofollow noreferrer">05AB1E (legacy)</a>, 8 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Δ.œ€ÔJéн
</code></pre>
<p><a href="https://tio.run/##ASMA3P8wNWFiMWX//86ULsWT4oKsw5RKw6nQvf//MTEuMCsxKzFlMQ" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##MzBNTDJM/V9Waa@k8KhtkoKSfaXS/3NT9I5OftS05vAUr8MrL@z9r6QXpvM/WklJR6kChMFEJZBQVLQHktr62vpAylAbCMG0EZiuq6sDkiEZqUCUC2SVZKSWQFjJ/qHpGUA6wjPCMcIRyPCEsyJAZhtaWhgYmwARkK2np6cIwggmyEr//GxFIAYxbfLtbPLz7UDaDPUMQG5INVSKBQA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Δ         # Loop until the result no longer changes:
 .œ       #  Get all partitions of the current string
          #  (which will use the implicit input-string in the first iteration)
   €      #  Map over each partition:
    Ô     #   Connected uniquify all parts in this partition
     J    #  Join each connected uniquified partition back together
      é   #  Sort these strings by length (shortest to longest)
       н  #  Pop and keep the first/shortest one
          # (after the loop, the result is output implicitly)
</code></pre>
<p>Uses the <a href="https://github.com/Adriandmen/05AB1E/wiki/Commands/2649a799300cbf3770e2db37ce177d4a19035a25" rel="nofollow noreferrer">legacy version of 05AB1E</a> instead of the <a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">latest version</a>, since the connected uniquify builtin <code>Ô</code> will interpret stringified numbers as numbers instead of strings. E.g. with input <code>11.0+1+1e1</code>, the legacy program correctly connected uniqifies <code>[&quot;1&quot;,&quot;1&quot;,&quot;.0&quot;,&quot;+1&quot;,&quot;+1&quot;,&quot;e1&quot;]</code> to <code>[&quot;1&quot;,&quot;.0&quot;,&quot;+1&quot;,&quot;e1&quot;]</code> → <code>&quot;1.0+1e1&quot;</code>, whereas the new version of 05AB1E will connected uniquify <code>[&quot;1&quot;,&quot;1.0&quot;,&quot;+1&quot;,&quot;+1e1&quot;]</code> to <code>[&quot;1&quot;]</code> → <code>&quot;1&quot;</code>, since it interprets them all as the same number (<code>1</code>): <a href="https://tio.run/##ASMA3P9vc2FiaWX//86ULsWT4oKsw5RKw6nQvf//MTEuMCsxKzFlMQ" rel="nofollow noreferrer">try it online</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/274389/">274389</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




