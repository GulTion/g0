<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::219693</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>019</td><td>Uiua SBCS</td><td>240220T184133Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/270191#270191">chunes</a></td></tr>
<tr d-ix="1"><td>013</td><td>05AB1E</td><td>210224T130534Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219715#219715">Jonathan</a></td></tr>
<tr d-ix="2"><td>217</td><td>Python 3</td><td>210225T180531Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219789#219789">SevC_10</a></td></tr>
<tr d-ix="3"><td>141</td><td>AWK</td><td>210228T101236Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219944#219944">cnamejj</a></td></tr>
<tr d-ix="4"><td>082</td><td>PowerShell</td><td>210228T154831Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219972#219972">mazzy</a></td></tr>
<tr d-ix="5"><td>030</td><td>Japt</td><td>210227T205226Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219924#219924">Kamil Dr</a></td></tr>
<tr d-ix="6"><td>130</td><td>Java JDK</td><td>210227T154144Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219912#219912">Olivier </a></td></tr>
<tr d-ix="7"><td>110</td><td>Python 3</td><td>210226T162433Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219844#219844">movatica</a></td></tr>
<tr d-ix="8"><td>060</td><td>J</td><td>210226T090659Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219812#219812">Jonah</a></td></tr>
<tr d-ix="9"><td>032</td><td>Perl 5 p</td><td>210225T181515Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219790#219790">Nahuel F</a></td></tr>
<tr d-ix="10"><td>114</td><td>C gcc</td><td>210224T151235Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219725#219725">Noodle9</a></td></tr>
<tr d-ix="11"><td>152</td><td>Red</td><td>210225T082458Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219772#219772">Galen Iv</a></td></tr>
<tr d-ix="12"><td>320</td><td>Java</td><td>210224T204918Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219742#219742">Unmitiga</a></td></tr>
<tr d-ix="13"><td>013</td><td>Husk</td><td>210224T204606Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219741#219741">Dominic </a></td></tr>
<tr d-ix="14"><td>029</td><td>Charcoal</td><td>210224T201459Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219740#219740">Neil</a></td></tr>
<tr d-ix="15"><td>072</td><td>JavaScript Node.js</td><td>210224T095257Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219704#219704">Arnauld</a></td></tr>
<tr d-ix="16"><td>060</td><td>Perl 5 p</td><td>210224T152003Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219726#219726">Xcali</a></td></tr>
<tr d-ix="17"><td>076</td><td>Julia</td><td>210224T132751Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219717#219717">MarcMush</a></td></tr>
<tr d-ix="18"><td>018</td><td>Jelly</td><td>210224T122304Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219714#219714">Jonathan</a></td></tr>
<tr d-ix="19"><td>016</td><td>Stax</td><td>210224T102759Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219707#219707">Razetime</a></td></tr>
<tr d-ix="20"><td>062</td><td>Retina 0.8.2</td><td>210224T121013Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219713#219713">Neil</a></td></tr>
<tr d-ix="21"><td>072</td><td>Ruby</td><td>210224T110316Z</td><td><a href="https://codegolf.stackexchange.com/questions/219693/balance-the-uppercase/219708#219708">G B</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://uiua.org" rel="nofollow noreferrer">Uiua</a> <sup><a href="http://tinyurl.com/Uiua-SBCS-Feb-17" rel="nofollow noreferrer">SBCS</a></sup>, 19 bytes</h1>
<pre><code>⍜⊜□⍚(⍜▽⌵↥⇌.=1±.)⌵±.
</code></pre>
<p><a href="https://uiua.org/pad?src=0_9_0__ZiDihpAg4o2c4oqc4pah4o2aKOKNnOKWveKMteKGpeKHjC49McKxLinijLXCsS4KCmYgIkZvb19iYXIiCmYgIkpVU1QgSU4gQ0FTRS4iCmYgImVlZWVFIgpmICJlRWVlZSIKZiAiZWVFZWUiCmYgIkVlZSQlXmVlRTU1enp6Igo=" rel="nofollow noreferrer">Try it!</a></p>
<pre><code>⍜⊜□⍚(⍜▽⌵↥⇌.=1±.)⌵±.
                  .  # duplicate input
                ⌵±   # letter mask
⍜⊜□⍚(          )     # under partition (map over words, leave rest intact)
              .      # duplicate word
           =1±       # uppercase mask
        ↥⇌.          # mirror it
     ⍜▽⌵             # capitalize letters given by mask
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, <s> 15 </s> 13 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<p>-1 thanks to <a href="https://codegolf.stackexchange.com/users/94066/makonede">Makonede</a>! (Duplicate-TOS and then reverse-TOS has a one-byte built-in, <code>Â</code>.)<br />
-1 thanks to <a href="https://codegolf.stackexchange.com/users/52210/kevin-cruijssen">Kevin Cruijssen</a>! (Take a list of characters.)</p>
<pre><code>.γa}εÂ.uÅÏu]˜
</code></pre>
<p><strong><a href="https://tio.run/##yy9OTMpM/R/8X@/c5sTac1sPN@mVHm493F8ae3rOf6//nmkaioaa1Qr6MRmuOTn5Tpl5/j6eeen5tak5xa7VCgVFmXklGgrqSf55CokBAaklmSXqmrUA" rel="nofollow noreferrer" title="05AB1E – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>.γa}εÂ.uÅÏu]˜ - (accepts a list of characters)
.γ }          - group by:
  a           -   is alphabetic?
    ε         - for each:
     Â        -   push a copy and then push a reversed copy
      .u      -   is upper-case? (vectorises)
        ÅÏ    -   apply at truthy indices (of that, to the forward copy):
          u   -     upper-case
           ]  - } } (close all loops)
            ~ - flatten
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>236</s> <s>230</s> 217 bytes</h1>
<p>My first answer in Code Golf!</p>
<p>Edit: <em>-6 bytes thanks to @movatica</em></p>
<p><em>-6 bytes thanks to @Danis</em></p>
<p><em>-7 bytes thanks to @Alex bries</em></p>

<pre class="lang-python prettyprint-override"><code>s=input()+'_'
o=''
i=0
for j in range(len(s)):
 p=s[j]
 if p&lt;'A'or'a'&lt;p&lt;'Z'or p&gt;'z':u=[c&lt;'a'for c in s[i:j]];b=[x|y for(x,y)in zip(u,u[::-1])];o+=''.join([c,c.upper()][x]for(c,x)in zip(s[i:j],b))+p;i=j+1
print(o[:-1])
</code></pre>
<p><a href="https://tio.run/##NY/9etIwFMb/71Wc@ZVWum44PwudMta5ThwozI91FUOWlnQliWkrFIaP9@AdeiMYusc/cp73nJzfmzeyKqaCH2w2uce4LAvTaqAxMoSHkMG8fSMWClJgHBTmCTUzys3cslwDpJeHaWQAi0G2UQcJhTBqa3mpJchDtERu6YWkrcdbE7I1yUPmplHUmnjh4rYCPTcXdmXpmyWTZmmXoevuNiMraomGTuCkgnEzJDZxSimpMq0oXERbitiL/9Sdpz2xrIZsMS9tNA2pGC9MEdZem01QwBznUEwpxEzlBXA6B0J5UarKMQIWBKw@LICAga611GXbML0BeUmPax4zJYUqtslhxnKZYcJ4ArMKemWS4IQ68Pf3HwggE/odPe7inDrGSKMDkTFCZ5QDdBXu3tBrGJ36emHog4hr9xoiguCAa@jsYjiC4By6naGvQ8TmTtNawd7V1M8yccR4vxfwRKxplvsruPsyoEmfAx4MaMEKZK2Nxbu90ek9/8VNiD5V/YfF4ZPvj1ZHr744L789ePuZeDuNN3Bwka@js5P3VjopA3vXxdlg/vjDT/nj2ZJdXZpj3rzu/nrdbsXHndn@8OMt/Zo8v6/On/amwjgRYjzB6h8" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Commented code (<em>original</em>):</p>
<pre class="lang-python prettyprint-override"><code>import re
</code></pre>
<p>...import the regex module to find non letter characters</p>
<pre class="lang-python prettyprint-override"><code>s=input()+'_'
</code></pre>
<p>...take the imput from the console, and append a non letter character to complete the last iteration in the loop</p>
<pre class="lang-python prettyprint-override"><code>o=''
</code></pre>
<p>...initialize the output string</p>
<pre class="lang-python prettyprint-override"><code>i=0
</code></pre>
<p>...initialize the index to find the start of each new identified word</p>
<pre class="lang-python prettyprint-override"><code>for j in range(len(s)):
</code></pre>
<p>...loop on the characters of the input</p>
<pre class="lang-python prettyprint-override"><code> if re.match('[^A-Za-z]',s[j]):
</code></pre>
<p>...identify a non letter character that separates words</p>
<pre class="lang-python prettyprint-override"><code>u=[ord(c)&lt;97for c in s[i:j]];
</code></pre>
<p>...list of boolean values corresponding to the letters in the word: True if uppercase</p>
<pre class="lang-python prettyprint-override"><code>b=[x|y for(x,y)in zip(u,u[::-1])];
</code></pre>
<p>...reverse the list of boolean values, and apply <code>or</code> elementwise to obtain the symmetric list of uppercase characters</p>
<pre class="lang-python prettyprint-override"><code>o+=''.join([[c,c.upper()][x]for(c,x)in zip(s[i:j],b)])+s[j];
</code></pre>
<p>...builds the output string: convert to uppercase according to the symmetric list built before; add the non letter character</p>
<pre class="lang-python prettyprint-override"><code>i=j+1
</code></pre>
<p>...update the starting index of the next word.</p>
<pre class="lang-python prettyprint-override"><code>print(o[:-1])
</code></pre>
<p>...prints the output balanced string (discarding the added last character)!</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.gnu.org/software/gawk/manual/gawk.html" rel="nofollow noreferrer">AWK</a>, <strike>113 bytes</strike> 141 bytes</h1>
<pre><code>{for(b=1+split($0,l,&quot;[ ]&quot;);--b;$b=e){a=split(toupper(m=l[b]),c,d=e=x);for(split(m,f,d);a;a--){if(f[++d]==c[d])f[a]=c[a];}for(;d;)e=f[d--]e}}1
</code></pre>
<p><a href="https://tio.run/##JYwxC4MwFIT/SpAOBpNS5/AmEdqtULeQ4Zm8UDEaUUsL4m@3ijcdd98dftttW3wc0xrybBpCM6eXmwgi0cwkXElZq0sNxBeEs53jZxhoTDsIujZcWOGA4MfVcXIinfDCcYUKpeRL41Ovs8wZAKud4V6j2R0atR4T5RQn8NpJaWhd822r3sSeMTSWOurZoWLEoiXHqnvJCnyVLPojnncwxGlmzEaLj56ufw" rel="nofollow noreferrer" title="AWK – Try It Online">Try it online!</a></p>
<p><em>The code got longer to address a bug related to whitespace parsing as noted by Dominic van Essen.</em></p>
<p>This isn't all that short, but AWK isn't well suited to this challenge (as far as I can tell) so I think it's worth posted anyway.</p>
<p>Here's how it works...</p>
<p>The first <code>for</code> loop processes each commandline argument in reverse order.  First it has to break the arguments into words explicitly, since TIO doesn't provide a way to set <code>RS</code> and <code>ORS</code> variables easily.</p>
<pre><code>b=1+split($0,l,&quot;[ ]&quot;)
</code></pre>
<p>which sets variable <code>b</code> to the number of space delimited words found, and stores the array of words (some of which might be empty strings) in variable <code>l</code>.  The <code>1+</code> is necessary to keep the code from skipping the last word.</p>
<p>then at the top of each loop,</p>
<pre><code>--b
</code></pre>
<p>the code decrements <code>b</code>.  The words in the array are processed in reverse order to avoid having to use another variable.</p>
<p>The body of the loop consists of three statements, the first one is:</p>
<pre><code>a=split(toupper(m=l[b]),c,d=e=x)
</code></pre>
<p>which does a couple of things.</p>
<ul>
<li>converts the current argument <code>l[b]</code> to upper case</li>
<li>splits that word into a character array, assigns that to variable <code>c</code></li>
<li>sets variables <code>d</code> and <code>e</code> to an empty string</li>
<li>set variable <code>a</code> to the number of characters in the argument</li>
<li>stores the untranslated value of the current argument in variable <code>m</code></li>
</ul>
<p>The second statement is another loop, checking character by character and translating to uppercase as needed.  It does that by initializing the loop with:</p>
<pre><code>split(m,f,d)
</code></pre>
<p>which converts the current commandline argument to a character array, stored in variable <code>f</code>.  At this point <code>f</code> has the original characters, and <code>c</code> has the same characters translated to uppercase.</p>
<p>The loop condition and &quot;end of loop&quot; action cause the code to iterate <code>a</code> times, which is the number of characters in the current argument.</p>
<p>The body of this second loop is single statement:</p>
<pre><code>if(f[++d]==c[d])f[a]=c[a]
</code></pre>
<p>which translates the paired character to uppercase if the character we're checking is already uppercase.  The loop decrements <code>a</code> and increments <code>d</code> each iterations, which keeps the pairing in sync.</p>
<p>The third statement in the body of the outer loop, is essentially a &quot;join&quot; operation concatenating the characters in the translated character array.</p>
<pre><code>for(;d;)e=f[d--]e
</code></pre>
<p>The only trick here is using the <code>d</code> variable as the iteration control, since it was incremented up to the length of the commandline argument in the previous loop.  Also working backwards means we can use <code>f[d--]e</code> without having to use a space between them since the closing bracket separates the variables.</p>
<p>Then the &quot;end of loop&quot; action on the outer loop assigns the re-assembled string to the current commandline argument.</p>
<pre><code>$b=e
</code></pre>
<p>And all that's left to do is add a &quot;truthy&quot; test without any action to print everything.</p>
<pre><code>1
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, <s>91</s> 82 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>$args-replace'[a-z]+',{-join(&amp;{($w=&quot;$_&quot;)|% t*y|%{[char]($w[--$i]-bor95-band$_)}})}
</code></pre>
<p><a href="https://tio.run/##jVPtVtMwGP6/q3iZHW1hHaKiIk6BLoPipIMNRccYXUm7QNeMtHOMrh7vwTv0RmaatiAHjtrT5k2ePB9pk47oBLNggD1vLjnVaC5ZzA00hkeeZWO5Y2k33WW5HGkXlPjKYqRIk2pR6hXVWQnCpemsFHXsgcW6HO9omkS6Wp@y9TWtb/nnUk@NYzWex4XCplIoKzLmF5LLMhJVFVDS5xCvCGdQgiWQqAJKSJVUiCocSrAI8VG8yluU9LDwKQAkEwjlE0iUTGKEMLECCAcYHMKCEHw8ARv74ZhNK6nYaP@NktkQwyDiIQYYBHgrurxJBiS34pT0SmjpfZ@W2UEwxjURaRE2oiwEhzIYkiDZA@K7MJxCY@y6losr8OvHTzDAo3xpHNatAOdx0PpfG/SIze13bXODJvWIjYfYB9CZpV/ic2jvIk5rIaCOyBBSm9qW4ecraA/QrXI/V9ZS5dYDpZ4q09C9o1YbjH3By9zuQ4JWNBxlYVWNYOVkgDyPbhPfbBi@S2PsBSiCESN@qIDcN32wmk0cklBW42JiVzTqf0gbZibdoTF6VNo2hDSNvf6w0t49K6JXlx3509Qshe@enS1G2@vHldenZ9LOZ7u6sLwJz4@CuLtX/6he9MdGWXtjec3J0sG30dXaDTn5qvT81XP9@/u3G05ta/i0dTjDX9yXT9j@i8aApks8/keMnsW00pi9LKaRxhzcxtQexhwmMWb6OnKd0l7fYvx/qlNT9NSCCjMoQcSXASAF/Lxj38ZlkPD1CNsh3/8qSL10luFg7IUcWJScO66Y6zRb@jgI6dDsX3BZdzPih9K2cRAk@kyo2fjqzngDDnO/nBAX4vlv" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
<p>where:</p>
<ul>
<li><code>&amp;{</code> creates a new context each contains <code>$i=0</code></li>
<li><code>-bor</code> is bitwise <code>or</code>, <code>-band</code> is bitwise <code>and</code> have inspired by the <a href="https://codegolf.stackexchange.com/a/219704/80745">Arnauld's answer</a></li>
</ul>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 30 bytes</h1>
<pre><code>òÈ+Y è&quot;%L&quot;
®íZmr&quot;%a&quot; ÔÏ?Xu:XÃc
</code></pre>
<p><a href="https://tio.run/##y0osKPn///Cmwx3akQqHVyip@ihxHVp3eG1UbpGSaqKSwuEph/vtI0qtIg43J///H63kqaSjlAbEGkCsCMSGQKwJxNVArADE@kAcA8QZQOwKxDlQnA/ETkCcCcR5QOwPxD5A7Anlp0PV1AJxKlRPMdQMmNkFQFyEZEYJ1B0gOXUgToKamwcVSwTiAChOharPhNLqUHfXKsUCAA" rel="nofollow noreferrer" title="Japt – Try It Online">Try it online!</a></p>
<p>I'm not happy with this, but I haven't actually been able to find something better. Inputs and outputs as an array of characters.</p>
<p>Explanation:</p>
<pre><code>òÈ+Y è&quot;%L&quot;    
ò                      # Partition the input between pairs of characters where truthy:
 È+Y                   #  Join the two characters into a string
     è&quot;%L&quot;             #  Count how many are not in [A-Za-Z]
                       # Implicitly store as U

®íZmr&quot;%a&quot; ÔÏ?Xu:XÃc    #
®                      # For each word:
  Zmr&quot;%a&quot;              #  Replace lowercase letters with &quot;&quot;
          Ô            #  Reverse it
 í         Ï     Ã     #  Pair each with the original letter at that index
            ?          #  If the modified array has anything other than &quot;&quot;:
             Xu        #   Replace the original letter with upper-case
               :X      #  Otherwise leave it unchanged
                  c    # Flatten all the words back into a single array of chars
</code></pre>
</div>
<div id="pu6" class="pu"><h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK)</a>, 130 bytes</h1>

<pre class="lang-java prettyprint-override"><code>a-&gt;{for(int i=0,l=a.length,c,s,e;i&lt;l;i++){for(s=i;i&lt;l&amp;&amp;(c=a[i]&amp;95)&gt;64&amp;c&lt;91;i++);for(e=i;s&lt;e;a[e]&amp;=c)a[s]&amp;=c=a[s++]^a[--e]^32|95;}}
</code></pre>
<p><a href="https://tio.run/##ZVLrUtpAFP6fpzj2golAFG8tDaFVjDUWlRbsDVGXZRMWk126uwEpptN36Bv2RegmouNMdybn@n0nZ8@eEZqg8mhws6DxmAsFI@3biaKRveYY/8WChGFFOcuS46QfUQw4QlLCCaIM5gbAMioVUlpNOB1ArHNmWwnKwm4PkAillSEBGpzJJCaihodIdHt1CNwFKtfnARcmZQqou1GKXGRHhIVqWMIlWSIOrUUOLRatHCVdmgUKBRO7qEt7heqOVd/dLuBatZKjnAxFNErWiIO6pFdwsYW6MtOaIYvF3iXqlsukd7m1eVfdcdJ04eTNKTEDc4IESIwYIwJcYGQK7XvPbM@kIrFNmWXB/W0ApkMaETCXBHuI5Cm5VU3KiPkEBZBVza4sdc0HMHtE2oo3dHJPCDQzLeeRFdgIYzJWZk59kli2whNlj/WQVcTMvNN84kv0Izw1HmRqpAuij2cQTyuDZMrITNuYe1qnFS29zMqO4SuYIglqSCCgQqp8HJgwlYiZbfjU92n@UR98ClrmphaZQzUCZEIOcj6iIl8s/TgQUzmOENatQjyDZhKGKCQ2/P39B3yIuP6PDjeQ1F11NLXF9XqRmDC9PgI1bsgAOkeeBrQ94EFePSdhjpHPNOn4vN0B/xQae21PNxGYKxVrDusXQy@K@D5lZ02fhTwlkfTmkM/PhNX@GQPUahFF1aqVGrcf1jtHz7xXN93Vz7Ozl6q@eV2Y71e/2q8vX7z/gt2V4jvYOpdp7/jwxBr1E79UfoOi1nTt42T8Y@cnvfhuXrHKoPHrbc0JDvbijfanO/It3H0uTrebQ24ccn7VR@If" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a></p>
<h2>Credits</h2>
<ul>
<li>-3 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52904/ceilingcat">ceilingcat</a>.</li>
</ul>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>153</s>, <s>149</s>, <s>148</s>, 110 bytes</h1>
<p><em>Using <code>re.sub</code> is even more elegant than re.finditer...</em></p>

<pre class="lang-python prettyprint-override"><code>lambda s:re.sub('[a-zA-Z]+',lambda w:''.join([c,c.upper()][d&lt;'a']for c,d in zip(w[0],w[0][::-1])),s)
import re
</code></pre>
<p><a href="https://tio.run/##jZLBjtMwEIbP5CmGvTgWbmDFLaJIpU3BqNpWSriQjZCbOqkhsSPbUdVdVeIdeENepMROF7FihbDi0cT@v38m0XRHu1fy9bma3p4b1m53DEyseWT6bYhyNrmbTT4XLxC53B1ihKKvSsgwL0kZ9V3HdYiLfPcGMVRUSkNJdiAk3IkuPOSvCuJCHseT6wJjYnAg2k5pC5qfLTfWwBTC4FmIqIUDM2D3HCqhjQXJD1ByaXt9jBABRLN/CTDxJoJS4begQAUM0adDcC9iNBoE43Ki8XksupiB6fnCF2RC@6bd97XCdA0rhayhPcKqr2tW8wh@fv8BFBo1NDYcz5nhYzFI/9ckecIkeWgmGww2qhElb7kEmGs2/8Z3kH1IBlmagKp8DY@WqmRUjvWzffKbu3ngFiM3@4ubj9xY8uOnNAN643Xe6/GBF@krWoXPr/E9vLzdJ02j3gm5XlFZqxNvTHIPnRbShoC2awlss@FWWIRPVwQGcvkHuVpfyPfqlDxJZtSTY29Lpb5smXZdLdXap@4CB4H7u4IoN4J@vuIAoBuGrAoFdql3zdFyRlfJIkYEbWZp6rIiV9NpVxBB0OQtIh0@/wI" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 60 bytes</h1>
<pre><code>[:;]&lt;@((+.&amp;(91&gt;3&amp;u:)|.)`(,:toupper)});.1~1,2|@-/\e.&amp;Alpha_j_
</code></pre>
<p><a href="https://tio.run/##jZDdTsJAEIXveYqjF2wbYRG9sqhBsZhNmkCUOzFYybYdUrpNuw0hUOM7@Ia@SC0/iibEMNlJJrvfOXOyk@KYMw9XFhhqOIVVdp2j8@B0iyer9XzZNowTXjUumtfn1cwyl9x8MWqWVlkcy8TMzRZvvjVrZ8t2vTGUvHoTxoE7mowKs1KR40DBAxMaMzeFDiQ8SlKNSM4wlpHOkjlnG4yxLc/E4D8adetgS0FiWyQgNofKkcoCCdq5lSCtewWu3kB/wW9HPGbybr3WpSRWiYanEkwpjUN3TJGP6RxO5vuub3N8vn9AIFRlvPK646b2biPSQ43kHiO5S9Q1jprmAo1hYIdO75ainiOie5XbYWovECcUaaP83ddeBLfflwOhGTPznxzeL3motnJf5XK/XNNGXnwB" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Well this is shockingly verbose for J.  Surely I am missing some better alternatives, but this is what I have for now...</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> (-p), 32 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s/\pL+/$&amp;&amp;~reverse~$&amp;&amp;$&quot;x&quot;@+&quot;/ge
</code></pre>
<p>The trick, to uppercase, is to AND characters with the negation of space.</p>
<p>How it works</p>
<p>For each sequence of letters</p>
<p>bitwise NOT</p>
<p>bitwise AND with space character repeated (at least the size of the match, here majorant is the position after match @+)</p>
<p>Reverse</p>
<p>bitwise negate</p>
<p>bitwise AND with matched.</p>
<p><a href="https://tio.run/##FcixCsIwEADQ3a84QulSbCZ3QREKnZwFiXLGQNo77lLRpfgP/qEf4qnb4zFKXpmpP3Df@KquZ8EbiuL8c@Xubt04H9GsA51wC@WKEJIwSYELCQxJOYdzGiMMD@inGEPEFt7PF3SQScu/N0GxXeyIjqew/xCXRKPakvMX" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>132</s> <span class="math-container">\$\cdots\$</span> <s>115</s></sup> 114 bytes</h1>
<p>Saved <s>3</s> 11 bytes thanks to <a href="https://codegolf.stackexchange.com/users/84844/aztecco">AZTECCO</a>!!!</p>

<pre class="lang-c prettyprint-override"><code>f(s,e)char*s,*e;{for(;!isalpha(*s);++s);for(e=s;isalpha(*++e););for(*e&amp;&amp;f(e);s&lt;e;++s)*--e&amp;*s&amp;32||(*s&amp;=95,*e&amp;=95);}
</code></pre>
<p><a href="https://tio.run/##jZP/VtMwFMf/5ykuVUbbbfwUFctQ6AoUJxtsKEoHZlnaRbq2NpnbGPX4Dr6hD@JMf2xO2eHQ06TJzf3em@aTi4sOxuOxLbMCUXAHhSorqEQb2X4oa4uUITfoIFllipbPiy42kxLTpgv5PFG01K6SXM6WxZTtkMRbLRZJTmW5zY27OxEiV9reErHjj6JFY@px6CLqycrCaAHEk2QHThhnl00owUgyOfQRA94hYNOQcfBIHzDxeC8crkgFkExqmjRp1ASTguiToejiCU2dgPVIOYmCaBj4IQexXehSFrgIU8@B7hAqPcdBDlmBXz9@ggmuL7IJs44YSYI0hLrmuxSTLvEA9BDpN6QNjSND@NQN8O0kQaLDPkaml@qOz@sNME9A36sb6W5seXFdGcGqZXUM1/X3qVetmJ7jR8RlxgiCUByMDMutqgeoViOc8mUlipWDt6uNI0syXtxcLr8fVpf47sbn3Gh/@2Ll5dXTww@4tJh/A5vnLGoeH7xTvrR6ZqH4Crm1vnr6Lfi6dUst65N87a239e@vdzS7vNddq5/dkY/O8yfhybNKx4@THPj@dQuFUqTNMCGDgGBO2hMsjUdgSZ8YS/rOwVJ/LBZjDhYjw2JMsZxMsJRTLHv3sOgPYDmYxVKpZlgO/ciYi6VhTrBcPIxFz7DUUyzHGZZKiuX0L5byfSxnMZZqiqV6HwvuEHxDwoyKNTA2rMG2LtpWLJmZb0508QHLceFRr00GQramZcMdYPSW@KJ@M9bKamZQpxYN8vnEW4G0YmeqVsRKKzdxaGrT9TibK1YZD13iyVzR/pFCq2fbl@6MQDjiYCjH9gLMutuJ7T@9uJwi@PSCzsseIMbSDeBukMUlCpTiv586JnxtWbKkJWZJUNyFbCQ6TxwnL0CqnBx6HLWZbSZaiMa/se0ih42L/T8" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Modifies the input string to have in-word balanced capitalisation.</p>
<h3>Explanation</h3>
<pre class="lang-c prettyprint-override"><code>f(s,e)char*s,*e;                           // function taking a string   
{                                          // parameter s and also declares   
                                           // e as a string pointer
  for(;!isalpha(*s);++s);                  // loop until s pointes to the   
                                           // beginning of the next word   
  for(e=s;isalpha(*++e););                 // loop until e pointes to one  
                                           // past the end of that word   
  for(                                     // loop over this word   
      *e&amp;&amp;f(e);                            // while e points to one past
                                           // the current word     
                                           // recursively handle the next 
                                           // word if we're not at the end    
               s&lt;e;                        // loop while s is before e  
                   ++s)*--e                // bump s and e towards the middle   
                   ++s)                    // bump s forwards at the end of  
                                           // each loop  
                       *--e                // bump e backwards at the   
                                           // beginning of each loop 
                       *--e&amp;*s&amp;32||        // if both characters aren't  
                                   (       // both lower case then   
                                    *s&amp;=95 // make the first character upper             
                                   ,       // case regardless of its case    
                                    *e&amp;=95 // and also make the second    
                                           // character upper case    
                                   );      // regardless of its case   
}                                          //       
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="http://www.red-lang.org" rel="nofollow noreferrer">Red</a>, <s>155</s> 152 bytes</h1>
<pre><code>func[s][a: charset[#&quot;A&quot;-#&quot;Z&quot;#&quot;a&quot;-#&quot;z&quot;]parse s[any[change copy w some a(repeat
i d: length? w[if w/:i &lt; #&quot;[&quot;[n: d - i + 1 w/:n: w/:n and 95]]w)| skip]]s]
</code></pre>
<p><a href="https://tio.run/##PVH9dtIwFP9bnuK3oAJOQNSpq3OTsc514sDB/FjWzdCmbaRNalOsjOHxHXxDXwQDTnJO7rk39/dxz03G/cUp96lbCiwsgon0qHYps@BFLNM8p2XSJvUyOSdlwpbJNXHTZQeaMjmlBiZDDk@lUxTQKuFg1YynnOUlAd9CzGWYR3soqAhQNC2BHZQJJVRa8FGHwCZay4aplxFM@tject2idgM9FqnrancRqIwzL4IGLcEc4uQomEYecQQi0zkkL@BxmU@yaYPcYoTjiNUVDhwBE1epCctCrHHQE36w0mIiS1WWw/ghETqNmSdkiGSK7iQMWcgb@PPrNxzEynia5w7T/L/O0Aj0VSw8nnAJdDLWGXMfwyPbwAY2VLDyWFE95TFHrqnHZ4MhnBN02gN7PVZQ3WjVZmheRHYcq30he11HhmrOY23PkGZC5lVURj2zs36f5yKv1Oa33B9vm8OjS2I/H9PKh2nvXr77@Mv92f72p8aLy7tvPnqvNjZf48mZnrvHh@9qX0cT52HdYnG/ePD@e/pt61pcnFevZMvv/NzbeRkctJNHg9Mb/jl8Vs5OnnYjdWtzqNTViGWk5NJ/84CazSXmm0h9lyCAdt07i78" rel="nofollow noreferrer" title="Red – Try It Online">Try it online!</a></p>
</div>
<div id="pu12" class="pu"><h1>Java, 320 Bytes</h1>
<pre class="lang-java prettyprint-override"><code>s-&gt;java.util.regex.Pattern.compile(&quot;[a-zA-Z]+&quot;).matcher(s).replaceAll(m-&gt;java.util.stream.IntStream.range(0,m.group().length()).mapToObj(i-&gt;(Character.isUpperCase(m.group().charAt(m.group().length()-1-i))?Character.toUpperCase(m.group().charAt(i)):m.group().charAt(i))+&quot;&quot;).collect(java.util.stream.Collectors.joining()))
</code></pre>
<p><a href="https://tio.run/##fVFNSwMxEL37K4Y9JegGvVqtlKViD6LQelF6mKbTbbbZJCSzYhV/e03dQgXFXGaY95HMS4OvWDbLzS50C2s0aIspwT0aBx8nAHAYJ0bO5dWbJbQZFFOOxtUvc8BYJ/lN3Z8m26mOjVWrzmk23qnbQ3PVS86gr0NYXe9SOTwqItX0ph6RmaJT2rfBWBLFC5bvo/J5flpI1SLrNUWRZGYHi5pG1or2p0viSNiqieNp30V0NYnzs1bV0XdBSGXJ1bwWcu8XZv5h0QhTDkW1xog6X65MegqBYoWJxFGmMz5i8dunvCiNlDdHPft/9Jl6@dfwtMgLam8taRa/9ql6wMekGm9cDjC/X@4Gh9z7/KfbxNQq37EKOWO2TqwUhmC3opitCR59/ktqyQFUEasNLWF2N4YKp2PwK@BMsT4xaK9x4kgVUg72zp8nn7sv" rel="nofollow noreferrer">Try it online!</a></p>
<h2>Explanation</h2>
<pre class="lang-java prettyprint-override"><code>s-&gt;java.util.regex.Pattern.compile(&quot;[a-zA-Z]+&quot;).matcher(s)//match words
  .replaceAll(m-&gt;//replace each word, m is MatchResult, m.group() is current word
     java.util.stream.IntStream.range(0,m.group().length())//iterate over indexes of word
       .mapToObj(i-&gt;(Character.isUpperCase(m.group().charAt(m.group().length()-1-i))
       //check if character at reflected index is uppercase
    ? 
  Character.toUpperCase(m.group().charAt(i))//make uppercase
  :m.group().charAt(i)) //do not modify
   + &quot;&quot; //concatenate with empty string to force result to be a String
  ).collect(java.util.stream.Collectors.joining()))//collect as single String
</code></pre>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, <s>16</s> 13 bytes</h1>
<pre><code>ṁṠzo?aID↔ġo¬√
</code></pre>
<p><a href="https://tio.run/##yygtzv7//@HOxoc7F1Tl2yd6ujxqm3JkYf6hNY86Zv3//99Tobg01UWhJCNVITGzqCC/qEQhLb9IITezuCAnMTkzL10ht1LBpzQ9PTE9VU/hUcNkBU@FnPziEpCwc2Jxqh4A" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>
<pre><code>            ġo¬√    # first ġroup the input into sublists (words) according to whether the elements are/aren't letters
ṁ                   # now map across this list of words and concatenate the results into a string, with the function
 Sz        ↔        # zip together each word and its reverse using
   μ      )         # 2-argument lambda function:
    ?  D⁰           # if arg 1 is uppercase
     a   ²          # return uppercase of arg 2
      I             # otherwise return arg 2 unchanged
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 29 bytes</h1>
<pre><code>Ｆ⁺Ｓψ¿№α↥ι⊞υι«⭆⮌⮌υ⎇№α⊟υ↥κκ¿℅ιι
</code></pre>
<p><a href="https://tio.run/##RVBbdtMwEP1uVjENlMiQppQ3hFfrulQlbUzt8KpLURzZVqNIRpYSTAiHPbBDNmJk53D6oZFGM/femRtnRMWS8KpKpALkc1MgLHKjA62YSJHThdJxgCWAXGmERqQLozynKiYFRcyxNd8UGTJdYE6/RXlBYdna8C1YozXHCcnRGZ1TZQH/b@NY4pAqQVR5TezLfF25VpjabGpV@q2NeoahmjBBeC0Ma41adVVV5@12G2tYkAJ0RiFhqtAg6AJiKrRRZS9SmGHMmsMwYAY2Nk8b6oTVLVAYetAwEKZyqTTUtsxYkXMS211gVsLApClJaQ/@/v4DGLi0SvbbteNaitBifclZTGdUALiKuFM6gfDIsx2BBzJp6BtULGOCRY06HgUh4FNw9wKvniNBm7vOEnaizONc7jMxHGCRypX111tC3mwOnfFQAPF9qpnuOKtIfX@7Ex61vcfT8877crilX977emu5//Rj78mXm28@xC8277yG@6NidXF8eOJcjQ3ubj8j3F/cfjfPvz38waLP6FLsTtxfr573k4O92d3g7Cf9lD66oU4fDDIZqUMpL8dEWa8vqu05/wc" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Link includes test suite. Explanation:</p>
<pre><code>Ｆ⁺Ｓψ
</code></pre>
<p>Loop over the input with a null terminator.</p>
<pre><code>¿№α↥ι
</code></pre>
<p>If the current character is a letter, ...</p>
<pre><code>⊞υι«
</code></pre>
<p>... push it to the predefined empty list, otherwise:</p>
<pre><code>⭆⮌⮌υ⎇№α⊟υ↥κκ
</code></pre>
<p>Loop over a copy of the saved letters, retrieving them in reverse order each time, and uppercasing the copy if the reverse order letter is uppercase.</p>
<pre><code>¿℅ιι
</code></pre>
<p>Print the non-letter unless it's the null terminator.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, <s> 76 </s> 72 bytes</h1>
<p><em>Saved 2 bytes thanks to @tsh</em></p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;s.replace(/[a-z]+/gi,w=&gt;Buffer(w).map((c,i,a)=&gt;c&amp;=a[w.length+~i]|95))
</code></pre>
<p><a href="https://tio.run/##HVDtdhIxEP3PU0xRSyKwtNWqVRctdGlTsaBL/QKsIWSXtCHZJtmulNLjO/iGvgim/Jh7ZubMvXdmLukNtcyIzNWVnvJ1Eq5t2LSB4ZmkjKPGkNZvx9VGKmpF2GzlScINKnAwpxlCrCZqFIdNth3SYRFIrlI3q96L8d3BPsZrw69zYTiqJLaCvSKddoTk8UIxtIMDp2NnhEoRDmwmhUPlkSrjINEmomyGLIRNYFpZLXkgdYoSZLEXJQ4KasHNOCTCWAeKF8C4crlZBCUiCBGbEASIAI@b1MNDIfwE2JwfbfhUmEwbB94S5sI@HOz3gfkCunma0pQH8O/PXyAgtffx7Ta1PCgNPLWvpWB8zhVA29D2FZ/C4CTyA3EEOtmob0hMM0qUJ52exwMgZ9A@jCO/RIK2dvESGqNZJKVuCdXrEpXqFZc2WkLm/@IQVCY9BbTf5064Cl6Vfn9oDE7K0curYeXLovfENfd@bS9bB9@CVz8fH39l4Vb1PTw7t6vxaecjvpzkpFZ/TWW/ePrpJrvevxWjH@hC7U7b9@/evkmODuc78ec7/j198cicPe/OdKmj9cWEmv8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>s =&gt;                     // s = input string
s.replace(               // replace in s:
  /[a-z]+/gi,            //   match all words in a case-insensitive way
  w =&gt;                   //   for each word w:
    Buffer(w)            //     turn it into a Buffer
    .map((c, i, a) =&gt;    //     for each character c at position i in this array a[]:
      c &amp;=               //       bitwise AND of c with:
        a[w.length + ~i] //         the counterpart character taken from the end of
                         //         the word
        | 95             //         OR 0b1011111
                         ///        (all letter bits except the lowercase bit)
    )                    //     end of map()
                         //     implicit coercion of the Buffer to a string
)                        // end of replace()
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://www.perl.org/" rel="noreferrer">Perl 5</a> <code>-p</code>, 60 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>s|\pL+|$i=0;join'',map$F[--$i]=~/[A-Z]/?uc:$_,@F=$&amp;=~/./g|ge
</code></pre>
<p><a href="https://tio.run/##FcgxCsIwFADQ3VP8IdjBpnVxUYqKUih0crSWEkuMX9L@kKSDUMQ7eEMPYtQ3PiOtXoTgxpMpZyPDbL66EfZRFHfCsLzinGGdPdJqy491uh7aJWviTZ6x6S@TVI1KhlCAG@Qe/FWCQGvIeriQhQ6d0aLFXkF3h3JQSiiZwPv5ggI0Of/vnXAymeREzVkcPmQ8Uu8CN/oL" rel="noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia</a>, 76 bytes</h1>

<pre class="lang-julia prettyprint-override"><code>n-&gt;replace(n,r&quot;[a-zA-Z]+&quot;=&gt;x-&gt;(L=length(x)+1;map(c-&gt;c-32(x[L-=1]&lt;'['&lt;c),x)))
</code></pre>
<p><a href="https://tio.run/##fVBbdtowEP33Kib0gV0wKUnfAVowJog4QALkASGpMLIRyJIj28FA6ekeusNuhBrylY9E58ycmTtz78xoGjGK8/HGKW64XpLEZ9gmKs/K1ADry7LeH2ZSxVKsl1SryAh3w4kaa5n8kYd91dZLtn54oMYDSy/mh4X0IF2wtWysadrGERJCEoRAOUiCx4xyEqiaAsnzJeUh4@q2/hRxHrGnoKYQPt6gEOY4gHBCwKEyEeZkDjbhYSQXOQVRhOjOKAJEIfG7MHHbhCYdEESkuuNjKn0hQ9ju6NFgezLlLngLsCLXxS7Jwb8/fwEBE8mcBDZwQHJKN6G2BaM28QgHMCQ2ZmQM3bqZNHRMEM5OfUeyhY0RT0iNXqcLqAlGuWMmSzjqXl5bwf7NxGRMVChvWYi7Yk1YYK4eL1YhPWpxwO02CWmY1tZKfLLfrafMz7NB@mLRehOWDn6@XVW@XuW@3L4@vrSLe5kfcNgL1sNG7VSbjiKU1b9h1p6/O3vw7z8u6U1fveP5sfH7e@HIqZa9953zX@Ta/fRKNj9YE6HUhLgbYangkT0mjjuh0xnzuPDvk2@OHubxYlmuGFWzdlxHjRPrtNlqn513ur2Ly6vrvvJ86Xm5Fya9oPcf" rel="nofollow noreferrer" title="Julia 1.0 – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 18 <a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>=ŒsŒgṁ@µŒu=ŒuṚTƲ¦)
</code></pre>
<p>A full program that takes a string argument and prints the result.</p>
<p><strong><a href="https://tio.run/##HU5NSsNAFN73FJ@rNpuKBxDUGHCk2EDizs0YJ9Onk5kwM6GEUtArxJ0H8ACCi24L9R7tReIki/fxvsf3816FUm3fXx46d@jkcfdxtf89dE3gzXH3lf/97L@jvu@Zx5o7@JVASdZ5aLFGIbRvbDufTBgxRuMQAyMEHNcAA6FBAteI2zGBk62N9SiNRUWuVrwgLVG1WDRScinmOL1/gkGZ0BTOMXciROTBmxpFhaiEBmLL4zfxgvwuCYosgSnH@NFVmIIzPbjuH7Mc7AHxdZYMf5Szs4tog/OnVaKUuSG9XDAtzVYol2xQW9J@hunzUoOnqfDkp9H2Hw" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>=ŒsŒgṁ@µŒu=ŒuṚTƲ¦) - Main Link: list of characters (S)
 Œs                - swap-case (only affects alphabetic characters)
=                  - (S) equals (that); vectorises
   Œg              - group runs of equal elements
     ṁ@            - (S) mould-like (that) -&gt; list of &quot;words&quot;
                       (any single non-alphabetic character is now a word)
       µ         ) - for each (word in that):
                ¦  -   sparse application...
               Ʋ   -   ...to indices: last four links as a monad:
           Œu      -       upper-case (word)
          =        -       (word) equals (that); vectorises
             Ṛ     -       reverse
              T    -       truthy indices
        Œu         -   ...action: upper-case (the character at the index)
                   - implicit, smashing print (just prints the characters in the list of lists)
</code></pre>
<p>Seems a bit long to me:</p>
<ul>
<li>The partitioning atoms (<code>œṖ</code>, <code>œṗ</code>, <code>œP</code>, and <code>œp</code>) don't seem to help much here even though it seems like they should.</li>
<li>Perhaps there is a way to shorten code by zipping (<code>&quot;</code>) a dyadic function with the reverse of each (<code>U</code>)?</li>
</ul>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/tomtheisen/stax" rel="nofollow noreferrer">Stax</a>, <sup><s>19</s></sup> 16 <a href="https://github.com/tomtheisen/stax/blob/master/docs/packed.md#packed-stax" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Å;√∩b₧Aµ╗∞q«J,╕*
</code></pre>
<p><a href="https://staxlang.xyz/#p=8f3bfbef629e41e6bbec71ae4a2cb82a&amp;i=It+was+the+first+new+century.%0A%0AIiIIiiIIiiiI+Ii+iI+iiiI+iiii+iIi.%0A%0AI+sueD+the+airport+for+misplacing+my+Luggage.+%E2%80%93+I+lost+my+Case.%0A%0AThe+Policemen++CraCked+THE+CaSE+of+the+lost+cocaIne.%0A%0AJUST+IN+CASE.%0A%0AIf%28%211%29%7B+%2F%5ChElloBinOLIngo%7DelsE%7B+print%28+%27bOn+aPPetit%27%29%7D%0A%0AxK%2FTH%22E7k%5B%27VyO%25t%3E2%60%26%7BB9X.8%5E%24GWc%3D%21%2B%40+3Us%7D%5DJFM%29jbuI,-%3AalPw*Qvpq5zi%5CZ%28_n1dC%7E%3F%3C%3BfDAm0SR%7CeYg6%23rN4Lho%0A%0AFoo_bar%0A&amp;m=1" rel="nofollow noreferrer">Run and debug it</a></p>
<p>Replaces each match of <code>[A-Za-z]+</code> using the ruleset.</p>
<p>-3, borrowing the untruth idea from Jonathan Allan's answer.</p>
<h2>Explanation</h2>
<pre><code>V^{c{96&lt;mr:1{]^}&amp;}R implicit input of string
V^                  regex: &quot;[A-Za-z]+&quot;
  {c{96&lt;mr:1{]^}&amp;}R replace each occurrence with the following regex:
   c                copy the match
    {96&lt;m           boolean array for uppercase letters
         r:1        reverse and take truthy indices
            {]^}&amp;   uppercase the match at those indices
</code></pre>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 62 bytes</h1>
<pre><code>T`l`L`.(?=([A-Za-z])*)(?&lt;=(?=(?&gt;(?&lt;-1&gt;.)*)[A-Z])(?&gt;[A-Za-z]+))
</code></pre>
<p><a href="https://tio.run/##NVDbUsIwEH3nKxZvtChFvN8AoRYJIqDUG4oQSlqiJcE0iIA4/oN/6I9g6IwPe2b37Dm7OyuIpAzP53bbb5fbhpZNa4@5RAMnJk09rmvZk/SCymZUlkhlDMUt2k3Vyfzr1nV9PkcSRjgA2SPgUhFIYGQEDmFyKMZGBFGEaBgUAaKgMEwVLAqqFBAMyVnox1QMuJDgcgF9Ggx87FDmQX8M5aHnYY8Y8Pv9Awh8rvYo2sQBMSK2sta4Tx3SJwzAFNh8JV2wi5YS1C3gbjg9NDncwYgpU@mmbgOqgJmrW@oIV4um9Ckkn3qW7/M8ZdUyYh6fET@wpjAQlEkNYp0qA1yrqc/JmD6LfFwk7eKStf/6GLsdV1dlZqu9Ns0f3hsHzyvnd046un4K2zfBrFkqXOovnSHaSBxhvzaKX70P3nYn9KmhtViqa35lT47ds1x/s379SR68vWVR2Sn3eKTAeauDxR8" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Explanation:</p>
<pre><code>.(?=([A-Za-z])*)
</code></pre>
<p>Count the number of letters following the match.</p>
<pre><code>(?&lt;=(?=)(?&gt;[A-Za-z]+))
</code></pre>
<p>Skip back to the beginning of the word, and then...</p>
<pre><code>(?&gt;(?&lt;-1&gt;.)*)
</code></pre>
<p>... match the same number of characters, ...</p>
<pre><code>[A-Z]
</code></pre>
<p>... followed by an uppercase letter.</p>
<pre><code>T`l`L`
</code></pre>
<p>Uppercase matching letters.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>73</s> 72 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;s{s.gsub(/[A-Z]+/i){|a|r=0;w='';a.bytes{|b|w&lt;&lt;(a[r-=1]&gt;?Z?b:b&amp;95)};w}}
</code></pre>
<p><a href="https://tio.run/##JY7tdpNAEIb/exVTP7JgG9JYq7YJiSlFu21sokn9SIi60IWshQV3l1IEPN6Dd@iNREp@zJyZOe/zviNSN9/45qY9kIU0Apm6Wmc5ai9Wux2mFyUphbnfy0yEesRwc0VlUbpl1u9rZCnaZnc1GC6G7rHbOjrUq15WVZskVRKWCCvIiAS1puAzIRVwmoFHuUpFbqC9BwgzjFlTDANmUPdmrNv9wrYikCk9bVwIE0ksFPixgIjJJCQe4wFEOYzTICABNeDfn7@AIYzrtPpsEUkbk3lNT@OQeTSiHMASxLqh1zA/s2vNzIbYbwIazos9gvmWO7@azQFfgjWa2dtvfG2nqxfQcdZ2GMYnjE/GmAdxRUNpF5AIxpUGDnInHMh0ShVTDtKre/TuojM/e2i/vFk66GM@eaIGz763ipOjz8arr4/ffvLMnd3XcHAlq9X5m3f6DzfFe@1jEk6zp@9vk5@Hv5iz0L7x7rX1e9jv@aejaH/2oaRfghePxOXz8Tp2EFoZEUm0lq9v/gM" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/219693/">219693</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




