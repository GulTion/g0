<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="g.js"></script>
    <title>cg::53675</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>478</td><td>C#</td><td>230725T013827Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/263277#263277">138 Aspe</a></td></tr>
<tr d-ix="1"><td>106</td><td>Scala</td><td>230725T011432Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/263276#263276">138 Aspe</a></td></tr>
<tr d-ix="2"><td>005</td><td>Thunno 2 B</td><td>230625T142503Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/262185#262185">The Thon</a></td></tr>
<tr d-ix="3"><td>055</td><td>C clang</td><td>220820T142213Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251219#251219">c--</a></td></tr>
<tr d-ix="4"><td>050</td><td>Python</td><td>220906T020210Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251719#251719">97.100.9</a></td></tr>
<tr d-ix="5"><td>059</td><td>Prolog SWI</td><td>220902T125708Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251567#251567">Jo King</a></td></tr>
<tr d-ix="6"><td>031</td><td>Matlab</td><td>150724T121534Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53723#53723">Luis Men</a></td></tr>
<tr d-ix="7"><td>007</td><td>Jelly</td><td>220829T145200Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251416#251416">Baby_Boy</a></td></tr>
<tr d-ix="8"><td>021</td><td>Burlesque</td><td>220823T212744Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251302#251302">DeathInc</a></td></tr>
<tr d-ix="9"><td>022</td><td>J</td><td>220823T200748Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251301#251301">Conor O&</a></td></tr>
<tr d-ix="10"><td>076</td><td>Dart</td><td>220820T124327Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251216#251216">user1142</a></td></tr>
<tr d-ix="11"><td>146</td><td>brev</td><td>220820T081535Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251213#251213">Sandra</a></td></tr>
<tr d-ix="12"><td>045</td><td>PARI/GP</td><td>220820T042426Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251211#251211">alephalp</a></td></tr>
<tr d-ix="13"><td>007</td><td>Jelly</td><td>220820T034023Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/251210#251210">naffetS</a></td></tr>
<tr d-ix="14"><td>013</td><td>Japt</td><td>170211T174517Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/109773#109773">ETHprodu</a></td></tr>
<tr d-ix="15"><td>016</td><td>Jelly</td><td>161220T180639Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/103949#103949">Erik the</a></td></tr>
<tr d-ix="16"><td>015</td><td>05AB1E</td><td>161220T173740Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/103944#103944">Magic Oc</a></td></tr>
<tr d-ix="17"><td>062</td><td>Knight</td><td>220803T221712Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/250682#250682">naffetS</a></td></tr>
<tr d-ix="18"><td>007</td><td>Vyxal s</td><td>220801T210536Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/250601#250601">naffetS</a></td></tr>
<tr d-ix="19"><td>025</td><td>Dyalog APL</td><td>220801T065533Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/250571#250571">Vadim Tu</a></td></tr>
<tr d-ix="20"><td>079</td><td>PHP 7</td><td>200807T130813Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/209226#209226">RFSnake</a></td></tr>
<tr d-ix="21"><td>065</td><td>Python 3</td><td>150724T133925Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53730#53730">Tim Pede</a></td></tr>
<tr d-ix="22"><td>027</td><td>Ruby</td><td>200804T234820Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/209097#209097">Aupajo</a></td></tr>
<tr d-ix="23"><td>059</td><td>PowerShell</td><td>200725T125516Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/207552#207552">mazzy</a></td></tr>
<tr d-ix="24"><td>084</td><td>Zig 0.6.0</td><td>200721T113608Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/207348#207348">pfg</a></td></tr>
<tr d-ix="25"><td>052</td><td>Zsh</td><td>190908T020124Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/191468#191468">GammaFun</a></td></tr>
<tr d-ix="26"><td>065</td><td>Python 2</td><td>190907T223459Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/191459#191459">Chas Bro</a></td></tr>
<tr d-ix="27"><td>065</td><td>SmileBASIC</td><td>170211T193236Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/109780#109780">12Me21</a></td></tr>
<tr d-ix="28"><td>023</td><td>J</td><td>170924T232112Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/143680#143680">FrownyFr</a></td></tr>
<tr d-ix="29"><td>010</td><td>Husk</td><td>170924T154940Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/143647#143647">ბიმო</a></td></tr>
<tr d-ix="30"><td>008</td><td>Jelly</td><td>170924T142125Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/143640#143640">Erik the</a></td></tr>
<tr d-ix="31"><td>176</td><td>PHP</td><td>170924T140730Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/143639#143639">cb0</a></td></tr>
<tr d-ix="32"><td>069</td><td>Clojure</td><td>170919T103242Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/143180#143180">NikoNyrh</a></td></tr>
<tr d-ix="33"><td>011</td><td>Japt</td><td>170919T085434Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/143175#143175">Shaggy</a></td></tr>
<tr d-ix="34"><td>075</td><td>JavaScript ES6</td><td>170211T174652Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/109774#109774">ETHprodu</a></td></tr>
<tr d-ix="35"><td>080</td><td>Factor</td><td>160422T143827Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/78265#78265">cat</a></td></tr>
<tr d-ix="36"><td>030</td><td>><></td><td>160420T163252Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/78118#78118">Aaron</a></td></tr>
<tr d-ix="37"><td>060</td><td>Mathcad</td><td>160420T160714Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/78115#78115">Stuart B</a></td></tr>
<tr d-ix="38"><td>118</td><td>TSQL</td><td>160420T124034Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/78105#78105">t-clause</a></td></tr>
<tr d-ix="39"><td>041</td><td>Perl 5</td><td>150724T205536Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53758#53758">hobbs</a></td></tr>
<tr d-ix="40"><td>127</td><td>R</td><td>150724T020532Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53699#53699">MickyT</a></td></tr>
<tr d-ix="41"><td>030</td><td>Perl</td><td>150724T094932Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53717#53717">manatwor</a></td></tr>
<tr d-ix="42"><td>062</td><td>C</td><td>150723T231401Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53684#53684">r3mainer</a></td></tr>
<tr d-ix="43"><td>012</td><td>Q</td><td>150724T141847Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53731#53731">scottste</a></td></tr>
<tr d-ix="44"><td>046</td><td>Ruby</td><td>150724T160733Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53743#53743">histocra</a></td></tr>
<tr d-ix="45"><td>111</td><td>JavaScript ES6</td><td>150724T151845Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53736#53736">NinjaBea</a></td></tr>
<tr d-ix="46"><td>081</td><td>Julia</td><td>150723T225124Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53681#53681">Alex A.</a></td></tr>
<tr d-ix="47"><td>100</td><td>Java</td><td>150724T132151Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53727#53727">Geobits</a></td></tr>
<tr d-ix="48"><td>075</td><td>Mathematica</td><td>150724T131613Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53725#53725">jcai</a></td></tr>
<tr d-ix="49"><td>106</td><td>C#  106 Bytes</td><td>150724T094431Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53716#53716">Alex Car</a></td></tr>
<tr d-ix="50"><td>nan</td><td></td><td>150724T065606Z</td><td><a href="https://codegolf.stackexchange.com/questions/53675/calculate-average-characters-of-string/53709#53709">Cristian</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://learn.microsoft.com/en-us/dotnet/csharp/" rel="nofollow noreferrer">C#</a>, 478 bytes with test cases.</h1>
<p>Golfed version. <a href="https://dotnetfiddle.net/1ckGoI" rel="nofollow noreferrer">Run it on dotnetfiddle!</a></p>
<pre><code>using System;using System.Text;class P{static string F(string s){var v=new int[s.Length];double t=0;int i=1;var r=new StringBuilder();for(int j=0;j&lt;s.Length;j++){v[j]=Convert.ToInt32(s[j]);}foreach(int c in v){t+=c;int a=(int)Math.Round(t/i);a=Math.Max(a,32);a=Math.Min(a,126);r.Append((char)a);i+=1;}return r.ToString();}static void Main(string[] args){string[] a=new string[]{&quot;Hello!&quot;,&quot;test&quot;,&quot;42&quot;,&quot;StackExchange&quot;};foreach(string s in a){Console.WriteLine($&quot;{s} -&gt; {F(s)}&quot;);}}}
</code></pre>
<p>Ungolfed version. <a href="https://dotnetfiddle.net/gZE46n" rel="nofollow noreferrer">Run it on dotnetfiddle!</a></p>
<pre><code>using System;
using System.Text;

public class Program
{
    public static string ConvertString(string s)
    {
        int[] vecsmall = new int[s.Length];
        for(int j = 0; j &lt; s.Length; j++)
        {
            vecsmall[j] = Convert.ToInt32(s[j]);
        }
        
        double t = 0.0;
        int i = 1;
        StringBuilder res = new StringBuilder();

        foreach(int c in vecsmall)
        {
            t += c;
            int ascii = (int)Math.Round(t / i);
            ascii = Math.Max(ascii, 32); // ensure within printable ASCII range
            ascii = Math.Min(ascii, 126); // ensure within printable ASCII range
            
            res.Append((char)ascii);
            i += 1;
        }
        
        return res.ToString();
    }

    public static void Main(string[] args)
    {
        string[] strings = new string[] {&quot;Hello!&quot;, &quot;test&quot;, &quot;42&quot;, &quot;StackExchange&quot;};

        foreach(string s in strings)
        {
            Console.WriteLine($&quot;{s} -&gt; {ConvertString(s)}&quot;);
        }
    }
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>, 106 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/251211/110802">@alephalpha's PARI/GP answer</a> in Scala.</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=LU7NSsNAEL7nKcZQcJemsU1FJGEDIoKCnoon8TBu87Ntsim701IJeRIvBbHv1Ldx03QO88F88_38HK3ECueH03XztcokwRsqDa3n7bCCPGYLMkoXIh2Qg_jbUj65P62sSNsdGkaB4oJNw2kw44kNa9ww6SgaC5n0HihqpDI0zVYvGd0oHlLzosk97tk84mGtNJtFdzxRYzFL0LGPJZrOEeshs7sk_gIssxxq14-hKWwMD8bg98fw9cljeNeKQLjy4KbPtmfKuturssT856yqmis_AJ8ySz3eRv1eEMr1016WqIvM52f9RRvmjclQlsy5pLBxN6o0s_7IwiSFUZszyzuf95rOu1Q9HAb8Bw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>s=&gt;{var(t,i)=(0.0,1);s.map(c=&gt;{t+=c;val a=math.round(t/i).toInt.max(32).min(126);i+=1;a.toChar}).mkString}
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=VVLBTgIxEE087t37uOHQRlkEjDFESJCYSCIn4skQU0qXrXa7pO0ChvAlXrjoR_k1TncLiZe2M_Nm5s3rfP1YzhTrHg7fpUubd79n58X8XXAHEyY17CKAhUghJbYHU2ekXtLjA_pVGGDNFKwFtzlTqgdDY9jn61i7GQJskrMVeUtcgQ6KVxUNWQYcQq6T65Mt0W6fLCMs2lpsQsOHUqqFMFEFSAsDhMN989SaBjqAZS_7wIPh2THLpa89YS5LTFHqBXHQAklrYkhyS7odmuRSk3bnlkKrBULb0gjYSJehECsk4NhcCRhOR-MxGKaXInTwPLFh1QQLjjJmQkR6fz3QvqaNWITU8xAaBb-XOEe9CTNLe5SwBs1Q7xct3T-1bRXy6jxL60j8JJQqLuIriJ2wzt83HX9OHeMfj1ueebYxrfJDboICCsYzglUG9XhKExs3LDQH0Njhj9N9TGuK-6jejrAkx2X5Aw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  def f(s: String): String = {
    val vecsmall: Array[Int] = s.map(_.toInt).toArray
    var t = 0.0
    var i = 1
    var res = new StringBuilder

    for (c &lt;- vecsmall) {
      t += c
      val ascii = Math.round(t / i).toInt.max(32).min(126) // ensure within printable ASCII range
      res += ascii.toChar
      i += 1
    }

    res.toString()
  }

  def main(args: Array[String]): Unit = {
    val strings = List(&quot;Hello!&quot;, &quot;test&quot;, &quot;42&quot;, &quot;StackExchange&quot;)
    strings.foreach(s =&gt; println(s&quot;$s -&gt; ${f(s)}&quot;))
  }
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a> <code>B</code>, 5 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ƒ€m.+
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728JKM0Ly_faGm0kpNS7IKlpSVpuhYrjk161LQmV097SXFScjFUcMEyj9ScnHxFCA8A" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>ƒ€m.+  # Implicit input
       # Convert to ordinals
ƒ      # Prefixes of ordinals
 €m    # Mean of each
   .+  # Add 0.5 to each
       # Convert to string
       # Implicit output
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 55 bytes</h1>

<pre class="lang-c prettyprint-override"><code>n;t;main(c){for(;read(0,&amp;c,1);putchar(t/++n))t+=c+n%2;}
</code></pre>
<p><a href="https://tio.run/##S9ZNzknMS///P8@6xDo3MTNPI1mzOi2/SMO6KDUxRcNARy1Zx1DTuqC0JDkjsUijRF9bO09Ts0TbNlk7T9XIuvb//@CSxORs1wqgdF566r/ktJzE9OL/usUlKbbJFpYA" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<h3>How it works</h3>
<pre class="lang-c prettyprint-override"><code>n;t;           // t and n are initialized to 0
read(0,&amp;c,1)   // Reads a character from stdin into c,
               // returns the number of characters read, 0 if EOF.
t+=c+n%2       // t is the accumulator, n%2 is used to round up.
putchar(t/++n) // increment n and use the new value to calculate the average.
</code></pre>
<hr />
<h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, 45 bytes</h1>
<p><em>Same idea, but as a function which modifies the string in-place.</em></p>

<pre class="lang-c prettyprint-override"><code>n;t;f(*s){for(n=t=0;*s;*s++=t/++n)t+=*s+n%2;}
</code></pre>
<p><a href="https://tio.run/##VVBNT8MwDD03v8IMbUu/oEzcuu6GxGHighCHbUKlSzeLzJ2ajCKm/XWKk4EQUhTZ7/nZz67SSpe06XvKbV7LyITHumklFbbI8sjwi@PCXscxhTYuOKPhJD/1l0iVPqwVTI1dY3O1nYl/kMZXhwkkK3YlknxvcB2KowiqbdlCpJEUFPDwNJ/nIugc@GIh6swfaPBTMUYu/I1bVa4TwFywZotagZQeY9VGWddUjtyfwIgScNYoDGEGWQg8OsAapKMXZ1EKNysoChgvaRwyHXguTT3LDBPZmMcH3haDWjeV7EwCBBE4T03tPIeuhq8GErkuywFhWpzN5hDH6Ht3ZoGup5@BKy@RP9p9y3eq5WBoIJ3BUJslDRI4L3IuOfHGdauUt@8An3hOBK2yh5Z4sDj194pNXgirjBW3E/Foy@rt7oPvSxv1VdW63Jg@faYmxd1eY4X2Gw" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 50 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda s:s and f(s[:-1])+[int(.5+sum(s)/len(s))]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72soLIkIz9vwYKlpSVpuhY3jdJscxJzk1ISFYqtihUS81IU0jSKo610DWM1taMz80o09Ey1i0tzNYo19XNS84CUZixMZ5JttFZuYoFGflGKjpJHak5OvqKSZixXpW2aRpImV0ERSDdERXJGkU6lZqwmRCfMbgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes in an list of UTF-8 codepoints, return a list of UTF-8 codepoints.</p>
</div>
<div id="pu5" class="pu"><h1><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, 59 bytes</h1>
<pre><code>N+X+[A|R]:-L=X+A,T is round(L/N),put(T),N+1+L+R.
+A:-1+0+A.
</code></pre>
<p><a href="https://tio.run/##KyjKz8lP1y0uz/z/3087QjvasSYo1krXxzZC21EnRCGzWKEovzQvRcNH309Tp6C0RCNEU8dP21DbRztIj0vb0UrXUNtA21Hvv5WugnaCR2pOTr5ignVejh4XWKAktbgEiWtihMQJLklMznatSM5IzEtPBYv/BwA" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
<p>Takes a list of codepoints and outputs to STDOUT.</p>
<p>A little longer, but using only one predicate:</p>
<h2><a href="http://www.swi-prolog.org" rel="nofollow noreferrer">Prolog (SWI)</a>, 63 bytes</h2>
<pre><code>+A:-scanl(plus,A,0,Z),nth0(N,Z,E),N&gt;0,T is round(E/N),\+put(T).
</code></pre>
<p><a href="https://tio.run/##TcgxCsMgFADQvaewm@I3ldIphUIGoZNLM4UOEStJyEclKu3tLWTK@F7cAoZJpO9SK@9akazxSCOWBB1IGBj4PEuqYQDFQD8k9GRJZAvFf6i6aAZvHkumPWtqKwgfnw4xnMe7x@a0R3YpH3i7HvDKxq7qZ2fjJ7d//QM" rel="nofollow noreferrer" title="Prolog (SWI) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>Matlab, <s>43</s> 31 bytes</h1>
<p><em>Thanks to <a href="https://codegolf.stackexchange.com/users/42892/beaker">@beaker</a> for 9 bytes off!</em></p>
<p>Using an anonymous function:</p>
<pre><code>@(s)[cumsum(+s)./find(s)+.5 '']
</code></pre>
<p>Examples:</p>
<pre><code>&gt;&gt; @(s)[cumsum(+s)./find(s)+.5 '']
ans =
  function_handle with value:
    @(s)[cumsum(+s)./(find(s))+.5 '']
&gt;&gt; f=ans;
&gt;&gt; f('Hello!')
ans =
    'HW^adY'
&gt;&gt; f('test')
ans =
    'tmop'
&gt;&gt; f('42')
ans =
    '43'
&gt;&gt; f('StackExchange')
ans =
    'Sdccd_ccccddd'
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jellylanguage" rel="nofollow noreferrer">Jelly</a>, 7 bytes</h1>
<pre><code>OÄ÷T+.Ọ</code></pre>
<pre><code>OÄ÷T+.Ọ  ~Main link
O        ~Cast to number
 Ä       ~Cumulative sum; add the values
  ÷T     ~Divide by indices
    +.   ~Add .5
      Ọ  ~Cast to characters
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m700KzUnp3LBgqWlJWm6Fqv9D7cc3h6irfdwd8-S4qTkYqj4qmglD6C6fEWlWKgIAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/FMNSSun/Burlesque" rel="nofollow noreferrer">Burlesque</a>, 21 bytes</h1>
<pre><code>)?^qavpa0.5?+)avqL[\m
</code></pre>
<p><a href="https://tio.run/##SyotykktLixN/V@trmBtrRv7X9M@rjCxrCDRQM/UXlszsazQJzom939teM5/j9ScnHxFhUdtkxQ8wuMSUyK5SlKLS8D8ktz8Ai4TIzDbxJgruCQxOdu1IjkjMS89FSwYnJKcnBKfDAQpKSkA" rel="nofollow noreferrer" title="Burlesque – Try It Online">Try it online!</a></p>
<pre><code>)?^   # To codepoint
qavpa # Average on prefixes
0.5?+ # Add 0.5 to each
)av   # Floor each
qL[\m # Back to char
</code></pre>
<p>Should be 17 chars, but <code>R_</code> (round) rounds 0.5 down, not up.</p>
</div>
<div id="pu9" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 22 bytes</h1>
<pre><code>(0.5&lt;.@++/%#)\&amp;.(3&amp;u:)
</code></pre>
<p><a href="https://tio.run/##y/qvpKeepmBrpaCuoKNgoGAFxLp6Cs5BPm7/NQz0TG30HLS19VWVNWPU9DSM1UqtNP9rcqUmZ@QrpCmoe6Tm5OQrqsP5JanFJQieiRGCHVySmJztWpGckZiXnqr@HwA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<h2>Explanation</h2>
<pre><code>(0.5&lt;.@++/%#)\&amp;.(3&amp;u:)
              &amp;.(    )  do this, the left verb then the inverse of this:
                 3&amp;u:     characters -&gt; ordinates
(           )\          over the prefixes of the input:
        +/%#            take the average (sum divide length)
 0.5   +                add one-half
    &lt;.@                 then floor   
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.dartlang.org/" rel="nofollow noreferrer">Dart</a>, 76 bytes</h1>
<pre><code>t(a,[c=1,s=0])=&gt;String.fromCharCodes([...a.runes.map((i)=&gt;(s+=i+.5)~/c++)]);
</code></pre>
<p><a href="https://tio.run/##RZA9b8MgEIb3/AqKOoDs0PRrcsgSVeqeoaosN0JAbFQbLMBRpcj96@7ZsZsbOODe5@4FJXwchkhEmkv@mAa@KSjfHaI3tmQn75p9JfzeKR1IzhgTzHdWB9aIlhADShISbhL2Sn8fZJLQgmbD2RmFGmEsoeiyQhBn4ZGxbRcD4ijH77qu3R1OEY46xDG/PI3rIQr5/fYjK2FLjYvsn3VdvMEfX0J9TnDj2gl@nmAlpTpKCKXUAp@cJ9NwQDcZpO3sg9XalrGCKzA9u1ymRd20oL8KczO3GqOFX4kE319GSY/WOwRbMh5oj@lNJ0LQHgrXEuJ8eQF0m2X9qh/@AA" rel="nofollow noreferrer" title="Dart – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1>brev, 146 bytes</h1>
<pre><code>(as-list reverse(c pair-fold-right(fn(cons(integer-&gt;char(inexact-&gt;exact(floor(+(/(apply + x)(length x))0.5))))y))'())reverse(c map char-&gt;integer))
</code></pre>
<p>124 with banker's rounding:</p>
<pre><code>(as-list reverse(c pair-fold-right(fn(cons(integer-&gt;char(round(/(apply + x)(length x))))y))'())reverse(c map char-&gt;integer))
</code></pre>
<p>Which is still a lot. It's clear that a huge painpoint in brev is the type converting (chars to integers, strings to lists etc).</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 45 bytes</h1>
<pre><code>s-&gt;t=i=0;Strchr([(t+=c)\/i++|c&lt;-Vecsmall(s)])</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMHiNAXbpaUlaboWN3WLde1KbDNtDayDS4qSM4o0ojVKtG2TNWP0M7W1a5JtdMNSk4tzE3NyNIo1YzWhmrwTCwpyKjWKFXTtFAqKMvNKgEwlEEdJIQ2oTlNHIVrJIzUnJ19RSUdBqSS1uAREmxiByOCSxORs14rkjMS89FQlmJELFkBoAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<hr />
<h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 52 bytes</h1>
<pre><code>s-&gt;Strchr(Vec(intformal(Ser(Vecsmall(s))/(1-x)))\/1)</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728ILEoMz69YMHiNAXbpaUlaboWN02Kde2CS4qSM4o0wlKTNTLzStLyi3ITczSCU8EixUB2jkaxpqa-hqFuhaamZoy-oSZUr3diQUFOpUaxgq6dQkERUCuQqQTiKCmkgbToKEQreaTm5OQrKukoKJWkFpeAaBMjEBlckpic7VqRnJGYl56qFAs1csECCA0A" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>This one is longer, but I can't resist to do this:</p>
<ul>
<li><code>Vecsmall(s)</code>: Converts the string to a vector of ASCII codes.</li>
<li><code>Ser(...)</code>: Converts the vector to a formal power series.</li>
<li><code>.../(1-x)</code>: Divides the result by <span class="math-container">\$1-x\$</span>. This is equivalent to taking the cumsum.</li>
<li><code>intformal(...)</code>: Takes the integral with respect to <span class="math-container">\$x\$</span>. This is equivalent to dividing the <code>n</code>-th term with <code>n</code>.</li>
<li><code>Vec(...)</code>: Converts the result back to a vector.</li>
<li><code>...\/1</code>: Rounds the result.</li>
<li><code>Strchr(...)</code> Converts the result back to a string.</li>
</ul>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 bytes</h1>
<pre><code>OÆmƤ+.Ọ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/9//cFvusSXaeg939/z//98DKJivCAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<pre><code>OÆmƤ+.Ọ
O       - Get a list of character codes from the input string
   Ƥ    - Over prefixes:
 Æm     -  Get the mean
    +.  - To each, add 0.5
      Ọ - Convert from character codes to charcters. Decimals are rounded down.
</code></pre>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 13 bytes</h1>
<pre><code>£T±Xc)/°Y r d
</code></pre>
<p><a href="http://ethproductions.github.io/japt/?v=1.4.4&amp;code=o1SxWGMpL7BZIHIgZA==&amp;input=IkhlbGxvISI=" rel="nofollow noreferrer">Test it online!</a></p>
<h3>How it works</h3>
<pre><code>£   T± Xc)/° Y r d
mXY{T+=Xc)/++Y r d}
                     // Implicit: U = input string, T = 0
mXY{              }  // Replace each char X and index Y in the string by this function:
    T+=Xc            //   Add X.charCodeAt() to T.
         )/++Y       //   Take T / (Y + 1).
               r d   //   Round, and convert to a character.
                     // Implicit: output result of last expression
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 16 bytes</h1>
<pre><code>S÷L+.Ḟ
OµḣLR$Ç€Ọ
</code></pre>
<p><a href="https://tio.run/nexus/jelly#ASMA3P//U8O3TCsu4bieCk/CteG4o0xSJMOH4oKs4buM////IjQyIg" rel="nofollow noreferrer" title="Jelly – TIO Nexus">Try it online!</a></p>
<p>Only if there were Average and Round built-ins...</p>
</div>
<div id="pu16" class="pu"><h1><a href="http://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 15 bytes</h1>
<pre><code>.pvyDSÇOsg/îç}J
</code></pre>
<p><a href="http://05ab1e.tryitonline.net/#code=LnB2eURTw4dPc2cvw67Dp31K&amp;input=SGVsbG8h" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1><a href="https://github.com/knight-lang/knight-lang" rel="nofollow noreferrer">Knight</a>, 62 bytes</h1>
<pre><code>;;=sP=i 0W&lt;=i+1i+1Ls;=aGs=t 0i;Wa;=t+tAa=aGa 1LaO+A/+t/i 2i&quot;\&quot;
</code></pre>
<p><a href="https://tio.run/##rVltU9tIEv5s/4rBKWzJloMkuKotyzJFssBRRyALyeUD@BIhyzC1suyTZFiOkL@e6@550cg2ucvdUinLmumXp1@mu8eJ@7dx/P0Vz@J0OUmGRTnh89d3o6a5kvKb2lJcPi6SFaKcZ7e1pZLPBM0kmfIsYWnK0nl2Sx9Nvfrh7OM75lWvlx8umF@9/v3ggu1Vr0dnb9kv1evFR@ZVxEenlwbt2cdTg/Tj2buDy79Zhc0s/Gizb95fbL17cAlqxWZ8F@Wsa1cMJhVg1SJGI7ZX7Z0dfsLNDDbJoq8Mvw@HKzSohmjQTKBJUxsJazRvzs9PiQg/9snIAdpmALk4FgTAb2C9j9JlYttX2dhuNskOiMrVOLxoHZ4fWd@DICzeh5y5n4Yh73nw77QIwui4CEvm8uBTFIRlrzyIYCli3ml03jvY6ZU7nPm8dd36boOQViDkdkFwEs1YiBqCZhNgLKK8SCybPTUbPCsZD5oNWCVIDutOl1kMK8Qcw3s5WzjFIrvyx@GT67jPIKPBQRzRw9PFhZ0dFM8X7OGOl0mxiOKk2YDvaWLBOrBbAobDWtfldXY9vc7Z0/PV2LIHr1o2QWnwKbM02pB1XnVsJkSo1S1Yvc5gudcTK4CzkaRFYi48CzjxXRL/zqbznGXL2U2SFxIPs3gx4be8VFJBO5rjOdoi8ewyz2U91pXIez2b9VnH7YAKRMptliflMs@YSiLBRnkUrGK4j3Ie3aSJQgEg0vlDklsx6FNA2NevTIGL6S0mR3zu2NI9fIPpPPQciFGol1fQ4bGU6Qsk2WS5sDCkTPq0z@BtHbAoEoWQJmBcdzoVplZHBA2YwQINioEQKCrwHZAtoqJk5V0CwqK8BGIZgK7yKAY0ttESBdY4ay@ChU/PpkA3KmcQfEzdks8zgI0Z644BWqw8UiwXC3S4rbJKrZjuN/MP3G44G2WoVF5kkMdQ4DBzJXLhlQ8dXQXEwhEuYLEbYJFDmCrJqD4KUy3EjVCjNJ3H1p7reDYaiMvaCDIwW6ZplD@ahlbxuTDC876jkZFCyb/MVrhJhYcqZFHYZOnB4Zu3X37bOv31/JthsSn3hm8U7K8L3qpJPj65fEFimeQkMsom7J/LSL2i2HtTxe66CuGB4452xskGZxDzXp25TvNMtTJfZhiiQFbpbjkvLFUs6QRAbpc8ZrR7s5xe@XtjiUNEuk31QQMoFnCuyqkFpGD/dppOWqrwUJdyUMiqADgVWoDof0J/jW7IvN26nWg8JuM@a5X5MmlBEup1zElYn0ZQQnCjhanVqpyAdqLtslGROz6/mc9T2Lmpe@BFWyuzfmRQ9@ctMmHerMFMEWP2p2KEpC3naWqZUB3mOtAi/gfI2RpkbMPvDt6fOdiMRaLB68mV57oupBOYAq/qreD/Sj6XDB@BkaOGtegBeHPww6fP3dBTPR1LHLZ1fNCnLx67QHB0cnrYZVOojkFDp7bUh3U4jhZOmmQ0Ahi@UnOU8Bmcu5ecscqIzQl7G3Yci9MwAc14SL4IoKtw3NR1I54tViJATuLjqoSgm/gY1RQPvIzvrC54Zm3sAh8x@Rdjo@ocdAYMtQiCEB2KgxuUYbtNRknxcnSspawdUBuuKGg@LXPsXTSiXo3tpyrNYIKi4i4UX4DiuuwcKp5lt90/pvhXUb4HSpAqfHSblClMl1abYtnGCGGPnPDMDvjUsiieOBHEdzlicSBPbVuEOXSDjVjhYdMcIPQdCn1idMRqIB0SKLzoJFk7K5RvKnsEvd55W@0gp@liTfMFaDAbIP/CxXyRZJah2GnlLZoVAFU4E60S8jH03b1faF1OF5YYSaYAfYJGwQwHKevggAfkMDzQG@oA1Sq9LFhkvZBmITyxQGlLd4Mc0kWuRgndkPnm0FK5sbLkN7Ak@QPmODzta3Zu1aJOl4gtrGRrhKdr6QFa0rpfDPJfOwM5KG5IZF35ZAdqndFcbGEPslUTGo327GqyXCuHivWSpkNru0DG@mFYZwZ3wuxj6oVKarcqUrWB7SWJMin2pRYme5YZAVlbpBfOKy/gwRA3H3SaiGfNdazdpptXv4@kYzHnXtO83VCwtl93C8BjwZvN1FHLDfjLslDR1zkhhj0BqKcBUZ2EeoklGVPLCI8Ypxv1aItrLFLD4M9ULvki5jgA02EQASAqXMZTHiorfXtzqsZRqR5y7PR6lZts9R1l2TCOOvQsZY2QdvXXstPIdpzV63gFU7eKzgYvrLbnDX7orvlBxHWTF2YbTOsSTWgKIQboQRZVyLBzDbc8JAr6fZInHUUtczXQwqNl7fTv/NAxO5sds/1Dpu3NTN/WmL5trDj/IK/XDBd3DFrzTW8EMjwiOiHrezoaRAsh8uA89j04i55J7P8k9RDKaI02DJGU9A7UiqtCQwHxR66MiW/TWNMNKU7N1YNDm2QK3CWoEGMrgu94tbhL8qRTsGwOszZPS56xh@gR/Msmc7i8lsltkgPPYp4lWckjvG3AiZ@zh4TdRfcJEEpBSF6yWZQtIc0eX@MqWneDHgdXkCeKZVrirwukXBdGRdI3aZTKFZeZfJpkRTzKe5nSfRmIJhvWqFy6yEcp9tBHsDqbpMmEfalgf9FSnvCbGOAMJZUxIxTW76t3m8gbkrRrQH/W9XJIybrSILE41upnWK@e@8wsEkPzuCDrQP6Q12aCYJ/VBkpadJhRNVGGKzhVa/ZFv0DarRC6kjEtjeAcYmrNJ/MBmyWzeIFplrHRl/3/15TRn2DKSJmytcGWUNoiTdl/2ftC6wbIuL3PagS@pvBVo93ahLN60eapymMK0PDaVcVDWzb1kH2TU5YSzf/1v@GXNcgQo/mDzsCkro3Dq7RhVXXr2z994VEzcHXjQbpG7dajSyHRoMRxWOM2yiRyIEWvp9kE5E9gnvh5zBxIa9Yxc8aRbCf16R5JDf59f7BruOVYXC1CYxLrmQ1o/S6VyQuKo8/Cbm3wvRSOXhEarLY8f1PL27X1vOBr7j1a/A@DEwLDJ4Yi1pcEPTaZM5QPFqLWnofDFA0SIv/FJj2IoidPAmifJNMIiiRYpiZRnsEmn9CPTVFcQpvqbMcdnE1xxWYv3HZRmO6BMDXKHxxmEc9wqGVRfhs7JLTbhe/3Nv6sRfdQ/H8hyyU09eve8/e/JmDw1r8B" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>s</code>, 7 bytes</h1>
<pre><code>CKvṁ.+C
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyJzIiwiIiwiQ0t24bmBLitDIiwiIiwiSGVsbG8hIl0=" rel="nofollow noreferrer">Try it Online!</a></p>
<p><code>.+</code> should be <code>ṙ</code>, but there's a bug.</p>
</div>
<div id="pu19" class="pu"><h1>Dyalog APL, 25 bytes</h1>
<pre><code>{⎕UCS⌊.5+(+\C)÷⍳⍴C←⎕UCS⍵}
</code></pre>
</div>
<div id="pu20" class="pu"><h1>PHP 7, 79 bytes</h1>
<p>As I don't have enough reputation to comment on cb0's answer to provide him hints to improve his answer (mainly using the char index method in a string and while to loop through a string).
But I still bothered to post it due to the large reduction in byte count.</p>
<pre><code>&lt;?php $i=$b=0;while($a=ord($argv[1][$i++]??'')){$b+=$a;echo chr(round($b/$i));}
</code></pre>
<p>I didn't find a way though to use the <code>&lt;?=</code> shortcut and avoid undefined errors without using command line flags (this is why i used <code>$i=$b=0;</code>). This answer does not work in PHP 5 due to the <code>??</code> syntax.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 65 bytes</h1>

<pre class="lang-python prettyprint-override"><code>n=t=0
for c in input():n+=1;t+=ord(c);print(end=chr(int(.5+t/n)))
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/7/P8@2xNaAKy2/SCFZITMPiApKSzQ0rfK0bQ2tS7Rt84tSNJI1rQuKMvNKNFLzUmyTM4o0QGw9U@0S/TxNTc3//z1Sc3LyFQE" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>If I use <code>round()</code> instead of <code>int(.5+</code> etc., it saves one character but is <em>technically</em> not in compliance with the challenge: Python's <code>round()</code> rounds halves to the nearest even integer, not upwards. However, it works correctly on all sample inputs.</p>
</div>
<div id="pu22" class="pu"><h1>Ruby, 27 bytes</h1>
<pre><code>putc gets.sum.quo(~/$/)+0.5
</code></pre>
<p>Solution produced through some collaborative golfing at work.</p>
<h2>How this works</h2>
<ul>
<li><code>Kernel#putc</code> prints a single character (e.g. <code>putc &quot;Hello&quot;</code> outputs <code>H</code>). Passing an object to it prints the character whose code is the least-significant byte of the object. So <code>putc 72</code> outputs <code>H</code>.</li>
<li><code>Kernel#gets</code> reads stdin and returns a string.</li>
<li><code>String#sum</code> returns a checksum. The result is the sum of the binary value of each byte in the string modulo <code>2**16 - 1</code>. Since ASCII bytes comfortably fit in this space, this just returns the byte total.</li>
<li>Because the byte total is an integer, we can’t do floating point calculations (in Ruby <code>10 / 3</code>  is <code>3</code> whereas <code>10.to_f / 3</code> is <code>3.33…</code>). Here’s where <code>Numeric#quo</code> comes in – <code>10.quo(3)</code> returns the Rational  <code>(10/3)</code>.</li>
<li><code>Regexp#~</code> matches a regular expression against the contents of <code>$_</code> (the last string read by <code>gets</code>). It returns index of the match.</li>
<li>The Regexp <code>/$/</code> matches the end of the string, so <code>~/$/</code> means “print the index of the end of the string” – in other words, the string length. This gives us the final  is a short-hand for the length of the string read by <code>gets</code>.</li>
<li>This gives us the Rational (byte total/string length). Now we need to round it into an integer. <code>+0.5</code> casts the Rational to a float. <code>putc</code> floors the float into an integer.</li>
</ul>
</div>
<div id="pu23" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 59 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>-join($args|%{[char][int][Math]::Floor(($s+=+$_)/++$i+.5)})
</code></pre>
<p><a href="https://tio.run/##RY3BasMwEETv@go1bGoJOS2k6cVgyCUll55yKMU4RkiK7cSxXGlLA46/3VVrQuY2b2Z2O/tjnK9M04xwSPtxcbR1y0C60l/nfaYq6fKsbjHP3iVWeZK8NdY6xsCLVEDBn4WAWjy98oGPAyFrRkjMom24Zx@iONp@7KX@jPgfROMxIDzbbgKrZbCrl8nsUKrT5hIetqUJfKeV0oUK0lqHCuH0Sue0JzQIPLq6LWMK5tIZhUbTlEIxZc747wYDeIQDXU/N/2QG7BYulPm6j3lyW83IMP4C" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
</div>
<div id="pu24" class="pu"><h1><a href="https://ziglang.org" rel="nofollow noreferrer">Zig</a> 0.6.0, 84 bytes</h1>
<pre class="lang-rust prettyprint-override"><code>fn a(b:[]u8)void{var t:u64=0;for(b)|c,i|{t+=c;b[i]=@intCast(u8,(t+(i+1)/2)/(i+1));}}
</code></pre>
<p><a href="https://godbolt.org/z/zoPvbW" rel="nofollow noreferrer">Try it Online</a></p>
<p>Formatted:</p>
<pre class="lang-rust prettyprint-override"><code>fn a(b: []u8) void {
    var t: u64 = 0;
    for (b) |c, i| {
        t += c;
        b[i] = @intCast(u8, (t + (i+1)/2) / (i+1));
    }
}
</code></pre>
</div>
<div id="pu25" class="pu"><h1><a href="https://www.zsh.org/" rel="nofollow noreferrer">Zsh</a>, 52 bytes</h1>



<pre class="lang-sh prettyprint-override"><code>for c (${(s::)1})printf ${(#)$((.5+(n+=0.+#c)/++i))}
</code></pre>

<p><a href="https://tio.run/##HYzLCsIwEEX3@YqRdjFDoD7QTcWl4N4vKNPEBMtMabIQpd8eo3d1OHDuO4XikbB4XYAB2w@mvqf9SvMSJXuooqEWsTtZFHvZdbZh2lobidZCxvy6BFHg5qZJN5BdynA8wD0P/Ly@OAzycGcY1UBd/Ut/cBzUjCrOlC8" rel="nofollow noreferrer" title="Zsh – Try It Online">Try it online!</a></p>

<p>In arithmetic mode, <code>#c</code> gets the code of the first character of <code>$c</code>. The parameter expansion <code>${(#)    }</code> prints the character associated with the code.</p>
</div>
<div id="pu26" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 65 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda s:s and f(s[:-1])+chr(int(sum(map(ord,s))*1./len(s)+.5))
</code></pre>

<p><a href="https://tio.run/##K6gsycjPM/r/P802JzE3KSVRodiqWCExL0UhTaM42krXMFZTOzmjSCMzr0SjuDRXIzexQCO/KEWnWFNTy1BPPyc1T6NYU1vPVFPzf0ERUBFQm7pHak5OvqK6poKygkd4XGJK5H8A" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu27" class="pu"><h1>SmileBASIC, 65 bytes</h1>
<pre><code>LINPUT S$FOR I=1TO LEN(S$)A=A-A/I+ASC(S$[I-1])/I?CHR$(A+.5);
NEXT
</code></pre>
</div>
<div id="pu28" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 23 bytes</h1>

<pre><code>(0.5&lt;.@++/%#)&amp;.(a.&amp;i.)\
</code></pre>

<p><a href="https://tio.run/##y/r/P81WT0HDQM/URs9BW1tfVVlTTU8jUU8tU08z5n9qcka@QpqCem5ipUJJRqpCWn5RcqpCUqpCeWZJhkJlfqmOQmJOeWJlsToXWKk6lAZq8UjNyclXRPBLUotLEDwTIwQ7uCQxOdu1IjkjMS89Vf0/AA" rel="nofollow noreferrer">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>                      \  on prefixes
               (   i.)   index of the first occurence
               (  &amp;  )   in
               (a.   )   the character set
            x&amp;.y         apply y, then x, then the inverse of y,                            
(0.5        )              that is the element of a. with a given index
(       +/  )            sum
(          #)            number of elements
(         % )            division
(   &lt;.@+    )            add, then floor 
</code></pre>
</div>
<div id="pu29" class="pu"><h1><a href="https://github.com/barbuz/Husk" rel="nofollow noreferrer">Husk</a>, 10 bytes</h1>

<pre><code>zȯci/Nt∫mc
</code></pre>

<p><a href="https://tio.run/##yygtzv7/v@rE@uRMfb@SRx2rc5P///@vVFKal6gEAA" rel="nofollow noreferrer" title="Husk – Try It Online">Try it online!</a></p>

<pre><code>                                                    | "tuna"
         mc  -- map each character to ASCII value   | [116,117,110,97]
       t∫    -- prefix sums &amp; drop leading 0        | [116,233,343,440]
z(   )N      -- zip the list with [1..] using       | 
    /        --   divide                            | [116/1,233/2,343/3,440/4] == [116.0,116.5,114.̅3,110.0]
   i         --   round                             | [116,117,114,110]
  c          --   convert to character              | "turn"
</code></pre>
</div>
<div id="pu30" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 8 bytes</h1>

<pre><code>OÆmƤ+.ḞỌ
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/9//cFvusSXaeg93zHu4u@f///9KwSWJydmuFckZiXnpqUoA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>
<div id="pu31" class="pu"><p><strong>PHP</strong>, <strong>176 byte</strong></p>

<pre><code>&lt;?=(implode('',array_reduce(str_split($argv[1]),function($c,$k){array_push($c[1],chr(floor(((ord($k)+$c[0])/(count($c[1])+1))+0.5)));return[ord($k)+$c[0],$c[1]];},[0,[]])[1]));
</code></pre>

<p>Example:</p>

<pre><code>&gt;php cg.php Hello!
HW^adY
&gt;php cg.php test  
tmop
&gt;php cg.php 42
43
</code></pre>

<p>The biggest solution so far, but based on php it can't get much shorter I think. 2 bytes could be saved by removing the newlines.</p>
</div>
<div id="pu32" class="pu"><h2>Clojure, 69 bytes</h2>

<pre><code>#(for[c(map /(reductions +(map int %))(rest(range)))](char(+ c 0.5)))
</code></pre>

<p>Returns a sequence of characters, arguably a string-like construct. Would need an <code>#(apply str(for[...]...))</code> to convert it into a string.</p>
</div>
<div id="pu33" class="pu"><h1><a href="https://github.com/ETHproductions/japt/" rel="nofollow noreferrer">Japt</a>, 11 bytes</h1>
<pre><code>c@V±X /°T r
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.5&amp;code=Y0BWsVggL7BUIHI=&amp;input=IkhlbGxvISI=" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu34" class="pu"><h1>JavaScript (ES6), 75 bytes</h1>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>let f =
s=&gt;s.replace(/./g,x=&gt;String.fromCharCode((t+=x.charCodeAt())/++i+.5),i=t=0)</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input oninput="O.value=f(this.value)" value="Hello!"&gt;&lt;br&gt;
&lt;input id=O value="HW^adY" disabled&gt;</code></pre>
</div>
</div>
</p>

<p>I can't believe there's no JS answer with this technique yet...</p>
</div>
<div id="pu35" class="pu"><h1>Factor, 80 bytes</h1>
<pre><code>[ cum-sum [ dup zero? 1 0 ? + / ] map-index [ .5 + floor &gt;fixnum ] map &gt;string ]
</code></pre>
</div>
<div id="pu36" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow">>&lt;></a>, 30 bytes</h1>

<pre><code>i:0(?v
v &amp;l~&lt;
\+l2(?
\&amp;,12,+o;
</code></pre>

<ul>
<li>The first line reads from stdin and puts the characters on the stack</li>
<li>The second will remove the EOL char, take the size of the stack and put it in the <code>&amp;</code> register</li>
<li>The third line will add numbers on the stack while there are two or more of them</li>
<li>The fourth line will divide the resulting number by the register's value, then add 1/2, output the value as a character and stop. When faced with a float value when displaying a char, >&lt;> will floor it, which is why we added 1/2</li>
</ul>

<p>You can try it on the <a href="https://fishlanguage.com/" rel="nofollow">online interpreter</a> but then you need to use the following version, because the online interpreter pads the code box to a rectangle and applies <code>?</code> to spaces.</p>

<pre><code>i:0(?v
v &amp;l~&lt;
\+l2(   ?
\&amp;,12,+o;
</code></pre>
</div>
<div id="pu37" class="pu"><h1>Mathcad, 60 &quot;bytes&quot;</h1>
<p><a href="https://i.stack.imgur.com/BmOAh.jpg" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/BmOAh.jpg" alt="enter image description here" /></a></p>
<p>Mathcad is mathematical application based on 2D worksheets comprised of &quot;regions&quot; each of which can be text, a mathematical expression, program, plot or scripted component.</p>
<p>A mathematical or programming instruction is picked from a palette toolbar or entered using a keyboard shortcut. For golfing purposes, an operation (&quot;byte&quot;) is taken to be the number of keyboard operations necessary to create a name or expression (for example, to set the variable a to 3, we would write a:=3. The definition operator := is a single keypress &quot;:&quot;, as are a and 3 giving a total of 3 &quot;bytes&quot;. The programming <em><strong>for</strong></em> operator requires typing ctl-shft-# (or a single click on the programming toolbar) so again is equivalent to 1 byte.</p>
<p>In Mathcad the user enters programming language commands using keyboard shortcuts (or picking them from the Programming Toolbar) rather than writing them in text. For example, typing ctl-] creates a while-loop operator that has two &quot;placeholders&quot; for entering the condition and a single line of the body, respectively. Typing = at the end of a Mathcad expressions causes Mathcad to evaluate the expression.</p>
<p>(Count bytes) By looking at it from a user input perspective and equating one Mathcad input operation (keyboard usually, mouse-click on toolbar if no kbd shortcut) to a character and interpreting this as a byte. csort = 5 bytes as it's typed char-by-char as are other variable/function names. The for operator is a special construct that occupies 11 characters (including 3 blank &quot;placeholders&quot; and 3 spaces) but is entered by ctl-shft-#, hence = 1 byte (similar to tokens in some languages). Typing ' (quote) creates balanced parentheses (usually) so counts as 1 byte. Indexing v = 3 bytes (type v[k).</p>
</div>
<div id="pu38" class="pu"><h2>TSQL, 118 bytes</h2>
<pre><code>DECLARE @ varchar(400) = 'StackExchange'

SELECT
top(len(@))char(avg(ascii(stuff(@,1,number,''))+.5)over(order by number))FROM
master..spt_values
WHERE'P'=type
</code></pre>
<p>Returning characters vertical</p>
<pre><code>S
d
c
c
d
_
c
c
c
c
d
d
d
</code></pre>
</div>
<div id="pu39" class="pu"><h1>Perl 5, 41 bytes</h1>

<pre><code>say map{$s+=ord;chr($s/++$c+.5)}pop=~/./g
</code></pre>

<p>run as</p>

<pre><code>$ perl -E 'say map{$s+=ord;chr($s/++$c+.5)}pop=~/./g' StackExchange
Sdccd_ccccddd
</code></pre>
</div>
<div id="pu40" class="pu"><h1>R, <s>135</s> 127 Bytes</h1>

<p>This got long real quick and I really got it wrong the first time:)  Need to read the questions properly.</p>
<pre class="lang-r prettyprint-override"><code>cat(sapply(substring(a&lt;-scan(,''),1,1:nchar(a)),function(x)rawToChar(as.raw(round(mean(as.integer(charToRaw(x)))+.5)))),sep='')
</code></pre>
<p>Test Run</p>
<pre class="lang-r prettyprint-override"><code>cat(sapply(substring(a&lt;-scan(,''),1,1:nchar(a)),function(x)rawToChar(as.raw(round(mean(as.integer(charToRaw(x)))+.5)))),sep='')
1: Hello!
2: 
Read 1 item
HW^adY
</code></pre>
</div>
<div id="pu41" class="pu"><h1>Perl: <s>31</s> 30 characters</h1>

<p>(29 characters code + 1 character command line option.)</p>

<pre class="lang-perl prettyprint-override"><code>s!.!chr.5+($s+=ord$&amp;)/++$c!ge
</code></pre>

<p>Sample run:</p>

<pre><code>bash-4.3$ perl -pe 's!.!chr.5+($s+=ord$&amp;)/++$c!ge' &lt;&lt;&lt; 'StackExchange'
Sdccd_ccccddd
</code></pre>
</div>
<div id="pu42" class="pu"><h1>C, 62 bytes</h1>
<pre><code>c;t;main(n){for(;(c=getchar())&gt;0;n++)putchar(((t+=c)+n/2)/n);}
</code></pre>
<p><a href="http://ideone.com/HXZxxJ" rel="nofollow noreferrer">(ideone link)</a></p>
<p>The results are slightly different from the OP's examples, but only because this code rounds 0.5 down instead of up. Not any more!</p>
</div>
<div id="pu43" class="pu"><h1>Q, <s>15</s> 12 bytes</h1>

<p>12 bytes as an expression</p>

<pre><code>"c"$avgs"i"$

q)"c"$avgs"i"$"Hello!"
"HW^adY"
q)"c"$avgs"i"$"test"
"tmop"
q)"c"$avgs"i"$"42"
"43"
q)"c"$avgs"i"$"StackExchange"
"Sdccd_ccccddd"
</code></pre>

<p>or 15 bytes as a function</p>

<pre><code>{"c"$avgs"i"$x}

q){"c"$avgs"i"$x} "Hello!"
"HW^adY"
q){"c"$avgs"i"$x} "test"
"tmop"
q){"c"$avgs"i"$x} "42"
"43"
q){"c"$avgs"i"$x} "StackExchange"
"Sdccd_ccccddd"
</code></pre>

<p>takes advantage of </p>

<ol>
<li>the "i"$ cast to convert a string (list of characters) to a list of integers</li>
<li>the avgs function, which computes the running average of a list as a list of floats</li>
<li>the "c"$ cast to convert a list of floats to a list of characters, and which  automatically rounds each float to the nearest integer before doing so [i.e. ("c"$99.5) = ("c"$100) and ("c"$99.4) = ("c"$99) ]</li>
</ol>
</div>
<div id="pu44" class="pu"><h1>Ruby, 46</h1>

<pre><code>s=0.0
$&lt;.bytes{|b|s+=b;$&gt;&lt;&lt;'%c'%(0.5+s/$.+=1)}
</code></pre>

<p><a href="https://ideone.com/FmKAjX" rel="nofollow">ideone</a>.</p>

<p>With apologies to w0lf, my answer ended up different enough that it seemed worth posting.</p>

<p><code>$&lt;.bytes</code> iterates over each byte in stdin, so we print the rolling average in each loop. '%c' converts a float to a character by rounding down and taking the ASCII, so all we have to do is add 0.5 to make it round properly. <code>$.</code> is a magic variable that starts off initialized to 0--it's supposed to store the line count, but since here we want byte count we just increment it manually.</p>
</div>
<div id="pu45" class="pu"><h1>JavaScript ES6, 111 bytes</h1>

<pre class="lang-js prettyprint-override"><code>w=&gt;w.replace(/./g,(_,i)=&gt;String.fromCharCode([for(f of w.slice(0,++i))f.charCodeAt()].reduce((a,b)=&gt;a+b)/i+.5))
</code></pre>

<p>This is annoyingly long thanks in part to JavaScript's long <code>String.fromCharCode</code> and <code>charCodeAt</code> functions. The stack snippet contains ungolfed, commented, testable code.</p>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=function(w){
  return w.replace(/./g,function(e,i){
    return String.fromCharCode(w.slice(0,++i).split('').map(function(f){
      return f.charCodeAt()
    }).reduce(function(a,b){
      // Adds all numbers in the array
      return a+b
      // String.fromCharCode automatically floors numbers, so we add .5 to round up
    })/i+.5)
  })
}

run=function(){document.getElementById('output').innerHTML=f(document.getElementById('input').value)};document.getElementById('run').onclick=run;run()</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input type="text" id="input" value="Hello!" /&gt;&lt;button id="run"&gt;Run&lt;/button&gt;&lt;br /&gt;
&lt;pre id="output"&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu46" class="pu"><h1>Julia, <s>85</s> 81 bytes</h1>



<pre class="lang-matlab prettyprint-override"><code>s-&gt;(i=[int(c)for c=s];print(join([char(iround(mean(i[1:j])))for j=1:length(i)])))
</code></pre>

<p>This creates an unnamed function that accepts a string and creates a vector of its ASCII code points. Means are taken for each sequential group, rounded to integers, converted to characters, joined into a string, and printed to STDOUT.</p>
</div>
<div id="pu47" class="pu"><h1>Java, 100</h1>
<p>Much like many other answers here, I'm summing and averaging in a loop. Just here to represent Java :)</p>

<pre class="lang-java prettyprint-override"><code>void f(char[]z){float s=0;for(int i=0;i&lt;z.length;System.out.print((char)Math.round(s/++i)))s+=z[i];}
</code></pre>
<p>My original code is a 97, but it only returns the modified <code>char[]</code> rather than printing it:</p>
<pre class="lang-java prettyprint-override"><code>char[]g(char[]z){float s=0;for(int i=0;i&lt;z.length;z[i]=(char)Math.round(s/++i))s+=z[i];return z;}
</code></pre>
<p>Now, it's <em>just</em> long enough for scrollbars to appear for me, so here's a version with some line breaks, just because:</p>
<pre class="lang-java prettyprint-override"><code>void f(char[]z){
    float s=0;
    for(int i=0;
            i&lt;z.length;
            System.out.print((char)Math.round(s/++i)))
        s+=z[i];
}
</code></pre>
</div>
<div id="pu48" class="pu"><h1>Mathematica, 75 bytes</h1>

<pre><code>FromCharacterCode@Floor[.5+Accumulate@#/Range@Length@#]&amp;@ToCharacterCode@#&amp;
</code></pre>
</div>
<div id="pu49" class="pu"><h1>C# <s>189 135 134</s> 106 Bytes</h1>

<pre><code>var x=s.Select((t,i)=&gt;Math.Round(s.Select(a=&gt;(int)a).Take(i+1).Average())).Aggregate("",(m,c)=&gt;m+(char)c);
</code></pre>

<p>Can be seen <a href="http://csharppad.com/gist/f6195bf7201b38ea8f3c" rel="nofollow">here</a>     </p>

<p>First time golfer</p>
</div>
<div id="pu50" class="pu"><h3>Ruby 59 <s>61</s></h3>

<pre class="lang-rb prettyprint-override"><code>-&gt;w{s=c=0.0;w.chars.map{|l|s+=l.ord;(s/c+=1).round.chr}*''}
</code></pre>

<p>Test: <a href="http://ideone.com/dT7orT" rel="nofollow">http://ideone.com/dT7orT</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../index.html">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/53675/">53675</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




