<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::229667</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>332</td><td>Python3</td><td>240717T013651Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/274204#274204">Ajax1234</a></td></tr>
<tr d-ix="1"><td>082</td><td>JavaScript ES6</td><td>210614T222205Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229680#229680">Arnauld</a></td></tr>
<tr d-ix="2"><td>197</td><td>JavaScript Node.js</td><td>210615T093935Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229727#229727">user1006</a></td></tr>
<tr d-ix="3"><td>056</td><td>Charcoal</td><td>210614T231651Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229682#229682">Neil</a></td></tr>
<tr d-ix="4"><td>027</td><td>Jelly</td><td>210614T181423Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229669#229669">Nick Ken</a></td></tr>
<tr d-ix="5"><td>071</td><td>J</td><td>210614T220123Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229677#229677">Jonah</a></td></tr>
<tr d-ix="6"><td>027</td><td>05AB1E</td><td>210614T213614Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229675#229675">ovs</a></td></tr>
<tr d-ix="7"><td>033</td><td>Jelly</td><td>210614T173405Z</td><td><a href="https://codegolf.stackexchange.com/questions/229667/a-cat-s-game-to-claim/229668#229668">hyper-ne</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 332 bytes</h1>
<p>Longer than it could be, but crunches all the test cases in less than a tenth of a second.</p>
<pre class="lang-py prettyprint-override"><code>R=range
def f(s,p):
 b=[0 for _ in R(9)];b[p-1]=s
 q=[(b,0,{*R(1,10)}-{s})]
 while q:
  q=sorted(q,key=lambda x:x[1],reverse=1)
  b,c,s=q.pop(0)
  if c==9:return b
  if b[c]:q+=[(b,c+1,s)];continue
  for j in s:
   B=[*b];B[c]=j;T=[B[i:i+3]for i in R(0,9,3)]
   if all(sum(j%2 for j in t)&lt;3 for t in T+[*zip(*T)]):q+=[(B,c+1,s-{j})]
</code></pre>
<p><a href="https://tio.run/##TZBBboMwEEX3nGI2lWwyqXBp1ELqDUeIsrOsChPTmBIwNmmTRjk7haCqWb7R9583tud@3zbxq3XDsOEubz50sNMllMSjpWkAiosIytbBO5gGNiShcq2EXTLJfQAdF0RhhJdwQxiyiF6XF3@lMoDvvak1dGPDGPKt6/WOdPipz7zOD2qXwyk9CSbR6S/tvOaMjkmFBXrePdrWkmgamBIKzpPU6f7oGlDzSIlCpt3itrtYMPSjU9E2vWmOekxMttVk66ftkHERKrnOxke8Wm@5yIRJzSKWU87MV0WYYDxp3/rzuib@eCDVw9N/WU/f4hv1E20XIvwxloRbKunsks0uy0s1fsBgnWl6UpIYYUVp8IcrhPgOXxCe75AhsDtMEBJKh18" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), <s> 85 </s> 82 bytes</h1>
<p>Expects <code>(square)(turn)</code> and returns a flat array of 9 values. Everything is 0-indexed.</p>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;n=&gt;[...a=2135+[s-6?408:804]+67].map(x=&gt;s--?((x+=q=n-v&amp;1)%9-n?x:v+q)%9:n,v=a[s])
</code></pre>
<p><a href="https://tio.run/##RVDRjoIwEHz3K/ZITttQEBBR0eJH3CPyQLyiGG21RTR3@u1cWzH30Ox0Z3Y700PZlmor63PjcfHNuop2imacZrnv@yWNwsnUzZWXrONgns6DuHCTWeGfyjO600x53hqhu0svlHvtMMSfC4@v72nrXjRMOWlpmasCd5WQSAGFYAkKVrDQxXUx/A4ADMVfFH9R/E0BSGamKqQw4nhpW1vBlTgy/yh2yFGXaykZOODqvS44BJqr5PbOzT3dcIP1Gv8gao5GI6y9N9s9Gut44x22SfQbGZi8quhlMMK4hxs@wnqFrcuBtVBXyFbrT@eDD6qfezyAsxt8sQbpNvZV/cMMs9BML8/zgEBIICoI5BMCMYGpgQmBGYG5gVqgicTA0ApmBkZa@C@IexhZmBRFv95X4sRQadK8nZQ2YG1axmtdwBBC3JtbQYTt6Pu7AZq9FDdwmJRCOq8Pfw7MeXZ/" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>How?</h3>
<p>We are given a target square <span class="math-container">\$s\$</span> and a turn <span class="math-container">\$n\$</span>, both 0-indexed.</p>
<p>We use the following template by default:</p>
<p><span class="math-container">$$\begin{pmatrix}2&amp;1&amp;3\\5&amp;4&amp;0\\8&amp;6&amp;7\end{pmatrix}$$</span></p>
<p>whose flattened representation is <span class="math-container">\$[2,1,3,5,4,0,8,6,7]\$</span>.</p>
<p>But if <span class="math-container">\$s=6\$</span>, we use this one instead where the <span class="math-container">\$8\$</span> and the <span class="math-container">\$4\$</span> are swapped:</p>
<p><span class="math-container">$$\begin{pmatrix}2&amp;1&amp;3\\5&amp;\color{red}8&amp;0\\\color{red}4&amp;6&amp;7\end{pmatrix}$$</span></p>
<p>Both templates encode the same mark configuration. Assuming <span class="math-container">\$\text{X}\$</span> play first, this gives:</p>
<p><span class="math-container">$$\begin{pmatrix}\text{X}&amp;\text{O}&amp;\text{O}\\\text{O}&amp;\text{X}&amp;\text{X}\\\text{X}&amp;\text{X}&amp;\text{O}\end{pmatrix}$$</span></p>
<p>Let <span class="math-container">\$v\$</span> be the original value stored on the target square.</p>
<p>If <span class="math-container">\$n-v\$</span> is odd, we increment all squares modulo <span class="math-container">\$9\$</span><sup> [1]</sup>. This means that all parities are inverted, except <span class="math-container">\$8\$</span> which is turned into <span class="math-container">\$0\$</span> and remains even. That's why we need a slightly different board if the target square is the bottom left one.</p>
<p>Below are the mark configurations after the parity transformation for the default template (left) and the alternate template (right):</p>
<p><span class="math-container">$$\begin{pmatrix}\text{O}&amp;\text{X}&amp;\text{X}\\\text{X}&amp;\text{O}&amp;\text{O}\\\text{X}&amp;\text{O}&amp;\text{X}\end{pmatrix}
\begin{pmatrix}\text{O}&amp;\text{X}&amp;\text{X}\\\text{X}&amp;\text{X}&amp;\text{O}\\\text{O}&amp;\text{O}&amp;\text{X}\end{pmatrix}
$$</span></p>
<p>At this point, it is guaranteed that:</p>
<ul>
<li>the board is valid (i.e. there are five <span class="math-container">\$\text{X}\$</span> and four <span class="math-container">\$\text{O}\$</span> and the game is a draw)</li>
<li>the target square has the correct parity</li>
</ul>
<p>We can now swap the values of the target square and the square holding <span class="math-container">\$n\$</span>.</p>
<hr />
<p><em><sub>[1]: Because the board is described as an array of digit characters, the code <code>(x += q = n - v &amp; 1) % 9</code> is actually concatenating either <span class="math-container">\$0\$</span> or <span class="math-container">\$1\$</span> to <code>x</code> and reduces the result modulo <span class="math-container">\$9\$</span>. This gives the expected result because <span class="math-container">\$(x \times 10 + k) \bmod 9\$</span> = <span class="math-container">\$(x + k) \bmod 9\$</span> (with <span class="math-container">\$k=0\$</span> or <span class="math-container">\$k=1\$</span>).</sub></em></p>
<h3>Example</h3>
<p>For <span class="math-container">\$s=1\$</span> and <span class="math-container">\$n=6\$</span>:</p>
<ul>
<li>we have <span class="math-container">\$s\neq 6\$</span>, so we use the default template</li>
<li>we have <span class="math-container">\$v=1\$</span> and <span class="math-container">\$n-v=5\$</span>, so the squares are incremented modulo <span class="math-container">\$9\$</span></li>
<li>the square at index <span class="math-container">\$3\$</span> holds <span class="math-container">\$n\$</span> after the transformation, so that's the one that is exchanged with the target square</li>
</ul>
<p><span class="math-container">$$\begin{pmatrix}2&amp;1&amp;3\\5&amp;4&amp;0\\8&amp;6&amp;7\end{pmatrix}
\rightarrow
\begin{pmatrix}3&amp;2&amp;4\\6&amp;5&amp;1\\0&amp;7&amp;8\end{pmatrix}
\rightarrow
\begin{pmatrix}3&amp;\color{red}6&amp;4\\\color{red}2&amp;5&amp;1\\0&amp;7&amp;8\end{pmatrix}
$$</span></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 197 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;t=&gt;(g=n=&gt;n[1]?n.flatMap(e=&gt;g(n.filter(h=&gt;h!=e)).map(l=&gt;[e,...l])):n)([...'123456789']).filter(e=&gt;e[s-1]==t&amp;'012A345A678A048A246A036A147A258'.split`A`.every(T=&gt;[...T].some(j=&gt;e[j]%2!=e[T[0]]%2)))
</code></pre>
<p><a href="https://tio.run/##VZHLbtswEEX3/orpIhWJKowetuI2oAoWKJBNd0Y3qoAw0siiS5OuSNlwgn67S0NoYq9458FzLzAbuZeuGdTO3xrb4qnjJ8dLz0uy5oaXpkrrr4Z1WvofckeQl2sSSqU9DqTnZf@BI6VsG2aalxXGjDFdU/rFUFIFHaVZPl8U98vPUU3//wsUrNxtWnPuP0ZJmomwI8KSSOZLkc0LkeSFSOf3IlssI@Z2Wvkn8cRwj8ORrIJPIK9q5uwWyeYM29Q3WUhSraqkDpJSemqscR72Uqv2m5VD64BDRxaU5PQB7u5AaD1N4XkaH3ocEHI4SAc7LY/YgvTg/owytBdsdgZajUzbNbnAMo1m7Xv4BBBdAaPJp@mx@T2b0nRqcP5xNO0Q4PwyHHNaNUiSGNIkmT7@VG4MCy8I1ujjuR@D9SHkQTkEby1sx6aHYTRebXF2yWadHb7LpieogZfwepW9Qv3ultMY3uo8huKyLmg9XVaF7IFzftnGKkMiiMLVJ/nLBP1wZUFnf@npHw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Outputs <strong>all valid boards</strong>. Although, on TIO, I have only <code>console.log</code>ged the first 100 boards in a human-readable format. I have also, of course, displayed the number of valid boards using <code>.length</code>, 4608 in the case of the sample input.</p>
<p>Feels too long.</p>
<h2>How?</h2>
<p>The helper <code>g</code> outputs all permutations of a list. Initial call is with the list <code>[...'123456789']</code> which spreads the string out. What <code>g</code> does is self-explanatory: if n has a second element, map each element of <code>n</code> to that element plus a recursive call to <code>g</code> with the remaining elements, and otherwise return <code>n</code>.</p>
<p>Then filters based on whether the input move is at the right spot and if, for every three-character string in the split string, no three odds or evens are in a row.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 56 bytes</h1>
<pre><code>ＮθＮη⪪⁺1234⁺§⪪657576³θ98³Ｗ﹪⁻§ＫＡηθ²⟲Ｗ⁻§ＫＡηθＵＭＫＡＩ⎇‹κ3⁻χκ⁻κ²
</code></pre>
<p><a href="https://tio.run/##fY7LCsIwEEX3fkXIagIV1NhWcSWuBCtF/YHYBlKaJjVNfXx9jLVIVi5mcbhzZm4hmCk0k87tVdvbY99cuYEb2UxCFp5zUykL51ZWFnLZd4DnC7rEERpga/eq5M8xx0mcxmniQ0oidPOD1ytMPugvPUQlOYJMl73UkFUq8HPO662U4HfFqC4IQSdtmeUQyP8tgjLW7nTTMFWG6Y51Fi7cKGZecOBdB7XvRj/VvhfnswjVP6qH776zc3SydNO7fAM" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes the square number as 0-indexed but the turn number as 1-indexed (could readily be made 0-indexed though). Explanation: Excluding rotations and reflections, and assuming <code>X</code> goes first, there are only three final positions:</p>
<pre><code>XOX XOX XXO
OXX OOX OOX
OXO XXO XXO
</code></pre>
<p>It just remains to number and/or rotate and/or reflect one of these positions in such a way that the desired play appears on the desired turn.</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input the 0-indexed square and the 1-indexed turn.</p>
<pre><code>⪪⁺1234⁺§⪪657576³θ98³
</code></pre>
<p>If the turn number is even then build up the string <code>123465798</code> (corresponding to the first pattern) otherwise build up the string <code>123457698</code> (corresponding to the second pattern; I don't use the third pattern). Split it into a 3×3 square.</p>
<pre><code>Ｗ﹪⁻§ＫＡηθ²⟲
</code></pre>
<p>Rotate the square until the number under the desired square has the same parity as the desired turn.</p>
<pre><code>Ｗ⁻§ＫＡηθ
</code></pre>
<p>Repeat until the number under the desired square is the desired turn...</p>
<pre><code>ＵＭＫＡＩ⎇‹κ3⁻χκ⁻κ²
</code></pre>
<p>... cyclically shuffle <code>X</code>'s turns and (separately) <code>O</code>'s turns.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>30</s> 27 bytes</h1>
<pre><code>,UŒDḢ€;;ZḂE€Ẹ
9Œ!aƑ@Ƈs€3ÇÐḟ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/18n9Ogkl4c7Fj1qWmNtHfVwR5MrkPVw1w4uy6OTFBOPTXQ41l4MFDE@3H54wsMd8////2@gA4HGUNoAAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A pair of links that takes a mask for the answer and returns all possible solutions matching the mask as a list of lists of lists of integers.</p>
<h2>Explanation</h2>
<h3>Helper link</h3>
<p>Takes a 3x3 grid and checks if any row, column or diagonal has all odd or all even numbers</p>
<pre><code>,U            | Pair with copy of grid with each row reversed
  ŒDḢ€        | Main diagonal of each
      ;       | Concatenate to rows
       ;Z     | Concatenate to columns
         Ḃ    | Mod 2
          E€  | Check if each is all equal
            Ẹ | Any
</code></pre>
<h3>Main link</h3>
<pre><code>9Œ!           | Permutations of 1..9
   aƑ@Ƈ       | Keep those where the mask AND the permutation equals the mask
       s€3    | Split each into lists length 3
          ÇÐḟ | Keep those where the helper link is false
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, 71 bytes</h1>
<pre><code>[:(([:*/3&gt;1#.2|],|:,#:@273 84#,)&quot;2#])a 3 3&amp;$&quot;1@#~]=[{&quot;1 a=:(i.@!A.i.)@9
</code></pre>
<p><a href="https://tio.run/##DcsxC4JAGAbgvV/x5oXdxfWlZ1BdGFbQFA01isNVmkZlaCCi9Net4Rmfe2fRMIGvMYSEA/03JmyP@10Xas5DPZp4K5eRaiPZasl0oGYe5lMmhaVYJAw8ePbAcgP2jfywsVwYX/OMgv6aMhLBohO9w4ZwSvMKSVaUH7iOxDn/pDAlClPhZp4xzOuKc433w9Rx0YsvaQ4uyebLiYCyW/FfaAhTJFDofg" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>
<p>Method is straightforward and similar to other answers: Generate all 9! boards, then filter by those that have the move in the required position, then filter by cats games.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="noreferrer">05AB1E</a>, 27 bytes</h1>
<p>Takes the 0-based index as the first input and the number to place as the second input.</p>
<pre><code>9Lœʒ¹èQ}3δôʒyø«yÂ‚€Å\«É€Ëà≠
</code></pre>
<p><a href="https://tio.run/##AUwAs/9vc2FiaWX//zlMxZPKksK5w6hRfTPOtMO0ypJ5w7jCq3nDguKAmuKCrMOFXMKrw4nigqzDi8Og4omg/10xMMKjdnnCuywiIiz/MAox" rel="noreferrer" title="05AB1E – Try It Online">Try it online!</a></p>
<pre class="lang-python prettyprint-override"><code>9Lœ               # all permutations of [1 .. 9]
   ʒ¹èQ}          # keep a if a[¹] == ²
        3δô       # split each permutation in groups of 3

ʒ                 # keep grids where:
 yø«              #   concatencate the transpose to the grid
    yÂ‚           #   pair the grid and its reverse
       €Å\        #   for each: take the main diagonal; this is the main and anti-diagonal
          «       #   concatenate the diagonals to rows and columns
           É      #   each integer modulo 2
            €Ë    #   for each sublist: are all values equal
              à   #   take the maximum / is any 1?
               ≠  #   boolean negate (!= 1)
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 33 bytes</h1>
<pre><code>;s3ZFƊ;92149ṃ$s3EƇ
9Œ!ḂÇ$Ðḟ³ị=⁴ƲƇ
</code></pre>
<p><a href="https://tio.run/##AUAAv/9qZWxsef//O3MzWkbGijs5MjE0OeG5gyRzM0XGhwo5xZIh4biCw4ckw5DhuJ/Cs@G7iz3igbTGssaH////Nf8z" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Outputs <em>all</em> valid boards. This is really slow - I can't guarantee it'll complete on TIO; it seems to depend on how lucky I get with CPU allocation. I am also pretty confident this is solvable in like half the bytes.</p>
<pre><code>;s3ZFƊ;92149ṃ$s3EƇ  Helper Link; determine if a board is not tied (given a flat list of 0s and 1s)
;                   Append:
 ----Ɗ              - The list,
 s3                 - Sliced into sublists of size 3,
   Z                - Transposed,
    F               - Flattened
      ;             Append:
       92149ṃ$      92149, base decompressed into the list (index 1, 5, 0, 3, 5, 7 - where 0 is the last element)
              s3    Slice into sublists of size 3 (this now has each row, column, and diagonal)
                EƇ  Filter to keep sublists that are all equal (and thus indicate a win)
9Œ!ḂÇ$Ðḟ³ị=⁴ƲƇ      Main Link (dyad); accept x (index) and y (turn)
9Œ!                 All permutations of 9 (implicit range)
     $Ðḟ            Filter; remove all boards where
   Ḃ                % 2 (convert turn numbers to X/O)
    Ç               Call helper link (remove boards that aren't ties)
            ƲƇ      Filter to keep boards where
        ³ị          The element at index (x)
          =⁴        Equals (y)
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/229667/">229667</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




