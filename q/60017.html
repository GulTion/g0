<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::60017</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>1696</td><td>FMSLogo</td><td>231122T190854Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/266987#266987">Jan H</a></td></tr>
<tr d-ix="1"><td>056</td><td>Perl 6</td><td>151007T200443Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60020#60020">a spaghe</a></td></tr>
<tr d-ix="2"><td>184</td><td>Python</td><td>151015T003724Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60853#60853">The Fift</a></td></tr>
<tr d-ix="3"><td>168</td><td>bash / awk / cksum</td><td>151008T142039Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60087#60087">h.j.k.</a></td></tr>
<tr d-ix="4"><td>046</td><td>Pyth</td><td>151007T202105Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60023#60023">PurkkaKo</a></td></tr>
<tr d-ix="5"><td>602</td><td>Befunge98</td><td>151007T235832Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60053#60053">PurkkaKo</a></td></tr>
<tr d-ix="6"><td>053</td><td>Retina</td><td>151007T234425Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60052#60052">TheNumbe</a></td></tr>
<tr d-ix="7"><td>074</td><td>PHP</td><td>151007T203156Z</td><td><a href="https://codegolf.stackexchange.com/questions/60017/source-code-metamorphosis/60028#60028">Fabian S</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://fmslogo.sourceforge.io/manual" rel="nofollow noreferrer">FMSLogo</a>, 169.6 bytes</h1>
<p>from 212 * 0.8</p>
<pre><code>to f[:b]1
type[I am]type char 32 ifelse name? &quot;b[make &quot;b last :b
print[a caterpillar!;beautiful butterfly
](foreach[23 8 19 2][10 32 13 97][repeat ?2[ignore pop &quot;b]repeat ?1[type pop &quot;b]])][print[Batman!]]print &quot;
</code></pre>
<p>The online logo interpreters I know of do not support every logo feature this program is using. <a href="https://www.calormen.com/jslogo/#" rel="nofollow noreferrer">calormen.com</a>, for example, does not support anonymous functions. The program works on FMSLogo 8.3.2.</p>
<p>Luckily for readability, the newlines are either necessary or have no cost. The program, in caterpillar form, is a variadic function which defaults to 1 argument. Pass the program code to it by pasting it between the bars in <code>f &quot;||</code>.
It will print &quot;I am a caterpillar!&quot;, then splice together the output program from its own parts character by character by popping from the string. It will output this:</p>
<pre><code>type[I am]type char 32 print[a beautiful butterfly!]
</code></pre>
<p>I should change the <code>type char 32</code> part, but then the splicing code will look less epic.</p>
<p>In Batman form, achieved by replacing <code>to </code> with <code>;  </code>, thereby commenting out the function header, the Program will run when you load the file, and obviously not take input. For me, non-declarative code pasted into the edit window runs twice, but loading it as a file will still make it run once. To decide whether it is Batman, the program checks whether the input variable exists.</p>
</div>
<div id="pu1" class="pu"><h1>Perl 6, <s>60</s> 56 bytes</h1>
<pre><code>say &quot;I am a caterpillar!&quot;; s/\S+\!/beautiful butterfly!/
</code></pre>
<p>Requires -p to run properly; I have accounted for this in the byte count.
Sadly one of the downsides to Perl 6 is that the syntax is much more strict now...</p>
</div>
<div id="pu2" class="pu"><h1>Python - 184 bytes -20% for bonus = 147.2</h1>

<pre><code>""""""
import sys;c=sys.stdin.read();print"I am a caterpillar!";x=c[3:] if"\'''"!=c[:3] else c
print x+c[:3]
""";print"I am a beautiful butterfly!" """
''';print"I am Batman";'''
</code></pre>

<p>To print <code>I am batman</code>, replace the first three double quotes with single quotes in the input.(First line is <code>'''"""</code>)</p>
</div>
<div id="pu3" class="pu"><h1><code>bash</code> / <code>awk</code> / <code>cksum</code> - <s>179.2</s> <s>169.6</s> 168 bytes</h1>

<pre><code>awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'
</code></pre>

<p>Demo:</p>

<pre><code>$ awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'&lt;&lt;'E'
&gt; awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'
&gt; E
I am a caterpillar!
echo|awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."10"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'
$ echo|awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."10"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'
I am a beautiful butterfly!

# Batman!
$ awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'&lt;&lt;'E'
&gt; xyzawk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'
&gt; E
I am Batman!

# Invalid input
$ awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0}'&lt;&lt;'E'
&gt; awk '/^xyz/{print"I am Batman!";exit}NF{("cksum&lt;&lt;&lt;'"'"'"substr($0,100))|getline r;if(r!~/^6689751/)exit}{printf"I am a %s%."!NF"s!\n",NF?"caterpillar":"beautiful"," butterfly"}NF&amp;&amp;sub(/!NF/,10){print"echo|"$0{'
&gt; E
</code></pre>

<p>I hope the 20% applies for <em>any</em> string starting with <code>xyz</code>, otherwise the original count is <s>224</s> <s>212</s> 210 bytes (fixed the <code>"I am Batman!"</code> part).</p>

<p>Transformation done: replaces the only occurrence of the literal <code>!NF</code> with <code>10</code>, so that <code>" butterfly"</code> is <a href="https://www.gnu.org/software/gawk/manual/html_node/Format-Modifiers.html" rel="nofollow">also printed using the <code>printf</code></a>.</p>

<p>Performs a simple <code>cksum</code> on a portion (i.e. the remainder) of the source code, hence its requirement as well.</p>

<p><s>Caveat: first input must end with <code>'</code>.</s> Not so much a caveat as to suppress <em>wrong</em> input...</p>

<p>No second input is expected.</p>
</div>
<div id="pu4" class="pu"><h1>Pyth, <s>50</s> 46 bytes</h1>

<pre><code>"I am a caterpillar!"+&lt;z8"beautiful butterfly!
</code></pre>

<h2>Explanation</h2>

<pre><code>"I am a caterpillar!"        print "I am a caterpillar!"
 z&lt;8                         first 8 chars of input
+   "beautiful butterfly!    add "beautiful butterfly!" to that and print
</code></pre>

<p>The resulting source code is</p>

<pre><code>"I am a beautiful butterfly!
</code></pre>

<p>Which basically prints the text. </p>
</div>
<div id="pu5" class="pu"><h1>Befunge-98, 602 bytes</h1>
<pre><code>                                        &quot;^@&lt;&quot;v@@
                                     &quot;'I'&quot;00v&gt;00g::
                                   &quot;@v&quot;0v@@@&gt;g::a&quot;&gt;#&quot;
                                 &quot;a&quot;&gt;v@@&gt;      0g::'&quot;1&gt;                                 /
                             &quot;:\&quot;'&quot;v@&gt;            'm'&quot;00g:a                       &gt;&quot;@v$&quot;
 &quot;lufituaeb&quot;'&quot;'v00ga&quot;@v\&quot;'&quot;:'b\00v@&gt;                :'a\&quot;:*84&gt;&quot;00ga&quot;\&gt;@@@@_,#:&gt;&quot;00g:a'&lt;'&quot;
&quot;et&quot;'&quot;'va'v'&quot;:'l\00g5k:'&quot;&quot;y!&quot;&gt;&gt;v@&gt;                    g::'''&quot;&quot;ut&quot;'&quot;'&gt;a'&lt;'&quot;&quot;fr&quot;'&quot;00g3k:'&quot;&gt;
 &quot;ma&quot;00g&gt;'I~48*-~48*-+#@_&gt;:#,_@&gt;                        '&quot;aa&quot;---&quot;aa&quot;!rallipretac&quot;00g:'a\
</code></pre>
<p>Tested in PyFunge.</p>
<p>When run with a string not starting with 2 spaces (probability well over 95% when random) outputs nothing. This isn't exactly what the OP is looking for, but fits the specification.</p>
<p>When passed a string starting with 2 spaces (like itself) outputs this:</p>
<pre><code>I am a caterpillar!

---

&quot;!y&quot;       &quot;l&quot;v
v&quot;te&quot;     &quot;rf&quot;&lt;
&gt;&quot;tu&quot;'   &quot;b&quot;\v@
 v&quot;beautiful&quot;&lt;
  &gt;:#,_@@@@&gt;\
 &gt;48*:&quot;a&quot;\:$v@
  &quot;ma&quot;   v@#&gt;
   'I'   &lt;@^
</code></pre>
<p>The lower part of that, in turn, outputs:</p>
<pre><code>I am a beautiful butterfly!
</code></pre>
</div>
<div id="pu6" class="pu"><h1>Retina, 53 bytes</h1>

<pre><code>caterpillar
beautiful butterfly
^
I am a caterpillar!
</code></pre>

<p><strong>Prints out:</strong></p>

<pre><code>I am a caterpillar!beautiful butterfly
beautiful butterfly
^
I am a beautiful butterfly!
</code></pre>

<p>Notice that there is no separator between <code>I am a caterpillar!</code>  and the new program. The new program expects no input.</p>
</div>
<div id="pu7" class="pu"><h1>PHP, 74 Bytes</h1>
<pre><code>&lt;?=~¶ßž’ßžß,$s=&quot;caterpillar!&quot;,strtr($argv[1],[$s=&gt;~šžŠ‹–™Š“ßŠ‹‹š™“†Þ]);
</code></pre>
<ul>
<li><code>&lt;?=</code> is equivalent to <code>&lt;?php echo</code> and can take several comma separated values to output</li>
<li><code>¶ßž’ßžß</code> and <code>šžŠ‹–™Š“ßŠ‹‹š™“†Þ</code> are valid constant names in PHP, but because the constants do not exist are treated as string literal. <code>~</code> inverts them to <code>&quot;I am a &quot;</code> and <code>&quot;beautiful butterfly!&quot;</code> (saving a byte for one quotation mark each)</li>
<li><code>strtr</code> replaces &quot;caterpillar!&quot; with &quot;a beautiful butterfly!&quot; in the argument</li>
</ul>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/60017/">60017</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




