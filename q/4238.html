<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::4238</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>there's a lot of rules here that add many characters without changing the output much</td><td>240423T083245Z</td><td><a href="https://codegolf.stackexchange.com/questions/4238/justify-a-text-by-adding-spaces/272752#272752">guest430</a></td></tr>
<tr d-ix="1"><td>146</td><td>Ruby</td><td>111210T172609Z</td><td><a href="https://codegolf.stackexchange.com/questions/4238/justify-a-text-by-adding-spaces/4239#4239">Howard</a></td></tr>
<tr d-ix="2"><td>094</td><td>Perl</td><td>111210T185528Z</td><td><a href="https://codegolf.stackexchange.com/questions/4238/justify-a-text-by-adding-spaces/4242#4242">Ilmari K</a></td></tr>
</table>
<div id="pu0" class="pu"><p>there's a lot of rules here that add many characters without changing the output much, so I'm providing options. also, 80 seems like such an arbitrary number, so I'll also provide TIO links and bytecounts for a more general version that takes length as its first argument and does the same thing</p>
<h2><a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed 4.2.2</a> <code>-r</code>, <s>93</s> 80 bytes</h2>
<pre><code>s/.{,80}\&gt;.? /&amp;\n/g
s/(.*)\n/sed -r ':;$q;\\|^.{,80}$|s|\\&gt; \\&lt;|\&amp; |;t'&lt;&lt;&lt;'\1'/e
</code></pre>
<p><a href="https://tio.run/##NZC7jhQxEEVzvuIGqx1As92QoZ3RkkBGStZCKuyaoSS/xnatVqL5dZoyDY78KN/Haey3rc3Tz@OHd7@Wp@kj5vslzddXbX49vX1j28YeDxWHx9Pd7bQs67d99m5t67I8YVnO63KP9dQP5/P5sLw/zLxtX3LlCClNI3wOuaJJB0XuR7icGrvOXSvIS5EmTtIVHMReh53PYNEWs0fnWOy3JCdevKYO7Qj03fTBfddmRLomAgW5KU342sFJookjytg825HiETeVhpRbr2rLg1@4OunUJSdoCBRd3sXHnOUaZn9VpdgwmCx8tFh5L2FufcKnoUraGVLVwux9JaFyqfyDk@dq5e3iOQctZseWyMqCW2M4CeE/JeukuOhVqCONQChU7aB1wucXx6WzDpSGITtH7GzOaRFPffywFqVm8ZwGyAHLTJ2GQqM68uVipAmeG9fxGnMYMWgwEsPR/qHVOP3OZVBp20P9Aw" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>first wraps words to newline if longer than 80 chars; then justifies to 80 chars per line, adding at most one space between each word from right to left. if there's not enough spaces on one line it just gives up atfer adding 2 spaces everywhere. <a href="https://tio.run/##NVDLjhNBDLzzFU602peSSeC0kGi5wI0rJ4aVTLcTLPUr3e3VCsKvM9iZpQ/T9nS5XFWN/DS1xe237fr99/u74Xa4v1s08rCucNM2w@/Vw/bPOD4OH2EzXo9j2hx3bWMoq1@Byw@7Uc/V6XKdn@apq3M7W/8I9t1bfQ3nXV/u9/vlOL5dbujmUr5bLmiaHrZvvuRKEbg0ieBzyBUad8BIfQUup0auU5cK6LlwY8fpCBRYX02Iz0AsLWYPnWLRaU6OPXtJHaRDwB/KD9RnboKIx4SAgU@CA3ztQImjkkNkK561xbiCk3CDlFuv4oFeqDru2DknkBAwujwzG0hF2aYLJRcFA6Eqj6opzw50VR/gk1GidAKuokpms5ygUqn0k5Knqs71x3MOUnQdqRx1CtQageMQ/kekhgQOcmTskEwQFKzaSB3g84uj0kksR80gO4fkFOeksMduE@qi1MyekqVoSelSJ6Gg@YZ8OGjMCJ4aVXuNOZgMtIBY42ivuUoc/uZiqbRpXX/9Aw" rel="nofollow noreferrer">general case, <s>145</s> 131 bytes</a></p>
<h2><a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed 4.2.2</a> <code>-r</code>, <s>147</s> 136 bytes</h2>
<pre><code>s/.{,80}\&gt;.? /&amp;\n/g
s/(.*)\n/sed -r ':;$q;\\@^.{,80}$@s@.*@sed -r &quot;s%(,|\\\\.) \\\\&lt;%\\\&amp; %;t;s%\\\\&gt; \\\\&lt;%\\\&amp; %&quot;&lt;&lt;&lt;&quot;\&amp;&quot;@e;t'&lt;&lt;&lt;'\1'/e
</code></pre>
<p><a href="https://tio.run/##VZBPbxMxEMXvfIqnqEnaKt3QG2Kjsge4ceW2QjL2JIzkf7E9VSXgq7OM2XJgD96xPX7z3q@SW5Z6HH4c3r39NT8NH3DczfF4eVOPt8P9nZaVHB4K9u/Hm@s4z9PXtfdmqtNwP73ebur29vBz1m@4Q/@dtrrssB3bWHs5P/13vDmdTpt5t5lobHut9/Pj/kjL8jkVCuBcJcAlnwoqN5hA7QCbYiXbqEmBcZy5suV4AXnW227EJRBLDcmhUcj6mqNlx05igzR48031QW3VJgRziQbG81XMgC8NFDmoOAL34lm3JhxwFa6IqbYiDvRCxXIzjVOEeG@CTatyb1JTfdJfSc7aDDLqPKintCbQUW3Axy4JI43ARdTKmpYjCuVC3yk6KhpdD56Tl6zzSP1oVFCtBMve/2OkiQRnubBpiN0Rsim6kTLg04ul3Eg6SIWQrDVktc9KZmdaf6ExcknsKHaMHZUOteKz6cGRzmflbOCoUum3Ifluw3RCrDzqK1gJw@@UO5a6PJQ/" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>this one prefers adding after periods or commas first, then does the same as the last one <a href="https://tio.run/##bVDLjhMxELzzFZ3RZvNQMhP2tDDRMge4ceWEQfLandCSX/FjteLx6wztmeSGL@62q6urKqEex7RYfz3s333bbtp1u90sEmrYR1ilrv21ezz8EeKp/QCduBfCdec@dRVV6xtQiNXqfX936QWf4fs8dTekod0OV0yTluvdb3E97QZu5XF5Le5h2ec@3Vrx9F9Iczwem1o2A/Z52swv0y3E2@nucDWBHpoFjuPj4c1nH9EChVQsaG98hEQZpMW8A@VdQpUxlwhSU6BEitwZ0BD/VvHaA1JJ1mvIaANPk1OkSReXoWQw8pn5AfPMjWDl2UmQhi5FtvAlAzqyTA6WavHCrbQ7uBRK4HzKsWjAV4yKsszkHRRjpFV@Zq4gFlU3TZQUGAwoWbllTX52wKtyCx8rJciSESgWljK7JQcRQ8Qf6DRGts4PL96UwPuQ9bBVwJQQFBlzy4gdFTiVM8kMriqCICM3Jbbw6VVhyFhqkByCV0qiYpwqgbTMdYJthOhJo6sx1qh4qSomyGoc/OnEOUvQmDDWX@tNlSFrQsR5pGuwxbZ/faixpHEff/4D" rel="nofollow noreferrer">general case, <s>227</s>219 bytes</a></p>
<h1><a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed 4.2.2</a>, <s>214</s> 211 bytes</h1>
<pre><code>s/.{,80}\&gt;.? /&amp;\n/g
s/(.*)\n/sed -r ':;$q;G;\\@^.{,80}\\n@s@(.*)\\n(.*)@sed -r &quot;s%(,|\\\\.) \\\\&lt;%\\\&amp; %;t;s%( [^ ]\\2 )([^ ])%\\\\1 \\\\2%;t;i#&quot;&lt;&lt;&lt;&quot;\\1&quot;@e;\\@#@{s@..@@;x;s@^@[^ ]@;x};t;s@\\n.*@@;x;z;x'&lt;&lt;&lt;'\1'/e
</code></pre>
<p><a href="https://tio.run/##NVBNb1MxELzzK1YpaZIqfaE9IV4EPoC4cOWEG8nYm7CSv@KPKqL0r/PYTcI7PK@9s7MzU9FNU90ML@v37171x@ETbG513Bze1M1yuFtxWdHBfYHFh/Htcfw6aq12V7SOqqozSkc51BU6q/Pl@o/mb1iBHNs5/25hPraRW/BjB09aP8JqKdVKmvrhDHwUCN3MttvtjN9mCmXfjXqpahiUGk9jVTslU1y/Cp3i3cPdufV7PC14cKEfFhucpm@pYADKtQdwyacClRqYgG0NNsWKtmHrBYyjTJUsxQOgJ@6KDZcAqdeQHDQMmacpWnLkemzQG3jzk/kB24UbIZhDNGA8HbsZ4HsDjBSYHAJJ8cxXE9Zw7FQhptpKd4AnLJaaaZQidO9NsOnCLCAWJZvOlJQZDGhYeWBN6eKAV7UBPgul6Q2BSmclF7MUoWAu@Aujw8LO@eE5@Z55HbIcdgpYK4Il7/9HxIY67PuBTIMogiCbwpdeBvhyspgbdsmRM0jWGrSMsz2TM00m2EUuiRxGSVGS4qW2@2zEN6T9nmM24LBikW5IXmQYCYg4jnrNtYfhb8qSSp3uyz8" rel="nofollow noreferrer" title="sed 4.2.2 – Try It Online">Try it online!</a></p>
<p>finally, this one prefers commas and periods, then adds spaces after the shortest word from left to right. if a line needs more than two spaces after a word, it gets stuck in a loop. <a href="https://tio.run/##PVDLjhMxELzzFZ0s2TyUOCGnhYnABxAXrpx2NpKxO6Gl8SN@rKJd9tcJ7ZkEX9x2V1dXVUJzuaTR7HGz@vi0mIuZWMxHCQ2sIkzTWrwuHzZvbftZfIF1e9@2bn1s0rqian0Dtu10@ql5f2q@Ny0fub/NMUgmOcC5roW8Do3TZLb8016PmMOt3E2uxT1MmtwwDB738FR/tjCf1Xp@g7Qf/o9tK5juxrvdbtx3xhIHNXfyNUkhpGzOTZJ7WRm4fqvkstclFn3zpTn3Vpiiv5mkv9c47Vm34xFeLg@bdz98RAsUUrFgfOcjJMqgLOYlaO8S6oy5RFCGAiXS5I6AHXG3mjcekEqy3kBGG3ianCZDprgMJUOnfjE/YB64Eaw6OgWqo1NRAn5mQEeWycFSLZ75qewSToUSOJ9yLAbwjFFTVpm8g9J1ymo/MFcQi6qbekoKDAZUrNyyJj844FVZwNdKCapkBIqFpQxuyUHEEPE3OoORrfPHs@9K4H3IetgqYEoImrrulhE7KnAoR1IZXFUEQUV@lCjg21ljyFhqkByC11qhZpwugYzKdYJthOjJoKsx1qh4qS5dUNU4@MOBc1ZgMGGsXeu7KkPVhIjzSNdgixV/faixpMsqvvwD" rel="nofollow noreferrer">general case, <s>304</s> 300 bytes</a></p>
</div>
<div id="pu1" class="pu"><h3>Ruby, 146 characters</h3>
<pre><code>$&gt;&lt;&lt;gets.gsub(/(.{,80})( |$)/){$2&gt;&quot;&quot;?(s=$1+$/;(['\.',?,]+(1..80).map{|l|&quot;\\b\\w{#{l}}&quot;}).any?{|x|s.sub! /#{x} (?=\w)/,'\&amp; '}while s.size&lt;81;s):$1}
</code></pre>
<p>It prints exactly the desired output (see below) if the given text is fed into STDIN.</p>
<pre><code>Lorem ipsum dolor sit amet,  consectetur adipisicing elit, sed do eiusmod tempor
incididunt ut  labore et  dolore magna aliqua.  Ut  enim ad  minim veniam,  quis
nostrud exercitation ullamco laboris nisi ut  aliquip ex  ea  commodo consequat.
Duis aute irure dolor in  reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur.  Excepteur sint occaecat cupidatat non proident,  sunt in
culpa qui officia deserunt mollit anim id est laborum.
</code></pre>
<p><em>Edit:</em> Just after submitting my first solution I saw in the comments that it is required that any input string can be processed. The previous answer was only 95 characters but did not fulfill this requirement:</p>
<pre><code>r=gets.split;l=0;'49231227217b6'.chars{|s|r[l+=s.hex]+=' '};(r*' ').gsub(/(.{,80}) ?/){puts $1}
</code></pre>
</div>
<div id="pu2" class="pu"><h2>Perl, 94 chars</h2>
<pre><code>for(/(.{0,80}\s)/g){$i=1;$i+=!s/^(.*?\.|.*?,|(.*? )??\S{$i}) \b/$1  /until/
|.{81}/;chop;say}
</code></pre>
<p>Run with <code>perl -nM5.01</code>.  (The <code>n</code> is included in the character count.)</p>
<p>The code above is the shortest I could make that could handle <em>any</em> curveballs I threw at it (such as one-letter words at the beginning of a line, input lines exactly 80 chars long, etc.) exactly according to spec:</p>
<pre><code>Lorem ipsum dolor sit amet,  consectetur adipisicing elit, sed do eiusmod tempor
incididunt ut  labore et  dolore magna aliqua.  Ut  enim ad  minim veniam,  quis
nostrud exercitation ullamco laboris nisi ut  aliquip ex  ea  commodo consequat.
Duis aute irure dolor in  reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur.  Excepteur sint occaecat cupidatat non proident,  sunt in
culpa qui officia deserunt mollit anim id est laborum.

I'm  tempted to  provide a  php  program which consists of  the output text. ;-)
Seriously though,  the spaces on the second line of the output text seem to have
been added to  the spaces at  random? Is  there some pattern to  it that I'm not
seeing,  and if  not,  how can we be expected to produce exactly that output for
the given input?
</code></pre>
<p>(With apologies to Gareth for using his comment as additional test input.)</p>
<p>The following 75-char version works well enough to produce the sample output from the sample input, but can fail for other inputs.  Also, it leaves an extra space character at the end of each the output line.</p>
<pre><code>for(/(.{0,80}\s)/g){s/(.*?\.|.*?,|.*? ..) \b/$1  /until/.{81}/||s/
//;say}
</code></pre>
<p>Both versions will loop forever if they encounter input that they can't justify correctly.  (In the longer version, replacing <code>until</code> with <code>until$i&gt;80||</code> would fix that at the cost of seven extra chars.)</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/4238/">4238</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




