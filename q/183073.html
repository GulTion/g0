<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::183073</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>025</td><td>Perl 5 Minteger p</td><td>240307T031445Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/271598#271598">Xcali</a></td></tr>
<tr d-ix="1"><td>046</td><td>Excel VBA</td><td>190412T170341Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183098#183098">willuwon</a></td></tr>
<tr d-ix="2"><td>006</td><td>Thunno 2 s</td><td>230630T155417Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/262323#262323">The Thon</a></td></tr>
<tr d-ix="3"><td>010</td><td>Vyxal</td><td>210508T125930Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/225292#225292">emanresu</a></td></tr>
<tr d-ix="4"><td>016</td><td>Ly</td><td>210623T022421Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/230343#230343">cnamejj</a></td></tr>
<tr d-ix="5"><td>4010</td><td>MMIX</td><td>210508T173853Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/225298#225298">NoLonger</a></td></tr>
<tr d-ix="6"><td>051</td><td>VTL2</td><td>190504T194818Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/185170#185170">brhfl</a></td></tr>
<tr d-ix="7"><td>063</td><td>Clojure</td><td>190424T235325Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/184718#184718">clismiqu</a></td></tr>
<tr d-ix="8"><td>030</td><td>Octave/MATLAB with Statistics Package/Toolbox</td><td>190422T144823Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183582#183582">Luis Men</a></td></tr>
<tr d-ix="9"><td>144</td><td>C# .NET Core</td><td>190417T082150Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183376#183376">Stackstu</a></td></tr>
<tr d-ix="10"><td>038</td><td>Funky</td><td>190418T023638Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183427#183427">ATaco</a></td></tr>
<tr d-ix="11"><td>078</td><td>Haskell</td><td>190412T174134Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183105#183105">bugs</a></td></tr>
<tr d-ix="12"><td>043</td><td>Excel pure</td><td>190415T232458Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183265#183265">Sophia L</a></td></tr>
<tr d-ix="13"><td>030</td><td>JavaScript ES6</td><td>190412T143409Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183082#183082">Arnauld</a></td></tr>
<tr d-ix="14"><td>019</td><td>CJam</td><td>190415T170544Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183239#183239">lolad</a></td></tr>
<tr d-ix="15"><td>036</td><td>AnyDice</td><td>190415T095358Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183211#183211">Taemyr</a></td></tr>
<tr d-ix="16"><td>061</td><td>Java JDK</td><td>190415T095118Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183210#183210">Olivier </a></td></tr>
<tr d-ix="17"><td>028</td><td>Ruby</td><td>190415T081128Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183208#183208">G B</a></td></tr>
<tr d-ix="18"><td>039</td><td>R</td><td>190412T151556Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183087#183087">Robin Ry</a></td></tr>
<tr d-ix="19"><td>032</td><td>C gcc</td><td>190412T164011Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183096#183096">Giacomo </a></td></tr>
<tr d-ix="20"><td>011</td><td>J</td><td>190412T142105Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183077#183077">Conor O&</a></td></tr>
<tr d-ix="21"><td>012</td><td>Japt</td><td>190413T195455Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183143#183143">Shaggy</a></td></tr>
<tr d-ix="22"><td>083</td><td>F#</td><td>190413T204228Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183145#183145">Ciaran_M</a></td></tr>
<tr d-ix="23"><td>041</td><td>SmileBASIC</td><td>190413T190308Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183142#183142">12Me21</a></td></tr>
<tr d-ix="24"><td>061</td><td>Python 2</td><td>190412T153355Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183091#183091">ArBo</a></td></tr>
<tr d-ix="25"><td>007</td><td>Jelly</td><td>190413T175332Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183140#183140">Jonathan</a></td></tr>
<tr d-ix="26"><td>013</td><td>Japt</td><td>190413T052617Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183129#183129">dana</a></td></tr>
<tr d-ix="27"><td>010</td><td>05AB1E</td><td>190413T125330Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183135#183135">Kevin Cr</a></td></tr>
<tr d-ix="28"><td>043</td><td>PowerShell</td><td>190413T111107Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183134#183134">mazzy</a></td></tr>
<tr d-ix="29"><td>017</td><td>x86 Machine Code for Intel Ivy Bridge and later</td><td>190412T192754Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183113#183113">Cody Gra</a></td></tr>
<tr d-ix="30"><td>049</td><td>SmileBASIC 3</td><td>190413T071344Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183132#183132">snail_</a></td></tr>
<tr d-ix="31"><td>025</td><td>Perl 6</td><td>190413T043703Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183128#183128">Jo King</a></td></tr>
<tr d-ix="32"><td>053</td><td>Python 2</td><td>190413T023912Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183126#183126">xnor</a></td></tr>
<tr d-ix="33"><td>076</td><td>Haskell</td><td>190412T170705Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183100#183100">dfeuer</a></td></tr>
<tr d-ix="34"><td>014</td><td>APL Dyalog Unicode</td><td>190413T003405Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183123#183123">ngn</a></td></tr>
<tr d-ix="35"><td>023</td><td>TIBASIC</td><td>190412T151930Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183089#183089">absolute</a></td></tr>
<tr d-ix="36"><td>007</td><td>Jelly</td><td>190412T234638Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183122#183122">dylnan</a></td></tr>
<tr d-ix="37"><td>072</td><td>Python 3</td><td>190412T142101Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183076#183076">Miriam</a></td></tr>
<tr d-ix="38"><td>060</td><td>C# Visual C# Interactive Compiler</td><td>190412T191146Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183110#183110">Gymhgy</a></td></tr>
<tr d-ix="39"><td>011</td><td>Pyth</td><td>190412T143313Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183081#183081">Maltysen</a></td></tr>
<tr d-ix="40"><td>009</td><td>Jelly</td><td>190412T192524Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183112#183112">Nick Ken</a></td></tr>
<tr d-ix="41"><td>070</td><td>Batch</td><td>190412T185035Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183109#183109">Neil</a></td></tr>
<tr d-ix="42"><td>017</td><td>Charcoal</td><td>190412T184708Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183108#183108">Neil</a></td></tr>
<tr d-ix="43"><td>072</td><td>Forth gforth</td><td>190412T143702Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183084#183084">reffu</a></td></tr>
<tr d-ix="44"><td>049</td><td>PowerShell</td><td>190412T174602Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183106#183106">AdmBorkB</a></td></tr>
<tr d-ix="45"><td>080</td><td>Python 3</td><td>190412T173705Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183104#183104">Delya Er</a></td></tr>
<tr d-ix="46"><td>026</td><td>Perl 6</td><td>190412T173336Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183103#183103">bb94</a></td></tr>
<tr d-ix="47"><td>035</td><td>Ruby</td><td>190412T170621Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183099#183099">Reinstat</a></td></tr>
<tr d-ix="48"><td>030</td><td>Attache</td><td>190412T165110Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183097#183097">Conor O&</a></td></tr>
<tr d-ix="49"><td>042</td><td>R</td><td>190412T141200Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183074#183074">Giuseppe</a></td></tr>
<tr d-ix="50"><td>090</td><td>><></td><td>190412T162808Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183095#183095">Conor O&</a></td></tr>
<tr d-ix="51"><td>080</td><td>Python 3</td><td>190412T160702Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183093#183093">Lynn</a></td></tr>
<tr d-ix="52"><td>026</td><td>Perl 6</td><td>190412T141704Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183075#183075">nwellnho</a></td></tr>
<tr d-ix="53"><td>050</td><td>Wolfram Language Mathematica</td><td>190412T145507Z</td><td><a href="https://codegolf.stackexchange.com/questions/183073/simulating-exploding-dice/183086#183086">ZaMoC</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-Minteger -p</code>, 25 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>1until($\+=1+rand$_)%$_}{
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/9@wNK8kM0dDJUbb1lC7KDEvRSVeU1Ulvrb6/3@Tf/kFJZn5ecX/dX1N9QwMDYB0Zl5Janpq0X/dAgA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Excel VBA, 46 bytes</h1>
<p>Thanks to @TaylorRaine</p>
<pre><code>Do:v=-Int(-[A1]*Rnd):t=t+v:Loop While[A1]=v:?t
</code></pre>
<p>Executed in the command window.</p>
<p>As a user-defined function.</p>
<h1>Excel VBA, <s>108</s> 67 bytes</h1>
<pre><code>Function z(i)
Do
v=Int((i*Rnd)+1)
z=z+v
Loop While v=i
End Function
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Thunno/Thunno2" rel="nofollow noreferrer">Thunno 2</a> <code>s</code>, 6 <a href="https://github.com/Thunno/Thunno2/blob/main/docs/codepage.md" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>($=;$ɼ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m728JKM0Ly_faGm0UrFS7IKlpSVpuhbLNVRsrVVO7llSnJRcDBVbsNAEwgAA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h4>Explanation</h4>
<pre class="lang-python prettyprint-override"><code>($=;$ɼ  # Implicit input
(       # (while)  
 $=     #   equals input
   ;    # (do)
    $ɼ  #   random item from [1..input]
        # Implicit output of summed stack
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Lyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, <s>25</s>  10 bytes</h1>
<pre><code>λ?:ɾ℅~=[x+
</code></pre>
<p><a href="https://lyxal.pythonanywhere.com?flags=&amp;code=%CE%BB%3F%3A%C9%BE%E2%84%85%7E%3D%5Bx%2B&amp;inputs=4&amp;header=&amp;footer=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>-15 thanks to Aaron Miller. This is a fully functional program as lambdas are automatically called at the end.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/LyricLy/Ly" rel="nofollow noreferrer">Ly</a>, 16 bytes</h1>
<pre><code>00ns[p+1l?l=]p+u
</code></pre>
<p><a href="https://tio.run/##y6n8/9/AIK84ukDbMMc@xza2QLv0/38zAA" rel="nofollow noreferrer" title="Ly – Try It Online">Try it online!</a></p>
<p>This one is pretty much a direct translations of the rules of the challenge.</p>
<pre><code>00n              # Push &quot;0&quot;, &quot;0&quot; and the input number on the stack
   s             # Save the input number in the backup cell
    [       ]    # Loop, quits when the random number doesn't match the die size
     p+          # Delete loop iterator check, add the remain two entries
                 # (The stack holds the accumulated value and the last roll)
       1l?       # Generate a random number between 1 and die size, inclusive
          l=     # Compare the random roll to the saved die size
             p+u # Add the last role and print as a number
</code></pre>
</div>
<div id="pu5" class="pu"><h1>MMIX, 40 bytes (10 instrs)</h1>
<p>Assumes <code>TRAP 82,78,71</code>¹ gets a randomly-generated <code>uint64_t</code>, by some method the OS knows about, but we don't have to.</p>
<p>(jxd -T)</p>
<pre><code>00000000: e3010000 f7010000 00524e47 1effff00  ẉ¢¡¡ẋ¢¡¡¡RNGœ””¡
00000010: feff0006 220101ff 22010100 43fffffb  “”¡©&quot;¢¢”&quot;¢¢¡C””»
00000020: 26000100 f8010000                    &amp;¡¢¡ẏ¢¡¡
</code></pre>
<p>Disassembled:</p>
<pre><code>expl    SETL $1,0
        PUT  rD,0
0H      TRAP 82,78,71       // loop: tmp = sysrand()
        DIVU $255,$255,0
        GET  $255,rR        // tmp = tmp % n
        ADDU $1,$1,$255
        ADDU $1,$1,$0       // t += tmp + n
        BZ   $255,0B        // if(!tmp) goto loop
        SUBU $0,$1,$0
        POP  1,0            // return t - n
</code></pre>
<p>The main hack here is to treat every roll as being in the range <span class="math-container">\$[n,2n-1]\$</span>, then subtracting <span class="math-container">\$n\$</span> once after everything is over.</p>
<p>¹ Yes, those numbers were carefully picked.</p>
</div>
<div id="pu6" class="pu"><h2>VTL-2, <s>54</s> <s>53</s> 51 bytes</h2>

<pre><code>1 A=?
2 C=C+B
3 B='/A*0+%+1
4 #=B=A*2
5 ?=C+B
</code></pre>

<p>Line 1 takes input into variable A, this will be our die's sidedness. Line 2 does what it appears to, though it's important to note that in VTL-2, referencing a variable that hasn't been initialized assumes 0, so for the first pass, this is <code>C=0+0</code>. Line 3 divides a random number by our dice sides (<code>'</code> is the system variable for a random number) and then turns this into a roll - <code>%</code> is the remainder of the last division operation; add 1 and put this in B. Line 4 is a little cryptic: <code>B=A</code> is evaluated first. It evaluates to 1 if the two are equal (if our die roll is the same as its number of sides), otherwise it evaluates to 0. This result is multiplied by two (<code>*2</code>), and then the final value here is handed to <code>#=</code>, which is equivalent to a GOTO. If this is given a zero, it ignores it; otherwise we GOTO 2, adding the roll to the total and rolling again. Line 6 prints the total of C+B.</p>

<p>Had an epiphany right after posting this, and golfed off one byte. I was doing <code>3 B='/A</code> and <code>4 B=%+1</code> because <code>%</code> is a system variable with the remainder of the last division operation; you need to do a division operation to get that value. But it occurred to me that I could do the division and then multiply that by zero since I don't need it. But since I've done it, the remainder is now in <code>%</code> and so I can add that to the zero I just made, and add 1 to get the die roll. This is long, but still shorter than two lines - line numbers always take two bytes in VTL-2, plus a space to separate the line number, plus a CR.</p>

<p>Second edit, did my math wildly wrong on byte count both times. Eesh. Third, golfed off two leftover parens. </p>
</div>
<div id="pu7" class="pu"><h1>Clojure, 63 bytes</h1>

<pre><code>#(loop[n 0](let[r(+ n(rand-int %)1)](if(&lt;(- r n)%)r(recur r))))
</code></pre>

<p>A naive solution to the problem.</p>

<p>Expanded:</p>

<pre><code>(defn exploding-die [sides]
  (loop [total 0]
    (let [new-total (+ total (rand-int sides) 1)]
      (if (&lt; (- new-total total) sides) new-total
        (recur new-total)))))
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>/MATLAB with Statistics Package/Toolbox, 30 bytes</h1>



<pre class="lang-matlab prettyprint-override"><code>@(n)geornd(1-1/n)*n+randi(n-1)
</code></pre>

<p><a href="https://tio.run/##TY5BasMwEEX3PsVsSkdN4iJoNwmGniB3UKRxEZFGZkYqbS/vyFmEbP/7PF7x1f3QOk/jOK5fyOabinBAe7DvbN54J45DRD5YszJM8HGCFwiRQOM/DdoXS5/bxi1fSKDMoC4viXSQDs/ujHavZnssQi6l4l0lENKW6jAXgevmOGo/aMwtbVShxtwNAIJX0/ncw07Pjx4FWos8TMRhCFEX1JZRxtdpQnvM7hfFmD1YY@7ZuiT395RavG8ixJ50vQE" rel="nofollow noreferrer" title="Octave – Try It Online"><strong>Try it online!</strong></a></p>

<h3>How it works</h3>

<p>This is an anonymous function which takes <code>n</code> as input and produces a number obtained as follows. The function generates a geometric random variable with parameter <code>1-1/n</code> (this models the number of rolls that produce <code>n</code>), multiplies by <code>n</code>, and adds a random variable uniformly distributed from <code>1</code> to <code>n-1</code> (this models the last roll).</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.microsoft.com/net/core/platform" rel="nofollow noreferrer">C# (.NET Core)</a>, <s>155 153 145</s> 144 bytes</h1>



<pre class="lang-cs prettyprint-override"><code>using C=System.Console;class A{static void Main(){int i=int.Parse(C.ReadLine()),j=0;while((j+=new System.Random().Next(i)+1)%i&lt;1){}C.Write(j);}}
</code></pre>

<p><a href="https://tio.run/##LcyxCsIwEADQX8ki3FENdhNqBsmqInVwDumhV9IEetEqpd8eHVze@LxsfBqplKdwvCtrrh/JNGiboqRAjQ9ORB1myS6zV6/EnTo5joAzx6zY/NQXNwqB1S257siRAHHdm20zPTgQQF@ZSJP6z62LXRoA9ZneGRirGle8r3FerL6NnAl6bJallN0X" rel="nofollow noreferrer" title="C# (.NET Core) – Try It Online">Try it online!</a></p>

<p>This code instantiates a new RNG every time, but that uses time as a seed anyway so it <em>should</em> still satisfy randomness requirements.</p>

<p>I wonder if console input is cheaper in the long run.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/TehFlaminTaco/Funky" rel="nofollow noreferrer">Funky</a>, 38 bytes</h1>

<pre><code>f=n=&gt;ifn==x=math.random(n)f(n)+x elsex
</code></pre>

<p><a href="https://tio.run/##NcpBCsIwEEDRtTnFLBMMUouICONFQqDBZHDQTiVWiZSePVbBxV88@PSU67tWQsETkyAW7MN42eQgcei1GFpaF0i3Ryr1FTJEPidAmHYWDhb2FrbNUmuhbWZFQwaOwPLbJrW6Z5ZRd9F97Th6fwRH@i/jO6Pm@gE" rel="nofollow noreferrer" title="Funky – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>94</s> <s>81</s> 78 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>import System.Random
f n=do i&lt;-randomRIO(1,n);last$((i+)&lt;$&gt;f n):[return i|i&lt;n]
</code></pre>

<p><a href="https://tio.run/##HcqxCsIwFAXQvV9xhwwNWkHcYtq9U6GO4hBIig@Tl/IaB8F/j8X1cJ5ue4UYa6W0Zim4fbYS0ml27HNqFnDvM8h28od5nNrzkfU1uq2otqWDtmrYlzZ3CeUtDPqS5UdNjhg9fG4Age2w4AJjME4Yuey4CnGBgtQf" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<hr>

<p><a href="https://tio.run/##HcuxCsMgFAXQPV9xhwwJbQqlW2qyOwXSLxBU8qg@w9MO/XorXQ@cw@S3C6FWimeSgtc3Fxdvu2GbYufBi00gNckfdr0N9yuPT/INGeVwDHHlIwyCC9kNdBlVv7ZYoyHGAps6QKAmeDwwz9AbNJeGpxAX9JD6Aw" rel="nofollow noreferrer" title="Haskell – Try It Online">Original</a></p>

<p>Quite similar to @dfeuer's, but using <code>do</code> notation.</p>

<ul>
<li>-13 bytes by removing whitespace, thanks to <a href="https://codegolf.stackexchange.com/users/38603/dfeuer">@dfeuer</a></li>
<li>-3 bytes thanks to <a href="https://codegolf.stackexchange.com/a/96371/86524">this</a></li>
</ul>
</div>
<div id="pu12" class="pu"><h1>Excel (pure), 43 bytes</h1>
<pre><code>=A1*INT(-LOG(RAND(),A1))-INT(RAND()*(1-A1))
</code></pre>
<p>Takes input from A1, outputs in the cell you put this formula.</p>
<h1>Explanation</h1>
<p>This uses the observation from Robin Ryder's R solution that the requested distribution is the sum of <code>n</code> times a <code>Geom(1-1/n)</code> and an independent <code>Uniform(1..n-1)</code> distribution. The clever bit is that</p>
<pre><code>INT(-LOG(RAND(),A1))
</code></pre>
<p>uses a logarithm to scale a <code>Uniform(0,1)</code> distribution exactly to the desired geometric distribution: for instance, with A1=6, the <code>LOG</code> maps the interval <code>(1/6,1)</code> to the interval <code>(-1,0)</code>, the interval <code>(1/36,1/6)</code> to the interval <code>(-2, -1)</code>, and so on. I also save a <code>+1</code> on the uniform distribution by scaling a random number &quot;backwards&quot; to <code>(1-A1, 0)</code>, then subtracting the floor of this negative number.</p>
</div>
<div id="pu13" class="pu"><h1>JavaScript (ES6), <s> 39 </s> 30 bytes</h1>
<p><em>Saved 9 bytes thanks to @tsh!</em></p>

<pre class="lang-javascript prettyprint-override"><code>f=n=&gt;Math.random()*n|0||n+f(n)
</code></pre>
<p><a href="https://tio.run/##y0osSyxOLsosKNHNy09J/f8/zTbP1s43sSRDrygxLyU/V0NTK6/GoKYmTztNI0/zf3J@XnF@TqpeTn66RpqGmabmfwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> or <a href="https://tio.run/##NYxBDsIgEEX3nGKWILapia4Qb@AJmi5IC1pTZwwQN6W9OqKNq//y8/Ie5m1C78dXrJAGm7PTqC9XE@@1NzjQk4sdpiYllI6jyI48D9FE0DAvexij9QUbtdEZDva0sZQCZgbwlVtvQ7EcP4qubLX@z06xhfWEgSZbT3T7pYXKHw" rel="nofollow noreferrer">See the distribution for n=4</a></p>
</div>
<div id="pu14" class="pu"><h1><a href="https://sourceforge.net/p/cjam" rel="nofollow noreferrer">CJam</a>, 19 bytes</h1>

<pre><code>qi{__mr)_T+:T;=}g;T
</code></pre>

<p>Explanation:</p>

<pre><code>T is pre-set to 0

qi{__mr)_T+:T;=}g;T - whole code
qi                  - read input as integer (n) | Stack: n
  {            }    - block
   __               - Duplicate twice | Stack: n n n
     mr)            - Choose a random number from 1 to n (r). Since 'mr' picks a
                      number from 0 to n-1, the number has to be incremented with ')' 
                      Stack: n n r
        _           - Duplicate |  Stack: n n r r
         T          - push T | Stack: n n r r T
          +         - add the random number to T (t) | Stack: n n r t
           :T;      - pop the value and store in T | Stack: n n r
              =     - are the top two stack values the same (c) | Stack: n c
               }
                g   - do while loop that pops the condition from the stack after each
                      iteration | Stack: n
                 ;  - pop the top stack element and discard | Stack: T
                  T - push T | Stack: T
                    - implicit output
</code></pre>

<p>Or in pseudocode:</p>

<pre><code>input n
var sum = 0
do {
    var random_number = pick random number from 1 to n
    sum = sum + random_number
} while (random_number == n)
output n
</code></pre>

<p>As a flowchart:</p>

<p><a href="https://i.stack.imgur.com/QsXjq.jpg" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/QsXjq.jpg" alt="Flowchart of code"></a></p>

<p><a href="https://tio.run/##S85KzP3/vzCzOj4@t0gzPkTbKsTatjbdOuT/fxMA" rel="nofollow noreferrer" title="CJam – Try It Online">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://anydice.com/" rel="nofollow noreferrer">AnyDice</a>, 36 bytes</h1>

<p>Almost a built-in in the language:</p>

<pre><code>function:f I:n{result: [explode dI]}
</code></pre>

<p>For this to be correct I have to abuse the infinite recursion depth assumption.
AnyDice limits the recursion depth with a global property maximum function depth.
the explode builtin however uses it's own; explode depth - which defaults to 2.</p>

<pre><code>set "explode depth" to 99
</code></pre>

<p>Would add another 25 bytes; and would not really match the requirements since it's theoretically possible for a dice to explode more than 99 times.</p>

<p>The output of the function is a die, ie. an AnyDice built-in type that is a paring of results and probabilities for the result.</p>
</div>
<div id="pu16" class="pu"><h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK)</a>, 61 bytes</h1>



<pre class="lang-java prettyprint-override"><code>int f(int n){int r=1;r+=Math.random()*n;return r&lt;n?r:r+f(n);}
</code></pre>

<p><a href="https://tio.run/##ZVDLbsIwELznK1ZISDYBK0E9EWjVD0A9cESocpM4mCZ2tHaoEMq3p47DI1UPXntnvDNjn/iZL07ZdyerWqOFk@tZY2XJZknwDxONSq3UqifTkhsDWy4VXAMAY7mVaSeVBUH6qui133ATJxhuttweGXKV6YrQmUowtw0qwLV6wxWGgiiatB1A3XyVMr2pwVnLDCpnQXYWpSr2B@BYGOocnSWAM3AQ6rI0sAGV/3hkGR0STwuNPop0ZJS4bQ3xZxRF/XJtGFIf/abkddxNQV5ococFEA@/Di6szFVhj7CA@DkLjwTviPxiWKrry4fwg2buyTB@SLbBaGbf10MYDmR7Tw1klMdF9af1nwgDOH7C7mJsXjHdWFa7z7KCTKbLbAXTbKomQ4z52JU@Tdug7X4B" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 28 bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>f=-&gt;n{(a=rand n)&gt;0?a:n+f[n]}
</code></pre>

<p><a href="https://tio.run/##KypNqvz/P81W1y6vWiPRtigxL0UhT9POwD7RKk87LTovtvZ/QWlJsUJatHHsfwA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu18" class="pu"><h1><a href="https://www.r-project.org/" rel="noreferrer">R</a>, 39 bytes</h1>



<pre class="lang-r prettyprint-override"><code>n=scan();n*rgeom(1,1-1/n)+sample(n-1,1)
</code></pre>

<p><a href="https://tio.run/##RchBCoAgEADAe6/ouFtKCHUKH2OyhmBbqEEQvd3s1HEmFqfdyTb7neESyRr@jRfehfWXgDN3caV9AyWUVANjn8x2BAKWdbA8TTZLZaQjeGsygaJJtA5GRGzKCw" rel="noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>Explanation: this solution avoids recursion/while loops by directly calculating the distribution of the number of explosions that will occur. Let <span class="math-container">\$n\$</span> be the number of sides on the die. If you denote success as rolling an <span class="math-container">\$n\$</span> and failure as rolling anything else, then you have probability <span class="math-container">\$\frac1n\$</span> of success. The total number of explosions is the number of successes before the first failure. This corresponds to a <span class="math-container">\$\mathrm{Geometric}\left(1-\frac{1}{n}\right)\$</span> distribution (see the <a href="https://en.wikipedia.org/wiki/Geometric_distribution" rel="noreferrer">wikipedia page</a>, which defines success and failure the other way round). Each explosion brings <span class="math-container">\$n\$</span> to the total. The final roll follows a <span class="math-container">\$\mathrm{Uniform}(1,2,\ldots,n-1)\$</span> distribution which we add to the total.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <s>36</s> 32 bytes</h1>

<p><em>-4 bytes thanks to Ben Voigt</em></p>



<pre class="lang-c prettyprint-override"><code>f(n,x){x=rand()%n;x=x?x:n+f(n);}
</code></pre>

<p><a href="https://tio.run/##S9ZNT07@/z9NI0@nQrO6wrYoMS9FQ1M1z7rCtsK@wipPGyijaV37PzcxM09Ds5qrGKygJDM3VcNAU9NagaugKDOvJE1DSTVFSSdNwwQoxlX7/19yWk5ievF/3XIA" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p><a href="https://tio.run/##fY7PCoMwDMbvfYogCA1V6P6c1pU9iPMgdZXA7EYVVhBffV1XPO2w75CE5PclMfVgTIyWuyrgErTvXM@xdCrocAknJ9IE1RrHjhzHhU0ZmGm8cYmogJGbgVROodlL2SrG7MNzAg1SAcEZUjcVQiCDpBxCQ20GfmENO/nVZthgy4/YCvFvdSafPv1heVEeeoSyv7qiAqryNUzmNb6NvXfDFOvXBw" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Here a Test with 100k d4</a></p>
</div>
<div id="pu20" class="pu"><h1><a href="http://jsoftware.com/" rel="nofollow noreferrer">J</a>, <s>16</s> 11 bytes</h1>

<pre><code>(+$:)^:=1+?
</code></pre>

<p><a href="https://tio.run/##y/qvpKegnqZga6WgrqCjYKBgBcS6egrOQT5u/zW0Vaw046xsDbXt/2tyWSpaGSrY6GnrmylaGSioq3OVJIO0GRopK2krmCiYKphxpSZn5Cto6KRpAkVKkv8DAA" rel="nofollow noreferrer" title="J – Try It Online">Try it online!</a></p>

<h2>Explanation</h2>

<p><strong>TL;DR</strong> <code>1+?</code> performs the die roll, <code>(+$:)^:=</code> reiterates only when it equals the input.</p>

<hr>

<p>The function is a train of 4 verbs:</p>

<pre><code>             ┌─ + 
         ┌───┴─ $:
  ┌─ ^: ─┴─ =     
  │               
──┤      ┌─ 1     
  └──────┼─ +     
         └─ ?     
</code></pre>

<p>A train is when 2 or more verbs are concatenated. Here, the answer is of the form <code>f g h j</code>:</p>

<pre><code>(+$:)^:=  1  +  ?
    f     g  h  j
</code></pre>

<p>A so-called "4-train" is parsed as a hook and a fork:</p>

<pre><code>f g h j   ⇔   f (g h j)
</code></pre>

<p>Thus, the answer is equivalent to:</p>

<pre><code>(+$:)^:= (1 + ?)
</code></pre>

<h3>Hooks: <code>(f g) x</code> and <code>x (f g) y</code></h3>

<p>A monadic (one-argument) hook of two verbs, given an argument <code>x</code>, the following equivalence holds:</p>

<pre><code>(f g) x   ⇔   x f (g x)
</code></pre>

<p>For example, <code>(* -) 5</code> evaluates to <code>5 * (- 5)</code>, which evaluates to <code>_25</code>.</p>

<p>This means that our 4-train, a hook of <code>f</code> and <code>(g h j)</code>, is equivalent to:</p>

<pre><code>(f (g h j)) x   ⇔   x f ((g h j) x)
</code></pre>

<p>But what does <code>f</code> do here? <code>(+$:)^:=</code> is a conjunction of two verbs using the <strong>Power</strong> conjunction <code>^:</code>: another hook (<code>(+$:)</code>) and a verb (<code>=</code>). Note here that <code>f</code> is <em>dyadic</em>&mdash;it has two arguments (<code>x</code> and <code>(g h j) x</code>). So we have to look at how <code>^:</code> behaves. The power conjunction <code>f^:o</code> takes a verb <code>f</code> and either a verb or a noun <code>o</code> (a noun is just a piece of data) and applies <code>f</code> <code>o</code> times. For example, take <code>o = 3</code>. The following equivalences holds:</p>

<pre><code>(f^:3) x     ⇔   f (f (f x))
x (f^:3) y   ⇔   x f (x f (x f y))
</code></pre>

<p>If <code>o</code> is a verb, the power conjunction will simply evaluate <code>o</code> over the arguments and use the noun result as the repeat count.</p>

<p>For our verb, <code>o</code> is <code>=</code>, the equality verb. It evaluates to <code>0</code> for differing arguments and to <code>1</code> for equal arguments. We repeat the hook <code>(+$:)</code> once for equal arguments and no times for differing ones. For ease of notation for the explanation, let <code>y ⇔ ((g h j) x)</code>. Remember that our initial hook is equivalent to this:</p>

<pre><code>x   (+$:)^:=   ((g h j) x)
x   (+$:)^:=   y
</code></pre>

<p>Expanding the conjunction, this becomes:</p>

<pre><code>x ((+$:)^:(x = y)) y
</code></pre>

<p>If <code>x</code> and <code>y</code> are the same, this becomes:</p>

<pre><code>x (+$:)^:1 y   ⇔   x (+$:) y
</code></pre>

<p>Otherwise, this becomes:</p>

<pre><code>x (+$:)^:0 y   ⇔   y
</code></pre>

<p>Now, we've seen monadic forks. Here, we have a dyadic fork:</p>

<pre><code>x (f g) y   ⇔   x f (g y)
</code></pre>

<p>So, when <code>x</code> and <code>y</code> are the same, we get:</p>

<pre><code>x (+$:) y   ⇔   x + ($: y)
</code></pre>

<p>What is <code>$:</code>? It refers to the entire verb itself and allows for recursion. This means that, when <code>x</code> and y<code>are the same, we apply the verb to</code>y<code>and add</code>x` to it.</p>

<h3>Forks: <code>(g h j) x</code></h3>

<p>Now, what does the inner fork do? This was <code>y</code> in our last example. For a monadic fork of three verbs, given an argument <code>x</code>, the following equivalence hold:</p>

<pre><code>(g h j) x   ⇔   (g x) h (j x)
</code></pre>

<p>For this next example, suppose we have verbs named <code>SUM</code>, <code>DIVIDE</code>, and <code>LENGTH</code>, which do what you suppose they might. If we concatenate the three into a fork, we get:</p>

<pre><code>(SUM DIVIDE LENGTH) x   ⇔   (SUM x) DIVIDE (LENGTH x)
</code></pre>

<p>This fork evaluates to the average of <code>x</code> (assuming <code>x</code> is a list of numbers). In J, we'd actually write this as example as <code>+/ % #</code>.</p>

<p>One last thing about forks. When the leftmost "tine" (in our symbolic case above, <code>g</code>) is a noun, it is treated as a constant function returning that value.</p>

<p>With all this in place, we can now understand the above fork:</p>

<pre><code>(1 + ?) x   ⇔   (1 x) + (? x)
            ⇔   1 + (? x)
</code></pre>

<p><code>?</code> here gives a random integer in the range <span class="math-container">\$[0,x)\$</span>, so we need to transform the range to represent dice; incrementing yields the range <span class="math-container">\$[1, x]\$</span>.</p>

<h3>Putting it all together</h3>

<p>Given all these things, our verb is equivalent to:</p>

<pre><code>((+$:)^:=1+?) x   ⇔   ((+$:)^:= 1 + ?) x
                  ⇔   ((+$:)^:= (1 + ?)) x
                  ⇔   x ((+$:)^:=) (1 + ?) x
                  ⇔   x ((+$:)^:=) (1 + (? x))
                  ⇔   x (+$:)^:(x = (1 + (? x))
(let y = 1 + (? x))
if x = y          ⇒   x + $: y
otherwise         ⇒   y
</code></pre>

<p>This expresses the desired functionality.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 12 bytes</h1>
<p>It may be shorter than dana's solution, but it's a hell of a lot uglier. I'm only posting it 'cause it seems like forever since we had a Japt solution that started with an empty line.</p>
<pre><code>
ö
>°V©VªV+ß</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=CvYKPrBWqVaqVivf&amp;input=Ng" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu22" class="pu"><h2>F#, 83 bytes</h2>
<pre><code>let r=System.Random()
let e d=
 let mutable t=0
 while t%d=0 do t&lt;-t+r.Next(d)+1
 t
</code></pre>
<p><a href="https://tio.run/##ZZDRS8MwEMbf81cchULL1tKCT2MtOPFVxPm2jRGX1AXbRNOrWvB/j7nY9WHeSy73ffl9R5o@OxkrnWslgq22Y4@yy5@4FqZLUkZTCaJiQF03IH9pJWBVMPg6K2pjURUgDOA6w4XNH@Q3JiJdlAzQ7db3Gu34aJTG@hBgHVcauH39BM/0FWJlP7TYTxOqrfzIlVYICVnzXXmAnxo8JYWkGTQcIavhTyouEh0ynRH@RpSTGTRuRlDiWumNJSHwkjc5LuGYEta3/yhobq3lIwvzd@vTGg3Rs0HervZ4RxmriM2bo7QTF8myhLBFoM@PY7XHWEUQHBfD9BOBVDh348qC6hc" rel="nofollow noreferrer">Try it online!</a> The first argument in the TIO program is the number of sides on the die, the second is the amount of tests to make. The output is printed to the console and shows each total and the number of times it has been rolled.</p>
<p>The random number generator <code>r</code> is initialised outside of the function. Initialising it within the function, combined with calling this function many times in succession, will cause it to return the same random numbers over and over again (try it for yourself!)</p>
<p>For the life of me I could not figure out how to write this without using <code>mutable</code>, especially since the last roll must be counted (<code>Seq.takeWhile</code> would not include the terminating element). I thought about using <code>Seq.mapFold</code> but it seems like it evaluates the input sequence first, which was a no-go for me.</p>
</div>
<div id="pu23" class="pu"><h1>SmileBASIC, 41 bytes</h1>
<pre><code>INPUT N@L
S=S+RND(N)+1ON S MOD N GOTO@L?S
</code></pre>
<p>After reading:</p>
<blockquote>
<p>Note that you should never output any multiples of n, since they will always explode.</p>
</blockquote>
<p>I realized that rather than checking if a dice roll was <code>n</code>, you can just repeat while the sum is a multiple of <code>n</code>.</p>
</div>
<div id="pu24" class="pu"><h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, <s>66</s> <s>64</s> 61 bytes</h1>

<p>-3 bytes thanks to xnor</p>



<pre class="lang-python prettyprint-override"><code>f=lambda n,c=0:c%n or c+f(n,randint(1,n))
from random import*
</code></pre>

<p><a href="https://tio.run/##PYpBCsMgFAXX8RRvE9DWRRuyKKEe5sdUIsSvfITQ09ski64GZqZ865p5aC24jdK8ENh695h8z8gCfw@arRAvkat@WjZGBckJpzoQU8lSb41c0KNRRc6NjNrXuH1AeOM1qY7gcPXuP7Qf" rel="noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>The previous roll is stored in <code>c</code>, allowing us to access it multiple times without having to store it to a variable, which can't be done in a Python lambda. Each recursion, we check if we rolled exploding dice.</p>

<p><code>c</code> is initialised to zero, so <code>c%n</code> is falsey there. In the next iterations, it will only be falsey if exploding dice were rolled.</p>

<h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, 55 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda n:randint(1,n)%n or n+f(n)
from random import*
</code></pre>

<p><a href="https://tio.run/##PYtBCsMgFAXXeoq3CWibTUIWIdTD/GJFIX7lI4Sc3jZZdDWLmalni4Xn3oPbKb89gTch9ombmUa2A6MI@BkMWx2kZFz2h5Rrkfbo5IJZrK5yHWT1EdP@AeGFddOK4HB79Q/6Fw" rel="noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>My other answer seems to be a bit overengineered, since this appears to work as well... I'll leave it anyway.</p>
</div>
<div id="pu25" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 7 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>X=Ð¿⁸S_
</code></pre>
<p>A monadic Link accepting an integer, <code>n</code>, which yields an integer.</p>
<p><strong><a href="https://tio.run/##y0rNyan8/z/C9vCEQ/sfNe4Ijv///78ZAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong> Or see <a href="https://tio.run/##ASgA1/9qZWxsef//WD3DkMK/4oG4U1//4bqLyLc1w4figqzhuaLFknJH//80" rel="nofollow noreferrer" title="Jelly – Try It Online">the counts of <span class="math-container">\$10^5\$</span> runs</a></p>
<h3>How?</h3>
<pre><code>X=Ð¿⁸S_ - Link: integer, n
  Ð¿    - Collect up while...
 =  ⁸   - ...condition: equal to chain's left argument, n
X       - ...next value: random number in [1..n]
     S  - sum
      _ - subtract n (since the collection starts with [n])
</code></pre>
</div>
<div id="pu26" class="pu"><h1><a href="https://github.com/ETHproductions/japt" rel="nofollow noreferrer">Japt</a>, 13 bytes</h1>
<pre><code>ö)g@¶°X?X+ß:X
</code></pre>
<p><a href="https://petershaggynoble.github.io/Japt-Interpreter/?v=1.4.6&amp;code=9ilnQLawWD9YK986WA&amp;input=Mg" rel="nofollow noreferrer">Try it</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/a/183082/8340">Arnauld's answer</a>. Figured out how to make a recursive call ;)</p>
<p>Transpiled JS:</p>
<pre><code>// U: Implicit input
// ö: generate a random number [0,U)
(U.ö())
  // g: run the result through a function
  .g(function(X, Y, Z) {
    // increment the result and compare to input
    return U === (++X)
      // if they are the same, roll again and add to current roll
      ? (X + rp())
      // if they are different, use current roll
      : X
   })
</code></pre>
</div>
<div id="pu27" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 10 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>[ILΩDIÊ#}O
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/2tPn3EoXz8NdyrX@//8bAwA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/f8/2tPn3EoXz8NdyrWatv46//8bAwA" rel="nofollow noreferrer">verify the lists</a>.</p>
<p><strong>10 bytes alternative:</strong></p>
<pre><code>[LΩDˆÊ#}¯O
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f8/2ufcSpfTbYe7lGsPrff//98YAA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/f8/2ufcSpfTbYe7lGsPrbf11/n/3xgA" rel="nofollow noreferrer">verify the lists</a>.</p>
<p>Although I like the top one more because it got the 'word' <code>DIÊ</code> in it, which suits the challenge.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>[         # Start an infinite loop:
 IL       #  Create a list in the range [1, input]
   Ω      #  Pop and push a random value from this list
    D     #  Duplicate it
     IÊ   #  If it's NOT equal to the input:
       #  #   Stop the infinite loop
}O        # After the loop: sum all values on the stack
          # (which is output implicitly as result)

[         # Start an infinite loop
 L        #  Create a list in the range [1, (implicit) input]
  Ω       #  Pop and push a random value from this list
   Dˆ     #  Add a copy to the global_array
     Ê    #  If it's NOT equal to the (implicit) input:
      #   #   Stop the infinite loop
}¯        # After the loop: push the global_array
  O       # Pop and push its sum
          # (which is output implicitly as result)  
</code></pre>
</div>
<div id="pu28" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 43 bytes (Iterative method)</h1>



<pre class="lang-powershell prettyprint-override"><code>param($n)do{$x+=1..$n|random}until($x%$n)$x
</code></pre>

<p><a href="https://tio.run/##K8gvTy0qzkjNyfn/vyCxKDFXQyVPMyW/WqVC29ZQT08lr6YoMS8lP7e2NK8kM0dDpUIVKK9S8f//fzMA" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>

<hr>

<h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 48 bytes (recursive method)</h1>



<pre class="lang-powershell prettyprint-override"><code>filter f{if($_-eq($x=1..$_|random)){$x+=$_|f}$x}
</code></pre>

<p><a href="https://tio.run/##K8gvTy0qzkjNyfn/Py0zpyS1SCGtOjNNQyVeN7VQQ6XC1lBPTyW@pigxLyU/V1OzWqVC2xbIT6tVqaj9b1aT9v8/AA" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>
</div>
<div id="pu29" class="pu"><h1>x86 Machine Code (for Intel Ivy Bridge and later), 17 bytes</h1>

<pre><code>31 C9 0F C7 F0 31 D2 F7 F6 42 01 D1 39 F2 74 F2 C3
</code></pre>

<p>The above bytes of code define a function that simulates an exploding die. It takes a single input, passed in the <code>ESI</code> register, indicating the maximum number of the die. It returns a single value in the <code>ECX</code> register, which is the result of the rolls.</p>

<p>Internally, it uses <a href="https://en.wikipedia.org/wiki/RdRand" rel="noreferrer">the <code>RDRAND</code> instruction</a> to generate a random number. This uses a random number generator (RNG) that is built into the hardware on Intel Ivy Bridge processors and later (some AMD CPUs also support this instruction).</p>

<p>The logic of the function is otherwise quite straightforward. The generated random number is scaled to lie within the desired range using the standard technique (<code>(rand % dieSize) + 1</code>), and then it is checked to see if it should cause an explosion. The final result is kept in an accumulator register.</p>

<p>Here is an annotated version showing the assembly language mnemonics:</p>

<pre><code>           unsigned int RollExplodingDie(unsigned int dieSize)
31 C9        xor     ecx, ecx    ; zero-out ECX, which accumulates the final result
           Roll:
0F C7 F0     rdrand  eax         ; generate a random number in EAX
31 D2        xor     edx, edx    ; zero-out EDX (in preparation for unsigned division)
F7 F6        div     esi         ; divide EDX:EAX by ESI (the die size)
                                 ;   EAX receives the quotient; EDX receives the remainder
42           inc     edx         ; increment the remainder
01 D1        add     ecx, edx    ; add this roll result to the accumulator
39 F2        cmp     edx, esi    ; see if this roll result should cause an explosion
74 F2        jz      Roll        ; if so, re-roll; otherwise, fall through
C3           ret                 ; return, with result in ECX register
</code></pre>

<p>I am cheating <em>a bit</em>. All standard x86 calling conventions return a function's result in the <code>EAX</code> register. But, in true machine code, there are no calling conventions. You can use any registers you want for input/output. Using <code>ECX</code> for the output register saved me 1 byte. If you want to use <code>EAX</code>, insert a 1-byte <code>XCHG  eax, ecx</code> instruction immediately before the <code>ret</code> instruction. This swaps the values of the <code>EAX</code> and <code>ECX</code> registers, effectively copying the result from <code>ECX</code> into <code>EAX</code>, and trashing <code>ECX</code> with the old value of <code>EAX</code>.</p>

<p><strong><a href="https://tio.run/##dVNba8IwFH7vrzhUhHa6G9uTusEuHfRhDqyDMYRSk9idEdOSpEMm/vV1idWOancemvZ833dybiWnKSFlWQiFqWAUUGiYZJwHq5xnFEX6iMxroBRZhN/Md9YOGKsxyVTB9XDrjONELePYc2d6lUluPN0uI6t@dcyEu2XtzZ1m@eDIOdOSykRQq0lWLfBfZFpFpm0sil87lsIWGAWpg7TACaXNO0gbiyzz@o7/M/n83r6ZYg/AAbg3xAWv6qAPcH4CWaHzQpumpqg0k4AKgoc3ODk/EEYugLcfiRWisLqmMAqPhTZJt3YYYa0gPJvPzcnNJxwI/Wq@kulCinrkm7Jj@1hQBiOlKcf52cet0/BhZl1Oh7IFCgaPYRBH4XsATbuuCePX5/tgEr88xeE0mNxNw5dxZAiXF45jl3CZoPB2K7jIJHjK1B9rQLiBi6E5Rq0RhtDroW9F611VuTThFp5rdx66V3Qw0@ZpBtQHM8qjP2Gft181YmNK/yELnqSqPF2afRX0Fw" rel="noreferrer" title="C (gcc) – Try It Online">Try it online!</a></strong></p>

<p>Here's the equivalent function transcribed in C, using <a href="https://gcc.gnu.org/onlinedocs/gcc/x86-Built-in-Functions.html" rel="noreferrer">the <code>__builtin_ia32_rdrand32_step</code> intrinsic</a> supported by GCC, Clang, and ICC to generate the <code>RDRAND</code> instruction:</p>

<pre class="lang-c prettyprint-override"><code>#include &lt;immintrin.h&gt;

unsigned int RollExplodingDie(unsigned int dieSize)
{
    unsigned int result = 0;
Roll:
    unsigned int roll;
    __builtin_ia32_rdrand32_step(&amp;roll);
    roll    = ((roll % dieSize) + 1);
    result += roll;
    if (roll == dieSize)   goto Roll;
    return result;
}
</code></pre>

<p>Interestingly, <a href="https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(fontScale:0.8957951999999999,j:1,lang:c%2B%2B,source:&#39;%23include+%3Cimmintrin.h%3E%0A%0Aunsigned+int+RollExplodingDie(unsigned+int+dieSize)%0A%7B%0A++++unsigned+int+result+%3D+0%3B%0ARoll:%0A++++unsigned+int+roll%3B%0A++++__builtin_ia32_rdrand32_step(%26roll)%3B%0A++++roll++++%3D+((roll+%25+dieSize)+%2B+1)%3B%0A++++result+%2B%3D+roll%3B%0A++++if+(roll+%3D%3D+dieSize)+++goto+Roll%3B%0A++++return+result%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:48.91472868217055,l:&#39;4&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g83,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:0.8957951999999999,lang:c%2B%2B,libs:!(),options:&#39;-m64+-mrdrnd+-Os&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+8.3+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),header:(),k:51.08527131782946,l:&#39;4&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4" rel="noreferrer">GCC with the <code>-Os</code> flag transforms this into almost exactly the same machine code</a>. It takes the input in <code>EDI</code> instead of <code>ESI</code>, which is completely arbitrary and changes nothing of substance about the code. It must return the result in <code>EAX</code>, as I mentioned earlier, and it uses the more efficient (but larger) <code>MOV</code> instruction to do this immediately before the <code>RET</code>. Otherwise, samezies. It's always fun when the process is fully reversible: write the code in assembly, transcribe it into C, run it through a C compiler, and get your original assembly back out!</p>
</div>
<div id="pu30" class="pu"><h1>SmileBASIC 3, 49 bytes</h1>

<p>Function <code>D N OUT R</code> implements exploding dice rolls recursively.</p>

<pre><code>DEF D N OUT R
R=RND(N)+1IF R==N THEN R=R+D(N)
END
</code></pre>

<h2>Ungolfed</h2>

<pre><code>DEF D N OUT R  'N is sides and R is output param (shorter than using RETURN in this case)
 R=RND(N)+1  'random number in [1, N]
 IF R==N THEN R=R+D(N)  'if roll is same as N then roll again and add
END
</code></pre>

<p>Note that in SmileBASIC, functions can have multiple return values. If a function has one return value then <code>fun in OUT var</code> and <code>var = fun(in)</code> are exactly the same, which is why we can define the function in <code>OUT</code> form and also call it in an expression in the function body itself. If I had defined the function as <code>DEF D(N)</code> I would have to explicitly state <code>RETURN R</code> in the function body; mixing both syntaxes saved me bytes.</p>
</div>
<div id="pu31" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, 25 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{sum {.rand+|0+1}...$_&gt;*}
</code></pre>

<p><a href="https://tio.run/##K0gtyjH7n1upoJamYPu/urg0V6FarygxL0W7xkDbsFZPT08l3k6r9n9xYqVCmoaJpkJafpFCnKGB9X8A" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
</div>
<div id="pu32" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 53 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda n:random()*n//1or n+f(n)
from random import*
</code></pre>

<p><a href="https://tio.run/##RcoxDgIhFEXRnlX8EtA4jJlqElZijEFHlADvE4KFq0eJhe09t7zbk3Hs3dvk8nVzhLU6bJyl0pimmSth5yWU8JUz/YxCLlyb7rCLSPY0nPx3vVDAeB53ORtj1FmMGv910VCroFIDGsU9pcONX2gyKtE/" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Uses the <code>or</code> short-circuiting idea from <a href="https://codegolf.stackexchange.com/a/183091/20260">ArBo's answer</a>. The expression <code>random()*n//1</code> generates a number from <code>0</code> to <code>n-1</code>, with <code>0</code> taking the place of a roll of <code>n</code>. The <code>or</code> takes the that number, except if it's zero (Falsey) it continues on to <code>n+f(n)</code>.</p>
</div>
<div id="pu33" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <strike>77</strike> 76 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>import System.Random
f x=randomRIO(1,x)&gt;&gt;=(x!)
x!y|y&lt;x=pure y|0&lt;1=(y+)&lt;$&gt;f x
</code></pre>

<p><a href="https://tio.run/##y0gszk7Nyfn/PzO3IL@oRCG4srgkNVcvKDEvJT@XK02hwrYIzAzy9Ncw1KnQtLOz1ahQ1OSqUKysqbSpsC0oLUpVqKwxsDG01ajU1rRRsQPq@Z@bmJlnm6agYWJl5ZlXoqkA1KVQUJSZV/IfAA" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>Thanks to killmous for one byte.</p>

<p>If <code>&lt;|&gt;</code> were in the prelude, we could do better with <code>MonadComprehensions</code>:</p>

<h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, non-competing, 66 bytes</h1>



<pre class="lang-hs prettyprint-override"><code>import System.Random
f x=do y&lt;-randomRIO(1,x);[y|y&lt;x]&lt;|&gt;(y+)&lt;$&gt;f x
</code></pre>

<p><a href="https://tio.run/##NcuxCsIwFEDR3a/I4JCgLQhONQ1Ipw4i1EUQh2BTG0zeC0mQBvrtxiK4Xs4dZXgpY7K2Dn0kDUL0aMqjc0Y/ZNRvRSjls2DsTy4pRGXLTkKPdjWQqe6RJF74X@jaM91tJ3a4pTnx6b6sNG0YX4tFZis11AOh@6pqITIiRE2c1xDz5zEY@Qy5uJ4QZN@gdV6NCoJGCF8" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu34" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, <s>15</s> 14 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>{×r←?⍵:r⋄⍵+∇⍵}
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///qG9qZv6jtgkG/9OAZPXh6UVAyv5R71arokfdLUBa@1FHO5Cq/f8/DyhjmGqm8Kh3rkJeaW5SapFCfppCcWJuQU5qMVc1UFH0o95uIGUdWwvk7dLJO7z9Ue@KR52LQPof9exIO7Qi71HvFhOwCQVFmXklCimZxSVFmUmlJZn5eQA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
</div>
<div id="pu35" class="pu"><h1>TI-BASIC, <s>28</s> 23 bytes</h1>

<p><em>-5 bytes thanks to <a href="https://codegolf.meta.stackexchange.com/questions/15025/what-are-the-standard-requirements-for-answering-a-random-challenge">this</a> meta post!</em></p>

<pre><code>Ans→N:0:Repeat fPart(Ans/N:Ans+randInt(1,N:End:Ans
</code></pre>

<p>Input is in <code>Ans</code>.<br>
Output is in <code>Ans</code> and is implicitly printed.</p>

<p><strong>Examples:</strong></p>

<pre><code>4
              4
prgmCDGF11
              5
6
              6
prgmCDGF11
              3
</code></pre>

<p><strong>Explanation:</strong></p>

<pre><code>Ans→N:0:Repeat fPart(Ans/N:Ans+randInt(1,N:End:Ans   ;full logic

Ans→N                                                ;store the input in "N"
      0                                              ;leave 0 in "Ans"
        Repeat fPart(Ans/N                 End       ;loop until the sum
                                                     ; is not a multiple of
                                                     ; the input
                               randInt(1,N           ;generate a random
                                                     ; integer in [1,N]
                           Ans+                      ;then add it to "Ans"
                                               Ans   ;leave the sum in "Ans"
                                                     ;implicitly print "Ans"
</code></pre>

<hr>

<p><strong>Notes:</strong></p>

<ul>
<li>TI-BASIC is a tokenized language.  Character count does <strong><em>not</em></strong> equal byte count.</li>
</ul>
</div>
<div id="pu36" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 7 bytes</h1>

<pre><code>X+ß}¥=¡
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/z9C@/D82kNLbQ8t/P//vxkA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Uses recursion. Runs the program again (<code>ß</code>) and adds (<code>+</code>) if (<code>¡</code>) the random number (<code>X</code>) is equal (<code>=</code>) to the program input. <code>}</code> makes <code>ß</code> act on the program input and <code>¥</code> combines <code>+ß}</code> into a single link for <code>¡</code> to consume.</p>

<p>Here a distribution of 1000 outputs for n=6 which I collected using <a href="https://tio.run/##AScA2P9qZWxsef//WCvDn33CpT3Cof874bi3L8OHJCQxMDAwwqHhuIr//zY" rel="noreferrer">this</a> program. Plotted with python/matplotlib.
<a href="https://i.stack.imgur.com/a2GNL.png" rel="noreferrer"><img src="https://i.stack.imgur.com/a2GNL.png" alt="histogram"></a></p>

<p>Here is a 5000 data points from n=3 on a semilog plot which shows the (approximately?) exponential distribution.
<a href="https://i.stack.imgur.com/OgiYK.png" rel="noreferrer"><img src="https://i.stack.imgur.com/OgiYK.png" alt="enter image description here"></a></p>
</div>
<div id="pu37" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>81</s> 72 bytes</h1>



<pre class="lang-python prettyprint-override"><code>from random import*
def f(x,a=0):
 while a%x&lt;1:a+=randint(1,x)
 return a
</code></pre>

<p><a href="https://tio.run/##TYrLCoAgEADvfsVeArc6FD0OkR@zkJJQKouRfb3VIeg0wzDhiqt3Xc6G/Q5Mbnlg9@A5lmLRBoxMNakGJwHnajcNVKS5nahS72xdlG2dUADreLADyoHfaGSPKD4ffj4i5hs" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>-9 bytes thanks to ArBo</p>

<h2>Explanation</h2>

<pre class="lang-python prettyprint-override"><code>import random             #load the random module              
def explodeDice(num):     #main function
    ans = 0                     #set answer to 0
    while a % num != 0:         #while a isn't a multiple of the input
        ans += random.randint(1, num) #add the next dice roll to answer
    return ans                  #return the answer
</code></pre>
</div>
<div id="pu38" class="pu"><h1><a href="http://www.mono-project.com/docs/about-mono/releases/5.0.0/#csc" rel="nofollow noreferrer">C# (Visual C# Interactive Compiler)</a>, 60 bytes</h1>



<pre class="lang-cs prettyprint-override"><code>int f(int n,int k=1)=&gt;(k=new Random().Next(n)+1)&lt;n?k:k+f(n);
</code></pre>

<p>Saved 4 bytes thanks to @ExpiredData!</p>

<p><a href="https://tio.run/##Sy7WTS7O/P8/M69EIU0DRObpgMhsW0NNWzuNbNu81HKFoMS8lPxcDU09v9SKEo08TW1DTZs8@2yrbO00IM/6f3hRZkmqT2ZeqkaahpkmUAAA" rel="nofollow noreferrer" title="C# (Visual C# Interactive Compiler) – Try It Online">Try it online!</a></p>
</div>
<div id="pu39" class="pu"><h1>Pyth - <s>12</s> 11 bytes</h1>
<p>Uses functional while. I feel like there should be a smarter answer that just simulates the distribution.</p>
<pre><code>-.W!%HQ+hOQ

-         (Q)         Subtract Q. This is because we start Z at Q to save a char
 .W                   While, functionally
  !                   Logical not. In this case, it checks for 0
   %HQ                Current val mod input
  +     (Z)           Add to current val
   h                  Plus 1
    OQ                Random val in [0, input)
</code></pre>
<p><a href="http://pyth.herokuapp.com/?code=-.W%21%25HQ%2BhOQ&amp;test_suite=1&amp;test_suite_input=4%0A6&amp;debug=0" rel="nofollow noreferrer">Try it online</a>.</p>
</div>
<div id="pu40" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 9 bytes</h1>

<pre><code>x⁹X€Ä%ƇµḢ
</code></pre>

<p><a href="https://tio.run/##ASkA1v9qZWxsef//eOKBuVjigqzDhCXGh8K14bii/8Kzw4ckNDAww5DCof//Ng" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>A monadic link that takes n as its argument and returns a number generated by an exploding n-sided die. This generates 256 numbers from 1 to n and returns the first cumulative sum that is not a multiple of n. In theory this could return 256n, but even for a 2-sided die this would happen only one every <span class="math-container">\$2^{256}\$</span> times.</p>

<p>An alternative that doesn’t have this limitation is:</p>

<h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 10 bytes</h1>

<pre><code>X³X¤+¥³ḍ¥¿
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/z/i0OaIQ0u0Dy09tPnhjl4gtf//oc2H21VMDAwOTzi08P9/MwA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<p>Note both TIO links generate 400 numbers to show the distribution. </p>
</div>
<div id="pu41" class="pu"><h2>Batch, 70 bytes</h2>

<pre><code>@set t=0
:g
@set/at+=d=%random%%%%1+1
@if %d%==%1 goto g
@echo %t%
</code></pre>

<p>Takes input <code>n</code> as a command-line parameter <code>%1</code>. <code>d</code> is the current roll, <code>t</code> the cumulative total. Simply keeps rolling until <code>d</code> is not equal to <code>n</code>.</p>
</div>
<div id="pu42" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 17 bytes</h1>

<pre><code>ＮθＷ⁼Ｌυ№υθ⊞υ⊕‽θＩΣυ
</code></pre>

<p><a href="https://tio.run/##FYwxDsIwDEX3niKjLZWNrWPFUAmhip4gpBaplDgkseH4IR3/e0/feVtcsqG1hT8qD40vKpBxGn7@CGTgltWGCnfit3hQHM2clAV0NBkRzarVn2NhVygSC@3wtLynCKefhrUcPZ9tFdg09ocOW7u2yzf8AQ" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>

<pre><code>Ｎθ
</code></pre>

<p>Input <code>n</code>.</p>

<pre><code>Ｗ⁼Ｌυ№υθ
</code></pre>

<p>Repeat while the predefined empty list only contains <code>n</code>s (i.e. its length equals its count of <code>n</code>s)...</p>

<pre><code>⊞υ⊕‽θ
</code></pre>

<p>... push a random integer from <code>1</code> to <code>n</code> to the list.</p>

<pre><code>ＩΣυ
</code></pre>

<p>Print the total.</p>
</div>
<div id="pu43" class="pu"><h1><a href="http://www.complang.tuwien.ac.at/forth/gforth/Docs-html/" rel="nofollow noreferrer">Forth (gforth)</a>, 72 bytes</h1>

<pre class="lang-forth prettyprint-override"><code>include random.fs
: f &gt;r 0 begin i random 1+ &gt;r i + r&gt; i &lt; until rdrop ;
</code></pre>
<p><a href="https://tio.run/##hY2xCsJAEER7v2KsLIJBwUollQfW2trE3F6ycO6FvU2hP38mYG/1hnkME5LasO3DglJYujh5grbi06sOGUcENIodntSzgH8K@2qpGRW0mXHGJMYR6jWNOJWruzncnbtgjQeME3yiLBsDCxu3kT8EGwiZyGOcR6TxvTrMbzU6/RvKFw" rel="nofollow noreferrer" title="Forth (gforth) – Try It Online">Try it online!</a></p>
<h3>Code Explanation</h3>
<pre class="lang-forth prettyprint-override"><code>include random.fs      \ include library file for random
: f                    \ start a new word definition
  &gt;r                   \ stick the input on the return stack (for easy access)
  0                    \ add a counter to hold the sum
  begin                \ start an indefinite loop
    i random 1+        \ generate a random number from 1 to n
    &gt;r i + r&gt;          \ add the result to the counter, use the return stack to save a few bytes
    i &lt;                \ check if result was less than n
  until                \ end the loop if it was, otherwise go back to begin
  rdrop                \ remove n from the return stack
;                      \ end the word definition
</code></pre>
</div>
<div id="pu44" class="pu"><h1><a href="https://github.com/TryItOnline/TioSetup/wiki/Powershell" rel="nofollow noreferrer">PowerShell</a>, 49 bytes</h1>



<pre class="lang-powershell prettyprint-override"><code>for($a=$l="$args";$a-eq$l){$o+=$l=1..$a|Random}$o
</code></pre>

<p><a href="https://tio.run/##K8gvTy0qzkjNyfn/Py2/SEMl0VYlx1ZJJbEovVjJWiVRN7VQJUezWiVfGyRuqKenklgTlJiXkp9bq5L///9/MwA" rel="nofollow noreferrer" title="PowerShell – Try It Online">Try it online!</a></p>

<p>Iterative method. Sets the input <code>$args</code> to <code>$a</code> and the <code>$l</code>ast roll (done so we enter the loop at least once). Then, so long as the last roll is <code>-eq</code>ual to the input, we keep rolling. Inside the loop we accumulate into <code>$o</code> the last roll, which is updated by creating a range from <code>1</code> to input <code>$a</code> and picking a <code>Random</code> element thereof. <em>(Honestly, I'm a little surprised that <code>$o+=$l=</code> works.)</em> Once we're out of the loop, we leave <code>$o</code> on the pipeline and output is implicit.</p>
</div>
<div id="pu45" class="pu"><h1>Python 3, 80 bytes</h1>

<p>This is pretty much just a tail-call recursive version of @Artemis Fowl's answer, but I liked doing it without unrolling into a while loop.</p>

<p>Uses an accumulator parameter to return the total rolled value once the exploding stops.</p>

<pre><code>from random import*
def r(n,a=0):v=randint(1,n);a+=v;return r(n,a)if v==n else a
</code></pre>
</div>
<div id="pu46" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="nofollow noreferrer">Perl 6</a>, 26 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{[+] {^$_ .roll+1}...$_&gt;*}
</code></pre>

<p><a href="https://tio.run/##K0gtyjH7n1upoJamYPu/Olo7VqE6TiVeQa8oPydH27BWT09PJd5Oq/a/NVdxYqVCmoaZpkJFhYKhgYH1fwA" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
</div>
<div id="pu47" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 35 bytes</h1>



<pre class="lang-ruby prettyprint-override"><code>-&gt;n,s=0{s+=x=1+rand(n);x&lt;n||redo;s}
</code></pre>

<p><a href="https://tio.run/##KypNqvyfZvtf1y5Pp9jWoLpY27bC1lC7KDEvRSNP07rCJq@mpig1Jd@6uPZ/QWlJsUJatFnsfwA" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu48" class="pu"><h1><a href="https://github.com/ConorOBrien-Foxx/Attache" rel="nofollow noreferrer">Attache</a>, 30 bytes</h1>

<pre><code>f:=${If[x=y,f@x+y,y]}#1&amp;Random
</code></pre>

<p><a href="https://tio.run/##SywpSUzOSP2fpmBl@z/Nylal2jMtusK2UifNoUK7UqcytlbZUC0oMS8lP/e/X2pqSnG0SkFBcnosV0BRZl5JSGpxiXNicWpxdJqOgltOYkm0qVqCmoKtnYKJuqm6mbp5bOx/AA" rel="nofollow noreferrer" title="Attache – Try It Online">Try it online!</a></p>

<p>Direct implementation of the process.</p>

<h2>Alternatives</h2>

<p><strong>36 bytes:</strong> <code>${NestWhile[{_+Random[1,x]},x&amp;`|,0]}</code></p>

<p><strong>37 bytes:</strong> <code>${NestWhile[{_+Random[1,x]},{x|_},0]}</code></p>
</div>
<div id="pu49" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>47</s> 42 bytes</h1>



<pre class="lang-r prettyprint-override"><code>function(n){while(!F%%n)F=F+sample(n,1)
F}
</code></pre>

<p><a href="https://tio.run/##K/qfqmCj@z@tNC@5JDM/TyNPs7o8IzMnVUPRTVU1T9PN1k27ODG3ACiQp2OoyeVW@7@kKDMxpxioScHQINWYi6skMQkoW5RakJOZnFiSqgGR10nVMNHU1NSH8P4DAA" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>Credit to <a href="https://codegolf.stackexchange.com/a/183091/67312">ArBo's approach</a>.</p>

<p>Still a byte longer than <a href="https://codegolf.stackexchange.com/a/183087/67312">Robin Ryder's</a>, go upvote his!</p>
</div>
<div id="pu50" class="pu"><h1><a href="https://esolangs.org/wiki/Fish" rel="nofollow noreferrer">>&lt;></a>, 90 bytes</h1>

<pre><code>0&amp;  v
v:::&lt;             &lt;
v/1&gt;{1-:?!v}
&gt;x0^v10~  &lt;
 ^
5=?v&gt;:@}}*{+{2*l
&amp;n;&gt;,*:1%-1+:&amp;+&amp;=?^
</code></pre>

<p><a href="https://tio.run/##S8sszvj/30BNQaGMq8zKyspGARnYcJXpG9pVG@pa2SuW1XLZVRjElRka1IEkFOK4TG3ty@ysHGprtaq1q420crjU8qztdLSsDFV1DbWt1LTVbO3j/v//r1umYAIA" rel="nofollow noreferrer" title="&gt;&lt;&gt; – Try It Online">Try it online!</a></p>

<p>The whitespace on the second line is bugging me. I'll work on golfing that out.</p>

<hr>

<p><code>&gt;&lt;&gt;</code> doesn't have a nice method for producing uniform random integers. This approach generates, for input <span class="math-container">\$N\$</span>, a random number produced by generating <span class="math-container">\$N\$</span> random bits, then taking the resulting binary integer and dividing it by <span class="math-container">\$2^N\$</span>. This process is repeated until <span class="math-container">\$N\$</span> is not generated by this process.</p>
</div>
<div id="pu51" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 80 bytes</h1>



<pre class="lang-python prettyprint-override"><code>import random as r,math
lambda n:int(-math.log(r.random(),n))*n+r.randint(1,n-1)
</code></pre>

<p><a href="https://tio.run/##JcoxCsAgDADAva9wNK0K0q2/SRGqYBKxLn19irge176RhU/VQk36MB05CRl8TXeEI28V6U5o@Co8rJ8Uqjy2hzUtOAbY@VgwU3TsI6j@" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu52" class="pu"><h1><a href="https://github.com/nxadm/rakudo-pkg" rel="noreferrer">Perl 6</a>, 26 bytes</h1>



<pre class="lang-perl6 prettyprint-override"><code>{sum {roll 1..$_:}...*-$_}
</code></pre>

<p><a href="https://tio.run/##K0gtyjH7n1upoJamYPu/urg0V6G6KD8nR8FQT08l3qpWT09PS1clvvZ/cWKlQpqGiaZCWn6RQpyhgfV/AA" rel="noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>

<h3>Explanation</h3>

<pre class="lang-perl6 prettyprint-override"><code>{                        } # Anonymous block
                  ...      # Sequence constructor
     {roll 1..$_:}         #   Next elem is random int between 1 and n
                           #   (Called as 0-ary function with the original
                           #   $_ for the 1st elem, then as 1-ary function
                           #   with $_ set to the previous elem which
                           #   equals n.)
                     *-$_  #   Until elem not equal to n (non-zero difference)
 sum                       # Sum all elements
</code></pre>
</div>
<div id="pu53" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 50 bytes</h1>

<pre><code>R@#//.x_/;x~Mod~#==0:&gt;x+R@#&amp;
R=RandomChoice@*Range
</code></pre>

<p><a href="https://tio.run/##RY1NC4IwHMbvfoo/Ch1Kml06FItR0C0I8zZGLJ1uMB1sg/TiV1/TS8/t@fG89NxL0XOvah46HEqSIbQf3@g8zg/TzBnGxeky7iLfJCUu@dCY/iaNqgXZRteJ8LRq8AQ6emSwKElWQlMprADlIB6A51pPYFo4FFERWfN1KfvHyctYf51otQRJxT9a0GUyXwssvyvrPAvhBw" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/183073/">183073</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




