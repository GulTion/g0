<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::250173</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>141</td><td>Rust</td><td>231216T032404Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/268574#268574">138 Aspe</a></td></tr>
<tr d-ix="1"><td>051</td><td>Perl 5 p</td><td>231213T174115Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/268528#268528">Xcali</a></td></tr>
<tr d-ix="2"><td>024</td><td>SM83/Z80</td><td>220724T143523Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250270#250270">NoLonger</a></td></tr>
<tr d-ix="3"><td>048</td><td>MIPS III</td><td>220723T055316Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250219#250219">qwr</a></td></tr>
<tr d-ix="4"><td>021</td><td>x86 32bit machine code</td><td>220722T055116Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250180#250180">m90</a></td></tr>
<tr d-ix="5"><td>022</td><td>05AB1E</td><td>220722T080437Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250183#250183">Kevin Cr</a></td></tr>
<tr d-ix="6"><td>055</td><td>Python</td><td>220722T174311Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250195#250195">97.100.9</a></td></tr>
<tr d-ix="7"><td>058</td><td>Batch</td><td>220722T173532Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250194#250194">Neil</a></td></tr>
<tr d-ix="8"><td>053</td><td>C gcc</td><td>220722T135458Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250190#250190">Noodle9</a></td></tr>
<tr d-ix="9"><td>173</td><td>Retina 0.8.2</td><td>220722T091329Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250185#250185">Neil</a></td></tr>
<tr d-ix="10"><td>045</td><td>JavaScript ES6</td><td>220722T012711Z</td><td><a href="https://codegolf.stackexchange.com/questions/250173/super-mario-64-rng/250175#250175">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.rust-lang.org/" rel="nofollow noreferrer">Rust</a>, 141 bytes</h1>
<p>141  bytes, it can be golfed much more.</p>
<p>Golfed version. <a href="https://tio.run/##rVDRboIwFH33K@58MJBgbDta6lDexg/scdEEWcVmUAmUzYB8O2tRY8yyt/WBe@85h3NPWzW1HvYKikQqx4VuApALDZXKYA3DuWg0qJcGs/M8Mt/OchZr146jZoRSd7Xi7laFau20t/lsWnSKY4TcKOJhe6ewUco9tDMcoc5powhvrZAj11SOOepFXotfDI5jv@@H0IQDWCzg9ZQUZS6gqZNMwLfUB8jkl1AgVdnoepTZpJcRm5u8Y0JZ4AFDPkIe4IAvPTANDXxmC@WcmIIoRZsQYHTYHyuYjRbG6NoZs24k7SkrqXSunpxp18M8gq6fepednn1AZ2xd9xK7nzz8ckXvKYlNyfwlNin9Z4aoBwSzwDeTQS1IMcWb8O9o5H@jmXd@K0UqkxzSpBagj5AeRPoJOzn/kJVItTwqQxZJWUqVPXpMCUGEweq22u4codvOu5LyAPmPyhGyyn74AQ" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-rust prettyprint-override"><code>|mut n:u16|-&gt;u16{let mut z=((n&amp;255)&lt;&lt;8)^n;n=(z&amp;255)&lt;&lt;8|(z&amp;0xFF00)&gt;&gt;8;z=(z&amp;255)&lt;&lt;1^n;if z&amp;1&gt;0{(z&gt;&gt;1^0xFF80)^0x8180}else{(z&gt;&gt;1^0xFF80)^0x1FF4}}
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##rZJNj9owEIbv/Ip3OayIFLR2mq9tgFu5VmovlapdKQRDrAYnwmbZivLb6djmI1TaW3Ox887MM6/H3u60OZ1WClu1Hm12BlJ1O/MZO54GGM/sisMA9DXCwCZo5qLFVdT8LDhFM0wxchQ8gr3P5wEmE@QFnp6ga7kyaNo9Fr@NgGlRy3V9qXud@u4e7RHEokgfhD89ibEAs9mFvi875OOFNKjL5k3onqF7CMdrv5XmlEIZRLIRm5azs4sVXCnHwxTsPIq@Pe0rck4V1sSPr9@wl6ZGqwTaFSJUrdKmVMbbOUI0WnwM4vN57EBL0Qm1lGpNJOuhXS7RbiHehPKg25QGx8GArnBTSjUKPJkAX97LTdcI7HS5Ft7TWlK1r9HX@/O/dgQ/eZSkWYiUxYyF4Fn@HII2SRandknyPKKFJQl7KQBHWJGnR38Gqc47gt3O122lMo16GA0PR/uiDsdh6HuG7tG5bRAUvUNdS4LiH5eRdZnGz5xcxp9SloSIeJrF9EeqFROe8JfiY2vR/7VGc/7eiUqWDapSuydd1aL6hYUcL@VWVEa2ioKbsuvoLu8ZwyhiUYrJpbXt6aRLz1tmkmcsvs90ks08nk5/AQ" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-rust prettyprint-override"><code>fn rng(mut input: u16) -&gt; u16 {
    let mut s0: u16;
    let s1: u16;

    s0 = (input &amp; 0xFF) &lt;&lt; 8; // shift low byte to high
    s0 ^= input;
    input = (s0 &amp; 0xFF) &lt;&lt; 8 | (s0 &amp; 0xFF00) &gt;&gt; 8; // swap 8-bit halves
    s0 = (s0 &amp; 0xFF) &lt;&lt; 1 ^ input;
    s1 = s0 &gt;&gt; 1 ^ 0xFF80;
    if s0 &amp; 1 != 0 {
        input = s1 ^ 0x8180; // XOR with one of 2 constants
    } else {
        input = s1 ^ 0x1FF4; // depending on s0 odd or even
    }
    input
}

fn main(){
    // Example usage with given inputs
    let inputs1 = [12567, 60400, 1789, 0, 57460, 55882, 50550];  
    for &amp;input in &amp;inputs1 {
        println!(&quot;{} -&gt; {}&quot;, input, rng(input));
    }
    println!();
    let inputs2 = [64917, 43605, 21674, 46497, 45151];
    for &amp;input in &amp;inputs2 {
        println!(&quot;{} -&gt; {}&quot;, input, rng(input));
    }
    println!();
    // Special case to check bi-directional mapping
    println!(&quot;22026 &lt;-&gt; {}&quot;, rng(22026));
    println!(&quot;58704 &lt;-&gt; {}&quot;, rng(58704));
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-p</code>, 51 bytes</h1>
<p>It's a direct port of <a href="https://codegolf.stackexchange.com/a/250175/72767">Arnauld's Javascript answer.</a></p>

<pre class="lang-perl prettyprint-override"><code>$_=($t=$_&gt;&gt;8^($_&amp;=255))/2^$_&lt;&lt;7^$_^57460^$t%2*40564
</code></pre>
<p><a href="https://tio.run/##NY5BDsIgEEX3XENswKQ6QxlAA/UEXgFWLkwa2ygbE88ugqmbn5@8efmzXB8TlcJTEDwHnsbRRcFTFxSRlAcVefLe1oxktYHI81btNJDRZbNKQvBXaE5TvHf1WK4dY4N/8G7dkHIg64ysgdGQhraYOzwPA5I6Oay8oCJjmQENwNC6IwP2e4AROac@85Jv8/1Z@gvtAaH0y/QF" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1>SM83/Z80, 24 bytes</h1>
<p>Input in <code>bc</code>, output in <code>bc</code>.</p>
<pre><code>79 A8 41 CB 19 1F 38 08
EE 74 F5 80 EE 9E 4F F1
A8 41 4F 78 EE 7E 47 C9
</code></pre>
<p>Explanation and disassembly:<br />
First, here's the pseudocode I used for this.</p>
<pre><code>s0 = r &lt;&lt; 8;
s0 ^= r;
r = swab(s0);           // A
s1 = r &amp; 1;
r &gt;&gt;= 1;                // B
if(!$1) r ^= 0x9E74;
r ^= s0 &amp; 0xff          // C
r ^= 0x7E00             // D
</code></pre>
<p>Now the assembly:</p>
<pre><code>sm64rng:
;; r starts in bc
    ld a,c          ;; 79
    xor b           ;; A8
    ld b,c          ;; 41
;; now s0 in ab, r in ca, after line A.
    rr c            ;; CB 19
    rra             ;; 1F
;; now s0 &amp; 0xff in b, r in ca, s1 in cf, after line B.
    jr c, ifodd     ;; 38 08
    xor $74         ;; EE 74
    push af         ;; F5
    ld a,c          ;; 79
    xor $9E         ;; EE 9E
    ld c,a          ;; 4F
    pop af          ;; F1
ifodd:
;; now s0 &amp; 0xff in b, r in ca, before line C.
    xor b           ;; A8
;; now after line C.
    ld b,c          ;; 41
    ld c,a          ;; 4F
    ld a,b          ;; 78
;; r now in ac
    xor $7E         ;; EE 7E
;; now after line D
    ld b,a          ;; 47
;; r now in bc
    ret             ;; C9
</code></pre>
<p>Note that this doesn't work on Z80studio, because the bit instructions are currently badly broken and <code>rr c</code> doesn't work properly, because it messes up the flags (and taken jumps go to the place two bytes before they should). But after some fixing of the Javascript, it can be tested!</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://n64brew.dev/wiki/MIPS_III_instructions" rel="nofollow noreferrer">MIPS III</a>, <s>68</s> <s>60</s> <s>52</s> 48 bytes</h1>
<pre><code>308800ff
00044a02
01285026
00085a00
016a5825
000b1042
00481026
316c0001
15800000
38429e74
03e00008
38427e00
</code></pre>
<p>Source:</p>
<pre><code>rng:                                    # a0 = seed     
        andi    $t0, $a0, 0xFF          # s_lo
        srl     $t1, $a0, 8             # s_hi
        xor     $t2, $t1, $t0           # s_lo ^ s_hi
        sll     $t3, $t0, 8             # s_lo &lt;&lt; 8
        or      $t3, $t3, $t2           # c = (s_lo &lt;&lt; 8) | (s_lo ^ s_hi)
        
        srl     $v0, $t3, 1             # c / 2
        xor     $v0, $v0, $t0           # xor with s_lo
        
        andi    $t4, $t3, 1             # c odd
        bne     $t4,  $0, exit          
exit:   xori    $v0, $v0, 0x9E74        # xor twice if branch taken, eff. nop
                                        # 7E00 ^ E074
        jr      $ra
        xori    $v0, $v0, 0x7E00             
</code></pre>
<p>Well I had to, didn't I? Even if MIPS is a terrible golfing language as far as assembly languages go, due to every single instruction being 4 bytes (<a href="https://student.cs.uwaterloo.ca/%7Eisg/res/mips/opcodes" rel="nofollow noreferrer">wasting instruction encoding bits</a>) and requiring unintuitive instruction re-ordering to not waste branch delay slots. It still beats out whatever actually was on the game ROM since I didn't have all of the mentioned Nintendo's <a href="https://github.com/n64decomp/sm64/blob/1372ae1bb7cbedc03df366393188f4f05dcfc422/src/engine/behavior_script.c#L39-L66" rel="nofollow noreferrer">extraneous / unreachable code</a>.</p>
<p>-8 bytes from combining left and right shifts as in the math notation in the question. Also rewrote the comments to be much easier to follow.</p>
<p>-8 bytes from being smarter about <code>c</code> calculation thanks to m90.</p>
<p>-4 bytes from <a href="https://n64brew.dev/wiki/MIPS_Assembly#Branch_Delay_Slot" rel="nofollow noreferrer">rearranging instructions</a> to avoid a <code>nop</code> in the return jump branch delay slot. Here the control flow is weird: the branch (with offset 0) to a label at the delay slot causes the xor instruction to be executed twice if the branch is taken, once as part of the delay slot and again after branching, acting effectively as a no-op. AFAICT this is the intended behavior (at least supported by the MARS simulator).</p>
</div>
<div id="pu4" class="pu"><h1>x86 32-bit machine code, 21 bytes</h1>
<pre><code>89 C8 30 C4 86 C4 D1 E8 73 04 66 35 74 9E 66 35 74 E0 30 C8 C3
</code></pre>
<p><a href="https://tio.run/##ZVFfT8MgHHwun@JnjQlsnWk3p8tqfTHZmy8@mThdGKUthlJT2kmz7Ktbwbn57@UXuDvuDmCjnLG@PxWKyTblcK2bVFTnxQ36BUmx/ovVQuX/dEI1DkOrFW2sYt02fLXCOKO6YVRKQsAqIMNuUhIjqkvA9z5G2dwrqw1wagLgzCDPVDXQIgAq7ZoV@XGji3ovi5D3ohjoL61FQjOLZuFzaKLF4gLp@Q9isfgm9rAMgFm7mjeI@LYKcp1KKtS@XJ0zKyhoDYOB3WwI2iLPMQYSiMbTy6sAuhh5aQWv9imaDPtnAvwATJJhQ0gMb4WQHLCBkwSm4XQa2hAPeQf1Ut1RVgjFgVUpn7sKnvMO96bbgw7OwvGD9e0SjFulRa54@llsQDLyaIbDJxLvDmGdCwvN7cS5HR2wbbbuGq7JUrmGjrT3bmvl0nao799ZJmmu@1E5GdthvyWxZ7n8AA" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Uses the <code>fastcall</code> calling convention – argument in ECX, result in EAX.</p>
<p>In assembly:</p>
<pre><code>f:  mov eax, ecx
    xor ah, al
    xchg ah, al
    shr eax, 1
    jnc s
    xor ax, 0x8180^0x1FF4
s:  xor ax, 0xFF80^0x1FF4
    xor al, cl
    ret
</code></pre>
<p>Simplifications used:</p>
<ul>
<li>The XOR constants are combined.</li>
<li>The <code>&lt;&lt; 1</code> cancels out with the later <code>&gt;&gt; 1</code>.</li>
<li>The check <code>s0 &amp; 1</code> is the same as the bit shifted out by the <code>&gt;&gt; 1</code>.</li>
</ul>
<hr />
<h1>x86 16-bit machine code, 18 bytes</h1>
<pre><code>89 C8 30 C4 C1 C8 09 73 04 35 74 1E 35 74 E0 30 C8 C3
</code></pre>
<p>In assembly:</p>
<pre><code>f:  mov ax, cx
    xor ah, al
    ror ax, 9
    jnc s
    xor ax, 0x8180^0x1FF4^0x8000
s:  xor ax, 0xFF80^0x1FF4
    xor al, cl
    ret
</code></pre>
<p>Compared to the 32-bit program, this one saves two bytes by not needing operand-size prefixes.</p>
<p>One more byte is saved by combining the &quot;swap bytes&quot; and &quot;shift right by 1&quot; parts into a rotation right by 9 bits. This leaves [the bit that the original program would shift out] at the top of the register instead; fortunately, that is the same bit that is used to choose between the XOR constants, so it can be corrected for by adjusting those constants.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>34</s> <s>23</s> 22 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>₁‰`Ðr^‚₁β2‰`Ž$×*Žâ∊α^^
</code></pre>
<p>-12 bytes thanks to <em>@CommandMaster</em></p>
<p><a href="https://tio.run/##yy9OTMpM/f//UVPjo4YNCYcnFMU9apgF5J3bZAQSOLpX5fB0raN7Dy961NF1bmNc3P//hkamZuYA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeX/R02Njxo2JByeUBT3qGEWkHdukxFI4OhelcPTtY7uPbzoUUfXuY1xcf91/kcbGpmameuYGZgYGOgYmltY6hjomJqbmAFJUwsLIx0zE0tDcx0TYzMDUx0jQzNzEx0ToJC5jpGRgZGZjqmFuYFJLAA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<p>05AB1E lacks bitshift builtins, so instead we'll use modulo/multiply where applicable.</p>
<pre class="lang-python prettyprint-override"><code>₁‰           # Divmod the (implicit) input-integer by 256
             # (since the input is guaranteed to be a 16-bit integer)
  `          # Pop and push both the quotient and remainder to the stack
   Ð         # Triplicate the remainder
    r        # Reverse the stack from q,r,r,r to r,r,r,q
     ^       # Bitwise-XOR the remainder and quotient together
‚            # Pair the r and r^q together
 ₁β          # Convert it from a base-256 list to a (base-10) integer
2‰           # Divmod it by 2
  `          # Pop and push quotient and remainder separated to the stack
   Ž$×       # Push compressed integer 25204
      *      # Multiply it to the remainder
       Žâ∊   # Push compressed integer 57460
          α  # Take the absolute difference of the two values
           ^ # Bitwise-XOR it to the quotient
^            # Bitwise-XOR it to third remainder-copy that was still on the stack
             # (after which the result is output implicitly)
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (section <em>How to compress large integers?</em>)</a> to understand why <code>Ž$×</code> is <code>25204</code> and <code>Žâ∊</code> is <code>57460</code>.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 55 bytes</h1>
<pre>lambda n:(q:=n&gt;&gt;8^(n:=n&amp;255))//2^n&lt;&lt;7^n^57460^q%2*40564</pre>
<p><a href="https://ato.pxeger.com/run?1=LY1BDoIwFETXeoofE02rIFhpi41wEWwTjKI1-tGKiZ7FDYnRO3kbIbia9xYz8_ycH9W-xPpVJKv3rSr8-CuP-Wm9yQEVuagE0zQ2BBsYMc4pDQJmcLmUBg2XkQjNZcjGUchF9K_fitKB9RAsQpbBjHEhPZCgPchARItZY7wzxkImPJiD1qrfOzuLFRmAn8JgeigtkuxaOWKpnnSgkqIxCu3BvZ13Oe62BKmmtDuv6y5_" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>I'm late to the party, but yet another port of @Arnauld's JavaScript answer.</p>
</div>
<div id="pu7" class="pu"><h2>Batch, 58 bytes</h2>
<pre><code>@cmd/cset/a&quot;q=%1&gt;&gt;8^(n=%1&amp;255),q/2^n&lt;&lt;7^n^57460^q%%2*40564
</code></pre>
<p>Another port of @Arnauld's JavaScript answer.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://gcc.gnu.org/" rel="noreferrer">C (gcc)</a>, 53 bytes</h1>

<pre class="lang-c prettyprint-override"><code>q;f(n){q=n&gt;&gt;8^(n&amp;=255);n=q/2^n&lt;&lt;7^n^57460^q%2*40564;}
</code></pre>
<p><a href="https://tio.run/##fVBha4MwEP3eX3EIHdqmNKZJtFj7ZexXrBVKGjvZllYjTFb863M3zWQdbIEkl3fv3sudWpyU6royyX0TXMvUbLdx5pu7lAkRJCYtlywzm02UmUxEXNKsnLIZp0LypO0KU8ProTB@ANcJ4PoCam1r@7iHFK4hEzIiICmnlEAYxWsCGPRCeIk4Zpjl6xBJfCWpIMBCGXF8IYogY5RJZMYR5W0yWujmolWtj4PL//KCCkH/kOciFKGTd2bORZ2NrUE9HaoZnlo962ow83bNA9s163vcwiPw873yXHV@rsD/@mhhjrrBMpq4cAO2eNfn3P9uIVg6YDYiCcznPTvoxYbJjtNFtWHCPWWf3GQtZnO/Dm5Rjeg4st9llwopue9Nj7DYAp5TuzPYWE3AkrF3m6Z672TbSdt9qPzlcLLd4u0T" rel="noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Port of <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a>'s <a href="https://codegolf.stackexchange.com/a/250175/9481">JavaScript answer</a>.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 173 bytes</h1>
<pre><code>.+
16$*0$&amp;$*
+`(1+)\1
$+0
01
1
.*(.{8})(.{8})
$2$1
(?&lt;=1.{7})(1|(0))
$#2
1$
11001111001110100
^((.{8}).{7}).
$+0${1}1110000001110100
+`1(.{15})(1|(0))
0$1$#3
1
01
+`10
011
1
</code></pre>
<p><a href="https://tio.run/##RY69CsJAEIT7eY2scsnBsZO/i6BY@hIisbCwsRC7mGc/9xLFLWZh9tthnrfX/XFNG3caU/BgL5XKVir40dGXZ0K8QgkiVC5Mw1yuCqmFcMf9gWGK5vLttDS7qEEBqUp@VW3h4tbHhQ45VibOC5Lnh/mRxrH7J6pQisYKWAu75jZWJ6VeW@MZhx3aptcO3RC1/QA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes less slow test cases. Explanation:</p>
<pre><code>.+
16$*0$&amp;$*
</code></pre>
<p>Convert to unary, but also prefix 16 <code>0</code>s, so the binary value below has at least 16 digits.</p>
<pre><code>+`(1+)\1
$+0
01
1
</code></pre>
<p>Convert to binary.</p>
<pre><code>.*(.{8})(.{8})
$2$1
</code></pre>
<p>Swap the bottom eight bits with the next eight, and discard any remaining zeros.</p>
<pre><code>(?&lt;=1.{7})(1|(0))
$#2
</code></pre>
<p>XOR the top eight bits into the bottom eight bits, i.e. toggle any digit seven digits after a <code>1</code>.</p>
<pre><code>1$
11001111001110100
</code></pre>
<p>Append <code>0x8180 ^ 0x1FF4</code> if the value ends in a <code>1</code>.</p>
<pre><code>^((.{8}).{7}).
$+0${1}1110000001110100
</code></pre>
<p>Replace the value with two copies shifted eight bits and one bit right and also append <code>0xFF80 ^ 0x1FF4</code>.</p>
<pre><code>+`1(.{15})(1|(0))
0$1$#3
</code></pre>
<p>(Destructively) XOR all of the values together.</p>
<pre><code>1
01
+`10
011
1
</code></pre>
<p>Convert to decimal. Note that this takes <code>O(n²)</code> time, which makes the test cases take up to 25 seconds each on TIO, so I've also written a Retina 1 port but using fast binary to decimal conversion: <a href="https://tio.run/##RY07TgNBEETzuoYba3ZGanWN52cJyyGXQGYJCEgIgGy9PhYH4GLLrA2ig2qp9Pr1@8vn69szlzv3MC4awOJNtp4Io2MYHgmZOBuMINQ7ndo83BIShXDH@wN1qr3l2dnQ600EBaQZ@ZvWF07udniltYvjbKv9Cq3zB4aPkR1l/peaUDY7qDsenPr1i9KLi@IH2Yp/wmU8QcP3l4i6ZWHMpaJY6jbWtoch11R65tYiStqzIu2KZUSWmpB6VRGjxYLcqqUf" rel="nofollow noreferrer" title="Retina – Try It Online">Try it online!</a> Link includes test cases.</p>
</div>
<div id="pu10" class="pu"><h1>JavaScript (ES6), 45 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>n=&gt;(q=n&gt;&gt;8^(n&amp;=255))/2^n&lt;&lt;7^n^57460^q%2*40564
</code></pre>
<p><a href="https://tio.run/##JcrBjoIwGATgu08xl9XWAGKlRYPtbZ@CtEmDICr5q6JejM@O3extvpk5@5cfm/vp@kgpHNqp0xNpw26ajNk6RnMtpOR8JRzt96UjJ8tC5e72I5ZFLlUxVTVqrIVUZYISNolSxW4dJf8lRC5Ugg0s7Czrwv3XNz1jNSjBBZZDG7xnwNA@4KFR2yoq/liFS5pWoFh2jDiHz67PsY/x79EEGsPQZkM4Mp@dw4nYAqnBgsf5w6cv" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/250173/">250173</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




