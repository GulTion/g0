<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::70290</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>1244</td><td>Python3</td><td>240203T185447Z</td><td><a href="https://codegolf.stackexchange.com/questions/70290/solve-an-0h-n0-board/269756#269756">Ajax1234</a></td></tr>
<tr d-ix="1"><td>224</td><td>Haskell</td><td>160216T055912Z</td><td><a href="https://codegolf.stackexchange.com/questions/70290/solve-an-0h-n0-board/73257#73257">Michael </a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3 1244 bytes</h1>
<p>Very long, but optimized to crunch all the test cases (and some others) in ~0.5 seconds.</p>
<pre class="lang-py prettyprint-override"><code>E=enumerate
from itertools import*
M=[(0,1),(0,-1),(-1,0),(1,0)]
def T(v,D,d):
 s,c=[],0
 for l,X,Y in D.pop(1):s+=[(l[0][1],X,Y)];c+=len(l[0][1]);D[0]+=[(l[1:],X,Y)]
 if c&gt;v:return
 q=[(D[0],c,s)]
 while q:
  O,c,s=q.pop(0)
  if c==v:yield s;continue
  if[]==O:continue
  q+=[(O[1:],c,s)]
  L,X,Y=O[0]
  for i,(_,U)in E(L):
   if 0==i%2:
    for I in range(1,len(U)+1):
     if len(Q:=[j for k in L[:i]for j in k[1]]+U[:I]+(L[i+1][1]if I==len(U)and L[i+1:]else[]))+c&lt;=v:q+=[(O[1:],c+len(Q),s+[(Q,X,Y)])]
def B(x,y,v,d):
 q=[(x,y,X,Y,[])for X,Y in M]
 while q:
  x,y,X,Y,p=q.pop(0)
  if not(V:=d.get(g:=(x+X,y+Y)))or'#'==V:yield([(a,[*b])for a,b in groupby(p,key=lambda x:d[x]!='.')],X,Y);continue
  q+=[(*g,X,Y,p+[g])]
def f(b):
 d={(x,y):v for x,r in E(b)for y,v in E(r)}
 q=[([(i,d[i])for i in d if d[i].isdigit()],d)]
 while q:
  o,d=q.pop(0)
  if[]==o:return d
  W=[]
  for(x,y),v in o:
   D={0:[],1:[]}
   for V,X,Y in B(x,y,v,d):
    if V:D[V[0][0]]+=[(V,X,Y)]
   W+=[((x,y),v,[*T(int(v),D,d)])]
  if all(i[2]for i in W):
   (x,y),v,L=W[0]
   for w in L:
    D={**d}
    for l,X,Y in w:
     for j,k in l:D[(j,k)]='O'
     if(j+X,k+Y)in D:D[(j+X,k+Y)]='#'
    for X,Y in M:
     if'.'==D.get(H:=(x+X,y+Y)):D[H]='#'
    q+=[(o[1:],D)]
</code></pre>
<p><a href="https://tio.run/##XVVtb9s2EP48/gouxiDSYghLst1UGfdhcIcGSJd1aJwWnFDIluwyUSRFUpwYRX57dkdKbhoDosh7e@6Oz8n1vvtWldFJ3Tw/v1N5eX@bN2mXk01T3VLT5U1XVUVLzW1dNd2YfFCaTUTABazH@DoOxAReuCYkyzf0E9uJhch4TGgr1konYkLopmpoIT6LL9SUdCHrqmYBj1sfohV6kuggQSVPTte@KvJyEPLTBWycVRD3NoSaDV3/sYubvLtvSkLvQI92Yi1aVD98M0VO7yABeoEydWcBJxwE6KrULt6bvMhoe7quys6U97lV6USpi/iF6A6hLyx0H5ueYxLqAuDggGUZwb6KSw51vWPnWLUFmShlfgvtyVqdYeFNWm5zaBVWeMn9wFlbexR9jJW@ttY3aH2uY5Pg6RpPN9COxL/U8Vnis3Nt/AAbBJ5nSrl4aZlRq4iTvGhznXDur3@HWl9W4VsgLlpfs4@un/29/ckexV7s3M1hS/EIBgICYRb95X34ucGDUf2qyWXVsWWsMrnNO7aNFXv0P4u9/4VzXjXeyFNq6e6AaZYKPV45kFSsEGTbVPf1as9qcZPvVZHerrKUPsaZfkx@VZ70uKPC6eurGm9dMr7eDmVt2AoLytR3LIjHO9vgR9FQe2MrCwt1u2PDn1zxmhmRaeOyMqjMsCwUSdNmZms6Bllkr/hWieznRiClqp6pNAPRFUyEY47NxwFXlggL9X0Sw7wEsDyRnjjLYWp@uh9HmmW80EuclElih2Q5DAjA4LlHgPZ@Yqbs2I7byUysCfinRcGMDpNDjVcu9uB3rq4cz20mD5aUDhxSHY@zpwO9D7P90FPa8lZYHheQJYM9T5R34Q2MZ9dAiBsgBH4QrEV/BquRdwg8sO4wKXD7Si0srd6/pBWEeP/D1bKhspRf8OS5DamiR0dHRIaSyAAe@eKBM@raYDAKrMaZSRKGo9AZRINB/5viLkJzSaYzWEM4geytUxNQzEfTqcOR8J4Nu2gOcfsoc7Sz6j6P6QHmjZQjFONyAhkFzmnmUsfX9MSGHNkAxIrmfWGBDG36DkSekCFcDzPrYWaQtIwi54RZhBEB@7mM@swj59QjDzDoRd7ItydQo4xQNscGoN1cuh1Gxxn851@2crxdqXyXFqztGpg8TvpZ3Nv5ilcw3npvL9GOmqUhzA9cOcUv2kFEaN0gn73/Sk9eV6Zkt2nNPLcXEJgTi9tVX1dV2mSsBexf@iHUemx@MH5jCviPY39XZS5oK9u6MC4uBxgb5C/rDZm/iEZcSRtXRJ/MsTcOYeoJOAQc19CukV2ndp3x5/8B" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Haskell, 224 bytes</h1>

<p>Not fully tested, because it's so slow (at least <code>O(n*2^n^2)</code>). </p>

<pre><code>t=1&lt;2
x!p|p&lt;0=0|t=mod(div x$2^p)2
l#x=[[sum$map(p&amp;)[-1,1,l+1,-l-1]|p&lt;-[q..q+l]]|q&lt;-[0,l..l*l],let i&amp;v|x!i&lt;1=0|t=x!(i+v)+(i+v)&amp;v]
b%v|b&lt;1=t|t=b==v
s b|l&lt;-length b-1=[l#x|x&lt;-[0..2^l^2],and.map and$zipWith(zipWith(%))b(l#x)]!!0
</code></pre>

<h1>Explanation:</h1>

<p>Basic idea is to represent a board of <code>Red, Blue</code> pieces as a list of lists of <code>0, 1</code>, where the list of lists is packed into a single integer for easier enumeration. All such integers for the board size are generated and converted to a form with neighbor counts. The first such board that is a valid solution of the input is returned.</p>

<pre><code>-- integer x at position p with out of bounds defined to be 0 (so no bounds checking)
(!) :: (Integral b, Integral r) =&gt; r -&gt; b -&gt; r
x ! p | p &lt; 0     = 0 
      | otherwise = mod (div x (2^p)) 2


-- Sum of values from position p along vector v (x is implicit)
-- Note that a cartesian vector (x,y) in this representation is (l*x + y)
(&amp;) :: (Integral a, Integral b) =&gt; b -&gt; b -&gt; a
p &amp; v | x ! p == 0 = 0
      | otherwise  = x ! (p+v)  +  (p+v) &amp; v


-- Value of board at position p (implicit x, l)
value :: Integral a =&gt; a -&gt; a
value p = sum $ map (p&amp;) [-1, 1, l+1, -l-1]


-- Integer to board, where l is length, x is input integer
(#) :: (Integral t, Integral a) =&gt; a -&gt; t -&gt; [[t]]
l # x = [[sum $ map (p&amp;) [-1,1,l+1,-l-1] | p &lt;- [q..q+l-1]] | q &lt;- [0,l..l*l]]


-- Comparison operator, to see whether a solved board is a solution of the input
(%) :: (Num a, Ord a) =&gt; a -&gt; a -&gt; Bool
b % v | b == 0    = True
      | otherwise = b == v


-- Check one possible solution
check :: Integral a =&gt; [[a]] -&gt; Int -&gt; [[a]] -&gt; Bool
check b l x = (and . (map and)) zipWith(zipWith (%)) b (l # x)

-- Solver
solve :: Integral t =&gt; [[t]] -&gt; [[t]]
solve b = [l # x | x &lt;- [0..2^l^2], check b l x]
  where
    l = length b
</code></pre>

<p>The part that could probably be most golfed is: <code>and.map and$zipWith(zipWith(%))</code>. Otherwise, I caught a few off-by-one errors that added length and could probably be golfed more.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/70290/">70290</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




