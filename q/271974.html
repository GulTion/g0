<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::271974</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>188</td><td>JavaScript ES11</td><td>240320T010221Z</td><td><a href="https://codegolf.stackexchange.com/questions/271974/can-i-clear-the-grid/271988#271988">Arnauld</a></td></tr>
<tr d-ix="1"><td>109</td><td>Charcoal</td><td>240320T073448Z</td><td><a href="https://codegolf.stackexchange.com/questions/271974/can-i-clear-the-grid/271992#271992">Neil</a></td></tr>
<tr d-ix="2"><td>396</td><td>Python3</td><td>240319T220759Z</td><td><a href="https://codegolf.stackexchange.com/questions/271974/can-i-clear-the-grid/271982#271982">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES11), 188 bytes</h1>
<p><em>-1 thanks to l4m2</em></p>
<p>Expects a matrix of digits (with 0 for <em>empty</em>) and returns a Boolean value.</p>

<pre class="lang-javascript prettyprint-override"><code>f=m=&gt;m.some(z=(r,y)=&gt;r.some((k,x)=&gt;k?z=0:(h=M=&gt;[-1,0,1,2].map(g=d=&gt;(v=m[Y=y+d%2*++k]?.[X=x+~-d%2*k])&lt;1?g(d):k=M?h[v]?M[Y][X]=0:0:![h[v]=h[v]+v/v|0]))()|h(M=m.map(r=&gt;[...r]))|M&lt;m&amp;&amp;f(M)))!=z
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=hVJBTsMwEBRXXtFWorKJY-JwQVU3uXHLjUMr40NFkkZK3KC0jZqo4iNceoBf8BH4AN_AaWyRirZcVt7Zndkd269vizyMdrv39Sq27z4_YpDgSbrMZYRqQAWpMHhFm6OUbFSW-jU4I5RAAB63GXEII66gcvaM5hCCh0qQfAqVFV6515aVCp_yCWysF7sBUoHHzJ-jEI9SCPyEl8IP-FTwiVCqzqjPGwiaYJU35dYRGCO8TVAAcj-jUFMppYXCt8FYDocxCjDGfahbD18X30_5YplnEc3yORrwh2K9SioxwJddPEacO6THSE9FV5Aev90fm9hknZqadILq6ua20wh1aqepplkfFXYw9ThVy2qq-9vcUvVgXTOyjdCB0uBxwe9n2fLMnRhjrjHG_mb_2GRmH8cscbyju3znCs74Z_pR2vc2f_cH" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = m =&gt;                          // f is a recursive function taking a matrix m[]
m.some(z = (r, y) =&gt;              // for each row r[] at index y in m[]:
  r.some((k, x) =&gt;                //   for each value k at index x in r[]:
    k ?                           //     if k is not zero:
      z = 0                       //       clear z
    :                             //     else:
      ( h = M =&gt;                  //       h is a helper function taking M
        [-1, 0, 1, 2]             //       we have 4 directions to test
        .map(g = d =&gt;             //       for each direction d:
          ( v = m[                //         load in v the value of the cell at:
              Y = y + d % 2 * ++k //           Y = y + dy * k
            ]?.[                  //
              X = x + ~-d % 2 *k  //           X = x + dx * k
            ]                     //
          ) &lt; 1 ?                 //         if this cell is defined and empty:
            g(d)                  //           move further in the same direction
          :                       //         else:
            k =                   //           reset k to 0 in all cases
            M ?                   //           if M is defined:
              h[v] ?              //             if h[v] is greater than 0:
                M[Y][X] = 0       //               clear M[Y][X]
              :                   //             else:
                0                 //               do nothing
            :                     //           else:
              ![ h[v] =           //             set h[v] = 0 if it's undefined
                   h[v] +         //             or h[v] = h[v] + 1 if it's 0
                   v / v | 0 ]    //             and v is defined
        )                         //       end of map()
      )() |                       //     1st call to h with M undefined
      h(M = m.map(r =&gt; [...r])) | //     2nd call to h with M = copy of m[]
      M &lt; m &amp;&amp; f(M)               //     do a recursive call if M was modified
  )                               //   end of some()
) != z                            // end of some() / success if z is not 0
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 109 bytes</h1>
<pre><code>ＷＳ⊞υ⁻ι ≔⟦υ⟧υＦυＦＬιＦ⌕Ａ§ικ.«ιＪλκ≔Ｅ⁴ＫＤＬ⁺ι⌊ι✳⊗μθ≔ＥθΦ⁻⪫μω.¬πηＦΦ⁴∧§ημ⊖№η§ημ§≔§θμ⌕§θμ§ημ.≔⪪⪫ＫＡωＬ⌊ιεＦ¬⁼ει⊞υε⎚»⊙υ⬤ι¬⁻λ.
</code></pre>
<p><a href="https://tio.run/##XVE7b8IwEJ7JrzgxnSWXqRtTBCUClSqCblWHNHGJhWPnYZdWVX97eo4DCCJF9vnO38t5mbW5yVTfn0qpBOBa187ubSv1ARmD1HUlOg5bqV2HksMUpozNo7jr5EHjm3vn4Kj@NC2gYzCsz0IfbImSjfVK6iJWCmO71oX49jBHRlAzgoLfaJISm6XxeTTZuKp@Naj8BJUjzTar8ZFDKsRxKVuRW2n0mSVVQRgplJWrPCthX8eWxn0oUWA1nDd3qA2HlVRWtBgcbozUWHE4jfo4vBiL9XC39HdHQ8MVkhTr4mKr5FB5apG3ohLaEunCOHJGjZuZ4YOg4tw4r00A8ZHdn91iBH1XN/taSRv0@5x83iz4GIO6DUhczHiDT43LVIeCg@9eXn0YWiiRtUi7vyg8VKx/fNMzyJBPyE6NT0rfvO93kMAMkiiBHa2ziH7a@ZpOYRf1D1/qHw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes input as in the diagrams in the question but any character other than <code>.</code> and space may be used as a colour. Explanation:</p>
<pre><code>ＷＳ⊞υ⁻ι ≔⟦υ⟧υＦυ
</code></pre>
<p>Input the board and start a breadth-first search with that position.</p>
<pre><code>ＦＬιＦ⌕Ａ§ικ.«
</code></pre>
<p>Loop over all of the indices of <code>.</code>s in the current position.</p>
<pre><code>ιＪλκ
</code></pre>
<p>Temporarily draw the position to the canvas and jump to the current <code>.</code>.</p>
<pre><code>≔Ｅ⁴ＫＤＬ⁺ι⌊ι✳⊗μθ
</code></pre>
<p>Peek in all four orthogonal directions.</p>
<pre><code>≔ＥθΦ⁻⪫μω.¬πη
</code></pre>
<p>Get the first non-<code>.</code> character (if any) in each direction.</p>
<pre><code>ＦΦ⁴∧§ημ⊖№η§ημ
</code></pre>
<p>Loop over those characters that appear more than once.</p>
<pre><code>§≔§θμ⌕§θμ§ημ.
</code></pre>
<p>Replace the character with a <code>.</code></p>
<pre><code>≔⪪⪫ＫＡωＬ⌊ιε
</code></pre>
<p>Read the position back from the canvas.</p>
<pre><code>Ｆ¬⁼ει⊞υε
</code></pre>
<p>If this was a new position (i.e. at least two letters were replaced) then add it to the list of positions to search.</p>
<pre><code>⎚
</code></pre>
<p>Clear the canvas ready for the next iteration.</p>
<pre><code>»⊙υ⬤ι¬⁻λ.
</code></pre>
<p>See if any position has no letters left.</p>
</div>
<div id="pu2" class="pu"><h1>Python3, 396 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(b):
 q,s=[{(x,y):v for x,r in E(b)for y,v in E(r)}],[]
 for d in q:
  if sum(d.values())==0:return 1
  for i in d:
   if 0==d[i]:
    D={}
    for X,Y in[(1,0),(-1,0),(0,1),(0,-1)]:
     j,k=i
     while(c:=(j+X,k+Y))in d:
      if d[c]:D[d[c]]=D.get(d[c],[])+[c];break
      j,k=c
     if(U:={**d,**{I:0 for J in D for I in D[J]if len(D[J])&gt;1}})!=d and U not in s:q+=[U];s+=[U]
</code></pre>
<p><a href="https://tio.run/##dZBNU8IwEIbv/RXriaQEpqkXp0w84UHuzMhkckCSagUKpAVlOv3tNUlTqQqX7Lvd592P7s/l@y6/f9jrpnliKj9ulV6WKpAqhRS94iSAAykYr9AXOePkBOlOwxfRkOXwZOo2PZNTm2pcC8JF4CBpvx2MH7IUiuMWyfFpuTmqAmHMWJRoVR51DtQAFs8sLi1u@YgxyTPhUpiyqnbCci9kYUiOKIkwQaM2RIS6d0Sx98AHWbOslZ/v2UahVcLQx/CFrIcLjH9mteMkX4lkym0QbDp@UyWy2tyChyZOXrVarj1uG68C70TzhFVhKEkYVs9J5Dac2UumTj47yWfCzNioHFmJH2ld4zsmYZlLmEO@Ky1VJIch43MxKVxo9jrLS5QiziMClIB5Y0GA3ztpX5v1agLj4K8p9ljLdC16tWumDvPSfPs16a/Jt/Km@IK1Jj/M17qGlxaD0SCMo9urx93q9H928xDazY1@D7vU@uv1zrt6G/W/t/kG" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/271974/">271974</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




