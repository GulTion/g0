<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::259698</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td>Scala</td><td>231104T025944Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/266454#266454">138 Aspe</a></td></tr>
<tr d-ix="1"><td>058</td><td>Wolfram Language Mathematica</td><td>230404T055119Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259717#259717">att</a></td></tr>
<tr d-ix="2"><td>047</td><td>Uiua</td><td>231010T210442Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/265905#265905">tzlil</a></td></tr>
<tr d-ix="3"><td>030</td><td>Pyth</td><td>230403T184953Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259700#259700">CursorCo</a></td></tr>
<tr d-ix="4"><td>031</td><td>Pyth</td><td>230404T042341Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259715#259715">isaacg</a></td></tr>
<tr d-ix="5"><td>132</td><td>JavaScript ES6</td><td>230403T173832Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259699#259699">Arnauld</a></td></tr>
<tr d-ix="6"><td>074</td><td>Raku</td><td>230404T193038Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259738#259738">Sean</a></td></tr>
<tr d-ix="7"><td>022</td><td>MATL</td><td>230404T172258Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259737#259737">Luis Men</a></td></tr>
<tr d-ix="8"><td>068</td><td>Charcoal</td><td>230403T235726Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259706#259706">Neil</a></td></tr>
<tr d-ix="9"><td>187</td><td>Wolfram Language Mathematica</td><td>230403T185604Z</td><td><a href="https://codegolf.stackexchange.com/questions/259698/implement-grambulation/259701#259701">lesobrod</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="http://www.scala-lang.org/" rel="nofollow noreferrer">Scala</a>,</h1>
<p>449 bytes, it can be golfed much more. Golfed version. <a href="https://tio.run/##lVFRS8MwEH7vr7incbe1xdYJ0i0DwRcfBEF8EpF0tjMuTWqbacvob69pOmRMEbyX5HLfffd9uXrNJe9FUerKQD0kYcHNa/jseTp9y9YGbrlQsO9fshwMquRa71KZEcMIdsoICSo0@kYZsn0lbtnKtddCYXgxdfc7MZ651LrCsfxeGZxPt8E52QjrXRGsIPibcq1rDP7F6Q2acywTHEX7B@3E9h9cAjZ@S6z0RI7Nqp1MGiuhJcdV6k@Mp00Q@THNsJm1lMk6gwG5ZL9BWwsMHHAWwQl2yU55f4CPmY6Gds5BgSo6fLuv4u8FDB5GC3YtMS2GlPupSyNa5OgccH@gTIm6HsCx2XUirzZ1AldVxdvHe1MJtXmiBB6UMMBg74GN0r4aqbDA6DL2IZ6fEdlC53X9Fw" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>def t(n:Double)=(1 until n.toInt).map(k=&gt;math.sin(.5*math.Pi*math.floor(math.sqrt(4*k-3)))).sum-&gt; -(1 until n.toInt).map(k=&gt;math.cos(-.5*math.Pi*math.floor(math.sqrt(4*k-3)))).sum
def f(p:(Double,Double))={val (x,y)=p
if(x&gt;y&amp;&amp;x&gt; -y)math.pow(2*x-1,2)+(x+y)else if(x&lt;=y&amp;&amp;x&gt; -y)math.pow(2*y,2)-(x+y)+1 else if(x&lt;=y&amp;&amp;x&lt;= -y)math.pow(2*x,2)-(x+y)+1 else math.pow(2*y-1,2)+(x+y)}
def m(n1:Double,n2:Double)={val(x,y)=t(n2);val(a,b)=t(n1);f((2*x-a,2*y-b))}
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##lVJNS8NAEL3nV7xT2a1JMLGCFFsQvHgQBBEUEUlqUtcmu3F3qwnS3x6n@Wgr1YJ7GObrvX0zjJlFWVTXIi@UtjDryM8j@@o/O46K35KZxXUkJL4c4CVJYdX9A5NjXKplnCV8DNZ6bp/BpOkFPqIMJUUswFJakUH6Vl1Jy4m/YAtMpjBCMv8UQ9wIMmmmlGbmXVs2onABDyecnm@W@YaxIkbvAOVMGeb9g5OVLipO7srpJky1ymnGQglp98fj/eg/5mxZKNWgmrRIWYkp6R0MsHY8qhfqk4XDkkQELkKOIwKSaf4HkswkLex88huuajBejyET/Ikjb@fDQ8CO@1dNm53kdAJMBv3sLmS4cwKHFtLeS8i3lchFvK0EbaVbercdamklxXxfRqTnZowLraPq8dZqIedPpOFOCrtRUFDWZpI1/cFZSHSj445qVdff" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-scala prettyprint-override"><code>import scala.math._

object Main {
  def toXY(n: Double): (Double, Double) = {
    val x = (1 until n.toInt).map(k =&gt; sin(.5 * Pi * floor(sqrt(4 * k - 3)))).sum
    val y = -(1 until n.toInt).map(k =&gt; cos(-.5 * Pi * floor(sqrt(4 * k - 3)))).sum
    (x, y)
  }

  def fromXY(point: (Double, Double)): Double = {
    val (x, y) = point
    if(x &gt; y &amp;&amp; x &gt; -y) pow(2*x - 1, 2) + (x + y)
    else if(x &lt;= y &amp;&amp; x &gt; -y) pow(2*y, 2) - (x + y) + 1
    else if(x &lt;= y &amp;&amp; x &lt;= -y) pow(2*x, 2) - (x + y) + 1
    else pow(2*y - 1, 2) + (x + y)
  }

  def main(n1: Double, n2: Double): Double = {
    val (x, y) = toXY(n2)
    val (a, b) = toXY(n1)
    fromXY((2*x - a, 2*y - b))
  }

  def main(args: Array[String]): Unit = {
    println(main(182, 240))
  }
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, <s>60</s> <s>59</s> 58 bytes</h1>
<pre><code>1//.i_/;{1,-2,1}.Tr/@+I^⌈2√Range[{##,i}-1]⌉!=0:&gt;i+1&amp;
</code></pre>
<p><a href="https://tio.run/##TU3NasJAEL7PU0xjKS2uJrOJMakoHtqDt1K9hbQEiXZBY4hbsIbcLfgEPp4vks7GWnr4hvlmvp91oj/SdaLVPKkXw5psu6ve7UFJoiMFVd1ZYY/bk7fz8SDPh9Nrki3TqGy1hKo6FJ@P3zdD53Gk2nRXP20iKHfiS@wrHOJs87zLi3S7VZtsPNWFypbTfKX0eKWydAAvfNCRkVfYGeEi4i0WaOG9JXDPy4MVgyiNWPxzR7fTeaFyPcnyT325CwusuIprRELEkIGyBxcmDSMCxpXhLyPnT2k81PyYkWFeI3QB@z4vBuhL/vWxgZnAFzb0TEgYcIqLlxaU/CMfPYcbSIY@UCBReqbPdXyQ3rVPBgSMK/NCQJczw8Bc2IcBb2TapcPtPid4jZIcwB6nBE277P8A" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Input <code>[x, y]</code>.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua</a>, 47 chars</h1>
<pre><code>f←⁅≡/+○[¯+η.÷2×π⌊√-3×4↘1⇡]
+1⊗-∶×2⊃∩f(∵f↘1⇡ⁿ3+)
</code></pre>
<p><a href="https://uiua.org/pad?src=ZiDihpAg4oGF4omhLyvil4tbwq8rzrcuw7cyw5fPgOKMiuKImi0zw5c04oaYMeKHoV0KZyDihpAgKzHiipct4oi2w5cy4oqD4oipZijiiLVm4oaYMeKHoeKBvzMrKQp-fn4K4o2kLj0yNSBnOSAxCuKNpC49MTEgZzIgMQrijaQuPTEgZzIgMTEK4o2kLj0yNSBnMTAgMTEK4o2kLj01IGcxIDkKIyBleGNlZWQgdGltZW91dAojIOKNpC49MTMgZzE5IDQKIyDijaQuPTYyIGc3NiA2Cn5-fg==" rel="nofollow noreferrer">Try It Online!</a></p>
<p>takes input as y,x on the stack</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, <s>65</s> <s>47</s> <s>45</s> <s>38</s> <s>34</s> <s>31</s> 30 bytes</h1>
<p><em>-18 bytes by changing the loop structure</em> <br>
<em>-2 bytes by altering some assignment</em> <br>
<em>-7 bytes by switching to integer coordinates</em> <br>
<em>-1 byte from swapping input order, -3 bytes from better list construction</em> <br>
<em>-3 bytes by switching to imaginary coordinates</em> <br>
<em>-1 byte from better representation of i</em></p>
<pre><code>xJ+bm=+Z^.j).Ey@d2^sQ3_i@LJQ_2
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/v8JLOynXVjsqTi9LU8@10iHFKK440Dg@08HHKzDe6P//aCMdw1gA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Takes input as a list of integers <code>[y,x]</code>. Generates a list <code>J</code> of spiral coordinates in the imaginary plane, then gets the index in <code>J</code> for <code>2*J[y] - J[x]</code>. To generate this list, we take advantage of the fact that <code>ceil(2*sqrt(x))</code> stays the same values for increasingly long intervals, in the exact same way that the direction of travel when traversing this kind of spiral does.</p>
<h3>Explanation</h3>
<pre><code>                                  # implicitly assign Z = 0 and Q = eval(input())
 J                                # assign J to
    m             ^sQ3            # map range(sum(Q)**3) over lambda d
     =+Z                          #   add and assign to Z
        ^.j)                      #   i to the power of
            .E                    #   ceiling
              y@d2                #   2 * sqrt(d)
  +b                              # prepend a char (to offset list)
xJ                                # find the index in J of
                        @LJQ      # map x and y to their coordinates in J
                      _i    _2    # double the first and subtract the second
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, <s>49</s> <s>32</s> 31 bytes</h1>
<pre><code>@Jsua_MCG+LheeGUGysQ]]1s-MPBxLJ
</code></pre>
<p><a href="https://tio.run/##K6gsyfj/38GruDQx3tfZXdsnIzXVPdS9sjgwNtawWNc3wKnCx@v/fxMdQ0sA" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>Takes input as <code>[y, x]</code>.</p>
<ul>
<li><p><code>Jsua_MCG+LheeGUGysQ]]1</code>: Generate the spiral to a sufficient size, then collapse it to a flat list and save it in <code>J</code>.</p>
</li>
<li><p><code>xLJ</code>: Find the index in J of the two inputs.</p>
</li>
<li><p><code>s-MPB</code>: Convert to the target index.</p>
</li>
<li><p><code>@</code>: Index into <code>J</code> to get the target number.</p>
</li>
</ul>
</div>
<div id="pu5" class="pu"><h1>JavaScript (ES6), 132 bytes</h1>
<p>Expects <code>(p)(q)</code> and returns <span class="math-container">\$p\lozenge q\$</span>.</p>

<pre class="lang-javascript prettyprint-override"><code>p=&gt;q=&gt;((g=(t,h=o=[1],v=n=x=y=0)=&gt;n==t|x+[,y]==t?x:g(t,(i=o[o[[x-=h,y-=v]]=++n,[x-v,y+h]])?h:v,i?v:-h))(q),Y=2*y,g([2*x-g(p),Y-y]),n)
</code></pre>
<p><a href="https://tio.run/##dZBNboMwEIX3PQVLTzCNbf4M0sA5KuRFlCZAFWHSIARS704dIFJq0o1lzTfvzZv5OvSH2/G7bjuv0Z@n6YxTi9kVM0JKJB2tUGPBFe2xwQFHZIBZg9j9DG5BR2V@@ZCWppHUqAtdFIOHFR097JVC122oKfR0dCulIK/SntZ5n3oVALkC/UCxG2lJCrEbvJK0puKNCmgD01E3N305vV90Sc7EcTiYJwFw9ntHhG8vsVgw5zbmf/BLytm/3gnMA2a8oXymwWrt2ziO7jhacCQ26hjmZ1HHNo6EwWG4JkvkJpoPc/yFb@TcDA/YuhgXSWQ1cGn8RbA2@MzmInheXUj7cqbyzIPEDuDf8ydyDbCZ70gJc8pFzzbniZjhwcOfM5uH93zycR8RT78" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>How?</h3>
<p>The helper function <span class="math-container">\$g\$</span> expects a target <span class="math-container">\$t\$</span> which is either the index <em>or</em> the coordinates of an element in the spiral.</p>
<p>Whenever <span class="math-container">\$g\$</span> is called, it starts at the origin and walks through the spiral until the target is reached, keeping track of its index <span class="math-container">\$n\$</span> and its position <span class="math-container">\$(x,y)\$</span> (all these variables being available in the global scope).</p>
<p>We first invoke <span class="math-container">\$g(q)\$</span> to get the coordinates <span class="math-container">\$(X,Y)\$</span> of the 2nd element, then <span class="math-container">\$g(p)\$</span> to get the coordinates <span class="math-container">\$(x,y)\$</span> of the 1st element, and finally <span class="math-container">\$g([2X-x,2Y-y])\$</span> to get the index of <span class="math-container">\$p\lozenge q\$</span>.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://raku.org/" rel="nofollow noreferrer">Raku</a>, 74 bytes</h1>
<pre><code>{.first(2*.[$^b]-.[$^a]):k given ½,0,|[\+] flat (1,*i...*)Zxx(1,1.5...*)}
</code></pre>
<p><a href="https://tio.run/##RY5NCoJAAEav8i0CfxoHR3JEMQ@SGihoDImFWoyYF@gCnaZNR@ki5sym1XvvW33Xqmv40t9KiLYWMoq/r2eyTLQWXT@Ynk3TzbHMHYUit6IzTuJetfi8iUseabbNUTfFAJMRW1BKbesg5RqM@rrmpb50iBnChCh4Gn8yV0kIpjvETjHg4LoDsEAJ9@D7CZwEaSYJsjHHhL4YsYaB9TEMglH5XpnU04h5@QE" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<ul>
<li><code>{ expr1 given expr2 }</code> is the function body.  It evaluates <code>expr1</code> after assigning the value of <code>expr2</code> to the <code>$_</code> topic variable.  <code>expr2</code> here is an expression for the lazy infinite sequence of spiral coordinates, in the form of complex numbers.</li>
<li><code>(1, *i ... *)</code> is the sequence of <code>1</code>, <code>i</code>, <code>-1</code>, and <code>-i</code>, repeated infinitely.</li>
<li><code>(1, 1.5 ... *)</code> is the infinite arithmetic sequence 1, 1.5, 2, 2.5, 3, 3.5, ....</li>
<li><code>Zxx</code> <code>Z</code>ips the two preceding sequences together using the <code>xx</code> replication operator: <code>1 xx 1</code>, <code>i xx 1.5</code>, <code>-1 xx 2</code>, <code>-i xx 2.5</code>, ....  The half-integer replication numbers are rounded down, producing <code>(1)</code>, <code>(i)</code>, <code>(-1, -1)</code>, <code>(-i, -i)</code>, <code>(1, 1, 1)</code>, <code>(i, i, i)</code>, ....</li>
<li><code>flat</code> flattens that list of lists.</li>
<li><code>[\+]</code> scans that list with the addition operator <code>+</code>, producing the infinite list of partial sums.  This is the spiral, except that it lacks the first origin element <code>0</code>.</li>
<li><code>½, 0, |...</code> pastes the origin <code>0</code> onto the front of the spiral, as well as another leading element <code>½</code> to make the whole thing 1-indexed instead of 0-indexed.</li>
<li><code>.[$^a]</code> and <code>.[$^b]</code> are the coordinates in the spiral of the first and second arguments to the function, respectively.</li>
<li><code>2 * .[$^b] - .[$^a]</code> are the coordinates of the grambulated output.</li>
<li><code>.first(...):k</code> finds the first index (thanks to the <code>:k</code>ey adverb) within the spiral where the value is the coordinates found in the previous step.</li>
</ul>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="noreferrer">MATL</a>, 22 bytes</h1>
<pre><code>sQ1YLXIG&quot;I@=&amp;fh]Ew-X{)
</code></pre>
<p><a href="https://tio.run/##y00syfn/vzjQMNInwtNdydPBVi0tI9a1XDeiWvP//2hTSwUL01gA" rel="noreferrer" title="MATL – Try It Online"><strong>Try it online!</strong></a></p>
<p>As a <strong>bonus</strong>, see the beautiful pattern of the function for all pairs of inputs from 1 to <em>L</em>. <a href="https://matl.io/?code=%3AtXg%2Cwle%5Dv%22%40sQ1YLXI%40%21%22I%40%3D%26fh%5DEw-X%7B%29%5D50Y02ZGv%5B%5De1YG&amp;inputs=14&amp;version=22.7.4" rel="noreferrer">MATL Online</a> times out for <em>L</em> moderately large, but here's the result for <em>L</em>=100 (click <a href="https://i.stack.imgur.com/YrysR.png" rel="noreferrer">here</a> for a view with better resolution):</p>
<p><a href="https://i.stack.imgur.com/YrysRm.png" rel="noreferrer"><img src="https://i.stack.imgur.com/YrysRm.png" alt="enter image description here" /></a></p>
<h3>How it works</h3>
<pre><code>        % Implicit input: row vector of two numbers. 
sQ      % Sum, add 1. This is enough for the size of the spiral
1YL     % Matrix with spiral of that size
XI      % Copy into clipboard I
G&quot;      % For each number in the input
  I     %   Push the spiral again
  @=    %   True for the entri that equals the number
  &amp;fh   %   Row and column indices of that entry as a vector of two numbers 
]       % End
E       % Multiply by two, element-wise
w-      % Swap, subtract. Gives the coordinates of the result
X{      % Convert to cell array, for indexing
)       % Index into the spiral
        % Implcit display
</code></pre>
<p>The version with graphical input is as above but replaces the input by a loop over all pairs of values from 1 to <em>L</em>. The results are concatenated and reshaped as a square matrix, which is displayed with the <a href="https://www.mathworks.com/help/matlab/ref/autumn.html" rel="noreferrer"><code>autumn</code></a> colormap.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 68 bytes</h1>
<pre><code>ＮθＮη≔⁰ζ≔⁰εＷ¬ε«⊞υ⟦ⅈⅉ⟧≧⁺⊗¬ΣＫＤ²✳⁺²ζζ✳ζ¹¿›Ｌυ⌈⟦θη⟧≔⊕⌕υＥ§υ⊖η⁻⊗κ§§υ⊖θλε»⎚Ｉε
</code></pre>
<p><a href="https://tio.run/##dVDLTsMwEDwnX@HjRgpSixCXnqpGoEikiuACqnpwkyW26jiNY0MVxLeHddIHHPDJszNjz2whuCkaroYh1Qdn167eoYE2WoS/sSC87DpZaZjFrP@DkNCnkAoZrBsLGEXsKwxy1wlwMdu8QhSzN4i2JAsyfpiMz7ISFnLlupgljdspLEf3i6shR9wn0mBhZaPhlgQX4A1@0kfjmaIEuZHawlXVEzH3hHxn8GiQW6rwhLqyFIm4jB9lTR9t2piJLb3DTm1SXRisUVtK8yB16QtQZFjaVJd49DDBq0T4BJnUlOncYU@Ts/ofV@td6pTfL@87XCnkBug6NVnxbtzjYhjuZ@xuPtx8qB8" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input <code>x</code> and <code>y</code>.</p>
<pre><code>≔⁰ζ
</code></pre>
<p>Start in an arbitrary direction.</p>
<pre><code>≔⁰ε
</code></pre>
<p>Start not knowing <code>x◊y</code>.</p>
<pre><code>Ｗ¬ε«
</code></pre>
<p>Repeat until <code>x◊y</code> is known.</p>
<pre><code>⊞υ⟦ⅈⅉ⟧
</code></pre>
<p>Save the current position.</p>
<pre><code>≧⁺⊗¬ΣＫＤ²✳⁺²ζζ
</code></pre>
<p>Turn if this is a corner.</p>
<pre><code>✳ζ¹
</code></pre>
<p>Take one step.</p>
<pre><code>¿›Ｌυ⌈⟦θη⟧
</code></pre>
<p>If we know <code>x'</code> and <code>y'</code>, then...</p>
<pre><code>≔⊕⌕υＥ§υ⊖η⁻⊗κ§§υ⊖θλε
</code></pre>
<p>... see if we can find <code>x◊y</code>.</p>
<pre><code>»⎚Ｉε
</code></pre>
<p>Output <code>x◊y</code>.</p>
<p>I tried using complex numbers but that also took 68 bytes:</p>
<pre><code>ＮθＮη≔⁰ζ≔⁰ε≔¹δＷ¬ζ«⊞υεＦ¬№υ⁺ε×δＩ1j≧×Ｉ1jδ≧⁺δε¿›Ｌυ⌈⟦θη⟧≔⊕⌕υ⁻⊗§υ⊖η§υ⊖θζ»Ｉζ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=dVFNS8NAEMVj8iuWnDawhQZEhJ5KixIwJYi30sMmmWRXkk2zH1oqnvwZXnqw6G_y17jJBloF9_bmvZ03b-b9K2dU5i2tD4ej0eXk-vviLRZbo1emyUDiLpz555hZPFeKVwJPCdr_QnBCEUGFRc-M14DwqtV4H4boxfdSoxg2TuuVrXTkojVC9-W0NgoDQQ-8AYULghZUaRxEj0E4PJTQrbO45xXTeNCdq5yv90fWt7XMaMtLhG8lUG3z3IGotJ3IfkzojjemweuOILbpzcYwscglNCA0FPiGi6IfNOHCTrpsTVbb6lzHooBdTyzhJGa2CUH_kN0QyO3w1U8ltxsYcthNzT5UlqvxIp_rYPJUB5vj1RRdRq72Aw" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input <code>x</code> and <code>y</code>.</p>
<pre><code>≔⁰ζ
</code></pre>
<p>Start not knowing <code>x◊y</code>.</p>
<pre><code>≔⁰ε≔¹δ
</code></pre>
<p>Start at the origin in an arbitrary direction.</p>
<pre><code>Ｗ¬ζ«
</code></pre>
<p>Repeat until <code>x◊y</code> is known.</p>
<pre><code>⊞υε
</code></pre>
<p>Save the current position.</p>
<pre><code>Ｆ¬№υ⁺ε×δＩ1j
</code></pre>
<p>If this is a corner, then...</p>
<pre><code>≧×Ｉ1jδ
</code></pre>
<p>... rotate the direction.</p>
<pre><code>≧⁺δε
</code></pre>
<p>Take one step.</p>
<pre><code>¿›Ｌυ⌈⟦θη⟧
</code></pre>
<p>If we know <code>x'</code> and <code>y'</code>, then...</p>
<pre><code>≔⊕⌕υ⁻⊗§υ⊖η§υ⊖θζ
</code></pre>
<p>... see whether we know <code>x◊y</code>.</p>
<pre><code>»Ｉζ
</code></pre>
<p>Output <code>x◊y</code>.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="noreferrer">Wolfram Language (Mathematica)</a>, 187 bytes</h1>
<pre><code>(t=(n=#;{1,-1}(Sum[#[.5π⌊(4k-3)^.5⌋],{k,n-1}]&amp;/@{Sin,Cos}))&amp;;(x=#1;y=#2;s=#1+#2;Which[x&gt;y&amp;&amp;x&gt;-y,(2x-1)^2+s,x&lt;=y&amp;&amp;x&gt;-y,4y^2-s+1,x&lt;=y&amp;&amp;x&lt;=-y,4x^2-s+1,True,(2y-1)^2+s])&amp;@@(2t@#2-t@#1))&amp;
</code></pre>
<p><a href="https://tio.run/##NY3hCoIwAIQfZjA23Kwtg2BOBr1AYNAPUZAQFdFAJ2yI0O/y3XqHXsQW1J@74@OOa3NdFW2u62u@lnJFWqJOAjExQtmM4rFNQOLvX/f38kBBQ3c48/fv5ZmSqSGdq6Rwo6a47sjxNswYQ4GMBExYCbgYXPKcX6r6WiUmshCaiFqCuKEMZ9wbiAnlnwY243Tw2J@F8gvND577sXBD@xumGCqFuFaAUyfMPa@nvu60KhN24IQH23T9AA" rel="noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Ungolfed self-explained:</p>
<pre><code>Clear[toXY, fromXY, main]; 
toXY[n_] := {
   Sum[
     Sin[.5 π ⌊Sqrt[4 k - 3]⌋], {k, 
      n - 1}], 
  -Sum[
      Cos[-.5 π ⌊Sqrt[4 k - 3]⌋], {k, 
       n - 1}]};

fromXY[{x_, y_}] := Which[
   x &gt; y &amp;&amp; x &gt; -y, (x*2 - 1)^2 + (x + y),
   x &lt;= y &amp;&amp; x &gt; -y, (y*2)^2 - (x + y) + 1,
   x &lt;= y &amp;&amp; x &lt;= -y, (x*2)^2 - (x + y) + 1,
   True, (y*2 - 1)^2 + (x + y)
   ];

main[n1_, n2_] := fromXY[2 toXY@n2 - toXY@n1];
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/259698/">259698</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




