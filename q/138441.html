<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::138441</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>364</td><td>Scala 3</td><td>240428T154800Z</td><td><a href="https://codegolf.stackexchange.com/questions/138441/return-of-the-hydra-slayer/272865#272865">138 Aspe</a></td></tr>
<tr d-ix="1"><td>150</td><td>Python3</td><td>240427T175603Z</td><td><a href="https://codegolf.stackexchange.com/questions/138441/return-of-the-hydra-slayer/272856#272856">Ajax1234</a></td></tr>
<tr d-ix="2"><td>nan</td><td>VB.NET .NET 4.5</td><td>170911T135329Z</td><td><a href="https://codegolf.stackexchange.com/questions/138441/return-of-the-hydra-slayer/142388#142388">Brian J</a></td></tr>
<tr d-ix="3"><td>190</td><td>JavaScript</td><td>170810T200621Z</td><td><a href="https://codegolf.stackexchange.com/questions/138441/return-of-the-hydra-slayer/138445#138445">user7234</a></td></tr>
<tr d-ix="4"><td>222</td><td>Python 2</td><td>170810T205113Z</td><td><a href="https://codegolf.stackexchange.com/questions/138441/return-of-the-hydra-slayer/138457#138457">Arnold P</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, 364 bytes</h1>
<p>A port of <a href="https://codegolf.stackexchange.com/a/272856/110802">@Ajax1234's Python answer</a> in Scala.</p>
<p>364 bytes, it can be golfed more.</p>
<hr />
<p>Golfed version. <a href="https://ato.pxeger.com/run?1=fVHBTttAEFWv-YopUqNdZdniBELryKg9cKjUgqKop8iHjT12XDZrs96AkOUv6YULXPpF7dd0bJOQQlRL9s563rz3ZubnYxkprUa_5geHJr9V1hyEvz_lix8YOfimMgNVrwcAN0pDAj4wYF-ME9B-vmalm1MU8uBsGwOH4GHtksMPf95opsRCRJSubpSFOGjFZJRrTfxZbuRq7dRCo5yucY1sSviGSOKqcHctnZjh5toq08tDzicNn_Uvi4ZlvhUPg4vc4OR2mWlksTS5OW9K-30rs7INedW0MmWpuBIFD2IZ43WrzSeRTHKLKlpWGJxlCUvfYRAc9fvwtiDLxtE0SkaFyDmvmvx7ynu8ssEsXyG78gfIa9QlVrFEc_3UEaEGC9EkRTHYlPOanomVKbpLe04l7EXbvO5FqkSItCpLsrv0m-ZX_rZTUfg0md2ZbIZ-ARBjAiuyy5RNSx8-W6vu5jNnM5OG3IfvJnMQ0GZpsVDQX6cNS9jwWIDXbZUNBYzI5kvEiYDhfxHHO4C92dFz-clrgHdEFk53FATQzfu4Hzl-ApJpb_waMv7X7H7BpiXvmacDesPTDlr36m6s9_fd-Rc" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>(a,b,c)=&gt;{var d=scala.collection.mutable.Queue(Q(a,List.empty[Int],Set.empty[(Int,Int)]));var r:Option[List[Int]]=None;while(d.nonEmpty&amp;&amp;r.isEmpty){val Q(g,k,p)=d.dequeue();c.foreach{e=&gt;if(g%e==0&amp;&amp; !p.contains((g,e))){if(g/e==1){r=Some(k:+e)}else{d.enqueue(Q(g/e+b,k:+e,p+((g,e))))}}}};r.getOrElse(List.empty[Int])}
case class Q(h:Int,m:List[Int],p:Set[(Int,Int)])
</code></pre>
<p>Ungolfed version. <a href="https://ato.pxeger.com/run?1=fVPLbtQwFF2wy1ccFlS2GjLNTDuFkQaJBVKRYAERq1EXbup0ghxnGjugqpov6aYb-Ci-hutHk6CO2Phxfc49594rP_w2pVBi8fj4q7fV6zd_Xqj26rssLT6LWuM-AUphJEoljEFhhZVsu8JHbVM0K3yqjd3Q5TLFboVC2g3zT7TwS54Q-1pWqAbKRdzNhMonZ6y9JPBDdLjtZS8p4h1mZasU-apbnTW9FVdKZl8cgEVTqc-SyWZn71JnJRw59_l-bmslwXzKTLf6g3-LYk5OYcjTUDGcdAP4Wvqd8Qg1WdV2UpRb3KPA-l0MA3UFtsUrF1zjBEdHeLkj19pSIw1ziQvOR8mRMguUnKOTtu80GqyOUUxwwYnUt9OCPe8YF2nEk2u6DkJ84O-T6R7WsVeh77MZvgZxH4Sid2dPtzCt6l3bE8eNE22oJia6G5rj-64Td5vCdrW-cbP8pms7jHFHUas0q9j8NEUeZsTmKRZPBieIsxTz_yJOJ4CDr4uRfvYckJ-QhfOJQgq65W8PI5cRSKbz5XPI8l-zhwVdSfmYJwDz-XmA7pN9-HTx7z39wb8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre class="lang-scala prettyprint-override"><code>object Main {
  case class State(h: Int, m: List[Int], p: Set[(Int, Int)])

  def f(h: Int, H: Int, s: List[Int]): List[Int] = {
    var queue = scala.collection.mutable.Queue(State(h, List.empty, Set.empty))
    while (queue.nonEmpty) {
      val State(h, m, p) = queue.dequeue()
      s.foreach { S =&gt;
        if (h % S == 0 &amp;&amp; !p.contains((h, S))) {
          if (h / S == 1) return m :+ S
          queue.enqueue(State(h / S + H, m :+ S, p + ((h, S))))
        }
      }
    }
    List.empty[Int] // Return empty list if no solution
  }

  def main(args: Array[String]): Unit = {
    println(f(24, 1, List(2, 3)))
    println(f(25, 2, List(2, 3)))
    println(f(4, 2, List(2)))
    println(f(4, 3, List(2, 5)))
    println(f(10, 17, List(2, 3, 7, 19)))
    println(f(10, 6, List(1, 16)))
    println(f(6, 2, List(2, 3, 5)))
    println(f(125, 1, List(1, 2, 3, 127)))
  }
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1>Python3, 150 bytes</h1>
<pre class="lang-py prettyprint-override"><code>def f(h,H,s):
 q=[(h,[],[])]
 for h,m,p in q:
  for S in s:
   if 0==h%S and(h,S)not in p:
    if 1==h/S:return m+[S]
    q+=[(h/S+H,m+[S],p+[(h,S)])]
</code></pre>
<p><a href="https://tio.run/##ZY67DoMwDEV3vsJLJSIslfBqi8TOnjFiqAQRDA0h0KFfT530IUqlDPE59rXNY@lHnZ6NXde2U6DCHmucWRnAVEkqZEOPNQGo0UKPNzQwaJjIeyJcNbsKBgVxVfUHAVfd0qRgelycNl47z8kfRWm75W413CIpGq@myO06iqhGD9FE0ifQ5tXYQS@hCpMMgSPIBNOGseCLc4TkH2dvumOp78y3lMeUe/Lcafrxy94XpDnyYsuLz1439ZvobuJ@BF6aJydqWJ8" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1>VB.NET (.NET 4.5), 439 + 35 (imports) = 474 bytes</h1>

<p><i>Requires <code>Imports System.Collections.Generic</code></i></p>



<pre class="lang-vb prettyprint-override"><code>Const N=Nothing
Function Z(h,r,a,Optional c=N,Optional p=N,Optional ByRef s=N)
If c Is N Then
c=New List(Of Long)
p=New List(Of Long)
End If
If s IsNot N And s?.Count&lt;c.Count Then Return N
If p.Contains(h)Then Return N
p.Add(h)
For i=0To a.Count-1
Dim w=a(i)
If h Mod w=0Then
c.Add(w)
If h\w=1And(s Is N Or s?.Count&gt;c.Count)Then
s=New List(Of Long)
s.AddRange(c)
End If
Z(h\w+r,r,a,c,p,s)
c.RemoveAt(c.Count-1)
End If
Next
Z=s
End Function
</code></pre>

<p>The function <code>Z</code> takes two <code>Int64</code> (number of heads and head regrow rate), and a <code>List(Of Int64)</code> (Sectors), and returns a <code>List(Of Int64) (the ordered choice of Sectors). Returns</code>Nothing` if there is no solution.</p>

<p>Assumes the Sectors are presented in sorted order from largest to smallest.</p>

<p>The <code>Optional</code> parameters are for the recursive calls to save state. They track the current order of Sectors in use, the shortest order of Sectors ever, and the number of heads ever encountered. If we encounter the same number of heads again, there has to have been a shorter way to reach it.</p>

<p>The only ordering of Sectors that matters is I need <code>1</code> to be last if it exists. Otherwise, the hydra will might grow without bounds because I could at every turn just use the <code>1</code> Sector and never try any other.</p>

<p>I declared a constant <code>N</code> to represent <code>Nothing</code>, shaving off 6 bytes each time I wanted to use <code>Nothing</code>.</p>

<p><code>And</code>/<code>Or</code> are not short-circuiting, so I use the null conditional operator (<code>?.</code>) to avoid object null errors. In real code, I would use <code>AndAlso</code>/<code>OrElse</code> which do short-circuit.</p>

<p><a href="https://tio.run/##lVRdb9owFH3Gv@KKh9XR0ohQaDVp2cQYTEgQJIo0CfUlTQyJlNiZ7TRF0347u05SPgZF2lNyP87xvede@@X5NhSS7SZZLqRW8LhVmmXOUKQpC3UiuHJ@MM5kEpKZiIqUwczdDdGtwfd8oeOEb8i44FUurGhsSzuw57kxgxRCzz8Y@bHxbbtga1Ceb5HJGkKYKPBhGTNOEMNKmCZK0/kapoJvLJJf8I14BJO1QStEYy1IMECf@orlF1x/DutvxQoLpgvJwTf5OQa4DhKuaGydRnNnEEXoJWMhIfE6SwHD5TZnNLBPj7dq8lsXbhD9q0gki2CNIMcfLWGImkIosjxJmSQ3B7LgCDYIdWE0EhE7IHtO/wD8nmRQegFNKpFiwBGg3allqiot68hT6bnYO1W1jnO5V@FLo0LVJ1EXdFSGaBHwDaPhXlWc5FP5UVbTDO3cVhYeuGCZeGEDTcO3Lvb5PnvVZOWpyn7bh91j8Qwz1JlahLTmhc4LTVe027PBteGsEhhLkcHvOxu6fyzrGNBH1/8Aelfzz5Pv3k/un5G7HSz/4X2E@8mGh4rzAvD@Cg5j7ini/mof/YuHGLGuqOt2m9qaw6qB4ZwIMcNqaAKuSiYhUP/sPE4Rt62Jmk2rH4D63rZa5l0QKXN@ykSzacIZbTcZbSxxlCqGSeYujIIwhgAmvOFC9ymYBvAB2jYYXKvarQvsSFkv36EH81O/U7u/" rel="nofollow noreferrer" title="Visual Basic .NET (.NET Core) â€“ Try It Online">Try it online!</a></p>

<hr>

<p><code>Z</code> un-golfed for readability</p>

<pre class="lang-vb prettyprint-override"><code>Public Function Z(currentHeads As Long, regrowRate As Integer, weapons As ISet(Of Long), Optional currentWeapons As List(Of Long) = Nothing, Optional previousHeads As List(Of Long) = Nothing, Optional shortestWeapons As List(Of Long) = Nothing) As List(Of Long)

    ' initial call
    If currentWeapons Is Nothing Then
        currentWeapons = New List(Of Long)
        previousHeads = New List(Of Long)
    End If

    ' we've made more moves than our best so far
    If shortestWeapons IsNot Nothing AndAlso shortestWeapons.Count &lt;= currentWeapons.Count Then
        Return Nothing
    End If

    ' exit, we've been here before
    If previousHeads.Contains(currentHeads) Then
        Return Nothing
    End If

    ' keep track of previous state to prevent duplicate paths
    previousHeads.Add(currentHeads)

    For Each w In weapons

        ' save 1 for last
        If w = 1 Then Continue For

        If currentHeads Mod w = 0 Then
            currentWeapons.Add(w)

            If currentHeads \ w = 1 Then
                If shortestWeapons Is Nothing OrElse shortestWeapons.Count &gt; currentWeapons.Count Then
                    shortestWeapons = New List(Of Long)(currentWeapons)
                End If
            End If

            Dim answer = A(currentHeads \ w + regrowRate, regrowRate, weapons, currentWeapons, previousHeads, shortestWeapons)
            If answer IsNot Nothing Then
                If shortestWeapons Is Nothing OrElse shortestWeapons.Count &gt; answer.Count Then
                    shortestWeapons = New List(Of Long)(answer)
                End If
            End If

            currentWeapons.RemoveAt(currentWeapons.Count - 1)
        End If
    Next

    If weapons.Contains(1) Then
        currentWeapons.Add(1)

        Dim answer = A(currentHeads \ 1 + regrowRate, regrowRate, weapons, currentWeapons, previousHeads, shortestWeapons)
        If answer IsNot Nothing Then
            If shortestWeapons Is Nothing OrElse shortestWeapons.Count &gt; answer.Count Then
                shortestWeapons = New List(Of Long)(answer)
            End If
        End If

        currentWeapons.RemoveAt(currentWeapons.Count - 1)
    End If

    Return shortestWeapons
End Function
</code></pre>
</div>
<div id="pu3" class="pu"><h1>JavaScript, <s>191</s> 190 bytes</h1>

<p><em>Saved a byte thanks to <a href="https://codegolf.stackexchange.com/users/65836/step-hen">Step Hen</a></em></p>

<pre><code>(h,t,s)=&gt;eval(`r=[],d=0,q=[],s.map(a=&gt;q.push([],h));while(q.length){p=q.shift(),h=q.shift(),s.map(w=&gt;(a=h/w)==1?d=w:!(a%1)&amp;!r[a+=t]?r[q.push([...p,w],a),a]=1:0);d?(q=[],p).push(d):0}d?p:[]`)
</code></pre>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=(h,t,s)=&gt;eval(`r=[],d=0,q=[],s.map(a=&gt;q.push([],h));while(q.length){p=q.shift(),h=q.shift(),s.map(w=&gt;(a=h/w)==1?d=w:!(a%1)&amp;!r[a+=t]?r[q.push([...p,w],a),a]=1:0);d?(q=[],p).push(d):0}d?p:[]`)

console.log(`[${f(24, 1, [2,3])}]`);
console.log(`[${f(25, 2, [2,3])}]`);
console.log(`[${f(4, 2, [2])}]`);
console.log(`[${f(4, 3, [2,5])}]`);
console.log(`[${f(10, 17, [2, 3, 7, 19])}]`);
console.log(`[${f(10, 6, [1,16])}]`);
console.log(`[${f(125, 1, [1, 16])}]`);
console.log(`[${f(1024, 3, [1, 2, 137])}]`);</code></pre>
</div>
</div>
</p>

<hr>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>169</s> <s>195</s> 222 bytes</h1>

<p>+26 bytes to properly handle cyclic head regeneration on bad weapon picks. (Thanks to @ThePirateBay for pointing it out)</p>

<p>+27 bytes to fix certain edge cases causing errors.</p>



<pre class="lang-python prettyprint-override"><code>lambda n,p,w:g(n,n,p,w[::-1])[:-1]
def g(n,b,p,w,a=[]):
 if b&lt;2:return[1]
 for x in w:
&#9;if n%x&lt;1and n/x+p!=n and n not in a:
&#9; try:
&#9;&#9;l=[x]+g(n/x+p,n/x,p,w,[n]+a)
&#9; &#9;if l and l[-1]!=0:return l
&#9; except:return[0]
 return[0]
</code></pre>

<p><a href="https://tio.run/##bY7NboMwEITP4Sk2h0pBuCo25M8KT@L6YApOkeiCkKs4T0/XLomSqhd7/c14Zser@xxQzLZ6n3vzVTcGkI3sIs8bZHFSUr5ynapwJk1rISh1UJiplE5lAp2F@iTk1LrvCRXZwA4TeOgQLjJZkYwv/sQNNoBvPhvXFUJ8AA4uuAy5wE1XulZ9pbzOqCQ4GZ2xSqHOTEqukNbH372ijdZVvvRCT2rrP9rR3TbJaZP7OI9Thw7sRpQMOAMlGBQ6Te54@y8mswj0GRW/xu0D5TmDHWHK4Ls/nO@XYAY08eOTLJY8Hpt4sX9cKi8PhPPylkxunc4/" rel="nofollow noreferrer" title="Python 2 â€“ Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/138441/">138441</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




