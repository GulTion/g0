<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::QNNN</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
  <!-- TXXX -->
<tr d-ix="0"><td>151</td><td>Befunge98</td><td>231101T194604Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/266408#266408">PurkkaKo</a></td></tr>
<tr d-ix="1"><td>221</td><td>C gcc</td><td>210618T020222Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/229932#229932">a stone </a></td></tr>
<tr d-ix="2"><td>236</td><td>Red</td><td>210627T143749Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230601#230601">Kirill L</a></td></tr>
<tr d-ix="3"><td>494</td><td>brainfuck</td><td>210620T122254Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230086#230086">PurkkaKo</a></td></tr>
<tr d-ix="4"><td>093</td><td>Pyth</td><td>210619T232700Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230060#230060">PurkkaKo</a></td></tr>
<tr d-ix="5"><td>233</td><td>JavaScript Node.js</td><td>210618T101559Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/229952#229952">Ian H.</a></td></tr>
<tr d-ix="6"><td>142</td><td>Knight UB</td><td>210622T041314Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230257#230257">EasyasPi</a></td></tr>
<tr d-ix="7"><td>188</td><td>JavaScript Node.js</td><td>210620T021219Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230064#230064">PurkkaKo</a></td></tr>
<tr d-ix="8"><td>218</td><td>Raku</td><td>210619T013102Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230003#230003">Sean</a></td></tr>
<tr d-ix="9"><td>133</td><td>Retina 0.8.2</td><td>210619T000418Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/230000#230000">Neil</a></td></tr>
<tr d-ix="10"><td>257</td><td>Haskell</td><td>210618T184919Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/229978#229978">Lynn</a></td></tr>
<tr d-ix="11"><td>355</td><td>Python 3</td><td>210617T211806Z</td><td><a href="https://codegolf.stackexchange.com/questions/229918/write-a-c-demangler/229925#229925">Joyal Ma</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Befunge-98, 151 bytes</h1>
<pre><code>~~1345x
&gt;]')\j,@
 ~
^&gt;:'E-  v  &gt;'&gt;,
^  v-I':_$2w'::,,3
^v\_$'&lt;,03&gt;
 j
v&gt;',,0
v&gt;'(,0
v&gt;'::,,2
\
&gt;&gt;:'N-v
v&lt;  \0_$23^
'~&gt;$68x
0+w~ v
-*0
:a:
a\-
w^^1,&lt;+0'
</code></pre>
<p><a href="https://tio.run/##JYyxTsMwFEX39xVviPSA2pJvA6i1IovFQxZ/ADKOUkhbAhQWnLL410MK0znD0dkN@@/TYdDbjf76@dN5LgX17d2Z3JNcx1E9EBdKzorXzJnZiVOUFtWt2K5aT2KtUjWlHLtKGmVqRzxSdqKUueDqH5dqTZHcsgo6U26Yo1kGdSIprrrfnMmspsKZ9I0h21vqo6YpJahmZWSeu8eAHrsWz3jB4LH3OAQcPV7bgNHjrcW79wEfOHl8/gI" rel="nofollow noreferrer">Try it online!</a> | <a href="https://tio.run/##XVRtb9owEP7uX3GiTAlromJC19YN0arNSJEmWqnrF0ZBIXFCaEhYHCCrJv46OyeA0iFZuZfneXxn@5h7cnHwvQJsGzT@ONTgL6xFnoC5FqD5i2y1hjgEkYUaOLDOsyj3Vof9nlr965I4r1pnsjS@EtiTqcM0bgJsARzNMcgUTdPV2Kzd22mMGYZFptvJrK3ZRtdyCCzJ1tEMo6s@ev1RqB6ZEAelRuaWbG2ASRcFrCnR9k77y21Jupe7PWyJ@blLmMeINzHJbjqlhn3Z1Q7YACGFkIUctHUpAtDkBZgOXFxdaKpDlZ@NaaliJVpWmGXW3MuVj6aOZgfDIxXnjQRjaCv88PHRVXGuEujYaDsNIVzvDTED3c4xXfMagIqr/49QAN5AKAnnQ024xs26UGJ8rrrepdrG@r0pm1sp8LuOwQp89@0p2Ui13F4sOadUZuffdZQLfBNIPqPsWKJCA6NXmEqrJzOXum5/IfIAlV7cfhKLN87vCrFaJx5eiJKSme3aCoLXy15sBUHjDFEX04sDkRZxGIuc9hSn6SOgN6s6n43VrtSjc@rTgAoa0oguOI1V0sM@GfMZCxgTjIWMRYwtGItPHLcmcRpyGo0qnjuiS07fXJpwPqIrmnKanbRs3wgM4dRKuhKyl4y92YnjGCvGUsYydQi0P7JyEfAb7DCP04iWN3jws@Mb@pjTS@OY6xD1JDuECBw1aLWrt9vCGdwt4kSAO3weXAGecwArL40SfNGiXAu/EME9BBkBnMg4LUJo/UQi@J4UDD6Z110JLVQ7clqI8/xi4yU4FdVGZtrIqon/E27SSIBpyiIY3N2iMRd16DjyHdTA/4FfyKulWjAYoHMqpwWv91AsRIo4gLqbp4fnZ/4d9COjo@oQiRQNyPDB/dGAGOf24Kxc0cKYBFkqyOEf" rel="nofollow noreferrer">Run all test cases.</a></p>
<p>Something something, <a href="https://codegolf.stackexchange.com/a/230086/30164">stack machines</a>. Getting dangerously close to the golf languages.</p>
<p>(I got a notification from my Brainfuck answer and decided this had to be done :D)</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <sup><s>267</s> ...  <s>222</s></sup> 221 bytes</h1>
<p><em>-30 bytes thanks to @EasyasPi</em><br />
<em>-8 more bytes thanks to @EasyasPi and @ceilingcat</em><br />
<em>-1 more byte thanks to @ceilingcat</em></p>

<pre class="lang-c prettyprint-override"><code>#define P puts(
char*m;a(){if(*m==73){P&quot;&lt;&quot;);for(++m;*m^69;*m-69&amp;&amp;P&quot;,&quot;))p();m++;P&quot;&gt;&quot;);}}p(){if(*m==78){for(++m;*m^69;P&quot;::&quot;))p();++m;}a(m+=write(1,m,strtol(m,&amp;m,!a())));}z(char*t){p(m=t+2);for(*m&amp;&amp;P&quot;(&quot;);*m;P!*m+L&quot;,)&quot;))p();}
</code></pre>
<p><a href="https://tio.run/##bVHfb4IwEH73r9AuM1eoD8im06ovC0tMFuXZmC3MgWuyAis1IxL@dnZV4@pmk5K7@37cB2x6282maW7e40SkcTts5ztdQGvzESlH8ghoJRJw5HQ69GkVkgmhPMkUuK7kjnwZjPDZG4y63ZAwQmkOlEvX5SGZIbGuc0v/QKtLZUjG45PGDOsIpDv9VkLH4DHJCq109gmSdSXrYBA8vN7DIZmmVQ5yqt3@MY4jTQLAnRg67DjSfSaMnszrRoNgMRWpdgRzYl7tQVCeKxwkQNbpbbFOe3jWKUEar1syEikmb2kgryuvJKxNSvQ@9n6SZf5bpMwUS8CSnsGFQQMLHo9NfdY@LZdzgwYGxmaC9eyfNd69Zc@wpReko4dFO/jAdZ6hBRbP2M2uJMa7slOj3erPmx33Hhb7X7vSXm4ke8ChJRk9hp@7wtx5XxRB4HlFdj73WxVH2licWRNRoI/FgQPn19G7W/gqfg@GH7HC37f1yiHufz197ksMSnbCjL5ufgA" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a> For pretty output, see previous revisions.</p>
</div>
<div id="pu2" class="pu"><h1><a href="http://www.red-lang.org" rel="nofollow noreferrer">Red</a>, 236 bytes</h1>
<pre><code>func[s][d: charset[#&quot;0&quot;-#&quot;9&quot;]i:[copy x[1 2 d](x: do x)keep x skip]n:[&quot;N&quot;any[b keep(&quot;::&quot;)]&quot;E&quot;]t:[&quot;I&quot;keep(&quot;&lt;&quot;)any[b[&quot;E&quot;keep(&quot;&gt;&quot;)break | keep(&quot;,&quot;)]]]b:[any[n]i opt t]parse s[collect[&quot;_Z&quot;b[end | keep(&quot;(&quot;)any[b[end keep(&quot;)&quot;)| keep(&quot;,&quot;)]]]]]]
</code></pre>
<p><a href="https://tio.run/##ZVJLi6NAEL7nVzQ9F4UMbJksQ2rFy9ILXpxlYS5pmuCjTRyNumrAGfa/Z6vtjBMZocH6XlX96HR2/aMzqVY5XvNLncpeyQxZeoq7Xg/ygX/jjw98x1WBMm3aNzZKYB7LlDMiyxo2uqXWLRtZXxatqlHyiMf1m0yYwR2OyF3FBVcDUSG3oM/dSSOJsEjA3aTTccn@3XxrsimVoDTCWhWsaQc2qNaMxXoapap0Okh@2PNE6jqbjc5HtgEt5HJ3GUvfNW@oX3pig@4HJlcUBCP/wR4DNppikzfNJok7C1HhUOEaJjKUWHCIVE2uX8/PoaGE5aj0qQruE2m9L1LXBLgfCuteaKYE54vIaMRCZIKC5Yi09ssxKWj/uQ/bbuq3@XsZlz2N/t0h2Op3P39Xl96s0Ct6IQD6Zv6@H@k4B@ufdX7RU8idyplUNs7rmxDCcHvSXUZhL@G2KnQpxG7Q57aK6V5sWt/4oW9EAWW9@EZEP7NoujmvyHQ9FHmhO/Cs7R4xGu9wO4jDfmoPMSSQQgYacjjCSUBh@Zi2jZgiZogaMUc8Ip4Qi9kWWp@AXMAxmqxhBK8CyhAqISI4Qy2g@Yzz03W21oENc0yW/4pY@lUQrM@INWIznQlso02nM/FE2@2K@gjjE93FYX5qS9YZ1zfWXamVbAkbWD49aHX9Dw" rel="nofollow noreferrer" title="Red – Try It Online">Try it online!</a></p>
<p>Output is block that gets printed with a lot of extraneous whitespace, which is allowed, but prepending it with a simple <code>rejoin</code> will produce precisely the same results as in the examples.</p>
<p>Overall, this looks like a perfect task for learning Red's Parse dialect, so here's my attempt at it:</p>
<pre><code>func[s][
 ; Digits rule:
 d: charset[#&quot;0&quot;-#&quot;9&quot;] 
 ; Identifiers rule:
 i: [copy x[1 2 d](x: do x)keep x skip] 
  ; Match 1-2 digits, copy to x, eval x as number, skip and save next x characters
 ; Namespaces rule:
 n: [&quot;N&quot;any[b keep(&quot;::&quot;)]&quot;E&quot;]
  ; &quot;N&quot;, any number of Base components (b) appended with &quot;::&quot; ,&quot;E&quot;
 ; Templates rule:
 t: [&quot;I&quot;keep(&quot;&lt;&quot;)any[b[&quot;E&quot;keep(&quot;&gt;&quot;)break | keep(&quot;,&quot;)]]] 
  ; &quot;I&quot; (change to &quot;&lt;&quot;), any number of b appended with &quot;,&quot; or with &quot;&gt;&quot; if followed by &quot;E&quot;
 ; Base component rule:
 b: [any[n]i opt t] 
  ; Any number of namespaces, main identifier and optional template
 ; Actual parse operation:
 parse s [collect ; 'collect' all entries after 'keep'
   ; Final rule:
   [&quot;_Z&quot; b [end | keep(&quot;(&quot;) any [ b [end keep(&quot;)&quot;) | keep(&quot;,&quot;)]]]]] 
   ; &quot;_Z&quot;, base component, &quot;(&quot; if the input hasn't ended yet,
   ; any number of subsequent b's as parameters, separated by &quot;,&quot; and &quot;)&quot; in the end
]
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/TryItOnline/brainfuck" rel="noreferrer">brainfuck</a>, 494 bytes</h1>
<pre><code>&gt;&gt;+++++[-&gt;++++++++&lt;]&gt;&gt;&gt;&gt;&gt;,,,[&lt;+&gt;&gt;+++++++[-&lt;----------&gt;]&lt;+[----[&lt;&lt;[&lt;&lt;[.&lt;]&gt;[&gt;]++++++++[-&lt;-----&gt;]&lt;[&gt;&gt;-&lt;&lt;[-&gt;+&lt;]]&gt;[-&lt;+&gt;]++++++++[-&lt;+++++&gt;]&gt;[&lt;&lt;++++&lt;++++++[-&lt;+++++++&gt;]&lt;-&gt;&gt;&gt;&gt;-]]&gt;&gt;-----[&gt;+++++[-&lt;++++++&gt;],[&gt;++++++[-&lt;--------&gt;]&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[-&gt;+&lt;[&lt;&lt;-&gt;&gt;&gt;-[-&lt;+++++++&gt;]&lt;+.[-]]]]]]]]]]]&lt;&lt;[&gt;[-&gt;&gt;++++++++++&lt;&lt;]&gt;&gt;[-&lt;&lt;+&gt;&gt;]&lt;,&lt;&lt;-]+&gt;&gt;]&lt;-[-&lt;,.&gt;]&lt;[-]&lt;+&gt;&gt;]&lt;[-&gt;&gt;+++++++[-&gt;++++++++&lt;]&gt;++[-&gt;+&gt;+&lt;&lt;&lt;&lt;+&gt;+&gt;]&gt;&gt;&gt;&gt;&gt;]&gt;]&lt;[+++++[-&gt;++++++++++&gt;&gt;+++++++&lt;&lt;&lt;]&gt;.++&gt;&gt;++&gt;&gt;&gt;]&gt;]&lt;[-&lt;[-]&lt;&lt;[[-]&lt;]&lt;[.[-]&lt;]]&gt;,]&lt;&lt;&lt;&lt;[&lt;]&lt;[.&lt;]
</code></pre>
<p><a href="https://tio.run/##jVHLTsNADPygfUhzt3zbQy77AVgW6oNCKRQo4vtT26Eh6YlRtA97PON1tpfN8Xz42Z3GkTk5pEy7gZQdOWehxLewFCozWMkCBiHyr1qNsKY7rtGEuRjB1EmNU0xxSYudLUFxpHXCU1S8mWLFHJrCawpr/g0tW3Rn9/z3QuFTVs6pivnOsGfYA@aBeLs@KivxMSll09A4uUyu0YNOuUXdetLT3TogV/FRONRL7tnp72eQO9cpcKOXcCPx1a41duWsLi0RIh3Hx4eODbYDdtjjqeHQ8Nzx0nAcOl4bTgPeWut4x7nho@Oz4QuXAd/tCg" rel="noreferrer" title="brainfuck – Try It Online">Try it online!</a></p>
<p>While working on my JavaScript solution, I noticed that a relatively simple stack machine would be able to solve this task. So, naturally, I wrote a Brainfuck solution. <sub>Yes, I was bored, what did you expect? <sub><sup>Probably still beats Java.</sup></sub></sub></p>
<p>The TIO interpreter handles identifiers of up to 255 chars. Any length should work with an interpreter that has bigint cells and returns 0 for EOF.</p>
<h3>Annotated (with a chance of undecipherability)</h3>
<pre><code>cell layout
| 0 | finterm | 0 | finsep | 0 | sepflag | parseflag | char/accum | digit | holding |
                                         | 0         | term       | 0     | sep     | etc

&gt;&gt; make space for terminator
+++++ create 5
[- &gt; ++++++++ &lt;] &gt;&gt;&gt; convert to 0 40 0 = (
&gt; add sepflag cell
&gt; add parseflag cell

,, skip _Z

, start reading #
[ loop over input (char cell)
  &lt;+&gt; set parseflag
  &gt; +++++++ set digit cell to 7
  [- &lt; ---------- &gt;] &lt; + subtract E
  [ not E
    ---- subtract I
    [ not I; must be some kind of identifier start
      &lt;&lt;[ sepflag cell set
        &lt;&lt;[.&lt;] print separator
        &gt;[&gt;] return to right of separator
        ++++++++ create 8
        [- &lt; ----- &gt;] subtract ( from separator
        &lt;[ separator wasn't (
          &gt;&gt; - clear sepflag
          &lt;&lt; [- &gt; + &lt;] move separator to right
        ]
        &gt; [- &lt; + &gt;] move separator back
        ++++++++ create 8
        [- &lt; +++++ &gt;] fix separator
        &gt;[ sepflag is set; separator was (
          &lt;&lt; ++++ update separator to comma
          &lt; ++++++ create 6
          [- &lt; +++++++ &gt;] &lt; - set terminator to 41 )
          &gt;&gt;&gt;&gt;- clear sepflag
        ]
      ]
      &gt;&gt; back to char cell
      ----- subtract N
      [ not N; must be simple identifier #
        &gt; +++++ create 5
        [- &lt; ++++++ &gt;] add back to ch minus 0
        , read into digit cell
        [
          &gt; ++++++ create 6
          [- &lt; -------- &gt;] subtract 0
          &lt; [ not 0
            -&gt;+&lt; [ not 1
              -&gt;+&lt; [ not 2
                -&gt;+&lt; [ not 3
                  -&gt;+&lt; [ not 4
                    -&gt;+&lt; [ not 5
                      -&gt;+&lt; [ not 6
                        -&gt;+&lt; [ not 7
                          -&gt;+&lt; [ not 8
                            -&gt;+&lt; [ not 9 or any digit #
                              &lt;&lt;- clear parseflag
                              &gt;&gt;&gt; - set digit holding cell to 8
                              [- &lt; +++++++ &gt;] &lt; + return the char to its former glory (add 57)
                              . print as first identifier char
                              [-] clear digit cell
                            ]
                          ]
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
          &lt;&lt;[ parseflag still set; was some digit #
            &gt; back to accumulator
            [-&gt;&gt;++++++++++&lt;&lt;] add 10x accumulator to holding
            &gt;&gt;[-&lt;&lt;+&gt;&gt;] move the value back to accumulator
            &lt;, read new digit cell
            &lt;&lt;- clear parseflag to exit this if
          ]
          + reset parseflag to keep parsing digits
          &gt;&gt; back to digit cell
        ]
        digit cell clear; accumulator is valid number now #
        &lt; go to accumulator
        -[-&lt;,.&gt;] print n minus 1 chars; clears accumulator and overwrites parseflag
        &lt;[-] clear parseflag
        &lt;+ set sepflag
        &gt;&gt; back to char cell
      ]
      &lt;[ parseflag set; was N #
        - clear parseflag
        &gt;&gt; +++++++ create 0 0 7 starting from parseflag
        [- &gt; ++++++++ &lt;] &gt; ++ convert to 0 0 0 (58)
        [- &gt; + &gt; + &lt;&lt;&lt;&lt; + &gt; + &gt;] convert to 0 58 58 0 &gt; 58 &gt; 58 &gt; 0 &gt; 0 &gt; (0)
        we are now at new parseflag
      ]
      &gt; back to char cell
    ]
    &lt;[ parseflag set; was I #
      +++++ set parseflag cell to 6
      [- &gt; ++++++++++ &gt;&gt; +++++++ &lt;&lt;&lt;] convert to 0 &gt; (60) 0 42
      . print 60 = lbracket
      ++ &gt;&gt; ++ &gt; convert to 0 62 0 44 0 &gt; 0 &gt; (0)
      we are now at new parseflag
    ]
    &gt; back to char cell
  ]
  &lt;[ parseflag set; was E #
    - clear parseflag
    &lt;[-] clear sepflag cell
    &lt;&lt;[[-]&lt;] clear separator
    &lt;[.[-]&lt;] print and clear terminator
    we're now in prev parseflag cell which is clear
  ]
  &gt; back to char cell
  , read new char #
]
&lt;&lt;&lt;&lt;[&lt;] skip separator
&lt;[.&lt;] print terminator
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/isaacg1/pyth" rel="nofollow noreferrer">Pyth</a>, <s>97</s> <s>96</s> <s>95</s> 93 bytes</h1>
<pre><code>L*bnz=:z+\^bkL?y\Ek++Eb'bDER&amp;z++&amp;y\N'&quot;::&quot;&amp;yJh:z&quot;\D&quot;3y&lt;zsJ&amp;y\IjP'\,&quot;&lt;&gt;&quot;=ttzpEIzjj\,ufTaYE0)&quot;()
</code></pre>
<p><a href="https://tio.run/##DcmxDoIwEADQf7kBxGLixa1BXbihBBtjXDSNhqoIRYGEOrQfb/Wtb3S2CaGc696vuWfqorty6xR1jJGOdU6HyDMWOSVj4BwiVzTcg8ph5TI/Ff8QZh@rFLINrK31IwlvjEo/9bE60TKBWRLC9SyxQi3whnd8ENaET4kNYSskGsJO4ItI4ht7wuE7jLYd@iksdj8" rel="nofollow noreferrer" title="Pyth – Try It Online">Try it online!</a></p>
<p>I really didn't expect to beat Retina, and I still think it might come back. Pyth kinda shows its age, but this is starting to feel pretty nicely optimized. I also got to use some very rarely used Pyth features like the imperative <code>D</code>, <code>R</code> and <code>I</code>.</p>
<p>Passes all tests. Requires the <code>-M</code> flag to disable memoization.</p>
<h3>Explanation</h3>
<p>The program consists of three functions and main code. At the start, input is read to <code>z</code>.</p>
<p>The first function <code>L&amp;nz=:z+\^bkb</code> consumes its argument from the input if it matches.</p>
<pre><code>L                Define y(b):
L*bnz=:z+\^bk
        +\^b      Compute &quot;^&quot; + b.
      :z    k     Replace this regex in z with k=&quot;&quot;.
     =            Save this in z.
   nz             See if it is different from the previous value of z.
 *b               If so, return b, otherwise &quot;&quot;. (Multiply b by 1 or 0).
</code></pre>
<p>We'll only be passing <code>N</code>, <code>I</code>, <code>E</code>, numbers and simple identifiers to this, so we can safely use them as regex. There will only ever be 0 or 1 matches thanks to <code>^</code>.</p>
<p>The second function <code>L?y\Ek++Eb'b</code> recursively demangles a namespace or template, adding its argument after each identifier.</p>
<pre><code>L              Define '(b):
  y\E            Match, consume and return E from z.
 ?               If it was present,
     k           return k.
        E        Otherwise, call E() to demangle an identifier,
       + b       add b,  
      +   'b     and recursively call '(b) and add that.
</code></pre>
<p>The third (monster) function <code>DER&amp;z++&amp;y\N'&quot;::&quot;&amp;yJh:z&quot;\D&quot;3y&lt;zsJ&amp;y\IjP'\,&quot;&lt;&gt;&quot;</code> recursively demangles identifiers with namespaces and templates.</p>
<pre><code>DE                                               Define function E():
   &amp;z                                              If z is &quot;&quot;, return it.
     ++                                            Concatenate:
        y\N                                        - Match, consume and return N from z.
       &amp;   '&quot;::&quot;                                     If it matched, '(&quot;::&quot;).
                                                     Otherwise, &quot;&quot;.
                    :z&quot;\D&quot;3                       - Split z by non-digits.
                   h                                Take the first piece.
                  J                                 Save it in J.
                 y                                  Consume and return it from z.
                &amp;                                   Always truthy, continue.
                              sJ                    Convert J to int,
                            &lt;z                      take that many chars from z,
                           y                        consume and return them.
                                 y\I              - Match, consume and return I from z.
                                &amp;     '\,           If it matched, call '(&quot;,&quot;),
                                     P              remove the last &quot;,&quot;,
                                    j    &quot;&lt;&gt;&quot;       and put the rest in &lt;&gt;.
                                                    Otherwise, &quot;&quot;.
  R                                               Return that.
</code></pre>
<p>Finally, the main code.</p>
<pre><code> ttz                      Strip the first 2 chars of z
=                         and store the result back in z.
     E                    Call E()
    p                     and print the result without newline.
      Iz                  If z isn't empty,
            u     0)        For all H=0,1,..., repeat until results stop changing:
                 E            Call E(),
               aY             append that to Y (initially []),
             fT               and remove falsey elements (i.e. &quot;&quot;).
         j\,                Join the values (of Y) with &quot;,&quot;.
        j           &quot;()     Put the result in () and print.
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, <sub><s>287</s></sub> 233 bytes</h1>
<p>Saved <strong>a ton of bytes</strong> thanks to @A username, @FZs, @Arnauld and @Recursive Co.!<br />
(Hope I didn't miss anyone!)</p>

<pre class="lang-javascript prettyprint-override"><code>(i,r=&quot;&quot;,P=2,s=c=&gt;i[P]!=c,e=_=&gt;{if(!s`N`)for(P++;s`E`||!++P;r+=&quot;::&quot;)e();r+=i.slice(P+=b=`${l=parseInt(i.slice(P))}`.length,P+=l);s`I`||P++&amp;a`&lt;&gt;`&amp;P++},a=([[p,q]])=&gt;{for(r+=p;i[P]&amp;&amp;s`E`;i[P]&amp;&amp;s`E`?r+=&quot;,&quot;:0)e();r+=q})=&gt;i[e(),P]&amp;&amp;a`()`||r
</code></pre>
<p><a href="https://tio.run/##vVTRbts2FH33V9BCEZCwaoROhqKUqKLr2E59cA1sfXEWWIpE2UwYSSHpxW3qb88uZVtTBuxxE0DhXt5zzj0kSN7mf@a2MKp1r@umlM8Vf8YqNDwIwgWfhZYXPFFXi@sxL0LJVzx5UhUe22yekaoxeDGZRDYT2Y8f48lkEZkJDxgLiMTEx2pqtSokoPgNz149ad7mxsq0drgvEbLPplrWa7cJAacJ6KWgB8pneRYn2RlE@zDn@OqqDR@urwl48K1Bv428tbMz72AQvvM2woCdn3w87IlfBWShx@QZJtDBPBdNbR0qcm@p3TrEUbZa0h16naDdaLW8qJrm4iY3PocQQ0hgeu7nxaDAGMQe//HLl9TPC1@AJIY4GQjB@D4QCyElx/KBNwB0XPxPhAeIAcJLJC88wVgOfYHEsnd96NK1uXjY7oatPPg7hskO/PbDQm@tH@lMWSEotU3//bQ2Mnee3KNiZUFhgMEdptOa2SalaXq5kaYEpa/ppVbyToi3Tt63OnfSeinbxGnsIQkIfY09BIIeAkJ0pkpZO1UpaejMc4Y5AGarbuWrpe9Kc3pDC1pSSSu6phtBlS/msE7GCsZKxiRjFWNrxjaMqRMnPZAErQRdzzteOqe3gt6lVAsxp/e0FrQ5acVFWIYyOShhLxTfMnYX6yQJ7xmrGWv8JtDL@YWRpXgDKzSqXtPdG9j41fEMvazhXXisdczz8/c/f/hFfPz0a/r5v4u8jf@jTxaNRn9fOwtXrr9@U9tq5XDwRx2Q6X3eYlwQxBNUnAreY0BINNLSoTa3nu3MVkYjeA8QPsqipjpoE/Q0QvAd5q@U7xEiuWtl4WR57VtHHcCZb0foCd5oOdXNGsOb1dH2vvWrpxN3n5HoBd6hZusOL0iFO8YAoCqEj@Ux570BgnpEZ2JjmkdUy0ckjIHnLSvgOUZGuq2pZQnNDxJ96z0s0hUbhCX5F/Ny6prfXHeiyMDOceOqXFt5lBrtR0MigIdpR3iHgvdaI7iJznYS4wAxFPwOZ1aiR/@rcqW3RtppQKLnvwA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/knight-lang/knight-lang" rel="nofollow noreferrer">Knight</a> (UB), 142 bytes</h1>

<pre class="lang-php prettyprint-override"><code>;=xP;=l';W&amp;x-69Ax;Cp&amp;&amp;x-69AxO&quot;,&quot;Cn';C=nB=xSxF1&quot;&quot;;Cn;C=pB;O;&amp;?78Ax;E;CnSl 22T&quot;::&quot;O&quot;::&quot;GxL=m+0x m;=xSxF+mLm&quot;&quot;&amp;?73Ax;O&quot;&lt;&quot;;Cn;ElO&quot;&gt;&quot;&amp;x;O&quot;(&quot;;ElO&quot;)&quot;
</code></pre>
<p><a href="https://tio.run/##tVl9c9rIGf8bPsVaGSMtiLMkuDaHEIztwx6mjvGZuJmpTXNYCFtzQmgk0bgXu1899zz7Iq0AJ73r1TNB7O7z@tvnTcRvP/j@lzdh7EebRdDP8kW4/u5xUFd3ovC@suXn/06CLaI0jB8qW3m44jSLYBnGAYkiEq3jB/ZRbL6/vHlH7HI5fX9NnHL59@Nr0i2XZ5en5G25vL4hdkl8djFVaC9vLhTSm8t3x9O/GRklBnw0/mN/T4uz4yko5Uf@4zxt0oJYpQE7Jftg0C1PLkcf8CiGI/TlGb71@9VzFM/O4cuzEUUUVhWCk8nkglHAxxC86oEriu7rc34IrIVx/5pHm4DS23hG6/WjZt3uduqu9zR1vfgEHk9ntqZdWa4X6e6HxlP7Lz8cP7mnSUN8nWimdhrrjqa5p15y4k7cxvCvb4Fk5J7G04g4znut19Mm@HH@dOGtWtYTWblMcGt1sdI0oO8A/UTrg4jYHUUTbaA1cMPQ2Ipq9eZRvc4QheAI5ivvWhtNzowvIObqG4aBVaUbKP//Z@UXCkZpbh2iM5mnWWBQ8rleC@OchG69BrsMaZM0l5vYhx10iPiwzleJmSXxrTPzPlum9eLWgY14nB6eFhB/egyjwAD3gdDgKJhEu8vv4rvlXUo@v9zODNp7o1GmtBYuiSHAIp5H9Dc6JVyE3D2A3bsYtlstvgNKakGUBerGi1BMjDBbhA9hLtlBDVpom4WR/NkktkVapClMbLUoaRPd0kEWmhRSkgb5Jo15tj4THn2k3yddWngZZtH6U5AaPoiV@sjzM5E2@GzlM8c@6lS4G@5xJfRsE9D1iu0tI7AogBGQSARI4sUmMfAyiMCoTWBFBRvXd6frpXJN52gDFZhaaCdHRwRKF3wHE5J5lpP8MQCZ8zQHYgFoUyKEN@Gjkpq0CivXt6yCT5vyG1K8xiiyZmCLL33NNkmCUFJ5/3JHBVaNFABUEYgyZNAlMUQcFE6MMWEqh@G9ToashPbExhluYBHtYfHEcJZRwuou983ANEBT51G09o2uZdoUPcLtqhNc6LUC/JVemMAkSzYb2UTy7bP@eHRy@vNPBxc/ThQnKhKcXQkHFRHn4@lrvJ1dXm7uuV5YPn7F8m6Vt0rygjUl3cQIm8sKIRSNdWbImsKiEOIrD33CTu83y1unOxNGcPAbLOcK7VkCbTZfGkAKXh1G0UKTyTwYQDaaKGRbAERmIYA3O66/QtcndqfqJHqO8TEkWp5uAg3iotjHMIH95RzyFQ@0eBNFWgkB@omuizaFYHw8Wa8jOLivAvCqq6VXX/On@fsdUq2837YS7yxfx3@qjRCJ@TqKDNVUk1gmVN0/YHK8YzI2q3fHV5cmtiweZ7Ac39qWZc1YZ4OlXGXhr8HHnODDrZcRqniLCMDKxA@HfXY8W3Y@LDrY/PDBPh3@6ADB2fhi1CRLqFdurYhsoQ9LoT9PzCiIWaNUsDJEV@GYQc69BsY2IzYC7CPLdQo1k7Vc6G99hoULhT3Ew6IY@Ktk6wYYSOGsrAsIUzhDNdmnMPcfjSYbuUh15gKMiPjzsVfox3qPoBZO4CGgOLNBYaQN5pQQL0bFSshSl7W8koLNonmK7YONo7cz@rkMM5gzWLnliq9BcVV2Oo8XBm1YT0v4KwmvgBCEcogegjyCudJosKts4AVhl1qEMXXDpWGw68Tm6z@maIoJYUopv2XPcveaCg@0S@obcX2sO7FaIPCQzAiRKJulkSelN5y8ODktT5BTBbig@RloMBYg@rxknQSxoeg1tVRjzRqM8la8dUE0eo7Vfcv2RXs3@EywBMsX6BMMRRCwJk5MQA7dm61QB6iWwWXAJml5bOrAfAVKKtAGOUwXQxolND3iqFNDiWLpyU/gSfAEExPm@o6fB5U7Z28OB1jHdggvdoIDtERVXBTyH/WeGMn2hHFR90T70S43q3sYR7ABUdmB8LWonOF2iqFknbI3ReMwQ8ZqKuwyA5wwi6h6oY5SrSSVB9hcgnksxL7Wv0TDUm9A9nOOwqREAfMCrlCAxu@zAh1pNPD0tt1G0hkfNO/YZFuTZh1@18zAHgNWlMhMSxXzN3kmb7@ICT58cYNahUGsSkK1xIKMoaVcD59na9Xb5q@sSA0jNpGx5PA7xwmUJQO/AEaF25jknvTSoftD1Z/n8iHGQLtVwkTld5RFYTw02TMXJUL41d6JTiXacViu2suZmuXt7EFhuznvwaG5gwO/130orPa41mQ0niqEMUAHMliB9PQ7eG1CIrfdZvIEUKxhbl80RzSvZP/RV4E52g/M4VeZDvcz/ZOhWXGIz/Jsz1G9dAXsHHWPtO1tlBkL3IAN6da2IdXsCpPzB7n6UC738XgesjBzekTsWMVVsAtwBpa4A4eyIabpsXupbycKO1SaV5/hslVjMb8qKehVE3BI1Djrq4gja4//@gPMnGBIKhMJ2zSJkngow@Kcsro7vOQg7YEHhU0xefC/mzz4E0weSJMP9tjsCZuFycPXTeZa95iMx0NSIXAKCkfW5IN9dpaLwj0ZzKqAwrxGmVHoy75yM1Q5RRgW/M//Db@IX0VMwe/qPZXaVeefbVqvTOTq8e@ejOW4VI7GSFerjMdFFjEalDjzKtxKhiEHUrRaBRs3@QO4x3/ZUGeXindEbYeCbVwdBJFU4R86vY4CyzkfQj2labfUmrY7dMdilDWLXOhUZqQpB3pLqLtdRZ19VbRDi9biFNxdtvmNHouG4ROvwi/myaLDqu3WAQ9Ra8vGvst6Do9/fsgejKIlMgG0L4LlfBPl4JkcWsIYDsMF@1Fi7udBCg3G13GMwR1KXnktQmFsbhU/cb2wF9PVPIwNir90sHcT/E8Bw2KKqy8BL18@/uPSydZjezzuPgbpYjSyb8bdKAx@GY1@yINVEs3zIOvcz1P49@tv" rel="nofollow noreferrer">Try it online!</a></p>
<p>Shameless non-winning self-answer. 😏</p>
<p>It is a pretty good example of recursion and EVAL/BLOCK in Knight.</p>
<p>Abuses this interpreter's acceptance of out of bounds <code>ASCII</code> and <code>GET</code>. This won't work on the c/ast interpreter as <code>ASCII(&quot;&quot;)</code> is an error and so is reading past the end of a string.</p>
<pre class="lang-php prettyprint-override"><code># Read line
; = symbol PROMPT
# Template for printing identifier lists
; = parse_iden_list '
    # While symbol is not empty and not E
    ; WHILE &amp; symbol - 69 ASCII(symbol)
        # Recurse into parse()
        ; CALL parse()
        # If symbol is not empty and not E, print sep
        : &amp;(&amp; symbol - 69 ASCII(symbol))
            # dynamically replaced separator
            OUTPUT &quot;,&quot;
    # Pop the &quot;E&quot;. 
    # UB: This actually cuts off an extra char from the string,
    # but since the interpreter uses strchr to replace newlines,
    # there is going to be an extra null byte to save us.
    : CALL pop()
'
; = pop() BLOCK {
    : = symbol SUBSTITUTE(symbol 0 1 &quot;&quot;)
}
# Pop the _Z
; CALL pop()
; CALL pop()
; = parse() BLOCK {
    # Check for N
    ; &amp; ? 78 ASCII(symbol)
        ; CALL pop()
        # Parse the identifier list, replacing &quot;,&quot; with &quot;::&quot;.
        # I cba to update the offset for the ungolfed version
        ; EVAL SUBSTITUTE(parse_iden_list 22 1 &quot;::&quot;)
        # print trailing &quot;::&quot;
        : OUTPUT &quot;::&quot;
    # Get the length (done inline in golfed code)
    # by converting the string to a number.
    ; = length + 0 symbol
    # Print length chars after the number
    # LENGTH(number) will convert int to string and take the length.
    ; OUTPUT GET(symbol, LENGTH(length), length)
    # Pop the number and the identifier
    ; = symbol SUBSTITUTE(symbol (+ length LENGTH(length)) 0 &quot;&quot;)
    # Check for I
    # UB: Again, this will technically read out of bounds, but
    # this will in practice return the null terminator.
    : &amp; (? 73 ASCII(symbol))
        ; CALL pop()
        ; OUTPUT &quot;&lt;&quot;
        ; EVAL parse_iden_list
        : OUTPUT &quot;&gt;&quot;
}
# Parse base identifier
; CALL parse()
# Check for parameters
: &amp; symbol 
    ; OUTPUT &quot;(&quot;
    ; EVAL parse_iden_list
    : OUTPUT &quot;)&quot;
</code></pre>
<hr/>
<h1><a href="https://github.com/knight-lang/knight-lang" rel="nofollow noreferrer">Knight</a> (no known UB), 146 bytes</h1>
<pre class="lang-php prettyprint-override"><code>;=xP;=l';W&amp;x-69Ax;Cp&amp;&amp;x-69AxO&quot;,&quot;&amp;xCn';C=nB=xSxF1&quot;&quot;;Cn;C=pB;O;&amp;?78Ax;E;CnSl 22T&quot;::&quot;O&quot;::&quot;GxL=m+0x m;=xSxF+mLm&quot;&quot;&amp;&amp;x?73Ax;O&quot;&lt;&quot;;Cn;ElO&quot;&gt;&quot;&amp;x;O&quot;(&quot;;ElO&quot;)&quot;
</code></pre>
<p><a href="https://tio.run/##rVl7c9pIEv8bPsVYKSMNiLUkuNssQlC2F7uodYxj4k3V2VwWC2GrVghKEhs2se@r57rnIY0AJ7e5dVUQM9OPX/f0S8RvPvj@l1dh7EfrWdBNs1m4/OGxV1V3ovC@tOVnf66CLaIkjB9KW1m44DSzYB7GAYkiEi3jB/aRb767vHlD7GI5fndNnGL56/E1aRfLs8tT8rpYXt8QuyA@uxgrtJc3FwrpzeWb4/EvRkqJAR@1/9j/oPnZ8RiU8iP/cZrUaU6s0gBOyd7rtYuTy8F7PIrhCG15gm/dbvkcxbNz@PJkRBGFVYngZDS6YBTw0QerOmCKovv6nB8Caw7uj2m0Dii9jSe0Wj2qV@12q@p6m7HrxSfw2JzZmnZluV6ku@9rm@Y/fzreuKermvg60kztNNYdTXNPvdWJO3Jr/R9fA8nAPY3HEXGcd1qno43w43xz4S0a1oYsXCa4sbhYaBrQt4B@pHVBROwOopHW02q4YWhsRbVq/ahaZR6F4AimC@9aG4zOjC8g5uprwGobgAa4CkNQw/firG2@jfQLBWCaW4UIXU2TNDAo@VythHFGQrdagV3mbZPU5@vYhx00iviwzhYrM13Ft87E@2yZ1rNbBTbicXp4WkD88TGMAgNcAIQG94RJtLvsLr6b3yXk8/PtxKCdVxplSivhnBjCYcTziP5Kp4SLkLsHsHsXw3ajwXdASSWI0kDdeBaKiRGms/AhzCQ7qEGEtpmD5M86sS3SIHUBsdGgpEl0SwdZCCmkJAmydRLzjH0iPAJJt0vaNLcyTKPlxyAxfBAr9ZGnJyIx@GzlM8M@6FSYG@4xJfRsE7zr5dtbILAwAAhIJgIk8Wy9MvAyiPBRk8CKCjau707XC@Wazr0NVAA1106OjgiUL/gOEFbTNCPZYwAyp0kGxMKhdekhvAkflVQkKqxe30IFnzblN6RYjVFkTQCLL21N16sVupLK@5c7qmPVSAGHKgJRhgy6VQwRB8UTY0xA5W54p5M@K6MdsXGGG1hIO1hAMZxllLDay20zMA0Q6jSKlr7RtkybokW4XTaCC71WHH@l5xCYZMlmI5tIvn3ojwcnp7@9Pbj4eaQYUZLg7Eo4KIk4H45f4m3t8nK453qOfPgC8naZt0zyjDUlWcfoNpcVQygay9SQNYVFIcRXFvqEnd6v57dOeyJAcOfXWM7l2tMVtNpsbgApWHUYRTNNJnOvB9loopBtARCZuQDe8Lj@El2X2K2ykWg5xkefaFmyDjSIi3wfwwT251PIVzzQ4nUUaYUL0E40XbQqdMaHk@UygoP7sgNeNLWw6mv21P@6QSrK@22UeGfZMv5bMUIkZssoMlSoJrFMqLrfATnegYzN6s3x1aWJLYvHGSyHt7ZlWRPW2WApV2n4KfiQEXy41SJCFWvRA7Ay8cNhny3Plp0Piw42P3ywT4c/WkBwNrwY1Mkc6pVbySNb6MNS6E9XZhTErFEqvjJEV@E@g5x7yRnbjNgIsI/MlwnUTNZyob91mS9cKOwhHubFwF@stm6AOSmcFHUB3RROUE36Mcz8R6POxi5SnrvAR0T8@dgr9GO9Q1ALJ/DQoTi3QWGkNWaUEC/GxVLIUpe1vIKCzaNZgu2DjaS3E/q5CDOYM1i55YqvQXFZdjKNZwatWZs5/BWEV0AIQrmLHoIsgtnSqLGrrOEFYZeahTF1w7lhsOvE5us/JgjFhDCllN@yZ7l7ocIDcUl9A66PdSdWC4Q/JDO6SJTNAuRJYQ0nz09OixPkVB2c0/wGNBgLEH3earkKYkPRa2qJxpo1gPIWvHVBNHqO1X7N9kV7N/hMMAfkM7QJhiIIWBMnJiCH7s1WqANUy@AyYJM0PDZ1YL4CJRXeBjlMF/M0Sqh7xFGnhsKLhSVvwZJgAxMT5vqOnQelO2dvDwdYx3YIL3aCA7REZb8o5D/rHTGS7QnjvO6J9qNdrhf3MI5gA6KyA@GrUTHD7RRDyTpmb4vGYYqM5VTYZQZ3wiyi6oU6SrWCVB5gcwmmsRD7Uv8SDUu9AdnPuRdGhRcwL@AKhdP4fZZcR2o1PL1tNpF0wgfNOzbZViSswx/qKeAxYEWJzLREgb/OUnn7eUzw4YsDauSAWJWEaokFGUNLuR4@z1bKt81fW5EaRmwiY8nhd44TKEsGfgGMCrcxyT1ppUP3h6o/zeRDjIF2o3ATld9RFoXx0GTPTJQIYVdzJzqVaMdhuYyXM9WL29njhe3mvMcP9R0/8Hvd54XFHtPqjMZThTAG6EAGK5CefgevTUjkNptMnnAUa5jbF809mpWy/@irjjna75jDrzId7mf6N/NmySA@y7M9R7XSFW7nXvdI0972MmOBG7Ah3Zo2pJpdYnK@k6sL5XIfj@chC4PTIWLHyq@CXYDTs8QdOJQNMXWP3Ut1O1HYodK8uswvWzUW86uUgl45AftEjbOu6nFk7fBfgICZE/RJaSJhmyZREg9lWJxTVneHlxykPfCgsCmQe/8/5N7fALknIR/swewJzAJy/2XIXOseyHjcJyUCJ6dwZE0@2IezWOTmyWBWBeTwakVGoS37yk1f5RRhmPM//S/8In4VMTm/q3dUaledf7ZpvSKRy8d/eTKW41IxGiNdpTQe51nEaFDixCtxKxmGHEjRaORsHPJ7MI//sqHOLiXriNoOBduwPAgiqcLfdzotxS3nfAj1lKbdUGva7tAdi1HWzHOhVZqRxtzRW0Ld7Srq7KuiLZq3FifnbrPNb/RYBIZPvAo/nyfzDqu2WwcsRK0NG/su6zk8/vkhezCKhsgE0D4L5tN1lIFlcmgJYzgMZ@xHiamfBQk0GF/HMQZ3KHnhtQiFsblV/MT1zF5MF9MwNij@0sHeTfA/BgyLKS6/BDx/@fCvSyddDu3hsP0YJLPBwL4ZtqMw@H0w@CkLFqtomgVp636awL9P/wU" rel="nofollow noreferrer">Try it online!</a></p>
<p>Simply adds some range checks to avoid reading an empty string.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://nodejs.org" rel="noreferrer">JavaScript (Node.js)</a>, <s>216</s> <s>215</s> <s>213</s> <s>204</s> <s>197</s> 188 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>(m,o=2,X=A=&gt;m[o]&lt;X?X(n=A+m[o++]):o,M=x=&gt;m[o]==x?o++:&quot;&quot;,I=(e=&quot;&quot;)=&gt;m[o]?M`E`?&quot;&quot;:e+(M`N`&amp;&amp;I()+I`::`+&quot;::&quot;)+m.slice(X``,o+=+n)+(M`I`&amp;&amp;`&lt;${I()+I`,`}&gt;`)+(e&amp;&amp;I(e&lt;I?(a=&quot;)&quot;,&quot;,&quot;):e)):a)=&gt;I(a=&quot;&quot;)+I`(`
</code></pre>
<p><a href="https://tio.run/##XZNda9swFIbv8yuMGEXCakBJR@nBcihDA1003U0hpCuxa8upW9vKbGeYlv727MhOgrsEwfl43vdIQn6N/8ZNUue79rKyqTkktmpaL9tXiTzQkls54yt5K8Py0T4Fq8WKVvLWx8T3nxhYfie7oSdlt8AiEMK1pEYSwobG4i5S0YIQMD69i5bRxYWmzNcRQOQTAML8ctoUeWLoKoq49aVfMUdqJKPg28dA8@gzjLBunNwEekFjSRjh@GdgGIMYx2lXJA6n0fEgrWnaxpNetFmLzrsMvW6yWc8za@fPce1yDCmGDMtLV1ejBgDGjv95f69dXbkGJgHG4cgI1/vIjGPKju1BNwJ6Lf2fcIAaEc4i/LInXOvxvtBifd71MKUfM/@z78ajHPxOsdjDNz9@FfvGLT3LG6WEaOz5931bm7h14jMV5A06jBjaM73XrLFaaH31YuoUnR70VZGbN6VuWlPuihiv3lk1NtCBQ0I0eggcgsEZQSMxy1NTtXmWm1rMnGacIzDb9CffrN1UEYtnkYhUGJGJrXhRInfNGM8JkACkAAYgA9gCvADkJ40eREpkSmyXvU4vxasSb1oUSi1FKSol7MkrSHjKTTg4UWcUvAK8BUUY8hKgArDuEsTVcl6bVF3jCeu82oruGi9@c3xDX3u048cei6bNrshbSn5XhE3LeIdfTGhORScljE0mma09Ojzkx7za7VvumW5nktakT57NhtfNvI@J5w2U3bdI4Xt3HzDtJezYtIWZFnZLT4iUZy/uHc2HHpt8Hv4B" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a> (comes with test cases)</p>
<p>Turns out keeping a major fork of my approach was useful after all. I ended up dropping half of the functions, switching from arrays to strings, and weirdly enough, this new code has lots of repetition that wasn't in the old one.</p>
<p>I wrote this independently based on my Pyth answer's algorithm, and it's currently shorter than any suggestion on the other JS answer, so I'm posting it separately.</p>
<h3>Previous approach (197 bytes)</h3>
<pre class="lang-javascript prettyprint-override"><code>([,,...m],X=A=&gt;m&lt;X?X(A+M(m[0])):A,M=x=&gt;m[0]==x?m.shift():&quot;&quot;,N=e=&gt;M`E`?[]:[I()+e,...N(e)],I=_=&gt;[...M`N`&amp;&amp;N`::`,...m.splice(0,X``),M`I`&amp;&amp;`&lt;${N``}&gt;`].join``,R=s=&gt;m+&quot;&quot;&amp;&amp;s+I(a=&quot;)&quot;)+R`,`)=&gt;I(a=&quot;&quot;)+R`(`+a
</code></pre>
<h3>Explained</h3>
<pre class="lang-javascript prettyprint-override"><code>(
  m,       // Input string.
  o = 2,   // Offset into input string.

  X = A =&gt;     // Matches and consumes numbers in input.
    m[o] &lt; X      // Compare input to the stringification of the
                  // function X. Since that begins &quot;A=&gt;&quot;, and
                  // valid identifier start chars are all &gt;= &quot;A&quot;,
                  // this only matches numbers.
    ? X(          // If we got a number,
      n = A + m[o++] // add it to arg and consume it,
                     // save the result to n,
    )             // then keep parsing.
    : o           // Otherwise, return the current input offset.

  M = x =&gt;     // Matches and consumes input. Used as M`E` or M(&quot;E&quot;).
    m[o] == x     // Check if first char of input equals (stringified) arg.
    ? o++         // If matched, consume and return something truthy.
    : &quot;&quot;,         // Otherwise return &quot;&quot; (falsy and a string).

  I = (e = &quot;&quot;) =&gt;  // Recursively demangles identifiers. E-terminated if e!=&quot;&quot;.
    m[o]              // See if the input is empty.
    ? M`E`            // If input not empty, try to consume &quot;E&quot; from input.
    ? &quot;&quot;              // If successful, return &quot;&quot;.
    :                 // Otherwise:
    e                    // Start with the separator.
    + (
      M`N`               // Try to consume &quot;M&quot; from input.
      &amp;&amp;                 // If the match fails, &quot;&quot;.
      I()                // If successful, parse an identifier,
      + I`::`            // parse an E-terminated identifier, prefixing
                         // each part with &quot;::&quot;,
      + &quot;::&quot;             // and add an additional &quot;::&quot;.
    )                    // Append this to the result.

    + m.slice(
      X``,               // Parse a number from input, store it in n and
                         // get the input offset after the number.
      o += +n            // Add n to the input offset.
    )                    // Get the n characters between these indices
                         // and append them to the result.
    + (
      M`I`               // Try to consume &quot;I&quot; from input.
      &amp;&amp;                 // If the match fails, &quot;&quot;.
      `&lt;${
        I()              // If successful, parse an identifier,
        + I`,`           // parse an E-terminated identifier, prefixing
                         // each part with &quot;,&quot;,
      }&gt;`                // and wrap these in &lt;&gt;.
    )                    // Append this to the result.
    + (                 
      e &amp;&amp;               // If not parsing an E-terminated identifier, &quot;&quot;.
      I(
        e &lt; I ? (        // Otherwise, if the separator is less than the
                         // stringification of I (starting &quot;(e=&quot; which
                         // only matches &quot;(&quot;),
          a = &quot;)&quot;,       // set the terminator to &quot;)&quot;
          &quot;,&quot;            // and use &quot;,&quot; as the next separator.
        ) : e            // Otherwise, keep using the same separator.
      )                  // Keep searching with that separator.
    ) : a             // If the input was empty, return the terminator.
) =&gt;
  I(           // Parse an identifier
    a=&quot;&quot;       // (and initialize a=&quot;&quot;),
  ) + I`(`     // then parse an E-terminated identifier (until EOF).
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="http://raku.org/" rel="nofollow noreferrer">Raku</a>, <s>221</s> 218 bytes</h1>
<pre><code>-&gt;[\a,*@b]{a~&quot;({join ',',@b})&quot;x?@b}o{my rule s{(\d+){}:my$n=$0;(.**{$n})}
my rule i{(N$&lt;n&gt;=&lt;~~&gt;+E)?&lt;s&gt;(I$&lt;t&gt;=&lt;~~&gt;+E)?}
sub p($/){join('::',$0&lt;n&gt;».&amp;p,'')xx?$0~$&lt;s&gt;[1]~(&quot;&lt;{join ',',$1&lt;t&gt;».&amp;p}&gt;&quot; if $1)}
m/&lt;i&gt;+/&lt;i&gt;».&amp;p}
</code></pre>
<p><a href="https://tio.run/##XU/BbqMwEL33KyxkFUhom4F0q6aEVFp5JV9oL70kqRAsJnVLIGsTiSyCH@utP5bapGm7a2nsmTfvzRtvmMh/7Nc7dJqh6f4sWCxjZ3CbPDZxZ1jNc8kLZDqmc5u0tlHP1FM2iiy2OUOysZbp0G7ayXqHiyke3Vjng0GDi9ZuT44k3lgh9otg6nddMCT2zJeBRbFffSHtidwmaGPhC7s3tMzJxHTwSKneXs9PN45p2nU9w6MOK/ECHjvL8L9Ww6CG9cQ2MBDPEAbtf@HzYKivQ2sv4x0ycISmAWoUJ2oNlJUC@dEcahTNvawsvSQWKg11Tj4K79fdHdU5@UZS8fejPPT@B3RN/hmlYn4EDppe5P3Zavfw@ud9vpU6qMslIQCy/DyXK8HiStNcWVKgdPzERKpID3Scc/ZCyHXF1ps8rphULHB5yoqKZ5wJcBXgRr01xJDAb0iBQQYreCLAjzA94AQyAquwb9EQngm8UMgJCWENBYFSDx@HnmApuVIrCF6soL5SP4rUh4L9Ow" rel="nofollow noreferrer" title="Perl 6 – Try It Online">Try it online!</a></p>
<p>Leverages the considerable power of Raku's regexes.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="noreferrer">Retina 0.8.2</a>, 133 bytes</h1>
<pre><code>1`\d+(?=.*\z)
$*#
}`(#)+((?&lt;-1&gt;.)+)
@$2¶
{`N(@.*)¶@
$1::N@
N(@.*)¶E@
$1::
(¶I@.*)¶@
$1,
}`¶I@(.*)¶E
&lt;$1&gt;¶
^_Z|@|¶$

1&gt;`¶
,
¶(.+)
($1)
</code></pre>
<p><a href="https://tio.run/##XY/dboJAEIXv9zWkyaKWZMDGaKySNNNmb9be9IaYApYFt6K0gImx9rV4AF6M7or2b5NJZr45c2YnF6Xchs0VpQ9BA8Ei6tHZrdVdHExidDvkM6Ads0fpbHINU8vsmcQ17LoiHwGnrtU168olBozH3CUXgC0htK7Yj6SvrDSgrYZMDJgqn2ffO7rHujIIgakSkD6pK2qpPdQAs2l8D/bE95w4y5xlmKuU6xzPhXM/nzOd4y@RisO5bHv/ga7xj5UK7wLamdOQ877T2/no7jHdFTqYLQtEgCL7fjdJLsJSy@wiY8DYYCXySIme2CCVYo04KsXmLQ1LUSgV2DIS21LGUuRgK2D7p9UQwhJeIAIBMSSwQpAXzFqOECMk/NRiHF4R1gxSRA4b2CJk2nzAnVxEOFRfyOU2gf1QXeSrg74A" rel="noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>
<pre><code>1`\d+(?=.*\z)
$*#
</code></pre>
<p>Convert the first integer in the (remainder of the) unconverted string to unary.</p>
<pre><code>(#)+((?&lt;-1&gt;.)+)
@$2¶
</code></pre>
<p>Extract the identifier after the integer, mark it so that it doesn't get confused with <code>N</code> or <code>E</code> marks, and put it on its own line with the remainder of the unconverted string on the next line.</p>
<pre><code>}`
</code></pre>
<p>Repeat until all of the identifiers have been extracted.</p>
<pre><code>{`
}`
</code></pre>
<p>Repeat until all namespaces and templates have been processed.</p>
<pre><code>N(@.*)¶@
$1::N@
</code></pre>
<p>If a type has more than one namespace then join each one with the next using <code>::</code>.</p>
<pre><code>N(@.*)¶E@
$1::
</code></pre>
<p>If this is the last namespace then join it to the type and remove the namespace markers.</p>
<pre><code>(¶I@.*)¶@
$1,
</code></pre>
<p>If a type has more than one template then join it to the next using <code>,</code>.</p>
<pre><code>¶I@(.*)¶E
&lt;$1&gt;¶
</code></pre>
<p>If this is the last type in the template then wrap the types in <code>&lt;&gt;</code> and remove the template markers.</p>
<pre><code>^_Z|@|¶$

</code></pre>
<p>Remove all the remaining leftovers.</p>
<pre><code>1&gt;`¶
,
¶(.+)
($1)
</code></pre>
<p>If this is a function then separate the parameters with <code>,</code> and wrap them in <code>()</code>.</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a>, 257 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>(l:r)%x=l:tail(x&gt;&gt;=(',':))++r
h('I':r)|(x,e:r)&lt;-f r=(&quot;&lt;&gt;&quot;%x,r)
h e=(&quot;&quot;,e)
f('N':r)|(x,e:r)&lt;-f r,(h:t,r)&lt;-f r=(((x&gt;&gt;=(++&quot;::&quot;))++h):t,r)
f r|[(n,r)]&lt;-reads r,(i,u)&lt;-h(drop n r),(x,u)&lt;-f u=((take n r++i):x,u)
f e=([],e)
p[x]=x
p(x:y)=x++&quot;()&quot;%y
z=p.fst.f.drop 2
</code></pre>
<p><a href="https://tio.run/##ZZNRa@JAEMff8ykWueIuxsKoR@mQ5OXYg8Bh76UvliJpszFb18TbRJpKv7s3E1tJ74TFmfn/5j@zMZZZszXOnU7SoVdXXeywzayTXZLEchyOUanJxAelHKdjAt5lFxr6jqaF8LEcRcnoqgu9CkphKB2FRgWFHC//Y0NZYhteGuV5wGQyQhzxiFL1ckDq@4OsKHyMpt5kecO9NjxQZylzX@9FJbwKyfvQmx3IrM22hsuTiVXIAtnQOg@PvM7@oXuMu2AvO3xTcUcjpRpdvQXHeH9dNO11cd27zk67zFYiFnkdCOFENBUb0/6yleHUtOK1IfG19rTRN@GouPe2aik@ClnSogQoEcfCZQ3DBLDhab2CTkwT0QXr1byo6/lT5jmnUFKoqLzkuh4IiBQz//PuLuW6ZoGSiOJkYETnODALKVUf8rlvAPS98l@CAT0g2CL5shOd1XAvslhdtj5P6cfM/xy64SiGj5KKPXz747c7NHzSmW20Bmjqy@f7hn7plpsvVGQbchgwsmd6r1lTp5Cmi9L4nJzu04WzZqv1bWt2e5e1pmGrpo7SiJGEjO4jRii4IGQEM5ubqrWFNR5m3DPMCZit@5uvVzwVMniCZ8jBQAEbKDVYFjO6J@IzYo5oEAvEDWKJaD970nOThkLDZtn3pUt40bBNwWm9hB1UGupPr@g5zEOTnJ0kG0UviNvIJUm4Q6wQa34IsFjOvcn1Dd2Q3sMNdDf04Ncf79BXjf4rH5r6Cw" rel="noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu11" class="pu"><h1>Python 3, <s>460</s> <s>417</s> <s>362</s> 355 bytes</h1>
<p><a href="https://tio.run/##fY/BTsMwEETv/gqzl9pKQCzcnJqbD7nkAwgRShqncbDjyDVCfH1wWiR6qLitdmfnzSzfcfTz87oat/gQadDESTMvn5Hx@kk0xEsA0uuBtowLQo/Wd62lLveEmgFKkNLVApt0oi6NKJrCZxL2kBZfo7EaFNz9ahbGz8ccrtXS1@IeL28vF9Zyi1XdYP0DEQKudSl@MaVmkQX94Np4GFnYvfXZLne8fmx40UmrZ3aKgU387ODqTkxZ1xSbRxpS1mRCkj8xA3UpxYZhiXKOkDZ//TYB1fakgQNZwob1fF3fXytssSvxgD1qhYPCY4WjQlNWOCn8KNEqVaHDWaH/AQ" rel="noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p><em>-43 bytes thanks to @Easyaspi</em><br />
<em>-55 bytes thanks to @ovs</em><br />
<em>-7 bytes thanks to @Arnauld</em></p>
<pre class="lang-python prettyprint-override"><code>import re
m=input()[2:]
o=&quot;&quot;
def a():
 global m,o
 if&quot;I&quot;==m[:1]:
  m=m[1:];o+=&quot;&lt;&quot;
  while&quot;E&quot;!=m[:1]:p();o+=&quot;,&quot;
  m=m[1:];o=o[:-1];o+=&quot;&gt;&quot;
def p():
 global m,o
 if&quot;N&quot;==m[:1]:
  m=m[1:]
  while&quot;E&quot;!=m[:1]:p();o+=&quot;::&quot;
  m=m[1:]
 a();j=int(re.match(r'\d+',m)[0]);b=len(str(j));o+=m[b:j+b];m=m[j+b:];a()
p()
if m:
 o+=&quot;(&quot;
 while m:p();o+=&quot;,&quot;if m else&quot;)&quot;
print(o)
</code></pre>
</div>
<!-- TYYY -->

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/QNNN/">QNNN</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




