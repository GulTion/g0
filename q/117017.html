<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::117017</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>nan</td><td></td><td>221005T150944Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/252645#252645">bigyihsu</a></td></tr>
<tr d-ix="1"><td>039</td><td>Google Sheets</td><td>221005T182616Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/252667#252667">General </a></td></tr>
<tr d-ix="2"><td>045</td><td>PHP7.4</td><td>220405T103223Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/245942#245942">user1117</a></td></tr>
<tr d-ix="3"><td>039</td><td>Python 3</td><td>220405T093404Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/245940#245940">Jitse</a></td></tr>
<tr d-ix="4"><td>096</td><td>Aussie++</td><td>220406T030713Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/245966#245966">Bbrk24</a></td></tr>
<tr d-ix="5"><td>134</td><td>Rust</td><td>210908T152933Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/235172#235172">Aiden4</a></td></tr>
<tr d-ix="6"><td>135</td><td>Nim</td><td>210908T090231Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/235159#235159">xigoi</a></td></tr>
<tr d-ix="7"><td>038</td><td>Math.JS</td><td>170420T014650Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117060#117060">ATaco</a></td></tr>
<tr d-ix="8"><td>4432</td><td>APL Dyalog Classic</td><td>180525T015740Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/165405#165405">Adalynn</a></td></tr>
<tr d-ix="9"><td>111</td><td>Java 8</td><td>180525T010553Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/165403#165403">Jakob</a></td></tr>
<tr d-ix="10"><td>083</td><td>C GCC</td><td>180524T195725Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/165391#165391">Jakob</a></td></tr>
<tr d-ix="11"><td>020</td><td>Attache</td><td>180505T185342Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/164244#164244">Conor O&</a></td></tr>
<tr d-ix="12"><td>027</td><td>8086 machine code</td><td>170421T024717Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117188#117188">user5434</a></td></tr>
<tr d-ix="13"><td>006</td><td>BrainFlak</td><td>180415T141517Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/162326#162326">ბიმო</a></td></tr>
<tr d-ix="14"><td>206</td><td>C</td><td>170420T171010Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117120#117120">Julian W</a></td></tr>
<tr d-ix="15"><td>058</td><td>C#</td><td>170419T203749Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117031#117031">Eugene D</a></td></tr>
<tr d-ix="16"><td>053</td><td>C#</td><td>170426T014339Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117662#117662">John Cle</a></td></tr>
<tr d-ix="17"><td>022</td><td>k</td><td>170421T215655Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117288#117288">skeevey</a></td></tr>
<tr d-ix="18"><td>018</td><td>JavaScript ES6</td><td>170419T191922Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117021#117021">Neil</a></td></tr>
<tr d-ix="19"><td>036</td><td>Perl 5</td><td>170420T210746Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117163#117163">hobbs</a></td></tr>
<tr d-ix="20"><td>029</td><td>Clojure</td><td>170422T103638Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117321#117321">NikoNyrh</a></td></tr>
<tr d-ix="21"><td>058</td><td>C</td><td>170419T223356Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117049#117049">Conor O&</a></td></tr>
<tr d-ix="22"><td>091</td><td>C++ gcc</td><td>170420T075655Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117071#117071">Neil</a></td></tr>
<tr d-ix="23"><td>072</td><td>C++</td><td>170419T233733Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117054#117054">hvd</a></td></tr>
<tr d-ix="24"><td>089</td><td>Lua</td><td>170421T155515Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117240#117240">Blab</a></td></tr>
<tr d-ix="25"><td>019</td><td>Pyth</td><td>170419T221019Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117044#117044">Steven H</a></td></tr>
<tr d-ix="26"><td>058</td><td>Scala</td><td>170420T162356Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117115#117115">corvus_1</a></td></tr>
<tr d-ix="27"><td>096</td><td>C</td><td>170419T224556Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117050#117050">betseg</a></td></tr>
<tr d-ix="28"><td>052</td><td>R</td><td>170420T024140Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117062#117062">BLT</a></td></tr>
<tr d-ix="29"><td>039</td><td>Octave</td><td>170420T135516Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117102#117102">rahnema1</a></td></tr>
<tr d-ix="30"><td>069</td><td>Python</td><td>170420T094632Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117083#117083">Zhengqun</a></td></tr>
<tr d-ix="31"><td>063</td><td>Python 3</td><td>170420T054503Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117068#117068">ovs</a></td></tr>
<tr d-ix="32"><td>086</td><td>PowerShell</td><td>170420T114717Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117094#117094">Andrei O</a></td></tr>
<tr d-ix="33"><td>118</td><td>Haskell GHC</td><td>170420T111746Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117093#117093">Zgarb</a></td></tr>
<tr d-ix="34"><td>044</td><td>PHP</td><td>170419T214226Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117041#117041">J&#246;r</a></td></tr>
<tr d-ix="35"><td>040</td><td>R</td><td>170420T104223Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117088#117088">Konrad R</a></td></tr>
<tr d-ix="36"><td>062</td><td>C#</td><td>170420T093318Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117081#117081">TheLetha</a></td></tr>
<tr d-ix="37"><td>018</td><td>Julia 0.5</td><td>170420T001905Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117056#117056">Dennis</a></td></tr>
<tr d-ix="38"><td>052</td><td>Julia v0.5+</td><td>170419T211924Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117037#117037">Julian W</a></td></tr>
<tr d-ix="39"><td>061</td><td>Python</td><td>170419T215153Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117043#117043">Julian W</a></td></tr>
<tr d-ix="40"><td>034</td><td>Dyvil</td><td>170419T221831Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117046#117046">Clashsof</a></td></tr>
<tr d-ix="41"><td>025</td><td>Mathematica</td><td>170419T203303Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117029#117029">Martin E</a></td></tr>
<tr d-ix="42"><td>031</td><td>Perl 6</td><td>170419T212711Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117039#117039">Sean</a></td></tr>
<tr d-ix="43"><td>023</td><td>Ruby</td><td>170419T203958Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117032#117032">daniero</a></td></tr>
<tr d-ix="44"><td>036</td><td>Python 2</td><td>170419T192305Z</td><td><a href="https://codegolf.stackexchange.com/questions/117017/arbitrary-length-currying/117022#117022">mbomb007</a></td></tr>
</table>
<div id="pu0" class="pu">
<h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, <s>87</s> 82 bytes</h1>
<pre class="lang-go prettyprint-override"><code>func f(x int)func(int)any{return func(y int)any{if y&lt;1{return x+y}
return f(x+y)}}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70oPX_B7oLE5OzE9FSF3MTMPK7M3IL8ohIFPQWltNwSpaWlJWm6FjeD0krzkhXSNCoUMvNKNEEcDRAjMa-yuii1pLQoTwEsVqkAE81MU6i0MYRJVmhX1nLBFGoAeZq1tVCTn4NNBtmsoalQzRVQBDQhJ08jTcNYU8NEU08D2S5NDQNNBVtbBXNNJHWGMFFDZFETTQ0jDN3mOMwzNCZDqymGCKYuiPFGBppcUO8uWAChAQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Stopping value is 0.</p>
<p>This works because the <code>any</code> in Go represents all types, at the expense of every call after the 2nd needing to be cast with <code>.(func(int)any)</code>, like <code>f(3)(4).(func(int)any)(0)</code>.</p>
<ul>
<li>-5 by returning the function directly.</li>
</ul>
</div>
<div id="pu1" class="pu"><h2>Google Sheets, 39</h2>
<p>Based on the explanation <a href="https://codegolf.stackexchange.com/a/117060/">here</a></p>
<p>Named functions:</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th>name</th>
<th>args</th>
<th>body</th>
</tr>
</thead>
<tbody>
<tr>
<td>F</td>
<td>a</td>
<td><code>G(0,a)</code></td>
</tr>
<tr>
<td>G</td>
<td>a, b</td>
<td><code>IF(b&gt;0,LAMBDA(c,G(a+b,c)),a)</code></td>
</tr>
</tbody>
</table>
</div>
<p>Score: 34 (body text) + 2 (names) + 3 (args) = 39</p>
<h3>Example</h3>
<p>Termination call arg is any non-positive number:</p>
<pre><code>=F(2)(4)(0)
</code></pre>
<p>gives 6.</p>
</div>
<div id="pu2" class="pu"><h2>PHP7.4 (45 chars)</h2>
<p>The superglobal function <strong><a href="https://www.php.net/manual/en/reserved.variables.environment.php" rel="nofollow noreferrer">$_ENV</a></strong> will return an adder function continuously.<br />
After the operations, when no argument is provided <strong>$_ENV</strong> will return the result.<br />
The function <strong>$_ENV</strong> is not designed to accept a negative value or no input at all.</p>
<pre class="lang-php prettyprint-override"><code>$_ENV=fn($a)=&gt;fn($b=-1)=&gt;~$b?$_ENV($a+$b):$a;
</code></pre>
<p>Usage :</p>
<pre class="lang-php prettyprint-override"><code>var_dump($_ENV(1)() == 1);                 // bool(true)
var_dump($_ENV(4)(2)(7)() == 13);          // bool(true)
var_dump($_ENV(4)(2)(7)(5)(2)() == 20);    // bool(true)
</code></pre>
<p><strong>Info</strong>: Overriding a <a href="https://www.php.net/manual/en/language.variables.superglobals.php" rel="nofollow noreferrer">superglobal</a> like <em>$_ENV</em> variable isn't recommended.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 39 bytes</h1>

<pre class="lang-python prettyprint-override"><code>class f(int):__call__=lambda s,o:f(s+o)
</code></pre>
<p><a href="https://tio.run/##K6gsycjPM/7/PzknsbhYIU0jM69E0yo@PjkxJyc@3jYnMTcpJVGhWCffKk2jWDtf839BEVCFRpqGiaaGkaaGuaaGKZhhoKnJhS6l@R8A" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Not the shortest (<a href="https://codegolf.stackexchange.com/a/117022/87681">by 3 bytes</a>), but it's different from all previous Python approaches. It works by making a callable <code>int</code> subclass. Termination call is optional, but requires a <code>0</code> argument if used.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/zackradisic/aussieplusplus/" rel="nofollow noreferrer">Aussie++</a>, <s>98</s> 96 bytes</h1>
<p>-2 because I remembered the angle brackets aren't necessary for a single-statement <code>YA RECKON</code> body.</p>
<pre><code>THE HARD YAKKA FOR f IS(x)&lt;THE HARD YAKKA FOR g IS(y)&lt;YA RECKON y ?BAIL f(x +y);BAIL x;&gt;BAIL g;&gt;
</code></pre>
<p>Tested in commit 9522366. For the final call, give it <code>BUGGER ALL</code> or <code>YEAH, NAH!</code> instead of a number.</p>
<p>The general structure is something like</p>
<pre class="lang-js prettyprint-override"><code>function f(x) {
    function g(y) {
        if (y) return f(x + y);
        return x;
    }
    return g;
}
</code></pre>
<p>Since Aussie++ doesn't have function expressions or anonymous functions yet, it is necessary to put the function declaration and return as separate statements.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.rust-lang.org/" rel="nofollow noreferrer">Rust</a>, 134 bytes</h1>

<pre class="lang-rust prettyprint-override"><code>|x|{fn b(a:i32,n:i32)-&gt;Box&lt;dyn std::any::Any&gt;{if n&gt;0{Box::new(Box::new(move|x|b(a+n,x))as Box&lt;dyn Fn(_)-&gt;_&gt;)}else{Box::new(a)}}b(0,x)}
</code></pre>
<p><a href="https://tio.run/##nY7LrsIwDET3@YpcVrZuQTzExoVIsOA3UKCpVKm4qElpq5BvL2HBo1s2lmXPnJm6sW7IWV50wYC@NE7mciuHe3f38XwCTcVqmfBz4lTtq26T9Syty4g090Q77pUvcslq7uOXiE0L7@VS3UxERcw/Jx2itvKFODAcI/GoMJjSmo9ZYwgnmEd5GFLRWDNOS8W1LtiV/AcTHyYJ5LDCWVa1fNbWEW2@Asaln1WVApw13Nb6Coiw/tEJ08XIGeUjcCqCEMMD" rel="nofollow noreferrer" title="Rust – Try It Online">Try it online!</a></p>
<p>In your face, strict type system! Terminates if the input is negative. You do have to downcast the result after every call though (see tio). I took a similar approach to the Math.js solution.</p>
<p>ungolfed:</p>
<pre class="lang-rust prettyprint-override"><code>|x| {
        fn b(a: i32, n: i32) -&gt; Box&lt;dyn std::any::Any&gt; {
            if n &gt; 0 { 
                Box::new(Box::new(move |x| b(a + n, x)) as Box&lt;dyn Fn(_) -&gt; _&gt;)
            } else {
                Box::new(a)
            }
        }
        b(0, x)
    }
</code></pre>
<p>Rust's strong type system makes this almost impossible. Fortunately, trait objects come to the rescue. Trait objects erase the type and all associated data except for the trait's implementation. In this instance, I use the <code>Any</code> trait, which allows downcasting back into a concrete type. There are some wrinkles because you can't explicitly name the type of closures, so I have to cast the closure into a <code>Fn</code> trait object and then recast it into an an <code>Any</code> before use.</p>
</div>
<div id="pu6" class="pu"><h1><a href="http://nim-lang.org/" rel="nofollow noreferrer">Nim</a>, 135 bytes</h1>
<pre><code>import sugar
type X=object
 case t:int8
 of 0:i:int
 else:f:int-&gt;X
func s(x:int):int-&gt;X=(y:int)=&gt;(if y&lt;0:X(t:0,i:x)else:X(t:1,f:s x+y))
</code></pre>
<p><a href="https://tio.run/##LcxBCoMwEAXQfU4xywxV0dLSMqjnyNaGpJ1SjZgIyenTRrr5/Dcwf@E5Z55XtwXw@3PaREirATW4x9voIEBP3kAgXsJdgLPQEhcIMB9vyJZej0rYfdHgZSzG/3GQ6eAwSraQ@paUDNRWTBGP78KusuQhnhJiNvrlfiMXlGdsrLyVuJY4WHfYcP4C" rel="nofollow noreferrer" title="Nim – Try It Online">Try it online!</a></p>
<p>Like the JavaScript answer, but with type safety.</p>
</div>
<div id="pu7" class="pu"><h1>Math.JS, 38 Bytes</h1>
<pre><code>f(x)=i(x,0)
i(x,y)=x&lt;0?y:j(z)=i(z,y+x)
</code></pre>
<p>Call it with <code>f(number_a)(number_b)(...)(negative_number)</code></p>
<p>If we're allowed to specify the initial call, 12 bytes (<code>f(x)=i(x,0)\n</code>) can be dropped, and it can be called with <code>i(number_one,0)(number_two)(...)(negative_number)</code></p>
<p><a href="http://a-ta.co/math/f(x)%3Di(x%2C0)%0Ai(x%2Cy)%3Dx%3C0%3Fy%3Aj(z)%3Di(z%2Cy%2Bx)%0A%0Aprint(%0A%20%20%20%20f(3)(4)(5)(-1)%0A)%0A" rel="nofollow noreferrer">Try it!</a></p>
<h2>Explanation</h2>
<p><span class="math-container">$$
\begin{align}
f(x) &amp; = i(x, 0) \\
i(x, y) &amp; = \begin{cases}
y, &amp; \text{if } x &lt; 0 \\
j(z) = i(z, y+x), &amp; \text{otherwise}
\end{cases}
\end{align}
$$</span></p>
<p>As shown above, <code>f(x)</code> simply calls <code>i(x,0)</code>, then, <code>i(x,y)</code> returns the value of <code>y</code> if <code>x</code> is less than 0, or the function <code>j(z)=i(z,x+y)</code> otherwise.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, <s>48</s> <s>47</s> <s>46</s> <sub>44</sub> 32 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>∇r←(a f)x
r←⍎'(a+x)f'↓⍨-0=x
∇
0f
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob2pm/qO2CQb/H3W0FwEZGokKaZoVXCDmo94@dY1E7QrNNPVHbZMf9a7QNbCt4AKq4zJI@@@mAFShYJDGBTQBzNRwUzDUVDBA8CECRkCx/wA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>

<p>Terminates by passing in zero . Call syntax: <code>((0 f 1) 2) 0</code></p>

<p>-15 bytes thanks to @ngn</p>

<p>Requires <code>⎕IO←0</code></p>

<p>Any golfing tips are welcome!</p>
</div>
<div id="pu9" class="pu"><h1>Java 8, 111 bytes</h1>



<p>A lambda from <code>int</code> to a function. Calls are terminated by passing zero.</p>

<pre class="lang-java prettyprint-override"><code>i-&gt;new java.util.function.Function&lt;Long,Object&gt;(){int t=i;public Object apply(Long x){t+=x;return x&lt;1?t:this;}}
</code></pre>

<p><a href="https://tio.run/##nVA7T8MwEJ6dX3GjLVoLJGAgTRALEhKIoSNicBM3XHCdyL6UVFF@e0iIKyQGXtPd95LuvlLt1bKqtS3z16FuNgYzyIzyHh4UWugiFkhPisaxRasMlGNKNoRGbhubEVZW3oZldWdJF9otvjXdV7ZYwOOm1BmlKWSNc6jzmzyHZMBlavXbz/GQ5qJDS0AJxuHUWQBV1@bAJyu0oqOTpI2dpsZZaFdn13RFL@jjvh9YHH39cl9hDruxAL4mh7Z4egblCi@mPtj64EnvZNWQrEeRjOUjyzj/9cNi8v898I8E@2xWzn2cB0UEfGFm4ogvZ3yEpx9QxBHroz4a3gE" rel="nofollow noreferrer">Try It Online</a></p>

<h2>Ungolfed</h2>

<pre class="lang-java prettyprint-override"><code>i -&gt;
    new java.util.function.Function&lt;Long, Object&gt;() {
        int t = i;
        public Object apply(Long x) {
            t =+ x;
            return x &lt; 1 ? t : this;
        }
    }
</code></pre>

<p>Due to an interesting interplay between byte counts of primitive and object integer types, intermediate functions take a <code>Long</code> as a parameter, but the total is stored in and returned as an <code>int</code>.</p>

<h2>Limitations</h2>

<p>The returned function is mutated when called, so, for instance, it's not possible to obtain two integer results without two calls of the lambda. However, the functions returned by separate calls to the lambda are fully independent, so it seems the challenge requirements are met.</p>

<p>Liberal casting is required when constructing expressions that use the lambda. See the TIO for a usage example.</p>
</div>
<div id="pu10" class="pu"><h1>C (GCC), 83 bytes</h1>



<p>My first C golf! There are a couple of other C solutions, but this one's a bit different. Preprocessor use is purely cosmetic. This approach was first discussed in Conor O'Brien's answer <a href="https://codegolf.stackexchange.com/a/117049">here</a>.</p>

<pre class="lang-c prettyprint-override"><code>#define r union r
t=0;r{int v;r(*f)();};r e;r f(a){t+=a;e.v=a?f:t;t*=a&gt;0;return e;}
</code></pre>

<p>The terminal value is zero. The return value is a union, so to call the result, use field <code>f</code>, and to access the final value, use field <code>v</code>, e.g.</p>

<pre class="lang-c prettyprint-override"><code>f(1).f(2).f(3).f(0).v
</code></pre>

<p><a href="https://tio.run/##fY5BDsIgEEXX9hSTGhOolVC7c4JexA2hoCycGqRsmp69UmOMC@Ni3ur9/8fsLsbMniLcQ6ZjpqdHBHPVAaoahBAc53VnnScLAQbyPUEoopIYxiWWMLDKccZxwgA2n2Oaj3GrNFqRlD65Q8RYKX3MERuHQNmaXpM37Yml3nccxmL1fqDcdGcq61zTcOHYfkG7QHKROP7w2o/y32uklF/CND8B" rel="nofollow noreferrer">Try It Online</a></p>

<h2>Limitations</h2>

<p>A global variable holds the running total. While this is explicitly disallowed, the submission does support repeated invocations (the total is reset in the terminal call), which seems to be the reason for the ban on global state.</p>

<p>A pointer to <code>f</code> is stored to the returned union through the <code>int</code> member, so this is clearly not portable. I'm not sure if this works on GCC on all platforms or just on Linux or just on x86 or just with ELF or... If anyone knows any details about this, please comment or send a message!</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/ConorOBrien-Foxx/Attache" rel="nofollow noreferrer">Attache</a>, 20 bytes</h1>

<pre><code>{If[_,$&amp;Sum[__],_2]}
</code></pre>

<p><a href="https://tio.run/##SywpSUzOSP2fZmX7v9ozLTpeR0UtuDQ3Oj4@VifeKLb2f0BRZl5JdFq0YWy0QWwsF4xrEhttFBttjkPQFMwASv0HAA" rel="nofollow noreferrer" title="Attache – Try It Online">Try it online!</a></p>

<h2>Explanation</h2>

<pre><code>{If[_,$&amp;Sum[__],_2]}
{                  }    lambda, taking parameters stored in `__`
 If[_,            ]     If the first parameter `_` is truthy (nonzero):
      $                    return this function
       &amp;                   bonded with
        Sum[__]            the current running sum
               ,        otherwise:
                _2         return the sum
</code></pre>

<p>Since <code>(f&amp;n)[x]</code> is equivalent to <code>f[x, n]</code>, this will continue returning itself with the updated sum until <code>n = 0</code>.</p>

<p>If you want computation to occur after the final <code>0</code>, then one could do this for 28 bytes:</p>

<pre><code>{If[_,Fold[`&amp;,$'__],Sum!__]}
</code></pre>

<p>This is much the same thing, except we use <code>Fold[`&amp;,$'__]</code> to bond <code>$</code> with each individual argument.</p>
</div>
<div id="pu12" class="pu"><h1>8086 machine code, 27 bytes</h1>

<pre><code>00000000  bb 00 00 85 c0 74 13 01  d8 be 00 01 89 e7 47 47  |.....t........GG|
00000010  57 b9 1b 00 f3 a4 5b 89  47 01 c3                 |W.....[.G..|
0000001b
</code></pre>

<p>This machine code must be at address 0x100, and assumes the tiny code model (cs=ds=es=ss).  The function location can be changed without costing extra bytes, though.  Putting it at offset <code>0</code> would save a byte (<code>xor si,si</code> instead of <code>mov si, 0x100</code>)</p>

<p><strong>Required calling convention</strong></p>

<p>This assumes the caller has pre-allocated at least 27 bytes on the stack. It takes a number in <code>ax</code>, and returns a function pointer in <code>bx</code>. Calling this pointer with <code>ax=0</code> terminates the chain, and returns the sum in <code>bx</code>.<br>
So for the first call:</p>

<pre><code>mov bp, sp
sub sp, 28
mov ax, number_to_add
call function
; new function pointer in bx
</code></pre>

<p>Then, for each subsequent call:</p>

<pre><code>sub sp, 28
mov ax, number_to_add
call bx
; new function pointer in bx
</code></pre>

<p>To terminate:</p>

<pre><code>mov ax, 0
call bx
; result in bx
mov sp, bp
</code></pre>

<hr>

<h3>Ungolfed (commented disassembly of the machine code):</h3>

<pre><code>00000000  BB0000            mov bx,0x0      ; 0 is replaced after copying
00000003  85C0              test ax,ax
00000005  7413              jz 0x1a         ; if(ax==0) ret (with value in bx)
00000007  01D8              add ax,bx       ; arg += total
00000009  BE0001            mov si,0x100    ; address of the original: ds:0x100
0000000C  89E7              mov di,sp
0000000E  47                inc di
0000000F  47                inc di          ; dst = sp+2 = above return address
00000010  57                push di
00000011  B91B00            mov cx,0x1b
00000014  F3A4              rep movsb         ; copy the function code.
00000016  5B                pop bx            ; bx = start of copy destination
00000017  894701            mov [bx+0x1],ax   ; update total in the copied code
0000001A  C3                ret               ; with bx = function pointer
</code></pre>

<p>After calling this with non-zero AX, <code>bx = sp</code> and the buffer is filled with a modified copy of the machine code from <code>function</code>.  The 16-bit immediate in the first instruction holds the total.  (It's written by the last instruction before the <code>ret</code>.)</p>

<p><code>push di</code> / <code>pop bx</code> could be replaced with <code>mov bx, di</code> (before <code>rep movsb</code>), making it simpler but no savings.</p>

<p>Requiring the caller to pass a pointer to the dst buffer in <code>di</code> would save 4 bytes vs. calculating it relative to <code>sp</code>.</p>

<p>Making the function start address the same as the function size would save a byte (<code>mov cx, si</code>).</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/Flakheads/BrainHack" rel="nofollow noreferrer">Brain-Flak</a>, 6 bytes</h1>

<p>Actually I just noticed that since the <a href="https://codegolf.meta.stackexchange.com/a/8507/48198">ToS is a valid return format</a> popping the <em>0</em> is not really needed which saves 2 bytes: </p>

<pre><code>({{}})
</code></pre>

<p><a href="https://tio.run/##SypKzMzLSEzO/v9fo7q6tlbz////xkb/dQ2N/hsZ/jf8bwAA" rel="nofollow noreferrer" title="Brain-Flak (BrainHack) – Try It Online">Try it online!</a></p>

<h2>Original submission(s), 8 bytes</h2>

<p>Uses <code>0</code> as the special value:</p>

<pre><code>({{}}{})
</code></pre>

<p><a href="https://tio.run/##SypKzMzLSEzO/v9fo7q6tra6VvP////GRv91DY3@Gxn@N/xvAAA" rel="nofollow noreferrer" title="Brain-Flak (BrainHack) – Try It Online">Try it online!</a></p>

<h3>Explanation</h3>

<p>Given the arguments <em>a<sub>1</sub></em>, <em>a<sub>2</sub></em>, … , <em>a<sub>n</sub></em>, <em>0</em> the stack initially looks like this:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>a<sub>n</sub></em></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>⋮</em></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>a<sub>2</sub></em></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>a<sub>1</sub></em></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>0</em></p>

<p>The code then goes on, pops every <em>a<sub>i</sub></em>, accumulates them, pops the <em>0</em> adds them and pushes the result:</p>

<pre><code>(      )  -- push the following value:
 {  }     --   while ToS ≠ 0 (sums the runs):
  {}      --     pop 1 element
     {}   --   pop the remaining 0 &amp; add it
</code></pre>

<hr>

<h3>Alternative solutions, 8 bytes</h3>

<p>Instead of popping the <em>0</em> and adding it to the sum, we can also swap stacks since the right one is initially empty:</p>

<pre><code>({{}}&lt;&gt;)
</code></pre>

<p><a href="https://tio.run/##SypKzMzLSEzO/v9fo7q6ttbGTvP////GRv91DY3@Gxn@N/xvAAA" rel="nofollow noreferrer" title="Brain-Flak (BrainHack) – Try It Online">Try it online!</a></p>

<p>Using the <code>-r</code> flag the <em>0</em> is on the top of the stack, so we could pop it first:</p>

<pre><code>({}{{}})
</code></pre>

<p><a href="https://tio.run/##SypKzMzTTctJzP7/X6O6trq6tlbz/39jIwVdQyMFI0MFQwWD/7pFAA" rel="nofollow noreferrer" title="Brain-Flak – Try It Online">Try it online!</a></p>

<pre><code>{}({{}})
</code></pre>

<p><a href="https://tio.run/##SypKzMzTTctJzP7/v7pWo7q6tlbz/39jIwVdQyMFI0MFQwWD/7pFAA" rel="nofollow noreferrer" title="Brain-Flak – Try It Online">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h2>C, <s>232</s> 206 bytes</h2>

<pre><code>#include&lt;string.h&gt;
#include&lt;stdlib.h&gt;
#define f(X)s(""#X)?0:g
#define g(X)u(""#X)?0:h
#define h(X)u(""#X)?0:g
g=0,h=0;s(char*s){g=h=atoi(s);return 0;}u(char*s){char*a=strlen(s)?s:"0";g=h+=atoi(a);return 0;}
</code></pre>

<p>This can probably be golfed significantly, but should serve as a proof of concept that C can be used, without any language extensions*, to solve this problem by calling without arguments rather than with a magic value.</p>

<p>* @hvd has noted that, while this works out of the box using gcc, some of the behavior is not defined in the C standard, meaning that this may not be portable. Use at your own risk!</p>

<p>Ungolfed:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;

#define f(X) start("" #X) ? 0 : f0
#define f0(X) update("" #X) ? 0 : f1
#define f1(X) update("" #X) ? 0 : f0

long f0 = 0;
long f1 = 0;

int start(const char *s) {
    f0 = f1 = strtol(s, NULL, 10);

    return 0;
}

int update(const char *s) {
    const char *a = strlen(s) ? s : "0";
    f0 = f1 += strtol(a, NULL, 10);

    return 0;
}

int main() {
    printf("f(1)()          -&gt; %ld\n", f(1)());
    printf("f(1)(2)(0)(3)() -&gt; %ld\n", f(1)(2)(0)(3)());
    printf("f(1)(-2)(3)()   -&gt; %ld\n", f(1)(-2)(3)());
    printf("f()             -&gt; %ld\n", f());

    return 0;
}
</code></pre>

<p>Compiling and running with <code>gcc arbitrary-length-currying.c -o arbitrary-length-currying &amp;&amp; ./arbitrary-length-currying</code> outputs (after some warnings)</p>

<pre><code>f(1)()          -&gt; 1
f(1)(2)(3)(0)() -&gt; 6
f(1)(-2)(3)()   -&gt; 2
f()             -&gt; 0
</code></pre>
</div>
<div id="pu15" class="pu"><h1>C#, <strike>91</strike> 58 bytes</h1>

<pre><code>dynamic f(int x)=&gt;(Func&lt;int, dynamic&gt;)(y=&gt;y&lt;1?x:f(x + y));
</code></pre>
</div>
<div id="pu16" class="pu"><p><strong>C#, 53 bytes</strong></p>

<pre><code>Func&lt;int,dynamic&gt;f(int i)=&gt;m=&gt;m&lt;0?(dynamic)i:f(m+i);
</code></pre>

<p>Any negative number can act as the stop value</p>

<pre><code>int j = f(5)(3)(4)(-1); // j = 12

int j = f(-1); // Compile Error, must be 2 or more calls
</code></pre>
</div>
<div id="pu17" class="pu"><h1>k, 22 bytes</h1>
<p>Call with a null value to terminate</p>
<pre><code>{$[^y;+/x;.z.s[y,x]@]}
</code></pre>
<p>Example:</p>
<pre><code>k)f:{$[^y;+/x;.z.s[y,x]@]}
k)g:f[3]
k)h:g[4]
k)h[0N] //0N is null integer in k
7
</code></pre>
</div>
<div id="pu18" class="pu"><h2>JavaScript (ES6), 18 bytes</h2>

<pre><code>f=n=&gt;m=&gt;m?f(m+n):n
</code></pre>

<p>Pass a falsy value to retrieve the sum. Zeros could be allowed for a cost of 2 bytes.</p>

<p><a href="https://tio.run/nexus/javascript-babel-node#@59mm2drlwtE9mkaudp5mlZ5/5Pz84rzc1L1cvLTNRTSNAw1NYw0NYw1NXRNNDU0FTT/AwA" rel="noreferrer">Try it online</a></p>

<p><strong>Ungolfed:</strong></p>

<pre><code>f = function(n) {
    return function(m) {
        if (m) {
            return f(m+n);
        } else {
            return n;
        }
    }
}
</code></pre>
</div>
<div id="pu19" class="pu"><h2>Perl 5, 36 bytes</h2>

<pre><code>sub f{my$n=pop;sub{@_?f($n+pop):$n}}
</code></pre>

<hr>

<pre><code>say f(1)-&gt;(); # 1
say f(1)-&gt;(2)-&gt;(3)-&gt;(); # 6
</code></pre>
</div>
<div id="pu20" class="pu"><h2>Clojure, 29 bytes</h2>

<pre><code>(defn f[n]#(if %(f(+ n %))n))
</code></pre>

<p>Example:</p>

<pre><code>(for [f (-&gt;&gt; [3 2 1 4 10] (reductions (fn [f val] (f val)) f) rest)]
  (f nil))
(3 5 6 10 20)
</code></pre>
</div>
<div id="pu21" class="pu"><h1>C, <s>62</s> 58 bytes, borderline competing</h1>

<p>Saved 4 bytes thanks to Kevin! (Still not removing typedef because it's something needed in order to be called.)</p>



<pre class="lang-c prettyprint-override"><code>typedef(*(*B)(_))(_);q;f(x,o,_){x=x?(q+=x,f):(x=q,q=0,x);}
</code></pre>

<p>The function to call is <code>f</code>; you stop calling it and get the result by calling it with a non-positive number like <code>0</code>. <strong><a href="https://tio.run/nexus/c-gcc#lZDRaoNAEEXf/YohpTCr0qgJFNxsJX5HQUp1qdhqtrWwJeTb7YzZBDS@ZFBw5u49c9fhoW7fP3/LCnY/fVl3Tx8v3noN/d@hKiuN/l5gIaRrYY9@Pg6MzH2NTViIowlUs4uzKG1kM35hoUxoVERiirnQ8nQPsWNmp4w0DmsCBpuMUWlHsCvJWZ1doz2brbIZUiobagpgXRgryPr1Vrcojh5QHb7rtte40pjEAumJBCh4LF/bVYi0jN9RY5FVISe@JIYAYhjr4oPzcHZSYxxFArcJkTab58kmPueBK155bRYHl6FGICZQrhuZa5vcjKecBR9H85YdnHhsZhfjCAEt4zuTe/orZiJZT8PwDw" rel="nofollow noreferrer">Try a test harness online!</a></strong></p>

<p>So, as far as I can tell, the only way to "curry" functions that have multiple return types is to do one of the following:</p>

<ol>
<li>Cast the result to a function to tell the compiler you wish to call the result again;</li>
<li>or create a <code>union</code>/<code>struct</code> type that has an <code>int</code> and function/self-referential subtypes.</li>
</ol>

<p>I tried doing (2), but it seemed a bit against the spirit of the question and, quite frankly, nigh undoable. Thus, in keeping with the spirit of the challenge, I have opted for option (1). This requires casting each returned function into a function, that it may be used.</p>

<p>This "currying" syntax looks a bit odd, but is quite similar. To emulate <code>f(21)(1)</code>, one would have to write <code>((B)((B)f(21))(1))(0)</code>. I defined the <code>B</code> type to be a function that takes an integer and returns a pointer to a function that takes an integer. Expanded, this looks like:</p>

<pre class="lang-c prettyprint-override"><code>   ( (B)( (B) f(21) )(1) )(0)
//            f(21)            - call f with 21
//        (B)                  - cast to B, a function pointer
//      (           )(1)       - call with 1
//   (B)                       - cast to a function pointer
// (                     )(0)  - call with 0
</code></pre>
</div>
<div id="pu22" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C++ (gcc)</a>, <s>95</s> 91 bytes</h1>



<pre class="lang-cpp prettyprint-override"><code>struct f{int s;f(int t):s(t){}int operator()(){return s;}f operator()(int t){return s+t;}};
</code></pre>

<p><a href="https://tio.run/nexus/cpp-gcc#dY7BCsIwDIbve4qwISQogqII1nnzCdzRy1hbLGg32gyE0mef6wbqxVPy/18@yODZ9Q2DDsYyeKExTaajR6YQU2g75WpuHRJScIp7Z8fDqH/BLH3okkWMYiiMbR69VHDyLE27vp@zQiptrILqcq1QvTpH0LnR1likBDmUJSzkzeYrmHD2rI1FykIGs6RxMz5C4pt3hFvCw792Py2JxeEN" rel="nofollow noreferrer" title="C++ (gcc) – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu23" class="pu"><h1>C++, 72 bytes</h1>

<pre><code>#define O(P)operator()(P){return{P+a};}int
struct F{F O(int(m))O()a;}f;
</code></pre>

<p>This defines a type <code>F</code> which acts as the requested function, and a variable <code>f</code> of that type to invoke. It's valid as of C++11 and works with online versions of GCC, clang, icc and VC++.</p>

<p>Usage:</p>

<pre><code>int main() {
  return f(1)(2)(3)(); // returns 6
}
</code></pre>

<p>Explanation:</p>

<p>After preprocessing and reformatting, it looks like:</p>

<pre><code>struct F {
  F operator()(int(m)) { return{int(m)+a}; }
  int operator()() { return {+a}; }
  int a;
} f;
</code></pre>

<p>This would normally be written:</p>

<pre><code>struct F {
  F operator()(int m) { return {m+a}; }
  int operator()() { return a; }
  int a;
} f;
</code></pre>

<p><code>return a;</code> and <code>return {+a};</code> do the same thing, as unary <code>+</code> doesn't change the value, and redundant braces around the return value are allowed. <code>int m</code> and <code>int(m)</code> do the same thing, as redundant parentheses around a variable name are allowed, including function parameters. <code>return {m+a};</code> and <code>return {int(m)+a};</code> do the same thing, as a cast of <code>m</code> from <code>int</code> to <code>int</code> does not change its value. These changes get the two <code>operator()</code> overloads closer in syntax, allowing a single macro definition to be invoked twice. Picking the right order for the three members allows the first word of the next line (<code>int</code>) to be included in the macro definition as well.</p>
</div>
<div id="pu24" class="pu"><h1>Lua, 89 bytes</h1>

<pre><code>function f(...)n,p=...p=p or 0 return n and loadstring("return f(...,"..n+p..")")or p end
</code></pre>

<p>Well it's not exactly the shortest I see (Lua never is), but it was an interesting challenge. Had a lot of attempted arithmetic on a function and attempted to call a number along the way before the aha moment.</p>

<p>As a slight bonus though, it does work with non-positive numbers since nil and false are the only false values in Lua. In many golfing challenges, 0 ~= false is a drawback but not here!</p>
</div>
<div id="pu25" class="pu"><h1>Pyth, 19 bytes</h1>
<pre><code>DhdDebR?bh+dbdR$end
</code></pre>
<p><a href="https://tio.run/nexus/pyth#@@@SkeKSmhRkn5ShnZKUEqSSmpfyv6AoM69EIyM1MUXDWFPDVFPDTFPDLz8vVVPzPwA" rel="nofollow noreferrer" title="Pyth – TIO Nexus">Try it online!</a></p>
<p>I'm impressed that Javascript beats Pyth, but then again Pyth is not quite designed to be passing functions.</p>
</div>
<div id="pu26" class="pu"><h1>Scala, 58 chars</h1>

<pre><code>case class f(n:Int){def apply(m:Int)=f(n+m)
def apply()=n}
</code></pre>

<p><a href="https://ideone.com/RgGL2q" rel="nofollow noreferrer">Try it online</a></p>

<h3>Ungolfed:</h3>

<pre><code>case class f(n:Int){
  def apply(m:Int)=f(n+m)
  def apply()=n
}
</code></pre>

<h3>Explanation:</h3>

<p>This code defines a <code>case class</code> called f with a constructor taking an int. Definind a case class which will generate the equals, hashcode, toString and copy methods, and a companion object with the same name to enable object creation without the <code>new</code> keyword.</p>

<p>This class has an overloaded apply method:
One takes another integer to add and creates a new object with the updated sum, and one without arguments to get the sum.</p>

<p>In Scala, any object with an apply method can be called like a method, that is <code>o.apply(x)</code> can be written as <code>o(x)</code>. This is used in the standard libary for arrays, lists, maps and the <code>Function1</code> trait implemented by anonymous functions</p>
</div>
<div id="pu27" class="pu"><h1>C, <s>104</s> 96 bytes</h1>



<pre class="lang-c prettyprint-override"><code>#define a(i)s(i)|b
#define b(i)u(i)|c
#define c(i)u(i)|b
b,c,d;s(i){b=c=i;i=d;}u(i){c=b+=i;i=d;}
</code></pre>

<p>Uses the method from the link that @JulianWolf shared. Last argument must be 0.</p>

<p><a href="https://tio.run/nexus/c-gcc#PYuxCsMwDER3f0VICUjUQ9vQyfhjLCkBDTWlSScn355YBXc4uPeOOy4yzZqnLoHiUrORa4oqfk3xX3FT5Mizl2CXQpGjBo0SdhsLR7o2cbySZsDy/mheZ@gH6QbpvUvwRBgRHgg3NLz/@mjosP5O" rel="nofollow noreferrer" title="C (gcc) – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu28" class="pu"><h2>R, <s>54</s> 52 bytes</h2>

<pre><code>f=function(x){g=function(y='')'if'(y&gt;'',f(x+y),x);g}
</code></pre>

<p><em>Saved 2 bytes thanks to MickyT!</em></p>

<p>Similar to one of the python answers. Ungolfed:</p>

<pre><code>f=function(x){
  g=function(y=''){
    if(y&gt;''){
      f(y+x)
      }
      else{x}
  }
  g
}
</code></pre>

<p>Runs as </p>

<pre><code>&gt; f(1)(2)(4)()
[1] 7
</code></pre>
</div>
<div id="pu29" class="pu"><h1>Octave, 39 bytes</h1>

<pre class="lang-matlab prettyprint-override"><code>function r=f(n)r=@(m)merge(m,f(m+n),n);
</code></pre>
<p>*Argument of the termination call is 0.</p>
<p><a href="https://tio.run/nexus/octave#@59Wmpdckpmfp1Bkm6aRp1lk66CRq5mbWpSeqpGrk6aRq52nqZOnaf0/NS8FppQrTcNIU8NQU8NUU8NAk@s/AA" rel="nofollow noreferrer" title="Octave – TIO Nexus">Try it online!</a></p>
<p>*<code>endfunction</code> required to add some other codes.</p>
</div>
<div id="pu30" class="pu"><h1>Python, 69 bytes</h1>
<pre><code>def f(a=0,s=[]):
    if a:
        return lambda b=0:f(b,s+[a])
    return sum(s)
</code></pre>
</div>
<div id="pu31" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 63 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda n,l=[]:n and(l.append(n)or f)or sum(l)*(l.clear()or 1)
</code></pre>

<p><a href="https://tio.run/nexus/python3#@59mm5OYm5SSqJCnk2MbHWuVp5CYl6KRo5dYUJAKZORp5hcppIGI4tJcjRxNLaBUck5qYpEGSMxQ839BUWZeiUaahqGmhommhqmmhoGmJhdM0BgsCBT5DwA" rel="nofollow noreferrer" title="Python 3 – TIO Nexus">Try it online!</a></p>

<hr>

<p>Terminates with 0</p>
</div>
<div id="pu32" class="pu"><p><strong>PowerShell, 86 bytes</strong></p>

<pre><code>$f={$n=$args[0];$f=(gv f).value;{if($args){&amp;$f($args[0]+$n)}else{$n}}.getnewclosure()}
</code></pre>

<p><a href="https://tio.run/nexus/powershell#@6@SZlutkmerkliUXhxtEGsN5GuklymkaeqVJeaUplpXZ6ZpgCU1q9VUoEygOm2VPM3a1JziVKDm2lq99NSSvNTy5Jz84tKiVA3N2v9qGnCokqZgommkaa5pCiT/f83L101OTM5IBQA" rel="nofollow noreferrer" title="PowerShell – TIO Nexus">Try it online!</a>  </p>

<p><strong>Test code:</strong></p>

<pre><code>&amp;(&amp;(&amp;(&amp;(&amp;(&amp;$f 4)2)7)5)2)
</code></pre>

<p><strong>Output:</strong> 20</p>
</div>
<div id="pu33" class="pu"><h2><a href="https://www.haskell.org/" rel="noreferrer">Haskell</a> (GHC), 118 bytes</h2>

<p>This is 98 bytes for the code and 20 bytes for the GHC compiler flag <code>-XFlexibleInstances</code>, which enables a type system extension.</p>



<pre class="lang-hs prettyprint-override"><code>class F a where f::Int-&gt;a
instance F(()-&gt;Int)where f n()=n
instance F a=&gt;F(Int-&gt;a)where f=(f.).(+)
</code></pre>

<p>This defines a "function" <code>f</code>, which can be called with an arbitrary number of integers followed by the unit <code>()</code>, after which it returns an integer.
Type annotations are required.
<a href="https://tio.run/nexus/haskell#TY3LCsIwFET3fsVAN/ci6UJxE0igC1MK4s4PiCXBQL1IU1AQv72@Irg6w3CGuasKu2bfHpp2CzeEWzoOoZM8eelDRqUecz/4nOHgcT2FMSBq3cmkrF@k4sERsbKvlosCITbyJ8Ab6@i7@0mGYs01LXk@@yQwuIxJJlCk9eeCaVO4KmRojXeanw" rel="noreferrer" title="Haskell – TIO Nexus">Try it online!</a></p>

<h2>Explanation</h2>

<p>Forcing Haskell's strict type system to allow this requires some magic, namely, enabling the GHC extension for flexible typeclass instances.
How this works is that <code>f</code> is a parametrically polymorphic function restricted by a type class constraint: its type is <code>F a =&gt; Int -&gt; a</code>.
This means that <code>f</code> takes an integer and returns a value of type <code>a</code>, for any type <code>a</code> that belongs to the typeclass <code>F</code>.
<code>F</code> is just the name of the typeclass that provides the function <code>f</code>; it's declared on the first line.</p>

<p>The next two lines are two instances of <code>F</code> for different types <code>a</code>.
The second line states that the type of functions from <code>()</code> to integers belongs to <code>F</code> (where <code>()</code> is the unit type whose only member is the value <code>()</code>), and the implementation is <code>f n () = n</code>; the function returns its first argument.
The last line states that if <code>a</code> belongs to <code>F</code>, then so does the type of functions from integers to <code>a</code>: from a function <code>f :: Int -&gt; a</code> we can generate another function <code>f :: Int -&gt; Int -&gt; a</code>.
The implementation is <code>f m n = f (m+n)</code> (the code uses combinators to make it shorter), where the <code>f</code> on the left is the new one, and the <code>f</code> on the right is the old one.
This essentially gives <code>f</code> a new integer argument, which is added to the next one.
Multiple arguments are summed together like this:</p>

<pre class="lang-hs prettyprint-override"><code>  f  a1   a2   a3   a4   a5  ()
= f (a1 + a2)  a3   a4   a5  ()
= f (a1 + a2 + a3)  a4   a5  ()
= f (a1 + a2 + a3 + a4)  a5  ()
= f (a1 + a2 + a3 + a4 + a5) ()
=    a1 + a2 + a3 + a4 + a5
</code></pre>

<p>The <code>f</code> on each line has a different type.</p>

<p>Haskell functions are curried automatically, so if you give <code>f</code> only integers, you get a function.</p>
</div>
<div id="pu34" class="pu"><h1>PHP, 44 Bytes</h1>

<p>An Idea from <a href="https://codegolf.stackexchange.com/users/63956/user63956">@user63956</a></p>

<p>Termination call <code>0</code></p>

<pre><code>function f($i){return[$_GET[0]+=$i][$i]?:f;}
</code></pre>

<p><a href="http://sandbox.onlinephpfunctions.com/code/03419ad8be41d166de374cc7dc144274fd5a1cf0" rel="nofollow noreferrer">Online Version</a></p>

<p>Termination call with <code>NULL</code> need a càst <code>[$i]</code> to <code>[+$i]</code></p>

<h1>PHP, 47 Bytes</h1>

<pre><code>function f($i){global$s;return$i?f.!$s+=$i:$s;}
</code></pre>

<p><a href="http://sandbox.onlinephpfunctions.com/code/1d2b18bcc5c0cd2c670ad83c8fb7185d30244b25" rel="nofollow noreferrer">Online Version</a></p>

<h1>PHP, 52 Bytes</h1>

<p>Termination call <code>NULL</code> or any other value that is false in PHP</p>

<pre><code>function f($i){global$s;$i?$s+=$i:print$s;return f;}
</code></pre>

<p>if the program must terminate after the Output replace <code>print$s</code> with <code>die("$s")</code> + 2 Bytes</p>

<p><a href="http://sandbox.onlinephpfunctions.com/code/6595b125390e7d6dfc8795d6eb8e5141bc131bcc" rel="nofollow noreferrer">Online Version</a></p>
</div>
<div id="pu35" class="pu"><h1>R, 40 bytes</h1>

<pre class="lang-r prettyprint-override"><code>f=function(x)function(y)`if`(y,f(x+y),x)
</code></pre>

<p>0 acts as the stop value here. For two more bytes, we can omit it.</p>

<p>The problem is that R lacks a concise built-in lambda. But <a href="https://github.com/klmr/functional/#a-concise-lambda-syntax" rel="nofollow noreferrer">if we add one</a>, we can get the code to <strong>26 bytes</strong>:</p>

<pre class="lang-r prettyprint-override"><code>f=x-&gt;(y-&gt;`if`(y,f(x+y),x))
</code></pre>

<p>(Yes, that’s valid R. It just needs an import.)</p>
</div>
<div id="pu36" class="pu"><h2>C#, 62 bytes</h2>



<pre class="lang-cs prettyprint-override"><code>dynamic f(int n)=&gt;(System.Func&lt;int,dynamic&gt;)(m=&gt;m&lt;0?n:f(n+m));
</code></pre>

<p>To end the call pass in a negative number e.g.</p>

<pre class="lang-cs prettyprint-override"><code>f(1)(2)(3)(-1) == 6
</code></pre>
</div>
<div id="pu37" class="pu"><h1><a href="http://julialang.org/" rel="nofollow noreferrer">Julia 0.5</a>, 18 bytes</h1>



<pre class="lang-julia prettyprint-override"><code>!n=k-&gt;k&gt;0?!(n+k):n
</code></pre>

<p><a href="https://tio.run/nexus/julia5#@6@YZ5uta5dtZ2CvqJGnna1plfc/N7FAo6AoM68kJ08nmotTQ1FTw1BTw0ATwjTR1DDS1DDHImAKZgCFYzX/AwA" rel="nofollow noreferrer" title="Julia 0.5 – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu38" class="pu"><h2><a href="https://julialang.org/" rel="nofollow noreferrer">Julia</a> v0.5+, 52 bytes</h2>

<pre><code>type F n end
F()=0
(f::F)()=f.n
(f::F)(x)=(f.n+=x;f)
</code></pre>

<p>Call as <code>F</code>. This could probably be made a lot shorter by adopting a less OO method, but I always like getting the chance to use this idiom.</p>

<p>If it can be assumed that "at least one call will be made before the termination call", the second line can be removed to save 6 bytes.</p>
</div>
<div id="pu39" class="pu"><h2><a href="https://www.python.org/]" rel="nofollow noreferrer">Python</a>, 61 bytes</h2>

<pre><code>f=lambda n="":0if n==""else lambda m="":n if m==""else f(n+m)
</code></pre>

<p>Much longer than the other Python version, but uses the no-argument syntax rather than a magic number. Can probably be improved upon.</p>

<p>If it can be assumed that "at least one call will be made before the termination call", this can be reduced to <strong>44 bytes</strong>:</p>

<pre><code>f=lambda n:lambda m="":n if m==""else f(n+m)
</code></pre>
</div>
<div id="pu40" class="pu"><h1><a href="https://github.com/dyvil/dyvil" rel="nofollow noreferrer">Dyvil</a>, 34 bytes</h1>

<pre><code>infix int apply(i:int,j:int=0)=i+j
</code></pre>

<p><strong>Usage</strong>:</p>

<pre><code>0() // = 0
0(1)() // = 1
0(1)(2)() // = 3
</code></pre>

<p>The trailing <code>()</code> can be omitted.</p>

<p><strong>Explanation</strong>:</p>

<p>Defines a juxtaposition operator that takes two ints and adds them. The parameter <code>j</code> has the default value <code>0</code> to support the call without arguments. The <code>0</code> in the examples above is not the name, but a literal.</p>
</div>
<div id="pu41" class="pu"><h2>Mathematica, 25 bytes</h2>

<pre><code>f[x_]@y_=f[x+y]
f[x_][]=x
</code></pre>

<p><a href="https://tio.run/nexus/mathics#@58WXREf61AZbwtkaFfGcoH50bG2Ff8DijLzShQcFNKijWOjTWKjDYEIyIr9DwA" rel="noreferrer" title="Mathics – TIO Nexus">Try it online!</a> (Using Mathics.)</p>

<p>It's possible to do three bytes less by porting the JavaScript answer, but I wanted to present a more idiomatic Mathematica solution. The <code>@</code> is just a bit of syntactic sugar, which makes the solution equivalent to:</p>

<pre><code>f[x_][y_]=f[x+y]
f[x_][]=x
</code></pre>

<p>So yeah the idea is that in Mathematica you can't just define a function <code>f[x_]</code> but you can directly attach a value to a more complicated expression containing <code>f</code>, e.g. <code>f[x_]</code> being passed another argument. By setting up two definitions for this, we can get the desired behaviour:</p>

<ul>
<li>The first definition collapses one <code>f[x][y]</code> call into <code>f[x+y]</code>, thereby consuming one "call" and adding up the arguments inside. This rule applies until we're left with <code>f[sum][]</code>.</li>
<li>The second definition unpacks this final case by defining the entire thing to evaluate to <code>sum</code>.</li>
</ul>
</div>
<div id="pu42" class="pu"><h1><a href="http://perl6.org/" rel="nofollow noreferrer">Perl 6</a>, 31 bytes</h1>

<pre><code>sub f(\n){-&gt;$m?{$m??f n+$m!!n}}
</code></pre>
</div>
<div id="pu43" class="pu"><h1>Ruby, 23 bytes</h1>



<pre class="lang-rb prettyprint-override"><code>f=-&gt;n{-&gt;m{m ?f[n+m]:n}}
</code></pre>

<p>Usage:</p>

<pre class="lang-rb prettyprint-override"><code>f[1][2][3][nil]
=&gt; 6
</code></pre>
</div>
<div id="pu44" class="pu"><h1>Python 2, <s>42</s> <s>41</s> 36 bytes</h1>
<p>This solution will never have an overflow, since Python supports arbitrary-precision integers. Zero is the &quot;special value&quot;.</p>

<pre class="lang-python prettyprint-override"><code>f=lambda n:lambda m:m and f(m+n)or n
</code></pre>
<p><a href="https://tio.run/nexus/python2#@59mm5OYm5SSqJBnBWXkWuUqJOalKKRp5GrnaeYXKeT9LyjKzCsBChhqahgZaWrommpqGBoAsYmmhoHmfwA" rel="noreferrer"><strong>Try it online</strong></a></p>
<p><strong>Ungolfed:</strong></p>
<pre class="lang-python prettyprint-override"><code>def f(n):
    def g(m=''):
        return f(m+n)if m&lt;''else n
    return g
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/117017/">117017</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




