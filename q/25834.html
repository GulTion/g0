<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::25834</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>479</td><td>Python3</td><td>240624T194509Z</td><td><a href="https://codegolf.stackexchange.com/questions/25834/gravity-controls/273777#273777">Ajax1234</a></td></tr>
<tr d-ix="1"><td>148</td><td>Perl</td><td>140418T142338Z</td><td><a href="https://codegolf.stackexchange.com/questions/25834/gravity-controls/26017#26017">user2846</a></td></tr>
<tr d-ix="2"><td>206</td><td>Mathematica</td><td>140414T213255Z</td><td><a href="https://codegolf.stackexchange.com/questions/25834/gravity-controls/25849#25849">Martin E</a></td></tr>
<tr d-ix="3"><td>270</td><td>perl</td><td>140414T180310Z</td><td><a href="https://codegolf.stackexchange.com/questions/25834/gravity-controls/25841#25841">skibrian</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 479 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def f(b):
 d,p={},[]
 for x,r in E(b):
  for y,v in E(r):d[v]=d.get(v,[])+[(x,y)]
 X,Y=d['O'][0]
 for x,y in d['#']:
  J,K=abs(j:=x-X),abs(k:=y-Y)
  if j and k:
   if J==K:
    if x&lt;X:p+=[[(X,y),(x,Y)][y&lt;Y]]
    else:p+=[[(x,Y),(X,y)][y&lt;Y]]
   else:p+=[[(X,y),(x,Y)][J&gt;K]]
  else:p+=[(x,y)]
 a,b,c,d=' ',' ',' ',' '
 for x,y in p:
  if y==Y and x&lt;X:a='#'
  if y==Y and x&gt;X:b='#'
  if x==X and y&lt;Y:c='#'
  if x==X and y&gt;Y:d='#'
 return f' {a} \n'+f'{c}O{d}\n'+f' {b} '
</code></pre>
<p><a href="https://tio.run/##jVLLbqMwFF0PX3EVFrYbB6VNK1Wozq6bRBq2IBeNIDYztBlAQCMQ4tsztgmEqboIkoXP6/r6UbT1nzzbPBfl@fzKZPb5V5ZRLS0hE0hwTFwLBC1Y11MeWpDkJTS0hDSD10E0VEtPA1USV/BTyITzW9b4pDJkyXFDW6LCPg2Y4MhDIV9PtVodVKyNQl1tR/csiiv87rJm5ROq5x8ua1cBUWqawDtEmYAP7dVwx9jezDVoXny3WDLOsa9WpGrdgIS8fQnC0FjksZIXg5aosc0MM31eYLfdG32Sxw1FNKYHKhgCRGfjv60V7tB3y1hgWtdNRkzt9yu/9d34yjeM@YZX3bmH7/ht4IqBL2X9WWaQIOiiHt4ytExQd@i9TvQDgC7uAZ2rNTBYLBaW4zi2GvqvP0sBT1ET/qqPf52t7qciJmB5o/AwCvZQcsgBWM5k2VyzRrdn5RXyRmRPpIk9zvq2Bq93cRqDfqx1/ivOo1LgSj3LH5cj4fwuDc11pPoykvRYyxL/zDNJoXKq4pjWGKkzIuo6raJMsxon@FppTQi50GiF7p7W5BvT/S2mh1tMm1tMj8p0/gc" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h2>Perl, <s>156 153</s> 148</h2>

<pre class="lang-perl prettyprint-override"><code>$n=$_+1;
s/.+\n//;
$o=index$_,O;
$x=$o%$n-$-[0]%$n,
pos=$o+(($==($o-$-[0])/$n)&amp;&amp;$x/$=&gt;-1&amp;&amp;$x/$=&lt;=1?$=&gt;0?-$n:$n:0&lt;=&gt;$x),
s/\G./x/ while s/#/./;
y/x/#/
</code></pre>

<p>Newlines for readability. Run with <code>-0777p</code> (5 added to count), input through STDIN.</p>

<p>More readable:</p>

<pre class="lang-perl prettyprint-override"><code>$n=$_+1;
s/.+\n//;
$o=index$_,O;
while(s/#/./){
    $x=$o%$n-$-[0]%$n;
    $==($o-$-[0])/$n;
    pos=$o+(
        $=
        &amp;&amp;$x/$=&gt;-1
        &amp;&amp;$x/$=&lt;=1
            ?$=&gt;0
                ?-$n
                :$n
            :0&lt;=&gt;$x

    );
    s/\G./x/
}
y/x/#/
</code></pre>
</div>
<div id="pu2" class="pu"><h2>Mathematica, 206 bytes</h2>

<pre><code>f=(m=Characters@StringSplit@#;o=#-Join@@m~(p=Position)~"O"&amp;/@m~p~"#";h=If[MemberQ[#3/@o,{m_,n_}/;m#&lt;0&amp;&amp;m#&lt;=n#2&lt;-m#],"#",e]&amp;;{e=".",h[1,1,#&amp;],e,n="\n",h[1,-1,r=Reverse],"O",h[-1,1,r],n,e,h[-1,-1,#&amp;],e}&lt;&gt;"")&amp;
</code></pre>

<p>Somewhat more readable:</p>

<pre><code>f[input_] := (
  map = Characters @ StringSplit @ input;
  planet = Flatten[Position[map, "O"]];
  objects = Map[# - planet &amp;, Position[map, "#"]];
  helper[pattern_] := If[
    Length[Position[objects, pattern]] &gt; 0, 
    "#", 
    "."
  ];
  StringJoin[{
    ".", h[{m_, n_} /; m &lt; 0 &amp;&amp; m &lt;= n &lt; -m], ".", "\n",
    h[{m_, n_} /; n &lt; 0 &amp;&amp; n &lt; m &lt;= -n], "O", h[{m_, n_} /; n &gt; 0 &amp;&amp; -n &lt;= m &lt; n], "\n",
    ".", h[{m_, n_} /; m &gt; 0 &amp;&amp; -m &lt; n &lt;= m], "."
  }]
);
</code></pre>

<p>As you can see, I only take a single input which is the string containing the input map. This is because I wouldn't use the size integer anyway. If you insist on the input format, I can change the input string to the second argument for one more character.</p>

<p>As for the algorithm, I'm just collecting all the <code>{Δx, Δy}</code> pairs of the objects and look for one pair in each quadrant with the conditions passed to <code>h</code>. I suspect this is also the part that could be golfed down further.</p>
</div>
<div id="pu3" class="pu"><h1>perl, 270 chars</h1>

<p>3 steps: 1) find the planet and satellites in the input, 2) determine quadrant for each satellite, 3) output</p>

<pre><code>sub _{"#"}$D=&lt;&gt;;$\=$/;for$L(1..$D){for$M(1..$D){$/=\1;$_=&lt;&gt;;$p=$M,$q=$L if/O/;push@s,[$M,$L] if/#/}$/=$\;&lt;&gt;}for(@s){$x=$_-&gt;[0]-$p,$y=$_-&gt;[1]-$q;($x&lt;0&amp;&amp;$x&lt;$y&amp;&amp;$y&lt;=-$x?$l:$x&gt;0&amp;&amp;-$x&lt;=$y&amp;&amp;$y&lt;$x?$r:$y&lt;0&amp;&amp;$y&lt;=$x&amp;&amp;$x&lt;-$y?$u:$d)=_}$_=$l?" #":_;$u&amp;&amp;print;print $l."O$r";$d&amp;&amp;print
</code></pre>

<p>Less golfed:</p>

<pre><code>sub _{"#"}
$D=&lt;&gt;;
$\=$/;
for$L(1..$D){
  $/=\1;
  for$M(1..$D){
    $_=&lt;&gt;;
    $p=$M,$q=$L if/O/;
    push@s,[$M,$L] if/#/;
  }
  $/=$\;
  &lt;&gt;
}

for(@s){
  $x=$_-&gt;[0]-$p,$y=$_-&gt;[1]-$q;  

  ($x&lt;0&amp;&amp;$x&lt;$y&amp;&amp;$y&lt;=-$x ? $l :
   $x&gt;0&amp;&amp;-$x&lt;=$y&amp;&amp;$y&lt;$x ? $r :
   $y&lt;0&amp;&amp;$y&lt;=$x&amp;&amp;$x&lt;-$y ? $u : $d)=_;
}

$_=$l?" #":_;
$u &amp;&amp; print;
print$l."O$r";
$d &amp;&amp; print;
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/25834/">25834</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




