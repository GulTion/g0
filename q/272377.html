<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::272377</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>095</td><td>K ngn/k</td><td>240407T082542Z</td><td><a href="https://codegolf.stackexchange.com/questions/272377/draw-a-fibonacci-swoosh/272390#272390">akamayu</a></td></tr>
<tr d-ix="1"><td>233</td><td>JavaScript ES6</td><td>240406T114525Z</td><td><a href="https://codegolf.stackexchange.com/questions/272377/draw-a-fibonacci-swoosh/272380#272380">Neil</a></td></tr>
<tr d-ix="2"><td>499</td><td>Google Sheets</td><td>240406T165114Z</td><td><a href="https://codegolf.stackexchange.com/questions/272377/draw-a-fibonacci-swoosh/272386#272386">z..</a></td></tr>
<tr d-ix="3"><td>257</td><td>C GCC</td><td>240406T122330Z</td><td><a href="https://codegolf.stackexchange.com/questions/272377/draw-a-fibonacci-swoosh/272381#272381">matteo_c</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://codeberg.org/ngn/k" rel="nofollow noreferrer">K (ngn/k)</a> <strike>106</strike> 95 bytes</h1>
<pre><code>{?|/''i=\:_0.5+w%4%1-{:[x&lt;2;k;o[x-1+b;y+y-b]%2-4*b:_y+y],k:`sin@3.14*y}[x]'(i:!1+w)%w:2/1,&amp;3+x}
</code></pre>
<p>It takes one argument, the order of the swoosh, and outputs the bitmap.</p>
<h2>How it works?</h2>
<p>The function</p>
<pre><code>{:[x&lt;2;k;o[x-1+b;y+y-b]%2-4*b:_y+y],k:`sin@3.14*y}
</code></pre>
<p>takes two arguments, the order and normalized x coordinate, then it outputs a list of y coordinates the swoosh of that order passes through at the given x coordinate. It calculates the coordinates recursively.</p>
<p>The rest of the code transforms coordinates into bitmap.</p>
<p><a href="https://ngn.codeberg.page/k#eJw1x8EOgiAYAOC7T1E2wkS0H7DDT63eg5iOgxtzy0MHYOa71yFu3zfhev90lPrbE4dz27NAFAG+oolXoWe9mMiBOZ1Y4s4SwVXtcPjNNjOOb/96yBZUnTYTLa087oGFEwkoOmiOksWtKMrdoZwM2D9EhsxQGX3GxX4BZuMm5Q==" rel="nofollow noreferrer">Try it here</a></p>
<p>Here are the bitmaps for k from 1 to 7 (converted to png).</p>
<p><a href="https://i.stack.imgur.com/KkDdQ.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/KkDdQ.png" alt="k=1" /></a></p>
<p><a href="https://i.stack.imgur.com/nbG8i.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/nbG8i.png" alt="k=2" /></a></p>
<p><a href="https://i.stack.imgur.com/02jMd.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/02jMd.png" alt="k=3" /></a></p>
<p><a href="https://i.stack.imgur.com/n7Gd3.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/n7Gd3.png" alt="k=4" /></a></p>
<p><a href="https://i.stack.imgur.com/V5zne.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/V5zne.png" alt="k=5" /></a></p>
<p><a href="https://i.stack.imgur.com/ePtAh.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/ePtAh.png" alt="k=6" /></a></p>
<p><a href="https://i.stack.imgur.com/lM0pE.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/lM0pE.png" alt="k=7" /></a></p>
</div>
<div id="pu1" class="pu"><h1>JavaScript (ES6), <s>287</s> <s>286</s> <s>246</s> <s>235</s> 233 bytes</h1>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=
n=&gt;`&lt;svg viewBox=-1,-${[g(n)*6+1,i*24+2,i*6+g(n-2)*6+2]}&gt;&lt;path fill=none stroke=#000 d=M0,0${h(n,-3)}&gt;`
g=n=&gt;i=n&lt;3||g(n-1)+g(n-2)
h=(n,s)=&gt;'c'+[4,s,8,t=s*2,12,t,4,0,8,-s,12,-t].map(m=&gt;m*g(n))+(n&gt;2?'m'+[-i*24,0]+h(--n,s)+h(--n,-s):'')</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input type=number oninput=o.innerHTML=f(+this.value) min=1 max=20&gt;&lt;div id=o&gt;</code></pre>
</div>
</div>
</p>
<p>Outputs an HTML5 compatible SVG image. Doesn't adjust the stroke-width for large <code>n</code> so the swoosh tends to fade out. <code>n</code> limited to 20 because it's too slow otherwise. Edit: Saved 1 byte thanks to @noodleman. Saved a few bytes thanks to @Ausername. Version with stroke-width adjustment:</p>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=
n=&gt;`&lt;svg viewBox=-1,-${[g(n)*24+1,i*96+2,i*24+g(n-2)*24+2]}&gt;&lt;path fill=none stroke=#000 stroke-width=${g(n-2)} d=M0,0${h(n,-3)}&gt;`
g=n=&gt;i=n&lt;3?1:g(n-1)+g(n-2)
h=(n,s)=&gt;'c'+[4,s,8,t=s*2,12,t,4,0,8,-s,12,-t].map(m=&gt;m*4*g(n))+(n&gt;2?'m'+[-i*96,0]+h(--n,s)+h(--n,-s):'')</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input type=number oninput=o.innerHTML=f(+this.value) min=1 max=20&gt;&lt;div id=o&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu2" class="pu"><h1>Google Sheets, 499 bytes</h1>
<pre class="lang-cpp prettyprint-override"><code>=SORT(SPARKLINE(LET(F,LAMBDA(F,n,IF(n&lt;3,1,F(F,n-1)+F(F,n-2))),D,LAMBDA(l,o,a,LET(s,SEQUENCE(30*l+1,1,),{s+o*30,SIN(PI()*s/(30*l))*a*l})),W,LAMBDA(W,k,o,a,IF(k&lt;3,D(1,o,a),{W(W,k-1,o,a);W(W,k-2,o+F(F,k-1),-a);D(F(F,k),o,a)})),z,W(W,A1,,1),y,INDEX(z,,1),x,TOCOL(SCAN(,ABS({0;y}-y)&gt;1,LAMBDA(a,c,a+c)),2),IF(A1&gt;2,REDUCE(FILTER(z,x=0),SEQUENCE(COUNTUNIQUE(x)-1),LAMBDA(a,i,LET(k,{a;SORT(a,SEQUENCE(ROWS(a)),)},{QUERY(k,&quot;limit &quot;&amp;XMATCH(VLOOKUP(i,{x,z},2,),INDEX(k,,1),,-1));FILTER(z,x=i)}))),W(W,A1,,1)))))
</code></pre>
<p><a href="https://i.stack.imgur.com/RdHUJ.gif" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/RdHUJ.gif" alt="enter image description here" /></a></p>
<p>As pointed out by <a href="https://codegolf.stackexchange.com/users/119296/doubleunary">@doubleunary</a> in the comments, it turns out that wasn't a bug but just how the function is designed. When drawing across the given coordinates, it never &quot;lifts the pen&quot; so if it draws <span class="math-container">\$x1 \rightarrow x2 \rightarrow x3\$</span> and it has to go back to <span class="math-container">\$x1\$</span>, it draws a line from <span class="math-container">\$x3 \rightarrow x1\$</span> ruining the figure. I addressed this issue by filling the gaps with the intermediate coordinates so <span class="math-container">\$x1 \rightarrow x2 \rightarrow x3 \rightarrow x1\$</span> becomes <span class="math-container">\$x1 \rightarrow x2 \rightarrow x3 \rightarrow x2 \rightarrow x1\$</span>  but this doubled the size of the formula and it no longer works beyond order=7, unlike the previous formula that worked up to order=18.</p>
<h1>Google Sheets, <del>250</del> 237 bytes</h1>
<p><sup><em>-13 bytes thanks to <a href="https://codegolf.stackexchange.com/users/119296/doubleunary">@doubleunary</a></em></sup></p>
<pre class="lang-cpp prettyprint-override"><code>=SORT(SPARKLINE(LET(F,LAMBDA(F,n,IF(n&lt;3,1,F(F,n-1)+F(F,n-2))),D,LAMBDA(l,o,a,LET(s,SEQUENCE(30*l+1,1,),{s+o*30,SIN(PI()*s/(30*l))*a*l})),W,LAMBDA(W,k,o,a,IF(k&lt;3,D(1,o,a),{W(W,k-1,o,a);W(W,k-2,o+F(F,k-1),-a);D(F(F,k),o,a)})),W(W,A1,,1))))
</code></pre>
<p>It's just an implementation of the code OP provided.</p>
<p><a href="https://i.stack.imgur.com/ddxzn.gif" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/ddxzn.gif" alt="enter image description here" /></a></p>
<p><del><em>The straight line connecting the start and end of the wave seems to be a bug with the <a href="https://support.google.com/docs/answer/3093289?hl=en" rel="nofollow noreferrer"><code>SPARKLINE</code></a> function.</em></del></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://gcc.gnu.org" rel="nofollow noreferrer">C (GCC)</a>, <s>259</s> 257 bytes</h1>
<pre class="lang-c prettyprint-override"><code>w;a;char*m;z(k,s,f,x){k=k&gt;2?z(k-2,z(k-1,s,f),-f):s+100;float W=k-s,q=asin(.75);for(x=0;x&lt;W;++x)if(m)m[(int)(w/2-f*W*(sin(x/W*(3.14-2*q)+q)-.75)+.5)*w+s+x+a]=1;return k;}main(n){w=z(n,0);a=sprintf(m=calloc(w,w+1),&quot;P5 %d %d 1 &quot;,w,w);z(n,0,1);write(1,m,w*w);}
</code></pre>
<p>Input is given as <code>argc</code>, outputs a <a href="https://netpbm.sourceforge.net/doc/pgm.html" rel="nofollow noreferrer">PGM</a> image.</p>
<p>Function <code>z</code> draws a <em>swoosh</em> of order <code>k</code>, starting at the x coordinate <code>s</code>, and returns the x coordinate at which it ends; <code>f</code> can be either <code>-1</code> or <code>1</code>, and it determines if the <em>swoosh</em> is flipped or not (respectively).
If the output buffer is <code>NULL</code>, it performs a dry run.</p>
<p>How it works:</p>
<ul>
<li>first, do a dry run of <code>z</code> to compute the width of the final image; for simplicity, the height is set equal to the width;</li>
<li>allocate a buffer of proper size, and write the PGM header;</li>
<li>then re-run <code>z</code>;</li>
<li>output the buffer.</li>
</ul>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/272377/">272377</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




