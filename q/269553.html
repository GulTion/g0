<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269553</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>079</td><td>Charcoal</td><td>240128T095727Z</td><td><a href="https://codegolf.stackexchange.com/questions/269553/relaxing-romans/269589#269589">Neil</a></td></tr>
<tr d-ix="1"><td>056</td><td>Jelly</td><td>240127T144709Z</td><td><a href="https://codegolf.stackexchange.com/questions/269553/relaxing-romans/269579#269579">Nick Ken</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 79 bytes</h1>
<pre><code>ＮθＮηＦ⁷«≦⁻⁶ι≔⊗÷⊖ι²ζＦ⮌⊞ＯＥ⊕⌊⟦ζη⟧⟦⁻ζκι⟧⟦ι⟧«≔↨Ｅκ×Ｘχ÷λ²⊕×⁴﹪λ²±¹εＷ¬‹θε«Ｆκ§IVXLCDMμ≧⁻εθ
</code></pre>
<p><a href="https://tio.run/##TVBNa8JAED2bX7F4moUtVJEW6ck2l0BiRUopiIdoRrOY7Mb90GLxt6ez0VZhGfbNx3tvZl3mZq3zqm0T1Xg39fUKDez5S3SPS8IbbRg8c/YT9bK8mVgrtyrFjYNMKm8FexJMUlvvUoFY@1WFBSTKxfIgC4QY1wZrVI6ykgs25BROYaSjnuMBjUWYeVu@N2hypw2QEjHc5khL1r6GxUmwchkIFp08EN4RksuQosg7o39mXnMiDlw7wT5kjRZm@kh7DR4Fuxmsrp7uBS/dI8EyXfhKX3tC1xS3uUMYhD@GLXrHUlbIYKodpGgt7EPhauSy446zmZHKwcQlqsBv6CefX@lbnPUFq3lHcjvuXG7L/@uiYPuufo7ondt2NB5Hw/bhUP0C" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Greedy algorithm.</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input the number and the relaxation.</p>
<pre><code>Ｆ⁷«≦⁻⁶ι
</code></pre>
<p>Iterate over the indices of Roman numerals in the string <code>IVXLCDM</code> in reverse order.</p>
<pre><code>≔⊗÷⊖ι²ζ
</code></pre>
<p>Calculate the index of the Roman numeral that precedes it at a relaxation of <code>0</code>.</p>
<pre><code>Ｆ⮌⊞ＯＥ⊕⌊⟦ζη⟧⟦⁻ζκι⟧⟦ι⟧«
</code></pre>
<p>Create pairs of indices for up to the given relaxation level, plus also consider the Roman numeral index on its own, and loop over these lists in reverse order, so that the highest value is considered first.</p>
<pre><code>≔↨Ｅκ×Ｘχ÷λ²⊕×⁴﹪λ²±¹ε
</code></pre>
<p>Calculate the decimal value of the list, which is obtained by converting each element of the list to decimal and then taking the list as base <code>-1</code>. (The newer version of Charcoal on ATO can vectorise this calculation for a saving of <code>2</code> bytes.)</p>
<pre><code>Ｗ¬‹θε«
</code></pre>
<p>While the current value does not exceed the input, ...</p>
<pre><code>Ｆκ§IVXLCDMμ
</code></pre>
<p>... convert the list to a string and output it, and...</p>
<pre><code>≧⁻εθ
</code></pre>
<p>... subtract the value from the input.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 56 bytes</h1>
<pre><code>IḢ_ḂṪµƝ&gt;⁴;Ṫ&gt;ḢƊ3ƤṆ5,2ṁṖPƲ€N&lt;ƝT$¦SƊ}Ẹ?
1ḃ7Ç⁼ɗ1#ḃ7ị“IVXLCDM
</code></pre>
<ul>
<li><a href="https://tio.run/##AXEAjv9qZWxsef//SeG4ol/huILhuarCtcadPuKBtDvhuao@4biixoozxqThuYY1LDLhuYHhuZZQxrLigqxOPMadVCTCplPGin3hurg/CjHhuIM3w4figbzJlzEj4biDN@G7i@KAnElWWExDRE3///80OTn/MQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></li>
</ul>
<ul>
<li><a href="https://tio.run/##y0rNyan8/9/z4Y5F8Q93ND3cuerQ1mNz7Q6tswYy7YCix7qMjy15uLPNVMfo4c7GhzunBRzb9KhpjZ/NsbkhKoeWBR/rqn24a4c9l@HDHc3mh9sfNe45Od1QGcR5uLv7UcMcz7AIH2cX3/@PGuZyPdw5@9BKIPGoccfhdiBvnzVQgYKunQJQ0vrwcn2uh7u3HJ38cOdihDDQBUcnhR3rAlr5qGGGwaFlQAbQlqY1kf//G@ooGICUeXIBWSYQlomlJYztwmVoCeIZgXi@Eb6eEVABY7BAmK9nGFQArN7X05fLxEJHwRDECfPx9PTksrQ0hmoH6gbygarNkLRzGSPp9gXqBwA" rel="nofollow noreferrer">Test suite</a></li>
</ul>
<p>A full program taking the Arabic number as the first argument and the 1-indexed relaxation level as the second argument. Prints the Roman numeral to STDOUT.</p>
<p>Full explanation to follow, but overall strategy is:</p>
<ol>
<li>Starting at 1, find the first integer that satisfies the following:
<ol>
<li>Convert to bijective base 7</li>
<li>Check if either of the following are true:
<ul>
<li>A smaller integer precedes a larger one, and the gap is too big per the relaxation rules; this is determined by taking the difference between consecutive digits, subtracting one if the second digit was odd, and then comparing to the relaxation level</li>
<li>We have a pattern <code>a, b, c</code> where <code>a &lt; c</code>; examples would be <code>1, 1, 7</code> or <code>1, 3, 5</code>.</li>
</ul>
</li>
<li>If neither of those were true, index the digit list into <code>1,5,10,50,100,500,1000</code>, negate smaller digits that precede larger ones, and sum.</li>
<li>Compare to the desired Arabic number</li>
</ol>
</li>
<li>If different, proceed to the next integer and run through the steps above</li>
<li>If we’ve reached our target, bijective convert to base 7 and index into <code>&quot;IVXLCDM&quot;</code></li>
</ol>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269553/">269553</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




