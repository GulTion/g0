<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::16043</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>177</td><td>Julia</td><td>231012T114836Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/265939#265939">MarcMush</a></td></tr>
<tr d-ix="1"><td>099</td><td>Python 3.8 prerelease</td><td>210915T112028Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/235337#235337">Jakque</a></td></tr>
<tr d-ix="2"><td>817</td><td>JavaScript V8</td><td>210915T071730Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/235330#235330">EnderSha</a></td></tr>
<tr d-ix="3"><td>019</td><td>><></td><td>180917T100534Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/172310#172310">Discordi</a></td></tr>
<tr d-ix="4"><td>011</td><td>Gol><></td><td>190214T144750Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/179926#179926">KrystosT</a></td></tr>
<tr d-ix="5"><td>027</td><td>Help</td><td>170104T193738Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/105667#105667">user6391</a></td></tr>
<tr d-ix="6"><td>145</td><td>Ruby</td><td>131219T133938Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/16065#16065">SztupY</a></td></tr>
<tr d-ix="7"><td>1955</td><td>Perl and C</td><td>131219T020028Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/16048#16048">hildred</a></td></tr>
<tr d-ix="8"><td>046</td><td>GolfScript</td><td>131219T033520Z</td><td><a href="https://codegolf.stackexchange.com/questions/16043/mirror-quine-or-my-head-hurts/16053#16053">Ilmari K</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://julialang.org" rel="nofollow noreferrer">Julia</a>, <sup><s>194</s></sup> 177 bytes</h1>
<pre><code>~=reverse;(s= #lave&gt;|esrap.ateM&gt;|))
&quot;print(~\&quot;~=reverse;(s= #lave&gt;|esrap.ateM&gt;|))\\n\$(~repr(~s))\\n)|&gt;Meta.parse|&gt;eval#(esrever=s(;* =~\&quot;)&quot;
)|&gt;Meta.parse|&gt;eval#(esrever=s(;* =~
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jZFBCoMwEEX3OYWoi4lQ1wWJN-gNssliCpYQwiS6CrlIN248QA_RQ_Q2NVbpRtDdDPz_eX_mOT163alxnHp_v1w_rygIBySHDTiRFVoN2AZ0pGytPN7awDnLLXXGQ5T5CbWURpYQCS1BdMvOQ3tDr2qrZmdocVC6gNmVooSDpsrEnM1zdka4gr8XJm2As_8URVYlshUS9gBZzlOPY6GRknMXgSxSBFku-w5glsg2yHQj8KYjO7c5Vv_KbN_4Ag" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>port of <a href="https://codegolf.stackexchange.com/a/235337/98541">Jakque's answer</a>, Julia is not very good at quines</p>
<p><strong>previous answer, 194 bytes:</strong> <a href="https://ato.pxeger.com/run?1=ZU9BasMwELz7FYtSyG5wCrkVgfSDHnQuPQhnC66FKymOezHkIbn4klN_0V_kN5HlpknpaYfZmWHmeHrfu9qOX9XHllW0n0KI0757Wz-dvzEoiT7WbYeRvbMVIzagQOTHAwYiGjT31i0EwaABV1TCMixBaZAmQTPDkOjIPccdY0M318LZnvUwMQ3yLkugJCNBq5xThhmmnJJWCHoAEjeXSSWkMihSqQaRK-s8R-zaOvr8-FlySKNeNpLb7XrzWhR5kmvxWmmaTlRMlfCZO_vo7R19Vd-jX5g1_5x_g6mYa4zjfC8" rel="nofollow noreferrer"><code>(q=:(print(replace((k = &quot;(q=:($(q)))|&gt;eval#&quot;) |&gt; (*), 'q' =&gt; :Q, 'Q' =&gt; :q), reverse(k))))|&gt;eval##lave&gt;|))))k(esrever ,)Q: &gt;= 'q' ,q: &gt;= 'Q' ,)*( &gt;| )&quot;#lave&gt;|)))Q($(:=Q(&quot; = k((ecalper(tnirp(:=Q(</code></a></p>
<p>based on <a href="https://codegolf.stackexchange.com/a/92455">this quine</a>, by appending the reversed program in a comment, and switching between lowercase and uppercase <code>Q</code> so it's not a palindrome</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 99 bytes</h1>
<h2>forward :</h2>

<pre class="lang-python prettyprint-override"><code>a=1;exec(s:=#)]a::[
&quot;print(('a=1;exec(s:=#)]a::[\\n%r\\n)#=:s(cexe;1-=a'%s)[::-a])&quot;
)#=:s(cexe;1-=a
</code></pre>
<p><a href="https://tio.run/##bY2xCsMgFEV3P@OFEF@JUNulvOCXGAexQrsY0Qwppd9utB0KpctdzuWc@FhvSzhfYipuuXqVAKBYJSe/ecczqQ6NJdIMYrqHlfPhD5zn0Kc62CnK3FU6SaHs0GfURMIaBPbDSu1oSUIaxt62Vh@fL2SfDgg4nI74ZU0kTXuUHQ" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<h2>backward:</h2>

<pre class="lang-python prettyprint-override"><code>a=-1;exec(s:=#)
&quot;)]a-::[)s%'a=-1;exec(s:=#)n\\r%n\\[::a])#=:s(cexe;1=a'((tnirp&quot;
[::a])#=:s(cexe;1=a
</code></pre>
<p><a href="https://tio.run/##bY2xCsMgFEV3P@OFEF@JUNulvOCXGAexQrMYUYeU0m83pkuhdLnLuZwTn@WxhustpurWu1cJAKpVQk5@845nUh0yQGMFkcbcDz8szHPq22gia7BTlLlrdJLKDpyXsKQI7A@sraMlCWkY@9iO@vh6I4tpCYWDgNPljF/WHO18POoO" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<h2>How it works:</h2>
<p>I based my solution on the quine <code>exec(s:=&quot;print('exec(s:=%r)'%s)&quot;)</code></p>
<ul>
<li>In the forward solution, <code>a=1</code> transforms the slices to have something like :</li>
</ul>

<pre class="lang-python prettyprint-override"><code>exec(s:=&quot;print('&lt;string for the quine&gt;'[::-1])&quot;)
</code></pre>
<p>which prints the backward quine</p>
<ul>
<li>in the backward solution, <code>a=-1</code> transforms the slice to have something like :</li>
</ul>

<pre class="lang-python prettyprint-override"><code>exec(s:=&quot;)]1::['&lt;string for the quine in backward&gt;'(tnirp&quot;[::-1])
</code></pre>
<p>which (due to the <code>[::-1]</code>) gives:</p>

<pre class="lang-python prettyprint-override"><code>exec(s:=&quot;print('&lt;string for the quine&gt;'[::1])&quot;)
</code></pre>
<p>and prints the original quine</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://v8.dev/" rel="nofollow noreferrer">JavaScript (V8)</a>, 817 bytes</h1>
<p>I'm sure this can be golfed further. I might also try to translate this into Python.</p>

<pre class="lang-javascript prettyprint-override"><code>//))&quot;&quot;(nioj.)(esrever.])q+s+q(nioj.))53(edoCrahCmorf.gnirtS(tilps.)c,)63(edoCrahCmorf.gnirtS(ecalper.)q+c+q,)33(edoCrahCmorf.gnirtS(ecalper.))&quot;&quot;(nioj.)(esrever.]c...[,)621(edoCrahCmorf.gnirtS(ecalper.s...[(gol.elosnoc
c=//
`console.log([...s.replace(String.fromCharCode(126),[...c].reverse().join(&quot;&quot;)).replace(String.fromCharCode(33),q+c+q).replace(String.fromCharCode(36),c).split(String.fromCharCode(35)).join(q+s+q)].reverse().join(&quot;&quot;))//`
//=c
s=//
`~
c=//
!
//=c
s=//
#
//=s
q=String.fromCharCode(96)//
//)69(edoCrahCmorf.gnirtS=q
$`
//=s
q=String.fromCharCode(96)//
//)69(edoCrahCmorf.gnirtS=q
console.log([...s.replace(String.fromCharCode(126),[...c].reverse().join(&quot;&quot;)).replace(String.fromCharCode(33),q+c+q).replace(String.fromCharCode(36),c).split(String.fromCharCode(35)).join(q+s+q)].reverse().join(&quot;&quot;))//
</code></pre>
<p><a href="https://tio.run/##3ZExb4MwEIV3/kVpB5@gZyUoKBmY@AkZo0hYjkOMHBt8iLF/nRqaoYOVDN26WafvvXfv3IlJkPS6Hz@n/TxzDpCmzGrXITBFXk3K4xmGjLLhMYZdwdTF1V7c6rvzV2yt9uORjdr0hCBzKOOAksL0wS64yWzIoXiBxTaRiHgKCdvNUy0tGGudQWUcWScTWXGeNNJZckahcS07BYbQq94Iqdhx9Nq2ePXuXt@Er91Fsc22hHzB5BnXfFIMsHPasjQFeKotCsjXni@wkCABqTd6jAM7eESufwDRTThvEs4rmdDa8uun7duv2fvypmSoYhmHMjgEAMpD7KrVkHw0f9P/27vP8zc" rel="nofollow noreferrer" title="JavaScript (V8) – Try It Online">Try it online!</a></p>
<h2>How?</h2>
<p>Line comments at the end of the line comment out that line in the reversed version.</p>
<p>Although the entire program is not a palindrome, it is made up of several palindromic or semi-palindromic sections. These are not true palindromes, but are <a href="https://www.youtube.com/watch?v=522Ls_hLGjQ" rel="nofollow noreferrer">close enough</a>.</p>
<pre class="lang-js prettyprint-override"><code>// This line is the last line reversed
//))&quot;&quot;(nioj.)(esrever.])q+s+q(nioj.))53(edoCrahCmorf.gnirtS(tilps.)c,)63(edoCrahCmorf.gnirtS(ecalper.)q+c+q,)33(edoCrahCmorf.gnirtS(ecalper.))&quot;&quot;(nioj.)(esrever.]c...[,)621(edoCrahCmorf.gnirtS(ecalper.s...[(gol.elosnoc

// This is a palindrome (apart from the string in the middle)
c=//
`console.log([...s.replace(String.fromCharCode(126),[...c].reverse().join(&quot;&quot;)).replace(String.fromCharCode(33),q+c+q).replace(String.fromCharCode(36),c).split(String.fromCharCode(35)).join(q+s+q)].reverse().join(&quot;&quot;))//`
//=c

// This is a palindrome (apart from the string in the middle)
s=//
`~
c=//
!
//=c
s=//
#
//=s
q=String.fromCharCode(96)//
//)69(edoCrahCmorf.gnirtS=q
$`
//=s

// This is also a palindrome
q=String.fromCharCode(96)//
//)69(edoCrahCmorf.gnirtS=q

// This line is the first line reversed
console.log([...s.replace(String.fromCharCode(126),[...c].reverse().join(&quot;&quot;)).replace(String.fromCharCode(33),q+c+q).replace(String.fromCharCode(36),c).split(String.fromCharCode(35)).join(q+s+q)].reverse().join(&quot;&quot;))//
</code></pre>
<p>Apart from this, it's a pretty standard quine. Writing the code twice, once in code and once in a string, and substituting the string into itself is a common quine technique.</p>
</div>
<div id="pu3" class="pu"><h1>&gt;&lt;&gt;, <s>21</s> 19 bytes</h1>
<pre><code>'rd3*70.r l?!;o90.&lt;
</code></pre>
<p><a href="http://portal.thedisco.zone/starfish/?script=OQJwJgzAVA7ADAOhAAgDYH4CEBuA9gTkQB4g" rel="nofollow noreferrer">Try it here!</a></p>
<p>Uses the *&gt;&lt;&gt; interpreter for convenience, but this is valid &gt;&lt;&gt; code.</p>
<hr />
<p>If erroring out is allowed, then it can be done in 16 bytes:</p>
<pre><code>'d3*}70.!r  !|o|
</code></pre>
<p><a href="http://portal.thedisco.zone/starfish/?script=OQEwzAVAvg7ADAOgIQCcAEakB8D2Wg" rel="nofollow noreferrer">Try it here!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/Sp3000/Golfish" rel="nofollow noreferrer">Gol>&lt;></a>, 11 bytes</h1>

<pre><code>":5-}H}+5:'
</code></pre>

<p>A whole byte chopped off! it almost is a palindrome, but technically isn't because of the '+' and '-', haha!</p>

<p><a href="https://tio.run/##S8/PScsszvj/X8nKVLfWo1bb1Er9/38A" rel="nofollow noreferrer" title="Gol&gt;&lt;&gt; – Try It Online">Try it online!</a></p>

<p><strong>The two below don't work, or at least they don't meet the specifications of the challenge, but the code above does.</strong></p>

<p><strong>slightly younger version, 12 bytes</strong></p>

<pre><code>"r2ssrH}+5:'
</code></pre>

<p>Golfed off a byte, simply by using the double quote and incrementing it by 5! And this new version looks less like a palindrome.</p>

<p><a href="https://tio.run/##S8/PScsszvj/X6nIqLi4yKNW29RK/f9/AA" rel="nofollow noreferrer" title="Gol&gt;&lt;&gt; – Try It Online">Try it online!</a></p>

<p><strong>older version, 13 bytes</strong></p>

<pre><code>"r2ssrHrss7r'
</code></pre>

<p>There was a problem with the previous that JoKing pointed out, thank you for that, now it works, but with the price of 4 extra bytes...</p>

<p><a href="https://tio.run/##S8/PScsszvj/X6nIqLi4yKOouNi8SP3/fwA" rel="nofollow noreferrer" title="Gol&gt;&lt;&gt; – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://esolangs.org/wiki/Help,_WarDoq!" rel="nofollow noreferrer">Help, WarDoq!</a> (27 bytes)</h1>
<p>25 bytes added because of reading source code.</p>
<pre><code>&lt;space&gt;q
</code></pre>
<p>How it works:<br />
<code>&lt;space&gt;</code> - a comment that ends on non-space character<br />
<code>q</code> - print source code reversed (q&quot;space&quot;)</p>
<h3>Reversed:</h3>
<pre><code>q&lt;space&gt;
</code></pre>
<p>How it works:<br />
<code>q</code> - print source code reversed (q for now)<br />
<code>&lt;space&gt;</code> - a comment that ends on non-space character, and add a character to beginning of q command (making &quot;space&quot;q)</p>
</div>
<div id="pu6" class="pu"><h1>Ruby 145</h1>

<pre>

DATA.read.tap{|a|puts a.reverse,a.tr("\x79\x59","\x59\x79")}
:y
__END__
__DNE__
Y:
})"97x\95x\","95x\97x\"(rt.a,esrever.a stup|a|{pat.daer.ATAD
</pre>

<p>The main idea is simple: just put the first half of the source code backwards after the <code>__END__</code> which can be read using <code>DATA</code> from ruby. Then just print the reverse of this data, then print the data, and you get back the original source code</p>

<p>The problem is, that this becomes a palindrome (note that the first line needs an endline), so we have to break the symmetry. I just added a symbol <code>:y</code> to the code, and some code that will transform this symbol between lowercase and uppercase between runs, thereby reverting to the original state after two runs.</p>

<p>Test one: they can be executed</p>

<pre><code>$ ruby rq2.rb &gt; rq2t.rb
$ ruby rq2t.rb &gt; rq2tt.rb
</code></pre>

<p>Test two: the result of two runs will return the original source</p>

<pre><code>$ diff rq2.rb rq2tt.rb
$
</code></pre>

<p>Test three: the code is not a palindrome (the middle run is different)</p>

<pre><code>$ diff rq2.rb rq2t.rb
3c3
&lt; :y
---
&gt; :Y
6c6
&lt; Y:
---
&gt; y:
</code></pre>
</div>
<div id="pu7" class="pu"><h2>Perl and C <s>6478</s> 1955</h2>

<pre><code>#!/usr/bin/perl -i//
$_=&lt;&lt;'rahc';eval $_; #//
print scalar reverse "#!/usr/bin/perl -i//\n\$_=&lt;&lt;'rahc';eval \$_; #//\n${_}rahc\n" #//
__END__
__END__ enifed#
};)"{ = ][cn\rahcn\n\"(p
};)'n\'( rahctup) 1 == 21%b ( fi
;)d(p;)]1-b[c,",d%",)d(foezis,d( ftnirpns{)b--;b;)c(foezis=b( rof
;)c(p;]9[d rahc;b tni{)(niam diov
}};)]1-b[c(rahctup )]1-b[c(fi{)b--;b;)c(nelrts=b(rof;b tni{)c*rahc(p diov
&gt;h.gnirts&lt; edulcni#
&gt;h.oidts&lt; edulcni#
;}
,0
,53,33,74,711,511,411,74,89,501,011,74,211
,101,411,801,23,54,501,74,74,01,63,59,16
,06,06,93,411,79,401,99,93,95,101,811,79
,801,23,63,59,95,23,53,74,74,01,211,411
,501,011,611,23,511,99,79,801,79,411,23,411
,101,811,101,411,511,101,23,43,53,33,74,711
,511,411,74,89,501,011,74,211,101,411,801,23
,54,501,74,74,29,011,29,63,59,16,06,06
,93,411,79,401,99,93,95,101,811,79,801,23
,29,63,59,95,23,53,74,74,29,011,63,321
,59,521,411,79,401,99,29,011,43,23,53,74
,74,01,59,59,96,87,86,59,59,01,59,59
,96,87,86,59,59,23,101,011,501,201,101,001
,53,01,521,95,14,43,321,23,16,23,39,19
,99,011,29,411,79,401,99,011,29,011,29,43
,04,211,01,521,95,14,93,011,29,93,04,23
,411,79,401,99,611,711,211,14,23,94,23,16
,16,23,05,94,73,89,23,04,23,201,501,01
,95,14,001,04,211,95,14,39,94,54,89,19
,99,44,43,44,001,73,43,44,14,001,04,201
,111,101,221,501,511,44,001,04,23,201,611,011
,501,411,211,011,511,321,14,89,54,54,95,89
,95,14,99,04,201,111,101,221,501,511,16,89
,04,23,411,111,201,01,95,14,99,04,211,95
,39,75,19,001,23,411,79,401,99,95,89,23
,611,011,501,321,14,04,011,501,79,901,23,001
,501,111,811,01,521,521,95,14,39,94,54,89
,19,99,04,411,79,401,99,611,711,211,23,14
,39,94,54,89,19,99,04,201,501,321,14,89
,54,54,95,89,95,14,99,04,011,101,801,411
,611,511,16,89,04,411,111,201,95,89,23,611
,011,501,321,14,99,24,411,79,401,99,04,211
,23,001,501,111,811,01,26,401,64,301,011,501
,411,611,511,06,23,101,001,711,801,99,011,501
,53,01,26,401,64,111,501,001,611,511,06,23
,101,001,711,801,99,011,501,53,01,95,521,01
{ = ][c
rahc
</code></pre>

<h1>Edit:</h1>

<p>Brief explanation: from perl the two interesting lines are the second and the third. The second line has two statements the first of which reads the rest of the document into a string. The second evals the string. The Third line prints everything backwards. every thing else gets ignored. from the c side you have an array which has the program as a string, which gets printed as an array and a string, and the rest is a comment.</p>
</div>
<div id="pu8" class="pu"><h2>GolfScript, 46 chars</h2>

<pre><code>0{`".~#"+.-1%+\.!@@}.~##~.}@@!.\+%1-.+"#~."`{1
</code></pre>

<p>Well, this is ugly, but it works.  The output equals the code reversed, and is also a valid GolfScript program which outputs the original code again.</p>

<p>OK, let me try to explain how I constructed it.  First, I started from the quine <code>{".~"}.~</code>, and modified it as in <a href="https://codegolf.stackexchange.com/questions/16021/print-your-code-backwards-reverse-quine/16040#16040">this answer</a> to reverse itself.  To make the output an executable quine in itself, I made a copy of the code before reversing it, and included a <code>#</code> at the end of the code, so that the reversed version at the end became just a comment.  Thus, we get the palindromic quine:</p>

<pre><code>{`".~#"+.-1%}.~##~.}%1-.+"#~."`{
</code></pre>

<p>However, by the rules, palindromes are not allowed, so I needed to break the symmetry somehow.  I figured the easiest way would be to include a <code>0</code> (which, in itself, is a quine in GolfScript) in the code and flip it to <code>1</code> with <code>!</code> after creating the reversed copy.  Most of the remaining complexity is just ugly stack manipulation to get everything in the right order.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/16043/">16043</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




