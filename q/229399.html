<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::229399</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>142</td><td>TypeScript's type system</td><td>240303T012140Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/271490#271490">noodle m</a></td></tr>
<tr d-ix="1"><td>065</td><td>Python 3.8 prerelease</td><td>210610T155748Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229411#229411">Jakque</a></td></tr>
<tr d-ix="2"><td>105</td><td>Haskell</td><td>210613T213750Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229596#229596">Kyuuhach</a></td></tr>
<tr d-ix="3"><td>091</td><td>C</td><td>210610T220456Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229446#229446">Soup Gir</a></td></tr>
<tr d-ix="4"><td>048</td><td>Jelly</td><td>210610T143309Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229408#229408">hyper-ne</a></td></tr>
<tr d-ix="5"><td>112</td><td>QBasic</td><td>210611T032859Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229460#229460">DLosc</a></td></tr>
<tr d-ix="6"><td>028</td><td>Charcoal</td><td>210610T220330Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229444#229444">Neil</a></td></tr>
<tr d-ix="7"><td>017</td><td>Jelly</td><td>210610T194617Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229438#229438">Nick Ken</a></td></tr>
<tr d-ix="8"><td>012</td><td>QuadR g</td><td>210610T131600Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229400#229400">Ad&#225;</a></td></tr>
<tr d-ix="9"><td>026</td><td>APL Dyalog Extended</td><td>210610T142025Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229406#229406">Ad&#225;</a></td></tr>
<tr d-ix="10"><td>016</td><td>Retina 0.8.2</td><td>210610T193211Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229436#229436">Neil</a></td></tr>
<tr d-ix="11"><td>325</td><td>Smalltalk</td><td>210610T160912Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229413#229413">Riolku</a></td></tr>
<tr d-ix="12"><td>041</td><td>JavaScript Node.js</td><td>210610T141354Z</td><td><a href="https://codegolf.stackexchange.com/questions/229399/remove-all-smalltalk-comments-for-code-golf/229404#229404">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>TypeScript's type system, 142 bytes</h1>

<pre class="lang-typescript prettyprint-override"><code>type F&lt;S&gt;=S extends`'${infer Z}'${infer X}`?`'${Z}'${F&lt;X&gt;}`:S extends`&quot;${any}&quot;${infer X}`?F&lt;X&gt;:S extends`${infer C}${infer X}`?`${C}${F&lt;X&gt;}`:S
</code></pre>
<p><a href="https://www.typescriptlang.org/play?#code/C4TwDgpgBAYgPAZQHwF4FQgD2BAdgEwGcADAcgBIBvAS1wDMIAnKALQF8Kb6moANN4gH4yVdp3i8kAgFzosOAiQBEVAIa4QbFVwbN+QiUlkZseIsSq1dUAMJtL3PQOFU7VQzIQAoL6EhQAFQhCYABGKBRYOGJQgCYAZmIkLwB6FKgMgD1BX3BoIJDYiKiYpVilROS0jKhs3P8C4Hji+FKyytT0rJy-fODgABYW6NI40iTOmrrewP6AVmGyULLSeKUlCeru+r6QgDZF0bKK8aqu2p682ZCAdkXVJVDSWNWlVU3z6avGgA5Ft6UACMlABjDZnKaXBr9ACch1UpEBpBBp0m2xmjVCAAZ7qQlIi8ciPpCdtcwuFIq0HnjgXiQcTtkA" rel="nofollow noreferrer">Try it at the TS playground!</a></p>
<p>This is a type F that takes and outputs a string type.</p>
<p>Explanation:</p>
<pre class="lang-typescript prettyprint-override"><code>type F&lt;S&gt;=
</code></pre>
<p>This is the type signature for F. S is the input string type, but since this is a recursive type, S isn't necessarily the original string, but rather whatever part of the string we haven't processed yet.</p>
<pre class="lang-typescript prettyprint-override"><code>S extends`'${infer Z}'${infer X}`?`'${Z}'${F&lt;X&gt;}`
</code></pre>
<p>Attempt to match S against: single quote + a string called Z + single quote + a string called X. If the match succeeded, return single quote + Z + single quote + recurse, with X as the argument.</p>
<p>This step keeps anything within single quotes.</p>
<pre class="lang-typescript prettyprint-override"><code>:S extends`&quot;${any}&quot;${infer X}`?F&lt;X&gt;
</code></pre>
<p>If the match failed, attempt to match S against: double quote + a string + double quote + a string called X. If the match succeeded, recurse with X as the argument.</p>
<p>This step discards anything between double quotes.</p>
<pre class="lang-typescript prettyprint-override"><code>:S extends`${infer C}${infer X}`?`${C}${F&lt;X&gt;}`
</code></pre>
<p>If that match failed, match S against: a character called C + a string called X. This basically just extracts the first character and the rest. If the match succeeded, return C + recurse with X as the argument.</p>
<pre class="lang-typescript prettyprint-override"><code>:S
</code></pre>
<p>If that match failed, S must be the empty string, so we just return it because the program has finished.</p>
<p>Note that this solution isn't tail recursive, so it only works for strings under 50 characters. Here's a tail recursive version that works for strings up to 999 characters:</p>
<h2>TypeScript's type system, 166 bytes</h2>
<pre class="lang-typescript prettyprint-override"><code>//@ts-ignore
type F&lt;S,O=&quot;&quot;&gt;=S extends`'${infer Z}'${infer X}`?F&lt;X,`${O}'${Z}'`&gt;:S extends`&quot;${any}&quot;${infer X}`?F&lt;X,O&gt;:S extends`${infer C}${infer X}`?F&lt;X,`${O}${C}`&gt;:O
</code></pre>
<p><a href="https://www.typescriptlang.org/play?#code/PTACBcGcFoEsHMB2B7ATgUwFDgJ4Ad0ACAMQB4BlAGgHkBeAInoD5bzD0APcdRAE0gAGAcgAkAb1iIAZulSEAWgF9RE6bMIANRQID8ZDZQHjqy8UqECmALjadufQfXEBDRDkVPVMuVt36a1rZcPPxGXuoAworikt6a2nqkBmEm4lGWVtSY2PhEACrokOAAjIS0JKQCxQBMAMyWmCCEzQB6OjkEhAVF1WUVVfTV9PVMjcDNhG0d+YXgtX1kA4MjYxNTuJ3d4AAsC5VCNRajTa3tGzNFAKx7wsWDQrWMDSeTZ7ldswBsNweDw0erU7TD5FADsN2c9GKQmqD3ozme4yB5xB4AAHDd4fQAEb0ADG9ERazem1mAE4fs4hNihHiAS91u8tsUAAwQoT0akc2lE5FM2bFUrlRaQjm4jl43mvTBAA" rel="nofollow noreferrer">Try it at the TS playground!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, no regex, <s>75</s> 65 bytes</h1>

<pre class="lang-python prettyprint-override"><code>a=b=1
for i in input():c=b*i;a^=&quot;'&quot;==c;b^='&quot;'==a*i;print(end=c*b)
</code></pre>
<p><a href="https://tio.run/##LY7RCoMwDEXf@xUlL7G@tb6MSn5FaGOHhVGLdky/3sUxSEK453KTerZlLcOjbhevcyIAuAJFsuq5bjrrXKTqu3XGM8U@j2EiQCDiMU6EgERB1Lrl0rpUZuI@mktSVNtOr/Rnya@krU9H4u6@YP5eo9LBqTZfw75f1g3KgoN7guxoHcoAh4NE4Q@hCmDxVoKCABFYSMCILEQ@idIsHhSEwF8" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Much cleaner solution than my previous one</p>
<h3>how it works :</h3>
<p><code>a</code> and <code>b</code> store the state of the string:</p>
<ul>
<li><code>a</code> is equal to <code>0</code> if the char is inside a literal and <code>1</code> otherwise</li>
<li><code>b</code> is equal to <code>0</code> if the char is inside a comment and <code>1</code> otherwise</li>
<li><code>c</code> store the char multiplied by <code>b</code>. If  the char is inside a comment (<code>b</code> is equal to <code>0</code>), <code>c</code> is equal to the empty string</li>
<li><code>a^=</code> use of the bitwise operator xor to swich the state of <code>a</code> if the current char is <code>'</code> and the char is not inside a comment</li>
<li>same goes for <code>b</code> but with <code>&quot;</code></li>
<li><code>print(end=c*b)</code> print the char if <code>b</code> is not set to <code>0</code>. <code>end=</code> is for avoiding the trailing new line</li>
</ul>
<h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, regex, 52 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda s:re.sub(&quot;\&quot;.*?\&quot;|('.*?')&quot;,&quot;\\1&quot;,s)
import re
</code></pre>
<p><a href="https://tio.run/##HYpBCsMgFET3nkJm87UEqWZTCqUXcWMSQ4XEiNpFoXe3ppuZx7xJn/o64nhLua0P2za3T4vj5Z69Ku9JwEJdnhZfQb1JYoC1GkORLOzpyJVn39Yj88BD5EfyUVylyt4tQqqStlC3EH0R8s54yiFWsYogZdNmZBoGZ6IzaUM9YGgE/oCRmIOmc3EMDhPmbhxNNHdD6ACa@4e6Isw/" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Pretty basic:  I replace comments by nothing and literals by themselves. Regex substitution are not overriding. Lazy operators do the rest</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 105 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>f('&quot;':s)=g s
f(a@'\'':s)=a:h s
f(a:s)=a:f s
f[]=[]
g('&quot;':s)=f s
g(a:s)=g s
h(a@'\'':s)=a:f s
h(a:s)=a:h s
</code></pre>
<p><a href="https://tio.run/##ZZFPa4QwEMXvfoohFCaCW9C9LaQUepZ@AONhYv1H3bgYL/30Nsl03ZVeEt/vzXsBZyD33U7TNl5v87LCx2zXZZ5ey9nSF8huXsoUTif4tNMPeAUDLbZ1buskCry4VPXgkk7SO2qMmi4DExZdEFWtqjrp75HAeh4I6eGQ7pjsVVtDrnWgEoAKpMiLs8ggXqlHWUBaFFowPlDP/w1jXmBg8X5AP4rnkGAvyqPtX8DdjOJukxY5xjiFAaLd0cEzWjTcax6NhAYb7vv73NtQC0/80cS2J/n0IMZef/KQYbNOkiuNFlRYVQn8515AS8rA@D2@wW0Z7er3CgRKgckgOtsv" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1>C, <s>92</s> 91 bytes</h1>
<pre><code>c;s;main(){while((c=getchar())+1)s=s?s-2?putchar(c):0,s*(c!=44-5*s):c-34?putchar(c)==39:2;}
</code></pre>
<p>All my submissions so far have been in esolangs, so even though C might not be anything groundbreaking, it's at least new to me. :)</p>
<p><a href="https://tio.run/##TYpBCsIwFET3vYWz@Uk1YJK6sCH0LL@f0hZqEaO4EM8eU924eTzmjRhZeB1zlpDChedV6ddzmpdBKYnjcJeJb0rrvdUppi4Z110fv1F0ezykWskuNo051Um3Ynzz12P059aFd87W@crCYSOKk3VUAEce@Ao8VQxL28IVGD2kFKaepBRCEZCUD5VEkA8" rel="nofollow noreferrer">Try It Online!</a></p>
<h3>Explanation</h3>
<pre><code>c;s;                          // for current char and state
main() {
  while ((c=getchar())+1)     // while input is not EOF:
    s=s?            // if state is not 0 (0=default, 1=string literal, 2=comment)
      s-2?putchar(c):0,       // output the current char if state is not 2
      s*(c!=44-5*s) // set s to 0 if the relevant character is found
                    // (39 ['] if state = 1, 34 [&quot;] if state = 2)
     :              // else (state = 0)
      c-34?         // if the current char is not [&quot;]
        putchar(c)==39 // output current char, and if it is ['], set s to 1
       :      // else (current char is [&quot;])
        2     // set s to 2
    ;}        // end expression, statement, and main function
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 48 bytes</h1>
<pre><code>iⱮ⁾'&quot;o1:0¤&gt;/
ṣ”&quot;2œPj€”&quot;µẹ”'2ị‘œṖµÇ?;ß}¥/$¹f⁾'&quot;$?
</code></pre>
<p><a href="https://tio.run/##y0rNyan8/z/z0cZ1jxr3qSvlG1oZHFpip8/1cOfiRw1zlYyOTg7IetS0BsQ@tPXhrp1AhrrRw93djxpmHJ38cOe0Q1sPt9tbH55fe2ipvsqhnWlgU1Ts////n6iupJ4ExMlK6kopQJwKAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>This is definitely not the best approach, even considering Jelly is typically not great with strings.</p>
<pre><code>iⱮ⁾'&quot;o1:0¤&gt;/  Helper Link
iⱮ⁾'&quot;         Find the first ' and &quot;; 0 if not found
     o        Logical OR with
      1:0¤    1 / 0 (infinity) - that way, &quot;not found&quot; is at the end, not the start
          &gt;/  Is the first greater than the second?

ṣ”&quot;2œPj€”&quot;µẹ”'2ị‘œṖµÇ?;ß}¥/$¹f⁾'&quot;$?  Main Link
                                  ?  If
                             f⁾'&quot;$   There are any ' or &quot;
                     ?     $         - If
                    Ç                - &quot; was found first
ṣ”&quot;                                    - Split on &quot;
   2œP                                 - Split over and discard the second item
      j€”&quot;                             - Join each of those with &quot; (basically, this slices out
                                         the part between and including the first and second &quot;,
                                         and leaves the part before and after as two sublists)
                                     - Otherwise
           ẹ”'                         - Find all indices of '
              2ị                       - Get the second of these
                ‘                      - And increment it
                 œṖ                    - And partition the list at that point (basically, this
                                         divides the list at the second ' without removing anything)
                         ¥/          - Then, reduce (apply to first and second as left and right) by
                      ;ß}            - Concatenating the left side with this function applied to the right link
                            ¹        Otherwise, if ' and &quot; aren't found, just return the string itself
<span class="math-container">```</span>
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://en.wikipedia.org/wiki/QBasic" rel="nofollow noreferrer">QBasic</a>, <s>118</s> <s>113</s> 112 bytes</h1>
<pre><code>LINE INPUT s$
FOR i=1TO LEN(s$)
a=ASC(MID$(s$,i))
k=c
c=c XOR(a=34)&lt;q
q=q XOR(a=39)&lt;c
IF c+k=0THEN?CHR$(a);
NEXT
</code></pre>
<h3>Explanation</h3>
<p>Looping over the ASCII code <code>a</code> of each character in a line of input <code>s$</code>, we track three boolean values:</p>
<ul>
<li><code>c</code> is true inside a comment, false otherwise</li>
<li><code>q</code> is true inside quotes, false otherwise</li>
<li><code>k</code> is the previous iteration's value of <code>c</code> (we need to track this so we can suppress both double quotes instead of just the first one)</li>
</ul>
<p>The values are updated as follows:</p>
<ul>
<li>If the current character is a double quote (<code>a=34</code>) and <code>q</code> is false, toggle <code>c</code></li>
<li>If the current character is a single quote (<code>a=39</code>) and <code>c</code> is false, toggle <code>q</code></li>
</ul>
<p>If both <code>c</code> and <code>k</code> are false, we're not in a comment, so output the character.</p>
<p>(There's a fun trick in the update statements: In QBasic, truthy is -1, so instead of <code>a=39AND c=0</code>, we can get the same result from <code>(a=39)&lt;c</code>. The inequality will be true only when <code>a=39</code> is <code>-1</code> and <code>c</code> is <code>0</code>.)</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 28 bytes</h1>
<pre><code>≔ωζＦＳ«Ｆ¬⁼∨ζι&quot;ι¿№&quot;'ι≔⁻∨ζι∧ζιζ
</code></pre>
<p><a href="https://tio.run/##TY27DsIwDEVn@hWRFztS@QKmCjEw8JBYWUpL20BI2jxaKOLbQ6AMbL6@xz5Fk5tC5zKEzFpRKxpSNvJFUmnDaK1a7w7OCFUT5@yZzL7rrXa06nwuLe0MjSkTPGVwBOAR2kfakYgvZqJitNQ@xlgifDjOfpqNUP7/PFPlNPLJ/wohhxMWUOIZKqyhQQEXvILEGyjU0GIHBi049NDjAHd8hHkv3w" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔ωζ
</code></pre>
<p>Keep track of the current quote character, initially <code></code>, but can be <code>&quot;</code> or <code>'</code>.</p>
<pre><code>ＦＳ«
</code></pre>
<p>Loop over the input.</p>
<pre><code>Ｆ¬⁼∨ζι&quot;ι
</code></pre>
<p>If the current quote, or the current character if there is no current quote, is not <code>&quot;</code>, then print the current character.</p>
<pre><code>¿№&quot;'ι
</code></pre>
<p>If the current character is a quote, then...</p>
<pre><code>≔⁻∨ζι∧ζιζ
</code></pre>
<p>... turn the current quote on or off as appropriate.</p>
<ul>
<li>If the current quote is empty, then we subtract nothing from the current character, so the current quote becomes the current character.</li>
<li>Otherwise, we subtract the current character from the current quote. This ends the current quote only once we find the matching character.</li>
</ul>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 17 bytes</h1>
<pre><code>⁾'&quot;iⱮnaoɗ\ŻṖoƊỊx@
</code></pre>
<p><a href="https://tio.run/##RYyxCsIwEIb3PEW45SaHpGOx@BqCyyU4KMWuulUXoQ@giy7OIigOlYJLseBjJC8Sk4bidN//3X@3nOf5xjm7fSMs7P22ouJ7nH0a8zoUXWWaaj1xqS1PfJRxW57Tds9M8zT1w9SXdt9VdnedOidkwscZ94MJkBBDYPgvUEgMHKYPIDEBiCJwryDBwXhkBAJDjYIkYkCgQPdHiiGhQh37ERkheADUfX8I/g36O4Solf4B" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>A link taking a Jelly string argument and returning a Jelly string without the comments.</p>
<h2>Explanation</h2>
<pre><code>⁾'&quot;iⱮ              | Positions of each character in '&quot; (so single quote -&gt; 1, double quote -&gt; 2, anything else -&gt; 0)
         ɗ\        | Cumulative reduce (x,y)
     nao           | - (x != y) and (x or y)
              Ɗ    | Following as a monad:
           Ż       | - Prepend zero
            Ṗ      | - Remove last item from list
             o     | - Or
               Ị   | Less than or equal to 1
                x@ | Original input with 0 or 1 copies of each character as appropriate
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/abrudz/QuadRS" rel="nofollow noreferrer">QuadR</a> <code>g</code>, <s>18</s> 12 bytes</h1>
<p>‒6 thanks to Neil.</p>
<pre><code>'.*'
".*"
&amp;

</code></pre>
<p><a href="https://tio.run/##HYoxCsAwDMR2P0NDDzIEkrzISaFzC32/63QR4nT36@cToVpk1IIdFtH6sEZnk3S1rgRdA35hyJymvbjhTFYW19TKIlLQyo8yiRXXBw" rel="nofollow noreferrer" title="QuadR – Try It Online">Try it online!</a></p>
<p>This is equivalent to the Dyalog APL function <code>'''.*''' '&quot;.*&quot;'⎕R'&amp;' ''⍠'Greedy'0</code></p>
<p>The <code>g</code> flag turns off greedy patterns, essentially making <code>*</code> mean <code>*?</code>. Then the two patterns simply replace <code>'.*'</code> strings and <code>&quot;.*&quot;</code> comments with <code>&amp;</code> themselves and <code></code> nothing, respectively.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/abrudz/dyalog-apl-extended" rel="nofollow noreferrer">APL (Dyalog Extended)</a>, <s>30</s> 26 bytes (<a href="https://github.com/abrudz/SBCS" rel="nofollow noreferrer">SBCS</a>)</h1>

<p>Anonymous prefix lambda.</p>
<pre class="lang-apl prettyprint-override"><code>{⍵/⍨≠\⍛⍱⍨&lt;⌿≠\@1⊢'''&quot;'∘.=⍵}
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNrShJzUtJTfn/v/pR71b9R70rHnUuiHnUO/tR70Ygx@ZRz36QgIPho65F6urqSuqPOmbo2QKV1v5Pe9Q24VFv36Ou5ke9ax71bjm03vhR28RHfVODg5yBZIiHZ/D/NHVDI2N1LiClZKQEZShBRNSBUkACwlICMo2VlOA8oFqwVKKSobo6WC4RxFVKVEpSSoYqS1RXT1JXT4YqBLkNxFcCCYF1AtlJICJZHQA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>
<p><code>{</code>…<code>}</code> <a href="https://en.wikipedia.org/wiki/Direct_function" rel="nofollow noreferrer">dfn</a>; argument is <code>⍵</code>:<br />
  <code>`a&quot;1'2'3&quot;a'1&quot;2&quot;3'a&quot;'&quot;b&quot;'&quot;c`</code></p>
<p> <code>'''&quot;'∘.=⍵</code> equality table for <code>'</code> and <code>&quot;</code> versus the argument<br />
   <code>[[0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0],</code><br />
   <code> [0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0]]</code></p>
<p> <code>≠\@1⊢</code> running parity (lit. XOR scan) <strong>at</strong> the 1st row (lit XOR scan) indicating characters inside strings<br />
   <code>[[0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0],</code><br />
   <code> [0,1,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0]]</code></p>
<p> <code>&lt;⌿</code> second row, i.e. comment delimiters, and not first row, i.e. inside string, i.e. active comment delimiters (lit. vertical less-than reduce)<br />
   <code>[0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0]</code></p>
<p> <code>≠\⍛⍱⍨</code> neither that (active comment delimiters) NOR its running parity (inside comments)<br />
   <code>[1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1]</code></p>
<p> <code>⍵/⍨</code> use that to filter the characters of the argument<br />
   <code>`aa'1&quot;2&quot;3'ac`</code></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 16 bytes</h1>
<pre><code>('.*?')|&quot;.*?&quot;
$1
</code></pre>
<p><a href="https://tio.run/##HYqxDYBADAP7jGEhGSiQkh@AWfIRBQ0FomT3kKexTz7fx3NenjlzW3cuL6ogk2aqNVEYRqKYaqyAsQE/oFEcyrG4wNERZZydUYYoAKM@LEXEBw" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation: Regex, obviously. Since by default matches can't overlap, the regex can match both strings and comments and won't get confused. It then remains to delete the comments without changing the strings.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://www.tutorialspoint.com/execute_smalltalk_online.php" rel="noreferrer">Smalltalk</a>, 325 bytes</h1>
<pre><code>[:k|k inject:OrderedCollection new into:[:a :b|(a isEmpty not and:[a last=0])ifTrue:[(b=$')ifTrue:[a removeLast. a add:b. a]ifFalse:[a removeLast. a add:b. a add:0. a]]ifFalse:[(a isEmpty not and:[a last=$&quot;])ifTrue:[(b=$&quot;)ifTrue:[a removeLast. a]ifFalse:[a]]ifFalse:[(b=$')ifTrue:[a add:b. a add:0. a]ifFalse:[a add:b. a]]]]]
</code></pre>
<p>Some hot garbage smalltalk code.</p>
<p>It essentially uses a stack, pushing a <code>0</code> for a placeholder for when it sees <code>'</code>. When it sees <code>&quot;</code>, it keeps in on the top of the stack until it sees another <code>&quot;</code>.</p>
<p>I couldn't get an Eval function (smalltalk docs are <em>terrible</em>), nor could I get regex to work (smalltalk docs are <em>terrible</em>).</p>
<p>You can use GNU Smalltalk to run this, in theory, although I only tested it on the online compiler (linked above).</p>
<p>Here's a (more) readable version that takes from stdin and writes to stdout. As you can tell smalltalk is a beautiful language...</p>
<pre><code>Transcript show:(stdin nextLine inject:
    OrderedCollection new into:
        [:a :b|
        
        Transcript show: a printString; cr.

        (a isEmpty not and:[a last = 0])ifTrue: [
            (b = $') ifTrue: [
                a removeLast.
                a add: b.
                a
            ] ifFalse:[
                a removeLast.
                a add: b.
                a add: 0.
                a
            ]
        ] ifFalse: [
            (a isEmpty not and:[a last = $&quot;]) ifTrue: [
                (b = $&quot;) ifTrue: [
                    a removeLast.
                    a
                ] ifFalse: [a]
            ] ifFalse: [
                (b = $') ifTrue: [
                    a add: b.
                    a add: 0.
                    a
                ] ifFalse: [
                    a add: b.
                    a
                ]
            ]
        ]
]).
</code></pre>
<p>Note: the regex solution almost works, using the same approach as Jakque, but it fails since smalltalk gives <code>nil</code> instead of an empty string:</p>
<pre><code>Transcript show:(stdin nextLine replacingAllRegex: '&quot;.*?&quot;|(''.*?''|.)' with: '%1')
</code></pre>
</div>
<div id="pu12" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 41 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>s=&gt;s.replace(/('|&quot;).*?\1/g,_=&gt;_&lt;'%'?'':_)
</code></pre>
<p><a href="https://tio.run/##RYzdToNAFITveQpyEjO7LYLAjTFC73wBL9VuDtulwSBUtjUx8d1xf2y8OjPfmZl3/mKrl@F0vp3mg1n7ZrVNa/PFnEbWRhQCPyTzze61LI6Zalr1iBvsgAcl18V8XobFCPQW0lX48DSM5vl70uIuw@Xc3wf8t7R/2adv2@IjzOh5svNo8nE@CpWlwLYXSkq5llWdNm3qTlJSRdF4Tf8PlBW89tcZqlATReB1QFTjSpxMmEr4GHvInBBTRzqUugSMDjrmo0wY5ARBh/zVuBm4HijiTv8C" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Trivial, thank  EliteDaMyth for -3 bytes</p>
<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, <s>88</s> 86 bytes, No RegEx</h1>

<pre class="lang-javascript prettyprint-override"><code>f=([c,...s],y=c=='&quot;')=&gt;c?[[c+s.splice(0,s.indexOf(c==&quot;'&quot;|y?c:s)+1).join``][+y]]+f(s):s
</code></pre>
<p><a href="https://tio.run/##RZAxb4MwEIV3fgW65WxBnQJLFMnJ1rVDR0SIOUzkiALFSVWk/nd6gKIO1r33@d2z5Jv5Np5GN9xfur6289xokVOslPJFPGnSGgGlPtIpzynyyg@tIyteY69cV9uf90ZwBhB@pxMdvIwSqW696y6XIo@mooga4eXBz6P9erjRCmw8SjVaU7@51n5MHXEXPu7NfsVDa7h9d87PYRHtPq9xyU/3ne9bq9r@Kso4ROTOUko5J2kW6mPII0gghc0sGv4vMElx0ctkAylmABtY9IogwydhGRhIcImZBRoTgIEKaF2qAjRYIW35TQaGf6jiQ2v@abgGeQ9hwxX9AQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>If <code>s.indexOf(s)</code> happens to be non-negative, then <code>s==c</code> and <code>f([c,c])==c+c</code></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/229399/">229399</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




