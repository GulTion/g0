<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::172488</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>223</td><td>Python3</td><td>240717T022309Z</td><td><a href="https://codegolf.stackexchange.com/questions/172488/a-sorcerers-spellbook/274205#274205">Ajax1234</a></td></tr>
<tr d-ix="1"><td>099</td><td>Java JDK</td><td>180920T081622Z</td><td><a href="https://codegolf.stackexchange.com/questions/172488/a-sorcerers-spellbook/172536#172536">Olivier </a></td></tr>
<tr d-ix="2"><td>078</td><td>JavaScript ES6</td><td>180921T071723Z</td><td><a href="https://codegolf.stackexchange.com/questions/172488/a-sorcerers-spellbook/172599#172599">Arnauld</a></td></tr>
<tr d-ix="3"><td>155</td><td>Groovy</td><td>180921T155524Z</td><td><a href="https://codegolf.stackexchange.com/questions/172488/a-sorcerers-spellbook/172615#172615">archange</a></td></tr>
<tr d-ix="4"><td>098</td><td>Python 3</td><td>180920T115339Z</td><td><a href="https://codegolf.stackexchange.com/questions/172488/a-sorcerers-spellbook/172541#172541">Cameron </a></td></tr>
<tr d-ix="5"><td>051</td><td>Charcoal</td><td>180919T225416Z</td><td><a href="https://codegolf.stackexchange.com/questions/172488/a-sorcerers-spellbook/172509#172509">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 223 bytes</h1>
<pre class="lang-py prettyprint-override"><code>import math
def f(n,b):
 v={1:2}
 for i in range(2,n+1):v[U]=v.get(U:=min(math.ceil(i/2),9),0)+2-(i in[12,14,16,18,19,20])
 V={}
 for i in b:V[i]=V.get(i,0)+1
 return (len(b)&lt;=n+1 or n==1)and all(V[i]&lt;=v.get(i,0)for i in V)
</code></pre>
<p><a href="https://tio.run/##hY5Bb4JAEIXv/Io57sapZVZAIO7PkAvhABV0E1zJhpo0pr@d7qJYtCbNvNO8972Z7qs/nPQq7swwqGN3Mj0cy/7g7eoGGqax4qkHZ3mhVHx70JwMKFAaTKn3NROoF8TTc74t5Hm5r3u2TeVRaeYqlh@1apl6FxwTjj5fiDfm2JwEUoAUIcVICQq/4B5k8jLvr9IsV4XMxlLlaPLA1P2n0cDaWrOKb6Q9DhbQUhIv9Q7KtmUO29yecdy9MeNDZ5TuWcMIc0IqOPemTew2YCUQVqPCuR0i5FfTKnhhihlp/eDRv3XfG1x0niD70A2cFD4qsnoiIP8994p6RoRvkQivsx4nHieZ5k86/Cc9/AA" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK)</a>, 99 bytes</h1>

<pre class="lang-java prettyprint-override"><code>s-&gt;l-&gt;{var r=s.length!=l+1-l/12*(l-10)/2-l/19;for(var z:s)r|=z&gt;(++l&gt;30?9:l+(2&lt;&lt;l/25)&gt;&gt;2);return!r;}
</code></pre>
<p><a href="https://tio.run/##jVDRbtMwFH3vV9xNqmSvSdp4lNGmCeIFCQk0pD5Oe3BTp7i4TmTfFHVdvr3YzoY2KIKcB@tcn3N8brZ8z@Pt@vtJ7praIGwdT1qUKrnKBn/MqlaXKGvtL0vFrYUvXGo4DgCadqVkCRY5umNfyzXs3B1ZopF6c3cP3GwsDVKAj085C6nx7j76pPGrEWtZchQFVJCfbFyouDjuuQGT20QJvcFvF7kapbEap@yKqDid0DHzbJZVtSFe@jC31DzmDwUZjVRxPXk/m6sRYYuFGrMpLQpGMyOwNfrCZN0pC1W8D4VFYSAHLX7A7WorSiS0bwr9Kl5BXFlQYi9UBKE32EYo9dlPfm3mv@XBxe2SusWkcctjRS6DyD0wZOsIlt5mPbNzGK6G@jJ6zv1gDD/YBOv@t5GXL0RQJbxp1OHVNAnVgp3S7KlDF86up/12vS6Nwo6h/tGRtKP/IfqLbvpaxxzeRNOzib9FnsVZI/u38eackU1eGqfR24CbgHcBs2f09m7QnX4C" rel="nofollow noreferrer" title="Java (JDK) – Try It Online">Try it online!</a></p>
<h2>Credits</h2>
<ul>
<li>Port of <a href="https://codegolf.stackexchange.com/a/172599/16236">Arnauld's JavaScript answer</a>.<br>
However, the <code>l+1-l/12*(l-10)/2-l/19</code> part is a shortening in Java for <code>(l&lt;12?l:l&gt;16?14:l+11&gt;&gt;1)+1</code> which can't be done in JavaScript because it doesn't round to the floor integer.</li>
</ul>
<hr />
<p>Previous answer:</p>
<h1><a href="http://jdk.java.net/" rel="nofollow noreferrer">Java (JDK 10)</a>, 191 bytes</h1>

<pre class="lang-java prettyprint-override"><code>L-&gt;S-&gt;{int m[]=new int[9],z=0,Z=0,l=0;for(m[0]++;l++&lt;L;z+=--m[z]&lt;1?1:0)m[Z=~-l/2-l/19]+=l&lt;12?2:l&gt;17?1:1+l%2;l=0;for(int s:S){if(--s&gt;Z)l++;Z-=--m[Z&gt;0?Z:0]&lt;1?1:0;}for(int i:m)l|=i;return l==0;}
</code></pre>
<p><a href="https://tio.run/##jZHbitswEIbv8xTDQsCuD7VNt9tYlkNvCoWULvjOxheKIy9K5QOSnJKk3ldPZTlZAm2hHgsxmm/@0Yz25EC8/e7HhTV9JxTste8PinH/HVr8cVYPbaVY107BihMp4RthLZwXAP2w5awCqYjS26FjO2h0zMqUYO1LUQIRL9I2KMDXVn25SiXPgu5YRRRNWKuKMk2hBnzZeGnmpWd9BE1R4pb@hCm8Kt0TDtxcL44DVHfCaoqgdBzEHSfZoJODPa8pTmUSrsM4sJsix68efx/pFa5KB/MkjNZRzNPwSQOhw5cRuilNxWSc2WdWW54n09zWoij3jGSeBus8Dq7CaLwlsLix@S/MkKBqEC1wrNXGCzJ9HogARaWiAjBMPXzf7mmlLHseA8xzmgijxemBctc0WoLsKeeb6eRtbNOXHbVc43eD8ns9WVVbDwbSBZbRzoVsSpOTJ2NYbpftg3vT/SwEOUpfdfObWPcVXKh90vf8aBnY9s2l7gkbXe8wmn2c3bm7mQ5duL1TedZOONr/Af2De7zntPPBhcj8f6Wj4B5fuTf7ZOzJ2Edjj3P6uBgvvwE" rel="nofollow noreferrer" title="Java (JDK 10) – Try It Online">Try it online!</a></p>
<ul>
<li><strong>Input requirement:</strong> the spell list must be ordered from greatest spell levels to the lowest one.</li>
</ul>
<h2>Explanations</h2>
<pre class="lang-java prettyprint-override"><code>L-&gt;S-&gt;{                                        // Curried-lambda with 2 parameters: sorcerer-level and spell list
 int m[]=new int[9],                           // Declare variables: m is the max level  of each spell.
     z=0,                                      // z is the minimum spell level of the maximized spell list.
     Z=0,                                      // Z is the maximum spell level for the current level.
     l=0;                                      // l is first a level counter, then a reused variable
 for(m[0]++;l++&lt;L;z+=--m[z]&lt;1?1:0)             // for each level, compute the maximized known spells.
  m[Z=~-l/2-l/19]+=l&lt;12?2:l&gt;17?1:1+l%2;        // 
                                               // Now m is the row for level L in the table below.
 l=0;                                          // l now becomes an error indicator
 for(int s:S){                                 // This loop checks if the spell-list matches the spells allowed for that level.
  if(--s&gt;Z)l++;                                // Spell-levels are 1-based, my array is 0-based so decrease s.
  Z-=--m[Z&gt;0?Z:0]&lt;1?1:0;                       // Remove a max level if we've expleted all the spells, avoiding exception.
 }                                             //
 for(int i:m)l|=i;                             // Make sure there are no more values in m.
 return l==0;                                  // Return true if no miscount were encountered.
}
</code></pre>
<p><strong>Table 1:</strong> Maximized spell distribution for each sorcerer-level, used from <a href="https://rpg.stackexchange.com/a/131936/28410">Axoren's answer on the linked question</a>.</p>
<p><a href="https://i.sstatic.net/aARZt.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/aARZt.png" alt="enter image description here" /></a></p>
<h2>Credits</h2>
<ul>
<li>Saved 14 bytes thanks to <a href="https://codegolf.stackexchange.com/users/52210/kevin-cruijssen">Kevin Cruijssen</a>.</li>
</ul>
</div>
<div id="pu2" class="pu"><h1>JavaScript (ES6), <s> 79 </s> 78 bytes</h1>
<p>Takes input as <code>(level)(array)</code>. Returns <span class="math-container">\$0\$</span> or <span class="math-container">\$1\$</span>.</p>
<pre class="lang-javascript prettyprint-override"><code>l=&gt;a=&gt;!a.some(x=&gt;x&gt;(j--,++l&gt;30?9:l+(2&lt;&lt;l/25)&gt;&gt;2),j=l&lt;12?l:l&gt;16?14:l+11&gt;&gt;1)&amp;!~j
</code></pre>
<p><a href="https://tio.run/##jY9BDoIwEEX3nqJuTBsKOIUSNXQ4iHHRKBjJSA2gceXVEcQYdWFM3vL9l5nSXmyzrQ@n1q/cLu8K05FBa3Bqg8Ydc341eEVe@r70PMJoni1X5HGVphQqLRCVkKWhFFRGK0JIMoh7AQARxGx6K7utqxpHeUBuzwsOgq9BMtgIwcKQtfU5n3wai6chmZIseqCfdmGp@db1Sx8XI9GPBQw39NX4Df1J0vNH4UfkrTD82N0B" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h2>Test code</h2>
<p>Below is a link to some test code that takes the sorcerer level as input and returns an array of maximum spell levels, using the same logic as the above function.</p>
<p><a href="https://tio.run/##LY7NCsIwEITvfYq5NUs0NvEH1Lbi3ZtHEQnaiiUmJZaCT1@36mF3Z2eWj21sb1/X@Gi7qQ@3ahhqFBBugoanQw5tsGOx4SqhV7zoxXeT0Bole4SiTICTUmofo32LZszozJ562lZcfjkg5ciYZ8xY/xHCIM9ZzWCWNNIMX1KS1CEKzx/oLTzyAiZjISVxeg3@FVylXLiL9FD1lUM6kjy3dJOSau3t2NnYiTlNUAtPNAwf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h2>How?</h2>
<h3>Reference table</h3>
<pre><code> Sorcerer level | # of spells | Maximum spell levels          
----------------+-------------+-------------------------------
        1       |      2      | 1,1                           
        2       |      3      | 1,1,1                         
        3       |      4      | 1,1,2,2                       
        4       |      5      | 1,2,2,2,2                     
        5       |      6      | 2,2,2,2,3,3                   
        6       |      7      | 2,2,2,3,3,3,3                 
        7       |      8      | 2,2,3,3,3,3,4,4               
        8       |      9      | 2,3,3,3,3,4,4,4,4             
        9       |     10      | 3,3,3,3,4,4,4,4,5,5           
       10       |     11      | 3,3,3,4,4,4,4,5,5,5,5         
       11       |     12      | 3,3,4,4,4,4,5,5,5,5,6,6       
       12       |     12      | 3,4,4,4,4,5,5,5,5,6,6,6       
       13       |     13      | 4,4,4,4,5,5,5,5,6,6,6,7,7     
       14       |     13      | 4,4,4,5,5,5,5,6,6,6,7,7,7     
       15       |     14      | 4,4,5,5,5,5,6,6,6,7,7,7,8,8   
       16       |     14      | 4,5,5,5,5,6,6,6,7,7,7,8,8,8   
       17       |     15      | 5,5,5,5,6,6,6,7,7,7,8,8,8,9,9 
       18       |     15      | 5,5,5,6,6,6,7,7,7,8,8,8,9,9,9 
       19       |     15      | 5,5,6,6,6,7,7,7,8,8,8,9,9,9,9 
       20       |     15      | 5,6,6,6,7,7,7,8,8,8,9,9,9,9,9 
</code></pre>
<h3>Number of spells</h3>
<p>For a sorcerer of level <span class="math-container">\$L\$</span>, the number of spells <span class="math-container">\$N_L\$</span> is given by:</p>
<p><span class="math-container">$$N_L=\begin{cases}
L+1&amp;\text{if }L&lt;12\\
\lfloor(L+13)/2\rfloor&amp;\text{if }12\le L\le 16\\
15&amp;\text{if }L&gt;16
\end{cases}$$</span></p>
<p>In the code, the variable <span class="math-container">\$j\$</span> is initialized to <span class="math-container">\$N_L-1\$</span> and decremented at each iteration while walking through the input array. Therefore, we expect it to be equal to <span class="math-container">\$-1\$</span> at the end of the process.</p>
<h3>Maximum spell levels</h3>
<p>Given a sorcerer level <span class="math-container">\$L\$</span> and a spell index <span class="math-container">\$1\le i \le N_L\$</span>, the maximum level <span class="math-container">\$M_{L,i}\$</span> of the <span class="math-container">\$i\$</span>-th spell is given by:</p>
<p><span class="math-container">$$M_{L,i}=\begin{cases}
\lfloor(L+i+2)/4\rfloor&amp;\text{if }L+i&lt;25\\
\lfloor(L+i+4)/4\rfloor&amp;\text{if }25\le L+i\le 30\\
9&amp;\text{if }L+i&gt;30
\end{cases}$$</span></p>
<p>Each value <span class="math-container">\$x\$</span> of the input array <span class="math-container">\$a\$</span> is compared with this upper bound.</p>
</div>
<div id="pu3" class="pu"><h1><a href="http://groovy-lang.org/" rel="nofollow noreferrer">Groovy</a>, 155 bytes</h1>

<pre><code>def f(int[]a, int b){l=[1]
b.times{n-&gt;l[0]=++n%2?n/2+1:n/2
if(n&lt;18&amp;(n&lt;12|n%2&gt;0))l.add(l[0])
l.sort()}
for(i=0;i&lt;a.size();)if(a[i]&gt;l[i++])return false
true}
</code></pre>

<p>Generates the best possible spellbook, then checks that the spellbook passed into the method is not better.</p>

<p>Ungolfed, with implicit types made explicit:</p>

<pre><code>boolean spellChecker(int[] a, int b) {
    // l will be our best possible spellbook
    List&lt;BigDecimal&gt; l = [1]
    b.times { n -&gt;
        n++ // iterate from 1 to b, not 0 to b-1
        l[0] = n % 2 != 0 ? n / 2 + 1 : n / 2 // update the lowest value to the best permitted
        if (n &lt; 18 &amp; (n &lt; 12 | n % 2 &gt; 0))
            l.add(l[0]) // if permitted, add another best spell
        l.sort() // ensure 0th position is always worst, ready for updating next loop
    }
    for (int i = 0; i &lt; a.size(); i++)
        if (a[i] &gt; l[i]) // if the submitted spell is of a higher level
            return false // also rejects when l[i] is undefined. (too many spells)
    return true
}
</code></pre>

<p><a href="https://tio.run/##rVPLcoIwFN3nK66LtmSgKFjU1ken/9AdwyJKsMzE4CSRjrV@uw0PLdjouOjcM2Eg555z8mApsizfHg4xTSCxUq7CiDignzDHOzYNvQjNXZWuqNzxxxkLe9HUtvmd/8q7vu296BGlicUn3ui@GP1vPTfrYcxcEsdWwceIuTITysJ7lGTCSqe9cTohrky/qIXHWLeTMI20dmrbERZUbQSHhDBJkRIbuj@gMhbINWVMwhRCz9GxiJRUKB26@u6AhxFqcqCAgefjNs3XONE6l3nn1F9m/y/zgvc5s1/CaN83LaeKcOx7ciAwtY4wdLvwBozmlMEIFoQ/KNAvAj5IToEsFlRKUBmQmhNUu@tesSxcTWZByyyozc58hvXpNfWrBZwQtDHQMNl5Xun3nmWwInxb6cJmvRQkptK90WBwZtDQ982HeQXGmH4Zk2fA6WcdkihgOdNTzZCBMyhrWNaorOdjmW5vD9/a3ejvtASKZKq1gbKh@T@KpyNBqPqlDz8" rel="nofollow noreferrer" title="Groovy – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 98 bytes</h1>

<pre><code>v=lambda L,S:(max(S)*2-2&lt;L)&amp;v(L-1,[1]+sorted(S)[:(chr(L*3)in'$*069&lt;')-2])if L&gt;1else(1,1)==tuple(S)
</code></pre>

<p><a href="https://tio.run/##hY7LCoMwEEX3/YpAS01sBBMfraJddpWd3YkLW1MUfBGjtF9vQ8RFQSh3ZjP33JnpP7LsWmeep7jOm0eRA4aTEDb5GybIpBaNGDpOkFkEpyQ7DZ2QvFBWGsJnKSAzHVS1xsG0/SAykEUzVL0AuxJeDxwSTFAcy7GvuYrMvahaCSc1BqlqkiEE9uAuRr5bLW@xqC4XA29hbrla9wMthKNLce4WR20FetjXOmtdtIJVGx/okP8/pE/NXw" rel="nofollow noreferrer">Try it Online!</a></p>

<p>Ungolfed:</p>

<pre><code>def v(L, S):
    # recursion base case
    if L &lt;= 1:
        return tuple(S) == (1, 1)
    # if the highest level skill is not valid for the level, then return False.
    if max(S)*2 - 2 &lt; L:
        return False
    # hacky way to determine if the level gets a new skill
    has_new_skill = chr(L*3) in '$*069&lt;'
    sorted_skills = sorted(S)
    # this step removes the highest skill and adds a level 1 skill (replacement)
    # if there is a new skill, then it removes the second highest skill as well
    new_skills = [1] + sorted_skills[:has_new_skill - 2]
    return v(L-1, new_skills)
</code></pre>

<p><em>edit: corrected solution to use correct D&amp;D rules</em></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 51 bytes</h1>

<pre><code>Ｎθ≔⁺✂⭆”)⊟⊞&lt;⁴H”×ＩκＩιθ⎇‹θ¹²⊕⊗θ⁺⁶⁺θ⊘⁺‹θ¹⁹θ¹0θ¬ΣＥＳ›ι§θκ
</code></pre>

<p><a href="https://tio.run/##PU/bCsIwDH3fV4w9pTDBbU6QPYmCDlSE@QN1Bi12netF9OtrVsVAyO3k5KS9cd32XHpfq4ezB9edUcPAqmhpjLgqOEpnoJGiRWisFuq65w9IpuWMrCiKMknjk@jQwIobC3eWxiERjFE60BC14voNOzQGqM5y6teq1dihsniBde/OkuIwLoRr818k9JbLJ81C@WdYjMyMhQsZeTJNQqeKjiTQwqG30LgORqXhq69wINBGI7f0oEjjpa3VBV8j4z2Qscr7MsryfFb6yVN@AA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes spell levels in ascending order as a string. Explanation:</p>

<pre><code>Ｎθ
</code></pre>

<p>Input the level.</p>

<pre><code>≔⁺✂⭆”)⊟⊞&lt;⁴H”×ＩκＩιθ⎇‹θ¹²⊕⊗θ⁺⁶⁺θ⊘⁺‹θ¹⁹θ¹0θ
</code></pre>

<p>Perform run-length decoding on the string <code>0544443335</code> resulting in the string <code>11111222233334444555566677788899999</code>. This string is then sliced starting at the level (1-indexed) and ending at the doubled level (if less than 12) or 6+1.5*, rounded up, except for level 19, which is rounded down. A <code>0</code> is suffixed to ensure that there are not too many spells.</p>

<pre><code>¬ΣＥＳ›ι§θκ
</code></pre>

<p>Compare the spell levels against the substring and prints a <code>-</code> if none of them are excessive.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/172488/">172488</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




