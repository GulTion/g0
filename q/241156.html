<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::241156</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>005</td><td>Nekomata</td><td>231019T115045Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/266105#266105">alephalp</a></td></tr>
<tr d-ix="1"><td>043</td><td>Charcoal</td><td>220117T100258Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241175#241175">Neil</a></td></tr>
<tr d-ix="2"><td>054</td><td>JavaScript ES6</td><td>220117T015439Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241157#241157">emanresu</a></td></tr>
<tr d-ix="3"><td>054</td><td>Ruby</td><td>220117T194359Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241202#241202">AZTECCO</a></td></tr>
<tr d-ix="4"><td>022</td><td>Haskell + hgl</td><td>220117T101602Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241177#241177">Wheat Wi</a></td></tr>
<tr d-ix="5"><td>078</td><td>R</td><td>220117T223250Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241207#241207">Dominic </a></td></tr>
<tr d-ix="6"><td>107</td><td>Python3</td><td>220117T023116Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241160#241160">Ajax1234</a></td></tr>
<tr d-ix="7"><td>018</td><td>05AB1E</td><td>220117T145339Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241191#241191">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>014</td><td>Jelly</td><td>220117T140412Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241187#241187">Jonathan</a></td></tr>
<tr d-ix="9"><td>023</td><td>Python/NumPy</td><td>220117T055249Z</td><td><a href="https://codegolf.stackexchange.com/questions/241156/array-depth-of-a-ragged-list/241165#241165">loopy wa</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/AlephAlpha/Nekomata" rel="nofollow noreferrer">Nekomata</a>, 5 bytes</h1>
<pre><code>Uˡ{Ťj
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70iLzU7PzexJHFZtJJurlLsgqWlJWm6FstDTy-sProka0lxUnIxVGzBLUaOaMNYrmhDHQUjHQVjIAvOBLKNdRQgOBYkAJUHqgAyjWKhciaxsbHI2kBCOgqmOgpmSMJAE6AS0aYghhkQmyNphBoG0giVNtdRsNBRsASrgCgBSYAVgRgQ86Hao6GSUFuiIW6C6IxFSGPqBQPjWAiAhAgA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<pre><code>Uˡ{Ťj
U       Wrap the input in a singleton list
 ˡ{     Loop until failure, and return the number of iterations:
   Ť        Transpose; fails if it is not a rectangular 2D array
    j       Join
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 43 bytes</h1>
<pre><code>Ｗ⁼⌊ＥθＬ⁺⟦⟧κ∨⌈ＥθＬ⁺⟦⟧κω«≔⟦⟧ζＦθＦκ⊞ζλ≔ζθ⊞υω»Ｉ⊕Ｌυ
</code></pre>
<p><a href="https://tio.run/##jU09D4IwFJzhV7zxNamDnwuTMQ4mEtkJQ4MVGkqRlorB@NtrS/gB3nDvXe5yV9ZMlx2Tzo21kBzw3FsmDaZCida2mLIn9hSuXFVDjZm0BvOCQkM8KNy0D7z/CI6e4RNHR2NEpWZnIkkcPToN2BOYb0Mgs6bGiYIM5hL2sg9y9mzoSuJvnGmhBjwxM@BFlZq3XA38jsu@DbOJc7nH2o/lmyJwvqWwC8@ewqHwcKuX/AE" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｗ⁼⌊ＥθＬ⁺⟦⟧κ∨⌈ＥθＬ⁺⟦⟧κω«
</code></pre>
<p>Convert any numbers in the array to empty lists by vectorised adding them to the empty list (this leaves arrays unchanged). Compare their minimum and maximum length, unless the maximum length is <code>0</code> i.e. if the array only contains integers. Repeat while all arrays have the same length.</p>
<pre><code>≔⟦⟧ζＦθＦκ⊞ζλ≔ζθ
</code></pre>
<p>Flatten the array.</p>
<pre><code>⊞υω
</code></pre>
<p>Keep track of the number of loops.</p>
<pre><code>»Ｉ⊕Ｌυ
</code></pre>
<p>Output the final depth.</p>
<p>33 bytes using the newer version of Charcoal on ATO:</p>
<pre><code>Ｗ⁼⌊ＥθＬ⁺⟦⟧κ∨⌈ＥθＬ⁺⟦⟧κω«≔Σθθ⊞υω»Ｉ⊕Ｌυ
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=jY69CsIwFIXn9ilCpyukQ_1D6CTiIFgsOIYOscY2mEbbJFYQn8TFQUHwiXwbE6i7Z_i4XM45995eeUmb_EDF_f40ehdOPu-25IIhmNeGCgUJl7wyFST0CDVGSyYLXUIqjAKSYbTvWWG0aqzh_IextUQX35sqxQsJaxuo7bruxb6XGlWCcZ7Yv_ppw6WGGVUaFjJvWMWkZlvoeo2rix9qk6vf4xEJwpMIMApC7kisInuZ9DNHMsBo6IYRRuPMKsi65Bc" rel="nofollow noreferrer" title="Charcoal – Attempt This Online">Attempt This Online!</a> Link is to verbose version of code.</p>
</div>
<div id="pu2" class="pu"><h1>JavaScript (ES6), 54 bytes</h1>
<pre class="lang-js prettyprint-override"><code>f=a=&gt;a.some(n=&gt;+n.length!=a[0].length)?1:f(a.flat())+1
</code></pre>
<p>A quite simple approach: check if all elements are the same length, increment a counter if they are and repeat with the list flattened by one level, then return the counter.</p>
<p>-3 bytes thanks to tsh. -1 more thanks to l4m2.</p>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=a=&gt;a.some(n=&gt;+n.length!=a[0].length)?1:f(a.flat())+1

console.log(f([[[[1,2],[3,4]]]]))
console.log(f([[[[[[3, []]]]]]]))
console.log(f([[1, 2], [3, 4, 5], [6, 7, 8, 9]]))
console.log(f([[[1, 2]], [[3, 4], [5, 6]]]))</code></pre>
</div>
</div>
</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>75</s>...... 54 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;a{a.map(&amp;:size).uniq.one?&amp;&amp;a.flatten!(1)?1+f[a]:1}
</code></pre>
<p><a href="https://tio.run/##fZDdCoJAEIXve4qJQJTGpdVSC6oHGfZiCwXB7P@iome3Wd3CyroY9uec@c7sHs6rS1Vlc3@hb1ps9M51Zsf8mnriXOZ7sS3TpeNokRX6dErLviu9pRxmpNVM3qsdZGKti8IlqbwB@AuQvdYdQoAQGuVTemlPMWiJIUJTyjh@EZjBWqCseazUCxZ2JRkPwgQh6gy1Pg61TpqYTcQVt9BfLTbfoK0/RkgQpqp76rrHOOsus2lG@vVLZN12MGoe2jlO/SH0l/7upwbbBsYV0Qg5mB/GDA5DYkbES4wJn6bqAQ" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1>Haskell + <a href="https://gitlab.com/WheatWizard/haskell-golfing-library" rel="nofollow noreferrer">hgl</a>, 22 bytes</h1>
<pre><code>l&lt;itr(K**l$rH lp)&lt;pM[]
</code></pre>
<p>Takes input as a free monad of lists (<code>Free List a</code>).</p>
<h2>Explanation</h2>
<p>Our strategy here is to calculate the &quot;shape&quot; of the array first and then derive its depth from that.  We represent a shape as a list of sizes.</p>
<p>We are going to use a recursive strategy.  Our base case is a terminal element which has shape <code>[]</code> and our inductive case is a list. If we have the shape of every element of a list then we know its shape is longest common prefix of all their shapes and add its own length to the front.</p>
<p>With that <code>itr x&lt;pM y</code> will let us do this recursion.  We already said <code>y</code> was <code>[]</code> so that's easy.  Now we just need the other function.</p>
<p><code>lp</code> gets the longest common prefix of two lists so <code>rH lp</code> gets the longest common prefix of a list of lists.  We add <code>K**l</code> to put its own length on the front.</p>
<p>So our result is</p>
<pre><code>itr(K**l$rH lp)&lt;pM[]
</code></pre>
<p>which gets the shape of a array.  But we need the <em>depth</em> so we add an extra <code>l&lt;</code> to get the length of the shape.</p>
<h2>Reflections</h2>
<ul>
<li>On my dev branch I've already made a alias for <code>(**)K</code>.  This would have come in use on this challenge here as well.  It would have saved 2 bytes <code>l&lt;itr(l*:*rH lp)&lt;pM[]</code></li>
<li>This is not the first time I've used <code>itr</code> and <code>pM</code> together in this way.  When we only care about the shape of a free it's very useful to first replace all the elements and then iterate.  This should have it's own name.  It would have saved <s>3</s> 4 bytes: <code>l&lt;shp(K**l$rH lp)i</code> (an extra byte is saved because <code>[]</code> can be replaced with <code>i</code> to save a byte whereas in the original <code>i</code> and <code>[]</code> are the same length)</li>
</ul>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 78 bytes</h1>

<pre class="lang-r prettyprint-override"><code>f=function(r)sum(1,if(all(Map(is.list,r))&amp;!sd(lengths(c(r,r))))f(unlist(r,F)))
</code></pre>
<p><a href="https://tio.run/##jZHBDoIwDIbvPkWNiWmTagIo6EGP3nwGQwSUBNFscPDpkeHACQpcaFb@fvv/VRS@EP7zFISP7Lorol2Up@csvqcoSOY3tDiO0E8SPPoPjOUyiWXGgmg@lQEmYXrJrhLPKFSPKMI8VYryfCiPJhurvkUEM1jswZp0/zHYDE6P4lumdXZX5zB8V1IDI9jGLaXcphZnpTJqhDNgrx5hWDO4fW6NMe3WGK7qum64unqGkT6iEUAZMTAew4ZhS6NepELVww2wbuh8w2uragvUSvz5vN96IGOzql/o/x7twfV3DZp2vEnxAg" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1>Python3, 107 bytes:</h1>
<pre><code>f=lambda x,c=0:int in[*map(type,x)]or any(len(i)!=(c:=c or len(x[0])) for i in x)or min(1+f(i,c)for i in x)
</code></pre>
<p><a href="https://tio.run/##dZJNbsMgEIXX9Smm2RhaGsVx89NI9Ai9AEUVdbBKYmNkUOWc3gUbu95kgTTz5s03A8Lc3E@j86Np@76klai/zwI6UtDNSWkHSrOnWhjkbkaSDvOmBaFvqJIaKfxIUXGiBXgxCB3bcIyh9KnyjdBhH9VKo@y5RIoUeFHpLV2tVizj8PIOWcIyAlsC@ZTO@SBsE5YTGA8P6tLpvT7f8mh45XxsyheUoBPYEdjPwFjzwFhluxDs/TlMiMkW2QERPQcCRwJv/H@LwReqgzME47jljVh0xKFsXHYeNVyE3acMHja2z40H/4yJqk3TOhDWJfMbl6pyskUfjZYE7NqaSjmUfuoU41PycCFXoKAmOZBSnDwIa6UHlcij1r4iW1F9yV9RoQvGlPofga7Yb3Uhdzw8MW1wpU5aZ8EE4NmT@z8" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 18 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>SмΔ¼D€gË≠i¾q}€`}¾&lt;
</code></pre>
<p>Inspired by <a href="https://codegolf.stackexchange.com/a/241157/52210"><em>@emanresuA</em>'s JavaScript answer</a>.</p>
<p><a href="https://tio.run/##yy9OTMpM/f8/@MKec1MO7XF51LQm/XD3o84FmYf2FdYCeQm1h/bZ/P8fHR1tqKNgFBuroxAdbayjYAJimOoomMXGxgIA" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##S0oszvifnFiiYKeQnJ@SqpdfnJiUmapgY6Pg6u/GZa@k8KhtkoKS/f/gC3vOTTm0x@VR05r0w92POhdkHtqno3doa2EtUCQmofbQPpv/ID4XSBtXeUZmTqpCUWpiikJmHldKPpeCgn5@QYk@xHQohWahjYIKWG1e6v9ow1iuaEMdBSMdBWMgC84Eso11FCA4FiQAlQeqADKNYqFyJrGxscjaQEI6CqY6CmZIwkAToBLRpiCGGRCbI2mEGgbSCJU211Gw0FGwBKuAKAFJgBWBGBDzodqjoZJQW6IhboLojEVIY@oFA@PYWLhy3DbFcgEA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p>I initially had <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfaXL/9NzLuw5N8XlUdOa9MPdh/YC6YTaQ/ts/uvoHdr6PzraMFZHIdpQR8FIR8EYxISzQRxjGI6FyEJUQDQZwRSYxMbGougEiekomOoomCGLR0OMBMpEm4IYZkBsjqwVah5IK1TeXEfBQkfBEqIEogbMBKkCMSBWwAyIhspCLYqGOAyqNxYhj0U3GBjHxiI04LYtNhYA" rel="nofollow noreferrer">this 13-byter</a>, but unfortunately it fails for test cases like <code>[[[1,2]],[[3,4],[5,6]]]</code>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Sм           # Convert all integers to an empty string:
S            #  Convert the (implicit) input-list to a flattened list of digits
 м           #  Remove all those digits from each inner-most integer/string of
             #  the (implicit) input-list
  Δ          # Loop until the list no longer changes:
   ¼         #  Increase the counter variable by 1 (starts at 0)
   D         #  Duplicate the current list
    €g       #  Get the length of each inner item
      Ë≠i    #  If they are NOT all the same length:
         ¾   #   Push the counter variable
          q  #   And stop the program
             #   (after which this is output implicitly as result)
        }    #  Close the if-statement
         €`  #  Flatten one level down
  }¾         # After the loop: push the counter variable
    &lt;        # Decrease it by 1 (because the last two iterations were the same
             # for the loop to stop)
             # (after which this is output implicitly as result)
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 14 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<p><sup>Seems long!</sup></p>
<pre><code>¬RẎƬṖẈ€E€i0oLƲ
</code></pre>
<p>A monadic Link accepting a list that yields the &quot;array-depth&quot;.</p>
<p><strong><a href="https://tio.run/##y0rNyan8///QmqCHu/qOrXm4c9rDXR2Pmta4AnGmQb7PsU3/D7cD2f//R0cbxnLpRBvqKBjpKBiDmHA2iGOsowDBsSARmAqQJqCiWKikSWxsLIpOkJiOgqmOghmyONAQqEy0KYhhBsTmyFqh5oG0QuXNdRQsdBQsIUqiLUBqQDJgVSAGxAqYAdFQWahF0RCHQfSCHByNWzcYGMdCAFcsAA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<p>Uses the same intuition as <a href="https://codegolf.stackexchange.com/a/241157/53748">emanresu A's JavaScript answer</a></p>
<pre><code>¬RẎƬṖẈ€E€i0oLƲ - Link: list, A
¬              - logical NOT - converts all integers to zeros
 R             - range (vectorises) - converts all zeros to empty lists
   Ƭ           - collect up inputs while distinct, applying:
  Ẏ            -   tighten
    Ṗ          - pop - remove the final one
     Ẉ€        - lenth of each for each
       E€      - all-equal for each
             Ʋ - last four links as a monad, f(that):
         i0    -   first 1-indexed index of a zero (or zero)
           oL  -   logical OR with the length
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>/NumPy, 23 bytes</h1>
<p>Thx @pxeger for clarifying the legalese.</p>
<pre>from numpy import*
ndim</pre>
<p><a href="https://ato.pxeger.com/run?1=TZBfisIwEMbxNacY-5TIuNBWrS644DlCHoRVDDR_qKnSs-xLX9wr7Fn0NDZN2m1gYOabX76Z5OfXNu5idNs-andebv_OlVGga2UbkMqayi2I_pYqdJ-H-0WWJ0g_CUg0sAd1tPR0O5Yota0dZR9XW0pHE1h-QcIYAVtJ7ai3oJKhYcGofc3mPBWeSglPETKEfCjHuhcywnOEEMKrU7JjuzoTEVgJES7lExevI6wRNqNh7HWGscvXPtl0UQwWAxa9vUVkCoQtwk78b9FzvtuTPgnjpi_ikYhDeVh2HNWfXIhRLEj4qjc" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h4>Not entirely legal <a href="https://www.python.org" rel="nofollow noreferrer">Python</a>/NumPy 22 bytes</h4>
<pre>from numpy import ndim</pre>
<p><a href="https://ato.pxeger.com/run?1=TZBNasMwEIXpVqd4zUqCScF2E6eBFnoOoUWgCRFYPzhySs7SjTftEXqX9jS1LNm1YGDmzac3I318-Vs4O9v3n104rXffp9YZ2M74G7Txrg2wb9qk5s_r-1k3RxR7Bk0OzzAHz4_XQ0Pa-i5w8XDxjQ58hfULVkIw-FbbwKMF14KcSEb97929LFSkCiYLQkmopnKuR6FksiKkUFFdkgM71KXKwKNS6VK1cIk6YUPYzoa5NxjmrtzEZDtEPVlMWPaOFpmpCTvCk_rfYuRidyRjksYtXyQzkYfKtOw8ajyVUrNYs_RVfw" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Builtin (in case you haven't noticed).</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/241156/">241156</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




