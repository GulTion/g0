<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::161075</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>710</td><td>Python3</td><td>231226T205325Z</td><td><a href="https://codegolf.stackexchange.com/questions/161075/roguelike-pathfinding/268786#268786">Ajax1234</a></td></tr>
<tr d-ix="1"><td>nan</td><td></td><td>180403T183213Z</td><td><a href="https://codegolf.stackexchange.com/questions/161075/roguelike-pathfinding/161191#161191">DanielIn</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 710 bytes</h1>
<pre class="lang-py prettyprint-override"><code>E=enumerate
def F(s,c,C,O,e,M,x,y,U):
 r=[]
 for X,Y in s:e[(x,y)]=e.get((x,y),[])+[((X,Y),c)];r+=[(O+[(x,y)],X,Y,c+C*((X,Y)not in U),M,U+[(X,Y)]*C)]
 return r
def f(b):
 d,D={4:[]},[]
 for x,r in E(b):
  for y,v in E(r):d[K]=d.get(K:=[[[[4,3][v=='$'],2][v=='#'],1][v=='.'],0]['@'==v],[])+[(x,y)];D+=[(x,y)]
 C,e=[],{}
 q=[([],*d[0][0],0,set(),[])]
 while q:
  O,x,y,c,M,U=q.pop(0)
  if c==len(d[3]):return c
  o={a:[(x+X,y+Y)for X,Y in[(0,1),(0,-1),(1,0),(-1,0),(1,1),(1,-1),(-1,1),(-1,-1)]if(P:=(x+X,y+Y))in b and[]==[1 for(J,K),w in e.get((x,y),[])if(J,K)==P and w&gt;=c]]for a,b in d.items()}
  if not M&amp;{*o[4]}:C+=[c];q=F(o[3],c,1,*(P:=[O,e,{*o[4]},x,y,U]))+q+F(o[1],c,0,*P)+F(o[0],c,0,*P)
 return max(C+[0])
</code></pre>
<p><a href="https://tio.run/##lVRtT9swEP68/AqLRKvdHFbSFihBnpBa@DDE4AsSyLOmNnFLpZK0SXjpqv727pyXwiCbtki1757nufPdxelild8ncbe/SLfbM6HjxwedjnJtRXpCzmkGIQzgCjRcwgus4IYFFkmFVBaZJCm5hTsyi0kWaEmRZkpoPtU5LRyQirmSUhQxCJk6SV0h6ZVbSQFxCN1Bu1TESW5S3TA86QY1BlPtAcOTUp0/pjFJi5omdGxqiGAo1r1Aqg3UxbxAajKclYICWsFTCaUsiOSFElFR3kUgJD496Cr5JETLaSnolKaNpl@aHE1PydZpS4gnVXVTlH4yNJ0UpkUGoHEesN5YZIkomu1IYpyH0ZDhacUgUPh8P5trsjS1XRXDDE2rYskXyYJ6DOHZhIRCzHVMI9lVLKgaD5FKxHoU4JnuLazcO/Y6fEk98Bngum82Hzxc98vNhxIqmP3S2y9cNZvQ60Ds8jGc0piM4kgqIaRvhke/wgWDZzO/dy8VYw0nxLWJIM9fRKiUqWgEYyOP@CzXDxllm7In82ovP6/bieypTTDA2YXqZCnOaYJd4hR8aJtipLlmlaq8bIoxd@kanW90HrSvWeF6O3d3Ox5GL3TgIsO2mU8E2dvbs045t7iDP9yNn3VeCV7AU8esNd19TzvTt3TvLT0tFeZxaqNC7uuAg7cBPz8EjGvdYa1zbG7Ztl3yJXf0msNGzMGayni7VvRrhc0jDHUMZ1u6Lsj4mBSNsWWCsOUi7LgK49zvdHsHh0d9a8Sr1obWmO9qDSsLa4v47w363v8m4fbHJP4/JbH/lsT8M@TJj3EySiM6xO//U3UtZHsym@c6pd@SWAMZ8mwxn@W09T1uMfwoF@kszumE7mIznzHWAHea4W4z3GuGD5rhw2b4qBnuN8PHzbDv/QE3fW5/AQ" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><p>previous solutions (part of them) can be found in the footer container in the tio link (those are probably more readable)</p>

<h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>,<strike>883</strike> <strike>436</strike> <strike>411</strike> <strike>360,345</strike> 311 bytes</h1>



<pre class="lang-javascript prettyprint-override"><code>g=&gt;g.map((r,y)=&gt;[...r].map((c,x)=&gt;A+=c=="$"&amp;&amp;P(g,x,y)),A=0)|A
P=(g,x,y,m={},p={},I=i=9,M={})=&gt;{if(/[.$]/.test(c=(g[y]||0)[x])){for(;i--;)if(/^[^.@$#]$/.test(C=(g[y+~-(i/3)]||0)[x+i%3-1])){if(m[C])return
M[C]=1}for(;I--;)if(!p[(X=x+~-(I/3))+","+(Y=y+I%3-1)]&amp;&amp;P(g,X,Y,M,{...p,[x+","+y]:1}))return 1}return c=="@"}
</code></pre>

<p><a href="https://tio.run/##zVVdb9pAEHzfX3Gx3egOnw8c0kotvSiIvPCAFKUvSS1HEDCOER@WbSII0L9O92yjBAcikgqplmzt3e3M7s1q5EHnqRN3oyBMrPGk5637cu3LC1@MOiGlEZ8zeeEIISI32@nyGe7UTdmVUjO009Nr6vMZpjFelxW2rMO1zHb4SC5WPFSfpgzkd97CELGLoE/LjjDcski8OKFdzHfm7nJZYc7MZWzRn0S0FlhWjanMe@deXBq6a@TpjTTd/GPRoFxlOcwMvlQtW4ERMnIaLou8ZBqNoYWxtFcpZTOnPAkdeitniqKJFMzUuGbSOzk3m4qFudmlbvkdb/EF3j3kWEElzd0f9orl3MRe5YGS4lJbrbuTcTwZemI48Wmfti@FAGHgK0RbxOEwSNrQZlLaDOBtqkgTfUN9C4DKOwDD3wHYV8HPMOoxNkG@83ggxfMbiocDujV0AbquZ4gD6uhYxcC7ZTX0AuZsB0YXPaQ3VLYO3uZiao2FMXgAReMbW0TVvTpdFXXSP6jTDgqhQ498kkR/RbKXolyC6vlXgjTTJJiM4cg@JukD@@zsuJmf4ZWhIXN0x3quW79LpweaGgquJv3OMPY23s66eHE4FCxOyuQfTJ5EUw9WsO10gOq3Cvl1RJ0/oXIqQSCts5ppBj/PMiFupNI1cFl6OshOB5vT3aO4QSEG/6fs57Z9BNkdF2VHIT@idp741IlIC7GfEf9F@4L0y6UmNPyXASFqAiIYd4fTnhfTBtseBSEtEU7jRzyAVwNRTW31stkstnASvnBTrJyPC3tmLJfMHHBc4rCcdFibWb07KFxDqQzrvw" rel="nofollow noreferrer" title="JavaScript (Node.js) â€“ Try It Online">Try it online!</a></p>

<h1>Explantion -</h1>

<p>instead of going from the player to the cash i went from the case to the @. i think i should be faster because i know when to stop looking (reach the @) , and when you look for cash you need to always keep moving until you covered all of the spots (and the ways to get to them). so the algo is pretty simple that way - the main function 
<code>g.map((r,y)=&gt;[...r].map((c,x)=&gt;A+=c=="$"&amp;&amp;P(g,x,y)),A=0)|A</code>:
find cash -> if you found it -> start looking for the player -> if you found him -> increment A
now lets got to the path finder aka P
<code>if(/[.$]/.test(c=(g[y]||[])[x]))</code> just check if the current cell is "special" -> if so we want to return if its a player. special cases : @#(monster)</p>

<p><code>for(;i--;)
if(/^[a-zA-Z*&amp;]$/.test(C=(g[y+~-(i/3)]||0)[x+i%3-1])) -&gt; if my neighbor is a monster
{if(m[C])return false -&gt; and it already was in the previous turn - this path is not value
M[C]=1} -&gt; if not just add it to the neighbors monsters</code>
<code>for(;I--;)
if(!p[(X=x+~-(I / 3))+","+(Y=y+I%3-1)]&amp;&amp;P(g,X,Y,M,{...p,[x+","+y]:1}))return true</code> iterate neighbors again - if i wasn't already there (p is the path taken)
continue path (call P)</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/161075/">161075</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




