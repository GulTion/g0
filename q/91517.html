<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::91517</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>561</td><td>R</td><td>240408T095016Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/272408#272408">Patric</a></td></tr>
<tr d-ix="1"><td>126</td><td>Perl</td><td>160907T222254Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/92644#92644">Ton Hosp</a></td></tr>
<tr d-ix="2"><td>041</td><td>Jelly</td><td>160829T222031Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91570#91570">Dennis</a></td></tr>
<tr d-ix="3"><td>243</td><td>Haskell</td><td>160829T165519Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91553#91553">ThreeFx</a></td></tr>
<tr d-ix="4"><td>196</td><td>GNU Octave</td><td>160830T143603Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91683#91683">mathread</a></td></tr>
<tr d-ix="5"><td>768</td><td>TSQL</td><td>160830T131107Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91671#91671">t-clause</a></td></tr>
<tr d-ix="6"><td>230</td><td>Python</td><td>160829T182413Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91559#91559">Leaky Nu</a></td></tr>
<tr d-ix="7"><td>346</td><td>Python 3</td><td>160829T152202Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91546#91546">Display </a></td></tr>
<tr d-ix="8"><td>071</td><td>Pyth</td><td>160829T151958Z</td><td><a href="https://codegolf.stackexchange.com/questions/91517/highlight-the-bounding-box-part-ii-hexagonal-grid/91545#91545">Leaky Nu</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, 561 bytes</h1>
<pre class="lang-r prettyprint-override"><code>\(x){h=which;'?'=unlist;M=max;m=min;R=&quot;#&quot;;v=?Map(strsplit,x,&quot;&quot;);'!'=length;L=!x;n=nchar(x[[1]]);N=L+n;o=grep(R,x);r=?Map(\(y)1:n+(y-1)*n,m(o):M(o));w=u=a=b={};for(j in 1:L){q=rep(&quot; &quot;,L-j);p=rep(&quot; &quot;,j);g=v[(j*n-n+1):(j*n)];w=c(w,q,g,p);u=c(u,p,g,q)};e=\(x)(x-1)%%N+1;k=\(w)e(h(w==R));d=M(k(w)):m(k(w));c=M(k(u)):m(k(u));for(j in 1:!w){q=\(w,d){if(w[j]==&quot;.&quot;&amp;&amp;e(j)%in%d)w[[j]]=R;w};w=q(w,d);u=q(u,c)};for(j in 1:L){a=c(a,w[(j*N+1-j-n):(j*N-j)]);b=c(b,u[((j-1)*N+1+j):((j-1)*N+n+j)])};v[r[r%in%h(a==R&amp;b==R)]]=R;Map(\(j)paste0(v[((j-1)*n+1):(j*n)],collapse=&quot;&quot;),1:L)}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=tVTNbtpAEJbaG8c-gbMrwk5Yo9JTxWqUcyWgEkpPDgfjGGwHFuMf7AjxJL2klfpSfZrO2g5xEkXpodXKnp35Zr_9Zv--_0jufy7xV54t7c-_3326FiUcAiyC0AtU77KHuV6HaaYmuHFLtcFNqNUMGWdqj5cTNxZplqTxOsxkKRkD1Tvr4drXqyxQYzwrlUbtBW4iSscZzuegpjjua7XFVeLHYiZLUEnNcy3uYDjSfXFnD-FCy43YwmhCP1AF5ujiAg9HtdwmIrJCbQ1HYzjs0LAwi0k76o9BxSc_ArXCvSOiC23r_hBGpgdzovJEIXdyJWNQOTm5jMnZwVH5aGoXJU3f7U77Q3VLgQJ8EYgCcUY6bnAibikEo01tlVdF8iZCti3wrDAKiUPewCFcisKJ5ohswM7PfRFBN9TdGygcis5xpoojidtVySRsR8I8eF6vS4JdWZiySKAd2boqbGpHQEu7IHQhc0eIyCwhZfQjwh883TdZR7V3EicxkwfCpbrOF6a4SkK9DRHEbpr5H8X-gam1gNLbrtdunPpImy2NqGNzdN5_4FeBb2V-mlmem_ppp0RzckSn-tOJAdl0rQE1Jhknw8nWfhvmBjbRgYH5U5jXo09wlf4C5q_ADfkr8OCJpIe0E9waddLwWFjHsmpVrcakiVZd3nwVxRu5p8zW7H9B39h_T8_b4ef0_CX94H_S8zfo-Wv0_Dn9I9ML9c3OQ6fjYn0xNBhbJGHmj0Ptp9IT7Mt0xKSml0-yr9-uqL-kNPMQAj1tnfpq3N_X9g8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><strong>Input</strong>: a list of strings</p>
<p><strong>Output</strong>: a list of strings</p>
<p>I have no idea why this has to be sooo huge. Well, the task itself was quite challenging. I could save ~50 bytes outputting an array of characters instead of a list of strings, but that would break the challenge rules.</p>
<p>My first approach was to assign 3 coordinates to every element of the matrix, namely rows <code>===</code>, and two diagonal columns <code>\\\</code> and <code>///</code>. Finding the row number of an element was too easy, while to get the diagonal columns indices it took some effort.
<a href="https://i.stack.imgur.com/8xwWo.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/8xwWo.png" alt="enter image description here" /></a></p>
<p><strong>Figure 1.</strong></p>
<p>Having all three coordinates (indices) of every <code>#</code> one should merely find the maxima and minima of <code>#</code>s in each coordinate and reconstruct the matrix where all the elements within the obtained minima to maxima become or stay <code>#</code>.</p>
<p>In the example above (Fig. 1) there are following extrema:</p>
<pre><code>ROWS: min=2, max=4;
Column BLUE: min=3, max=6;
Column ORANGE: min=3, max=7 
</code></pre>
<p>Or, graphically:</p>
<p><a href="https://i.stack.imgur.com/food9.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/food9.png" alt="enter image description here" /></a></p>
<p><strong>Figure 2.</strong></p>
<p>Indeed, this is the right solution.
I have managed to calculate the indices of <code>\</code>-column. The other one was more tricky. Yet another problem was to deal with both types of matrices - those which begin with a space and the other ones with a first dot/hash sign.</p>
<p>I have finished by writing some code which only worked on the test examples 2 to 4. :(</p>
<p>Then the answer from <a href="https://codegolf.stackexchange.com/a/91570/122450">Dennis, (2016)</a> has prompted me to try and to figure the indices in another way: adding spaces to the beginning and to the end of each row in such way that the columns will become perpendicular to the rows - once for <code>\</code>- and once for <code>/</code>-columns, of course.</p>
<p>This strategy is implemented in the above code snippet.</p>
</div>
<div id="pu1" class="pu"><h1>Perl, <s>128</s> 126 bytes</h1>

<p>Includes +6 for <code>-0F\n</code></p>

<p>Run with input on STDIN. Use <code>1</code> for filled, <code>0</code> for empty.
Lines do not have to be padded with spaces at the end:</p>

<pre><code>perl -M5.010 hexafill.pl
 0 0 0 0 0 0 0 0
0 0 1 1 1 1 0 0 
 0 1 1 1 1 1 0 0
0 0 1 1 1 1 1 0 
 0 0 1 1 1 1 0 0
0 0 0 0 0 0 0 0 
^D
</code></pre>

<p><code>hexafill.pl</code></p>

<pre><code>#!/usr/bin/perl -0F\n
$-=map{s%$=%$=^!map{/$/;grep{pos=$`;$=?$_|="!"x$`.1:!/\b.*\G./}${--$@}}@F-$-+pos,$-+pos,$-%eeg;--$-;$=||say}@F while$=--
</code></pre>

<p>Uses cube coordinates. Determine maximum and minimum during the <code>$= == 1</code> loop and fills coordinates between these bounds during the <code>$= == 0</code> loop. The first 58 loops are pointless and are only there to fill <code>$-</code> with the number of lines</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow">Jelly</a>, <s>45</s> <s>35<sub>13</sub></s> <s>42</s> 41 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow">bytes</a></h1>

<pre><code>Ṁ€»\
ṚÇṚ«Çṁ"
ŒDṙZL$ÇṙL’$ŒḌ«Ç
ṚÇṚ«Ç
n⁶aÇo⁶
</code></pre>

<p>This is a list of links; the last one has to be called on the input to produce the output.</p>

<p>I/O is in form of string arrays, where <code>.</code> indicates empty and <code>@</code> indicates filled.</p>

<p><a href="http://jelly.tryitonline.net/#code=4bmA4oKswrtcCuG5msOH4bmawqvDh-G5gSIKxZJE4bmZWkwkw4fhuZlM4oCZJMWS4biMwqvDhwrhuZrDh-G5msKrw4cKbuKBtmHDh2_igbYK4bu0w4dZICAgICAgICAgICAgICDhuLcg4oCcU3BsaXQgYXQgbGluZWZlZWRzLCBjYWxsIHByZXZpb3VzIGxpbmssIGpvaW4gYXQgbGluZWZlZWRzLuKAnQ&amp;input=&amp;args=LiAuIEAKIC4gLiAKQCAuIC4" rel="nofollow">Try it online!</a> or <a href="http://jelly.tryitonline.net/#code=4bmA4oKswrtcCuG5msOH4bmawqvDh-G5gSIKxZJE4bmZWkwkw4fhuZlM4oCZJMWS4biMwqvDhwrhuZrDh-G5msKrw4cKbuKBtmHDh2_igbYK4bu0w4dZCsWT4bmj4oCcwrbCtuKAncOH4oKsauKAnMK2wrbigJ0&amp;input=&amp;args=QAoKIC4gLiAKQCAuIEAKIC4gLiAKCiAuIEAgCi4gLiAuCiBAIC4gCgogQCAuIAouIC4gLgogLiBAIAoKIEAgLiAKQCAuIC4KIC4gQCAKCiBAIEAgCkAgQCBACiBAIEAgCgouIC4gLiAuIC4gLiAuIC4gCiAuIC4gQCAuIEAgLiAuIC4KLiAuIC4gLiAuIC4gLiAuIAogLiAuIC4gQCAuIC4gLiAuCgouIC4gLiAuIC4gLiAuIC4gCiAuIC4gQCAuIC4gLiBAIC4KLiAuIC4gLiAuIC4gLiAuIAogLiAuIC4gQCAuIC4gLiAuCgouIC4gLiAuIC4gLiAuIC4gCiAuIEAgLiAuIC4gLiAuIC4KLiAuIC4gLiAuIEAgLiAuIAogLiAuIC4gLiAuIC4gLiAuCgouIC4gLiAuIC4gLiAuIC4gCiAuIEAgLiAuIC4gLiAuIC4KLiAuIC4gLiAuIEAgLiAuIAogLiAuIEAgLiAuIC4gLiAuCgouIC4gQCAuIEAgLiAuIC4gCiAuIEAgLiAuIC4gQCAuIC4KLiAuIC4gQCAuIEAgQCAuIAogLiAuIEAgLiAuIEAgLiAu" rel="nofollow">verify all test cases</a>.</p>

<h3>Background</h3>

<p>Let's consider the following example.</p>

<pre><code>. . . . . . . . 
 . @ . . . . . .
. . . . . @ . . 
 . . @ . . . . .
</code></pre>

<p>By drawing a pair or parallel lines &ndash; the closest pair that encloses all filled positions &ndash; in each of the three directions, we can determine the hexagonal bounding box.</p>

<p>In the implementation, we replace all characters between those two lines with <code>@</code>, and everything outside these lines with <code>.</code>, with the possible exception of diagonals that only contains spaces).</p>

<p>For the horizontal axis, this gives</p>

<pre><code>................
@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@
</code></pre>

<p>for the falling diagonal axis, it gives</p>

<pre><code>..@@@@@@@......
...@@@@@@@......
....@@@@@@@.....
 ....@@@@@@@....
</code></pre>

<p>and for the raising diagonal axis, it gives</p>

<pre><code>....@@@@@@@@@...
...@@@@@@@@@....
..@@@@@@@@@....
.@@@@@@@@@.... .
</code></pre>

<p>By taking the character-wise minimum of all three, since <code>.</code> &lt; <code>@</code>, we get</p>

<pre><code>...............
...@@@@@@@......
....@@@@@@@....
 ....@@@@@.... .
</code></pre>

<p>All that's left to do is restoring the spaces.</p>

<h3>How it works</h3>

<pre><code>n⁶aÇo⁶           Main link. Argument: A (array of strings)

n⁶               Not-equal space; yield 0 for spaces, 1 otherwise.
  aÇ             Take the logical AND with the result the 4th helper link.
                 This will replace 1's (corresponding to non-space characters) with
                 the corresponding character that result from calling the link.
    o⁶           Logical OR with space; replaces the 0's with spaces.
</code></pre>



<pre><code>ṚÇṚ«Ç            4th helper link. Argument: A

Ṛ                Reverse the order of the strings in A.
 Ç               Call the 3rd helper link.
  Ṛ              Reverse the order of the strings in the resulting array.
    Ç            Call the 3rd helper link with argument A (unmodified).
   «             Take the character-wise minimum of both results.
</code></pre>



<pre><code>ŒDṙZL$ÇṙL’$ŒḌ«Ç  3rd helper link. Argument: L (array of strings)

ŒD               Yield all falling diagonals of L. This is a reversible operation,
                 so it begins with the main diagonal.
   ZL$           Yield the length of the transpose (number of columns).
  ṙ              Shift the array of diagonals that many units to the left.
                 This puts the diagonals in their natural order.
      Ç          Call the helper link on the result.
        L’$      Yield the decremented length (number of columns) of L.
       ṙ         Shift the result that many units to the left.
                 This puts the changed diagonals in their original order.
           ŒḌ    Undiagonal; reconstruct the string array.
              Ç  Call the 2nd helper link with argument L (unmodified).
             «   Take the character-wise minimum of both results.
</code></pre>



<pre><code>ṚÇṚ«Çṁ"          2nd helper link. Argument: M (array)

Ṛ                Reverse the rows of M.
 Ç               Call the 1st helper link on the result.
  Ṛ              Reverse the rows of the result.
    Ç            Call the 1nd helper link with argument M (unmodified).
   «             Take the minimum of both results.
     ṁ"          Mold zipwith; repeat each character in the result to the left
                 as many times as needed to fill the corresponding row of M.
</code></pre>



<pre><code>Ṁ€»\             1st helper link. Argument: N (array)

Ṁ€               Take the maximum of each row of N.
  »\             Take the cumulative maxima of the resulting characters.
</code></pre>
</div>
<div id="pu3" class="pu"><h2>Haskell, <s>256 254</s> 243 bytes</h2>



<pre class="lang-haskell prettyprint-override"><code>import Data.List
f=z(\l-&gt;(,).(,))[0..]l)[0..]
q l=m(m(\e-&gt;min(snd e).(".#"!!).fromEnum.and.z($)(m(\x y-&gt;y&gt;=minimum x&amp;&amp;y&lt;=maximum x).transpose.m b.filter((==)'#'.snd).concat$l)$b e))l
b=(m uncurry[const,(-),(+)]&lt;*&gt;).pure.fst
z=zipWith
m=map
q.f
</code></pre>

<p>Thanks @Damien for golfing <code>f</code>!</p>

<p>Input is taken as list of list of chars, output is provided the same way.</p>

<p>Soo this was a beast to write. It's based on LeakyNun's idea using a maximum and minimum based filtering on the coordinates of the items.</p>

<p>I'm really surprised by the fact that <code>m=map</code> actually saves bytes since it seems so costly.</p>

<hr>

<p>Explanation:</p>

<p>Here's a slightly less butchered version (emphasis on <em>slightly</em>):</p>

<pre class="lang-haskell prettyprint-override"><code>import Data.List
f=zipWith(\y l-&gt;zipWith(\x e-&gt;((y,x),e))[0..]l)[0..]
p=map(\x y-&gt;y&gt;=minimum x&amp;&amp;y&lt;=maximum x).transpose.map b.filter((==)'#'.snd).concat
q l=map(map(\e-&gt;min(snd e).(".#"!!).fromEnum.and.zipWith($)(p$l)$b e))l
b=(map uncurry[const,(-),(+)]&lt;*&gt;).pure.fst
</code></pre>

<ul>
<li><p><code>f</code> is a function which assigns each char an index <code>(y-index, x-index)</code> while preserving the original structure of the list.</p></li>
<li><p><code>b</code>: Given an item of the indexed list, <code>b</code> computes <code>[y-index, y - x, y + x]</code>.</p></li>
<li><p><code>p</code>: Given the indexed field, return 3 functions <code>Int -&gt; Bool</code>, the first of which is the check of the y-index, the second of the difference and the third of the sum. <code>min(snd e)</code> takes care of the spaces (a space is smaller than both). This function is inlined in the golfed code.</p></li>
<li><p><code>q</code> given the indexed field, change all necessary <code>.</code> to <code>#</code> by checking if that specific field return <code>True</code> to every test function.</p></li>
</ul>

<p>The final solution is then the composition of <code>q</code> and <code>f</code>.</p>
</div>
<div id="pu4" class="pu"><h1>GNU Octave, <s>212</s>, 196 bytes</h1>

<p>Maybe not really a golfer's favourite choice language, but that's what makes the challenge, isn't it? Assuming m is taken as a char matrix: <strong>178 bytes</strong> stand alone and <strong>196 if stuffed into a function</strong>.</p>

<p>golfed:    </p>

<pre><code>function k=f(m)[a,b]=size(m);[y,x]=ndgrid(1:a,1:b);t={y,y+x,x-y};k=m;s=x&gt;0;for j=1:3l{j}=unique(sort(vec(t{j}.*(m==['#']))))([2,end]);s&amp;=(l{j}(1)&lt;=t{j})&amp;(l{j}(2)&gt;=t{j});endk(s&amp;mod(x+y,2))=['#']end
</code></pre>

<p>ungolfed:</p>

<pre><code>function k=f(m)
[a,b]=size(m);[y,x]=ndgrid(1:a,1:b);t={y,y+x,x-y};k=m;s=x&gt;0;
for j=1:3
  l{j}=unique(sort(vec(t{j}.*(m==['#']))))([2,end]);
  s&amp;=(l{j}(1)&lt;=t{j})&amp;(l{j}(2)&gt;=t{j});
end
k(s&amp;mod(x+y,2))=['#']
end
</code></pre>

<p><strong>Explanation</strong> : we build a coordinate system, 3 axes - orthogonal to the hexagons sides, find max and min of each coordinate, then build a logical mask starting with 1 everywhere and logically and:ing each coordinate max and min constraint, finally re-setting each remaining "true" position to "#" char.</p>

<p>If you want to test it, you can just create m matrix like this:</p>

<pre><code>m = [' . . . . . . . .. . . . # . . .  . # . . . # . .. . . # . . . .  . . . . . # . .. . . . . . . . ']; m = reshape(m,[numel(m)/6,6])';
</code></pre>

<p>and then call the f(m) and compare with m by building a matrix with both of them in:</p>

<pre><code>['     before           after      ';m,ones(6,1)*'|',f(m)]
</code></pre>
</div>
<div id="pu5" class="pu"><h1>TSQL, 768 bytes</h1>
<p>I wrote a query to solve this - which I found quite difficult. It is not able to compete with all the excellent shorter answer. But wanted to post it anyway for those interested. Sorry about the length of the answer - hoping codegolf is also about different approachs.</p>
<p><strong>Golfed:</strong></p>
<pre><code>DECLARE @ varchar(max)=
'
. . . . # . . . 
 . # . . . # . .
. . . # . . . . 
 . . . . . # . .
. . . . . . . . 
'

;WITH c as(SELECT cast(0as varchar(max))a,x=0,y=1,z=0UNION ALL SELECT SUBSTRING(@,z,1),IIF(SUBSTRING(@,z,1)=CHAR(10),1,x+1),IIF(SUBSTRING(@,z,1)=CHAR(10),y+1,y),z+1FROM c WHERE LEN(@)&gt;z)SELECT @=stuff(@,z-1,1,'#')FROM c b WHERE((exists(SELECT*FROM c WHERE b.y=y and'#'=a)or exists(SELECT*FROM c WHERE b.y&lt;y and'#'=a)and exists(SELECT*FROM c WHERE b.y&gt;y and'#'=a))and a='.')and(exists(SELECT*FROM c WHERE b.x&lt;=x-ABS(y-b.y)and'#'=a)or exists(SELECT*FROM c WHERE b.x&lt;=x+y-b.y and a='#'and b.y&lt;y)and exists(SELECT*FROM c WHERE b.x&lt;=x+b.y-y and a='#'and b.y&gt;y))and(exists(SELECT*FROM c WHERE b.x&gt;=x+ABS(y-b.y)and'#'=a)or exists(SELECT*FROM c WHERE b.x&gt;=x-y+b.y and b.y&lt;y and'#'=a)and exists(SELECT*FROM c WHERE b.x&gt;=x-b.y+y and a='#'and b.y&gt;y))OPTION(MAXRECURSION 0)PRINT @
</code></pre>
<p><strong>Ungolfed:</strong></p>
<pre><code>DECLARE @ varchar(max)=
'
. . . . # . . . 
 . # . . . # . .
. . . # . . . . 
 . . . . . # . .
. . . . . . . . 
'
;WITH c as
(
  SELECT 
    cast(0as varchar(max))a,x=0,y=1,z=0
  UNION ALL
  SELECT
    SUBSTRING(@,z,1),IIF(SUBSTRING(@,z,1)=CHAR(10),1,x+1),
    IIF(SUBSTRING(@,z,1)=CHAR(10),y+1,y),
    z+1
  FROM c
  WHERE LEN(@)&gt;z
)
SELECT @=stuff(@,z-1,1,'#')FROM c b
WHERE((exists(SELECT*FROM c WHERE b.y=y and'#'=a)
or exists(SELECT*FROM c WHERE b.y&lt;y and'#'=a)
and exists(SELECT*FROM c WHERE b.y&gt;y and'#'=a)
)and a='.')
and 
(exists(SELECT*FROM c WHERE b.x&lt;=x-ABS(y-b.y)and'#'=a)
or exists(SELECT*FROM c WHERE b.x&lt;=x+y-b.y and a='#'and b.y&lt;y)
and exists(SELECT*FROM c WHERE b.x&lt;=x+b.y-y and a='#'and b.y&gt;y))
and(exists(SELECT*FROM c WHERE b.x&gt;=x+ABS(y-b.y)and'#'=a)
or exists(SELECT*FROM c WHERE b.x&gt;=x-y+b.y and b.y&lt;y and'#'=a)
and exists(SELECT*FROM c WHERE b.x&gt;=x-b.y+y and a='#'and b.y&gt;y))
OPTION(MAXRECURSION 0) 
PRINT @
</code></pre>
<p><strong><a href="https://data.stackexchange.com/stackoverflow/query/530759/highlight-the-bounding-box-part-ii-hexagonal-grid" rel="nofollow noreferrer">Fiddle ungolfed</a></strong></p>
</div>
<div id="pu6" class="pu"><h1>Python, <s>237</s> 230 bytes</h1>

<p><strong>7 bytes thanks to Dennis.</strong></p>



<pre class="lang-python prettyprint-override"><code>def f(a):i=range(len(a[0]));j=range(len(a));b,c,d=map(sorted,zip(*[[x,x+y,x-y]for y in i for x in j if"?"&lt;a[x][y]]));return[[[a[x][y],"#"][(a[x][y]&gt;" ")*(b[0]&lt;=x&lt;=b[-1])*(c[0]&lt;=x+y&lt;=c[-1])*(d[0]&lt;=x-y&lt;=d[-1])]for y in i]for x in j]
</code></pre>

<p>Port of <a href="https://codegolf.stackexchange.com/a/91545/48934">my answer in Pyth</a>.</p>

<p>Takes array of lines as input, outputs 2D array of characters.</p>

<ul>
<li>Python 2: <a href="http://ideone.com/FMoB1y" rel="nofollow noreferrer">Ideone it!</a></li>
<li>Python 3: <a href="http://ideone.com/fIlW3a" rel="nofollow noreferrer">Ideone it!</a></li>
</ul>
</div>
<div id="pu7" class="pu"><h1>Python 3, <s>380</s> <s>378</s> <s>348</s> 346 bytes</h1>

<p>Note that the indentation is with tabs, not spaces.  </p>

<h3>Golfed version:</h3>

<pre><code>def s(i):
    L=i.splitlines();E=enumerate;A=lambda x,y:(y,x+y,x-y);N=(2**64,)*3;X=(-2**64,)*3
    for y,l in E(L):
        for x,c in E(l):
            if c=='#':p=A(x,y);X=tuple(map(max,X,p));N=tuple(map(min,N,p))
    R=''
    for y,l in E(L):
        for x,c in E(l):
            if c!='.':R+=c
            else:p=A(x,y);f=all(N[j]&lt;=p[j]&lt;=X[j]for j in range(0,3));R+='.#'[f]
        R+='\n'
    return R
</code></pre>

<p><a href="https://ideone.com/zSrjwB" rel="nofollow">Test it on Ideone</a></p>

<h3>Explanation (for ungolfed version below):</h3>

<p>All processing is done without any conversion, space characters are simply skipped.<br>
Function <code>axes_pos</code> calculates 3-tuple of imaginary "3D" coordinates, they are accumulated into (element wise) minimum and maximum 3-tuples (<code>bmin</code>, <code>bmax</code>) for all <code>#</code> characters.   </p>

<p>Coordinates are calculated in <code>def axes_pos(x, y): return y, x + y, lc - y + x</code>;<br>
where X counts from 0 to right, and Y counts from 0 to bottom (from first line to last).<br>
First imaginary coordinate is basically Y, because it's obvious why. Its axe is orthogonal to green bounds (in the OP's pictures)<br>
Second is orthogonal to red bounds, and third is orthogonal to blue bounds.</p>

<p>In the second pass, replacement is done for all <code>.</code> characters which "3D" coordinates fall into <code>bmin</code>..<code>bmax</code> range, element wise — this is checked in this expression <code>all(bmin[j] &lt;= p[j] &lt;= bmax[j] for j in range(0, 3))</code>.</p>

<h3>Ungolfed version with tests, <a href="https://ideone.com/zb0Gkk" rel="nofollow">also on Ideone</a>:</h3>

<pre><code>def solve(i):
    ls = i.splitlines()
    lc = len(ls)

    def axes_pos(x, y):
        return y, x + y, lc - y + x

    I = 2 ** 64
    bmin = (I, I, I)
    bmax = (0, 0, 0)

    for y, line in enumerate(ls):
        for x, char in enumerate(line):
            if char != '#': continue
            p = axes_pos(x, y)
            bmax = tuple(map(max, bmax, p))
            bmin = tuple(map(min, bmin, p))

    result = ''
    for y, line in enumerate(ls):
        for x, char in enumerate(line):
            if char != '.':
                result += char
            else:
                p = axes_pos(x, y)
                f = all(bmin[j] &lt;= p[j] &lt;= bmax[j] for j in range(0, 3))
                result += '#' if f else char
        result += '\n'

    return result


def run_test(a, b):
    result = solve(a)
    if result != b:
        raise AssertionError('\n' + result + '\n\nshould be equal to\n\n' + b)


def run_tests():
    run_test(
        "#\n",

        "#\n")

    run_test(
        " . . \n"
        "# . #\n"
        " . . \n",

        " . . \n"
        "# # #\n"
        " . . \n")

    run_test(
        " . # \n"
        ". . .\n"
        " # . \n",

        " . # \n"
        ". # .\n"
        " # . \n")

    run_test(
        " # . \n"
        ". . .\n"
        " . # \n",

        " # . \n"
        ". # .\n"
        " . # \n")

    run_test(
        " # . \n"
        "# . .\n"
        " . # \n",

        " # . \n"
        "# # .\n"
        " # # \n")

    run_test(
        " . # \n"
        "# . .\n"
        " . # \n",

        " # # \n"
        "# # #\n"
        " # # \n")

    run_test(
        ". . . . . . . . \n"
        " . . # . # . . .\n"
        ". . . . . . . . \n"
        " . . . # . . . .\n",

        ". . . . . . . . \n"
        " . . # # # . . .\n"
        ". . . # # . . . \n"
        " . . . # . . . .\n")

    run_test(
        ". . . . . . . . \n"
        " . . # . . . # .\n"
        ". . . . . . . . \n"
        " . . . # . . . .\n",

        ". . . . . . . . \n"
        " . . # # # # # .\n"
        ". . . # # # # . \n"
        " . . . # # # . .\n")

    run_test(
        ". . . . . . . . \n"
        " . # . . . . . .\n"
        ". . . . . # . . \n"
        " . . . . . . . .\n",

        ". . . . . . . . \n"
        " . # # # # . . .\n"
        ". . # # # # . . \n"
        " . . . . . . . .\n")

    run_test(
        ". . . . . . . . \n"
        " . # . . . . . .\n"
        ". . . . . # . . \n"
        " . . # . . . . .\n",

        ". . . . . . . . \n"
        " . # # # # . . .\n"
        ". . # # # # . . \n"
        " . . # # # . . .\n")

    run_test(
        ". . . . # . . . \n"
        " . # . . . # . .\n"
        ". . . # . . . . \n"
        " . . . . . # . .\n",

        ". . # # # # . . \n"
        " . # # # # # . .\n"
        ". . # # # # # . \n"
        " . . # # # # . .\n")


if __name__ == '__main__':
    run_tests()
</code></pre>

Update 1:

<p>Removed unnecessary <code>-1</code> for third imaginary coordinate, because it doesn't change anything</p>

Update 2,3:

<p>Partially implemented improvements suggested by <code>Leaky Nun</code> + my own too.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://github.com/isaacg1/pyth">Pyth</a>, <s>82</s> 71 bytes</h1>

<pre>
<s>L,hbebMqH@S+GH1KhMyJs.e,Lkfq\#@bTUb.zA,ySm-FdJySsMJj.es.eXW&&gKkgG-kYgH+kYZ\.\#b.z</s>
MqH@S[hGHeG)1j.es.eXW&&ghMJs.e,Lkfq\#@bTUb.zkgSm-FdJ-kYgSsMJ+kYZ\.\#b.z
</pre>

<p><a href="http://pyth.herokuapp.com/?code=MqH%40S%5BhGHeG%291j.es.eXW%26%26ghMJs.e%2CLkfq%5C%23%40bTUb.zkgSm-FdJ-kYgSsMJ%2BkYZ%5C.%5C%23b.z&amp;input=+.+.+.+.+.+.+.+.%0A.+.+.+.+%23+.+.+.+%0A+.+%23+.+.+.+%23+.+.%0A.+.+.+%23+.+.+.+.+%0A+.+.+.+.+.+%23+.+.%0A.+.+.+.+.+.+.+.+&amp;debug=0">Try it online!</a></p>

<h3>Explanation</h3>

<ul>
<li><p>Let A be the point with the lowest y-coordinate and B the point with the highest y-coordinate.</p></li>
<li><p>Let C be the point with the lowest (x-value minus y-value) and D the point with the highest.</p></li>
<li><p>Let E be the point with the lowest (x-value plus y-value) and F the point with the highest.</p></li>
</ul>

<p>Then it is equivalent to finding the coordinates which the y-coordinate is between A and B, the x-value minus y-value is between C and D, and the x-value plus y-value is between E and F.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/91517/">91517</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




