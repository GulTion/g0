<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::275254</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>461</td><td>GNU sed E</td><td>240831T145818Z</td><td><a href="https://codegolf.stackexchange.com/questions/275254/convert-to-chomsky-normal-form/275280#275280">鳴神裁四点一号</a></td></tr>
<tr d-ix="1"><td>911</td><td>Python3</td><td>240830T173518Z</td><td><a href="https://codegolf.stackexchange.com/questions/275254/convert-to-chomsky-normal-form/275268#275268">Ajax1234</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>GNU <a href="https://www.gnu.org/software/sed/" rel="nofollow noreferrer">sed</a> <code>-E</code>, 461 bytes</h1>
<pre><code>s/^/;0,q/
:q
s/q/qq/g
t3
:3
s/(,\w+)(,\w+,\w+)(.*)/\1,q\3;q\2/
tq
:r
s/(.*)(;(q+)z)/\3\1/
Tw
:4
s/^(q+)\&gt;(.*);((\w+)(,\1(,\w+)|(,\w+),\1))\&gt;/\1\2%\3;\4\6\7/
t4
s/^(q+)\&gt;(.*);((\w+),\1)\&gt;/\1\2%\3;\4z/
t4
s/q+//
y/%/;/
tr
:w
s/;(q+,q+,\w+)/&lt;\1/g
s/(.*);(q+,q+)/\2\1/
:g
s/^((q+),(q+))\&gt;(.*);(\3(,\w+(,\w+)?))/\1;\2\6\4&lt;\5/
tg
s/^q+,q+//
y/&lt;/;/
tw
s/,(a+,)/%\1/g
s/(,q+),(a+)/\1%\2/g
s/(.*)(%a+)/q\2&amp;/
:s
s/^q(%a+)\&gt;(.*)\1\&gt;/q\1\2,q/
ts
s/^q%(a+)/;q,\1/
s/%/,/g
tq
</code></pre>
<p><a href="https://tio.run/##bVLbbtswDH3nV3joPNiLUtaXdoCVZUjT7nEv7qPQwGkKow9LwthBsKC/td/YJ80jKWVtgQKGRB6S5xxJ7h5X43a9H3CxuP1xs1ig@biC7MOTA/gKW@B96PAe7YUhhIqgQ0IibKEvoCo4TYw7jFJdfXT@OUWXGXKFJZcj9ATVThq5kNiERumRGwqXIdwdoCq5dC@om0qHTZLAl3nmZ79xnnILM7s8ZmpXuiv3hdnfn5f2N93H0EojRPiFMVoGdlAdGBNThrx9nLCxNtgNBbabi92qVS0RM7L8l3SFmvROv6VyfssjV66cuEvW0TmlUvGJiouySZqRSTE@aRqlbkQxi/nyTkaSWDC@zk/solM2hbwBPuWUi3xWeaTe12OlsWTEeccHNvJoNJxFu@YQbfb9dt/zA8NZ9H2z@9n0/eMqoOdyJejWqs5v7b1lGXo/eY6FBkWBpQZliZfYDqxFZJqGV9JYNlLotGtg9HuJNDZSOgLP8byS2Fep9ZAyCY0JZKHiQQi/MEAdjafRbHkdPUdzmEuy5PABrhWfcTybw0yShuM/v8PEvl7Vr/OmlvKy1uH6gVfNJfu72fZPm3U3jG//AQ" rel="nofollow noreferrer" title="sed – Try It Online">Try it online!</a></p>
<h2>Usage</h2>
<p>One-line input. Unary state and unary alphabet.</p>
<pre><code>Input := Rule*
Rule := &quot;;&quot; State RewriteList
State := &quot;q&quot;+
RewriteList := ( &quot;,&quot; ( State | Alphabet) )+ | Null
Alphabet:= &quot;a&quot;+
Empty := &quot;z&quot;
</code></pre>
<p>One letter state &quot;q&quot; considered to be initial state of input; the output additionally uses &quot;0&quot; to represent initial.</p>
<p>For example if you have the language</p>
<pre><code>S -&gt; AbB | C
C -&gt; b | c
B -&gt; AA | AC
A -&gt; a | ε
</code></pre>
<p>you need to translate into this:</p>
<pre><code>;q,qq,aa,qqq;q,qqqq;qqqq,aa;qqqq,aaa;qqq,qq,qq;qqq,qq,qqqq;qq,a;qqz
</code></pre>
<p>States S, A, B, C are translated into q, qq, qqq, qqqq respectively; similar for alphabets a, b, c.</p>
<h2>Ungolfed</h2>
<p>I tried with in order of step 1, 3, 4, 5, 2.</p>
<p>Reading hint: I named alphabet labels taken from the qwerty keyboard;</p>
<pre><code># step 1
s/^/;0,q/

# rename every state; new state q can be introduced
:q
# s/\&lt;q/qq/g # readable alternative
s/q/qq/g
t3

# step 3
:3
s/(,\w+)(,\w+,\w+)(.*)/\1,q\3;q\2/
tq

:r
# step 4
# choose a nullable state
s/(.*)(;(q+)z)/\3\1/
Tw

# add nullable state rules
:4
s/^(q+)\&gt;(.*);((\w+)(,\1(,\w+)|(,\w+),\1))\&gt;/\1\2%\3;\4\6\7/
t4
s/^(q+)\&gt;(.*);((\w+),\1)\&gt;/\1\2%\3;\4z/
t4

# step 4 done for that state
s/q+//
y/%/;/
tr

# step 5
# protect every A -&gt; BC
:w
s/;(q+,q+,\w+)/&lt;\1/g

# choose one A -&gt; B
s/(.*);(q+,q+)/\2\1/

# no need to unprotect A -&gt; BC
# if A -&gt; B and B -&gt; ... add A -&gt; ...
:g
s/^((q+),(q+))\&gt;(.*);(\3(,\w+(,\w+)?))/\1;\2\6\4&lt;\5/
tg

# remove A -&gt; B
s/^q+,q+//

# end of step 5 or just removed A -&gt; B
y/&lt;/;/
tw

# step 2
# mark every alphabet a in A -&gt; Ba and A -&gt; aB
s/,(a+,)/%\1/g
s/(,q+),(a+)/\1%\2/g

# choose one alphabet
s/(.*)(%a+)/q\2&amp;/

# now rewrite rules
:s
s/^q(%a+)\&gt;(.*)\1\&gt;/q\1\2,q/
ts
s/^q%(a+)/;q,\1/

# still having any?
s/%/,/g
tq # to be able to get more states

# COMPLETED!
# some rules are duplicated but whatever
</code></pre>
<p><a href="https://tio.run/##bVTtbtowFP3vp3DVMcFI8UJoJ5GuFaXs174k@tMqMsSFbCHGiUNE1dfaa@yRxu69MbSrJkX2sX3P/Ti@TqmTs2Ve7cVsNvl6O5uJ4E3CwpNUMvaRbRjM@1NeOr3hISvFvYjfB1YwdsoLnau15nqrix0YKKdjnuu6gdzyhcr5XPM0d4VJqoVO2NACrRTy0gprxZKjD5Woeaa5ypwucuXSrYYozTlzEcah2BEbRnDQDmTd7dDYoN67jpBhYGUUW9kXzFnGhsWBNQCwWBlTQgCeV1lGsShBdAbkdty23c4jOIlkKNhdjRFVkryy5kWV6ZINBygBMuQVsuN22@cTNpk9NROsO2ACmcl@C1KTA3khP0B2/@ej@T/Wj2R6rIInJtf8wRTcrZQ75m@7QrCdaIkYzIuj@TmATWGcXjh/OSN@dsVvxmxYAwsLDmwjn7iEopfsWSWM01h7fbw16NNHfcAyN3DLOuHO8Co/xDlEOOXpg19wlScwAuz1eiTpyC/YcEkyoA4BDkc1ZET6NSJed/BqYwh8IQeX8hyKXDZ9tzbbF2neU4aCktMQ0zx4HTgI9qMqnWckB8pOXJJk9VGyPoC1Kn56vVS2Wam5dtA0ae5ZiuohrDBq0FbdoCNaJCA2JhWjUKmwBZ34WtWDz0PftdAUWvatF7WGLOsifW61kkoju0YeaI8rYECT4AN0zXmLQsY28LdTujTL@Ept03wJGe@uwaolAnxMFt4bXBo8SeprgEsocW0K3@Ml8sffvnz/PLmb3J6gM7P26XAFVkm1ydIFWCZ8XjleQy@iXvB7KFTNTeU2lYM/BhA/mWKtHBo2uz3sOyFzkgqedqNZGIo@gX5fRASiSAwIDAbiXCz3UJe1gVIwWsI4Wdo6zAQC@p4R4QCPHhnwgE9O4hfLuNkiT@gm8M78SbPJ/D@RsSle/Gh@w5/4mI1xMQe4YNTgoxHg0Zg13QH49y/PqKbJ9OVaTfF4PiXydAEjrXH1x2xcavJyfzb5Cw" rel="nofollow noreferrer" title="sed – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Python3, 911 bytes</h1>
<pre class="lang-py prettyprint-override"><code>import string as S
from itertools import*
L=str.islower
H=lambda x:x.replace('S','T')
V=product
def P(T,G):
 q,s=[b for a,b in G if a==T],[]
 for i in q:
  if''==i:return 1
  for j in map(''.join,V(*[[t]if L(t)else[b for a,b in G if a==t]for t in i])):
   if j==''or not any({*k}=={*j}for k in s):q+=[j];s+=[j]
 return 0
def f(g):
 g=[(H(a),H(b))for a,b in g]
 s,d=[*{*S.ascii_uppercase}-{a for a,_ in g}-{'S'}],{}
 G,N=[],[]
 for a,b in g:
  if all(L(i)for i in b):G+=[(a,b)]
  else:
   n=''
   for i in b:
    if L(i):G+=[(t:=(d.get(i)or s.pop()),i)];d[i]=t;i=t
    n+=i
   N+=[(a,n)]
 for a,b in N:
  if len(b)&lt;3:G+=[(a,b)];continue
  G+=[(a,b[0]+(i:=s.pop()))];N+=[(i,b[1:])]
 K=[]
 G={*G}
 for a,b in G:
  if''!=b:K+=[(a,''.join(j))for j in V(*[[t]+['']*P(t,G)for t in b])]
 F,T=[],[*{*G,*K}]
 for a,b in T:
  if len(b)==1 and not L(b):T+=[(a,B)for A,B in T if A==b]
  else:F+=[(a,b)]
 return [('S','T')]+F
</code></pre>
<p><a href="https://tio.run/##lVTNbtswDD5XT8F1B0mOG7ToDoMzDXACNAVaFAUc9OIZhfyTTJlju7aCtcj8WHuNvVJHyU7qDAOGXWyT/PjxI0W5etFfy@LyY1W/vqpNVdYaGl2rYgWygYAs63IDSme1Lsu8gQ7hkFuBoLFq8vJ7VpNrkctNnEp49p7HdVblMskYDahLF5STB1HVZbpNNEmzJdyzhTvnHoEntxFhDMuyBunGoAqYg1qCFGIRuWFEbEQZ/xOiMUSpEMqrM72tC7hAlwGsDWAjK0bpeF2qwn1gThjqCJlumeZZ3mR/L6Ij49TGpSJuBJkasBaCUgwUpQZZvLCd860VYuesWwP/ZuAN955GIlxHk8a@CPSazm2DS7YybCsRsmsmuXvNYs4HAlaY0LipCJ2dE4xlkyj1uK2qrE5kk7VnO9mrfbRgdOAg28jdtQTm7p0I34azJ@zGAzLP2S1T/DC3mHtzVMgQxzEFzDBsnwX2aN5vSOsGOzTVZ2lPsHS8yjR6ENeMq7JinLuKR5M0VJHQEyW0zStGQpmPu65awY8F3vUC86zAWXy6HKiaJGWhVbHNELH3hufRiClP7CsiyhIrDF14kSG/EWYGczyXeXtUar5flXci9m46wn4z2Lo7Brsx/ZaMQkoj555pXMnDOsS2xJW7sLPGU5q7zk173NLiqCUhLnBZUrs0t2h7i67y1JL67tSmGLwvRHw4iqvB4fQrFB6uTTS6erWXLynzPEu0Kov99QNcM7nNdar6O5WqBu/cy@OqlpuNrFm9zTPcUnKSghiCWZNpTk66PsA2YqGIPEFxsQdpKKOxTFNsgpz0muiXop8gzpXuZAtnn2FH4Qf07pi3GIAhbTrGf8amYdw0jVykwl@KZn8KXbK@4W2QBpS7YC2g2D6eO7wPTCkTw2K/fvYk9Iw6H875PyiBykAOKOMgHlhJkAysI9wQdaQD@VAG8uAT8/FpbWOR09NTYkF@PEXHjMyM0cWm1u/jtz8jvmXq2jFJ/9cSsg/kzbrv2UD2rJdtvqc2wx8afYY/aNp/mzd5/Q0" rel="nofollow noreferrer">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/275254/">275254</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




