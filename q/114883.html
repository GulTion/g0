<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::114883</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>115</td><td>Python 3</td><td>240722T014634Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/274315#274315">aeh5040</a></td></tr>
<tr d-ix="1"><td>006</td><td>Japt</td><td>190119T172721Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/178930#178930">Shaggy</a></td></tr>
<tr d-ix="2"><td>050</td><td>Ruby</td><td>170410T125753Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/116008#116008">snail_</a></td></tr>
<tr d-ix="3"><td>1211</td><td>MATL</td><td>170402T025206Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114890#114890">Luis Men</a></td></tr>
<tr d-ix="4"><td>096</td><td>C++</td><td>170410T075717Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/115989#115989">Toby Spe</a></td></tr>
<tr d-ix="5"><td>287</td><td>Python</td><td>170403T093142Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/115024#115024">PM 2Ring</a></td></tr>
<tr d-ix="6"><td>130</td><td>JavaScript ES6</td><td>170404T082939Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/115175#115175">edc65</a></td></tr>
<tr d-ix="7"><td>125</td><td>Julia</td><td>170402T032311Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114893#114893">David Co</a></td></tr>
<tr d-ix="8"><td>031</td><td>Mathematica</td><td>170402T031540Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114892#114892">Greg Mar</a></td></tr>
<tr d-ix="9"><td>040</td><td>Scala</td><td>170402T195343Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114978#114978">corvus_1</a></td></tr>
<tr d-ix="10"><td>124</td><td>PHP</td><td>170402T100527Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114914#114914">J&#246;r</a></td></tr>
<tr d-ix="11"><td>005</td><td>Pyth</td><td>170402T103341Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114916#114916">Erik the</a></td></tr>
<tr d-ix="12"><td>007</td><td>CJam</td><td>170402T080901Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114910#114910">Erik the</a></td></tr>
<tr d-ix="13"><td>005</td><td>05AB1E</td><td>170402T075825Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114909#114909">Erik the</a></td></tr>
<tr d-ix="14"><td>005</td><td>05AB1E</td><td>170402T075743Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114908#114908">Adnan</a></td></tr>
<tr d-ix="15"><td>005</td><td>Jelly</td><td>170402T075242Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114907#114907">Erik the</a></td></tr>
<tr d-ix="16"><td>069</td><td>Python 2</td><td>170402T023230Z</td><td><a href="https://codegolf.stackexchange.com/questions/114883/i-give-you-nth-permutation-you-give-me-n/114887#114887">Dead Pos</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 115 bytes</h1>

<pre class="lang-python prettyprint-override"><code>def f(x,t=0,k=0,z=1):
 for a in sorted({*x}):*y,=x;y.remove(a);c=t|(x[0]&gt;a);k+=z*f(y,c);z*=c    
 return(x==[])*t+k
</code></pre>
<p><a href="https://tio.run/##XcrdCsIgAAXg@z2Fd1OT2E9bsGEvMnbhnNIY6TALXfXs5l3YgXPxHc7m7VWrOoRZSCChI5YWZI3daYm6DEhtAAOLAndtrJjhC7sP6rAn1PX@aMRNPwVkqOfUvqEbivESsR7ojiX0hKN@x5SDmAwYYR9GQUfpMCJsD2vYzKIslDBnbMoRyn6eWOKJpZ7536FMlKBp6lPVtueyinP4Ag" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1>Japt, 6 bytes</h1>
<p>0-indexed</p>
<pre><code>ñ á bU
</code></pre>
<p><a href="https://ethproductions.github.io/japt/?v=1.4.6&amp;code=8SDhIGJV&amp;input=IkRDQkEi" rel="nofollow noreferrer">Try it</a></p>
</div>
<div id="pu2" class="pu"><h1>Ruby, 50 bytes</h1>

<p>I expected this to be shorter. I wouldn't have added the <code>sort</code> if the docs didn't say "the implementation makes no guarantees about the order in which the permutations are yielded."</p>

<pre><code>-&gt;x{x.chars.permutation.map{|v|v*""}.sort.index x}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>13</s> <s>12</S> 11 bytes</h1>

<p><em>1 byte saved thanks to <a href="https://codegolf.stackexchange.com/users/18535/g-b">G B</a>!</em></p>

<pre><code>tY@Xu=!Af1)
</code></pre>

<p>Output is 1-based.</p>

<p><a href="https://tio.run/nexus/matl#@18S6RBRaqvomGao@f@/uouzk6M6AA" rel="nofollow noreferrer" title="MATL – TIO Nexus">Try it online!</a> Or <a href="https://tio.run/nexus/matl#S/hfEukQUWqr6JhmqPnfJeS/uqOjkzqXuqOTI5B0cgSRUVFRQNLFGSgEAA" rel="nofollow noreferrer">verify all test cases</a>.</p>

<h3>Explanation</h3>

<pre><code>t      % Input string implicitly. Duplicate
Y@     % All permutations, sorted; each in a different row
Xu     % Unique rows
=      % Compare for equality, with broadcast
!      % Transpose
A      % All: true for columns that contain all entries true
f      % Find: indices of nonzero elements
1)     % Get first of those indices. Implicitly display
</code></pre>
</div>
<div id="pu4" class="pu"><h1>C++, 96 bytes</h1>

<p>We can make full use of the standard library here.  The list of letters is passed as start/end iterators in standard C++ style.</p>

<pre class="lang-c++ prettyprint-override"><code>#include&lt;algorithm&gt;
int f(char*a,char*z){int i=0;while(std::prev_permutation(a,z))++i;return i;}
</code></pre>

<p>We don't need to generate all permutations - since we have a transformation from one permutation to its predecessor, we simply count how many iterations it takes to reach the zeroth value.</p>

<h3>Test program:</h3>

<pre class="lang-c++ prettyprint-override"><code>#include&lt;cstring&gt;
#include&lt;iostream&gt;
int main(int argc, char **argv)
{
    while (*++argv)
        std::cout &lt;&lt; *argv &lt;&lt; ": "
                  &lt;&lt; f(*argv, *argv+std::strlen(*argv)) &lt;&lt; std::endl;
}
</code></pre>

<h3>Test results:</h3>

<pre><code>BAA: 0
BAA: 1
BAA: 2
ZZZ: 0
DCBA: 23
: 0
</code></pre>
</div>
<div id="pu5" class="pu"><h2>Python, <s>302</s> 287 bytes</h2>

<p>Dead Possum has already posted a short Pythonic solution, so I decided to go for the extra kudos. This solution does <em>not</em> generate all of the permutations. It can rapidly calculate the permutation index of a rather large string; it also handles an empty string correctly.</p>

<pre class="lang-py prettyprint-override"><code>from math import factorial as f
from itertools import groupby as g
def p(t,b=''):
 if len(t)&lt;2:return 0
 z,b=0,b or sorted(t)
 for i,c in enumerate(b):
  w=b[:i]+b[i+1:]
  if c==t[0]:return z+p(t[1:],w)
  if i&lt;1 or c!=b[i-1]:
   n=f(len(w))
   for _,v in g(w):n//=f(len(list(v)))
   z+=n
</code></pre>

<p>Testing code:</p>

<pre class="lang-py prettyprint-override"><code>def lexico_permute_string(s):
    ''' Generate all permutations of `s` in lexicographic order '''
    a = sorted(s)
    n = len(a) - 1
    while True:
        yield ''.join(a)
        for j in range(n-1, -1, -1):
            if a[j] &lt; a[j + 1]:
                break
        else:
            return
        v = a[j]
        for k in range(n, j, -1):
            if v &lt; a[k]:
                break
        a[j], a[k] = a[k], a[j]
        a[j+1:] = a[j+1:][::-1]

def test_all(base):
    for i, s in enumerate(lexico_permute_string(base)):
        rank = p(s)
        assert rank == i, (i, s, rank)
        print('{:2} {} {:2}'.format(i, s, rank))
    print(repr(base), 'ok\n')

for base in ('AAB', 'abbbbc'):
    test_all(base)

def test(s):
    print('{!r}\n{}\n'.format(s, p(s)))

for s in ('ZZZ', 'DCBA', 'a quick brown fox jumps over the lazy dog'):
    test(s)
</code></pre>

<p><strong>output</strong></p>

<pre><code> 0 AAB  0
 1 ABA  1
 2 BAA  2
'AAB' ok

 0 abbbbc  0
 1 abbbcb  1
 2 abbcbb  2
 3 abcbbb  3
 4 acbbbb  4
 5 babbbc  5
 6 babbcb  6
 7 babcbb  7
 8 bacbbb  8
 9 bbabbc  9
10 bbabcb 10
11 bbacbb 11
12 bbbabc 12
13 bbbacb 13
14 bbbbac 14
15 bbbbca 15
16 bbbcab 16
17 bbbcba 17
18 bbcabb 18
19 bbcbab 19
20 bbcbba 20
21 bcabbb 21
22 bcbabb 22
23 bcbbab 23
24 bcbbba 24
25 cabbbb 25
26 cbabbb 26
27 cbbabb 27
28 cbbbab 28
29 cbbbba 29
'abbbbc' ok

'ZZZ'
0

'DCBA'
23

'a quick brown fox jumps over the lazy dog'
436629906477779191275460617121351796379337
</code></pre>

<hr>

<p>Non-golfed version:</p>

<pre class="lang-py prettyprint-override"><code>''' Determine the rank (lexicographic index) of a permutation 
    The permutation may contain repeated items

    Written by PM 2Ring 2017.04.03
'''

from math import factorial as fac
from itertools import groupby

def lexico_permute_string(s):
    ''' Generate all permutations of `s` in lexicographic order '''
    a = sorted(s)
    n = len(a) - 1
    while True:
        yield ''.join(a)
        for j in range(n-1, -1, -1):
            if a[j] &lt; a[j + 1]:
                break
        else:
            return
        v = a[j]
        for k in range(n, j, -1):
            if v &lt; a[k]:
                break
        a[j], a[k] = a[k], a[j]
        a[j+1:] = a[j+1:][::-1]

def perm_count(s):
    ''' Count the total number of permutations of sorted sequence `s` '''
    n = fac(len(s))
    for _, g in groupby(s):
        n //= fac(sum(1 for u in g))
    return n

def perm_rank(target, base):
    ''' Determine the permutation rank of string `target`
        given the rank zero permutation string `base`,
        i.e., the chars in `base` are in lexicographic order.
    '''
    if len(target) &lt; 2:
        return 0
    total = 0
    head, newtarget = target[0], target[1:]
    for i, c in enumerate(base):
        newbase = base[:i] + base[i+1:]
        if c == head:
            return total + perm_rank(newtarget, newbase)
        elif i and c == base[i-1]:
            continue
        total += perm_count(newbase)

base = 'abcccdde'
print('total number', perm_count(base))

for i, s in enumerate(lexico_permute_string(base)):
    rank = perm_rank(s, base)
    assert rank == i, (i, s, rank)
    #print('{:2} {} {:2}'.format(i, s, rank))
print('ok')
</code></pre>

<p><strong>About <code>lexico_permute_string</code></strong></p>

<p>This algorithm, due to Narayana Pandita, is from
<a href="https://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order" rel="nofollow noreferrer">https://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order</a></p>

<p>To produce the next permutation in lexicographic order of sequence <code>a</code></p>

<ol>
<li>Find the largest index j such that a[j] &lt; a[j + 1]. If no such index exists, 
the permutation is the last permutation.</li>
<li>Find the largest index k greater than j such that a[j] &lt; a[k].</li>
<li>Swap the value of a[j] with that of a[k].</li>
<li>Reverse the sequence from a[j + 1] up to and including the final element a[n].</li>
</ol>

<p>FWIW, you can see an annotated version of that function <a href="https://stackoverflow.com/a/43014919/4014959">here</a>. </p>

<hr>

<p>FWIW, here's the inverse function.</p>

<pre class="lang-py prettyprint-override"><code>def perm_unrank(rank, base, head=''):
    ''' Determine the permutation with given rank of the 
        rank zero permutation string `base`.
    '''
    if len(base) &lt; 2:
        return head + ''.join(base)

    total = 0
    for i, c in enumerate(base):
        if i &lt; 1 or c != base[i-1]:
            newbase = base[:i] + base[i+1:]
            newtotal = total + perm_count(newbase)
            if newtotal &gt; rank:
                return perm_unrank(rank - total, newbase, head + c)
            total = newtotal
# Test

target = 'a quick brown fox jumps over the lazy dog'
base = ''.join(sorted(target))
rank = perm_rank(target, base)
print(target)
print(base)
print(rank)
print(perm_unrank(rank, base))
</code></pre>

<p><strong>output</strong></p>

<pre><code>a quick brown fox jumps over the lazy dog
        aabcdeefghijklmnoooopqrrstuuvwxyz
436629906477779191275460617121351796379337
a quick brown fox jumps over the lazy dog
</code></pre>

<p>And here's a function that I wrote while developing <code>perm_unrank</code> which shows the breakdown of the subcounts.</p>

<pre class="lang-py prettyprint-override"><code>def counts(base):
    for i, c in enumerate(base):
        newbase = base[:i] + base[i+1:]
        if newbase and (i &lt; 1 or c != base[i-1]):
            yield c, perm_count(newbase)
            for h, k in counts(newbase):
                yield c + h, k 

def show_counts(base):
    TAB = ' ' * 4
    for s, t in counts(base):
        d = len(s) - 1
        print('{}{} {}'.format(TAB * d, s, t))

# Test
base = 'abccc'
print('total number', perm_count(base))
show_counts(base)
</code></pre>

<p><strong>output</strong></p>

<pre><code>a 4
    ab 1
        abc 1
            abcc 1
    ac 3
        acb 1
            acbc 1
        acc 2
            accb 1
            accc 1
b 4
    ba 1
        bac 1
            bacc 1
    bc 3
        bca 1
            bcac 1
        bcc 2
            bcca 1
            bccc 1
c 12
    ca 3
        cab 1
            cabc 1
        cac 2
            cacb 1
            cacc 1
    cb 3
        cba 1
            cbac 1
        cbc 2
            cbca 1
            cbcc 1
    cc 6
        cca 2
            ccab 1
            ccac 1
        ccb 2
            ccba 1
            ccbc 1
        ccc 2
            ccca 1
            cccb 1
</code></pre>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 130 bytes</h1>
<pre class="lang-js prettyprint-override"><code>s=&gt;(o=new Set,p=(s,q)=&gt;s.map((t,i)=&gt;p(t=[...s],q.concat(t.splice(i,1))))[0]||o.add(q.join``))([...s],[])&amp;&amp;[...o].sort().indexOf(s)
</code></pre>
<p><em>Less golfed</em></p>
<pre class="lang-js prettyprint-override"><code>s=&gt;{
  o = new Set; // use a set to avoid duplicates

  // recursive function to build all permutations (no cookie for me)
  p = (s, q) =&gt; 
  {
    y = s.map( (t,i) =&gt; // execute for each char at position i
          (
             t = [...s], // using t as local variable, store a copy of s
             x = t.splice(i,1), // remove char from t in position i, and store in array x
             p(t, q.concat(x)) // recursive call
          ));
    if (!y[0]) // if s was empty, I have a new permutation in q
      o.add( q.join('')) // convert to string and add to output set 
  }
  // call p to enumerate all permutations
  p( [...s], [] ) // convert string s to array, q starts empty

  o = [...o].sort() // get elements of o and sort lexicographically 
  return o.indexOf(s) // return the position of the input in o
}
</code></pre>
<p><strong>Test</strong></p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>F=
s=&gt;(o=new Set,p=(s,q)=&gt;s.map((t,i)=&gt;p(t=[...s],q.concat(t.splice(i,1))))[0]||o.add(q.join``))([...s],[])&amp;&amp;[...o].sort().indexOf(s)

function update() {
  O.textContent = F(I.value)
}

update()</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;input id=I value='DCBA' oninput='update()'&gt;
&lt;pre id=O&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu7" class="pu"><h1>Julia, <s>121</s> 125 bytes</h1>

<p>Noncompeting, as it does not deal with duplicate letters correctly. I ported this from another language, from part of a solution to a Project Euler problem I did several years ago, and the first, 121-byte version had a bug because I had transposed the use of the permuted string and the sorted, canonical reference string.</p>

<pre><code>f(p)=(n=0;z=length(p)-1;s=join(sort(collect(p)));for c in p z-=(n+=factorial(z)*(search(s, c)-1);p=replace(s,c,"",1);1)end;n)
</code></pre>

<p>For large inputs, this version uses bignums at the cost of 8 extra bytes:</p>

<pre><code>f(p)=(n=0;z=BigInt(length(p)-1);s=join(sort(collect(p)));for c in p z-=(n+=factorial(z)*(search(s, c)-1);p=replace(s,c,"",1);1)end;n)
</code></pre>

<p>Ungolfed:</p>

<pre><code>function f(perm)
    nth = 0
    size = length(perm) - 1
    sorted = join(sort(collect(p)))
    for ch in sorted
        index = search(perm, ch) - 1
        nth += factorial(size) * index
        perm = replace(perm, ch, "" , 1) # replace at most one copy
        size -= 1
    end
    return nth
end
</code></pre>

<p>Uses a <a href="https://en.wikipedia.org/wiki/Factorial_number_system" rel="nofollow noreferrer">factoriadic number system</a>, q.v. Thus, it does not produce all the permutations and for large inputs will run enormously faster than those that do.</p>

<p>For example, the alphabet can be permuted into the rather contrived sentence "Quartz glyph job vex'd cwm finks." That sentence is the 259,985,607,122,410,643,097,474,123rd lexicographic permutation of the letters of the alphabet. (Approximately 260 septillionth permutation.) This program finds that in about 65 &micro;s on my machine.</p>

<pre><code>julia&gt; @time f("quartzglyphjobvexdcwmfinks")
  0.000065 seconds (570 allocations: 19.234 KB)
259985607122410643097474122
</code></pre>

<p>Note that the number ends in ...122 rather than ...123 because OP requested that the permutations be numbered from 0 rather than from 1.</p>

<h1>Julia, 375 bytes</h1>

<p>I've left the indentation in for readability, but the byte count is without it.</p>

<pre><code>p(t,b="")=begin
    l=length
    if l(t)&lt;2 return 0 end
    f=factorial
    g(w)=(a=[];
        while w!=""
            s=""
            for c in w if c==w[1] s="$s$c" end end
            w=replace(w,s,"")
            push!(a,s)
        end;a)
    b=b&gt;""?b:join(sort(collect(t)))
    z=0
    for(i,c) in enumerate(b)
        w=b[1:i-1]*b[i+1:end]
        if c==t[1] return z+p(t[2:end],w)
        elseif i&gt;1&amp;&amp;c==b[i-1] continue end
        n=f(l(w))
        for v in g(w) n=div(n,f(l(v))) end
        z+=n
    end
    z
end
</code></pre>

<p>This one is just a straight Julia port of PM 2Ring's brilliant Python solution. I got hungry, so I decided I wanted the cookie after all. It's interesting to see the similarities and the differences between the two languages. I implemented <code>itertools.groupby</code> (in a limited form) as <code>g(w)</code>.</p>

<p>But the logic isn't mine, so go and upvote <a href="https://codegolf.stackexchange.com/a/115024/794">PM 2Ring's answer</a>.</p>

<p>Replace <code>f=factorial</code> with <code>f(x)=factorial(BigInt(x))</code> if you want to be able to handle large inputs like p("QUARTZGLYPHJOBVEXDCWMFINKS").</p>
</div>
<div id="pu8" class="pu"><h1>Mathematica, <s>33</s> 31 bytes</h1>

<p><em>Changing the problem spec allowed for a 2-byte savings.</em></p>

<pre><code>Permutations@Sort@#~Position~#&amp;
</code></pre>

<p>Pure function taking a list as input and returning a nonnegative integer <code>N</code> in the form <code>{{N}}</code>.</p>
</div>
<div id="pu9" class="pu"><h1>Scala, 40 bytes</h1>

<pre><code>s=&gt;s.permutations.toSeq.sorted indexOf s
</code></pre>

<p>To use it, assign this function to a variable:</p>

<pre><code>val f:(String=&gt;Int)=s=&gt;s.permutations.toSeq.sorted indexOf s
println(f("BAA"))
</code></pre>

<p><a href="https://ideone.com/GdnzMB" rel="nofollow noreferrer">Try it online at ideone</a></p>

<p>Unfortunately, <code>permutations</code> returns an iterator, which doesn't have a <code>sorted</code> method, so it has to be converted to a <code>Seq</code></p>
</div>
<div id="pu10" class="pu"><h1>PHP, 124 Bytes</h1>

<pre><code>$a=str_split($argn);sort($a);for($i=$j=join($a);$i&lt;=strrev($j);$i++)$i==$argn?print+$n:(($c=count_chars)($i)!=$c($j)?:$n++);
</code></pre>

<h2>PHP, 136 Bytes</h2>

<pre><code>foreach($t=($c=count_chars)($argn)as$k=&gt;$v)$i=$s.=str_repeat(chr($k),$v);for(;$i&lt;=strrev($s);$i++)$i==$argn?print+$n:($c($i)!=$t?:$n++);
</code></pre>

<p><a href="http://sandbox.onlinephpfunctions.com/code/1a5b1733e1728b833f1b8db2ab14160b4a2a5521" rel="nofollow noreferrer">Online Version</a></p>

<p>Run with</p>

<pre><code>echo '&lt;string&gt;' | php -nR '&lt;code&gt;'
</code></pre>

<h2>Calculate with factorial</h2>

<p>Expanded Version</p>

<pre><code>function f($i){return array_product(range(1,$i));} #factorial
function p($s){
return f(strlen($s))/array_product(array_map("f",count_chars($s,1)));
} # factorial / divide through product of factorials for each char
$a=$argn;
$b="";
$r=[];
for($d=0;$a;$d++) # loop range before used chars in string 
{
    for($i=0;$i&lt;strlen($a);$i++){ # loop for every char in the rest string 
        if($a[$i]&lt;$a[0]) # if char is before first char order by ascii
        $r[$d.$a[$i]]=p(substr_replace($a,"",$i,1)); # add range before
    }
    $a=substr($a,1); # remove first char
}
echo array_sum($r); # Output the range before the used permutation
</code></pre>

<p>Output for the string PPCG</p>

<pre><code>Array
(
    [0C] =&gt; 3    # in first run C is before P startposition = 3
    [0G] =&gt; 3    # in first run G is before P startposition = 3+3
    [1C] =&gt; 2    # in second run PC is before PP startposition = 3+3+2
    [1G] =&gt; 2    # in second run PG is before PP startposition = 3+3+2+2=8
)
</code></pre>

<p><a href="http://sandbox.onlinephpfunctions.com/code/500b1e8deee5192010d133d332cef78cf1fab414" rel="nofollow noreferrer">Online Version</a></p>
</div>
<div id="pu11" class="pu"><h1>Pyth, 5 bytes</h1>
<pre><code>xS{.p
</code></pre>
<p><a href="//pyth.herokuapp.com?code=xS%7B.p&amp;input=%27DCBA%27" rel="nofollow noreferrer">Online interpreter</a></p>
<p>Takes quoted input.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://sourceforge.net/p/cjam" rel="nofollow noreferrer">CJam</a>, 7 bytes</h1>

<pre><code>q_e!\a#
</code></pre>

<p><a href="https://tio.run/nexus/cjam#@18Yn6oYk6j8/7@Ls5MjAA" rel="nofollow noreferrer" title="CJam – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 5 bytes</h1>

<pre><code>œê¹Sk
</code></pre>

<p><a href="https://tio.run/nexus/05ab1e#@3908uFVh3YGZ///7@Ls5AgA" rel="nofollow noreferrer" title="05AB1E – TIO Nexus">Try it online!</a></p>

<p>Independently discovered from Adnan's answer.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 5 bytes</h1>

<pre><code>œêJ¹k
</code></pre>

<p>Uses the <strong>CP-1252</strong> encoding. <a href="https://tio.run/nexus/05ab1e#@3908uFVXod2Zv//7@ToCAA" rel="nofollow noreferrer" title="05AB1E – TIO Nexus">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 5 bytes</h1>

<pre><code>Œ!QṢi
</code></pre>

<p><a href="https://tio.run/nexus/jelly#@390kmLgw52LMv///@/i7OQIAA" rel="nofollow noreferrer" title="Jelly – TIO Nexus">Try it online!</a></p>

<p>1-indexed output.</p>
</div>
<div id="pu16" class="pu"><h2>Python 2, 69 bytes</h2>

<p><a href="https://tio.run/nexus/python2#y7GN@Z@TmJuUkqgQbFWcX1SSmqJRnFqiUZBalFtakliSmZ9XrBGsqampl5mXkloBZHKlFeXnKmSWpBaV5OfnFCtk5hYAtWn9LyjKzCtRyNHQUHdR11FQdwYRTiDCUV1T8z8A" rel="noreferrer">Try it online</a></p>

<pre><code>from itertools import*
lambda S:sorted(set(permutations(S))).index(S)
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/114883/">114883</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




