<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::267442</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>229</td><td>C gcc</td><td>231212T225939Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267492#267492">AShelly</a></td></tr>
<tr d-ix="1"><td>099</td><td>Haskell</td><td>231212T230648Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267493#267493">Leo</a></td></tr>
<tr d-ix="2"><td>046</td><td>APL Dyalog Classic</td><td>231212T044209Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267477#267477">Tbw</a></td></tr>
<tr d-ix="3"><td>029</td><td>Vyxal 3</td><td>231212T101215Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267484#267484">lyxal</a></td></tr>
<tr d-ix="4"><td>154</td><td>Python</td><td>231211T083036Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267443#267443">bsoelch</a></td></tr>
<tr d-ix="5"><td>294</td><td>Brainflak</td><td>231212T055012Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267479#267479">DJMcMayh</a></td></tr>
<tr d-ix="6"><td>250</td><td>TypeScript’s type system</td><td>231211T151329Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267460#267460">noodle m</a></td></tr>
<tr d-ix="7"><td>092</td><td>Perl 5 a</td><td>231211T190602Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267467#267467">Xcali</a></td></tr>
<tr d-ix="8"><td>143</td><td>Haskell</td><td>231211T204723Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267470#267470">colossus</a></td></tr>
<tr d-ix="9"><td>132</td><td>PowerShell Core</td><td>231211T201547Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267469#267469">Julian</a></td></tr>
<tr d-ix="10"><td>312</td><td>Go</td><td>231211T152145Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267461#267461">bigyihsu</a></td></tr>
<tr d-ix="11"><td>050</td><td>Pip p</td><td>231211T180708Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267465#267465">DLosc</a></td></tr>
<tr d-ix="12"><td>nan</td><td></td><td>231211T085608Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267445#267445">lyxal</a></td></tr>
<tr d-ix="13"><td>179</td><td>flex</td><td>231211T143330Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267457#267457">Noodle9</a></td></tr>
<tr d-ix="14"><td>103</td><td>JavaScript Node.js</td><td>231211T094052Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267449#267449">tsh</a></td></tr>
<tr d-ix="15"><td>114</td><td>Ruby</td><td>231211T150805Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267459#267459">G B</a></td></tr>
<tr d-ix="16"><td>048</td><td>Charcoal</td><td>231211T144410Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267458#267458">Neil</a></td></tr>
<tr d-ix="17"><td>nan</td><td>Regex PCRE 2</td><td>231211T120535Z</td><td><a href="https://codegolf.stackexchange.com/questions/267442/implement-a-simple-stack-language/267453#267453">mousetai</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <strike>244</strike> 229 bytes</h1>

<pre class="lang-c prettyprint-override"><code>k[99],*s=k,t;a(){*--s+=t;}b(){*--s-=t;}c(){*s=s[-1];s[-1]=t;}d(){*++s=t;}e(){s--;}
n(){*++s=0;}(*f[])()={n,e,d,a,b,c};main(int g,char*v[]){
for(char*p=v[1]-1;*++p;t=*s,*p&lt;38?f[*p-32]():(*s=8*t+*p-48));
for(;s&gt;k;printf(&quot;%d &quot;,*s--));}
</code></pre>
<p><a href="https://tio.run/##NY9Bb4IwGIbv/opP1KSUNg7YErVjyw477DKXbTdCYmkBiYoNrXow/HbWors07/O8X7@0glZC9HMM66/377ffj/Xnz2oEQGEz2UACXMobTR3pU34jz5E8qRvNhu7C7zgeyvaoYGBZV7XRcKnNFjjsCy7rpgKtuCjsXHM65EULdQNHYfh@hOf9Ll0uM4J1siOGceRfMaU6SAzr8jtQB8KBTnRKw4wNp7PS2SDQLhc2a0pZ1/zLB9YhXKaZj/zk2pCCSMJJTkTHDrxuUN0YqIjY8haf7dC1PLZoIJWc0zCjIbNbFDMJ1gSr53jxWqZY0TjKkL9C9jELbAIrHhe@z9xlpl92TLV2b4m8mQTPfotSW3Z930MI0QTCMYQRRFOIJ7D0pk5CDKHnutjmp9kf" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
<p>Provide program on command line, quoted with <code>'</code>s.</p>
<p><strong>OPERATIONS:</strong></p>
<ul>
<li><code>#</code> = add</li>
<li><code>$</code> = borrow (sub)</li>
<li><code>%</code> = commute (swap)</li>
<li><code>&quot;</code> = duplicate</li>
<li><code>!</code> = evict (drop)</li>
<li><code> </code> = begin number entry (string of digits interpreted as octal)
<ul>
<li>a leading space before other operators is an error.</li>
</ul>
</li>
</ul>
<p>example 3: <code>./a.out ' 12 2$ 3#'</code>
prints 11</p>
<p>How it works: <code>p</code> points to the input string, <code>f[*p-32]()</code> calls an entry from a table of stack (<code>s</code>) manipulation functions for the first 6 printable characters.  A space puts a '0' on the stack. Other characters are treated as octal digits with value <code>v = *p-'0'</code>, added to the stack with the equivalent of <code>8 MUL v ADD</code>.</p>
<p>Fun side-effect, you can use <code>'/'</code>..<code>')'</code> as negative digits -1..-8</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 99 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>foldl(!)[]
s!c|c&lt;0= -c:s|1&lt;2=[j(+),j(-),\(n:x)-&gt;n:n:x,\(a:b:x)-&gt;b:a:x,tail]!!c$s
j o(a:b:x)=b`o`a:x
</code></pre>
<p><a href="https://tio.run/##LcmxDoMgFEDR3a@QxAFSXgJ2I9IfQRPxtVotBVIcOvjtpaTpdHNy7zY9bs7lJeg@z8FdHSXMDFUieGAndA2o0iG7VpuNnhjfKDDeU6/eDC5elRZZNf08KVu829UNhGCTqq0O/6mnMYzl5qddvY6v1e/NEgxIwaHlksOZiyF/cHZ2SRkwxi8" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<p>Takes a list of integers as input, where:</p>
<ul>
<li><code>0</code>: sum</li>
<li><code>1</code>: subtract</li>
<li><code>2</code>: dup</li>
<li><code>3</code>: swap</li>
<li><code>4</code>: pop</li>
<li><code>-n</code>: push n</li>
</ul>
<p>Prints the stack as a list with the top element first.</p>
<hr />
<p>This works by building a list of functions and using the command integer to index into this list. Negative commands are managed separately.</p>
<p>The definitions of <code>dup</code>, <code>swap</code>, and <code>pop</code> are fairly straightforward, but rather than defining two separate functions for <code>sum</code> and <code>subtract</code> I've defined a single function <code>j</code> that takes an operator as an extra argument and applies this operator to the first two elements of the stack. Passing <code>(+)</code> and <code>(-)</code> to <code>j</code> then does the trick.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, 46 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>T←{(⍺⍺2↑⍵),2↓⍵}
p←+/T
m←¯1∘⊥T
x←⊃,⊢
s←⌽T
d←1∘↓
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v8/5FHbhGqNR727gMjoUdvER71bNXWAjMlARi1XAVBWWz@EKxdIH1pv@KhjxqOupSFcFUDuo65mnUddi7iKQeyevSFcKUAGWEXb5P//CxQMdYx0HvWu4UoBskB0gYKxTq6CkY6hAZibq1ChYAlmGQMVwpQY6VRAlRcrmALFjUFsAA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>
<ul>
<li>Programs start on the right with <code>⍬</code> (empty array, called <em>zilde</em>) and run as their own lines, not as strings.</li>
<li><code>n,</code> pushes <code>n</code> onto the stack.</li>
<li><code>p </code> adds the top two.</li>
<li><code>m </code> subtracts the top from the second.</li>
<li><code>x </code> duplicates the top.</li>
<li><code>s </code> swaps the top two.</li>
<li><code>d </code> drops the top.</li>
</ul>
<p>Note that the spaces are necessary.</p>
<p>Polish notation is used, i.e. read right-to-left (opposite of the examples in the question), as APL itself is right-to-left.
The stack is stored and displayed top-to-bottom (opposite of the examples in the question).
E.g. using Polish notation <code>1 dup 2 +</code> becomes <code>p 2,x 1,⍬</code> and outputs <code>3 1</code></p>
<p>My first time using <em>dops</em> (user-defined operators) in APL. Doesn't seem too useful for golfing, unless you are defining multiple similar functions. <code>T</code> is a dop defined as <code>{(⍺⍺2↑⍵),2↓⍵}</code>. This is a monadic operator that takes a monadic function on the left, and applies it to the first two elements of the array on the right, then catenates with the rest of the array (you can even use this to define new stack operations).</p>
<p>Would love to know how this can be improved upon.</p>
<p>EDIT: There was a bug in my minus function that would negate the whole stack. None of the test cases noticed it though. Fixed now but had to add one byte.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-3" rel="nofollow noreferrer">Vyxal 3</a>, 29 bytes</h1>
<pre><code>⸠+⸠-⸠:⸠$⸠_W₈×£?Ṃ(nnK[⌊|O¥iĖ]W
</code></pre>
<p><a href="https://vyxal.github.io/latest.html#WyJsIiwiIiwiKC4gYWRkKSAoLiBzdWIpICguIGR1cCkgKC4gc3dhcCkgKC4gcG9wKSB3cmFwIG5lZy0xICogc2V0LXJlZ1xuJ2ZvciAoaW5wdXQgc3BsaXQtc3BhY2VzKVxuICBuIG5cbiAgKGlzLW51bT8pID8gZmxvb3IgOiBvcmQgZ2V0LXJlZyBpbmRleCBjYWxsXG5jbG9zZS1hbGwgd3JhcCIsIiIsIjMgNSA2IGkgaSIsIjMuMy4wIl0=" rel="nofollow noreferrer">Try it Online! (link is to literate version)</a></p>
<p>Wow, the SBCS really doesn't do the beauty of literate mode justice:</p>
<pre><code>(. add) (. sub) (. dup) (. swap) (. pop) wrap neg-1 * set-reg
'for (input split-spaces)
  n n
  (is-num?) ? floor : ord get-reg index call
close-all wrap
</code></pre>
<p>Command set is:</p>
<pre><code>i -&gt; add
j -&gt; subtract
k -&gt; duplicate
l -&gt; swap
m -&gt; pop
[0-9]+ -&gt; number
</code></pre>
<h2>Explained</h2>
<pre><code>⸠+⸠-⸠:⸠$⸠_W₈×£?Ṃ(nnK[⌊|O¥iĖ]W­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁣⁪‏‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁪‏‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁪‏‏​⁡⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏‏​⁡⁠⁡‌⁢⁣​‎‏​⁢⁠⁡‌⁢⁤​‎‎⁪⁡⁪⁠⁪⁣⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁡⁪‏‏​⁡⁠⁡‌⁣⁡​‎‎⁪⁡⁪⁠⁪⁤⁢⁪‏‏​⁡⁠⁡‌⁣⁢​‎‎⁪⁡⁪⁠⁪⁤⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁤⁤⁪‏‏​⁡⁠⁡‌⁣⁣​‎‎⁪⁡⁪⁠⁪⁢⁡⁡⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁣⁤​‎‎⁪⁡⁪⁠⁪⁢⁡⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁣⁪‏‏​⁡⁠⁡‌⁤⁡​‎‎⁪⁡⁪⁠⁪⁢⁡⁤⁪‏‏​⁡⁠⁡‌⁤⁢​‎‎⁪⁡⁪⁠⁪⁢⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁢⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁤⁣​‎‎⁪⁡⁪⁠⁪⁢⁢⁣⁪‏‏​⁡⁠⁡‌⁤⁤​‎‎⁪⁡⁪⁠⁪⁢⁢⁤⁪‏‏​⁡⁠⁡‌⁢⁡⁡​‎‎⁪⁡⁪⁠⁪⁢⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁢⁪‏‏​⁡⁠⁡‌⁢⁡⁢​‎‎⁪⁡⁪⁠⁪⁢⁣⁣⁪‏‏​⁡⁠⁡‌⁢⁡⁣​‎‏​⁢⁠⁡‌⁢⁡⁤​‎‎⁪⁡⁪⁠⁪⁢⁣⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁤⁡⁪‏‏​⁡⁠⁡‌­
⸠+⸠-⸠:⸠$⸠_W                    # ‎⁡Push a list of:
⸠+                             # ‎⁢  lambda x, y: x + y
  ⸠-                           # ‎⁣  lambda x, y: x - y
    ⸠:                         # ‎⁤  lambda (stack): stack.push(stack[-1])
      ⸠$                       # ‎⁢⁡  lambda (stack): stack[-2], stack[-1] = stack[-1], stack[-2]
        ⸠_                     # ‎⁢⁢  lambda (stack): stack.pop()
# ‎⁢⁣Technically, all these lambdas are monadic (take one argument) so far.
           ₈×                  # ‎⁢⁤Multiply each lambda by -1 to make them operate on the stack
             £                 # ‎⁣⁡And put the stack lambda list in the register
              ?Ṃ               # ‎⁣⁢Split the input on spaces,
                (              # ‎⁣⁣and to each command `n` in that,
                 nn            # ‎⁣⁤  Push two copies of `n`
                   K           # ‎⁤⁡  and test whether the second copy is numeric
                    [⌊         # ‎⁤⁢  if so, simply evaluate and leave on the stack
                      |        # ‎⁤⁣  otherwise:
                       O       # ‎⁤⁤    get the unicode code-point of `n`
                        ¥i     # ‎⁢⁡⁡    index into the register
                          Ė    # ‎⁢⁡⁢    and call the pushed lambda.
# ‎⁢⁡⁣That's the reason the command set was chosen - the ord value mod 5 corresponds to the lambda. Any set of 5 characters could have been chosen, but `i` was the closest to `d`, which I knew to be `100`.
                           ]W  # ‎⁢⁡⁤Close all structures, and wrap the stack when finished.
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 154 bytes</h1>
<p><em>based on <code>emanresu A</code>'s suggestion</em></p>
<pre class="lang-python prettyprint-override"><code>def f(s):
 S=[]
 for c in s:
  if&quot;#&quot;==c:S+=[0]
  if&quot;*&quot;==c:S[-1]+=1
  if&quot;$&quot;==c:*S,a,b=S;S+=[a+b,-b]
  if&quot;,&quot;==c:S[-2:]=S[:-3:-1]
  if&quot;.&quot;==c:*S,_=S
 return S
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fVJNToQwFI5bTvFCWUBpCaUxUUy9RJeEGBimkQ0QfmJceBHdzEbvpKexpYDDZGLbBf3-Xl_Lx1f3Oj63zen0OY2K3n2_V0cFyh-C1AEpstwB1fZwgLqBQUNQKxe5QhxSGYoszi2CLZJRloeCWcybMSxJQUohH4y8CEtCy8VDVk-S5kJmKeWptlsuWr1PQjrQH8epb0DaE_7cvHV93Yy-8l2EEcZe5AYBIGCQQAj0ETKeO2eSja76tpv5Hb0NE4WIWSTy9DTUlh3rcAp8KcDY1YjNfR5jA-6hmnTx2R3vzGiujP964LaE-doLl9BdyyZ1bZtdGPCajTGxeq61tzC8FPYeuN4k1w4D_8jtK6z_yy8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Atomics:</p>
<ul>
<li><code>#</code> push zero</li>
<li><code>*</code> increment number</li>
<li><code>$</code> pop two numbers, push their sum and the negation of the second number</li>
<li><code>,</code> swap the top two numbers</li>
<li><code>.</code> drop the top number</li>
</ul>
<p>Implementation of operations:</p>
<ul>
<li>push number: <code>#</code> followed by sequence of <code>*</code> (number encoded in unary)</li>
<li>addition: <code>$.</code></li>
<li>dup: <code>#,$#,$,.</code><br />
<code>a -&gt; a 0 -&gt; a -a -&gt; a -a 0 -&gt; a 0 -a -&gt; a -a a -&gt; a a -a -&gt; a a</code></li>
<li>subtraction: <code>$#,$#,$,.$.$.</code><br />
<code>a b -&gt; a+b -b -&gt; a+b -b -b -&gt; a+b -2b b -&gt; a+b -2b -&gt; a-b 2b -&gt; a-b</code></li>
</ul>
<p><em>It is possible to go down to four operations (<a href="https://ato.pxeger.com/run?1=nVNLTsMwEJVY5hRPaRYtsaO6ERIYmUt4GUX0k1jtgiRyEiE4AJdg0w3cCa7AJXB-atQ05SN7MfM88-bN2H59z56KbZrs929loej1x0sUK6hpPuMWpAhCCyrV2GCXIDcQdspmthAbLl0RsLBBnBq5lGRF1kLeVkcrd03ouj0nTUZAFzwUMuDU57TL9brceyEt6LgodQLZqPm8-JogK_MtnmOdciwZc4jHHG9pTYyijY4f4qSo8AqyMr1Liqma2l2Y2ejZlet49myGCcCwgAt6h8APT2ceIiOdZnXo6cgze1C-80H6JvEcswaUPbVzI5fCbyUz9jclGC17Tk9b-wZRadqvC89HZnXU5rCT3tT9poXK-oHtWNT4XVYKu_tkY7y_1NripCX3DfEV8sdV8wR84yz-OwWc42zefPcTvwE" rel="nofollow noreferrer">134 bytes</a>)
By replacing the <code>#</code>and <code>*</code> operations by a &quot;push-one&quot; operation, but then pushing an integer (<code>11$,.1$.</code> followed by n times <code>1$.</code>) no longer feels like a single instruction</em></p>
<hr />
<h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 193 bytes</h1>
<pre class="lang-python prettyprint-override"><code>def f(s):
 S=[]
 for c in s:
  if&quot;/&quot;&lt;c&lt;&quot;:&quot;:S[-1]=10*S[-1]+int(c)
  if&quot;#&quot;==c:S+=[0]
  if&quot;$&quot;==c:*S,a,b=S;S+=[a+b,a-b]
  if&quot;:&quot;==c:S+=[S[-1]]
  if&quot;,&quot;==c:S[-2:]=S[:-3:-1]
  if&quot;.&quot;==c:*S,_=S
 return S
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=VZFNToQwGIbjlsQ7fGlnAUOLlGYSp069RJcNMfwMkQ0QfmI8i5vZ6D08hp7GQgFh177v0ydf24-v5r1_ravb7XPoC_r4851fCyjczhMOKKljB4q6hQzKCjoTQVmgB3TJLkggoTRlsWThcVr4ZdW7mWcZjKTMhPKlDmObHKbkqEhCUqmexirxU5LQdAbEemTSzSmxqaaRiKXSgnJhStsFi_JFKgfaaz-0FSh7kd-7-6YdJypchBmODgHyPMDAIAIf6DNoHjsbYq3ztm6mfleHxkACzFdNaDwU-OxibEufhWEtd4Z8MLoJCndGHGH-PxK3mnG1o8R28lG1TM_2IDe6E7EgN9AJurfE3oObTRTbV1m--Q8" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>Operations:</h2>
<p>According to the comments on the <a href="https://codegolf.meta.stackexchange.com/questions/2140/sandbox-for-proposed-challenges/26150#26150">sandbox version</a> it is allowed to split operations into smaller suboperations</p>
<p>Atomics:</p>
<ul>
<li><code>#</code> push zero</li>
<li><code>0</code>-<code>9</code> pop number multiply by 10 add digit</li>
<li><code>$</code> pop two numbers push their sum and difference</li>
<li><code>:</code> duplicate top number</li>
<li><code>,</code> swap top two numbers</li>
<li><code>.</code> drop top number</li>
</ul>
<p>simulating operations from requirements:</p>
<ul>
<li><code>#</code> followed by sequence of digits pushes a number</li>
<li><code>$.</code> pops two numbers and pushes their sum</li>
<li><code>$,.</code> pops two numbers and pushes their difference</li>
</ul>
</div>
<div id="pu5" class="pu"><h1>Brain-flak, 294 bytes</h1>
<pre><code>{(()[]&lt;(({}()))({[()](&lt;{}&gt;)}(){}){{}&lt;&gt;({}{})((&lt;&gt;))}{}(({}()))({[()](&lt;{}&gt;)}(){}){
{}&lt;&gt;([{}]{})((&lt;&gt;))}{}(({}()))({[()](&lt;{}&gt;)}(){}){{}&lt;&gt;(({}))((&lt;&gt;))}{}(({}()))({[()
](&lt;{}&gt;)}(){}){{}&lt;&gt;(({}({}))[({}[{}])])((&lt;&gt;))}{}(({}()))({[()](&lt;{}&gt;)}(){}){{}&lt;&gt;{}
((&lt;&gt;))}{}&gt;[[]]){{}({}[()()()()()]&lt;&gt;)(((&lt;&gt;)))}{}{}{}}&lt;&gt;
</code></pre>
<p><a href="https://brain-flak.github.io/?c=lY3bCcAACAPXSXYQFxEnCe7e2Md3WwIiyUUFsDoADUhCBTZCk7ShoTSRTr0CkaS3N7o0/Yd3zF/0WSjP/cT@3F3gJrOqe929Aj5qx7igpVbuHQ&amp;o=8&amp;i=M1YwUjBV0DUBAA" rel="nofollow noreferrer">Try it Online!</a></p>
<p>What better way to &quot;Implement a simple stack language&quot; than by using &quot;a simple stack language&quot;! And also a nice excuse to show off a new online interpreter for brain-flak that I have been working on.</p>
<p>Conveniently, a lot of the behavior described in the challenge is built-in to how brain-flak works. For example, <em>Your program/function must output/return the stack after all instructions are performed sequentially</em> is just describing the fundamental operation of brain-flak. And also, we could take each of the listed operations and transliterate it to brain-flak:</p>
<pre><code># Sum
({}{})

# Subtract
([{}]{})

# Duplicate
(({}))

# Swap
(({}({}))[({}[{}])])

# Pop
{}
</code></pre>
<p>Unfortunately, transliteration does not a valid answer make. So we need to do a bit of parsing to figure out which operation to call.</p>
<p>Without clarification from OP (and seeing as many answers have assumed positive input integers), this answer assumes that &quot;push an arbitrary integer&quot; means &quot;an arbitrary positive integer&quot;. Here is the input format:</p>
<ul>
<li>-1: sum</li>
<li>-2: subtract</li>
<li>-3: duplicate</li>
<li>-4: swap</li>
<li>-5: pop</li>
<li>All other positive integers: Push that integer</li>
</ul>
<p>Technically, negative numbers other than 5 listed also work to push a number. 0 does not work.</p>
<p>(&quot;TOS&quot; means &quot;Top of Stack&quot;)</p>
<h3>Commented/readable version:</h3>
<pre><code># While primary stack is not empty...
{
    # Keep track of the stack height +1 at this point...
    (()[]&lt;

        # Increment TOS
        (({}()))

        # TOS != 0
        ({[()](&lt;{}&gt;)}(){})

        # If TOS != 0...
        {
            # OPCode -1: Sum
            # Pop two numbers and push their sum to the alternate stack
            {}
            &lt;&gt;
            ({}{})

            # Go back to main stack and replace TOS with 2 zeros
            ((&lt;&gt;))
        }{}

        # Increment TOS
        (({}()))

        # TOS != 0
        ({[()](&lt;{}&gt;)}(){})

        # If TOS != 0...
        {
            # OPCode -2: subtract
            # Pop two numbers and push their difference to the alternate stack. Second number - first number.
            {}
            &lt;&gt;
            ([{}]{})

            # Go back to main stack and replace TOS with 2 zeros
            ((&lt;&gt;))
        }{}

        # Increment TOS
        (({}()))

        # TOS != 0
        ({[()](&lt;{}&gt;)}(){})

        # If TOS != 0...
        {
            # OPCode -3: duplicate
            # to the alternate stack
            {}
            &lt;&gt;
            (({}))

            # Go back to main stack and replace TOS with 2 zeros
            ((&lt;&gt;))
        }{}

        # Increment TOS
        (({}()))

        # TOS != 0
        ({[()](&lt;{}&gt;)}(){})

        # If TOS != 0...
        {
            # OPCode -4: swap
            # on the alternate stack
            {}
            &lt;&gt;
            (({}({}))[({}[{}])])

            # Go back to main stack and replace TOS with 2 zeros
            ((&lt;&gt;))
        }{}

        # Increment TOS
        (({}()))

        # TOS != 0
        ({[()](&lt;{}&gt;)}(){})

        # If TOS != 0...
        {
            # OPCode -5: pop
            # from the alternate stack
            {}
            &lt;&gt;
            {}

            # Go back to main stack and replace TOS with 2 zeros
            ((&lt;&gt;))
        }{}


    # And see whether any extra values were added to the stack during that last bit
    # Essentially this means: &quot;Push a 1 if none of the opcodes in that snippet matched, otherwise 0&quot;
    # Additionally, if one of the opcodes matched, there will be an extra value on this stack. Remember that, it's important.
    &gt;[[]])

    # If none of the opcodes matched...
    {
        # Pop a useless '1'
        {}

        # Push TOS - 5 onto alternate stack
        # This is the original positive integer that needs to be pushed
        ({}[()()()()()]&lt;&gt;)

        # Push THREE zeroes onto main stack
        (((&lt;&gt;)))
    }

    # Pop three values off the stack
    {}{}{}

}

# Switch to main stack
&lt;&gt;
</code></pre>
<p>I'm certain this could be golfed further.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.typescriptlang.org/" rel="nofollow noreferrer">TypeScript</a>’s type system, <s>324</s> <s>309</s> 250 bytes</h1>
<pre class="lang-typescript prettyprint-override"><code>//@ts-ignore
type F&lt;C,S=[],V=S extends[{},{},...infer R]?R:S&gt;=C extends`${infer I} ${infer R}`?F&lt;R,I extends`1${any}`?[I,...S]:{p:[S[1],...V],d:[S[0],...S],x:[S[1],S[0],...V]a:[`${S[0]}${S[1]}`,...V],s:S[1]extends`${S[0]}${infer Z}`?[Z,...V]:V}[I]&gt;:S
</code></pre>
<p><a href="https://www.typescriptlang.org/play?#code/PTAEHUFMBsGMHsC2lQBd5oBYoCoE8AHSAZVgCcBLA1UABWgEM8BzM+AVwDsATAGiwoBnUENANQAd0gAjQRVSQAUCEmYKsTKGYUAbpGF4OY0BoadYKdJMoL+gzAzIoz3UNEiPOofEVKVqAHSKysAAAqiCALQUzJzwToqohCgAYgA8AMK8xAC8ANoAurwAajnEoJAAHgo8gnkA3gC+vE28Ae0UnABmkGSgAEoFAPz9AFzEAHw5GRXVkLUABgAk9Z09fQCSjaAra70DjQtD6f28G7M13IILAIwrZniHQ3kbbe3EBaP1BKN5xHk3IrtALFIrcX7-AAMQPeRUqEIBRShMJBRQYv2W9WRjRW-0BhzeqN4gnGiKql2uuLy0Jxq26+wAWk88gzCaDRsVGi8ChNxsEkkRQAAvUA5UDpABEN1AN2l4llsplCuVCtAlVAwglExCoFAAD0hsEVIJUAxYABrDWYeASLzoAiRdCRaTwVDoRCKIA" rel="nofollow noreferrer">Try it at the TS playground</a></p>
<p>This is a generic type <code>F&lt;S&gt;</code> which takes input as a string type of space separated commands or unary numbers, space terminated. Output in unary, first element is top of stack.</p>
<p>Commands:</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th>name</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a</code></td>
<td>Add</td>
</tr>
<tr>
<td><code>s</code></td>
<td>Subtract</td>
</tr>
<tr>
<td><code>x</code></td>
<td>Swap</td>
</tr>
<tr>
<td><code>p</code></td>
<td>Pop</td>
</tr>
<tr>
<td><code>d</code></td>
<td>Duplicate</td>
</tr>
</tbody>
</table>
</div>
<p>I’m surprised by how short this is, especially considering I can probably golf it even more. Explanation is coming soon.</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-a</code>, <s>101</s> 92 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>map{/\W$/?eval&quot;\$a[-2]$&amp;=pop\@a&quot;:/x/?pop@a:push@a,/d/?$a[-1]:/s/?(pop@a,pop@a):$_}@F;say&quot;@a&quot;
</code></pre>
<p><a href="https://tio.run/##HYvBCsIwEAV/ZQlBFBu3rQQkIsnJm2cPpshCCwrVLEalIv66MfYyPJg33N16ndKF@I1@L9F2T@qFl3RQdSMnGw7sHQmDA9q8HRl@xJOjAlu0/1fVGIxop6MsRs6MPH7cdh3pJXKbklpCDRoUtJkRBljB/Bv4fg7XmNROL8qqTIp@" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<h3>Operations:</h3>
<ul>
<li><p><code>+</code> = add</p>
</li>
<li><p><code>-</code> = subtract</p>
</li>
<li><p><code>s</code> = swap</p>
</li>
<li><p><code>d</code> = duplicate</p>
</li>
<li><p><code>x</code> = drop</p>
</li>
<li><p>Anything with a digit in it is assumed to be a number.  This implies that this will work with integers and floats as well as allowing a sign indicator at the front of the number.</p>
</li>
</ul>
<p>Operators and numbers must be separated from each other by at least one space.  No error checking was specified, so this code does not do any.</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, 143 bytes</h1>

<pre class="lang-hs prettyprint-override"><code>([]#).words
(a:b:s)#(c:r)|c==&quot;s&quot;=(b:a:s)#r|c==&quot;+&quot;=(a+b:s)#r|c==&quot;-&quot;=(b-a:s)#r
(a:s)#(c:r)|c==&quot;d&quot;=(a:a:s)#r|c==&quot;x&quot;=s#r
s#(n:r)=(read n:s)#r
s#_=s
</code></pre>
<p><a href="https://tio.run/##VczLCsIwEIXhvU8xJC5SSsQL3QTmSVRkmrRaTGPJCHbhsxsbu1C3P985F@Jr431q8ZDU/iiL1eMWHS8UmdpwIZU1sXhaRMECVW0ox/gJ5RSorL9BZ6FnkQ/@5i7r3/kokCfHUoXJoIoNOQjzmOUJOfXUBRxiF@7LVmxgC3q3rmCEEhxUwKBFetnW05mTtsPwBg" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>
<h2>Operations</h2>
<ul>
<li><code>+</code> Add</li>
<li><code>-</code> Subtract</li>
<li><code>s</code> Swap</li>
<li><code>d</code> Dupe</li>
<li><code>x</code> Drop</li>
<li>Everything else is interpreted as a number</li>
</ul>
<p>All commands are separated by spaces, and this code does no error checking.</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/PowerShell/PowerShell" rel="nofollow noreferrer">PowerShell Core</a>, 132 bytes</h1>

<pre class="lang-powershell prettyprint-override"><code>switch -r($args){s{$a,$b,$s=$s
$s=$b,$a+$s}u{$b,$s=$s
$s=$b,$b+$s}r{$b,$s=$s}[+-]{$a,$b,$s=$s
$s=,(&quot;$b$_$a&quot;|iex)+$s}\d{$s=,$_+$s}}$s
</code></pre>
<p><a href="https://tio.run/##bU5Na4NAEL3vrxhkaJS4JSb00ENACO21pcktLcGPTWMw1e6sJGD87XZX0UTpHJa372Pm5dlZSDqINOVRJkWN@2VZ0zlR0QG4tDGQ3@SUVGLgYugiLZGYeTUOpkhVUY7p0NCyp6vtlH@N465tYYg7DKxrIi6OSXzGpRFwZz4VUl0x5tsM9Ljg25YHc5haLlgLy7lnY5nlhh6wM23msGgDnnevPUNc5MCNMBtumsOi2a@BN7qhE931oWbMT0DnoOlgsKnnwBVeM/kSRAf@Fh5FpKBsMqgEqVVAwgUUl1wLIoYl4G6oGqrHnPI0UTCBCWtdUlCRKu15wD34nW8sdogfs@Tnlt6@r1cFqezU9vry22Jm1kUUCSIw4b4cF7/dqseNTE620/s3/7btz3W2j7YH3Do1UsUqVv8B" rel="nofollow noreferrer" title="PowerShell Core – Try It Online">Try it online!</a></p>
<p>Takes an array in parameter containing the instructions, returns an array top to bottom.</p>
<pre class="lang-powershell prettyprint-override"><code>switch -r($args){                       # for each of the instruction switch as regular expressions:
s{$a,$b,$s=$s;$s=$b,$a+$s}              # s for Swap
u{$b,$s=$s;$s=$b,$b+$s}                 # u for dUp
r{$b,$s=$s}                             # r for dRop
[+-]{$a,$b,$s=$s;$s=,(&quot;$b$_$a&quot;|iex)+$s} # + or - for subtract and sum
\d{$s=,$_+$s}                           # to push a number
}                                       # end of the foreach
$s                                      # return the stack
</code></pre>
<p>Or <a href="https://tio.run/##bU5Na4NAEL37KwaZtopuiZEeeggIob22NLmlIfixaQym2h0lAbO/3e5qNTF0D8Pb9zHzivzIBe14lrE4F7zB7axu6JiW8Q6YsDAUX2TXVGPoYuQizZAMPRUOHSRZ1bd0pGkx0HLlsPVt3LVMjHCDoXlO@cnWic@k1gJu9EemWwvVXaTznRor5jiYrqVspGEElgHquRBYpgdTcEwXTN@0r9lE5IWmR@xEmRn4XcDzrrVnSKoCmBYm401T8Ft7C8Y3VOLvujfWfMU/AR3DtoOv8FTJNpzhNRcvYbxjb9GexyXUbQZLTuU8JO4C8lOhBJ7ADHAzVjU1YEZFlpbwAA9G5xKcqqxUnnvcQtD7bsUesX2efl/Sq/fFvKIyP3S91kFXTL9FFcecCHR4KMf4T7/qcSnSg2UP/uW/bYdzve2j6wGXTq0kDWk0vw" rel="nofollow noreferrer" title="PowerShell Core – Try It Online">153 bytes</a> if the order of the stack needs to be reversed</p>
</div>
<div id="pu10" class="pu"><h1><a href="https://go.dev" rel="nofollow noreferrer">Go</a>, <s>321</s> <s>320</s> 312 bytes</h1>
<pre class="lang-go prettyprint-override"><code>import(.&quot;strings&quot;;.&quot;fmt&quot;)
func f(c string)(o[]int){for _,e:=range Fields(c){n,a,b,A:=0,0,0,len(o)-1
B:=A-1
if A&gt;-1{a=o[A]}
if A&gt;0{b=o[B]}
switch e{case&quot;D&quot;:o=o[:A]
case&quot;d&quot;:o=append(o,a)
case&quot;s&quot;:o=append(o[:B],a,b)
case&quot;+&quot;:o=append(o[:B],b+a)
case&quot;-&quot;:o=append(o[:B],b-a)
default:Sscan(e,&amp;n);o=append(o,n)}}
return}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZVLBitswEKVXfcVUkCIROcQJC1sHLzhkeyylyS0NRbHl1NSRvZa8bRH-h957CYV-Rn-kX1PJcrJZFh2keW9mNPNmfv0-VKe_NU-_8oOAIy8kKo511WhYY1UWqVD4T6vz4Pbfq1tPkAlWuinkQeHFBOdHjSnKW5lCTlLwDCXVdldITU1eNfCZiShuuLT53xWizBRJqZGMsz1LonjK3CmFJBUNQrSM4sReRQ7JXRAaHlfbZNd5e2r21lxaU30rdPoFhEm5EniFo8oSUbJDvZ05m9e1kBmpGKceVdfoNlruXAUDN37B7cfnuOAlF1guEzlvSx2tVcolEeyNpIurXyXtOtQI3TayOwv4U_-oBWycSG2qwRSyHgRbgPheQ69Zh7yabhSEgkFaKK0gii29McjgEGYwxsx7m3nXsR5cXaABmVq_AOZXvmHoqbeQQXBBp-cMM5g_ubIZu6TOnv0Ynom5hW9APZXCbtjMUbaFD7YrXUqC4ziG9Sb5uAH7cpvSL4R2_fiV8O0ZxNMezImeWF2om_jr9eT-oeWlhaw8DKyLFaRPnRM8eoD4DkaPQEaP9JO0ZfSRvZt72xDa2VqelQL371cwlIKGwZxO_v4P" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Very straight-forward split-on-spaces then switch-on-token.</p>
<p>-1 by aliasing indexes and elements.
-8 by using the following instruction names:</p>
<ul>
<li><code>D</code>rop</li>
<li><code>d</code>uplicate</li>
<li><code>s</code>wap</li>
<li><code>+</code>, <code>-</code>, and integers</li>
</ul>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/dloscutoff/pip" rel="nofollow noreferrer">Pip</a> <code>-p</code>, 50 bytes</h1>
<pre><code>V&quot;lPU:&quot;.{@a?a(a.&quot;POl+:POl 0l@&gt;:2 @l lPK1&quot;^sa)}MJgl
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m724ILNgWbSSboFS7IKlpSVpuhY3jcKUcgJCrZT0qh0S7RM1EvWUAvxztK2AhIJBjoOdlZGCQ45CToC3oVJccaJmra9Xeg5Up3W1NZeJkUJBaXGGgokRV6YChGnAZaCtoM1loKugy2VgqJBSlF_AZWCkkFIKpIwVissTC7isayFGbIpWMlbSUTICYlMgNjCGOwsA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Takes commands as separate command-line arguments. Outputs the final stack as a list, top first. The commands are as follows:</p>
<pre><code>42  push nonzero number
i   push 0
0+  +
0-  -
01  drop
02  dup
03  swap
</code></pre>
<h3>Explanation</h3>
<p>As usual for language interpreters in Pip, this is a translate-and-eval solution. Since <code>l</code> is preinitialized to the empty list, we'll use that to store the stack. The overall logic of the program is:</p>
<pre class="lang-lisp prettyprint-override"><code>V&quot;lPU:&quot;.{...}MJgl
               g   ; List of command-line args
             MJ    ; Map this function to each and join into a single string:
        {...}      ;   Translation code (see below)
 &quot;lPU:&quot;.           ;   Prepend lPU: to each translated command
V                  ; Evaluate
                l  ; Print the final value of l (formatted nicely by -p flag)
</code></pre>
<p>Inside the translation function:</p>
<pre class="lang-lisp prettyprint-override"><code>@a?a(a.&quot;POl+:POl 0l@&gt;:2 @l lPK1&quot;^sa)
@a                                    ; First character of command
  ?                                   ; Is it truthy (nonzero)?
   a                                  ; If so, return unchanged (this is a push command)
    (                             a)  ; Otherwise, treat the command as an index into...
     a.&quot;                       &quot;      ;   Prepend the command to this string
                                ^s    ;   and split on spaces
</code></pre>
<p>which boils down to the following translation table:</p>
<pre class="lang-lisp prettyprint-override"><code>42  lPU:42          ; Push 42 onto l
i   lPU:i           ; Push i (preinitialized to 0) onto l
0+  lPU:0+POl+:POl  ; Pop number, add 0, pop another number, add, push result
0-  lPU:0-POl+:POl  ; Pop number, subtract from 0, pop another number, add, push result
01  lPU:0l@&gt;:2      ; Push 0, then remove first two elements of l
02  lPU:@l          ; Push first element of l
03  lPU:lPK1        ; Remove element at index 1, then push it
</code></pre>
</div>
<div id="pu12" class="pu"><h1>Trivial Eval/Exec Answers in Stack Languages</h1>
<p>For languages where the command set required is already a thing, and evaluating a string is the shortest solution.</p>
<p>Don't add answers in stack languages that aren't purely &quot;exec&quot;.</p>
<h2><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a> <code>W</code>, 1 byte</h2>
<pre><code>Ė
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyJXIiwiIiwixJYiLCIiLCIiXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Uses the command set <code>+-:$_</code> and <code>[0-9]+</code> for pushing numbers.</p>
<h2><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 3 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h2>
<pre><code>.V)
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f9fL0zz/39DBSMFbQVDhRgFQwMgU1fBGMi1VHABskBSxkDSBazEGEiaKhQDAA" rel="nofollow noreferrer">Try it online.</a></p>
<p>Uses the command set <code>+-Ds\</code> for <code>add</code>; <code>subtract</code>; <code>duplicate</code>; <code>swap</code>; <code>drop</code> respectively. <code>.V</code> executes the (implicit) input as 05AB1E code; and <code>)</code> wraps the entire stack into a list (which is output implicitly at the end).</p>
<h2><a href="https://github.com/molarmanful/sclin" rel="nofollow noreferrer">sclin</a>, 1 bytes</h2>
<pre><code>#
</code></pre>
<p><a href="https://scline.fly.dev/#H4sIAENId2UCA1MyVjBSMFUoLk8sUNIDAFWXUb8NAAAA#H4sIAENId2UCA1MGAP.eZXABAAAA#" rel="nofollow noreferrer">Try it on scline!</a> Uses <code>dup</code>, <code>pop</code>, <code>swap</code>, <code>+</code>, <code>-</code>.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.gnu.org/software/flex/" rel="nofollow noreferrer">flex</a>, 179 bytes</h1>

<pre class="lang-bash prettyprint-override"><code>%{
s[9];i;t;
%}
%%
a s[--i-1]+=s[i];
s s[--i-1]-=s[i];
d s[i++]=s[i-1];
x s[i-2]^=s[i-1]^(s[i-1]=s[i-2]);
p --i;
[0-9]+ s[i++]=atoi(yytext);
\n for(t=i;t--;)printf(&quot;%d &quot;,s[t]);
%%
</code></pre>
<p><a href="https://tio.run/##PZDBboMwDIbP81NYVdOCWFhhJxTYbbvuAVgqZRAgEiKIRCpo2rMzM7qd/PuT/eu3P5Xr1qbXM@b56/vbyr7AlZkURngB7BsYA4Wu5NzwREaFK40U4P4Jv5OaiIkiubWEBcwb4Km83sk12Gux41DAiGQhoLzwTEZ/68pbEyyL17OnkY8BGzsFvqA0nItwnMzgm@DAajw8utJvNoytlBugrSrkN6RL4mWJSVt0vRpa5H3TA9w602uctKpxnGwrsLbwoKvOIh/wuCE88xc84@mEv/gYxE@7QZ7n@0QItR30mmCKChIcIbmQdPhMbYb0AkhJ0@XwAw" rel="nofollow noreferrer" title="Bash – Try It Online">Try it online!</a></p>
<p>Uses:</p>
<ul>
<li><code>[0-9]+</code> push a number</li>
<li><code>a</code> sum</li>
<li><code>s</code> difference</li>
<li><code>d</code> dup</li>
<li><code>x</code> swap</li>
<li><code>p</code> drop</li>
</ul>
</div>
<div id="pu14" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 103 bytes</h1>
<p>-2bytes by l4m2</p>
<pre class="lang-javascript prettyprint-override"><code>p=&gt;p.split` `.reduce(([a=[],b=[],...S],i)=&gt;[{A:a+b,S:b-a,X:[b,a],P:b}[i]??[1/i?+i:a,a,b],S].flat(2),[])
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m70kLz8ldcGiNNulpSVpuhY30wts7Qr0igtyMksSFBL0ilJTSpNTNTSiE22jY3WSQISenl5wrE6mpq1ddLWjVaJ2kk6wVZJuok6EVXSSTmKsToBVUm10Zqy9fbShfqa9dqZVok6iTlKsTnCsXlpOYomGkaZOdKwm1Lp1yfl5xfk5qXo5-ekaaRrqhgpGCo7qmppcGOIB2EQNgMqDFYyxarFUcFEIxmqUkYIxVnEXHJYbA8VNFSKAMhBXL1gAoQE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Operators:</p>
<ul>
<li><code>A</code>: Add</li>
<li><code>S</code>: Sub</li>
<li><code>D</code>: Dupe</li>
<li><code>X</code>: eXchange</li>
<li><code>P</code>: Pop</li>
<li><code>\d+</code>: push Number</li>
</ul>
<p>One space between each tokens.</p>
<p>Output is the array where first value is stack top, and last value is stack bottom.</p>
</div>
<div id="pu15" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 114 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>f=-&gt;s,*r{s[/.+? ?/]?f[$',*r+(s&gt;?/?[s.to_i]:(q=r.pop;s&gt;?.?[q,q]:s&gt;?-?[]:(w=r.pop;s&gt;?,?[q-w]:s&gt;?+?[q,w]:[q+w])))]:r}
</code></pre>
<p><a href="https://tio.run/##VYq7CgIxEEV7vyKFkI15oXaR3fmQYRAsAlabhxJE/PY42mi6c@655X559B5nu1SzK8@K3mkQ4AkibiVPeqoLeMDqbuv5SmHKc3FpTSeeHWA2mQKjBeTWfs1ws@3b9OfGiFk3UkpRKK@eRES5FwdxFF7S5k/dqHZUM6qW1N8" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
<h3>Usage</h3>
<ul>
<li><code>/</code> dup</li>
<li><code>.</code> drop</li>
<li><code>-</code> subtract</li>
<li><code>,</code> swap</li>
<li><code>+</code> add</li>
</ul>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 48 bytes</h1>
<pre><code>ＷＳ≡§ι¹+⊞υ⁺⊟υ⊟υ-⊞υ⁻⊟υ⊟υr≔⊟υιu⊞υ↨υ⁰wＦＥ²⊟υ⊞υκ⊞υＩιＩυ
</code></pre>
<p><a href="https://tio.run/##fY@5CsMwEER7fYVwtcI25OjiykmVImDIFwifIkISOuJAyLcraxNsV2l22Nk3A1sP3NaayxjHQciWwlWZ4O/eCtUDY9SNwtcDhdJfVdO@QGR0j/ab1Ny1NEmTE62CGyBktJLBQaUNBIbLrIwVPzDfgDeh/pAWydI50asFEcsxbGrO6Ey6W7MjnjttKdy4gcPavWQeiDZtx4P0a9GFOw9iavmQCh/3MDsYLGI8kj1xIzeksRpHMORAUhLzp/wC" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Takes a list of newline-terminated words as input (could save two bytes by requiring symbols). Explanation:</p>
<pre><code>ＷＳ≡§ι¹
</code></pre>
<p>For each input string, switch on its second character.</p>
<pre><code>+⊞υ⁺⊟υ⊟υ
-⊞υ⁻⊟υ⊟υ
r≔⊟υι
u⊞υ↨υ⁰
wＦＥ²⊟υ⊞υκ
</code></pre>
<p>Handle <code>+</code>, <code>-</code>, <code>drop</code>, <code>dup</code> and <code>swap</code> respectively.</p>
<pre><code>⊞υＩι
</code></pre>
<p>Anything else is assumed to be a number to be pushed to the stack.</p>
<pre><code>Ｉυ
</code></pre>
<p>Output the final stack.</p>
</div>
<div id="pu17" class="pu"><h2>Regex (PCRE 2), 104 bytes (60 + 46)</h2>
<ul>
<li>+2 bytes to properly remove excess spaces after <code>~</code> commands</li>
</ul>
<p>Search:</p>
<pre><code>((1+) (1+) a)|((1+) \5(1+) -)|((1+) :)|((1+) (1+) s)|(1+ ~ ?)
</code></pre>
<p>Replacement:</p>
<pre><code>${1:+$2$3:${4:+$6:${7:+$8 $8:${9:+$11 $10:}}}}
</code></pre>
<p>Input and output in unary.</p>
<p>Each regex substitution resolves one operation, so you need to repeatedly use the regex to replace until the result doesn't change to get a final output.</p>
<p><a href="https://regex101.com/r/7CHzB8/3" rel="noreferrer">Try it online!</a></p>
<p>No language seems to support the PCRE 2 replacement syntax to allow writing an easy wrapper</p>
<ul>
<li><code>11111</code> push a number in unary</li>
<li><code>a</code> add 2 numbers</li>
<li><code>-</code> subtract the first number from the second</li>
<li><code>:</code> duplicate</li>
<li><code>s</code> swap</li>
<li><code>~</code> pop</li>
</ul>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/267442/">267442</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




