<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::265615</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>246</td><td>Python3</td><td>231001T021014Z</td><td><a href="https://codegolf.stackexchange.com/questions/265615/longest-sequence-of-egyptian-fractions-with-n-as-denominator/265633#265633">Ajax1234</a></td></tr>
<tr d-ix="1"><td>008</td><td>Vyxal R</td><td>230930T135411Z</td><td><a href="https://codegolf.stackexchange.com/questions/265615/longest-sequence-of-egyptian-fractions-with-n-as-denominator/265622#265622">lyxal</a></td></tr>
<tr d-ix="2"><td>050</td><td>Charcoal</td><td>230930T221829Z</td><td><a href="https://codegolf.stackexchange.com/questions/265615/longest-sequence-of-egyptian-fractions-with-n-as-denominator/265625#265625">Neil</a></td></tr>
<tr d-ix="3"><td>103</td><td>JavaScript ES6</td><td>230930T122322Z</td><td><a href="https://codegolf.stackexchange.com/questions/265615/longest-sequence-of-egyptian-fractions-with-n-as-denominator/265617#265617">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 246 bytes:</h1>
<pre class="lang-py prettyprint-override"><code>def f(n):
 q,t=[([*range(2,n)],[],1-(1/n))],[]
 while q:
  d,c,r=q.pop(0)
  if[]==d:continue
  if round(r,5)==0:t+=[c];continue
  if(U:=r-(1/d[0]))&gt;=0:q+=[(d[1:],c+[d[0]],U)]
  q+=[(d[1:],c,r)]
 return'+'.join(f'1/{i}'for i in max(t,key=len)+[n])
</code></pre>
<p><a href="https://tio.run/##VY3BTsMwEETv@QrfskuWNikqQkHmL3qyfKhimxrK2lk5ggrx7SGphFRuM2@eNPlSTokfnrLMs/NBBWDsKzVS0QbMnRz51cOOGC0ZS909dFvGa6nU5ymevRoXXTkaSPS4ySlDiwuIwVitXT8kLpEnf0VK0sQOhPaodduXRpvBPv9T4NBrWV@caS3iy6KNiwbOdL2loTErt3TA5V/dLiQrEl8m4bqpN28pMoS6237HnzokUVFFVh/HLyj07i/67BkbwxbnLJELBHhErP5yt78puxZx/gU" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>R</code>, 64 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 8 bytes, <span class="math-container">\$O(2^n)\$</span></h1>
<pre><code>ṗĖ'∑1=;t\+j
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyI9UiIsIiIsIuG5l8SWJ+KIkTE9O3RcXCtqIiwiIiwiNiJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Me when when fraction type automatically. Powerset is sorted by length by default, so the last item is guaranteed to be the longest.</p>
<h2>Explained</h2>
<pre><code>ṗĖ'∑1=;t\+j­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁢​‎‎⁪⁡⁪⁠⁪⁢⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁪‏⁠⁪⁪‏​⁡⁠⁡‌⁤​‎‎⁪⁡⁪⁠⁪⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁢⁡​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁣⁪‏‏​⁡⁠⁡‌­
ṗ            # ‎⁡Powerset of the range [1, input]
Ė           # ‎⁢get the reciprocal of each number
 '   ;      # ‎⁣Keep subsets where:
  ∑1=       # ‎⁤  The sum equals 1
      t\+j  # ‎⁢⁡Join the tail of that (which will always be the longest) on +s
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 50 bytes, <em>O(2ⁿ)</em></h1>
<pre><code>Ｎθ≔ΦＥ…Ｘ²⊖θＸ²θ⊕⌕Ａ⮌⍘ι²1⁼ΠιΣ÷Πιιυ¿υ⪫⁺1/Ｉ§υ⌕ＥυＬι⌈ＥυＬι+
</code></pre>
<p><a href="https://tio.run/##ZU/LTsNADLzzFaucvGJRlUqcegqUSqkoitovWLImtbRx2n2E/n1wggRCnOzxeMbj9mxDO1g/TTVfcnrL/TsGuOrNXRUjdQw78kkmB3uBo@UOoRk@Ba@N2mIbsEdO6ESgjfphFlTzL70jdpX3cMQRQ0R4shFPKRB3QEat5/WiLPRcX67Z@ghNGFxuE5CMTrmHmtOWRnL4hyG9aLLEpQ8FWatGTBPsB2JofI5QlKvCqGcbE1SpZoc3yEbNeZaXpH9F7tJZ7MToYG/Uy7V/lP4@VNxLyM00lY/Tw@i/AA" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｎθ
</code></pre>
<p>Input <code>n</code>.</p>
<pre><code>≔ΦＥ…Ｘ²⊖θＸ²θ⊕⌕Ａ⮌⍘ι²1⁼ΠιΣ÷Πιιυ
</code></pre>
<p>Get the powerset of <code>[1..n-1]</code> and see which sets' reciprocals sum to <code>1</code> when <code>1/n</code> is included.</p>
<pre><code>¿υ⪫⁺1/Ｉ§υ⌕ＥυＬι⌈ＥυＬι+
</code></pre>
<p>If any were found then output the longest.</p>
<p>53 bytes for a version that is twice as fast because it gets the powerset of <code>[2..n-1]</code>:</p>
<pre><code>Ｎθ≔ΦＥ⊗…Ｘ²⁻θ²Ｘ²⊖θ⊕⌕Ａ⮌⍘ι²1⁼ΠιΣ÷Πιιυ¿υ⪫⁺1/Ｉ§υ⌕ＥυＬι⌈ＥυＬι+
</code></pre>
<p><a href="https://tio.run/##ZY/bSsNAEIbvfYolV7MYkRS86lU0FiJGQvsE22SaDmxmmz3Evn2ctqKId8P3M/@hOxrfOWOXpeZTih9p3KOHSa/vyhBoYNiQjUIac4LKpb3FHraGB4TWfQpf5aohTgGmXK20ztUPrrDzOCJH@Zi0vmg1/6INcV9aC1uc0QeEZxNwFz3xAPRtlRXZ9e11SsYGaL3rUxeBBO3SCDXHimbq8Y9Ct6gkC@igIGnVimmEN0cMrZWmWfGY5erFhAhlrLnHM6RcXfpcV8r9jjzEo9iJUWPONEraP0nfgrJ7KbleluJpeZjtFw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code.</p>
<p><s>71</s> 66 bytes for an algorithm that is slightly faster because it stops considering fractions once the sum exceeds <code>1</code> (I don't know how this affects the time complexity though):</p>
<pre><code>Ｎθ≔⟦⟦θ⟧⟧ηＦ…²θＦ⮌η«≔⁺κ⟦ι⟧κ≔⁻Σ÷ΠκκΠκζ¿‹ζ⁰⊞ηκ¿∧¬ζ›ＬκＬυ≔⊞ＯΦκμθυ»⪫⁺1/Ｉυ+
</code></pre>
<p><a href="https://tio.run/##RY9PT8MwDMXP9FNYPTkiCIbEaacJBBoao4Jj1UNpvSZqm6z508MQn724oxMXK372@8WvUqWrbNlN09YcY9jH/oscDmKdbLzXjcE8H4pCgmLlYB3gR2kawnsJgxDwp9BIzhMqFr6Tq8WXddFjKyHXhZDQsv0yedOGR5@xx60JT3rUNWHmbB2rgO15l8u/wM1pdusD4I68x5OEO/4qi16hWtDUeYJ5Y2Nq3NuAJ7a9OCoDp9mRaYI6s5dnFAy4HMqc9yO5MliHz7qbHXx3L@aIEiLjf5LMaRPw1eolWLq6TSU8lj7MLAnpdSrEeppWD9PN2P0C" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>Ｎθ≔⟦⟦θ⟧⟧η
</code></pre>
<p>Input <code>n</code> and start with <code>1/n</code> as a required fraction.</p>
<pre><code>Ｆ…²θＦ⮌η«
</code></pre>
<p>For each integer from <code>2</code> to <code>n-1</code>, loop over all of the sets so far.</p>
<pre><code>≔⁺κ⟦ι⟧κ≔⁻Σ÷ΠκκΠκζ
</code></pre>
<p>Create a new set containing the current integer and calculate the excess of the sum of reciprocals.</p>
<pre><code>¿‹ζ⁰⊞ηκ
</code></pre>
<p>If the excess is negative i.e. the sum is less than <code>1</code> then add this to the list of sets to check next iteration.</p>
<pre><code>¿∧¬ζ›ＬκＬυ≔⊞ＯΦκμθυ
</code></pre>
<p>If the excess is zero i.e. the sum is <code>1</code> and this set is longer than any previously found set then set this as the longest found set so far.</p>
<pre><code>»⪫⁺1/Ｉυ+
</code></pre>
<p>Output the longest set found.</p>
</div>
<div id="pu3" class="pu"><h1>JavaScript (ES6), 103 bytes, <span class="math-container">\$O(2^n)\$</span></h1>
<p>Returns an empty string if there's no solution.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,a=o=[],p=0,q=1)=&gt;n?f(n-1,[&quot;1/&quot;+n,...a],p*n+q,q*n,p&amp;&amp;f(n-1,a,p,q))&amp;&amp;o.join`+`:o=p-q|o[a.length]?o:a
</code></pre>
<p><a href="https://tio.run/##ZcpBDoIwEEDRvcdg0XRgqNREFyQjByEkNAgIaWZaIa68ezVxZdy@/1f3dNvwWMJestzGlCbSjI6E2g4DVRjJAl25mTSXFtvMHrOC0RjjPj3nImLMGYNS38FhwAiglJhVFu6LvhYKZXxJ64wfed7vXSO1S4PwJn40XmY96QvA4Vfs@Y9OFUB6Aw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/265615/">265615</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




