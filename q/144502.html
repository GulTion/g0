<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::144502</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>759</td><td>Python3</td><td>240902T162937Z</td><td><a href="https://codegolf.stackexchange.com/questions/144502/make-a-bit-continent/275311#275311">Ajax1234</a></td></tr>
<tr d-ix="1"><td>611</td><td>Python 2</td><td>171212T072605Z</td><td><a href="https://codegolf.stackexchange.com/questions/144502/make-a-bit-continent/150430#150430">dylnan</a></td></tr>
<tr d-ix="2"><td>306</td><td>C gcc</td><td>171212T085028Z</td><td><a href="https://codegolf.stackexchange.com/questions/144502/make-a-bit-continent/150433#150433">Colera S</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>Python3, 759 bytes</h1>
<p>Long, but very fast.</p>
<pre class="lang-py prettyprint-override"><code>M=[(1,0),(-1,0),(0,-1),(0,1)]
E=enumerate
def G(d):
 q=[*d]
 while q:
  Q=[q.pop(0)];s=[*Q]
  for x,y in Q:
   for X,Y in M:
    if(T:=(x+X,y+Y))in q:s+=[T];Q+=[T];q=[*{*q}-{T}]
  yield tuple(s)
def F(a,b,d):
 Q,D=[(*i,[i])for i in a],{}
 for x,y,p in Q:
  R=[]
  for X,Y in M:
   T=(x+X,y+Y)
   if(v:=[i for i in b if T in i]):R+=v
   if d.get(T,-1)==0 and(D=={}or len(p)&lt;=min(D))and T not in p:Q+=[(*T,p+[T])]
  if R:D[H]=D.get(H:=len(p)-1,[])+[({tuple({*a,*p,*{i for j in R for i in j}}),*{*b}-{*R}},{**d,**{i:1 for i in p}})]
 return min(D[min(D)],key=lambda x:len(x[0])),min(D)
def f(b):
 d={(x,y):v for x,r in E(b)for y,v in E(r)}
 q=[([*G({i:d[i]for i in d if d[i]})],d,0)]
 for g,d,c in q:
  a,*b=g
  if[]==b:return c
  (g,D),C=F(a,b,d);q+=[(g,D,C+c)]
</code></pre>
<p><a href="https://tio.run/##fZRdb5swFIav519h9aY2uBVe22mi81XTtTedlIiLVh6aoJCUjhBCaJYI8duzY5uAmaIJEfB7vh6fY1Lu67dVcfW1rA6HJyEJZx5l5MI8PHbB9YPTEN2LtPhYplVUpyhJ5/iBJNRHeC2kk4QI/3nL8hSvQcFTIdeX5aokHg1vN2Cfgh3PVxXesT3OCjxVXlp4Zi9KeNICzuYk8AXZuc9s775QCpa1v3GFDMLbqXmoco2zbi@aoFVZ91maJ7j@KPOUbKgG@04iFjMNN2UT2JOTMZmFVNXLVLUoZE2LjkCs7JFmQh5JR2DBwIQM5tYXMsN9xhg0HKg3qOPPXLE1fji5XKQ1CVQfhfBwVCRkIkTTQmCeFqSk38QyK8iEUjBBhmJVqyylr7ZLnICVLuyaKirINvMn8jEUE5300RcmBQxLhtSVpDFtaJyIOSVzGgP4rhLOBtb3tqVgdGLooTNrW9Y4TsIccPf54FWCF1St0vqjKrBmlIY0ZL/TvcijZZxEeOcrhp30QkqZsesZzEms@p@IhkCLqb/tul2p3PdgVMs925plRVt9kIh0HghwJDCuniTRfQQFgFgC5zI0o1vA4hXrIwLdgS3HYqHbJEMhYr8jfwWJLNiEsjtxPBi3a9VcENmd@0rDw4aLs7Mz5GGO1W1@PfPbq93a2NFodbwRt/x6m/a1vY2vqrj5jAVWL3wohUyQNl/1Zq@/9LtViVsK7xWu69pxXkftWXFjH96XH9fSKNcdijcqy7vt2UmOzRmuMe6Awq2GGBRuI6ORvc9jt52jEaru3LiW7eONhjqqZu3rmOfU0MeE3ZRurCGarv7/TQd9@SfIkJ8cFbLIkM2s4tXHVq9@xauoSuAP0EefuoMvpbOMSpIVNcPZ5abMs5pQOnxW8yyv04r8WBUpw5vO4fxncQ5OCJUVBJI5GVJzSukJ@fNp@eq0fH1avgH58Bc" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu1" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 611 bytes</h1>

<p>A full program that takes a list of lists through user input. The functions <code>I</code> and <code>d</code> count the number of islands in the array. The for loop at the end enumerates through all possibilities of where you can change <code>0</code>s to <code>1</code>s then if there is one island left stores the number of <code>1</code>s added to the list <code>C</code>. The minimum of that list is the minimum number of bit flips required to connect any islands. It is a very slow algorithm so it doesn't run the test cases given in under 60s (I didn't try longer) but I tried a few smaller (~5x5) test cases and it seems to be working correctly. I got the island counting algorithm from <a href="http://www.geeksforgeeks.org/find-number-of-islands/" rel="nofollow noreferrer">this</a> page.</p>



<pre class="lang-python prettyprint-override"><code>from itertools import*
def d(g,i,j,v):
 v[i][j],R,C=1,[-1,1,0,0],[0,0,-1,1]
 for k in range(4):
&#9;if len(g)&gt;i+R[k]&gt;=0&lt;=j+C[k]&lt;len(g[0]):
&#9; if v[i+R[k]][j+C[k]]&lt;1and g[i+R[k]][j+C[k]]:v=d(g,i+R[k],j+C[k],v)
 return v
def I(g):
 w=len(g[0])
 v,c=[w*[0]for r in g],0
 for i in range(len(g)*w):
&#9;if v[i/w][i%w]&lt;1and g[i/w][i%w]&gt;0:v=d(g,i/w,i%w,v);c+=1
 return c          &#32;
g=input()
C=[]
for p in [list(t)for t in product([0,1],repeat=sum(r.count(0)for r in g))]:
 h,G,x=0,[r[:]for r in g],len(g[0])
 for i in range(x*len(G)):
&#9;if G[i/x][i%x]&lt;1:h+=p[0];G[i/x][i%x]=p[0];del p[0]
 if I(G)&lt;2:
&#9;C.append(h)
print min(C)
</code></pre>

<p><a href="https://tio.run/##XZI/k8IgEMXr41PQ3AzoniY3V6nYpHBsbRkKJ8GIJoRBYrxP7y2J/84UDDx25/0eWfcb9o39vl53vqmpCdqHpqlO1NSu8WFECr2jBSvBwAHOfEboWRolDwo2kIkU5FcKKSSQKJC4QjwqQneNp0dqLPVbW2r2g40fZkcrbVnJl2a8kUe1FMlCHMYZbhf9hUxUrKNYiCZ9DTr1BWqRbm1By3d5dhY9XK/CICImoV6H1lt67vnXaIrknXjYYAzIhexGeIisPrKWCpIB3TzRB@RRd0uAYNNOSfPZPZHuwjK540w7QAFB5vlYpA@anD4/UgpjXRsYJ5mQikRbF21lZU6BBR6FEAXnm6LNA8P3TRV47fQ2iFNbMz/Jm9YGlvBnBM4VJt3DCi4iAenl7F@@lwd4y3kZxbsVv@VcYaxLjHXBnLP9WDjsmr@og1DoisYNiT9tje2Lb@zPJlvntC3YnhPnjQ20NpZl/HqVMg5L@hiXYXD6AcJw6g8" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p>Pregolfed version before I optimized a few things:</p>

<pre class="lang-py prettyprint-override"><code>from itertools import*
def d(g,i,j,v):
    v[i][j]=1
    R=[-1,1,0,0]
    C=[0,0,-1,1]
    for k in range(4):
        if len(g)&gt;i+R[k]&gt;=0&lt;=j+C[k]&lt;len(g[0]):
            if v[i+R[k]][j+C[k]]&lt;1:
                if g[i+R[k]][j+C[k]]:
                    v=d(g,i+R[k],j+C[k],v)
    return v
def I(g):
    w=len(g[0])
    v=[[0]*w for r in g]
    c=0
    for i in range(len(g)):
        for j in range(w):
            if v[i][j]&lt;1and g[i][j]&gt;0:
                v=d(g,i,j,v)
                c+=1
    return c           
g=input()
z=sum(r.count(0)for r in g)
f=[list(t)for t in product('01',repeat=z)]
C=[]
for p in f:
    h=0
    G=[r[:]for r in g]
    x=len(G[0])
    for i in range(x*len(G)):
        exec('h+=int(p[0]);G[i/x][i%x]=int(p[0]);del p[0]'*(G[i/x][i%x]&lt;1))
    if I(G)&lt;2:
        C.append(h)
print min(C)
</code></pre>
</div>
<div id="pu2" class="pu"><h1>C (gcc), <s>308</s> 306 bytes</h1>

<p>Function <code>f</code> receives <code>(height, width, flattened array, pointer to ans)</code>, and returns answer by pointer.</p>

<p>If there's no <code>1</code> in the matrix, it will return <code>0</code>.</p>



<pre class="lang-c prettyprint-override"><code>#define v A[i]
N,M,K,R,C,T,i,*A;s(x,y){i=x*M+y;if(!(x&lt;0|y&lt;0|x&gt;=N|y&gt;=M|v^1))v=2,s(x,y+1),s(x,y-1),s(x+1,y),s(x-1,y);}g(i){if(C&lt;R){if(i^K){g(i+1);if(!v)C+=v=1,g(i+1),v=0,C--;}else{T=1;for(i=0;i&lt;K&amp;&amp;!v;i++);s(i/M,i%M);for(i=0;i&lt;K;i++)T&amp;=v^1,v=!!v;if(T)R=C;}}}f(n,m,a,b)int*a,*b;{K=R=(N=n)*(M=m),A=a;g(0);*b=R;}
</code></pre>

<p><a href="https://tio.run/##lVHBioMwEL37FWmXSqIjaxZ6SqdQPIo9iLfSgm1NCWzdpV2CYvPt7qi7UPa2YZK8mTfz8iCn6HI69f3LudKmrphlm53Ze1vIIIUcEijAQLBRd95AKzqDTZCFrTKaz3izih8t7WaN20e7xuxhD1IIi28wtodSTCCaQChJYgDRAJS7cEOKmierfLzNIRUdFWlufMCKJESLEqYaWIwhiSLlqvd71RUolf64cYOxMqvU92dWmTAUZNW8ZmAWmXjmR67wkSyS0Gxo1rwQOSbKOad5DVco4ShM/RWUEBxVl2KOfIu1CHiGVwEbLNWFx0IFR8yV66mTXUtTc@F1HhuyZLdnyLoYGIX8OT32tCbqN/5S8v9T8omSTk0@yvpOSPMlLOkHfUoF5Z834jSfL85zmEqu/wY" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>

<p><strong>Ungolfed:</strong></p>



<pre class="lang-c prettyprint-override"><code>N,M,R,C,T,i,*A; // height, width, result, recursion depth

s(x,y)
{ // depth first search: replace all 1 in the same connected component with 2
    i=x*M+y;
    if(!(x&lt;0|y&lt;0|x&gt;=N|y&gt;=M|A[i]^1)) { // check if out of boundary
        A[i]=2;
        s(x, y+1),s(x, y-1),s(x+1, y),s(x-1, y);
    }
}

g(i)
{ // enumerate all posible solutions
    if(C&lt;R) {
        if(i!=N*M) {
            g(i+1);      // nothing change for this entry
            if (!A[i]) { // set the entry to 1
                C++, A[i]=1;
                g(i+1);
                C--, A[i]=0;
            }
        }
        else {
            T=1;
            for (i=0; i&lt;N*M &amp;&amp; !A[i]; i++); // find first non-zero entry
            s(i/M, i%M);     // replace the connected component
            for (i=0; i&lt;N*M; i++) {
                T&amp;=A[i]!=1;   // check if no other components
                A[i]=!!A[i]; // change 2s back to 1
            }
            if (T) R=C;      // update answer
        }
    }
}

f(n,m,a,b)int*a,*b;{
    R=(N=n)*(M=m), A=a;
    g(0);
    *b=R;
}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/144502/">144502</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




