<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::258704</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>597</td><td>Python 3.8</td><td>240205T092121Z</td><td><a href="https://codegolf.stackexchange.com/questions/258704/custom-games-of-life/269801#269801">SevC_10</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8</a>, 597 bytes</h1>

<pre class="lang-python prettyprint-override"><code>from copy import deepcopy as p
def f(r):
 u,g,b,e={},0,[],' '
 for l in r:
  if g:b+=[list(l)];z=len(l);continue
  j=l[:1]
  if'T'&lt;j:c=[e,l[20]][l[6]&gt;'n'];u[c]=[]
  if'I'==j:
   n=[]
   for s in l[13:].split(' or '):
    n+=[int(s[0])]
    if s[3:]:v=[s[2],e][','&lt;s[3:4]]
   u[c]+=[[v,n,[l[-2],e][l[-3]&gt;e]]]
  if'O'==j:i=int(l.split()[4]);g=1
 for _ in e*i:
  h=p(b)
  for k in range(len(b)*z):
   r,c=k//z,k%z;v={k:0 for k in u}
   for j in range(9):x,y=j//3-1,j%3-1;v[b[(r+y)%len(b)][(c+x)%z]]+=1
   a=b[r][c];v[a]-=1
   for w in u[a]:
    if v[w[0]]in w[1]:h[r][c]=w[2];break
  b=p(h)
 return b
</code></pre>
<p><a href="https://tio.run/##7VjBbuIwEL3nKywBctK6QArtdkPde0@97J5ca5WkDnFwnchxoFD121nbAbrsrlbdA4dKMcrYDG/mvRlHHKZa67yUk5tKbbeZKp9BWlZrwJ@rUmnwxFjlvsc1qLwnloHMV0HkgQbNUYIYfn1DY0QoggB6ICsVEIBLoAwC8AzMo@QcE8Fr7YuAzjZYMGlOs7SUmsuGGVSBBYlC6vDwG7wtohQThgS5HFNKBLmmd1BCOmtISjHZ4e4hxoXlALL1OeraUgsSTiI6rCvBtQ@BccPAIYE0UrjUfk3GNHBBVmJNDDxaYlKTS4oYJRDBW@ucUoexvCaQLJFERs5FCzKHCb1jlO4EPThBHNv8YkcekCkNZnMcto35YdWxM27F5Ljyk8BrZS9cx2I5Z75tTxKcbVrFCqV4MRpt0GKwmS3x6yIavwc0b/uyi/f4r0H0gta4GI0mFyEqBsbOliQhvjpfB4M2OyV@ev4SDDbU1BXaJDFOiKKmToON6UXrtJlXjsj4on23lmRlukeNe0VCGuVtHF6Z3s0SxeKFASamuNwUp5hulATJVrNalwADCOH3mss50DkDaR6rONVMgR4yZEKUK@dvjxalGsHqyLvPrF8xEJtnbC80tCEut2l3CfrDY8zUYq6subbmizU3xyGy1LmhGHre3wT1/0PQdJ/r1/S9Dynq/xay03LI92ENk@PibKqHRleNdrGK1Y3QIM5saZdXgJs91ryUtbtjVzoTom7v@NTrUXYsHUvH0rF0LB1Lx/LpWPqH9flZen8cPi@LbVX7nPQdO9CctJYDzUnvxay9PSXL8X6ijvX2n@5/rGPpWDqWjqVj@ceCEHrefjDn9qFilYhT5sPHRwkRgMYGnuLznB0gu6mq@8XzDuPezHew3Zy1UnYKCuGwKLmd9gbbnw" rel="nofollow noreferrer" title="Python 3.8 (pre-release) â€“ Try It Online">Try it online!</a></p>
<p>Online custom game of life simulator: <a href="https://ncase.me/sim/?lz=N4IgtgpgLghiBcoAmEDOBjATgSwA5WwHsA7BEAYQHkA5AdQEEBNAcgGUACAcXoFkBRdpQBi7ADIBJIXwCEAHWIALKFFyp4AenURiAOgDu2ANZ4ISbDB2FMAc3UHj68iT0wAns1QB9TjEifCAGaeotgBEPLy5BLkANLsAGTsACIASvSc7CTsUAoQ7NY4SNmE7EiYMHrsYFZ5AQA2hHoQmKjsgDwbgBz7EcRCEBB17AGYfcXsw7h1MOh5ObUNTZjsBjnsMMSu7BDVAFbY7K6EAK5La1DsgLwbgJU7IAA0IGUVCABMdwGqCACMdxNuCFCYhwgAF87qhYFA0AgANqgbBIBAABju2HQJDIAGJbiBiL4IBisVMCCRUNDQKhsNZSPAQAAeAC8WOIhzAn1B4Ig4iSZARBPQROIJPgMJAYJgEM5ZA+WKgrlweOp1kInigStFEN5-MFUIAukDtXcZXKyKFPMQIBSFAAjKwgEFkilUkAAPgZdyZLPgABY2WKOVz4EiQISiALSSL2RLqU9pbL5SBFcrVeyNSGtbr9SBDXGTWaLdbMLaMygMDh8CGyLabrD4fAviAUWjqQASRm4sgtu7FrB4fkVu7B4lh8mUsiu7HMhDe8O+yMgaP9vmpocR-2BrNkBMqzxqvELzXQ9MG2PGoK56xWm12kUOsguxkTr0+8X+kBSvdLoVkleIo9GhVKrcdxTQchUPTNj2pHNzXPfNCyvOFnmRVFHXYVtIDIYhCBybBiGsLEu1LXtqWA0NP2vEdqTHd0EAAZifP0fyDRcQOFHdIzXCD4wApNfRItM9V-bNT2gi8Cz1ASQD0Kw6hrUBDlwJBeOpckwEOOpYDNI4STdET8wUQhCBrcADOGLFcEwQhcCsfcyLY1dvhgTAoEFBErzs1kQFwRznMRNzv3gF5PO8wUPgRVyM3JAAveVQAMJAcknQNcgtKBaJooEMqAA" rel="nofollow noreferrer">Emoji Simulator!</a></p>
<hr />
<p><em>Commented code</em></p>
<pre class="lang-python prettyprint-override"><code>from copy import deepcopy as p

def f(r):
    &quot;&quot;&quot;Takes as input a list of lines&quot;&quot;&quot;
    
    # dictiornary of rules of the grid
    u = {}
    # flag to extract lines of the grid
    g = 0
    # the grid, as a list of lists of characters
    b = []
    # space used to represent nothing
    e = ' '
    
    
    # PART 1
    # parse the rules
    
    # loop on the input lines
    for l in r:
        
        if g:
            # extract lines of the grid
            b += [list(l)]
            # extract the lenght of the row of the grid
            # used for the loop n the grid
            z = len(l)
            
            # skip other checks
            continue
        
        # extract the first character for each line
        # not [0] since it can be an empty line
        j = l[:1]
        
        if 'T' &lt; j:
            
            # line &quot;Using the character ...&quot;
            
            # extract the character
            # checking if the character is nothing
            c = [e, l[20]][l[6] &gt; 'n']
            
            # initialize an empty list for the rules associated to the character
            u[c] = []
        
        if 'I' == j:
            
            # line &quot;If there are ...&quot;
            
            # initialize list of repetitions
            n = []
            
            # the number of repetitions are split by or
            for s in l[13:].split(' or '):
                
                # extract the number
                # always the first element of the split
                n += [int(s[0])]
                
                # extract the character associated with the repetitions
                # the number is followed by the character
                # this means that the split string is longer
                if s[3:]:
                
                # character associated with the repetitons
                # checking if the character is nothing
                v = [s[2], e][',' &lt; s[3:4]]
            
            # add the rule
            u[c] += [[
            # character associated with the repetitons
            v,
            # list of number of repetitions
            n,
            # extract the new character to substitute
            # checking if the character is nothing
            [l[-2], e][l[-3] &gt; e]
            ]]
        
        if 'O' == j:
            
            # line &quot;Output the result ...&quot;
            
            # extract the number of steps
            i = int(l.split()[4])
            # set flag to extract the lines of the grid
            g = 1
    
    
    # PART 2
    # evaluate the steps on the grid
    
    # loop for i steps
    # e*i is an auxiliary string of length i to evaluate i steps
    for _ in e * i:
        
        # copy the previous grid state
        h = p(b)
        
        # loop on each cell of the grid
        # loop on height*width
        for k in range(len(b)*z):
            
            # extract the index of row, column from the &quot;total&quot; loop index
            r, c = k//z, k%z
            
            # initialize dictionary of count of neighbouring characters
            v = {k: 0 for k in u}
            
            # loop on the 3x3 square around the actual cell
            for j in range(9):
                
                # scale to range [-1, 0, 1]
                x, y = j//3 - 1, j%3 - 1
                
                # update the count of neighbour
                # extracting the corresponding character in the grid
                v[b[(r+y)%len(b)][(c+x)%z]] += 1
            
            # current character
            a = b[r][c]
            
            # remove the current cell from the count of neighbours
            v[a] -= 1
            
            # check rules
            for w in u[a]:
                
                # if count of neighbour is in list of number of repetitions
                if v[w[0]] in w[1]:
                    
                    # substituite actual character in the grid with the new one
                    h[r][c] = w[2]
                    
                    # rule found, skip others
                    break
        
        # update the actual grid
        b = p(h)
    
    # return the grid after the steps
    return b
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/258704/">258704</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




