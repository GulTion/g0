<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269269</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>023</td><td>05AB1E</td><td>240116T111154Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269289#269289">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>088</td><td>Google Sheets</td><td>240115T225051Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269270#269270">doubleun</a></td></tr>
<tr d-ix="2"><td>087</td><td>Ruby</td><td>240116T084123Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269286#269286">G B</a></td></tr>
<tr d-ix="3"><td>110</td><td>Python 3.8 prerelease</td><td>240115T231529Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269274#269274">l4m2</a></td></tr>
<tr d-ix="4"><td>076</td><td>R</td><td>240116T025423Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269283#269283">Giuseppe</a></td></tr>
<tr d-ix="5"><td>nan</td><td>C gcc</td><td>240115T225814Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269273#269273">vengy</a></td></tr>
<tr d-ix="6"><td>064</td><td>PARI/GP</td><td>240116T014630Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269281#269281">alephalp</a></td></tr>
<tr d-ix="7"><td>nan</td><td>Wolfram LanguageMathematica</td><td>240116T011738Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269278#269278">138 Aspe</a></td></tr>
<tr d-ix="8"><td>084</td><td>Google Sheets</td><td>240116T004028Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269276#269276">z..</a></td></tr>
<tr d-ix="9"><td>046</td><td>Charcoal</td><td>240116T004033Z</td><td><a href="https://codegolf.stackexchange.com/questions/269269/ellipse-lattice-point-counter/269277#269277">Neil</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 23 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>Ýí€ûnR**`âOIPns-D&lt;ds_‚O
</code></pre>
<p><a href="https://tio.run/##AS4A0f9vc2FiaWX//8Odw63igqzDu25SKipgw6JPSVBucy1EPGRzX@KAmk///1s1LDNd" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##yy9OTMpM/V9Waa@k8KhtkoKSfeXhCf8Pzz289lHTmsO784K0tBIOL/KvDMgr1nWxSSmOf9Qwy/@/zv/oaFMd41gdIGloCqQsdCCkIZC0hAgZQqWMDHSMDGJjAQ" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Ý                # Convert both values in the (implicit) input-pair to [0,value]-ranged
                 # lists
 í               # Reverse each inner list
  €û             # Palindromize each inner list
    n            # Square each inner value
     R           # Reverse the list
      **         # Multiply each to the (implicit) input-pair twice
        `        # Pop and push both lists separately to the stack
         â       # Create all possible pairs using the cartesian product
          O      # Sum each inner pair together
           IP    # Push the product of the input-pair
             n   # Square that
              s- # Subtract the sums of the list from that value
 D               # Duplicate this list
  &lt;              # Decrease each value by 1
   d             # Check for each value whether it's non-negative (&gt;= 0)
 s               # Swap so the duplicated list is at the top again
  _              # Check for each value whether it's equal to 0
    ‚            # Pair those two lists together
     O           # Sum the check of each inner list
                 # (after which the resulting pair is output implicitly)
</code></pre>
<p><a href="https://tio.run/##jZG9TsMwFIV3nuKqC1AlUiXEgkAdYOmAWpWxqsBJbvAVrh380womxGMgsTDDysJG34QXCbaTQioxMPs759xzrAzLCOu6N5KVs0fQS04@34c7vVMll6gtZMpysAoYzAbJkgmH81QzeY0FCDJRsH5uJFP0CoOALOdAUqL@Rd4aZMIEyUKrBd3/yX09vq4/GvTi1jG9BcX0QMntPMsRKkYaVBmNTGCmDXPuhKVK3DU@0SG0CRIKhdMotCvKo3O/37bXyCwCEwIqZQxlookwIcOLfepP0tX6pb3YLbrnBj68j9vqzvCYa2KxAiqtCpfb1rFzThCNJnJjmlnNPNYpUPoBvYZivEnbkznmN1Aq3SVXHL23BrK7JjQhS8tY9Oy4@K9sEFMuNx/o52KyAOPCCWozBOytOIXqfiGnoSTJBGg0fv79@LEPT@NhXc8Ok4P5Nw" rel="nofollow noreferrer">Try it online with step-by-step debug lines.</a></p>
</div>
<div id="pu1" class="pu"><h1>Google Sheets, 88 bytes</h1>
<pre><code>=frequency(sort(sequence(2*A1+1,1,-A1)^2/A1^2+sequence(1,2*B1+1,-B1)^2/B1^2),{1-9^-9,1})
</code></pre>
<p>Put <span class="math-container">\$a\$</span> in cell <code>A1</code>, <span class="math-container">\$b\$</span> in cell <code>B1</code> and the formula in cell <code>C1</code>. The output is in cells <code>C1:C2</code> with residue in <code>C3</code>.</p>
<p>Generates integer <span class="math-container">\$x\$</span> and <span class="math-container">\$y\$</span> sequences for lattice points in a rectangle that bounds the ellipse and calculates the distance from origin at each point. Uses <a href="https://support.google.com/docs/answer/3094286" rel="nofollow noreferrer">frequency()</a> to find points within and on the ellipse. The residue shows points within the bounding rectangle but outside the ellipse. Uses <a href="https://support.google.com/docs/answer/3093150" rel="nofollow noreferrer">sort()</a> but as an array enabler only.</p>
<p>Earlier proof-of-concept version to confirm that this is easily solvable in a spreadsheet (<strong>160 bytes</strong> golfed, 279 ungolfed):</p>
<pre><code>=let(a, A1, b, B1, r, 
  map(sequence(2 * a + 1, 1, -a), lambda(x, 
    map(sequence(1, 2 * b + 1, -b), lambda(y, let( 
      d, x^2 / a^2 + y^2 / b^2, 
      ifs( 
        d = 1, 2, 
        d &lt; 1, 1, 
        1, 0 
      ) 
    ))) 
  )), 
  { countif(r, 1), countif(r, 2) } 
)
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, 87 bytes</h1>

<pre class="lang-ruby prettyprint-override"><code>-&gt;a,b{*r=0,0,w=a*b;(k=*-w..w).product(k).map{|x,y|r[w*w&lt;=&gt;x*x+y*y]+=1[x%a+y%b]};r[0,2]}
</code></pre>
<p><a href="https://tio.run/##LcqxCoMwEADQvV/RRdDLGaJFKNjzR8INSYuLlIagJEH99ijY7Q3PLzblkXI9GLQreFKoMJAB25cTQR2kDJV0/vdZ3nM5VfJr3LpFTJvXAcKLhghRJEgsqNGxMCIVlvfea4Ut79ndR93hg28Xmu7SE/9oz6Y4Hw" rel="nofollow noreferrer" title="Ruby – Try It Online">Try it online!</a></p>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3.8/" rel="nofollow noreferrer">Python 3.8 (pre-release)</a>, 110 bytes</h1>

<pre class="lang-python prettyprint-override"><code>lambda a,b,q=2:[sum(0&gt;(t:=x*x*b*b+y*y*a*a-a*a*b*b)or(q:=q+(t&lt;1))*0for x in range(-a,a)for y in range(-b,b)),q]
</code></pre>
<p><a href="https://tio.run/##XctBDsIgEAXQvadgydBpAm2a1Ea8iLoYotUmlhbEpJwerRvRxSze//PnGG6TrdvZp16zY7rTaM7ECA06XXWHx3Pkcs9DpxexCCNMEUUUJKh832qYPHeddgUPOwUgZD95trDBMk/2euElIcGaxSwzaADQndLsBxt4zxusATZfqSZji79Smba/r@pvWkmsZN5/xukF" rel="nofollow noreferrer" title="Python 3.8 (pre-release) – Try It Online">Try it online!</a></p>
<p>Consider four quarter</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 76 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,b,z=c(a,b)^-2%*%t(expand.grid(-a:a,-b:b)^2))c(sum(z&lt;1),sum(z==1))
</code></pre>
<p><a href="https://tio.run/##HclNCoAgEEDhfadoE8zEGGkEIXmVQC2jRRb9QHR5S1ffg3cEl/csD@729lo2D5oMvcpGcWCiKIsLpmfXfqzmYxmBaamJGflfgWjhvFd4e46UQimOGBy01GAW4W20o4SoSdQYPg" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>May have issues due to numerical precision. Naive algorithm: loop over all lattice points in the <span class="math-container">\$2a \times 2b\$</span> grid centered around the origin, and count the points with the requisite relationship.</p>
<h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, 85 bytes</h1>

<pre class="lang-r prettyprint-override"><code>function(a,b,p=a^2*b^2,z=c(b,a)^2%*%t(expand.grid(-a:a,-b:b)^2))c(sum(z&lt;p),sum(z==p))
</code></pre>
<p><a href="https://tio.run/##HclNCoMwEEDhfU/hRpiRidgpQhFzlcBMbIoLY/AHipdP1dX34C05FL0pctij38Y5gpBSsuK4Usd0WA9Kgo7Lqtzg80sSh/q7jAMY6YSMdnpORA/rPsHRJ6Q7rE2IOUBLL3xcPNvLN91wQ9xg/gM" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>
<p>More precise.</p>
</div>
<div id="pu5" class="pu"><h1>C (gcc), <del>133</del> 121 bytes</h1>
<p><em>-12 thanks to @Neil</em></p>
<pre><code>i,x,y,l,B;e(a,b){i=B=0;for(x=-a;x&lt;=a;x++)for(y=-b;y&lt;=b;y++)l=a*a*b*b-x*x*b*b-y*y*a*a,l?i+=l&gt;0:B++;printf(&quot;%d %d\n&quot;,i,B);}
</code></pre>
<p><a href="https://tio.run/##PYrLCsIwFET3foUIhTxuIK0U1DQK@Q43SV8EYpUqmFD668ZYqJs5w5mpWV/XMVrwEMCBEi3SYPBkpZJcdPcRecm08JVMQSn@mSCZEaGSKZJxUhNNDDHME78wkJCMBnexVLozPylKxWO0w6tDu6zZZs112IEFhcUcb9oOCE@bFpWwx2JhXi7lACvzhcd1yP@XgkPBU5vjp@6c7p@Rvb8" rel="nofollow noreferrer">Try it online!</a></p>
</div>
<div id="pu6" class="pu"><h1><a href="https://pari.math.u-bordeaux.fr" rel="nofollow noreferrer">PARI/GP</a>, 64 bytes</h1>
<pre><code>f(a,b)=[1+vecsum(v=2*Vec(qfrep([a,0;0,b]^2,a^2*b^2)))-t=v[#v],t]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=NY_BCoJAFEV_5WGbGXuCMyEUYfQVbR5jjKIhWEw2DvYtbdxE39Tf5Giu7uXcy3vc18fotj5fzDC8O1tF2--xYhpznpJYu7J4dFfmUhmeyoLdq7Y0jDTG-xhzlUnUmQzzTHLOI5s6WjmFVv3vNNqY5sl6iA5g2vpmWU9CQYAQQE9ydD4JoJo4ToxzBKIEYTMCryLxZouwqG_SbgnEXFF8_rls-AE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Yes, PARI/GP has a built-in for this.</p>
<blockquote>
<p><code>qfrep(q,B,{flag=0})</code>: vector of (half) the number of vectors of norms from <code>1</code> to <code>B</code> for the integral and definite quadratic form <code>q</code>. If flag is <code>1</code>, count vectors of even norm from <code>1</code> to <code>2B</code>.</p>
</blockquote>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language(Mathematica)</a>, <del>135</del> 106 bytes</h1>
<p>Saved 29 bytes thanks to @vengy</p>
<hr />
<p>Here <code>a</code> and <code>b</code> both are positive integers.</p>
<p>Golfed version. <a href="https://tio.run/##hY7NT4NAEMXv/BVztGUaPkwTP7oX9EKipjcP69IMdJFN2l1TBi0h/O2INT0Zy2nmzXu/vNkTV3pPbAoahlLSBvONuhPPbtvstOxSEWIiwh4fnXw1XMmOxTGLA8pivx1nnsU9pqXkVYSp759WISJMfF8phd0RF4TUY9fiIse8V/ddikmvhgfXWH4iHov12hnLtSi9q/mL@8LWNVCQhabWwJWpoWxswcZZYAfFDzeeNex@Yfg40VC6A5Bt4c17N5/aAo1qC/l85v2tkkuEawVBsD6M8p9AtFQXAjcIU350yb@dKogmX4hDhDg8J4Zv" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-mathematica prettyprint-override"><code>f[a_,b_]:=Module[{I=0,B=0},Do[With[{t=x^2/a^2+y^2/b^2},If[t&lt;1,I++,If[t==1,B++]]],{x,-a,a},{y,-b,b}];{I,B}]
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##hVJNb4JAEL3zK97JtLINQmNiPzj1ZNI2Nj3StVlgURLZbWBpIYbfTkdRG02VZJOZN/PezOzsZsIsZSZMGom2fdKlMs/CEJIznSpTBOJzqoxcyJwh3Lsc9z5edFyuZGABayLKPNV5J4GPEZGpVCzy@i/WMOLSeS@zjQqYJsGu4FtQcQwGOMCaM2w5W1Y19xwx92CjJi8k7xEuw3Fb2z5Izoh8f6M6Hsy2@U7UWc62Zl0x3AgG0TCsa/JDEjaU4g/dJU7ufFq2sXh7NXzVP6zWJSKhUBYSZpkWSEoVmVQrGI1os28KS6y6peOrW1eicwhV48NapN9SQRCKEQ6vrX@eaMxwy@E4s5zgGYI75hcIE4a@vHspf9fXwO0dwaM/4432jPYX" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-mathematica prettyprint-override"><code>CountLatticePoints[a_Integer, b_Integer] := Module[
  {interiorPoints = 0, boundaryPoints = 0},
  
  Sum[
    If[IntegerQ[x] &amp;&amp; IntegerQ[y], 
      If[x^2/a^2 + y^2/b^2 &lt; 1, interiorPoints++, 
        If[x^2/a^2 + y^2/b^2 == 1, boundaryPoints++]
      ]
    ],
    {x, -a, a}, {y, -b, b}
  ];
  
  {interiorPoints, boundaryPoints}
]
</code></pre>
</div>
<div id="pu8" class="pu"><h1>Google Sheets, 84 bytes</h1>
<p>Assuming <span class="math-container">\$a\$</span> is in A1 and <span class="math-container">\$b\$</span> is in B1.</p>
<pre class="lang-cpp prettyprint-override"><code>=SORT(COUNTIF(SEQUENCE(2*A1+1,1,-A1)^2/A1^2+SEQUENCE(1,2*B1+1,-B1)^2/B1^2,{&quot;&lt;1&quot;,1}))
</code></pre>
<del>
92 bytes
<p>=SORT(COUNTIF(MAKEARRAY(2<em>A1+1,2</em>B1+1,LAMBDA(x,y,SUMSQ((x-A1-1)/A1,(y-B1-1)/B1))),{&quot;&lt;1&quot;,1}))
</del></p>
<del>
93 bytes
<p>=LET(a,A1,b,B1,SORT(COUNTIF(SEQUENCE(2<em>a+1,1,-a)^2/a^2+SEQUENCE(1,2</em>b+1,-b)^2/b^2,{&quot;&lt;1&quot;,1})))
</del></p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 46 bytes</h1>
<pre><code>ＮθＮηＦＸ×η…·±θθ²ＦＸ×θ…·±ηη²⊞υ⁻Ｘ×θη²⁺ικＩ⟦ΣＥυ›ι⁰№υ⁰
</code></pre>
<p><a href="https://tio.run/##dY4xC8IwEEb3/oqMF4igQifHDtKhpaibOMQSm2Cbtkmu/vx4EQRRXA4efO9xrZauHWUfY2knDDUOV@Vg5rvskzXxbXQMmvFBeDKD8qAFK23bozeLOkjbKahVJ4MiW7CZ09lyzn60@Z@mydBvrUGvAQWrjEX/7evXSLCGKmAEu3NODzbO2ACF9AHORxygklMq7J2iuku7NU/5YkTaYcILeTHm2SaPq6V/Ag" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Similar approach to @vengy's C answer.</p>
<pre><code>ＮθＮη
</code></pre>
<p>Input <code>a</code> and <code>b</code>.</p>
<pre><code>ＦＸ×η…·±θθ²
</code></pre>
<p>Loop <code>x</code> from <code>-a</code> to <code>a</code> inclusive.</p>
<pre><code>ＦＸ×θ…·±ηη²
</code></pre>
<p>Loop <code>y</code> from <code>-b</code> to <code>b</code> inclusive.</p>
<pre><code>⊞υ⁻Ｘ×θη²⁺ικ
</code></pre>
<p>Calculate the squared distance in from the perimeter, multiplied by <code>a²b²</code>.</p>
<pre><code>Ｉ⟦ΣＥυ›ι⁰№υ⁰
</code></pre>
<p>Output the number of points for where this is positive and the number for where this is zero.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269269/">269269</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




