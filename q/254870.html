<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::254870</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>061</td><td>Retina</td><td>231229T101133Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/268838#268838">TwiNight</a></td></tr>
<tr d-ix="1"><td>nan</td><td></td><td>221129T055046Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254980#254980">TwiNight</a></td></tr>
<tr d-ix="2"><td>092</td><td>R</td><td>221126T222310Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254905#254905">Dominic </a></td></tr>
<tr d-ix="3"><td>156</td><td>C++</td><td>221128T044225Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254930#254930">Remz</a></td></tr>
<tr d-ix="4"><td>009</td><td>Jelly</td><td>221124T220707Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254879#254879">Jonathan</a></td></tr>
<tr d-ix="5"><td>089</td><td>Python 3</td><td>221125T115824Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254888#254888">Jakque</a></td></tr>
<tr d-ix="6"><td>058</td><td>Wolfram Language Mathematica</td><td>221126T023157Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254895#254895">att</a></td></tr>
<tr d-ix="7"><td>108</td><td>Python 3</td><td>221124T194531Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254876#254876">The Thon</a></td></tr>
<tr d-ix="8"><td>483</td><td>Python 3</td><td>221125T175926Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254892#254892">Amir rez</a></td></tr>
<tr d-ix="9"><td>092</td><td>JavaScript ES6</td><td>221124T183818Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254873#254873">Arnauld</a></td></tr>
<tr d-ix="10"><td>017</td><td>05AB1E</td><td>221125T081403Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254886#254886">Kevin Cr</a></td></tr>
<tr d-ix="11"><td>043</td><td>sclin</td><td>221125T061806Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254885#254885">Mama Fun</a></td></tr>
<tr d-ix="12"><td>050</td><td>Charcoal</td><td>221125T010713Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254881#254881">Neil</a></td></tr>
<tr d-ix="13"><td>070</td><td>Retina 0.8.2</td><td>221124T230307Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254880#254880">Neil</a></td></tr>
<tr d-ix="14"><td>013</td><td>Vyxal</td><td>221124T185304Z</td><td><a href="https://codegolf.stackexchange.com/questions/254870/base-neutral-numbering-system/254874#254874">naffetS</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/m-ender/retina" rel="nofollow noreferrer">Retina</a>, 61 bytes</h1>
<pre><code>{+`\b(11+)(\1)+\b
1$#2*1,$.1*1
11+
&lt;$&amp;&gt;
(?=(11+)\1+\b|\b11)1

</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72sKLUkMy9xwTJVDS0N94SlpSVpuhY3bau1E2KSNAwNtTU1Ygw1tWOSuAxVlI20DHVU9Ay1DLmAElw2Kmp2XBr2tmBVMYZANTUxSYaGmoZcS4qTkos3amq6J3DpaXOp6Blw1iio6BpBzF5wi9EYZAAQgTGEgJIwCo2JwRt5ABJ4AA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Input is in unary. Output is same as OP except using <code>,</code> instead of <code>*</code></p>
<h2>Explanation</h2>
<pre><code>+`\b(11+)(\1)+\b
1$#2*1,$.1*1
</code></pre>
<p>Completely factorize each composite number, using a loop that extract one factor per iteration.</p>
<p>So, we are left with only ones and primes in the working string</p>
<hr />
<pre><code>11+
&lt;$&amp;&gt;
</code></pre>
<p>Wrap each prime in <code>&lt;&gt;</code></p>
<hr />
<pre><code>(?=(11+)\1+\b|\b11)1

</code></pre>
<p>Now we need to convert each prime into its &quot;prime index&quot;. We do so by removing <code>1</code>s:</p>
<ul>
<li>whose position from the end of the number is composite, or</li>
<li>that is the first <code>1</code> in the number and is follow by at least another <code>1</code></li>
</ul>
<p>For example, take 5 as an example</p>
<pre><code>1 1 1 1 1
↑ ↑ ↑ ↑ ↑
| | └-┴-┴------- Keep these
| └------------- Remove, because it is 4th 1 from the right, and 4 is composite 
└--------------- Remove, because it is the first 1 and is followed by another 1
</code></pre>
<hr />
<p>Finally, we loop all of the above (<code>{</code>) until fixpoint</p>
</div>
<div id="pu1" class="pu"><h1>JavaScript(ES2021)</h1>
<h2>Nested list output version, <s>86</s> 80 bytes</h2>
<pre class="lang-javascript prettyprint-override"><code>f=(n,a=[1,[1]],m=1)=&gt;a[n]??=n%++m?f(n,a,m,f(m,a)):[f(n&gt;m?a[0]:a[0]++),...f(n/m)]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=tZFPS8MwHIbxaD9FDsryozFdNweymvXkxcMUPJZAw5qUQv6MtkN07JN42UE_lH4aE4qD-efoJT948ibvQ_Lyal0l9_u3Ta8urt7vFcOWCFakpEg5J4alwBaisDzPmT2PY5OrECCGKGyIAJgXHixMLooxn4cljoFQSj1NDPDh3o-Tx5WzndOSalfj0pZ0LaobW-EpEFT6LBzI5TigpWuN0M2zrErayrUWK4kTkiY1GY0Aski5FmEte2QRQ2nmxzWaTvz09WgbnYa6HrWy2-jeJ0JDNtCDxNnW7o48bh_ulrTr28bWjXrCw2E48voj8pvhLvrhMJnN_MY3CQ__UWN4_6___QQ" rel="nofollow noreferrer">Attempt This Online!</a></p>
<h2>String output version, <s>89</s> <s>85</s> 82 bytes</h2>
<pre class="lang-javascript prettyprint-override"><code>f=(n,a=[1,1],m=1)=&gt;a[n]??=n%++m?f(n,a,m,f(m,a)):'&lt;'+f(n&gt;m?a[0]:a[0]++)+'&gt;*'+f(n/m)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=rZG9TsMwFEbFSJ7CQ5Ht2iR1SyXU1MnECANriBSrsSsk_1RpuhDlSVg6wEPB02ATEaCsLL7Sudc-n66fX6yr5fH4emjV5fXbveLIUsELRllJDWeYZ6KwZZ5ze0GIyVVoU0MVMlRgvIJrSDzLTC6KWbkKByGYwGz6yRODh5ffz243zu6dlrF2W1TZKt6J-sbWaIEpqPwoHsnVLKA71xihH59kXcWN3GmxkSihLNlSCDFOI-UagLRsgQUcsNSXNVjMffV-0EXnQdeCRu4PuvUTwZAOdAwx6Wz_O8ekGy70J2F-8DHLw_Q7TB_90c2XS9848Xn4P8Zhq1__9gE" rel="nofollow noreferrer">Attempt This Online!</a></p>
<hr />
<p>The output contains extraneous <code>*1</code>s.</p>
<p>This &quot;string version&quot; actually returns a number for input <code>1</code> and a string for other input numbers. This can be changed for +2 bytes.</p>
<hr />
<h2>Explanation</h2>
<h3>Algorithm</h3>
<p>The gist of the algorithm is to find the smallest factor <code>m</code>≥2 of <code>n</code> by brute-force trial division. Note that such an <code>m</code> must exist because <code>n</code> itself fits the criteria. Also note that <code>m</code> must be prime. Let <code>m</code> be the <code>k</code>th prime</p>
<p>During each iteration of the brute-force loop, we call <code>f</code> on the current divisor and cache the results in an array <code>a</code>. This ensures each prime &lt; <code>m</code> is processed exactly once before we find <code>m</code>.</p>
<p>That way, we can use a simple counter to determine <code>k</code>, by making <code>f(x)</code> increment the counter if and only if <code>x</code> is prime. Since <code>0</code> is not valid input, we can just use <code>a[0]</code> as the counter.</p>
<p>Once <code>m</code> is found, we recurse using the fact <code>n = m * (n/m) = &lt;k&gt; * (n/m)</code>. I.e.</p>
<pre><code>f(n) =  '&lt;' + f(k) + '&gt;*' + f(n/m)
</code></pre>
<p>with the base case being <code>f(1) = '1'</code>.</p>
<h3>Ungolfed code</h3>
<p>Changed the brute-force division from recursion to loop. Also changed the initial loop variable to make the code more idiomatic.</p>
<pre class="lang-javascript prettyprint-override"><code>function f(n, a = [1,[1]]) {
    if (a[n] !== undefined) {
        return a[n];
    }

    for (let m = 2;; m++) {
        if (n % m !== 0) {
            // This increments a[0] exactly once if m is prime
            f(m, a);
        } else {
            // Found a factor m, which is the a[0]-th prime

            // Increment the counter if m==n (i.e. n is prime)
            const k = n &gt; m ? a[0] : a[0]++;

            // Recurse (discard cache to save keystrokes)
            return a[n] = '&lt;' + f(k) + '&gt;*' + f(n/m)
        }
    }
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.r-project.org" rel="nofollow noreferrer">R</a>, <s>94</s> 92 bytes</h1>
<p><em>Edit: -2 bytes thanks to pajonk</em></p>
<pre><code>f=\(n,i=2,p=1)`if`(n&lt;2,1,`if`(n%%i,f(n,i+1,p+(sum(!i%%2:i)&lt;2)),paste(f(n/i),&quot;*&lt;&quot;,f(p),&quot;&gt;&quot;)))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72waMHapMTi1Pi81NKSosQc26WlJWm6Fjdj0mxjNPJ0Mm2NdApsDTUTMtMSNPJsjHQMdSBMVdVMnTSQAm1DnQJtjeLSXA3FTFVVI6tMTRsjTU2dgsTiklQNoAr9TE0dJS0bJaDqAiDLTklTUxNix87ixIKCnEoNQytDAx1kN0DlFyyA0AA" rel="nofollow noreferrer">Attempt This Online!</a>Outputs non-minimal base-neutral representations, as allowed, including quite a lot of <code>1*</code>s, but all expressions should evaluate correctly.</p>
<p>Based initially on <a href="https://codegolf.stackexchange.com/a/254888/95126">Jakque's Python answer</a> (upvote it) and golfed from there.</p>
</div>
<div id="pu3" class="pu"><h1>C++, 156 bytes</h1>
<p>(+40 bytes of header includes)
<a href="https://tio.run/##TY/NboMwEITP8BRbqkS2cFVMQqRinGOeohfiOMkiYiMw9IB4dspPovbgw858O@NVVfWhytzcxnc0qmwvGrLG1WhuR/9PQTtpOn8cx87iBU4EjYOONe6Spiu9tbTHK@mymNpQ7r/ETCjJGU6vYoW42pqIMMRMdoL2lSwkf2lFhoJWW4mbQvzcsdSk26CUEe27T4liyjtE4kQUs3QZYjE3vUm@VMViUKGsxDCMc@cjR0Mo9L6Xt86CaR9nXTcgoQfOYrZje5awA@MR4zsWJwkMwvemj8By04pD@tpbgrx/d0Ktm7Z00453IivEnhoVL1TZ1kGWQXDOGw08SiGYx2f4bHy7xTK6dXVePv01ZvVNMKUN/jD@Ag" rel="nofollow noreferrer">Try it online!</a></p>
<p>Header:</p>
<pre><code>#include &lt;string&gt;
#include &lt;iostream&gt;
</code></pre>
<p>My attempt at code. I find this exercise horrible, yet fascinating :)</p>
<pre><code>void F(int v,std::string&amp;o){if(v&lt;2)o+=49;int c=1,i=1,p,j;for(;++i&lt;=v;){p=j=1;for(;++j&lt;i;)p&amp;=i%j;while(v%i==0){v/=i;o+=60;F(c,o);o+=62;if(v!=1)o+=42;}c+=p;}}
</code></pre>
<p>Footer (calling the function):</p>
<pre><code>int main() {
    auto numbers = { 1,2,3,4,5,6,10,13,255 };
    for (int number : numbers) {
        std::string result;
        F(number, result);
        std::cout &lt;&lt; &quot;base 10: &quot; &lt;&lt; number &lt;&lt; &quot;\tbase neutral: &quot; &lt;&lt; result &lt;&lt; &quot;\n&quot;;
    }
}
</code></pre>
<p>Output:</p>
<pre><code>base 10: 1   base neutral: 1
base 10: 2   base neutral: &lt;1&gt;
base 10: 3   base neutral: &lt;&lt;1&gt;&gt;
base 10: 4   base neutral: &lt;1&gt;*&lt;1&gt;
base 10: 5   base neutral: &lt;&lt;&lt;1&gt;&gt;&gt;
base 10: 6   base neutral: &lt;1&gt;*&lt;&lt;1&gt;&gt;
base 10: 10  base neutral: &lt;1&gt;*&lt;&lt;&lt;1&gt;&gt;&gt;
base 10: 13  base neutral: &lt;&lt;&lt;1&gt;&gt;&gt;
base 10: 255 base neutral: &lt;&lt;1&gt;&gt;*&lt;&lt;&lt;1&gt;&gt;&gt;*&lt;&lt;&lt;1&gt;&gt;&gt;
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 9 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÆfÆCß€;¹?
</code></pre>
<p><strong><a href="https://tio.run/##y0rNyan8//9wW9rhNufD8x81rbE@tNP@v87h9qOTHu6coZL1qGGOgq2dwqOGuZqR//9HG@ooGOkoGOsomOgomOoomOkoGBoAMVDAyBTINzczjQUA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<p>A monadic Link that accepts a positive integer and yields a ragged list of ones - that is, a list of <code>1</code>s where inner nesting is the prime counting and adjacency is multiplication.</p>
<hr />
<p>A full program that prints that without the outer <code>[]</code> is <span class="math-container">\$15\$</span> bytes:</p>
<pre><code>ÆfÆCß€;¹?
ÇŒṘṖḊ
</code></pre>
<p><strong><a href="https://tio.run/##y0rNyan8//9wW9rhNufD8x81rbE@tNOe63D70UkPd854uHPawx1d/3UOt2c9apijYGun8Khhrmbk///RhjoKRjoKxjoKJjoKpjoKZjoKhgZADBQwMgXyzc1MYwE" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></strong></p>
<h3>How?</h3>
<pre><code>ÆfÆCß€;¹? - Helper Link: positive integer, I
Æf        - prime factors
  ÆC      - number of primes up to (vectorises across that)
        ? - if...
       ¹  - ...condition: no-op
    ß€    - ...then: call this Link for each
      ;   - ...else: concatenate (I) - N.B. Only 1 has no prime factors, so concatenate 1.

ÇŒṘṖḊ - Main Link: positive integer, I
Ç     - call the Helper Link (with I)
 ŒṘ   - get the Python representation (of that)
   Ṗ  - pop
    Ḋ - dequeue
      - implicit print
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>90</s> 89 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,i=2,p=1:1//n or n%i and f(n,i+1,p+(f(i)&gt;&quot;.&quot;))or(n&gt;i)*f&quot; {f(n/i)}*&quot;+f&quot;&lt;{f(p)}&gt;&quot;
</code></pre>
<p><a href="https://tio.run/##FYxBCsIwEADvvmJZELLNak17KyZ/idTogm5C6EWkb4/xOMww5bM9s86tJf@K79saQVn8xMW7xY2jQq6gR4GoKyTTnXVcrElGKOAZiXI1GoSGhPDtwSi0D2gTXjsV2gO21BcColCjPu7G8XSh5QBQquhmhAFPARn@S2o/" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<blockquote>
<p>&quot;You may also add spaces or line breaks anywhere&quot;</p>
</blockquote>
<p>Wait a minute, I can totally (ab)use that!</p>
<h2>Explanation :</h2>
<pre class="lang-py prettyprint-override"><code>f=lambda n,i=2,p=1:
# f: recursive function
## n: input
## i: increment to have a prime that divide n
## p: prime index of i

1//n          # if n == 1: return 1
or              # else 
n%i and f(      # if i is not a divisor of n recurse
  n,              # with same input
  i+1,            # increment i
  p+(f(i)&gt;&quot;.&quot;))   # increment p if i is prime (no leading space)
or              # then (assuming that i is prime and divide n and p the index of i)
(n&gt;i)*          # if n//i &gt; 1 
  f&quot; {f(n/i)}*&quot;   # recurse adding a space before and a &quot;*&quot; after
+f&quot;&lt;{f(p)}&gt;&quot;    # add to the representation of i
</code></pre>
<p>-1 byte thanks to @Dominic van Essen</p>
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>99 83</s> 77 bytes, cheaty (but totally legit) version</h1>
<p>This version abuse of list representation and the fact that <code>&lt;...&gt; * 1</code> is &quot;equal&quot; to <code>&lt;...&gt;</code> to produce non canonic expressions. But the author authorised it so ¯\_(ツ)_/¯</p>
<p><code>&lt;...&gt; * &lt;...&gt;</code> representation is <code>[...], [...]</code> with total result enclosed with <code>[]</code></p>

<pre class="lang-python prettyprint-override"><code>f=lambda n,i=2,p=1:1//n*[1]or n%i and f(n,i+1,p+2//len(f(i)))or[f(p)]+f(n//i)
</code></pre>
<p><a href="https://tio.run/##JcxBCsIwEEDRvacYCkLGTokTd4F4kdJFpI0O1EmI3Xj6GHD9@L98j1fWW2sp7PH9WCMoSXBUAnu2Vi8zL7mCngWirpBM55GpjM7afVOTjCBirnMyBZexu7WCLfVGQBRq1OdmmNwV/QmgVNHDCMEw3QeCz1H/h5n9xAu2Hw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>the process is the same but we check the length of <code>f(i)</code> do detect if it is prime.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.wolfram.com/wolframscript/" rel="nofollow noreferrer">Wolfram Language (Mathematica)</a>, 58 bytes</h1>
<pre><code>#0/@(Join@@Table@@@FactorInteger@#/.#-&gt;PrimePi@#/.{0}-&gt;1)&amp;
</code></pre>
<p><a href="https://tio.run/##Fc1BC4JAFATg@/4NQQpWVy07FMmDICgshLpFxEtWXXDXsGcQon/dtsMc5pvDaKRKaiSV41RsJycQMDs2ygBc8VlLANhjTk17MCRL2YIjfMdLslZpmal/64PBS8K5O1kzdLNjYVn4@EjVm8QmlaakCjAJ18m5MbtG647s30eeuprUq/4C4N0dLzmasWchZxFnC86WnMWcrTgLAxsLURyzYfoB" rel="nofollow noreferrer" title="Wolfram Language (Mathematica) – Try It Online">Try it online!</a></p>
<p>Uses <code>{ }</code> to represent both operations, depending on the number of elements. Test output converts lists with &gt;1 element into <code>NonCommutativeMultiply</code> (<code>**</code>) for clarity.</p>
<pre><code>    Join@@Table@@@FactorInteger@#                       prime factorize
#0/@                                                    recurse on factors
                                 /.#-&gt;PrimePi@#         prime input: recurse on #prime instead
                                               /.{0}-&gt;1 1=input: return 1
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 108 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,k=2,p=1,m=1:n&gt;1and(n%k and f(n,k+1,p+all(k%i for i in range(2,k)),m)or[f(p)]+f(n/k,k,p,0))or[1]*m
</code></pre>
<p><a href="https://tio.run/##XY0xDsIwDEWv4qWqTQ3UZauUXgR1CCqBKI0bhS5w@RBWpi@9r6eX3vtz00spzqw23hYLysEMnIxwNDLqJFYX1CZAXXBY7044dXZdMTQe3JbBg1fIVh93HDgQcaQtXx0mmrtqnAMHTtzTj8p8iOVPEpa@pzFlrzu@9oyeTh/na2Egbo9Ty64iKl8" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<p>Suggested by Mukundan314. Outputs nested lists.</p>
<h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>140 139 136</s> 135 bytes</h1>

<pre class="lang-python prettyprint-override"><code>f=lambda n,k=2,p=1,m='':(f(n,k+1,p+all(k%i for i in range(2,k)),m)if n%k else m+f'&lt;{f(p)}&gt;'+f(n/k,k,p,'*'))if n&gt;1 else'1'if m==''else''
</code></pre>
<p><a href="https://tio.run/##XY7NDsIgEIRfZS/NsrJqqbdG@i4YixJ@Smgvanx2JD16/L5MZia/tueSLrVaHUy83Q0k9nrgrBVHjTgKK5qRirM0IQjfObBLAQcuQTHpMYuBPRFHchZS52EO6wxRWrx@rMj0nVC2irNnz5nxgLQHJ7UHUWGjqNvSjlj/yhWD6nsac3FpE@tWhKPT27p2ZSDG44Rsm6L6Aw" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
<ul>
<li>-1 thanks to Arnauld</li>
<li>-3 thanks to Seb</li>
</ul>
<p>Port of Arnauld's JavaScript answer. Outputs the string shown in the test cases.</p>
</div>
<div id="pu8" class="pu"><h1>Python 3, 483 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda n,p=2:[]if n==1 else [p]+f(n//p,p=p)if n%p==0 else f(n,p=list(filter(lambda x:all(x%i!=0for i in range(2,(x//2)+1,2)),range(p+1,2*p)))[0])
g=lambda p,t=2,c=1:c if p in list(filter(lambda x:all(x%i!=0 for i in range(2,x)),range(2,t+1)))else g(p,t=list(filter(lambda x:all(x%i!=0 for i in range(2,x)),range(t+1,2*t)))[0],c=c+1)
r=lambda n:[[i]if i==1 else r(i)for i in[g(i)for i in f(n)]]
s=lambda n:str((lambda n:[[i]if i==1 else r(i)for i in [g(i)for i in f(n)]])(n))[1:-1]
</code></pre>
<p><a href="https://tio.run/##pZBBa8QgEIXv@RXThQWncUm0N8H@EfGQpkkquO5gPKS/PtVNNy1soYVehJmH33vz6D29XcLTuo7ad@eX1w4CJy2VsW6EoLWAwc8DGLL1yELTUFYJi3YkrdtNzUpeezcnNjqfhsg@WYvqvGfL0T3odrxEcOACxC5MA5OcLU0jsRZcIvJtSWV6JEQ0rcVqumUinrTkvRaqh@xNBfOLHdz5LbuN5KkW2eQafmKF/g9auoZOW@gcss/sKu51KmNcKdPtZUbm8MYz07ehFInWVvPX5zlFxv6Ggp9YmF80Qp2EXe9uANmiqgAoupCY43A4PR84zBmD6wc" rel="nofollow noreferrer">Try online!</a></p>
<p>More cleaner version:</p>
<pre class="lang-python prettyprint-override"><code>f = lambda n, p=2: [] if n==1 else [p] + f(n//p, p=p) if n%p == 0 else f(n, p=list(filter(lambda x: all(x%i != 0 for i in range(2, (x//2)+1, 2)), range(p+1, 2*p)))[0])
g = lambda p, t=2, c=1: c if p in list(filter(lambda x: all(x%i != 0 for i in range(2, x)), range(2, t+1))) else g(p, t=list(filter(lambda x: all(x%i != 0 for i in range(2, x)), range(t+1, 2*t)))[0], c=c+1)
r = lambda n: [[i] if i == 1 else r(i) for i in [g(i) for i in f(n)]]
s = lambda n: str((lambda n: [[i] if i == 1 else r(i) for i in [g(i) for i in f(n)]])(n))[1:-1]
</code></pre>
<h2>Explanation:</h2>
<p><code>f</code> will factor the input numbers and return the factorization result in a list.</p>
<pre class="lang-python prettyprint-override"><code>&gt;&gt;&gt; f(12)
[2, 2, 3]
</code></pre>
<p><code>g</code>'s input is a prime and return the index of that prime. In other words <code>n = g(p)</code> means that <code>p</code> is the <code>n</code>th prime number.</p>
<pre class="lang-python prettyprint-override"><code>&gt;&gt;&gt; g(2)
1
&gt;&gt;&gt; g(3)
2
&gt;&gt;&gt; g(13)
6
</code></pre>
</div>
<div id="pu9" class="pu"><h1>JavaScript (ES6), 92 bytes</h1>
<p>Borrowing an optimization from <a href="https://codegolf.stackexchange.com/a/254888/58563">Jakque's answer</a>, as suggested by <a href="https://codegolf.stackexchange.com/users/91267/mukundan314">@Mukundan314</a>.</p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,k=2,p=1)=&gt;n&lt;2?1:n%k?f(n,k+1,p+(P=d=&gt;k%--d?P(d):d&lt;2)(k)):`&lt;${f(p)}&gt;`+(n&gt;k?'*'+f(n/k):'')
</code></pre>
<p><a href="https://tio.run/##FY29asMwFEb3PsUdGnRvJTuVUndQLXnKHshYChFWnB8FSTiiS8mzO@pw@ODAx7m6X3cf50suTUz@uCyTwSiCUSIbScbGXg1Sx1UYpn/Ppcgcd8YbG1ZN44cdetK@V4SBSB/6178JMz3sgWO0YWBvjNfjOpBmjJavb5AClICNgA8BnYBPAfK9UoXqOvh5aac0b914xgjGwpjiPd2O7S2dMLYl7ct8iSekNju/L24uuCHgwDSwOrVERMsT" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 96 bytes</h1>
<p><em>-4 thanks to <a href="https://codegolf.stackexchange.com/users/91267/mukundan314">@Mukundan314</a></em></p>

<pre class="lang-javascript prettyprint-override"><code>f=(n,m,k=2,p=1)=&gt;n&gt;1?n%k?f(n,m,k+1,p+(P=d=&gt;k%--d?P(d):d&lt;2)(k)):[m]+`&lt;${f(p)}&gt;`+f(n/k,'*'):m?'':1
</code></pre>
<p><a href="https://tio.run/##JY29asMwFEb3PsUdGqRbXbuVU2dQInnqHsgYAhFWnB/FknBEltBndwUdDh8c@Dg3@7SPfrqmXIXoTvM8aB5oJK8bSlqiNsHILix8N/x7ISkJvtVOG7@oKtdtuUPlNg1yj6j240EcN@@vgSf8NUdRXp@e2AdDNXaMKTmv9yAJGoIlwTdBS7AikF@FIpq2hcNbPcTpx/YXHkAb6GN4xPupvsczD3WOuzxdw5ljnazbZTtlvkQQwBSwMiWIiPMf" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (             // f is a recursive function taking:
  n,              //   n = input
  m,              //   m = either undefined or '*'
  k = 2,          //   k = current divisor
  p = 1           //   p = 1-based index of the smallest prime &gt;= k
) =&gt;              //
n &gt; 1 ?           // if n is greater than 1:
  n % k ?         //   if k is not a divisor of n:
    f(            //     do a recursive call:
      n,          //       leave n unchanged
      m,          //       leave m unchanged
      k + 1,      //       increment k
      p + (       //       pass either p or p + 1
        P = d =&gt;  //       according to the result of P(k)
        k % --d ? //       where P is a recursive helper function
          P(d)    //       testing whether k is prime
        :         //
          d &lt; 2   //
      )(k)        //
    )             //     end of recursive call
  :               //   else:
    [m] +         //     append m (force an empty string if undefined)
    `&lt;${f(p)}&gt;` + //     append '&lt;', followed by f(p), followed by '&gt;'
    f(            //     append the result of a recursive call:
      n / k,      //       divide n by k
      '*'         //       enable the multiply sign
    )             //     end of recursive call
:                 // else:
  m ? '' : 1      //   stop the recursion; append '1' if m is undefined
</code></pre>
</div>
<div id="pu10" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 17 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>&quot;Di¸ëÒεÅPg®.V&quot;©.V
</code></pre>
<p>Recursion isn't exactly 05AB1E's strong suit.. As in, I have to use strings and <code>eval</code>s to mimic recursive behavior.</p>
<p>Outputs just like some of the other answers as a nested list, including additional wrapped list around the entire output (e.g. <code>[[[1],[1]]]</code> for <span class="math-container">\$n=7\$</span>).</p>
<p><a href="https://tio.run/##ASMA3P9vc2FiaWX//yJEacK4w6vDks61w4VQZ8KuLlYiwqkuVv//Ng" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##AUgAt/9vc2FiaWX/dnk/IiDihpIgIj95/yJEacK4w6vDks61w4VQZ8KuLlYiwqkuVv8s/1sxLDIsMyw0LDUsNiw3LDEwLDEzLDI1NV0" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>&quot;...&quot;      # Push the recursive string explained below
     ©     # Store it in variable `®` (without popping)
      .V   # Evaluate and execute it as 05AB1E code,
           # using the (implicit) input-integer as argument
           # (after which the result is output implicitly)

D          # Duplicate the current integer
 i         # If it's exactly 1:
  ¸        #  Wrap this 1 inside a list: [1]
 ë         # Else:
  Ò        #  Get the prime factors (including duplicates) of the integer
   ε       #  Map over each prime factor:
    ÅP     #   Convert it to a list of primes &lt;= this prime factor
      g    #   Pop and push the length to get the amount of primes in this list
       ®.V #   Do a recursive call by evaluating and executing string `®`
</code></pre>
</div>
<div id="pu11" class="pu"><h1><a href="https://github.com/molarmanful/sclin" rel="nofollow noreferrer">sclin</a>, 43 bytes</h1>
<pre><code>P/&quot;*`&quot;mapf&quot;$P rev.= find:1+ @&quot;map&quot;&quot;Q1.,, |#
</code></pre>
<p><a href="https://replit.com/@molarmanful/try-sclin" rel="nofollow noreferrer">Try it here!</a> Outputs as <code>[[[1]] [[[1]]] [[[1] [1]]]]</code> where each space replaces <code>*</code>.</p>
<p>For testing purposes:</p>
<pre><code>[1 2 3 4 5 6 10 13 255] ( ; f&gt;o ) map
P/&quot;*`&quot;mapf&quot;$P rev.= find:1+ @&quot;map&quot;&quot;Q1.,, |#
</code></pre>
<h2>Explanation</h2>
<p>Prettified code:</p>
<pre><code>P/ \*` mapf ( $P rev.= find: 1+ @ ) map dup 1.,, |#
</code></pre>
<ul>
<li><code>P/ \*` mapf</code> prime factors converted from frequency map to list</li>
<li><code>(...) map</code> for each prime factor...
<ul>
<li><code>$P rev.= find: 1+</code> get its index (1-indexed)</li>
<li><code>@</code> execute this line (i.e. recurse)</li>
<li>since 1's list of prime factor is empty, <code>map</code> doesn't trigger recursion on 1s</li>
</ul>
</li>
<li><code>dup 1.,, |#</code> replace empty list with <code>[1]</code>
<ul>
<li>boolean check works here because empty lists are falsy in sclin</li>
</ul>
</li>
</ul>
</div>
<div id="pu12" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 50 bytes</h1>
<pre><code>≔⟦⟧θＦ²⊞υ1ＦＥ…·²ＮΦ…²ι¬﹪ιλ⊞υ⎇ι⁺⁺§υ⌊ι*§υ⌈ι⪫&lt;&gt;§υＬ⊞Ｏθω⊟υ
</code></pre>
<p><a href="https://tio.run/##VY5Bi8IwEIXv/oqQ02SJhy14chG8LFS2bhFv4iHWbDuQTmqauPrrYyIoOofHzPuGedN0yjVWmRiX44gtwW4v2UnMJ3/WMSgEq8PYQZCMf/KHW6kBSmpMGPGsN4paDYVkJQ3Br0N/0A6EkOwbjU/tk2Py1tZDZY/BWEDJjMj1TNhqR8pdM6nTbbjL0pd01JfMKyTsQw@Yr/MPnvSVqsuDJrCySMC/Fvxt50dT6zvIgb@DdspbByfJ/u9/zCe1Q/JQ2wFCGmMsZrM4PZsb" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation:</p>
<pre><code>≔⟦⟧θ
</code></pre>
<p>Start with no prime numbers discovered.</p>
<pre><code>Ｆ²⊞υ1
</code></pre>
<p>Start with a dummy entry for <code>0</code> and an entry of <code>1</code> for <code>1</code>.</p>
<pre><code>ＦＥ…·²Ｎ
</code></pre>
<p>Loop from <code>2</code> to the input...</p>
<pre><code>Φ…²ι¬﹪ιλ
</code></pre>
<p>... finding the factors of each number, ...</p>
<pre><code>⊞υ⎇ι
</code></pre>
<p>... if the number has nontrivial proper factors, then push...</p>
<pre><code>⁺⁺§υ⌊ι*§υ⌈ι
</code></pre>
<p>... the concatenation of the representations for the lowest and highest factor with an intermediate <code>*</code>, otherwise push...</p>
<pre><code>⪫&lt;&gt;§υＬ⊞Ｏθω
</code></pre>
<p>... the representation of the incremented count of primes found so far, wrapped in <code>&lt;&gt;</code>.</p>
<pre><code>⊟υ
</code></pre>
<p>Output the final value.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 70 bytes</h1>
<pre><code>.+
$*
{+`\b(11+)(\1)+\b
$1*1$#2$*
\b1(1((?&lt;!\b\3+(11+)))?)+\b
&lt;$#2$*1&gt;
</code></pre>
<p><a href="https://tio.run/##HcqxDkAwFAXQ/f6F6PDqJeK2ahJ@5A00MVgMYvPxJZ3PuY/nvPZSeoXr8OpmWUj1YvRqGY4dXRt@s0yhyDo3li1qXd6vdc21cCmFCIgYkTCBAxgRUvoA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Link includes test cases. Explanation:</p>
<pre><code>.+
$*
</code></pre>
<p>Convert to unary.</p>
<pre><code>{`
</code></pre>
<p>Repeat until no more numbers can be decomposed.</p>
<pre><code>+`\b(11+)(\1)+\b
$1*1$#2$*
</code></pre>
<p>Decompose numbers into their prime factors. (Note that this outputs the factors in descending order as that's golfier.)</p>
<pre><code>\b1(1((?&lt;!\b\3+(11+)))?)+\b
&lt;$#3$*1&gt;
</code></pre>
<p>Decompose primes into their index.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="noreferrer">Vyxal</a>, 13 bytes</h1>
<pre><code>λǐÞpvḟ›vx1w$∨
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/#WyJQQSIsIiIsIs67x5DDnnB24bif4oC6dngxdyTiiKgiLCIiLCIxXG4yXG4zXG40XG41XG42XG4xMFxuMTNcbjI1NSJd" rel="noreferrer">Try it Online!</a>
Output is an array, so there is an extra pair of brackets on the outside. <code>1w$∨</code> can be removed if we can omit the <code>1</code>s.</p>
<pre><code>λǐÞpvḟ›vx1w$∨
λ               # Open a lambda for recursion
 ǐ              # Get the prime factors
  Þpvḟ›         # Find the one-indexed index of each in an infinite list of primes
       vx       # Recurse over each
         1w$∨   # Logical OR with [1] (replace empty lists with [1])
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/254870/">254870</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




