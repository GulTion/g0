<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::269264</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>121</td><td>Charcoal</td><td>240117T104124Z</td><td><a href="https://codegolf.stackexchange.com/questions/269264/aircraft-registration-numbers/269312#269312">Neil</a></td></tr>
<tr d-ix="1"><td>122</td><td>JavaScript Node.js</td><td>240116T190243Z</td><td><a href="https://codegolf.stackexchange.com/questions/269264/aircraft-registration-numbers/269300#269300">Arnauld</a></td></tr>
<tr d-ix="2"><td>136</td><td>Perl 5</td><td>240116T160152Z</td><td><a href="https://codegolf.stackexchange.com/questions/269264/aircraft-registration-numbers/269294#269294">Kjetil S</a></td></tr>
<tr d-ix="3"><td>046</td><td>05AB1E</td><td>240116T092134Z</td><td><a href="https://codegolf.stackexchange.com/questions/269264/aircraft-registration-numbers/269288#269288">Kevin Cr</a></td></tr>
<tr d-ix="4"><td>173</td><td>Retina</td><td>240116T145845Z</td><td><a href="https://codegolf.stackexchange.com/questions/269264/aircraft-registration-numbers/269293#269293">Neil</a></td></tr>
<tr d-ix="5"><td>137</td><td>JavaScript Node.js</td><td>240115T183243Z</td><td><a href="https://codegolf.stackexchange.com/questions/269264/aircraft-registration-numbers/269266#269266">l4m2</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, <s>151</s> <s>147</s> 121 bytes</h1>
<pre><code>≔Ｉ⪪”)¶&amp;*δ§Ｌ¶∧≧Ｔ∨›P”2η≔⪪⁻⁺⁻αI⭆χιO¹υ⊞υω¿›NθNＰθＦ∨¬ⅈ⁵«≔Ｅυ↥⍘⁺↨ＥΦ⁺⪫ＫＡωκν⊕⎇⁼ν⁴⌕υμ⎇№αμ×∨№α§ＫＡν²⁵⌕υμ⁺⁶⁰⁰×Ｉμ§ην¹⌈η¹⁶ζ⎇ⅈ§⮌υ⊕ΣＥζ›κθ⊟ζ
</code></pre>
<p><a href="https://tio.run/##XVJNb8IwDD3Dr4h6cqVOokAZiBNjY2ISUI1N4hpBoBFpWvLBGNN@O3NSOrFVsms79vOLnXVG1bqg4nIZac13EsZUG1iWghsI4lZ8H8dt/KEeJHG7k6DT6Xe63UEQkaAdhGFEsnDYvBZXdTMurYZUoKpMirnTAFOXRnG5m9ES4lZEuKsOFu4gRrGIk1qdgY3IB9p8S@BZMWqYgmCO/Q5hSFIEMM4Nh4QJzcjMCsNLHz1g0bZQBBYK5oWBFbgGCVZ9NRtXhq434r@XJVNrqhk8oKpoVYyd77MmXLjOPvhScAkpY/uREBA6ehHZo0iUqVwrljNp2AbemJJUfcLTwVKhQUakixkTLjeuaY52nTEuLDKm1yDPmXasf6MjM5UbdrrtKd1l2skfPHQ8v16rVaP4/TnQGiLzpf6r5jyjJ57bHDIf6Pn4GUfXqGZbM1zBDcgrOzKFg7H/LrxEHDesc0TqVe39ojxqWuAJWsPmN76vx6Tf61zujuIH" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Long because it doesn't use brute force, as that would probably take too long to verify correct program operation, so I've actually computed the result somewhat directly. Explanation:</p>
<pre><code>≔Ｉ⪪”)¶&amp;*δ§Ｌ¶∧≧Ｔ∨›P”2η
</code></pre>
<p>Get some compressed magic numbers.</p>
<pre><code>≔⪪⁻⁺⁻αI⭆χιO¹υ⊞υω
</code></pre>
<p>Get the string <code>ABCDEFGHJKLMNPQRSTUVWXYZ0123456789</code>, split it into characters, and append the empty string.</p>
<pre><code>¿›NθNＰθ
</code></pre>
<p>If this is a US registration, then print it without moving the cursor, otherwise print an <code>N</code>. Note that this means that the x-coordinate is now zero only for a US registration.</p>
<pre><code>Ｆ∨¬ⅈ⁵«
</code></pre>
<p>Loop once for a US registration, otherwise <code>5</code> times.</p>
<pre><code>≔Ｅυ↥⍘⁺↨ＥΦ⁺⪫ＫＡωκν⊕⎇⁼ν⁴⌕υμ⎇№αμ×∨№α§ＫＡν²⁵⌕υμ⁺⁶⁰⁰×Ｉμ§ην¹⌈η¹⁶ζ
</code></pre>
<p>Suffix each letter and digit to the partial US registration and see what the resulting ICAO codes are, plus also calculate the ICAO code for the US registration.</p>
<pre><code>⎇ⅈ§⮌υ⊕ΣＥζ›κθ⊟ζ
</code></pre>
<p>For a US registration, overprint it with the ICAO code, but for an ICAO code, append any best letter or digit.</p>
<p>The values of the characters of a US registration are calculated as follows:</p>
<ul>
<li>The first digit is worth <code>101711</code> times its value plus <code>601</code></li>
<li>The second digit is worth <code>10111</code> times its value plus <code>601</code></li>
<li>The third digit is worth <code>951</code> times its value plus <code>601</code></li>
<li>The fourth digit is worth <code>35</code> times its value plus <code>601</code></li>
<li>The first letter is worth <code>25</code> times its position in the alphanumeric string plus <code>1</code> unless it's the fifth character</li>
<li>The fifth character is worth its position in the alphanumeric string plus <code>1</code></li>
</ul>
<p>(In reality <code>600</code> is used instead of <code>601</code> and then <code>1</code> is added later for each digit.)</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 122 bytes</h1>
<p><em>-8 thanks to @l4m2</em></p>
<p>This is (now even more) similar to <a href="https://codegolf.stackexchange.com/a/269266/58563">l4m2's answer</a>.</p>

<pre class="lang-javascript prettyprint-override"><code>x=&gt;(n=0x9e7298,g=(s,h=k=&gt;k&gt;52?0:g(s+Buffer([48+k%43]))||h(k+1))=&gt;/I|O|\D{3}|.{7}|.\D\d/.test(s)?0:x^++n?x==s?n:h(17):s)`N`
</code></pre>
<p><a href="https://tio.run/##hc5Ba8IwFAfw@z6FCIMX4tpE7aKFtDi97OIKw5PdsGjaukpSmmwEzD57V7vbZPgODx78f3/eR/aV6X1zrM2DVAfR5ry1PALJiZ0LNp7PRgUHPSp5xaMqCsYxCQvQ@Okzz0UD2@kMV/fTyRtCzpVQYYoQj/xn9@LS1Xny7bwz61a6Sg@@Z4Q2oFHXYN8xlrHlXMcyLIEyFGq0W@/avZJanYR3UgXkMFxTtlwMkWfUq2mOsgD6eDk2dS2aZaYFIDTw/cGCUkbY3RVOkhu2x4TQIPiDif3tvGT@nQ73D17bvvK2TZL2Bw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>x =&gt; (                   // x = input
  n = 0x9e7298,          // n = ICAO counter
  g = (                  // g = helper function taking:
    s,                   //   s = current registration number string
    h = k =&gt;             //   h = helper function taking a counter k
    k &gt; 52 ?             //     if k is greater than 52:
      0                  //       stop
    :                    //     else:
      g(                 //       do a recursive call to g
        s +              //         where s is completed with either
        Buffer([         //         an upper case letter A-Z (65-90)
          48 + k % 43    //         or a digit 0-9 (48-57)
        ])               //
      ) ||               //       end of recursive call
      h(k + 1)           //       if it failed, try h(k + 1)
  ) =&gt;                   //
  /I|O|\D{3}|.{7}|.\D\d/ // if s contains a 'I' or a 'O', or has 3
  .test(s) ?             // consecutive letters, or is 7 char. long,
                         // or contains a digit after a letter (other
                         // than the leading 'N'):
    0                    //   invalid registration number -&gt; abort
  :                      // else:
    x ^ ++n ?            //   increment n; if x is not equal to n:
      x == s ?           //     if x is equal to s:
        n                //       return n
      :                  //     else:
        h(17)            //       invoke h, starting with k = 17 for 'A'
    :                    //   else:
      s                  //     return s
)`N`                     // initial call to g with s = 'N'
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a>, 136 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>sub{map{//;map$n{$n{$x=&quot;N$'$_&quot;}//=sprintf&quot;A%05X&quot;,$i+=!/I|O/}=$x,sort((&quot;&quot;,A..Z,AA..ZZ)[0..26*($_&lt;1e3?27:$_&lt;1e4)])}sort 1..99999;$n{+pop}}
</code></pre>
<p><a href="https://tio.run/##bZNdb5swFIbv8ys85nawMvABzOfQ5jWptItludjFRFVFXetEkRZgQLRMKb89MxiiOJuFsOXnPec9NoeSVz/pEa/SY737cdg@lgfbTsSE80P37FNtjt/gpdbadlqX1SZvVhq7IvS7ZuLNTfrK/vzy1W5TvDfromp0XdNMZlmZybp3ZtwTy3L8tzpevgfufnCCuF95xoPRdgEILCvqRiLcbsqibNtjMtnVHH3jdRPHX4qKJ5NVUekTJMb9r9/6HIJbhhADCEiAgFAaQATGg3mmWCzEkhEClAqFF/pAVEVEo2yB2JSGvosAXJ@4lKqKKMoyobjz/UgoPEJCEnWK1ycXgqSLQ9kF6AsUIJypACRwGJmqIJRHcmehf5GKSA/vk6sARwKIHOIowJXAhTsKaoS8FAhnzFM90HAOQi4iJIBwSokK2AlcRDA2ArWq/ht3txncBh0wDv1Nb//ouOLrfLcV3fT0WBjpR7xMBoTwumhYeo1Xo8hQ0FyiPk6CTa33MTKZidDYsXxf8qeGP6NuPxbKq3d@LSYhjse1aDIkbeSWNmQZMioVDEbzcdv8x@g803@MzuvQTlmGnMOJ2slzkfNlI36ETb5Ojn8B" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Generates a list of all 915399 possible N-codes and stores it in hash %n which is also mirrored to convert the other way.</p>
</div>
<div id="pu3" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>51</s> 46 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>5°&lt;L§{A„ioмuÐâª˜{õšδ«˜'Nìʒg7‹}ā•¢β¡•+hø.ΔQà}IK
</code></pre>
<p>The output is wrapped in a list. This can be fixed at the cost of 1 trailing byte.</p>
<p><a href="https://tio.run/##AVsApP9vc2FiaWX//zXCsDxMwqd7QeKAnmlv0Lx1w5DDosKqy5x7w7XFoc60wqvLnCdOw6zKkmc34oC5fcSB4oCiwqLOssKh4oCiK2jDuC7OlFHDoH1JS///TjEwMDBC" rel="nofollow noreferrer">Try it online.</a> (Very slow for values far into the sequence.)<br />
<a href="https://tio.run/##AUwAs/9vc2FiaWX//zXCsDxMwqd7QeKAnmlv0Lx1w5DDosKqy5x7w7XFoc60wqvLnCdOw6zKkmc34oC5fcSB4oCiwqLOssKh4oCiK2jDuP//" rel="nofollow noreferrer">The first portion of the program generates all pairs.</a></p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>5°             # Push 10**5: 100000
  &lt;            # Decrease it by 1: 99999
   L           # Pop and push a list in the range [1,99999]
    §          # Cast each integer to a string
     {         # Sort these strings lexographically
A              # Push the lowercase alphabet
 „ioм          # Remove the &quot;i&quot; and &quot;o&quot;
     u         # Uppercase the remaining letters
      Ð        # Triplicate it
       â       # Pop two, and create all pairs using the cartesian product
        ª      # Convert the remaining string to a list of characters,
               # and append this list of pairs
         ˜     # Flatten it to a single list
          {    # Sort these strings lexographically as well
           õš  # Prepend an additional empty string
δ              # Apply double-vectorized on the two lists:
 «             #  Append two strings together
  ˜            # Flatten it
   'Nì        '# Prepend an &quot;N&quot; before each
      ʒ   }    # Filter it, keeping those where:
       g       #  Their length
        7‹     #  is smaller than 7
               #  (to filter out invalid values like &quot;N10000ZZ&quot;)
ā              # Push a list in the range [1,length] (without popping)
 •¢β¡•+        # Add compressed integer 10485760 to each (&quot;A00000&quot; in hexadecimal)
       h       # Then convert each integer to a hexadecimal string
ø              # Pair the values in the two lists together
.Δ             # Pop and find the first/only pair that's truthy for:
   à           #  Check if either of the two
  Q            #  equals the (implicit) input-string
 }IK           # After we've found our matching pair: remove the input from it
               # (after which the intended wrapped result is output implicitly)
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (section <em>How to compress large integers?</em>)</a> to understand why <code>•¢β¡•</code> is <code>10485760</code>.</p>
</div>
<div id="pu4" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language" rel="nofollow noreferrer">Retina</a>, 173 bytes</h1>
<pre><code>&quot;G`$&amp;\b¶$&amp;|;¶&quot;^~(`.+
99999*
L$`_
N$.&gt;`
O`
2+%(`$
;26*
Y`\_`L
I|O

)L$`(;|(\w))(?&lt;=(\w+);.*)
$3$2
A`.{7}
D^`
G`.
.+
$&amp;;A,$&gt;:&amp;*
5+`;A,(_{16})*(_*)
;A,$#1*_,$.2
T`d`L`,1\d
,B?

</code></pre>
<p>No TIO link, since it needs about 9 hours to run. Explanation:</p>
<pre><code>&quot;G`$&amp;\b¶$&amp;|;¶&quot;^~(`
</code></pre>
<p>Evaluate the rest of the program below, then select only the line containing the input word and delete the word and separator from that line, thus giving the matching code.</p>
<pre><code>.+
99999*
L$`_
N$.&gt;`
O`
</code></pre>
<p>Generate the numbers from <code>1</code> to <code>99999</code> in lexicographical order.</p>
<pre><code>2+%(`
)`
</code></pre>
<p>Repeat twice for each line.</p>
<pre><code>$
;26*
Y`\_`L
I|O

L$`(;|(\w))(?&lt;=(\w+);.*)
$3$2
</code></pre>
<p>Append each letter except <code>I</code> and <code>O</code>.</p>
<pre><code>A`.{7}
D^`
G`.
</code></pre>
<p>Remove illegal and duplicate entries.</p>
<pre><code>.+
$&amp;;A,$&gt;:&amp;*
</code></pre>
<p>Number the lines with an <code>A</code> prefix.</p>
<pre><code>5+`;A,(_{16})*(_*)
;A,$#1*_,$.2
T`d`L`,1\d
,B?

</code></pre>
<p>Convert the numbers to five hexadecimal digits.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 137 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>f=(x,s=(i=10384024,'N'))=&gt;g=/\D{3}|.{7}|.\D\d/.test(s)?0:++i&amp;&amp;s==x?i:i^x?[...'ABCDEFGHJKLMNPQRSTUVWXYZ0123456789'].some(t=&gt;f(x,s+t))&amp;&amp;g:s
</code></pre>
<p><a href="https://tio.run/##bc5dT4MwFIDhe38ItGHrTtcWKElH5vAjOgl@K6LJsgHBzGFsY0imvx23W9ebc/E@OTnnffG90Muv5tMMN@2q7PtKoW6gFWoUBRZyGPOBm7oYq0mtRkWyZb8/ZBvsRpEUqxExpTZI4xgiz2scRyvVxU3UvHXxCyHEnR7PkpPTs/OLy/lVml3f3N7dPzw@PedAx4wLPwil@0p0@1EioybV/rJnMHacOtL9st3odl2SdVujCrkp3X1xdBCD2dTas8yWpZC5HaTM8z38Ewo8FIFPD1YoCBFQaQMe@hQsQJkPTAgLcIAQJMb9Hw" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Pass all tests</p>
<p>Output <code>0x9e7299 - 0x9fffff</code> for invalid input <code>N[A-Z]?|N0.*</code>, and <code>false</code> other invalid。 Double-way map</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/269264/">269264</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




