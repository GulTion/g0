<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::28154</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>050</td><td>05AB1E</td><td>240405T103407Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/272346#272346">Kevin Cr</a></td></tr>
<tr d-ix="1"><td>176</td><td>Swift 5.10 macOS/iPadOS</td><td>240403T160857Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/272295#272295">macOSist</a></td></tr>
<tr d-ix="2"><td>108</td><td>APL Dyalog Unicode</td><td>200917T060908Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/211205#211205">Razetime</a></td></tr>
<tr d-ix="3"><td>071</td><td>bash + awk</td><td>140518T064638Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28179#28179">user1554</a></td></tr>
<tr d-ix="4"><td>164</td><td>Python</td><td>140526T162600Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28617#28617">icedvari</a></td></tr>
<tr d-ix="5"><td>090</td><td>Processing</td><td>140527T201037Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28657#28657">segfault</a></td></tr>
<tr d-ix="6"><td>132</td><td>Ruby</td><td>140518T093412Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28182#28182">Mohammad</a></td></tr>
<tr d-ix="7"><td>228</td><td>JavaScript</td><td>140517T190120Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28157#28157">user1220</a></td></tr>
<tr d-ix="8"><td>045</td><td>w3m</td><td>140521T112838Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28336#28336">gnibbler</a></td></tr>
<tr d-ix="9"><td>082</td><td>Shell and xmllint</td><td>140521T110705Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28333#28333">nwellnho</a></td></tr>
<tr d-ix="10"><td>117</td><td>Perl 5.10</td><td>140521T101210Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28330#28330">nwellnho</a></td></tr>
<tr d-ix="11"><td>067</td><td> Javascript +jQuery</td><td>140520T093356Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28268#28268">Martijn</a></td></tr>
<tr d-ix="12"><td>055</td><td>w3m</td><td>140519T211142Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28242#28242">Moop</a></td></tr>
<tr d-ix="13"><td>167</td><td>Python</td><td>140518T000503Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28171#28171">MeldSnak</a></td></tr>
<tr d-ix="14"><td>164</td><td>Dart</td><td>140519T104449Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28215#28215">MisterBl</a></td></tr>
<tr d-ix="15"><td>062</td><td>PowerShell</td><td>140519T155313Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28236#28236">Rynant</a></td></tr>
<tr d-ix="16"><td>114</td><td>JavaScript</td><td>140518T044632Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28175#28175">nderscor</a></td></tr>
<tr d-ix="17"><td>114</td><td>R</td><td>140519T110759Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28216#28216">plannapu</a></td></tr>
<tr d-ix="18"><td>1004</td><td>Java now 634</td><td>140517T224747Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28166#28166">bacchusb</a></td></tr>
<tr d-ix="19"><td>091</td><td>Rebmu</td><td>140518T172509Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28192#28192">HostileF</a></td></tr>
<tr d-ix="20"><td>294</td><td>Java</td><td>140518T161259Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28189#28189">Jules</a></td></tr>
<tr d-ix="21"><td>097</td><td>Ruby</td><td>140517T194104Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28159#28159">Doorknob</a></td></tr>
<tr d-ix="22"><td>071</td><td>Ruby + wget +</td><td>140518T011151Z</td><td><a href="https://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself/28173#28173">dtldarek</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, 50 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>žY’ƒËŠˆ.Â‚‹º.ŒŒ/„¤/’•4m6•’/†Î’J.w4°.W'ƒË¡1è¦6F¨}.V
</code></pre>
<p><strong>Screenshot of a local run:</strong></p>
<p><a href="https://i.stack.imgur.com/KdLQy.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/KdLQy.png" alt="enter image description here" /></a></p>
<p>(CMD doesn't support the <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">05AB1E codepage</a>, hence the weird output for non-ASCII characters.)</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>žY                 # Push constant &quot;https://&quot;
’ƒËŠˆ.Â‚‹º.ŒŒ/„¤/’ # Push dictionary string &quot;codegolf.stackexchange.com/posts/&quot;
•4m6•              # Push compressed integer 272346
’/†Î’              # Push dictionary string &quot;/body&quot;
J                  # Join all strings on the stack together:
                   #  &quot;https://codegolf.stackexchange.com/posts/272346/body&quot;
 .w                # Go to this url, and push its HTML contents
   4°.W            #†Sleep for 10 seconds (10**4 ms)
   'ƒË¡           '# Split it on dictionary word &quot;code&quot;
       1è          # Pop and leave the second item (0-based 1st)
         ¦         # Remove its leading &quot;&gt;&quot;
          6F       # Loop 6 times:
            ¨      #  Remove its trailing character (&quot;}.V\n/&gt;&quot;)
           }.V     # After the loop: evaluate this string as 05AB1E code
                   # (after which the result is output implicitly)
</code></pre>
<p><a href="https://codegolf.stackexchange.com/a/166851/52210">See this 05AB1E tip of mine (sections <em>How to use the dictionary?</em> and <em>How to compress large integers?</em>)</a> to understand why <code>’ƒËŠˆ.Â‚‹º.ŒŒ/„¤/’</code> is <code>&quot;codegolf.stackexchange.com/posts/&quot;</code>; <code>’/†Î’</code> is <code>&quot;/body&quot;</code>; <code>'ƒË</code> is <code>&quot;code&quot;</code>; and <code>•4m6•</code> is <code>272346</code>.</p>
<p>† The sleep is apparently necessary, since otherwise Stackexchange itself will give the error: <code>You may only load 1 post body every second</code>.</p>
<p>Note: I've used <code>6</code> instead of <code>3</code> to also remove the trailing <code>.V</code> (and optional <code>}</code>), otherwise it would go into an infinite loop of getting its HTML contents without ever printing anything.. If getting into an infinite loop was the intend of this challenge, the trailing <code>6F¨}.V</code> could be <code>¨¨¨.V</code> (-1 byte) instead.</p>
</div>
<div id="pu1" class="pu"><h1>Swift 5.10 (macOS/iPadOS), <s>174</s> 176 bytes</h1>
<pre class="lang-swift prettyprint-override"><code>import Foundation;print(try{String.init}()(URL(string:&quot;http://codegolf.stackexchange.com/posts/272295/body&quot;)!).matches(of:#/im.+;/#)[0].output.replacing(#/.quot;/#,with:&quot;\&quot;&quot;));
</code></pre>
<p>This uses pretty much the same trick as <a href="https://codegolf.stackexchange.com/a/28159/118665">this Ruby answer</a>.</p>
<p>It seems that the lack of a newline after <code>import Foundation</code> broke Stack Exchange's syntax highlighter... (to be fair, though, Xcode acts the same way).</p>
<p>The Linux port of Foundation doesn't yet have networking support (attempts to use networking APIs will crash at runtime), so this only works on Darwin platforms for the time being.</p>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Unicode)</a>, 108 bytes</h1>

<pre class="lang-apl prettyprint-override"><code>6 3⌷⎕XML{(⎕SE.SALT.New'HttpCommand'('GET'⍵)).Run.Data}'https://codegolf.stackexchange.com/posts/211205/body'
</code></pre>
<p><a href="https://tio.run/##SyzI0U2pTMzJT///30zB@FHP9kd9UyN8fao1gHSwq16wo0@Inl9qubpHSUmBc35ubmJeirqGurtriPqj3q2amnpBpXl6LoklibXqGUAVxVb6@sn5Kanp@TlpesUlicnZqRXJGYl56al6yfm5@gX5xSXF@kaGhkYGpvpJ@SmV6v//AwA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Don't Try it online, try it locally</a></p>
<p><s>Correct link coming soon.</s></p>
<h2>Output:</h2>
<p><a href="https://i.stack.imgur.com/Bp2Ih.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/Bp2Ih.png" alt="enter image description here" /></a></p>
</div>
<div id="pu3" class="pu"><h1>bash + awk, 71 bytes</h1>
<pre><code>curl -sL codegolf.stackexchange.com/q/28154 |awk -F\&gt; '/\#/ {print $3}'
</code></pre>
</div>
<div id="pu4" class="pu"><h1>Python, 164</h1>

<p>Works by extracting the text between the code tags. It is quite long but it will always function correctly unless the html page is edited directly or a new code block is added before the one below (having a block of code after should have no effect on the output of the program).</p>

<pre><code>import urllib2
print urllib2.urlopen("http://codegolf.stackexchange.com/posts/28617/body").read().split(chr(60)+"code"+chr(62))[1].split(chr(60)+"/code"+chr(62))[0]
</code></pre>
</div>
<div id="pu5" class="pu"><h1>Processing, 90</h1>

<pre><code>print(loadStrings("http://codegolf.stackexchange.com/posts/28657/body")[2].substring(11));
</code></pre>

<p><strong>Edit:</strong> Finally got it!</p>
</div>
<div id="pu6" class="pu"><h1>Ruby, <s>237</s> <s>215</s> <s>146</s> 132</h1>
<pre class="lang-rb prettyprint-override"><code>require'mechanize'
a=Mechanize.new
puts a.get('http://codegolf.stackexchange.com/a/28159').search('.lang-rb code:nth-child(1)').text
</code></pre>
</div>
<div id="pu7" class="pu"><h2>JavaScript, 228</h2>

<pre class="lang-js prettyprint-override"><code>r=new XMLHttpRequest()
c='code'
r.open('GET','//'+c+'golf.stackexchange.com/posts/28157/body')
r.onreadystatechange=function(){this.readyState==4&amp;&amp;alert((a=r.responseText).substr(i=a.indexOf(c)+5,a.indexOf('/'+c)-i-1))}
r.send()
</code></pre>

<p>Runs on this page.</p>
</div>
<div id="pu8" class="pu"><h2>w3m 45 characters</h2>

<pre><code>w3m codegolf.stackexchange.com/a/28336|grep ☻
</code></pre>
</div>
<div id="pu9" class="pu"><h2>Shell and xmllint, 82 bytes</h2>

<pre><code>xmllint --xpath 'string(//pre)' http://codegolf.stackexchange.com/posts/28333/body
</code></pre>
</div>
<div id="pu10" class="pu"><h2>Perl 5.10, <strike>155</strike> <strike>127</strike> <strike>122</strike> 117 bytes</h2>

<pre><code>use XML::LibXML;say XML::LibXML-&gt;new-&gt;parse_file('http://codegolf.stackexchange.com/posts/28330/body')-&gt;find('//pre')
</code></pre>

<p>Using <code>XML::LibXML</code>.</p>
</div>
<div id="pu11" class="pu"><h1> Javascript +jQuery, <strike>87</strike>, 67</h1>

<p>I'm not sure wether I'm allowed to use jQuery, but: </p>

<pre><code>$('body').load('//codegolf.stackexchange.com/posts/28268/body pre')
</code></pre>

<hr>

<h3>Javascript + jQuery, if excecuted in this page: <strike>27</strike>, 25</h3>

<p>For fun, if it would be excecuted here:</p>

<pre><code>$('[id$=268] pre').html()
</code></pre>

<p><strike><code>$('[id$=28268] pre').html()</code></strike></p>
</div>
<div id="pu12" class="pu"><h1>w3m 55 bytes</h1>
<pre><code>w3m codegolf.stackexchange.com/posts/28242/body|grep x
</code></pre>
<p>Based on @DigitalTrauma</p>
</div>
<div id="pu13" class="pu"><h1>Python, <strike>175</strike> 167 bytes</h1>

<p>This uses two external libraries; I didn't read that it was unauthorized.</p>



<pre class="lang-py prettyprint-override"><code>import bs4,requests
print(bs4.BeautifulSoup(requests.get('http://codegolf.stackexchange.com/q/28154').text).select('#answer-28171')[0].select('pre &gt; code')[0].string)
</code></pre>

<p>Longer, but nicer looking code:</p>

<pre class="lang-py prettyprint-override"><code>import bs4, requests
request = requests.get('http://codegolf.stackexchange.com/q/28154')
soup = bs4.BeautifulSoup(request.text)
answer = soup.select('#answer-28171')[0]
code = answer.select('pre &gt; code')[1].string
print(code)
</code></pre>
</div>
<div id="pu14" class="pu"><h1>Dart, 164</h1>

<p>I thought I'd try this in Dart, is pretty fun to use imo.</p>

<p>This can be run in the console in DartEditor, but does require the http package added in pubspec.yaml</p>

<pre><code>import"package:http/http.dart"as h;h.read("http://codegolf.stackexchange.com/posts/28215/body").then((s){print(new RegExp(r"im.+(?:})").firstMatch(s).group(0));});}
</code></pre>

<p>Ungolfed version:</p>

<pre><code>import "package:http/http.dart" as h;

void main()
{
  h.read("http://codegolf.stackexchange.com/posts/28215/body").then((s)
  {
    print(new RegExp(r"im.+(?:})").firstMatch(s).group(0));
  });
}
</code></pre>
</div>
<div id="pu15" class="pu"><h2>PowerShell - <strike>69</strike> 62</h2>
<pre><code>(irm codegolf.stackexchange.com/posts/28236/body).div.pre.code
</code></pre>
</div>
<div id="pu16" class="pu"><h1>JavaScript - <strike>123</strike> <strike>122</strike> <strike>101</strike> <strike>95</strike> <strike>92</strike> <strike>91</strike> <strike>87</strike> <strike>86</strike> 114</h1>

<pre><code>with(new XMLHttpRequest)send(open(0,/\codegolf.stackexchange.com\posts\28175\body/,0)),alert(/w.*/.exec(response))
</code></pre>

<p>Runs in the console of your web browser on this page. Tested on the latest Chrome <strike>and Firefox</strike>.</p>

<p><em>edit: +28 bytes to add the full domain.</em></p>

<p><em>Firefox doesn't like my Regex URL trick anymore with this update :(</em></p>

<p>Here's the rule-breaking 86 byte solution:</p>

<pre><code>with(new XMLHttpRequest)send(open(0,/posts\28175\body/,0)),alert(/w.*/.exec(response))
</code></pre>
</div>
<div id="pu17" class="pu"><h2>R 114 characters</h2>
<pre><code>library(XML);cat(xpathSApply(xmlParse(&quot;http://codegolf.stackexchange.com/posts/28216/body&quot;),'//code',xmlValue)[1])
</code></pre>
<p>No real magic here: it takes the value of the field between the html tags <code>&lt;code&gt;&lt;/code&gt;</code>. Uses library <code>XML</code> (as one can see in the code quite obviously). Outputs the result as stdout.</p>
</div>
<div id="pu18" class="pu"><h2>Java now 634, 852, was 1004</h2>



<p>Code has been updated; thanks for suggestions.
Golfed: now replaces &amp;gt with ></p>

<pre class="lang-java prettyprint-override"><code>//bacchus
package golf;
import java.net.*;
import java.util.*;
public class G{
public static void main(String[] a) throws Exception {
Scanner z;
URL u;
int x=0;
String s;
u=new URL("http://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself");
z=new Scanner(u.openConnection().getInputStream());
z.useDelimiter("\\s*//bacchus\\s*");
while(z.hasNext())
{
s=z.next();
s=s.replace("&amp;gt;", "&gt;");
if(x&gt;0)System.out.println("//bacchus\n"+s);
x++;
if(x&gt;2)break;
}
System.out.println("//bacchus\n");
}
}
//bacchus
</code></pre>

<p>Submitting for testing, I will edit and try golfing it shortly.
Needed to change x>1 to x>2 because test string is also in my code.
Note: Code golf replaces > symbol to &amp;gt.</p>

<pre class="lang-java prettyprint-override"><code>//bacchus
package golf;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

public class Golf {

    public static void main(String[] args) throws IOException {
        URL u;
        URLConnection c;
        InputStream i;
        InputStreamReader r;
        BufferedReader b;
        String s;
        int x=0;
        try {
            u=new URL("http://codegolf.stackexchange.com/questions/28154/write-a-program-that-downloads-itself");
            c=u.openConnection();
            i=c.getInputStream();
            r=new InputStreamReader(i);
            b=new BufferedReader(r);
            while((s=b.readLine())!=null)
            {
                if(s.contains("//bacchus")) x++;
                if(x&gt;0)System.out.println(s);
                if(x&gt;2) break;
            }
            i.close();
            b.close();
        } catch (MalformedURLException ex) {

        }
    }

}
//bacchus
</code></pre>
</div>
<div id="pu19" class="pu"><h1>Rebmu, 91 characters</h1>

<p><strike>Due to the Catch-22 I have to post to get this answer's URL.  :-/  Okay, got it.</strike></p>

<pre><code>paTSrd http://codegolf.stackexchange.com/a/28154[th&lt;a name="28154"&gt;th&lt;code&gt;cpCto&lt;/code&gt;]prC
</code></pre>

<p>Rebmu is a dialect of Rebol, and <a href="https://github.com/hostilefork/rebmu" rel="nofollow">you can read all 'bout it</a>.  The equivalent Rebol here would be:</p>

<pre><code>parse to-string read http://codegolf.stackexchange.com/a/28154 [
    thru &lt;a name="28154"&gt;
    thru &lt;code&gt;
    copy c to &lt;/code&gt;
]
print c
</code></pre>

<p>Rebol's PARSE is a sort of highly-literate answer to RegEx.  It starts a parser position of the input <em>(which can be any series, including structural blocks...binary data...or string types)</em>.  The rules are a language for how the parse position moves.</p>

<p>Tags and URLs are really just strings under the hood in the language.  But they are "flavored", and as Rebol is dynamically typed you can check that type.  READ for instance knows that if you give it a URL-flavored string, then it should dispatch to a scheme handler to do the reading.  (In this case, the one registered for HTTP).  You get back UTF-8 bytes by default, so we use to-string to decode that and get a series of codepoints in a normal Unicode string.</p>

<p>In the case of the parse dialect, encountering a tag type is just matched as if it were a string that looked like the tag.  THRU is an instruction meaning "skip until the ensuing rule is matched, and then place the match position at the end of what you just matched."  (TO is the analogue that matches, but leaves the parse position before the element).</p>

<p>So we zip along past the <code>&lt;a name="28154"&gt;</code>.  Then we zip past the next occurrence of <code>&lt;code&gt;</code>, with our parse position now located right after the <code>&gt;</code>.  PARSE's COPY command then lets us copy data up to another rule, in this case that rule is <code>[TO &lt;/code&gt;]</code>... so we get into the variable C everything up until right before that <code>&lt;</code>.</p>

<p><a href="http://blog.hostilefork.com/why-rebol-red-parse-cool/" rel="nofollow">Cool</a>, huh?  :-)</p>

<p>Technically I could shave more off it, for instance by seeking <code>TO "&lt;/"</code> and that saves three characters--there's no need to match the whole <code>&lt;/code&gt;</code> end tag when just <code>&lt;/</code> would do.  Similar arguments could me made for the start tag.  But Rebmu is about <em>literate</em> golfing...even if you might think it looks odd at first!</p>

<p><strong>UPDATE</strong>: the <code>/body</code> trick is out of the bag, but I'm similarly going to leave it as-is...because I think it is more educational this way.</p>
</div>
<div id="pu20" class="pu"><h1>Java, <s>300</s> 294</h1>

<pre><code>import java.net.*;import java.util.*;public class G{public static void main (String [] a) throws Exception{Scanner s=new Scanner(new URL("http://codegolf.stackexchange.com/posts/28189/body").openConnection().getInputStream()).useDelimiter("./?[c]ode\\W");s.next();System.out.print(s.next());}}
</code></pre>

<p>An improved version of bacchusbeale's answer which:</p>

<ul>
<li>doesn't close resources unnecessarily</li>
<li>doesn't declare unnecessary variables</li>
<li>uses a <code>Scanner</code> to avoid having to loop over the input</li>
<li>uses a regexp that doesn't match itself to avoid having to skip over a middle occurrence of the start/end marker.</li>
</ul>

<p>Updated:</p>

<ul>
<li>Use a direct URL to the post, so we don't need a unique comment to identify the start/end of the code; now uses <code>&lt;code&gt;[...]&lt;/code&gt;</code> as the delimiters to search for (actually using the regular expression "./?[c]ode\W", so as to avoid having to decode <code>&amp;lt;</code> and <code>&amp;gt;</code> -- the "\W" is necessary rather than the shorter "." to avoid it matching part of the URL to the post, unfortunately, which costs 2 characters, and the square brackets around c prevent the regex matching itself).</li>
</ul>
</div>
<div id="pu21" class="pu"><h1>Ruby, <s>155</s> <s>186</s> <s>195</s> <s>148</s> <s>138</s> <s>110</s> 97 characters</h1>

<pre class="lang-ruby prettyprint-override"><code>require'open-uri';puts open('http://codegolf.stackexchange.com/posts/28159/body').read[/req.+;/];
</code></pre>

<p>I had to make it one line, because otherwise it would output newlines as <code>\n</code> instead of actual newlines.</p>

<ul>
<li><s>+31 characters because I didn't notice some characters were being escaped.</s></li>
<li><s>+9 characters to get rid of the annoying backslash.</s></li>
<li>Thanks to Nathan Osman for saving 2 chars, and Ventero for saving 55 (!!!) by removing the need for most of the fixes listed above.</li>
</ul>

<hr>

<h2>The explanation</h2>

<p>Let's beautify this a bit first. However, I'm going to have to use a somewhat... interesting notation in this code. I can't use semicolons at all in this post, for reasons explained later, so I will use <code>{SEMI}</code> in place of semicolons instead.</p>

<pre><code>require 'open-uri'
resp = open('http://codegolf.stackexchange.com/posts/28159/body').read
puts resp.match(/req.+{SEMI}/){SEMI}
</code></pre>

<p>Alright, now let's walk through this. The first two lines are fairly self-explanatory -- they fetch the HTML text of this answer.</p>

<p>Now, the last line is the interesting one here. You see that seemingly useless semicolon at the end of the code? It's absolutely required, and here's why.</p>

<p>First, <code>resp.match</code> extracts the code to be printed. The regexp it uses for this is the trick: <code>/req.+{SEMI}/</code>. It grabs the start of the code, <code>REQuire'net/http'</code>, by searching for <code>req</code> (<code>re</code> would grab my <code>REputation</code>). Then, it finds the end of the code by searching for a semicolon! Since <code>+</code> is greedy by default, it will keep going until it finds the semicolon that signifies the end of the code. See why I can't use semicolons anymore?</p>

<p><s>After that, I don't have to unescape anything thanks to Ventero's fix of not using <code>\</code> at all anymore. All I have to do is fix <code>{AMPERSAND}</code> changing into <code>{AMPERSAND}amp{SEMI}</code>, which can be achieved simply by removing the <code>amp{SEMI}</code> part.</s> No need for this anymore because of new URL. After that, the original code has been retrieved! <em>(Note: I can't use the ampersand either, because that gets HTML-encoded which causes a semicolon to be created.)</em></p>
</div>
<div id="pu22" class="pu"><h1>Ruby + wget + <strike>gunzip</strike>, <strike>159</strike> <strike>86</strike> <strike>82</strike> 71</h1>
<p>Using tip of @FDinoff to use <code>http://codegolf.stackexchange.com/posts/28173/body</code>.</p>
<pre><code>puts `wget -qO- codegolf.stackexchange.com/posts/28173/body`[/pu.*\]/]
</code></pre>
<p>Tested. Thanks to @ace and @Bob for command line optimization.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/28154/">28154</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




