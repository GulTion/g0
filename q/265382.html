<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::265382</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>048</td><td>Python</td><td>231018T050140Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/266070#266070">att</a></td></tr>
<tr d-ix="1"><td>104</td><td>OCaml</td><td>231017T141056Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/266050#266050">138 Aspe</a></td></tr>
<tr d-ix="2"><td>090</td><td>Rust</td><td>231017T140802Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/266048#266048">138 Aspe</a></td></tr>
<tr d-ix="3"><td>035</td><td>Befunge98 PyFunge</td><td>230923T093715Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265436#265436">SquareFi</a></td></tr>
<tr d-ix="4"><td>008</td><td>Uiua</td><td>231016T020353Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/266017#266017">Bubbler</a></td></tr>
<tr d-ix="5"><td>038</td><td>Ruby</td><td>230920T104723Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265384#265384">G B</a></td></tr>
<tr d-ix="6"><td>053</td><td>C clang</td><td>230920T153037Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265398#265398">c--</a></td></tr>
<tr d-ix="7"><td>057</td><td>Java</td><td>230922T141329Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265422#265422">Kevin Cr</a></td></tr>
<tr d-ix="8"><td>099</td><td>Racket</td><td>230922T120745Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265421#265421">138 Aspe</a></td></tr>
<tr d-ix="9"><td>080</td><td>Elixir</td><td>230922T120312Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265420#265420">138 Aspe</a></td></tr>
<tr d-ix="10"><td>077</td><td>Erlang</td><td>230922T115902Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265419#265419">138 Aspe</a></td></tr>
<tr d-ix="11"><td>039</td><td>JavaScript Node.js</td><td>230922T060104Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265417#265417">tsh</a></td></tr>
<tr d-ix="12"><td>069</td><td>Scala 3</td><td>230921T132115Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265411#265411">138 Aspe</a></td></tr>
<tr d-ix="13"><td>055</td><td>Python</td><td>230920T220823Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265404#265404">97.100.9</a></td></tr>
<tr d-ix="14"><td>047</td><td>JavaScript Node.js</td><td>230920T143359Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265395#265395">l4m2</a></td></tr>
<tr d-ix="15"><td>043</td><td>JavaScript ES6</td><td>230920T105539Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265386#265386">Arnauld</a></td></tr>
<tr d-ix="16"><td>008</td><td>05AB1E</td><td>230920T112540Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265388#265388">Kevin Cr</a></td></tr>
<tr d-ix="17"><td>9519</td><td>Nibbles</td><td>230920T131451Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265392#265392">Dominic </a></td></tr>
<tr d-ix="18"><td>035</td><td>Haskell</td><td>230920T122701Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265389#265389">Laikoni</a></td></tr>
<tr d-ix="19"><td>041</td><td>Retina 0.8.2</td><td>230920T124524Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265391#265391">Neil</a></td></tr>
<tr d-ix="20"><td>021</td><td>Charcoal</td><td>230920T123828Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265390#265390">Neil</a></td></tr>
<tr d-ix="21"><td>043</td><td>R</td><td>230920T104408Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265383#265383">Dominic </a></td></tr>
<tr d-ix="22"><td>7375</td><td>Vyxal G</td><td>230920T105442Z</td><td><a href="https://codegolf.stackexchange.com/questions/265382/find-the-largest-sum-such-that-no-two-elements-are-touching/265385#265385">lyxal</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 48 bytes</h1>
<pre class="lang-python prettyprint-override"><code>lambda a,b=0,c=0:max(b:=max(d+c,c:=b)for d in a)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=rdDdboIwFAfw7FKeopftPCrlQy1J9yKONAUkNkEgih97lt2YLNs7bU-zU2zjC0jT_iHn15OWz5_-Y9h17e2rlu_fp6GerX_DRu-LShMNhQyhlGG211daZNJGNS2hzGTB6u5AKmJaopnbJy4702wJz4KJAQUdvCpp2v40UDY_9o3BDCb9wbQDNVDT7Vk31DAGnWtw-3uZbjhEEEOSE__M3sgSY7EgG4U1hbXAK0jzhxJOcTQxzhRdhI4D92tu3co528tam7iijvE7wZmCsHbsypd3bTsmoxSg0ApYwwrfMXN_gshZ4R3W7FmfPMZbRPz-0_4B" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p><span class="math-container">\$O(n)\$</span> complexity.</p>
<p>Loops over the list. On each prefix, <code>b</code> and <code>c</code> are the largest such sums of the two previous prefixes.</p>
</div>
<div id="pu1" class="pu"><h1><a href="http://www.ocaml.org/" rel="nofollow noreferrer">OCaml</a>, 104 bytes</h1>
<p>Golfed version. <a href="https://tio.run/##lY1NCsIwEIX3nuItE2yl1RZ/QnsCbyAS0jbVQJJKGzEL715jENwqDMObj/cxQyuMnmctHUbZwkBXRrj2Co2HcleczmmdPf3h4Ke0Di0ikoZWRzW5VT/ojmvZO9LfbeQ@rYkRHgJNIpaeUpIlGdVQFh8cHxGKagHcRmUdl7bTykqQyYX7woeeBwxicMoZ1gwbhuJMKfvPYCh/ldZRyuN8w6/2JtaLuEuG/R9q6O4YtlF657c3vwA" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-ocaml prettyprint-override"><code>let rec m l=match l with []-&gt;0|x::xs-&gt;let(a,b)=List.fold_left(fun(a,b)x-&gt;(max a b,a+x))(0,0)l in max a b
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##nY7NCoMwEITvPsUcDbXgL20N9kVERG2sgRhFI/TQd7dJ0PZsISy7s/vNZGiqXqyrYAoTa9BXr3JeeohZIXOAXe@YGNkEt/JQE2RoF9koPkh9AryRFzjfDYwK9aZ1aaqMuqPb1tPlhI5A6Tsuv2vfg09MruOYUJfY/HHiUpVMPgSXDO6s9Pwsh7bUsrW0v80DipAioogLQug/HEVyDA0tGtj3a455RBaKbU0obocNNHGluFjU9IZe1w8" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-ocaml prettyprint-override"><code>let rec max_sum lst =
  let rec helper (a, b) = function
    | [] -&gt; max a b
    | h::t -&gt; helper (max a b, a + h) t
  in helper (0, 0) lst

let () =
  print_endline (string_of_int (max_sum [1; 2; 3; 4]));
  print_endline (string_of_int (max_sum [1; 2; 3; 4; 5]));
  print_endline (string_of_int (max_sum [2; 2; 1; 1; 2; 1; 1; 2]));
  print_endline (string_of_int (max_sum [3; 1; 4; 1; 5; 9; 2]));
  print_endline (string_of_int (max_sum [9; 8; 7; 9; 9; 8]));
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://www.rust-lang.org/" rel="nofollow noreferrer">Rust</a>, 90 bytes</h1>
<p>Golfed version. <a href="https://tio.run/##hc9LCoMwEAbgfU8RXU3oVHxi7cNjdFNKCTZCQGPRtFitZ7dTwXUCk3@GfAykfXVmLjWrhdLA2bhhdJ6t0qbSDrjj5CLr4C0L5xpgiBHGN86PdoWJxYXkAgzW26IjMjFVgpnVZrjHlBzlIqf//zoQh4ssTioKc77LKcZKGujxw8/CozXNXRnZAvfKpnoA@Ohz/C7vOFB6teiB@n470M51nOb5Bw" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-rust prettyprint-override"><code>fn s(a:Vec&lt;i32&gt;)-&gt;i32{let(x,y)=a.into_iter().fold((0,0),|(x,y),z|(x.max(y),x+z));x.max(y)}
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##jdBfC4IwEADwdz/F6dNGV/iXapUfo5cIsTlBUIs5I1A/ux2abz04uO3gfsdt021jxjGvoUqLmnHoLKD10kVtytpmTjc4SLVP0rQVeytp3zz0McDwzvlprcVolfZJe@gt@6qegGRIEeFxZccRD7gnTefkB8uanj@TVGsBVyXPReDHHLYxUPL7lVIZYCnCg8MFCO5oyDMpjNKM7/JnmTHmIrgcoZ8ZguyBNSYTQlYvIWjIUkhhA3K57h9hDeP4BQ" rel="nofollow noreferrer">Try it online!</a></p>
<pre class="lang-rust prettyprint-override"><code>fn main() {
    println!(&quot;{}&quot;, max_sum(vec![1,2,3,4]));
    println!(&quot;{}&quot;, max_sum(vec![1,2,3,4,5]));
    println!(&quot;{}&quot;, max_sum(vec![2,2,1,1,2,1,1,2]));
    println!(&quot;{}&quot;, max_sum(vec![3,1,4,1,5,9,2]));
    println!(&quot;{}&quot;, max_sum(vec![9,8,7,9,9,8]));
}

fn max_sum(arr: Vec&lt;i32&gt;) -&gt; i32 {
    let (a, b) = arr.into_iter().fold((0, 0), |(a, b), c| (std::cmp::max(a, b), a + c));
    std::cmp::max(a, b)
}
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://pythonhosted.org/PyFunge/" rel="nofollow noreferrer">Befunge-98 (PyFunge)</a>, 35 <s>52</s> <s>60</s> <s>67</s> bytes</h1>
<pre><code>1pp&gt;1g00g`g3j&gt;;#&amp;00g+01p00p'&#26;#j&lt;;.@
</code></pre>
<p><a href="https://tio.run/##S0pNK81LT9W1tNAtqAQz//83LCiwM0w3MEhPSDfOsrNWVgMytQ0MCwwMCtSllLNsrPUc/v@3VLBQMFewVADRAA" rel="nofollow noreferrer" title="Befunge-98 (PyFunge) – Try It Online">Try it online!</a><br />
Takes input as a series of space separated integers. The last integer must have a trailing space.</p>
<p>Uses the dynamic programming approach, and so runs in O(n).</p>
<h3>Alternate version with only printable characters, 36 bytes</h3>
<pre><code>1pp&gt;1g00g`g3j&gt;;#&amp;00g+01p00p93*#j&lt;;.@
</code></pre>
<p><a href="https://tio.run/##S0pNK81LT9W1tNAtqAQz//83LCiwM0w3MEhPSDfOsrNWVgMytQ0MCwwMCiyNtZSzbKz1HP7/t1SwUDBXsFQA0QA" rel="nofollow noreferrer" title="Befunge-98 (PyFunge) – Try It Online">Try it online!</a><br />
Same as above but replaces the unprintable character with 9*3=27, costing an extra byte (which is why it is not 26)</p>
<h2>Explanation</h2>
<p>Here the unprintable character has been replaced by <code>O</code>. Note that the unprintable character has ASCII value of 26</p>
<pre><code>1pp&gt;1g00g`g3j&gt;;#&amp;00g+01p00p'O#j&lt;;.@  Full program
1p                                   0 is always on the stack, so 1p stores 0
                                     at (0,1)
  p                                  stores 0 at (0,0)
   &gt;         &gt;;#&amp;          'O#j&lt;;.@  Loop until EOF received
    1g00g                            Get (0,1) and put on stack, then get
                                     (0,0) and put on stack
         `                           Pop b, then a, push 1 if a&gt;b, otherwise
                                     push 0
          g                          Stack now either contains 1 or 0, which
                                     corresponds to one of the stored values,
                                     get that value
           3j&gt;;#&amp;               ;.@  Jump to &amp;, which gets one integer input.
                                     If EOF, print top of the stack, then end
                                     Otherwise if continuing loop:
                 00g+                Get (0,0) then add top two values of
                                     the stack
                     01p00p          Pop the top of the stack and store at
                                     (0,1), then get the top of the stack
                                     again and store at (0,0)
                           'O#j&lt;     Jump 26 characters back to the start of
                                     the loop
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.uiua.org/" rel="nofollow noreferrer">Uiua</a>, 8 bytes</h1>
<pre><code>↥∧⊃⋅+↥.0
</code></pre>
<p><a href="https://www.uiua.org/pad?src=ZiDihpAg4oal4oin4oqD4ouFK-KGpS4wCgpmIDFfMl8zXzQKZiAxXzJfM180XzUKZiAyXzJfMV8xXzJfMV8xXzIKZiAzXzFfNF8xXzVfOV8yCmYgOV84XzdfOV85Xzg=" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>↥∧⊃⋅+↥.0    input: a vector V of numbers
       .0    set up two accumulators:
               maximum containing the last element (Mc),
               maximum not containing the last element (Mn)
 ∧          fold over V: for each item Vi,
   ⊃⋅+↥        replace [Mc Mn Vi] with [Mn+Vi max(Mc,Mn)]:
     ⋅+           discard Mc and add Mn and Vi (arity 3)
       ↥          max of Mc and Mn (arity 2)
   ⊃             fork: take 3 values and pass enough amount of args to each function
↥             max of final Mc and Mn
</code></pre>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.ruby-lang.org/" rel="nofollow noreferrer">Ruby</a>, <s>46</s> 38 bytes</h1>
<pre class="lang-ruby prettyprint-override"><code>-&gt;l{a=b=0;l.map{a,b=b,[a+_1,b].max};b}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m72kqDSpcsGiNNulpSVpuhY31XTtcqoTbZNsDaxz9HITC6oTdZJsk3SiE7XjDXWSYoFCFbXWSbVQ1XEFCmnR0YY6RjrGOiaxsVzIXB1TmIARUMBQxxBGwoSNgRwTIDbVsUQIWupY6JgDBYB0bCzElgULIDQA" rel="nofollow noreferrer">Attempt This Online!</a>
Runs in O(n).</p>
<h3>How?</h3>
<p>We need 2 accumulators. The first 2 steps will initialize them with the first 2 elements of the list. Then at every step: add the current element to the accumulator that was not increased in the previous step, and discard the smallest.</p>
<h3>Example:</h3>
<pre><code>[3,1,4,1,5,9,2]
Start -&gt; a=0, b=0
3     -&gt; a=0, b=3
1     -&gt; a=3, b=1
4     -&gt; a=3, b=[3+_+4]
1     -&gt; a=[3+_+4], b=[3+_+_+1]
5     -&gt; a=[3+_+4], b=[3+_+4+_+5]
9     -&gt; a=[3+_+4+_+5], b=[3+_+4+_+_+9]
2     -&gt; a=[3+_+4+_+_+9], b=[3+_+4+_+5+_+2]
</code></pre>
<p>Thnks @tsh for -6 bytes</p>
</div>
<div id="pu6" class="pu"><h1><a href="http://clang.llvm.org/" rel="nofollow noreferrer">C (clang)</a>, <span class="math-container">\$\mathcal{O}(N)\$</span>, 53 bytes</h1>
<p>takes in a zero-terminated array of positive integers and returns via out parameter.</p>

<pre class="lang-c prettyprint-override"><code>n,t;f(*a,*r){for(*r=n=0;*a;(n=*r)&lt;t?*r=t:0)t=n+*a++;}
</code></pre>
<p><a href="https://tio.run/##rVLLTsMwELz7K0ZBBcdxUfpAQN20HxJysJKWWipu5Lhconx72DhQDrQ3FMn27Mx6J7sup@VR2/e@t9KrPRdaChe3@5PjwmU2S5XQituMgmu/pZBfpbHPbCJ0kqiuvzO2PJ6rHdaNr8zp8bBh7PNkKuZ3jefGegjtXMxaBgzISLidV4xgffblQTv@kD/EijDVBDfIkCpQTm4KhSQxMVEkdpS959GkmVSRhMEWtEVYIaJ9lI@3cAIS91Ql4J/EAtMNJtWbjYID4jrGiGIf2lg@WP41KQbzTV6QlzZUH34kL@IWM4m5xEJiKZGik7fZp2uCeRDM5LfycvirXARqGVa66vWGjOIvEs9BMJ6vufrv71IjpbWTEKIOEw0TrKlroX8KFEadJOMEw4MQ9dD4/gs" rel="nofollow noreferrer" title="C (clang) – Try It Online">Try it online!</a></p>
<hr />
<h1><a href="https://gcc.gnu.org/" rel="nofollow noreferrer">C (gcc)</a>, <span class="math-container">\$\mathcal{O}(N)\$</span>, 46 bytes</h1>
<p>This one returns the result in the first element of the array, has UB in the form of unsequenced modification and access to <code>a[2]</code> and requires the last two elements of the array to be <span class="math-container">\$0\$</span>.</p>

<pre class="lang-c prettyprint-override"><code>f(int*a){*a=*a?f(a+1)&lt;a[2]+*a?a[2]+*a:a[1]:0;}
</code></pre>
<p><a href="https://tio.run/##rZLPboMwDMbveYpPTFVDSCdoO60t/fMgjEMUShupowjoLohXH3NC113GrQLFNv7F/oijZyet@z7npmiE8luhdkIdcq6CyN@qZJ4GFN7tRiVRugnjrn8xhb7csiO2dZOZ6@t5z9jX1WSsOdaNLQWhqspnLQNsZGJGXnlr9FlVfJpM/Zji/FqBG@wQxiA8MWmMIDA@pQiuaGPOvUk9yTwJgwPIeNjAIzvgQxVuW1nvd0uK2R6T7KO4g6EFO8Yoyz6VKbiV@idOWNF1kpKQ1rW2P5CkfotIYi6xkFhKhPSik@PA2wgzd0wk7/DD@RdeuOzSrVRwPU5SaiXx7pjBH1H47CeUjy4hrZ2EEKWbr5tnScfoDjQGfUYZBMM83c0QpZ1E/63zizrV/Yxuz06v1j8" rel="nofollow noreferrer" title="C (gcc) – Try It Online">Try it online!</a></p>
</div>
<div id="pu7" class="pu"><h1>Java, <s>64</s> 57 bytes</h1>

<pre class="lang-java prettyprint-override"><code>a-&gt;{int t=0,r=0;for(int k:a)r=(k+=t)&gt;(t=r)?k:t;return r;}
</code></pre>
<p>Another port of <a href="https://codegolf.stackexchange.com/a/265384/52210"><em>@G B</em>'s Ruby answer</a>.<br />
Also runs in <span class="math-container">\$O(n)\$</span> complexity.</p>
<p><a href="https://tio.run/##rVHLasNADLznK0ROu3hj4jxoY@OU0nNzydH4oDqb4kfWYVd2Ccbf7spOQn@gLCuNBmkYoQJbXBSncsgqdA4@MTfdDCA3pO0ZMw2HsZwIyATHJAWUEXP9jIMjpDyDAxiIB1zsu7GP4qWy8TI613acgDJEaWNRejHJvaDYyrcypMhqaqwBG/VDNGpdm6@KtR6SbZ2f4MJ2xJFsbr6TFOXdyijbogXSjj7Q6dDoH5icJWnXBWql1mrTqydSW8YrxoEKnpGZNecN/63aTfVOvaoXxpyn2X9@fS8n8wDHmyN98euG/CsvRpURBR/Bbyiv/Hdr8eZ8qu9Li@eO0puHMPeMn/1Rjyv0wy8" rel="nofollow noreferrer">Try it online.</a></p>
<p><strong>Explanation:</strong></p>
<pre class="lang-java prettyprint-override"><code>a-&gt;{                    // Method with integer-array parameter and integer return-type
  int t=0,              //  Temp-integer, starting at 0
      r=0;              //  Result-integer, starting at 0 as well
  for(int k:a)          //  Loop over the integers `k` of the input-array:
    r=(k+=t)&gt;(t=r)?k:t;
  //  (k+=t)            //   First increase the current `k` by value `t`
  //         (t=r)      //   Then replace `t` with value `r`
  //r= k    &gt; t   ?k:t; //   And then set `r` to the maximum of these new `k` and `t` as
                        //   preparation for the next iteration
  return r;}            //  After the loop, return the final 'prepared' maximum `r`
</code></pre>
</div>
<div id="pu8" class="pu"><h1><a href="https://racket-lang.org/" rel="nofollow noreferrer">Racket</a>, 99 bytes</h1>
<p>Golfed version. <a href="https://tio.run/##dY7fCoJQDIfvfYofdNGkm/xHedWDiBdTj3FoHsUM6ultJ4kIdLCN7ftgG7m@mWneCbsrxmWgxrTWGVALCUnMBOn7gQqBlAXjWBaVlpBsC3IPkYvXOn6CUanv3boZ/5YHbVSzX37id6Nj68IAoMbeB@GXOH93TxFiJEjV3YbI1nGsOEL0retSoijVzJBvKTnOOCnW7p8OguXb@Q0" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>(define (f l)(let loop([l l][a 0][b 0])(if (null? l)(max a b)(loop(cdr l)(max a b)(+ a (car l))))))
</code></pre>
<p>Ungolfed version. <a href="https://tio.run/##hY/dCsIwDIXv9xQHvLDijftDd@WDDJFu66QYu7Ef0KevaeeY3sxAE3L6JZx0sryrwdoNSXND57sgEJWqtVEQD/m89uMD1A@7ABCkBlDTtBA5S06@IJc4cC44O4YpXUOYkeg8z03htkGi@FKmXWXVeXIhIPZcRSmnDx8/trTxfirdtyRfZBarWxEiQozEjfxBkK5BEUMhwjmvoTEDCb8U2TqY4YQjQ1w/N/lbrH0D" rel="nofollow noreferrer">Try it online!</a></p>
<pre><code>#lang racket

(define (max_sum lst)
  (let loop ([lst lst] [a 0] [b 0])
    (if (null? lst)
        (max a b)
        (loop (cdr lst) (max a b) (+ a (car lst))))))

(define (main)
  (displayln (max_sum '(1 2 3 4)))
  (displayln (max_sum '(1 2 3 4 5)))
  (displayln (max_sum '(2 2 1 1 2 1 1 2)))
  (displayln (max_sum '(3 1 4 1 5 9 2)))
  (displayln (max_sum '(9 8 7 9 9 8))))

(main)
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://elixir-lang.org" rel="nofollow noreferrer">Elixir</a>, 80 bytes</h1>
<pre><code>def f(l)do
{a,b}=Enum.reduce(l,{0,0},fn x,{a,b}-&gt;{max(a,b),a+x}end)
max(a,b)
end
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=fZC9CsIwFIX3PMUdE7wW7Q_WQTcHB9FdHGqTQKBNRS0USp_EpYvuPo6rT2KSKi7VcEnOzfm44eRyE5mq1LG9cyHzgpeZgFWiNPDiWp7lMH5sjAGSZowXpE5w38wWusy9o-BlKmiG9QhHDUoNFTp7OK_zpKJGMkwGVSM0Z-RzQ0z3nvsEsJPz7jECZi3XntKng0jPVNLtGMFHCBDCHWN_fYSoH_EdMnb1Ff1s4MzQ7RHC9CdonBhh4hCrO8oEs-EIsb_n2VSUdUnbtjtf" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu10" class="pu"><h1><a href="https://www.erlang.org" rel="nofollow noreferrer">Erlang</a>, 77 bytes</h1>
<pre class="lang-erlang prettyprint-override"><code>f(L)-&gt;f(L,{0,0}).
f([],{A,B})-&gt;max(A,B);
f([H|T],{A,B})-&gt;f(T,{max(A,B),A+H}).
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=hY_PCoJAEMbvPYV4iF36ttw00oLATh7q1k0khNwIUkMMAtMX6eKl3qljb9JIWUcH5g_z_WaGuT2i7Bgm-_rZF3G6Ox8jFoeHhA97Irqc0ixnvhpJaE1zJAM-vJ9zJeznWrEVFwuKKAwYJQ0o5gcoXCxLEuLwwqjk86btXTd_RbENilaGO_DK39JXc4VtuSYWPY3skM5UmsVhzvTqVCU6NJ-2SYxhwgp4wNGNYdIFjgmUkG3swk2CLPIJnG7YgY0pgZQb9PtoXX_yGw" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu11" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 39 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;a.map(v=&gt;q=(v+=p)&gt;(p=q)?v:p,p=q=0)|q
</code></pre>
<p><a href="https://tio.run/##rY/NDoIwDIDvPsWOW6zgxp8zGT4IWciCYDQIQ8xOvjsWhWiCR7e0XfL1S9eLcaYvbmd73zTtsRwqNRiVGu9qLHUq7RR1a2VZSq3q2MHtLeBDbdmjG4q26du69Or2RCuacRAQQKjJdBgjvk9iQrIcSY5k9duASH8bEg2O/QFGtHAEOhz4nPXbSdAZZ4zeWDEvzABpiBGBRDpP4zHJxknhy5KQLzwJO0iQYNWfXwr05OwgWe725zttKvjwBA" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<p>Use two variables <code>p</code>, and <code>q</code> to track:</p>
<ul>
<li><code>p</code>: Largest sum we got for <code>a[0..i-1]</code></li>
<li><code>q</code>: Largest sum we got for <code>a[0..i]</code></li>
</ul>
<p>So, for each iteration,</p>
<ul>
<li><code>i' = i + 1</code></li>
<li><code>p' = q</code></li>
<li><code>q' = max(q, p + a[i'])</code></li>
</ul>
</div>
<div id="pu12" class="pu"><h1><a href="https://www.scala-lang.org/" rel="nofollow noreferrer">Scala 3</a>, 69 bytes</h1>
<pre class="lang-scala prettyprint-override"><code>l=&gt;{val(a,b)=l.foldLeft((0,0)){case((a,b),c)=&gt;(a max b,a+c)};a max b}
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=hc_BSsNAEAZgvPoQMscdnErTtNhGNuDBg1BPxVPpYbJNSspmK8lWlJAn8RIP-k76NE6b9hoPMz-z-zEwH9-VYcth-3txtUu2qfHwxLmD-hJgnWZQyKC43FQR3Jclvy8XvszdZoURPLvcgz5KgBd59dapgt8W-0LN88qrgEYU0hgR_yM06UMjQQEF595HQwFjqQnN-uGMpnQrSLJjjdQrW-hQBAe1fHR-pWPpcufX3meD6c-D1XEtUDElqO1NtrPreZp5pYY0RKwNV6k6fpJBHSs-bISE-Npgc3eamm7Z5ynbtss_" rel="nofollow noreferrer">Attempt This Online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.python.org" rel="nofollow noreferrer">Python</a>, 55 bytes</h1>
<pre class="lang-python prettyprint-override"><code>f=lambda a,b,c,*d:d and f(max(a,b),a+c,*d)or max(a+c,b)
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=PYxJDoMwDEX3nCJLB1ypTGKQOEMPgLIIDRGRIEQodDhLN2zaO3GbppR2Yfu_J30_XuZuu1Evy3O28pCvmax6PjSCE44NntEXpSBcCyJh4DdwkiIPPp6OE9mUo4bu9eDaqb4loMpKaTNboLT0CDGT0hYk-O2F96BofWR0ryzrqa5DjDDGhDHvnzHdKHIUYvjbm4tdStykWOymwBwzR-4y9v37Bg" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Adapted from <a href="https://codegolf.stackexchange.com/a/265384/113573">G B's answer</a>. It only works if the array is at least three elements long.</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 47 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>x=&gt;x.map(e=(t,i)=&gt;e=x[i]=(t+=~~x[i-2])&lt;e?e:t)|e
</code></pre>
<p><a href="https://tio.run/##bc7fCoIwFAbw@55il46OyvyTLZo9iAwRW2GYSkp4Eb66fVZSYIOds/Htx9klu2dtfiuazq7qoxlPauxV3DvXrLGMsjoquIqN6pNC47ZWw4Cj7Wm@Nwez6/jDjHldtXVpnLI@WycrEeSRT4Fmn8U5c122YSxJkaRIVv8FhfpXSAiB9z52uDAejCAxV/02Ecw0Y3JTR11IH2mAHZJEOk8TG5ZMk4KXkpQunKQtRUjQ9feXHpycDZLxCQ" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
</div>
<div id="pu15" class="pu"><h1>JavaScript (ES6), 43 bytes</h1>
<p>Port of <a href="https://codegolf.stackexchange.com/a/265384/58563">GB's answer</a>, running in <span class="math-container">\$O(n)\$</span>.</p>

<pre class="lang-javascript prettyprint-override"><code>a=&gt;[...a,b=0].map(v=&gt;[b,a]=[a&gt;b?a:b,b+v])|b
</code></pre>
<p><a href="https://tio.run/##bc7dCsIgFAfw@57Cy41OLveZgetBRIauLYo1R4td9e52rEbBEs454N8fx4ue9FjfzsN909tj41rhtCglpVSDEVtFr3oIJrwxoJWQujQHvTdg1pMKH8bVth9t19DOnoI2kAxiSCBV5HPCkEQRyQmRFSYVJqv/AjL1KzgKhu8TrGxhYjQM2NzV2xRo/A7v/MS@kAmmKVYGHNN5G8uJ9JvSl@JQLRyHHRSY4FTfX8bo@GwwcU8" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<hr />
<h1>JavaScript (ES6), 44 bytes</h1>
<p>This one runs in <span class="math-container">\$O(2^n)\$</span>.</p>

<pre class="lang-javascript prettyprint-override"><code>f=([v,...a],p)=&gt;x=v?p|(v+=f(a,1))&lt;f(a)?x:v:0
</code></pre>
<p><a href="https://tio.run/##bc7NCsIwDAfwu0/RY4uxs/u0w7oHGWWM6UQZ63BSdvDda6oOhVlIcvj3R3KtbT02t8tw3/TmeHKuVbS0wDmvNQxMHSZli@FB7Vq1tAbB2B4nK6bc5lvXmH403Yl35kxbWgoIIYJYk89jjAQBSQkpK0wqTFb/BST6V0gUAv9HWMnChGgEiLnrt8nQ@B3e@Yl9ISNMY6wEJKbzNpGS0m@KX0pCtXASdpBhglN/rwzRydlg4p4" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>Commented</h3>
<pre class="lang-javascript prettyprint-override"><code>f = (        // f is a recursive function taking:
  [v,        //   v = next value from the input array
      ...a], //   a[] = remaining values
  p          //   p = flag set if the previous value was used
) =&gt;         //
x =          // save the result in x
v ?          // if v is defined:
  p | (      //   if p is set
    v +=     //   or the updated value of v obtained by adding
    f(a, 1)  //   the result of a recursive call with p set
  ) &lt; f(a) ? //   is less than f(a):
    x        //     use x (the result of f(a))
  :          //   else:
    v        //     use v
:            // else:
  0          //   stop
</code></pre>
</div>
<div id="pu16" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E/wiki/Commands" rel="nofollow noreferrer">05AB1E</a>, <s>11</s> 8 <a href="https://github.com/Adriandmen/05AB1E/wiki/Codepage" rel="nofollow noreferrer">bytes</a></h1>
<pre><code>ÎĆvMsy+s
</code></pre>
<p>-3 bytes and <span class="math-container">\$O(n)\$</span> complexity by porting <a href="https://codegolf.stackexchange.com/a/265384/52210"><em>@G B</em>'s Ruby answer</a>, so make sure to upvote that answer as well!</p>
<p><a href="https://tio.run/##yy9OTMpM/f//cN@RtjLf4krt4v//ow11jHSMdUx0TGMB" rel="nofollow noreferrer">Try it online</a> or <a href="https://tio.run/##S0oszvifnFiiYKeQnJ@SqpdfnJiUmapgY6Pg6u/GZa@k8KhtkoKS/f/DfUfaynyLK7WL/9fqcIHkuMozMnNSFYpSE1MUMvO4UvK5FBT08wtK9CFGQCk0U20UVMBq81L/RxvqGOkY65jEcsFYOqZAthGQbahjCCOBIsZA2gSITXUswXxLHQsdcyAbSMdyAQA" rel="nofollow noreferrer">verify all test cases</a>.</p>
<p><strong>Explanation:</strong></p>

<pre class="lang-python prettyprint-override"><code>Î        # Push 0 and the input-list
 Ć       # Enclose; append the first item at the end of the input-list
         # (this is to have an extra iteration, the value that's appended is irrelevant)
  v      # Pop and loop over each item `y` of this modified input-list:
   M     #  Push a copy of the stack's maximum
    s    #  Swap so the previous value (or 0 in the first iteration) is at the top again
     y+  #  Add the current loop-integer `y` to it
       s #  Swap back to the pushed maximum for the next iteration
         # (after the loop, the maximum of the extra iteration is output implicitly)
</code></pre>
</div>
<div id="pu17" class="pu"><h1><a href="http://golfscript.com/nibbles/index.html" rel="nofollow noreferrer">Nibbles</a>, 9.5 bytes (19 nibbles)</h1>
<pre><code>`//$`,1:`/@]+/@$$]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=m708LzMpKSe1eMGCpaUlaboWmxL09VUSdAytEvQdYrX1HVRUYiESUPnN0UrRxjqGOiZAbKpjqWMUqxQLlQIA" rel="nofollow noreferrer">Attempt This Online!</a></p>
<p>Runs in polynomial time.<br />
Direct port of <a href="https://codegolf.stackexchange.com/a/265383/95126">my R answer</a>, which is itself inspired by <a href="https://codegolf.stackexchange.com/a/265384/95126">G B's answer</a>.</p>
<pre><code>  /                 # fold from right
   $                # over the input,
    `,1             # starting with a list of only [0]:
       :            #   join
        /@]         #     maximum in the result-list-so-far
                    #   to
            /@$     #     first entry of the result-list-so-far
           +   $    #     plus the current element
`/              ]   # and output get the maximum in the final result-list
</code></pre>
</div>
<div id="pu18" class="pu"><h1><a href="https://www.haskell.org" rel="noreferrer">Haskell</a>, <s>38</s> 35 bytes</h1>
<pre class="lang-haskell prettyprint-override"><code>g(x:y:r)=max(g$y:r)$x+g r
g x=sum x
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TZBLCsIwEIYRXPUUA3bR4tSSPqwR6g08QSmlC43FRkpViGdx40Y8k57GiWnUwDyS__uHMNfHrj7uN217u93Pp22weE6Ep5aXZe_nslaecHXrqqmA3hGg8uNZgjLoazR2ZN0cIAdZd2vwur45nGbCh8KBgmGEMSYlgj1BAMEK5tSFIRQV6RXpPxTTL2xQPqCMwJgi1XBEMENmM1kMnA2wnqoNulLWlpgeEooU-cdg57O5sejZyQfnWGkDxwVmdKFaln8figYDtzDpjlmG3d8b" rel="noreferrer">Attempt This Online!</a></p>
<p><code>g x=sum x</code> is a handy way to combine the two base cases <code>g[x]=x</code> and <code>g[]=0</code>.</p>
<hr />
<h1><a href="https://www.haskell.org" rel="noreferrer">Haskell</a>, <span class="math-container">\$O(n)\$</span>, 42 bytes</h1>
<pre class="lang-haskell prettyprint-override"><code>maximum.foldl(\[a,b]x-&gt;[b+x,max a b])[0,0]
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TZBdisIwEIDZFx96innUdaJNf7RB7A08QTaUFP-KjRZ_oCCexJfCsuyZdk-zE9OuBmYmyXzfEHL_3urTblWWzed1M_-6nNcs-Xk3ui7MxYzWh3JZ9j-kxlzVLJX5sEbqgYZcDaSPvnLG71tv5hld7GEORlcL6FfHYn8ebQYgPZAcAwwxUgjdYgxYChPajccgM-pn1H-iGP_DDhUtygkMKWILBwRz5F0mxcHTFrZTrWArZauEdBFRxCgeQjefT5xiZ0cPXGBmBYEJTulAVamXBwWtIDqY-t7NfUfTuPoH" rel="noreferrer">Attempt This Online!</a></p>
<p>Same approach as <a href="https://codegolf.stackexchange.com/a/265384/56433">G B's Ruby answer</a>.</p>
</div>
<div id="pu19" class="pu"><h1><a href="https://github.com/m-ender/retina/wiki/The-Language/a950ad7d925ec9316e3e2fb2cf5d49fd15d23e3d" rel="nofollow noreferrer">Retina 0.8.2</a>, 41 bytes</h1>
<pre><code>.+
$*
+`^((.+).*)¶\2(.*)¶
$1$3¶$1
O^`
\G1
</code></pre>
<p><a href="https://tio.run/##K0otycxL/K@qEZyg819Pm0tFi0s7IU5DQ09bU09L89C2GCMNMM2lYqhifGibiiGXf1wCV4y74f//hjpGOsY6JlxQWseUywjIMtQxhJFcxkDSBIhNdSyBPEsdCx1zIAtIAwA" rel="nofollow noreferrer" title="Retina 0.8.2 – Try It Online">Try it online!</a> Takes input on separate lines but link is to test suite that splits on commas for convenience. Explanation: Another port of @GB's Ruby answer.</p>
<pre><code>.+
$*
</code></pre>
<p>Convert to unary.</p>
<pre><code>+`^((.+).*)¶\2(.*)¶
$1$3¶$1
</code></pre>
<p>Add the first element to the third and keep the larger of the first and second elements.</p>
<pre><code>O^`
</code></pre>
<p>Sort descending.</p>
<pre><code>\G1
</code></pre>
<p>Convert the larger of the remaining two numbers to decimal.</p>
</div>
<div id="pu20" class="pu"><h1><a href="https://github.com/somebody1234/Charcoal" rel="nofollow noreferrer">Charcoal</a>, 21 bytes</h1>
<pre><code>Ｆ²⊞υ⁰ＦＡ≔⟦⁺ι§υ¹⌈υ⟧υＩ⌈υ
</code></pre>
<p><a href="https://tio.run/##RYu9CoMwFEb3PsUd74VbqLYdipM4ORSyhwzB/hiIsSS54ttH26XDt5xzvmG0cZitL@U1R8CaQEkaURhO1Bx@rA8fyUgEbUruHVArLwkdQ5v78Hiu37giYrjb1U0yoZBhkP2uogsZO5sy/h1RU4rWZ674su/KN66NKcfFbw" rel="nofollow noreferrer" title="Charcoal – Try It Online">Try it online!</a> Link is to verbose version of code. Explanation: Port of @GB's Ruby answer.</p>
<pre><code>Ｆ²⊞υ⁰
</code></pre>
<p>Start with an accumulator of two zeros.</p>
<pre><code>ＦＡ
</code></pre>
<p>Loop over the input.</p>
<pre><code>≔⟦⁺ι§υ¹⌈υ⟧υ
</code></pre>
<p>Update the accumulators.</p>
<pre><code>Ｉ⌈υ
</code></pre>
<p>Output the best sum.</p>
</div>
<div id="pu21" class="pu"><h1><a href="https://www.r-project.org" rel="noreferrer">R</a>, <s>80</s> <s>46</s> 43 bytes</h1>
<p><em>Edit: hugely golfed with inspiration from <a href="https://codegolf.stackexchange.com/a/265384/95126">G B's answer</a>: upvote that!</em></p>
<pre class="lang-r prettyprint-override"><code>\(x)max(Reduce(\(a,i)c(max(a),a[1]+i),x,0))
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=TY9LDsIgEED3noLEDZNOU2nph4Uewm3bNKTapAs3xia9i5tq4qG8hwdw6ICRZBgY3hvg_rguz2H_mm5DXL2jRs5wsbM8nk9Tf5aNtDhCL13JAtpatdEIOOMOwCufQfZSYYoZagARxlbEByEKWiWJqDs671C3mz8Y8x_OsPGwIjSjyBlPCVeowkwS46XHXWenuEwzSxmVNEWOZlXCHapgyfXXq2CwY8VghSVtKfuHsZJ6xQQcq5b_viycvw" rel="noreferrer">Attempt This Online!</a></p>
<p>Runs in polynomial time.</p>
</div>
<div id="pu22" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a> <code>G</code>, 59 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 7.375 bytes</h1>
<pre><code>ẏṗ'¯‹g;İṠ
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyJHfj0iLCIiLCLhuo/huZcnwq/igLlnO8Sw4bmgIiwiIiwiWzEsMiwzLDRdICAgICAgICAgLT4gNlxuWzEsMiwzLDQsNV0gICAgICAgLT4gOVxuWzIsMiwxLDEsMiwxLDEsMl0gLT4gN1xuWzMsMSw0LDEsNSw5LDJdICAgLT4gMTZcbls5LDgsNyw5LDksOF0gICAgIC0+IDI2Il0=" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Probably doesn't meet the criteria of running in polynomial time.</p>
<h2>Explained</h2>
<pre><code>ẏṗ'¯‹g;İṠ­⁡​‎‎⁪⁡⁪⁠⁪⁡⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁪‏⁠‎⁪⁡⁪⁠⁪⁣⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁣⁪‏‏​⁡⁠⁡‌⁢​‎⁪⁪⁠⁪⁪⁠‎⁪⁡⁪⁠⁪⁢⁢⁪‏‏​⁡⁠⁡‌⁣​‎‎⁪⁡⁪⁠⁪⁤⁪‏⁠‎⁪⁡⁪⁠⁪⁢⁡⁪‏‏​⁡⁠⁡‌⁤​‎‏​⁢⁠⁡‌⁢⁡​‎‏​⁢⁠⁡‌⁢⁢​‎‎⁪⁡⁪⁠⁪⁢⁤⁪‏‏​⁡⁠⁡‌⁢⁣​‎‎⁪⁡⁪⁠⁪⁣⁡⁪‏‏​⁡⁠⁡‌⁢⁤​‎‏​⁢⁠⁡‌­
ẏṗ'   ;    # ‎⁡Keep items of the powerser of range(0, len(input)) where:
     g     # ‎⁢ The minimum
   ¯‹      # ‎⁣  Of deltas - 1 isn't 0
# ‎⁤Essentially, this finds all sets without consecutive items, as consecutive items will have a forwards difference of 1, which is 0 when decremented. 
# ‎⁢⁡This works regardless of input because it's operating on the list of indices, not actual values
       İ   # ‎⁢⁢Index into the input list
        Ṡ  # ‎⁢⁣And sum each
# ‎⁢⁤The G flag outputs the biggest sum
💎
</code></pre>
<p>Created with the help of <a href="https://vyxal.github.io/Luminespire" rel="nofollow noreferrer">Luminespire</a>.</p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/265382/">265382</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




