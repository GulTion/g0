<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::143996</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>065</td><td>Perl 5 a</td><td>240117T220216Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/269323#269323">Xcali</a></td></tr>
<tr d-ix="1"><td>299</td><td>ReRegex</td><td>230927T011853Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/265509#265509">ATaco</a></td></tr>
<tr d-ix="2"><td>9375</td><td>Vyxal</td><td>230926T155320Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/265502#265502">pacman25</a></td></tr>
<tr d-ix="3"><td>nan</td><td>Java</td><td>170929T172903Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144074#144074">Jakob</a></td></tr>
<tr d-ix="4"><td>030</td><td>APL Dyalog Classic</td><td>170930T093238Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144091#144091">ngn</a></td></tr>
<tr d-ix="5"><td>076</td><td>Haskell</td><td>170928T204750Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144005#144005">H.PWiz</a></td></tr>
<tr d-ix="6"><td>122</td><td>Octave</td><td>170929T142515Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144059#144059">Sanchise</a></td></tr>
<tr d-ix="7"><td>082</td><td>Python 3</td><td>170928T204415Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144003#144003">caird co</a></td></tr>
<tr d-ix="8"><td>100</td><td>R</td><td>170928T203448Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144000#144000">Giuseppe</a></td></tr>
<tr d-ix="9"><td>008</td><td>Jelly</td><td>170928T213654Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144010#144010">Dennis</a></td></tr>
<tr d-ix="10"><td>074</td><td>JavaScript ES6</td><td>170928T203701Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144001#144001">Rick Hit</a></td></tr>
<tr d-ix="11"><td>068</td><td>JavaScript ES6</td><td>170928T203447Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/143999#143999">Neil</a></td></tr>
<tr d-ix="12"><td>068</td><td>Python 2</td><td>170928T223414Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144015#144015">xnor</a></td></tr>
<tr d-ix="13"><td>117</td><td>PHP</td><td>170928T215837Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144012#144012">Calimero</a></td></tr>
<tr d-ix="14"><td>016</td><td>Jelly</td><td>170928T212653Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144009#144009">Jonathan</a></td></tr>
<tr d-ix="15"><td>039</td><td>APL Dyalog</td><td>170928T210743Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144007#144007">Ad&#225;</a></td></tr>
<tr d-ix="16"><td>072</td><td>Python 2</td><td>170928T204925Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144006#144006">ovs</a></td></tr>
<tr d-ix="17"><td>025</td><td>Mathematica</td><td>170928T204140Z</td><td><a href="https://codegolf.stackexchange.com/questions/143996/deep-search-a-list/144002#144002">Misha La</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://www.perl.org/" rel="nofollow noreferrer">Perl 5</a> <code>-a</code>, 65 bytes</h1>

<pre class="lang-perl prettyprint-override"><code>$q=&lt;&gt;;s,-?\d+,$q-$&amp;||$k{$`=~y/\[//-$`=~y/]//}++,ge;say for keys%k
</code></pre>
<p><a href="https://tio.run/##K0gtyjH9/1@l0NbGzrpYR9c@JkVbR6VQV0WtpkYlu1olwbauUj8mWl9fF8KM1dev1dbWSU@1Lk6sVEjLL1LITq0sVs3@/z/aUEchGggMY3UUDIAYToOYXIb/8gtKMvPziv/r@prqGRga/NdNBAA" rel="nofollow noreferrer" title="Perl 5 – Try It Online">Try it online!</a></p>
<p>Result is 1-indexed.</p>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/TehFlaminTaco/ReRegex" rel="nofollow noreferrer">ReRegex</a>, 299 bytes</h1>
<pre><code>#import math
(a[^&lt;&gt;\[\]]*?)\[/$1&lt;/(a.*?(_*)&lt;[^&lt;&gt;\[\]]*?)\[/$1_$2&lt;/(a.*?(_*)&lt;[^&lt;&gt;\[\]]*?)\]/$1$2&gt;/(a.*?(_*)&gt;[^&lt;&gt;\[\]]*?)\[/$1$2&lt;/(a.*?_(_*)&gt;[^&lt;&gt;\[\]]*?)\]/$1$2&gt;/a([^\[\]]*$)/bb$1/^(.*?)b(.*)b(.*?(_*)&lt;[^&lt;]*)\1/$1b$2,d&lt;$4&gt;b$3/^(.*?)b,?(.*)b(.(?!\1))*$/$2/(,|^)([^,&lt;&gt;\[\]]+)([^&lt;&gt;\[\]]*),\2/$1$2$3/#input
</code></pre>
<h2>With comments</h2>
<pre><code>#import math
# Count the depths of all braces
(a[^&lt;&gt;\[\]]*?)\[/$1&lt;/
(a.*?(_*)&lt;[^&lt;&gt;\[\]]*?)\[/$1_$2&lt;/
(a.*?(_*)&lt;[^&lt;&gt;\[\]]*?)\]/$1$2&gt;/
(a.*?(_*)&gt;[^&lt;&gt;\[\]]*?)\[/$1$2&lt;/
(a.*?_(_*)&gt;[^&lt;&gt;\[\]]*?)\]/$1$2&gt;/
# Move to step b
a([^\[\]]*$)/bb$1/
# Record all the depths of all instances of the input
^(.*?)b(.*)b(.*?(_*)&lt;[^&lt;]*)\1/$1b$2,d&lt;$4&gt;b$3/
# Move to finalize
^(.*?)b,?(.*)b(.(?!\1))*$/$2/
# Deduplicate
(,|^)([^,&lt;&gt;\[\]]+)([^&lt;&gt;\[\]]*),\2/$1$2$3/
#input
</code></pre>
<p><a href="https://tio.run/##dY47bsMwDED3nCJBOIgqU0Gyky6GfRCKNiTEaD3kA8MFOuTujvJxOhjRQIh8fCT7tm@/279xXHeH86kflocw/CxU4LooPXsRXaFnA7YwKnzqSjUaixlswL3lkji48h@XM/1lN3M@6UFx/SgCmhjBmlolA2OK9/BaLRq9TVYER/sC8jJCNjVT9WxX1cpbRA0GnFF0qTHNp@fej1sy3YDk3f2GNGXdHc@/wzhutoEtsSPOKBfabIl39CVkhTi9lDuhnB4fEdoJZXIF" rel="nofollow noreferrer" title="ReRegex – Try It Online">Try it online!</a></p>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal" rel="nofollow noreferrer">Vyxal</a>, 75 <a href="https://github.com/Vyxal/Vyncode/blob/main/README.md" rel="nofollow noreferrer">bits<sup>v2</a></sup>, 9.375 bytes</h1>
<pre><code>w⁽Þf↔ƛ⁰O;¯T
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2#WyI9IiwiIiwid+KBvcOeZuKGlMab4oGwTzvCr1QiLCIiLCJbMSxbMixbMyw0XSw1LFs2LDddLDFdLFtbW1s1LDJdLDQsWzUsMl1dXSw2XSwzXVxuMSJd" rel="nofollow noreferrer">Try it Online!</a></p>
<p>Might be able to shave off a byte here, port of Jelly</p>
</div>
<div id="pu3" class="pu"><h1>Java, 154 + 19 = 173 bytes</h1>



<pre class="lang-java prettyprint-override"><code>import java.util.*;
</code></pre>

<p></p>

<pre class="lang-java prettyprint-override"><code>Set&lt;Long&gt;f(List l,long n){Set s=new HashSet();if(l.contains(n))s.add(0l);for(Object o:l)if(o instanceof List)for(long d:f((List)o,n))s.add(d+1);return s;}
</code></pre>

<p><a href="https://tio.run/##jVPBbtswDD3bX8GjtHrG0nYdECcFehiwAR12yHHYQbVlV5kiGZKcLgj87Rkly0mWZO0Ohizy8ZGPIpdszd7rlqtl9WsnVq02DpZoyzsnZP6uSNO2e5KihFIya@EbEwq2uwV3s0etmvuaPArrQGYSb6DoFj1g54q/wBdmn/FGaCFqIvNSK4fBlihKbc6qinyQtKi1Id@flrx0oKeSIlIDghxTJdc1eHLqMYG@mtYk5KM627NUVxNaGO46o8AW/S5NWiPWzHFAFoeFH9T40NmQ7R4kXkS9idl//ARmDIVtmiSvBMAcvLQD4sEYtjmGoVykwJJhrwumB@5E1HAiEZVFX@JTBFE6sCQ9cGk5nMWMNZ/FjaLIAaHpX1xDgHs2@iVI@Solb5h8ME234sp9/l3y1gmtSIxKhy822POjvU@xy8NYxCavtahghe9LFs4I1YR@NnYo8LjFsYN7U6hnIjN/nDuS68Fz4rqRGdzKfnB9vAi5Q8inERL5@39luWC6aDsxYma4HnMkya3M/gMWz3jcHVd2Ey497txbQzi@s5@r/bwNK4jeiSzwnM2xAf7nCi1xUhYb6/gq153LcUuUk4r4Wv1WE5rXYX4yXONA2vuH7nd/AA" rel="nofollow noreferrer">Try It Online</a></p>

<h2>Ungolfed method</h2>

<pre class="lang-java prettyprint-override"><code>Set&lt;Long&gt; f(List l, long n) {
    Set s = new HashSet();
    if (l.contains(n))
        s.add(0l);
    for (Object o : l)
        if (o instanceof List)
            for (long d : f((List) o, n))
                s.add(d + 1);
    return s;
}
</code></pre>
</div>
<div id="pu4" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog Classic)</a>, <s>31</s> 30 bytes</h1>

<p>Function. Left arg <code>⍺</code> is the needle, right arg <code>⍵</code> is the haystack.</p>



<pre class="lang-apl prettyprint-override"><code>{×≢⍵:(⍳⍺∊⍵),1+⍺∇⊃,/⍵/⍨≢¨⍴¨⍵⋄⍬}
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT9dNzkksLs5M/v@ob2pm/qO2CQb/04Bk9eHpjzoXPerdaqXxqHfzo95djzq6gDxNHUNtMKf9UVezjj5QBIhXAFUeWvGodwuI2Pqou@VR75ra//8NFdIUNAw1jDSMNQwVjBSMNU00DYGQywwurmCiaaphpmAOFNUAAlMFI00TMKmpaaZprMllbAxWCtQNVAxUbaKpCQA" rel="nofollow noreferrer" title="APL (Dyalog Classic) – Try It Online">Try it online!</a></p>
</div>
<div id="pu5" class="pu"><h1><a href="https://www.haskell.org/" rel="nofollow noreferrer">Haskell</a>, <s>102</s> <s>93</s> <s>80</s> 76 bytes</h1>

<p>Thanks <a href="https://codegolf.stackexchange.com/users/48198/bruce-forte">Bruce Forte</a> for saving some bytes, and <a href="https://codegolf.stackexchange.com/users/56433/laikoni">Laikoni</a> for saving some more.</p>

<p>Thanks <a href="https://codegolf.stackexchange.com/users/74886/4castle">4castle</a> for saving 4 bytes.</p>

<p>Haskell has no data type for this kind of list, so I made my own.</p>

<p>This solution is <code>1-indexed</code></p>



<pre class="lang-hs prettyprint-override"><code>import Data.List
data T=E Int|L[T]
E n%x=[0|x==n]
L s%x=nub$map(+1).(%x)=&lt;&lt;s
</code></pre>

<p><a href="https://tio.run/##vY0/C4MwEMV3P8UNCkpFjH8Xs9Wh4OgmGVIsNFSjaAoOfnebs6UO3TokB4/3Lnf3u/P5ceu6bRP9OEwKzlzxoBKzslrtoKYlXKRaq6ZmVgnSWWgTrgulklkVzDrK59Xu@eieiBe4zuLRopi3ngsJFNrBAnzjJKQCG9yqKYH4qNGusV9CwrSke8y0yzESpvO78E@PYzfxj8iwkaHEzAMHiDFSZIwUGyMlxkipMVJmjJT/kI4DBMfCz92vw63wry2yvQA" rel="nofollow noreferrer" title="Haskell – Try It Online">Try it online!</a></p>

<p>First I define (recursively) a data type <code>T</code></p>

<p><code>T</code> has either type <code>E Int</code> (single element of type <code>Int</code>) or <code>L[L]</code> (list of type <code>T</code>).</p>

<p><code>(%)</code> is function that takes <code>2</code> arguments, on of type <code>T</code>, the list through which we are searching, and <code>x</code>, the <code>Int</code> we are looking for.</p>

<p>Whenever <code>(%)</code> finds something that is a single element <code>E n</code>, it checks <code>n</code> for equality with <code>x</code> and returns <code>0</code> if True.</p>

<p>When <code>(%)</code> is applied to an <code>L s</code> (where <code>s</code> has type <code>[T]</code>) it runs <code>(%)</code> on all the elements of <code>s</code> and increments the result (as the depth is increasing since we are looking inside <code>s</code>), and the concatenates the result.</p>

<p><code>nub</code> then removes the duplicates from the list</p>

<p>NB. <code>import Data.List</code> is only for <code>nub</code>.</p>
</div>
<div id="pu6" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, <s>126</s> 122 bytes</h1>



<pre class="lang-matlab prettyprint-override"><code>function n=r(p,t,l)n=[];if nargin&lt;3
l=0;end
for x=p
if iscell(q=x{1})a=r(q,t,l+1);else
a=l*find(q==t);end
n=union(n,a);end
</code></pre>

<p><a href="https://tio.run/##HY3BCsMgEAXvfoVHbffQRHqy@yWlB0m0CLImxpSA@O3W5DrzhhenbH62NbfTlH0kTpjEAhmCJHx/tHecTPp6eikW8KEtzczFxA9cWHd@m2wIYsWjDFWa3q5nex@ktmGzzGC4OU9zX2CWV024Uz8SBOYC7YRJFAVlhCeUgasKY62gZPsD" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>

<p>For readability, I replaced spaces or <code>;</code>'s with line ends where possible.
Explanation of ungolfed code:</p>

<pre class="lang-matlab prettyprint-override"><code>function n=r(p,t,l) % Declare function with list p, integer t and optional recursion depth l
n=[];
if nargin&lt;3
    l=0;            % If l is not given (first iteration), set l to zero (or one for 1-indexing)
end
for x=p             % Loop over list
if iscell(q=x{1})   % If loop variable x is a cell, we must go down one level.
     a=r(q,t,l+1);  % So recurse to l+1.
else
    a=l*find(q==t); % Empty if q~=t (because find(false)==[], and l*[]==[]), else equal to l*1==l.
end
n=union(n,a);       % Append to list of levels, make sure we only get distinct values.
end
</code></pre>
</div>
<div id="pu7" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, <s>123</s> <s>86</s> 82 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f(a,n,l=[],d=0):
 for e in a:l+=[d]*(e==n);0*e==[]and f(e,n,l,d+1)
 return{*l}
</code></pre>

<p><a href="https://tio.run/##Hcs7CsMwEEXR3quYUrJf4X/AQSsZpjBIIgYxNsIpQsjaFSe3OdU9Xudj16EUHyJFs0KRHAu8a@1SUdwzBdqU1iU1jr3UJjin9t7Wlyyr@usKvwu@6WxFOZzPrO86fUoiR9yBe/CAUTCBZ9wEnYCvJvSCEX9FMAsGqY686WmiSaDR2vIF" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>-37 bytes thanks to Hyper Neutrino and ovs</p>

<p>-4 bytes thanks to Jonathan Frech</p>
</div>
<div id="pu8" class="pu"><h1><a href="https://www.r-project.org/" rel="nofollow noreferrer">R</a>, <s>101</s> <s>95</s> <s>92</s> 100 bytes</h1>



<pre class="lang-r prettyprint-override"><code>f=function(L,n,d=0)unique(unlist(Map(function(x)if(n%in%unlist(x))"if"(is.list(x),f(x,n,d+1),d),L)))
</code></pre>

<p><a href="https://tio.run/##PY7BDoJADER/hZCQtrEaUY/yB3jxunBAYU0TUpHdNfv3iBiZ4@TNy4zTtRTnk/M2sUHvXp6Kjrp30@PQjK5DXzxcuCFUlQGGfmYR@F/Vc0XAjuZMtlgNJSu3xZ6Cyit0GHTZXZoBVySSWNRMNIuUik1R3G6hIrHF@BVscuKWuFzk@PuJYHI@sDnyqa6BOMlp@gA" rel="nofollow noreferrer" title="R – Try It Online">Try it online!</a></p>

<p>Recursive solution; it's quite inefficient in bytes, but R <code>lists</code> are super annoying to work with.</p>

<p>Basically, takes <code>L</code>, and for each element <code>x</code> of <code>L</code>, (which is either a <code>list</code> or an <code>atomic</code> vector of one element), checks if <code>n</code> is <code>%in%</code> <code>x</code>, then checks if <code>x</code> is a <code>list</code>. If it isn't, then <code>x==n</code> so we return the depth <code>d</code>; otherwise we recursively call <code>f</code> on <code>x</code>, incrementing <code>d</code>.</p>

<p>This, of course, returns a <code>list</code>, which we <code>unlist</code> and <code>unique</code> to ensure the right output (returning a vector of integer depths); returns <code>NULL</code> (an empty list) for invalid <code>n</code>.</p>

<p>Apparently, <code>%in%</code> doesn't search recursively through a <code>list</code> like I thought, so I have to <code>unlist(x)</code> for +8 bytes :(</p>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>11</s> 8 bytes</h1>

<pre><code>WẎÐĿċ€IT
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/z/84a6@wxOO7D/S/ahpjWfI/8PLD08Asoz0geLu//9HcylEG@pEG@lEG@uYxOqY6kSb6ZjH6hjG6kQDgamOUayOiQ6Yjo3VMYvVMY7VAWkw0gEqB6oGKwYaAQJAPQZgnRBSAR@INgApAdkNNAtkOdA4k1gCmsAaIRog6rliAQ" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>

<h3>How it works</h3>

<pre><code>WẎÐĿċ€IT  Main link. Left argument: A (array). Right argument: n (integer)

W         Wrap; yield [A].
  ÐĿ      Repeatedly apply the link to the left until the results are no longer
          unique. Yield the array of all unique results.
 Ẏ          Concatenate all elements at depth 1 in the array.
          The last array of the array of results is completely flat.
    ċ€    Count the occurrences of n in each intermediate result.
      I   Compute all forward differences.
       T  Truth; yield the array of all indices of non-zero differences.
</code></pre>

<h3>Example run</h3>

<p>For left argument</p>

<pre><code>[1, [2, [3, [1, 2, 3], 4], 1], 1]
</code></pre>

<p><code>W</code> first yields the following array.</p>

<pre><code>[[1, [2, [3, [1, 2, 3], 4], 1], 1]]
</code></pre>

<p><code>ẎÐĿ</code> repeatedly concatenates all elements at depth <strong>1</strong>, reducing the depth of the array by <strong>1</strong> in each step. This yields the following array of intermediate results.</p>

<pre><code>[
 [[1, [2, [3, [1, 2, 3], 4], 1], 1]],
 [ 1, [2, [3, [1, 2, 3], 4], 1], 1 ],
 [ 1,  2, [3, [1, 2, 3], 4], 1,  1 ],
 [ 1,  2,  3, [1, 2, 3], 4,  1, 1  ],
 [ 1,  2,  3,  1, 2, 3,  4,  1, 1  ]
]
</code></pre>

<p>For right argument <strong>1</strong>, <code>ċ€</code> counts the occurrences of <strong>1</strong> in each intermediate result.</p>

<pre><code>[0, 2, 3, 3, 4]
</code></pre>

<p><code>I</code> now takes all forward differences.</p>

<pre><code>[2, 1, 0, 1]
</code></pre>

<p>Non-zero differences correspond to steps in which at least one other <strong>1</strong> was added to depth <strong>1</strong>. Thus, a non-zero difference at index <strong>k</strong> indicates the presence of a <strong>1</strong> at depth <strong>k</strong>. <code>T</code> finds the indices of all truthy elements, yielding the desired result:</p>

<pre><code>[1, 2, 4]
</code></pre>
</div>
<div id="pu10" class="pu"><h1>JavaScript (ES6), <s>73</s> 74 bytes</h1>
<pre><code>f=(a,n,i=0,o={})=&gt;a.map(e=&gt;e.pop?f(e,n,i+1,o):e-n||o[i]++)&amp;&amp;Object.keys(o)
</code></pre>
<p><strong>Explanation:</strong></p>
<pre><code>f=(a,                             //input array
   n,                             //input number to search
   i=0,                           //start at first level
   o={}                           //object to store the finds
  )=&gt;
    a.map(                        //loop through the array
      e =&gt; e.pop ?                //is this element an array?
             f(e, n, i+1, o) :    //if so, recurse on it to the next level
             e-n || o[i]++        //otherwise, update o if element equals the number
    ) &amp;&amp;
    Object.keys(o)                //return o's keys
</code></pre>
<p><strong>Test cases</strong></p>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=(a,n,i=0,o={})=&gt;a.map(e=&gt;e.pop?f(e,n,i+1,o):e-n||o[i]++)&amp;&amp;Object.keys(o)

var a = [1,[2,[3,4],5,[6,7],1],[[[[5,2],4,[5,2]]],6],3];
console.log(f(a,1));
console.log(f(a,2));
console.log(f(a,3));
console.log(f(a,4));
console.log(f(a,5));
console.log(f(a,6));
console.log(f(a,7));

console.log('___________');
var a = [[[[[1],0],1],0],1];
console.log(f(a,0));
console.log(f(a,1));

console.log('___________');
var a = [11,22,[33,44]];
console.log(f(a,11)) // [0]
console.log(f(a,22)) // [0]
console.log(f(a,33)) // [1]
console.log(f(a,44)) // [1]
console.log(f(a,55)) // empty set</code></pre>
</div>
</div>
</p>
</div>
<div id="pu11" class="pu"><h2>JavaScript (ES6), <s>79</s> 68 bytes</h2>

<pre><code>f=(a,n,r=new Set,d=0)=&gt;a.map(e=&gt;e.map?f(e,n,r,d+1):e-n||r.add(d))&amp;&amp;r
</code></pre>

<p>Returns a Set. If this is unacceptable, use <code>&amp;&amp;[...r]</code> at a cost of 5 bytes.</p>
</div>
<div id="pu12" class="pu"><h1><a href="https://docs.python.org/2/" rel="noreferrer">Python 2</a>, 68 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda l,k,d=-1:l&gt;[]and f(l[0],k,d+1)|f(l[1:],k,d)or{d}-{d+(l==k)}
</code></pre>

<p><a href="https://tio.run/##HY3LCoMwFAX3fsVdGjxC46tFSH8k3EVKahuMUYKbYv32tDqbw5zNLJ/1PYcqpUF5Mz2sIY8RVpWy93fNJlgacq8vfLyFFN/DZH@qmONm93KzRe6VGsWePCnSErqCrtEwWugOV4Zk6D8tKkaDc5nRMWrOsmGO5MgFiia8nrnETfQZ0RJdWI84yIn0Aw" rel="noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu13" class="pu"><h1><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 117 bytes</h1>



<pre class="lang-php prettyprint-override"><code>$r;function z($a,&amp;$r,$i=0){foreach($a as $v){is_int($v)?(@in_array($i,$r[$v])?:$r[$v][]=$i):z($v,$r,$i+1);}}z($s,$r);
</code></pre>

<p><a href="https://tio.run/##JYw/a8MwFMS/ioZHkegNcf4V4hpn6dAOaWm9FPEwwnWwMkhGSg1tyGd3H@ktd7/juHEY58d6HEZFubIF7BJ2hTVjA7vFA6NgWNEGS8YaN2fGlrHicqZUHr9Dd/YxqF9NDneUQL5amMsxpt51g5TKZUWTufjc@nDWEmu996F1KbkfTR6ULE1s6t1/sFyRNzv5m3C7uy9Meb0KZ2FTzn03RHXKMbR96OJXr2X18vF6aN/en5rmU@z50MjuDw" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>&nbsp;17&nbsp;</s> 16 <a href="https://github.com/DennisMitchell/jelly/wiki/Code-page" rel="nofollow noreferrer">bytes</a></h1>

<pre><code>⁴e®;©ȧ⁸ḟ⁴ẎµÐĿȧ®T’
</code></pre>

<p>A full program taking two command line arguments the list and an element to check for, and printing the depth or depths (if any) at which the element exists. The results are 1-indexed.</p>

<p><strong><a href="https://tio.run/##y0rNyan8//9R45bUQ@usD608sfxR446HO@YDBR7u6ju09fCEI/tPLD@0LuRRw8z///9HG@pEG@lEG@uYxOqY6kSb6ZjH6hjG6kQDgamOUayOiQ6Yjo3VMYvVMY79bwoA" rel="nofollow noreferrer">Try it online!</a></strong></p>

<h3>How?</h3>

<pre><code>⁴e®;©ȧḟ⁴ẎµÐĿȧ®T’ - Main link: list, L
          µÐĿ    - loop, collecting updated values of L, until a fixed point is reached:
⁴                -   4th argument (2nd program input) = the number
 e               -   exists in (the current version of) L?
  ®              -   recall value from the register (initially 0)
   ;             -   concatenate the two
    ©            -   (copy this result to the register)
       ⁴         -   4th argument (2nd program input) again
      ḟ          -   filter out (discard any instances of the number)
     ȧ           -   logical and (non-vectorising)
        Ẏ        -   tighten (flatten the filtered L by one level to create the next L)
             ®   - recall value from the register
            ȧ    - logical and (non-vectorising)
              T  - truthy indexes (1-indexed)
               ’ - decrement (account for the leading zero from the initial register)
</code></pre>
</div>
<div id="pu15" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, 39 bytes*</h1>



<p>Full program. Prompts for list, then for number. Prints 1-based list to STDOUT.</p>

<pre class="lang-apl prettyprint-override"><code>⌊2÷⍨⍸∨⌿⍞⍷⎕FMT⎕JSON⍠'Compact'0⊢⎕
</code></pre>

<p><a href="https://tio.run/##SyzI0U2pTMzJT///qKPdJTW1IDg1sSg54/@jni6jw9sf9a541LvjUceKRz37H/XOe9S7/VHfVDffECDpFezv96h3gbpzfm5BYnKJusGjrkVAYZAx/xXAICezuORR2wSoWvVoQ51oI51oYx2TWB1TnWgzHfNYHcNYnWggMNUxitUx0QHTsbE6ZrE6xrHqXBBTEG7iAhnIZYhD3AiHuDEOcRMc4qY4xM1wiJtjisN9DAJALxqAPQom1bkMSFQP8y9GaBrqGIGCExieJrG4QwtncOEML2MA" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p><code>⎕</code> prompt for list</p>

<p><code>⊢</code> yield that (separates <code>0</code> and <code>⎕</code>)</p>

<p><code>⎕JSON⍠'Compact'0</code> convert to indented JSON string with newlines</p>

<p><code>⎕FMT</code> convert to matrix (one newline-delimited line per row)</p>

<p><code>⍞⍷</code> prompt for number as string and indicate where it begins in that</p>

<p><code>∨⌿</code> vertical OR reduction (i.e. which columns it begins in)</p>

<p><code>⍸</code> indices of those beginnings</p>

<p><code>2÷⍨</code> halve that (levels are indented with two spaces)</p>

<p><code>⌊</code> round down (because first data column is column 3)</p>

<hr>

<p><sup>* In Dyalog Classic, counting <code>⍸</code> as <code>⎕U2378</code> and <code>⍠</code> as <code>⎕OPT</code>.</sup></p>
</div>
<div id="pu16" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, 72 bytes</h1>



<pre class="lang-python prettyprint-override"><code>f=lambda l,k,d=0:set([d]*(k in l)).union(*[f(x,k,d+1)for x in l if[]&lt;x])
</code></pre>

<p><a href="https://tio.run/##HYzLDoIwEEX3fMUsW7wxlpeGyJdMZoGBakMpBDHBr6/C2dzFuTnzd31NIYvRNr4dH11LHgO65lK/@1VxJ6kayAXyWp8/wU1BpWzVtn9ORttpoe3Q5CzLfRMdPTXEBpyBcxSCElzhKjAC/lMiExQ4VgSVIJck2UNuDy1tePbK4KbrhGheXFjJKg9yOv4A" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>
</div>
<div id="pu17" class="pu"><h1>Mathematica, 25 bytes</h1>

<pre><code>Tr/@Union[1^Position@##]&amp;
</code></pre>

<p>(returns 1-indexed output)</p>

<h1>Explanation</h1>

<pre><code>                         test  {1, {2, {3, {1, 2, 3}, 4}, 1}, 1}
             Position[test,1]  {{1}, {2, 2, 2, 1}, {2, 3}, {3}}
           1^Position[test,1]  {{1}, {1, 1, 1, 1}, {1, 1}, {1}}
    Union[1^Position[test,1]]  {{1}, {1, 1}, {1, 1, 1, 1}}
Tr/@Union[1^Position[test,1]]  {1, 2, 4}
</code></pre>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/143996/">143996</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




