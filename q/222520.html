<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::222520</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>182</td><td>JavaScript ES2020</td><td>210329T101821Z</td><td><a href="https://codegolf.stackexchange.com/questions/222520/placing-circles-along-a-square-spiral/222542#222542">emanresu</a></td></tr>
<tr d-ix="1"><td>211</td><td>JavaScript Node.js</td><td>210330T054101Z</td><td><a href="https://codegolf.stackexchange.com/questions/222520/placing-circles-along-a-square-spiral/222570#222570">tsh</a></td></tr>
<tr d-ix="2"><td>309</td><td>JavaScript ES7</td><td>210329T103836Z</td><td><a href="https://codegolf.stackexchange.com/questions/222520/placing-circles-along-a-square-spiral/222543#222543">Arnauld</a></td></tr>
</table>
<div id="pu0" class="pu"><h1>JavaScript (ES2020), <s>417</s> <s>338</s> <s>331</s> <s>323</s> <s>321</s> <s>318</s> <s>316</s> <s>304</s> <s>303</s> <s>290</s>  <s>283</s> <s>273</s> <s>269</s> <s>261</s> <s>257</s> <s>252</s> <s>247</s> <s>244</s> <s>237</s> <s>234</s> <s>238</s> <s>234</s> <s>207</s> <s>206</s> <s>205</s> <s>200</s> <s>194</s> <s>193</s> <s>186</s> <s>182</s> <s>183</s> 182 bytes</h1>
<pre class="lang-javascript prettyprint-override"><code>G=&gt;K=&gt;eval('for(l=[];G--;)for(x=y=d=0,L=t=i=1,X=l[G]=[];t--,K&lt;&lt;3*G&gt;=i;d%2?y+=2-d%4:x+=1-d%4,t||=L+=d++%2)X[l.some(Z=&gt;Z.some(([M,N],R)=&gt;Math.hypot(M-x,N-y)&lt;R**.5+i**.5))||i++]=[x,y]')
</code></pre>
<p><a href="https://ato.pxeger.com/run?1=ZY7BasJAFEX3_Y_gvMxMMFFBmtwpXWWhceFKDFlIJ5rA6JQ6LQnkT7oJpf2F_kv_pgbduXnv3sPj3vf5fbK67L8q_Ly7vZz__aZQC6jyY2fYaG_fmEFexKmUMQ2uQQuNsVjCoUYoNjB5WgwnTkqxSJKJnyrUsfaip5YjktqbPjYc4SCE6zosOTTnXkSb3ARneyzZFmp7VSzPxKoQa4LKdq4KqvbVOpbJRqxkS8na94MZr4dJ1HU155fmRrTFiG7fP7_Y09maMjD2wCoWEQunRA_3dHZHJxc6pltQ31_3Pw" rel="nofollow noreferrer">Try It Online?</a></p>
<p>Severely golfed. Very inefficient. Thanks to @Neil for getting rid of all the spare bytes I had lying around, and @tsh for removing a lot more. Takes G 1-indexed and K 1-indexed. -1 byte thanks to ophact.</p>
<p>Somehow beat @Arnauld, <s>but still losing to @tsh by a lot</s> somehow outgolfed tsh as well.</p>
<h1>Explanation</h1>
<p>Slightly different to actual code.</p>
<pre class="lang-javascript prettyprint-override"><code>G =&gt;                         // A function taking G (generation)
K =&gt; {                       // and K (circle number)
  for(                       // Start a loop...
    l = [];                  // l = 2d list of circles we've already found, starts empty
    G--;                     // Looping G times...
  )                          
    for(                     // Another loop
                             // Initialise some variables
      x = y =                // x, y = current coordinates in the spiral
      d = 0                  // d = direction of current leg of spiral, initialise them all to 0
      t =                    // t = distance to end of spiral
      i =                    // i = current radius
      L = 1,                 // L = total length of current leg of spiral
      X = l[G] = [];         // Add an empty list to l, which gets assigned to X.
      t--,
      K &lt;&lt; 3 * G &gt;= i;       // Every generation, search for 8x less circles (probably enough, can always be increased)              
      d % 2 ?                // If moving vertically
        y += 2 - d % 4       // Change y
      : x += 1 - d % 4,      // Else change x
      t ||=                  // If t is falsy, set t to...
      L +=                   // L incremented by...
      d++ % 2                // direction modulo 2
    ) 
    l.some(                      // Do any values in l have the property that...
      Z=&gt;Z.some(                 // Any of their values have the property that...
        ([M,N],R) =&gt;             // (M, N = coords, R = radius)
        Math.hypot(M - x, N - y) // Is the distance to the point we're on right now...
        &lt; R ** .5 + i ** .5      // Less than the sum of their radii?
      )
    ) ? 0 :                      // If not, we can place a circle.
    X[i++] = [x,y]               // Increment i (radius of circle we're trying to place), and append the coordinate to X
                                 // The above is returned when the loop ends because i is too large.
}
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://nodejs.org" rel="nofollow noreferrer">JavaScript (Node.js)</a>, 211 bytes</h1>

<pre class="lang-javascript prettyprint-override"><code>g=&gt;k=&gt;{for(N=1;n=N;N*=2)for(G=g,C=[];G--;n-=r*3)for(o=[x=X=0,Y=y=s=1];x&lt;n;o[[x+Y,y+X]]?0:[X,Y]=[Y,-X])if(!(o[[x+=X,y-=Y]]=C.some(([X,Y,R])=&gt;Math.hypot(X-x,Y-y)&lt;R+r,r=s**.5)||s++-k|G*C.push([x,y,r])))return[x,y]}
</code></pre>
<p><a href="https://tio.run/##bc@xboMwEIDhvU/RbjbYKECRQp2jAwNTGTKBLA9RCiRNipFNKlDps9MkysaN9@n06@5r97Oze3Pset7qz2quYW4gOUHyW2tDcvBFC7nIHQjoDTJoWApSiYxz0XIwTnh3DXKAAlashBEs@EoMm1ZoKQe3ZKNbKPW@epMFKxXIkvFC0WNNXsh9AQo2ciiVgtSz@rsi5LbItopC8rHrD95h7HRPCj6wko90s3UNM2Adx4voNFnX5acpc1Kvu9gDkQMbmVGUUlP1F9PeZvU373Vr9bnyzrohNfEpefYpFU9LDnAOUY5WSw7wdoC3r@y/4hwtOcTbId6@so8cuMYjazyyxp@P8UiMR@JHZP4H" rel="nofollow noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<ul>
<li>-3 bytes by <a href="https://codegolf.stackexchange.com/users/58563/arnauld">Arnauld</a></li>
</ul>
<hr />
<pre class="lang-javascript prettyprint-override"><code>g=&gt;  // input: generation
k=&gt;{ // input: circle area
for(
 N=1; // Search bound, we try to search generation 1
      // circles in [-N,N]x[-N,N]
 n=N; // Search bound of current generation
 N*=2 // If we cannot locate (g,k) circle
      // we try a larger bound later
)
 for(
  G=g, // Number of generation (count down)
  C=[]; // All Circles found yet
  G--; // Count down 1 generation
  // I'm not quite sure if next line is correct.
  // But it passes all testcases, at least.
  // Change to `n=n/4-r*4` would somehow ensure
  // its correctness, but also make it slow as hell.
  n-=r*3 // A smaller search bound for next generation
 )
  for(
   o=[ // All points visited, stored by key
       // For example, if (3, 4) is visited
       // o['3,4'] would be something truthy
    x= // Current x
    X=0, // Current x axis direction
    Y= // -Y is current y axis direction
    y= // current y
    s=1 // current circle area is s*PI
   ]; // Values initialized in Array o are harmless garbage
      // As index `0` or `1` is not in `x,y` format
   x&lt;n; // Search in the bound
   o[[x+Y,y+X]]?0: // If the left side point is not visited
   [X,Y]=[Y,-X] // we turn left
  )
   if(!( // !(a||b) iff !a&amp;&amp;!b, known as De Morgan's laws
    o[
     [x+=X,y-=Y] // Move one step forward
    ]= // Mark current point visited
    // Is there a circle intersect with current one (if
    // we placed it here)?
    C.some(([X,Y,R])=&gt;Math.hypot(X-x,Y-y)&lt;R+r,r=s**.5)||
    // If no such circle, we need to place a circle here
    s++-k| // Is current area equals to user input `k`?
           // Increase the area for next circle by `s++`
           // `|` do not use short-circuit evaluation
    G* // Is current generation counted down to 0?
    C.push([x,y,r]) // Push it to list of circles
                    // C.push(...) always returns positive
                    // So multiply by G is harmless
   ))
    return[x,y] // Return current circle if it is asked for
}
</code></pre>
</div>
<div id="pu2" class="pu"><h1>JavaScript (ES7), <s> 319 </s> 309 bytes</h1>
<p>Expects <code>(g)(k)</code> and returns <code>[x,y]</code>.</p>
<p>The formula for the spiral coordinates was inspired by <a href="https://codegolf.stackexchange.com/a/87394/58563">this answer from Neil</a>.</p>

<pre class="lang-javascript prettyprint-override"><code>g=&gt;k=&gt;{a=[];p=[];r=[];H=Math.hypot;F=n=&gt;{while((j=p[n]=-~p[n],C=_=&gt;((i+2&gt;&gt;2)-i%2*j)*~-(i--&amp;2),x=C(i=(--j*4+1)**.5|0,j-=i*i&gt;&gt;2),y=C(),n)&amp;&amp;a.every(([N,X,Y])=&gt;~N+n|H(X,Y)&lt;2*H(x,y))&amp;&amp;!F(n-1,p[n]--)||a.some(([_,X,Y,R])=&gt;H(X-x,Y-y)&lt;R**.5+q**.5,q=-~r[n]));a.push([n,x,y,r[n]=q])};while(~~r[g-1]&lt;k)F(g-1);return[x,y]}
</code></pre>
<p><a href="https://tio.run/##dZBNb4JAEIbv/RX0UDODOyiLmDa4XEyMl/bgqYYQQywqaBfEj0qq/nW7m1ZTK73MfuR5d57ZNNpGq3GR5GuS2Vt8mojTVPhz4X9GIgi9XJdCl754jtYza1bm2drrCamIj1myiAFSkQcyFHTUC@uKkfABkjr3fY6UPHAzRfNIkBDVOLKd6EIigCg1W3UbTdNy902WkkjMRCdYqQBkEmu1yIq3cVECBC/slQ1DFP7xpS73fVAn7HCzDztWoiLveyDJZlqACPf7yFpl70otGOkgG@ioStGODanEzkB3rS91ZUslXqgcohdZ@WY1g0Ay9SzTl2IZ4sH7nvOosCnZYWeOPVAb9Ip4vSlkoODwcBpncpUtYmuRTWECNoJhIxqNhgGG0WSGKnh3y/ALwzXDqxjnzNC/jNs8M06bGWQ//mX4jQ@1qpiLDzm611MFY7eufNxKxv1hqK18DH7j4/z2IbdyLufqf1p6riaevgA" rel="noreferrer" title="JavaScript (Node.js) – Try It Online">Try it online!</a></p>
<h3>How?</h3>
<p>One tricky point in the challenge is to figure out how many circles of generation <span class="math-container">\$n-1\$</span> must be processed before we can start generation <span class="math-container">\$n\$</span>.</p>
<p>In this implementation, we don't attempt to put a new circle of generation <span class="math-container">\$n\$</span> at <span class="math-container">\$(x_0,y_0)\$</span> until there's at least one circle of generation <span class="math-container">\$n-1\$</span> at <span class="math-container">\$(x_1,y_1)\$</span> which is at least twice as far from the center of the spiral:</p>
<p><span class="math-container">$$\sqrt{{x_1}^2+{y_1}^2}\ge2\times \sqrt{{x_0}^2+{y_0}^2}$$</span></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/222520/">222520</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




