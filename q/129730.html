<!DOCTYPE html>
<html>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBTM9J4LK"></script>
<script src="../g.js"></script>
    <title>cg::129730</title>
    <link rel="stylesheet" href="../c.css">
</head>
<body>
    <br><br>
    <div id = "content">
    <div id="container">
    <div id="mf">
        <a href="#" class="nonewtab" d-g="g">g</a> | 
        <a href="#" class="nonewtab" d-g="x">x</a> | 
        <a href="#" class="nonewtab" d-g="w">w</a> | 
        <a href="#" class="nonewtab" d-g="">all</a>
    </div>
    <input type="text" id="mi" placeholder="/">
    </div>

<table id="mt">
  <tr class="header">
    <th class="tbytes">Bytes</th>
    <th class="tlang">Lang</th>
    <th class="ttime">Time</th>
    <th class="tlink">Link</th>
  </tr>
<tr d-ix="0"><td>022</td><td>Vyxal</td><td>240905T003124Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/275359#275359">emanresu</a></td></tr>
<tr d-ix="1"><td>019</td><td>Jelly</td><td>201008T174749Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/212195#212195">caird co</a></td></tr>
<tr d-ix="2"><td>038</td><td>05AB1E</td><td>201008T233850Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/212201#212201">SomoKRoc</a></td></tr>
<tr d-ix="3"><td>155</td><td>Python 3</td><td>170704T111920Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129765#129765">Mr. Xcod</a></td></tr>
<tr d-ix="4"><td>125</td><td>Python 3</td><td>170706T225257Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/130269#130269">EFT</a></td></tr>
<tr d-ix="5"><td>026</td><td>Jelly</td><td>170704T135721Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129806#129806">PurkkaKo</a></td></tr>
<tr d-ix="6"><td>170</td><td>JavaScript ES6</td><td>170704T232647Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129877#129877">Justin M</a></td></tr>
<tr d-ix="7"><td>064</td><td>Octave</td><td>170704T100649Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129741#129741">Stewie G</a></td></tr>
<tr d-ix="8"><td>211</td><td>PHP</td><td>170704T161113Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129821#129821">J&#246;r</a></td></tr>
<tr d-ix="9"><td>026</td><td>MATL</td><td>170704T111906Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129764#129764">Luis Men</a></td></tr>
<tr d-ix="10"><td>129</td><td>R</td><td>170704T141732Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129807#129807">rturnbul</a></td></tr>
<tr d-ix="11"><td>174</td><td>Python 2</td><td>170704T113146Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129769#129769">mdahmoun</a></td></tr>
<tr d-ix="12"><td>198</td><td>LOGO</td><td>170704T103406Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129749#129749">DELETE_M</a></td></tr>
<tr d-ix="13"><td>037</td><td>APL Dyalog</td><td>170704T100149Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129739#129739">Ad&#225;</a></td></tr>
<tr d-ix="14"><td>027</td><td>Jelly</td><td>170704T091545Z</td><td><a href="https://codegolf.stackexchange.com/questions/129730/pad-a-matrix-with-its-sums/129734#129734">Erik the</a></td></tr>
</table>
<div id="pu0" class="pu"><h1><a href="https://github.com/Vyxal/Vyxal/tree/version-2" rel="nofollow noreferrer">Vyxal</a>, 22 bytes</h1>
<pre><code>∑pǏ∩?₍Þ/Þ\ṠḂ&quot;?Ṡvjvw$j∩
</code></pre>
<p><a href="https://vyxal.pythonanywhere.com/?v=2&amp;c=1#WyIiLCIiLCLiiJFwx4/iiKk/4oKNw54vw55cXOG5oOG4glwiP+G5oHZqdnckauKIqSIsIiIsIltbMSw1LDNdLFszLDIsNF0sWzIsNSw1XV0iXQ==" rel="nofollow noreferrer">Try it Online!</a></p>
<p>I don't particularly like this, and I'm sure there's a more elegant way to do the last part.</p>
<pre><code> p                     # Prepend
  Ǐ                    # And append
∑                      # The column sums
   ∩                   # Transpose the result
                 vw$j  # Insert into the middle of
    ?₍Þ/Þ\             # Diagonals
          Ṡ            # Summed
           Ḃ&quot;          # Pair with a reversed copy
               vj      # Insert into the middle of each
             ?Ṡ        # Column sums
                     ∩ # Transpose again
</code></pre>
</div>
<div id="pu1" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, <s>24</s> 19 bytes</h1>
<pre><code>,U$⁺Æṭj€SW€j§,&quot;`j&quot;Ɗ
</code></pre>
<p><a href="https://tio.run/##TU8xCsJQDN1zivBxETo0v7baE3gAUQcRXFyKF3CrIhY8g84uuoiD1U1BvEZ7kW8SrXZI8v7j5b38ZDqbzZ3z@o1ycX2si/yYlMtDb8gtue89M0nMc@OK2/meP7PicmJeEI8B1yPrFvnqtS/TbZnuGDYr7NwIjDFAiBhyBRBwt1wtsF8uFIWnMv8PiXkfbY1oy2aLG4obdgSEYMVQfVAEJAKKAFUYyUMTfWkWSCZJMsXCqFMAJJPE0aqTCDCuZYe/WN21H391w1izQQ/SRL2GCDCo4vUq1N/B@A0" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>I know there's already 2 Jelly answers, but this, I think, is fairly different from them both, and is shorter.</p>
<p>The Footer in the TIO link converts the inputs into 2D arrays, runs the above link over them then outputs them similar to the input format.</p>
<h2>How it works</h2>
<pre><code>,U$⁺Æṭj€SW€j§,&quot;`j&quot;Ɗ - Main link. Takes a matrix A on the right
  $                 - Collect the previous two links:
 U                  -   Reverse each row of A
                        rev(A) = A with reversed rows
,                   -   Yield the pair [A, rev(A)]
   ⁺                - Do this again on [A, rev(a)]:
                      [A, rev(A)]U   -&gt; [rev(A), A]
                      [A, rev(A)],U$ -&gt; [[A, rev(A)], [rev(A), A]]

    Æṭ              - Take the trace of each.
                       This returns [[Tr(A), Tr(rev(A))], [Tr(rev(A)), Tr(A)]]
                       where Tr(·) returns the trace

        S           - Yield the sums of the columns of A
       €            - Over each pair in l:
      j             -   Insert the column sums between their elements
         W€         - Wrap each in an array
                  Ɗ - Group and run the previous commands on A:
            §       -   Yield the row sums of A
             ,&quot;`    -   Pair each with itself
                 &quot;  -   Zip the rows of A with the pairs of row sums
                j   -   Insert each row between each pair.
           j        - Insert the rows plus their sums in between the diagonal and column sums
</code></pre>
</div>
<div id="pu2" class="pu"><h1><a href="https://github.com/Adriandmen/05AB1E" rel="nofollow noreferrer">05AB1E</a>, 38 bytes</h1>
<pre><code>ODŠζsζ€R€˜IÅ\OUIÅ/OVIÅ|ODXšYªsXªYšŠšsª
</code></pre>
<p><a href="https://tio.run/##yy9OTMpM/f/f3@XognPbis9te9S0JgiIT8/xPNwa4x8KJPX9w4Bkjb9LxNGFkYdWFUccWhV5dOHRBUcXFh9a9f9/dLShjmmsTrSBjlFsLAA" rel="nofollow noreferrer">Try it online!</a></p>
<h3>Input</h3>
<p>A list of lists as a representation of a matrix.</p>
<h3>Output</h3>
<p>A list of lists as a representation of a matrix.</p>
<h3>Explanation</h3>
<pre><code>ODŠζsζ€R€˜IÅ\OUIÅ/OVIÅ|ODXšYªsXªYšŠšsª
OD                                            Sum of rows and duplicate
  Š                                           Triple swap
   ζ                                          Zip arrays (to append to the rows)
    sζ                                        Swap and do the same (to prepend to the rows)
      €R€˜                                    Reverse each row and deep flat each row, making the new rows.
          IÅ\OU                               Get the diagonal of the input, sum it and save in variable X
               IÅ/OV                          Get the anti-diagonal of the input, sum it and save in variable Y
                    IÅ|OD                     Get the columns of the input, sum it and duplicate the sums vector.
                         Xš                   Prepend variable x
                           Yª                 Append variable y
                             sXªYš            Repeat for the second row, but now the prepend and append values are switched
                                  Ššsª        Append and Prepend the new rows (first and last)
</code></pre>
</div>
<div id="pu3" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 155 bytes</h1>

<p>This is the suggestion of @LeakyNun, which saves <strong>54 bytes</strong>. I then golfed it myself a bit.</p>



<pre class="lang-python prettyprint-override"><code>def f(m):l=len(m);r=range(l);s=sum;b=[s(m[i][i]for i in r)];c=[s(m[i][l+~i]for i in r)];d=[*map(s,zip(*m))];return[b+d+c,*[[s(a),*a,s(a)]for a in m],c+d+b]
</code></pre>

<p><a href="https://tio.run/##dU65boQwEO3zFS5tmGJtwl6IL7FcmCtBwl5k2CIp8uvkDavdIlIkzIzf6flr/bzFYtu6fhCDDOo61VMfsVSpTj5@9HJS1VIv91A1tV1ksKPDN9ySGMUYRVKual/ElP/84braZsHPcqHvcZZZUMBSv95TtE3e5S1lFmavKPPEc3d7dgdHLRSN2@Y0xlUO0lp9ImHeSWgSZ/xLR9YUJEoSIDQTR0CYR6wgzAHHANJYtMG5AIC7YAxTI8bADurinFJvj67n3DvLvY/NSBKczmkIOvH1vJexRvO1eBTzWw7/BULOUn4bS7Zf" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<h1>Initial solution - <a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 216 bytes</h1>



<pre class="lang-python prettyprint-override"><code>def f(m):l=len(m);r,s=range(l),sum;a,b,c,d=s(m[i][i]for i in r),s(m[i][l-i-1]for i in r),[s(m[i][j]for j in r)for i in r],[s(m[i][j]for i in r)for j in r];print([[a]+d+[b]]+[[c[i]]+m[i]+[c[i]]for i in r]+[[b]+d+[a]])
</code></pre>

<p><a href="https://tio.run/##ZU/JboMwEL3nK@YI8kSKTclSxJdYPkCA1hE4kUkP@XryBldKFwnj8Vvt2@P@eQ3FsnT9QEM25e9jPfYBQxV5rmMTPvpszHn@mqqGWz5zV8/ZZL3DN1wjefKBIgQJHLd@q38R9pu5rOgloS@B@yPwL0HSuuoWfbhn1jZOdcq2zilrz3A4JT6V5h@JoNtV2jiXLwOc@sBk3pg00xH/EqWmYCqZQGgh9oCw7zGCMDssA0hj0AbrBADuQjDsGjEGdlAnlGzSFfPNWlauReJCBEmsxCDhIMfj2iIaLcciNcoldv@SoBON3Eae8gQ" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>
</div>
<div id="pu4" class="pu"><h1><a href="https://docs.python.org/3/" rel="nofollow noreferrer">Python 3</a>, 125 bytes</h1>



<pre class="lang-python prettyprint-override"><code>from numpy import*
f=lambda m,t=trace,s=sum:c_[r_[t(m),s(m,1),t(m[::-1])],c_[s(m,0),m.T,s(m,0)].T,r_[t(m[::-1]),s(m,1),t(m)]]
</code></pre>

<p><a href="https://tio.run/##dVDLboMwELznK3zE0bZiTcgDib/ozbIiNy1qpBiQcQ58PZk1OVRVc8Hj2Z2HGef0M/TVsnRxCKq/h3FW1zAOMW03XXvz4fPLq0CpTdFfvmlqp3toLmcbzzYVQdNUBGJNwLZp3thpR5gKW2oK7x@0Qge0Sp5rv4TauWWM1z4VXeFj9HNhLZOqSVWOlK1IGVI7gSaztXNa681fSfk/LU6iLWHzYuOA0Y4UNo/4YtuaKidhwDLYg8K5B5Q2YmVAMQCjE59AcK5rGSfDxtS59ulFZJ3jRGuknITADD4HuR5zluzw8w9IrlRZH7k8AA" rel="nofollow noreferrer" title="Python 3 – Try It Online">Try it online!</a></p>

<p>Slightly ungolfed:</p>

<pre class="lang-python prettyprint-override"><code>import numpy as np

def f_expanded(m):
    return np.c_[np.r_[np.trace(m), np.sum(m, 1), np.trace(m[::-1])],
                 np.c_[np.sum(m, 0), m.T, np.sum(m, 0)].T,
                 np.r_[np.trace(m[::-1]), np.sum(m, 1), np.trace(m)]]
</code></pre>

<p>This takes input formatted as a numpy array, then uses the <code>np.c_</code> and <code>np.r_</code> indexing tools to build a new array in one go. <code>np.trace</code> and <code>np.sum</code>are used to calculate the sums along the diagonals and everywhere else, respectively. <code>T</code> is used to take the transpose before and after concatenating the sums because it's shorter than making all the arrays 2-dimensional and using <code>np.r_</code>. <code>m[::-1]</code> saves bytes when compared to <code>rot90(m)</code> or <code>fliplr(m)</code> for finding the trace for the second diagonal.</p>
</div>
<div id="pu5" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="nofollow noreferrer">Jelly</a>, 26 bytes</h1>
<pre><code>ŒDµḊṖÑµ€1¦ŒḌU
S;;S
Ç€Zµ⁺ÑÑ
</code></pre>
<p><a href="https://tio.run/##y0rNyan8///oJJdDWx/u6Hq4c9rhiYe2PmpaY3ho2dFJD3f0hHIFW1sHcx1uB4pFAWUadx2eeHji////o6MNTXUUgMAQTBqBSEOjWB2uaAUTMNsALG4JJs3B4hZgthmYBOs1NASLG4PZEBKsV8EgNhYA" rel="nofollow noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
<p>Looks surprisingly different from <a href="https://codegolf.stackexchange.com/a/129734/30164">Erik's solution</a>.</p>
<p>I finally managed to understand how <code>¦</code> works (by debugging through Jelly's code, lol). Too bad it requires a <code>€</code> to work with <code>Ç</code> in my case.</p>
<h3>Explanation</h3>
<p>The code uses three links. The first helper link pads a vector with its sum on both ends, the second helper link fixes two corners of the matrix and the main link calls these appropriately.</p>
<pre><code>Ç€Zµ⁺ÑÑ    Main link. Argument: M (matrix)
Ç            Call the first helper link (pad row with sums)...
 €           ...on each row of the matrix.
  Z          Transpose, so that the second invocation uses the columns.
   µ         Begin a new monadic chain.
    ⁺        Repeat the previous chain (everything up to here).
     ÑÑ      Call the second helper link twice on the whole matrix.

S;;S    First helper link. Argument: v (1-dimensional list)
S         Sum the argument list.
 ;        Append the argument list to the sum.
  ;       Append...
   S      ...the sum of the argument list.

ŒDµḊṖÑµ€1¦ŒḌU    Second helper link. Argument: M (matrix)
ŒD                 Get the diagonals of the matrix, starting with the main diagonal.
  µ                Begin a new monadic chain.
      µ€           Perform the following actions on each diagonal...
        1¦         ...and keep the result for the first item (main diagonal):
   Ḋ                 Remove the first item (incorrect top corner).
    Ṗ                Remove the last item (incorrect bottom corner).
     Ñ               Call the first helper link on the diagonal to pad it with its sum.
          ŒḌ       Convert the diagonals back to the matrix.
            U      Reverse each row, so that consecutive calls fix the other corners.
</code></pre>
</div>
<div id="pu6" class="pu"><h1>JavaScript (ES6), 170 bytes</h1>



<pre class="lang-js prettyprint-override"><code>(a,m=g=&gt;a.map((_,i)=&gt;g(i)),s=x=&gt;eval(x.join`+`))=&gt;[[d=s(m(i=&gt;a[i][i])),...c=m(i=&gt;s(m(j=&gt;a[j][i]))),g=s(m(i=&gt;a[i][a.length-i-1]))],...a.map(b=&gt;[r=s(b),...b,r]),[g,...c,d]]
</code></pre>

<p>Input and output is a 2D array of numbers.</p>

<h2>Explained</h2>

<pre class="lang-js prettyprint-override"><code>(a,                             // input matrix: a
    m=g=&gt;a.map((_,i)=&gt;g(i)),    // helper func m: map by index
    s=x=&gt;eval(x.join`+`)        // helper func s: array sum
) =&gt;
[
    [
        d = s(m(i=&gt;a[i][i])),           // diagonal sum: d
        ...c=m(i=&gt;s(m(j=&gt;a[j][i]))),    // column sums: c
        g = s(m(i=&gt;a[i][a.length-i-1])) // antidiagonal sum: g
    ],
    ...a.map(b=&gt;[r = s(b), ...b, r]),   // all rows with row sums on each end
    [g, ...c, d]                        // same as top row, with corners flipped
]
</code></pre>

<h2>Test Snippet</h2>

<p>Input/output has been formatted with newlines and tabs.</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>f=
(a,m=g=&gt;a.map((_,i)=&gt;g(i)),s=x=&gt;eval(x.join`+`))=&gt;[[d=s(m(i=&gt;a[i][i])),...c=m(i=&gt;s(m(j=&gt;a[j][i]))),g=s(m(i=&gt;a[i][a.length-i-1]))],...a.map(b=&gt;[r=s(b),...b,r]),[g,...c,d]]

let tests=[[[0]],[[1,5],[0,2]],[[17,24,1,8,15],[23,5,7,14,16],[4,6,13,20,22],[10,12,19,21,3],[11,18,25,2,9]],[[15,1,2,12],[4,10,9,7],[8,6,5,11],[3,13,14,0]]];</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;select id=S oninput="I.value=S.selectedIndex?tests[S.value-1].map(s=&gt;s.join`\t`).join`\n`:''"&gt;&lt;option&gt;Tests&lt;option&gt;1&lt;option&gt;2&lt;option&gt;3&lt;option&gt;4&lt;/select&gt; &lt;button onclick="O.innerHTML=I.value.trim()?f(I.value.split`\n`.map(s=&gt;s.trim().split(/\s+/g))).map(s=&gt;s.join`\t`).join`\n`:''"&gt;Run&lt;/button&gt;&lt;br&gt;&lt;textarea rows=6 cols=50 id=I&gt;&lt;/textarea&gt;&lt;pre id=O&gt;</code></pre>
</div>
</div>
</p>
</div>
<div id="pu7" class="pu"><h1><a href="https://www.gnu.org/software/octave/" rel="nofollow noreferrer">Octave</a>, 64 bytes</h1>

<p>Thanks to Tom Carpenter for both saving 4 bytes, <em>and</em> correcting an error I had in the original code!</p>



<pre class="lang-matlab prettyprint-override"><code>@(a)[b=(t=@trace)(a),c=sum(a),d=t(flip(a));z=sum(a,2),a,z;d,c,b]
</code></pre>

<p><a href="https://tio.run/##LU1BCoMwELz3FXtMYBGzVq2EgP8QDxoNFFpa2rQHP59OtIdkZ2Z3Zh4@Tt81BVcURerVpIfZqej6@Jr8qsHZu/fnnsHiogq36xNY2@1QWTRPvNmFPc9jCqrUp6AGw1RbKplkPHgLeGaCfsGPnVQ4YYJust5YwmiAoEs2iiWDaQSvA4e1goRhECHwYtP94@s9Op/KHpSdMLU21zV7kzGWqiM/N5ajTj8" rel="nofollow noreferrer" title="Octave – Try It Online">Try it online!</a></p>

<p><strong>Explanation:</strong></p>

<pre class="lang-matlab prettyprint-override"><code>@(a)                 % Anonymous function that takes the matrix 'a' as input
 [ ... ]             % Concatenate everything inside to a single matrix
  b=(t=@trace)(a),   % Clever trick by Tom Carpenter. Save a function handle 
                     % for 't=trace', and call it with 'a' as input
                     % Save the result in the variable 'b'
  c=sum(a)           % Sum of all columns of 'a'
  d=t(flip(a));      % Save the trace of 'a' flipped as a variable 'd', while 
                     % concatenating [b,c,d] horizontally at the same time, creating the 
                     % first row of the output
  z=sum(a,2)         % The sum of each row of the input, and store it in a variable 'z'
  ,a,z;              % Concatenate it with 'a' and 'z' again, to create the middle part of the output
 d,c,b]              % Add [d,c,b] to complete the bottom row
</code></pre>

<hr>

<p><sub>Note, I wrote this long after I posted the challenge.</sub></p>
</div>
<div id="pu8" class="pu"><h1><a href="https://php.net/" rel="nofollow noreferrer">PHP</a>, 211 bytes</h1>



<pre class="lang-php prettyprint-override"><code>&lt;?foreach($_GET as$l=&gt;$r){$y=0;foreach($r as$k=&gt;$c){$y+=$c;$x[$k]+=$c;$l-$k?:$d+=$c;($z=count($_GET))-1-$k-$l?:$h+=$c;}$o[]=[-1=&gt;$y]+$r+[$z=&gt;$y];}$o[]=[-1=&gt;$h]+$x+[$z=&gt;$d];print_r([-1=&gt;[-1=&gt;$d]+$x+[$z=&gt;$h]]+$o);
</code></pre>

<p><a href="https://tio.run/##XY5NasMwEIX3OUVQZ2FjGzxOnJ@qalalF@hOiBDsBgWbWKgJJC09uzsjG9N2odEbfW@exlnXP@2cdTPYv768Ka0FilSUdBbCpJpqKgo6y9AVIyuFMXL2MM3k/3pc89iSCqdt@C6HgMWYwAYMhlUALFfchg9zLkUAyBr5Y9zyK06rIUvk8KIct9zyHv2x8@@HykZhnfnhA1r1DD7@grvK5QQ9k4ZIxSRRUEm4aWjMINsMmt0j1KGL4FNV3fV8GTLjOEPCGbTksMHxDZ02SmdIgXeTgE80zbD@gyyh24hqI50/nS97HwU4OOpfDmuo6WLZ9z8" rel="nofollow noreferrer" title="PHP – Try It Online">Try it online!</a></p>

<p>Expanded</p>



<pre class="lang-php prettyprint-override"><code>foreach($_GET as$l=&gt;$r){
  $y=0; # sum for a row
  foreach($r as$k=&gt;$c){
    $y+=$c; # add to sum for a row
    $x[$k]+=$c; # add to sum for a column and store in array
    $l-$k?:$d+=$c; # make the diagonal sum left to right
    ($z=count($_GET))-1-$k-$l?:$h+=$c; # make the diagonal sum right to left
  }
  $o[]=[-1=&gt;$y]+$r+[$z=&gt;$y]; # add to result array the actual row with sum of both sides
}
$o[]=[-1=&gt;$h]+$x+[$z=&gt;$d]; # add to result array the last array
print_r([-1=&gt;[-1=&gt;$d]+$x+[$z=&gt;$h]]+$o); #output after adding the first array to the result array
</code></pre>
</div>
<div id="pu9" class="pu"><h1><a href="https://github.com/lmendo/MATL" rel="nofollow noreferrer">MATL</a>, <s>27</s> 26 bytes</h1>
<pre><code>,!tXswyv]GXds5L(PGPXds5L(P
</code></pre>
<p><a href="https://tio.run/##y00syfn/X0exJKK4vLIs1j0ipdjURyPAPQDK@P8/2lDBVMHYWsFYwUjBxBpImCqYxgIA" rel="nofollow noreferrer" title="MATL – Try It Online">Try it online!</a> Or <a href="https://tio.run/##LY69CsJAEIR7n2KsYmHgZpNLclxrkcIihcVBCChYapUQ8enPObDYZZmfj30/tle@pzGfj1taP999GdNz9dfTNE7/I1d1XVfpcssz4dFENDC0UcvDL4fZaeREOFg5e1gLYgClWaMUelBSF9GiA9VX1CLoQAMDjIVLggPMixwKyIsi20pN0YA@itoJSJYvBBLWLT8" rel="nofollow noreferrer">verify all test cases</a>.</p>
<h3>Explanation</h3>
<pre><code>,        % Do the following twice
  !      %   Tranpose. Takes input implititly in the first iteration
  t      %   Duplicate
  Xs     %   Row vector with the sum of each column
  wy     %   Push a copy to the bottom of the stack
  v      %   Concatenate stack vertically. This attaches the sum of
         %   each row (first iteration) and column (second), leaving 
         %   the matrix with the correct orientation (transposed twice)
]        % End
G        % Push input again
Xds      % Column vector with the diagonal of the matrix. Sum of vector
5L(      % Write that into first and last entries of the result matrix
         % matrix; that is, its upper-left and lower-right corners
P        % Flip result matrix vertically
GP       % Push input matrix vertically flipped
Xds      % Diagonal, sum. Since the input has been vertically flipped,
         % this gives the sum of the anti-diagonal of the input.
5L(      % Write that into the upper-left and lower-right corners of
         % the verticallly flipped version of the result matrix
P        % Flip vertically again, to restore initial orientation
         % Implicitly display
</code></pre>
</div>
<div id="pu10" class="pu"><h1>R, 129 bytes</h1>

<pre><code>pryr::f(t(matrix(c(d&lt;-sum(diag(m)),c&lt;-colSums(m),a&lt;-sum(diag(m[(n&lt;-nrow(m)):1,])),t(matrix(c(r&lt;-rowSums(m),m,r),n)),a,c,d),n+2)))
</code></pre>

<p>An anonymous function that takes a square matrix as input. I'll post an explanation if there's interest.</p>
</div>
<div id="pu11" class="pu"><h1><a href="https://docs.python.org/2/" rel="nofollow noreferrer">Python 2</a>, <s>268</s> <s>250</s> <s>184</s> 174 bytes</h1>

<p>10 thanks to Stewie Griffin</p>



<pre class="lang-python prettyprint-override"><code>from numpy import *
a,c,v,s=sum,trace,vstack,matrix(input())
l,r,d,e=a(s,0),a(s,1),c(s),c(fliplr(s))
print hstack((v(([[d]],r,[[e]])),v((l,s,l)),v(([[e]],r,[[d]])))).tolist()
</code></pre>

<p><a href="https://tio.run/##JY1LjsMgEET3PkUvISpFgUx@i5wEsUC2o6ABGwG2Jqf3NM6im6d6ojp96nue9La98hxpWmL6kI9pzpUOnUOPFeVZloiaXT9iLdX1v4iuZv8n/JSWKqTsAjIGjE8nCk4S7VESvShtvYJPITPLLmU/VXrvJUKsQhgzWMufjRmtlRIcBRSEL@7pbodmpTzWOfjCJ7fNGHUD6R@QAt15XyzI6DPoAmKjmrm2jOHKzEafeHTLFJPSPA9OuOC8hwyKqzQ3sGNl7T8" rel="nofollow noreferrer" title="Python 2 – Try It Online">Try it online!</a></p>

<p><strong>Some explanations</strong>
The input is uploaded as a matrix. First the code computes the sum of each column and each row using numpy.sum. Then it computes the sum of the diagonal by numpy.trace. After this it obtains the other diagonal by making a left-right flip on the matrix. Finally, it uses numpy.vstack and numpy.hstack to glue the pieces together.</p>
</div>
<div id="pu12" class="pu"><h2><a href="https://sourceforge.net/projects/fmslogo/" rel="nofollow noreferrer">LOGO</a>, 198 bytes</h2>
<pre><code>to g :v[:h reduce &quot;+ :v]
op(se :h :v :h)
end
to f :s[:a reduce &quot;+ map[item # ?]:s][:b reduce &quot;+ map[item # reverse ?]:s][:c apply &quot;map se &quot;sum :s]
op `[[,:a ,@:c ,:b],@[map &quot;g :s][,:b ,@:c ,:a]]
end
</code></pre>
<p>The function <code>f</code> takes in a matrix as a 2D list, then output the resulting matrix. <code>g</code> is helper function.</p>
</div>
<div id="pu13" class="pu"><h1><a href="https://www.dyalog.com/" rel="nofollow noreferrer">APL (Dyalog)</a>, 37 bytes</h1>



<pre class="lang-apl prettyprint-override"><code>(d,+⌿,d∘⌽)⍪(+/,⊢,+/)⍪d∘⌽,+⌿,d←+/1 1∘⍉
</code></pre>

<p><a href="https://tio.run/##NY0xCsJAEEWv8stdNpLMZDcmxwkEbQLaeoGgkkBKayuxthXBo@xF4l@IxQ4789@8aY/9pju1/WG/LLs4zKbLXBw/WRfPtzi@bZyexuVZvN4zl6duDf7UMLtcIGk4Xaj4PkyJMk4vQQB/UHi@gGDXoLBGoStRQK1hmNot1ENQQwK0ZLiFcFBRUEFoIqyQAsLaQIV24e0aygU01nj4JAq0aKJ8oht6ahpCgsskorWwPw" rel="nofollow noreferrer" title="APL (Dyalog Unicode) – Try It Online">Try it online!</a></p>

<p><code>1 1∘⍉</code> diagonal (lit. collapse both axes into one)</p>

<p><code>d←</code> store that function as <em>d</em> and apply it to the argument</p>

<p><code>+⌿</code> prepend the column sums</p>

<p><code>d∘⌽,</code> prepend <em>d</em> applied to the reversed argument</p>

<p><code>(</code>…<code>)⍪</code> stack the following on top:</p>

<p> <code>+/,⊢,+/</code> row sums, the unmodified argument, row sums</p>

<p><code>(</code>…<code>)⍪</code> stack the following on top:</p>

<p> <code>d,+⌿,d∘⌽</code> applied to the argument, column sums, <em>d</em> applied to the reversed argument</p>
</div>
<div id="pu14" class="pu"><h1><a href="https://github.com/DennisMitchell/jelly" rel="noreferrer">Jelly</a>, 27 bytes</h1>

<pre><code>,UŒDḢ$S$€,Ṛ$j€SW€jSẋ¥€2$j"$
</code></pre>

<p><a href="https://tio.run/##y0rNyan8/18n9Ogkl4c7FqkEqzxqWqPzcOcslSwgIzgcSGQFP9zVfWgpkGWkkqWk8v///@hoQx0F01gdhWgDHQWj2FgA" rel="noreferrer" title="Jelly – Try It Online">Try it online!</a></p>
</div>

<table id="st">
<!-- Popups content will be added here -->
</table>

<table id="at">
<!-- Popups content will be added here -->
</table>

</div>





  <div class="footer">
      <b><a class="nonewtab" href="../">GOLFSCORE/</a><a href="https://codegolf.stackexchange.com/questions/129730/">129730</a></b>
  </div>
<div class="footer-space">&nbsp;</div>



<script src="../c.js"> </script>
</body>
</html>




